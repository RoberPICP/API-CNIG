!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=334)}([function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(3),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){(function(t){var r;
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */(function(){var n,i,o,a,s,u,l,c,h,f,p,d,m,y,g,v,_,b,w,x,M,S,E,O,T,P,I,k,R,L,C,A,N,j,F,D,B,z,G,q,U,V,W,Y,Z,H,X,K,J,$,Q,tt,et,rt,nt,it,ot,at,st,ut,lt,ct,ht,ft,pt,dt,mt,yt,gt,vt,_t,bt,wt,xt,Mt,St,Et,Ot,Tt,Pt,It=[].slice;St=function(){var t,e,r,n,i;for(t={},n=0,e=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<e;n++)r=i[n],t["[object "+r+"]"]=r.toLowerCase();return function(e){var r;return r=Object.prototype.toString.call(e),t[r]||"object"}}(),X=function(t,e,r){return null==e&&(e=0),null==r&&(r=1),t<e&&(t=e),t>r&&(t=r),t},Et=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},M=function(t){var e,r;for(t._clipped=!1,t._unclipped=t.slice(0),e=r=0;r<3;e=++r)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},a=Math.PI,_t=Math.round,E=Math.cos,k=Math.floor,nt=Math.pow,K=Math.log,wt=Math.sin,xt=Math.sqrt,y=Math.atan2,Q=Math.max,m=Math.abs,l=2*a,s=a/3,i=a/180,u=180/a,(x=function(){return arguments[0]instanceof n?arguments[0]:function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,arguments,(function(){}))}).default=x,d=[],null!==t&&null!=t.exports&&(t.exports=x),void 0===(r=function(){return x}.apply(e,[]))||(t.exports=r),x.version="1.4.1",p={},h=[],f=!1,n=function(){function t(){var t,e,r,n,i,o,a,s,u;for(o=this,e=[],s=0,n=arguments.length;s<n;s++)null!=(t=arguments[s])&&e.push(t);if(e.length>1&&(a=e[e.length-1]),null!=p[a])o._rgb=M(p[a](Et(e.slice(0,-1))));else{for(f||(h=h.sort((function(t,e){return e.p-t.p})),f=!0),u=0,i=h.length;u<i&&!(a=(r=h[u]).test.apply(r,e));u++);a&&(o._rgb=M(p[a].apply(p,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),x._input=p,
/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
x.brewer=b={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],b)e.push(b[t.toLowerCase()]=b[t])}(),x.colors=Ot={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},V=function(){var t,e,r,n,i,a,s;return n=(e=Et(arguments))[0],t=e[1],r=e[2],a=(n+16)/116,i=isNaN(t)?a:a+t/500,s=isNaN(r)?a:a-r/200,a=o.Yn*W(a),i=o.Xn*W(i),s=o.Zn*W(s),[Pt(3.2404542*i-1.5371385*a-.4985314*s),Pt(-.969266*i+1.8760108*a+.041556*s),r=Pt(.0556434*i-.2040259*a+1.0572252*s),e.length>3?e[3]:1]},Pt=function(t){return 255*(t<=.00304?12.92*t:1.055*nt(t,1/2.4)-.055)},W=function(t){return t>o.t1?t*t*t:o.t2*(t-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ht=function(){var t,e,r,n,i,o,a;return r=(n=Et(arguments))[0],e=n[1],t=n[2],o=(i=yt(r,e,t))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},gt=function(t){return(t/=255)<=.04045?t/12.92:nt((t+.055)/1.055,2.4)},Tt=function(t){return t>o.t3?nt(t,1/3):t/o.t2+o.t0},yt=function(){var t,e,r,n;return r=(n=Et(arguments))[0],e=n[1],t=n[2],r=gt(r),e=gt(e),t=gt(t),[Tt((.4124564*r+.3575761*e+.1804375*t)/o.Xn),Tt((.2126729*r+.7151522*e+.072175*t)/o.Yn),Tt((.0193339*r+.119192*e+.9503041*t)/o.Zn)]},x.lab=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["lab"]),(function(){}))},p.lab=V,n.prototype.lab=function(){return ht(this._rgb)},g=function(t){var e,r,n,i,o,a,s,u,l,c,h;return 2===(t=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(x(i));return n}()).length?(l=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=l[0],a=l[1],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push(o[e]+t*(a[e]-o[e]));return n}(),x.lab.apply(x,r)}):3===t.length?(c=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*o[e]+2*(1-t)*t*a[e]+t*t*s[e]);return n}(),x.lab.apply(x,r)}):4===t.length?(h=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=h[0],a=h[1],s=h[2],u=h[3],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*u[e]);return n}(),x.lab.apply(x,r)}):5===t.length&&(r=g(t.slice(0,3)),n=g(t.slice(2,5)),e=function(t){return t<.5?r(2*t):n(2*(t-.5))}),e},x.bezier=function(t){var e;return(e=g(t)).scale=function(){return x.scale(e)},e},x.cubehelix=function(t,e,r,n,i){var o,a,s;return null==t&&(t=300),null==e&&(e=-1.5),null==r&&(r=1),null==n&&(n=1),null==i&&(i=[0,1]),o=0,"array"===St(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(s=function(s){var u,c,h,f,p;return u=l*((t+120)/360+e*s),f=nt(i[0]+a*s,n),c=(0!==o?r[0]+s*o:r)*f*(1-f)/2,h=E(u),p=wt(u),x(M([255*(f+c*(-.14861*h+1.78277*p)),255*(f+c*(-.29227*h-.90649*p)),255*(f+c*(1.97294*h)),1]))}).start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?n:(n=t,s)},s.hue=function(t){return null==t?r:("array"===St(r=t)?0===(o=r[1]-r[0])&&(r=r[1]):o=0,s)},s.lightness=function(t){return null==t?i:("array"===St(t)?(i=t,a=t[1]-t[0]):(i=[t,t],a=0),s)},s.scale=function(){return x.scale(s)},s.hue(r),s},x.random=function(){var t,e;for("0123456789abcdef",t="#",e=0;e<6;++e)t+="0123456789abcdef".charAt(k(16*Math.random()));return new n(t)},d=[],F=function(t,e,r,n){var i,o,a,s;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==St(t)&&(t=x(t)),"object"!==St(e)&&(e=x(e)),a=0,o=d.length;a<o;a++)if(n===(i=d[a])[0]){s=i[1](t,e,r,n);break}if(null==s)throw"color mode "+n+" is not supported";return s.alpha(t.alpha()+r*(e.alpha()-t.alpha()))},x.interpolate=F,n.prototype.interpolate=function(t,e,r){return F(this,t,e,r)},x.mix=F,n.prototype.mix=n.prototype.interpolate,p.rgb=function(){var t,e,r,n;for(t in r=[],e=Et(arguments))n=e[t],r.push(n);return r},x.rgb=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["rgb"]),(function(){}))},n.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},h.push({p:3,test:function(t){var e;return e=Et(arguments),"array"===St(e)&&3===e.length||4===e.length&&"number"===St(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),p.lrgb=p.rgb,z=function(t,e,r,i){var o,a;return o=t._rgb,a=e._rgb,new n(xt(nt(o[0],2)*(1-r)+nt(a[0],2)*r),xt(nt(o[1],2)*(1-r)+nt(a[1],2)*r),xt(nt(o[2],2)*(1-r)+nt(a[2],2)*r),i)},c=function(t){var e,r,i,o,a;for(e=1/t.length,a=[0,0,0,0],i=0,r=t.length;i<r;i++)o=t[i]._rgb,a[0]+=nt(o[0],2)*e,a[1]+=nt(o[1],2)*e,a[2]+=nt(o[2],2)*e,a[3]+=o[3]*e;return a[0]=xt(a[0]),a[1]=xt(a[1]),a[2]=xt(a[2]),a[3]>1&&(a[3]=1),new n(M(a))},d.push(["lrgb",z]),x.average=function(t,e){var r,n,i,o,s,u,l,h,f,p,d,m,g;if(null==e&&(e="rgb"),f=t.length,l=(t=t.map((function(t){return x(t)}))).splice(0,1)[0],"lrgb"===e)return c(t);for(h in o=[],s=0,u=0,m=l.get(e))m[h]=m[h]||0,o.push(isNaN(m[h])?0:1),"h"!==e.charAt(h)||isNaN(m[h])||(r=m[h]/180*a,s+=E(r),u+=wt(r));for(n=l.alpha(),d=0,p=t.length;d<p;d++)for(h in g=(i=t[d]).get(e),n+=i.alpha(),m)isNaN(g[h])||(o[h]+=1,"h"===e.charAt(h)?(r=g[h]/180*a,s+=E(r),u+=wt(r)):m[h]+=g[h]);for(h in m)if("h"===e.charAt(h)){for(r=y(u/o[h],s/o[h])/a*180;r<0;)r+=360;for(;r>=360;)r-=360;m[h]=r}else m[h]=m[h]/o[h];return x(m,e).alpha(n/f)},L=function(t){var e,r;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(r=parseInt(t,16))>>16,r>>8&255,255&r,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(r=parseInt(t,16))>>24&255,r>>16&255,r>>8&255,_t((255&r)/255*100)/100];if(null!=p.css&&(e=p.css(t)))return e;throw"unknown color: "+t},st=function(t,e){var r,n,i,o,a,s;return null==e&&(e="auto"),a=t[0],i=t[1],n=t[2],r=t[3],"auto"===e&&(e=r<1?"rgba":"rgb"),a=Math.round(a),i=Math.round(i),n=Math.round(n),s=(s="000000"+(a<<16|i<<8|n).toString(16)).substr(s.length-6),o=(o="0"+_t(255*r).toString(16)).substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},p.hex=function(t){return L(t)},x.hex=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hex"]),(function(){}))},n.prototype.hex=function(t){return null==t&&(t="auto"),st(this._rgb,t)},h.push({p:4,test:function(t){if(1===arguments.length&&"string"===St(t))return"hex"}}),N=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p;if(i=(t=Et(arguments))[0],c=t[1],a=t[2],0===c)u=n=e=255*a;else{for(r=[0,0,0],h=2*a-(f=a<.5?a*(1+c):a+c-a*c),(p=[0,0,0])[0]=(i/=360)+1/3,p[1]=i,p[2]=i-1/3,o=s=0;s<=2;o=++s)p[o]<0&&(p[o]+=1),p[o]>1&&(p[o]-=1),6*p[o]<1?r[o]=h+6*(f-h)*p[o]:2*p[o]<1?r[o]=f:3*p[o]<2?r[o]=h+(f-h)*(2/3-p[o])*6:r[o]=h;u=(l=[_t(255*r[0]),_t(255*r[1]),_t(255*r[2])])[0],n=l[1],e=l[2]}return t.length>3?[u,n,e,t[3]]:[u,n,e]},lt=function(t,e,r){var n,i,o,a,s;return void 0!==t&&t.length>=3&&(t=(a=t)[0],e=a[1],r=a[2]),t/=255,e/=255,r/=255,o=Math.min(t,e,r),i=((Q=Math.max(t,e,r))+o)/2,Q===o?(s=0,n=Number.NaN):s=i<.5?(Q-o)/(Q+o):(Q-o)/(2-Q-o),t===Q?n=(e-r)/(Q-o):e===Q?n=2+(r-t)/(Q-o):r===Q&&(n=4+(t-e)/(Q-o)),(n*=60)<0&&(n+=360),[n,s,i]},x.hsl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hsl"]),(function(){}))},p.hsl=N,n.prototype.hsl=function(){return lt(this._rgb)},j=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g;if(i=(t=Et(arguments))[0],m=t[1],g=t[2],g*=255,0===m)u=n=e=g;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=g*(1-m),s=g*(1-m*(r=(i/=60)-(o=k(i)))),y=g*(1-m*(1-r)),o){case 0:u=(l=[g,y,a])[0],n=l[1],e=l[2];break;case 1:u=(c=[s,g,a])[0],n=c[1],e=c[2];break;case 2:u=(h=[a,g,y])[0],n=h[1],e=h[2];break;case 3:u=(f=[a,s,g])[0],n=f[1],e=f[2];break;case 4:u=(p=[y,a,g])[0],n=p[1],e=p[2];break;case 5:u=(d=[g,a,s])[0],n=d[1],e=d[2]}return[u,n,e,t.length>3?t[3]:1]},ct=function(){var t,e,r,n,i,o,a,s,u;return o=(a=Et(arguments))[0],r=a[1],t=a[2],i=Math.min(o,r,t),e=(Q=Math.max(o,r,t))-i,u=Q/255,0===Q?(n=Number.NaN,s=0):(s=e/Q,o===Q&&(n=(r-t)/e),r===Q&&(n=2+(t-o)/e),t===Q&&(n=4+(o-r)/e),(n*=60)<0&&(n+=360)),[n,s,u]},x.hsv=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hsv"]),(function(){}))},p.hsv=j,n.prototype.hsv=function(){return ct(this._rgb)},et=function(t){return"number"===St(t)&&t>=0&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},dt=function(){var t;return((t=Et(arguments))[0]<<16)+(t[1]<<8)+t[2]},x.num=function(t){return new n(t,"num")},n.prototype.num=function(t){return null==t&&(t="rgb"),dt(this._rgb,t)},p.num=et,h.push({p:1,test:function(t){if(1===arguments.length&&"number"===St(t)&&t>=0&&t<=16777215)return"num"}}),R=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g,v,_;if(s=(r=Et(arguments))[0],i=r[1],e=r[2],a=a/100*255,t=255*(i/=100),0===i)h=a=n=e;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),c=(l=e*(1-i))+t*(1-(o=(s/=60)-(u=k(s)))),v=l+t*o,_=l+t,u){case 0:h=(f=[_,v,l])[0],a=f[1],n=f[2];break;case 1:h=(p=[c,_,l])[0],a=p[1],n=p[2];break;case 2:h=(d=[l,_,v])[0],a=d[1],n=d[2];break;case 3:h=(m=[l,c,_])[0],a=m[1],n=m[2];break;case 4:h=(y=[v,l,_])[0],a=y[1],n=y[2];break;case 5:h=(g=[_,l,c])[0],a=g[1],n=g[2]}return[h,a,n,r.length>3?r[3]:1]},at=function(){var t,e,r,n,i,o,a,s,u;return s=(u=Et(arguments))[0],i=u[1],e=u[2],a=Math.min(s,i,e),r=100*(n=(Q=Math.max(s,i,e))-a)/255,t=a/(255-n)*100,0===n?o=Number.NaN:(s===Q&&(o=(i-e)/n),i===Q&&(o=2+(e-s)/n),e===Q&&(o=4+(s-i)/n),(o*=60)<0&&(o+=360)),[o,r,t]},x.hcg=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hcg"]),(function(){}))},p.hcg=R,n.prototype.hcg=function(){return at(this._rgb)},O=function(t){var e,r,n,i,o,a,s,u;if(t=t.toLowerCase(),null!=x.colors&&x.colors[t])return L(x.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=u=0;u<=3;i=++u)s[i]=+s[i];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=e=0;e<=2;i=++e)s[i]=_t(2.55*s[i]);s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=r=0;r<=2;i=++r)s[i]=_t(2.55*s[i]);s[3]=+s[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=N(n))[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=N(n))[3]=+o[4]);return s},ot=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(_t).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(_t).join(",")+","+t[3]+")":void 0},vt=function(t){return _t(100*t)/100},A=function(t,e){var r;return r=e<1?"hsla":"hsl",t[0]=vt(t[0]||0),t[1]=vt(100*t[1])+"%",t[2]=vt(100*t[2])+"%","hsla"===r&&(t[3]=e),r+"("+t.join(",")+")"},p.css=function(t){return O(t)},x.css=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["css"]),(function(){}))},n.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?ot(this._rgb):"hsl"===t.slice(0,3)?A(this.hsl(),this.alpha()):void 0},p.named=function(t){return L(Ot[t])},h.push({p:5,test:function(t){if(1===arguments.length&&null!=Ot[t])return"named"}}),n.prototype.name=function(t){var e,r;for(r in arguments.length&&(Ot[t]&&(this._rgb=L(Ot[t])),this._rgb[3]=1),e=this.hex("rgb"),Ot)if(e===Ot[r])return r;return e},Y=function(){var t,e,r,n;return r=(n=Et(arguments))[0],t=n[1],e=n[2],[r,E(e*=i)*t,wt(e)*t]},Z=function(){var t,e,r,n,i,o,a,s,u;return a=(r=Et(arguments))[0],i=r[1],o=r[2],t=(s=Y(a,i,o))[0],e=s[1],n=s[2],[(u=V(t,e,n))[0],u[1],n=u[2],r.length>3?r[3]:1]},U=function(){var t,e,r,n,i,o;return i=(o=Et(arguments))[0],t=o[1],e=o[2],r=xt(t*t+e*e),n=(y(e,t)*u+360)%360,0===_t(1e4*r)&&(n=Number.NaN),[i,r,n]},ft=function(){var t,e,r,n,i,o,a;return i=(o=Et(arguments))[0],r=o[1],e=o[2],n=(a=ht(i,r,e))[0],t=a[1],e=a[2],U(n,t,e)},x.lch=function(){var t;return t=Et(arguments),new n(t,"lch")},x.hcl=function(){var t;return t=Et(arguments),new n(t,"hcl")},p.lch=Z,p.hcl=function(){var t,e,r,n;return e=(n=Et(arguments))[0],t=n[1],r=n[2],Z([r,t,e])},n.prototype.lch=function(){return ft(this._rgb)},n.prototype.hcl=function(){return ft(this._rgb).reverse()},it=function(t){var e,r,n,i,o,a;return null==t&&(t="rgb"),o=(a=Et(arguments))[0],n=a[1],e=a[2],n/=255,e/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(n,e))))*(r=i<1?1/(1-i):0),(1-n-i)*r,(1-e-i)*r,i]},S=function(){var t,e,r,n,i,o;return r=(e=Et(arguments))[0],i=e[1],o=e[2],n=e[3],t=e.length>4?e[4]:1,1===n?[0,0,0,t]:[r>=1?0:255*(1-r)*(1-n),i>=1?0:255*(1-i)*(1-n),o>=1?0:255*(1-o)*(1-n),t]},p.cmyk=function(){return S(Et(arguments))},x.cmyk=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["cmyk"]),(function(){}))},n.prototype.cmyk=function(){return it(this._rgb)},p.gl=function(){var t,e,r,n,i;for(n=function(){var t,r;for(e in r=[],t=Et(arguments))i=t[e],r.push(i);return r}.apply(this,arguments),t=r=0;r<=2;t=++r)n[t]*=255;return n},x.gl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["gl"]),(function(){}))},n.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},pt=function(t,e,r){var n;return t=(n=Et(arguments))[0],e=n[1],r=n[2],.2126*(t=J(t))+.7152*(e=J(e))+.0722*(r=J(r))},J=function(t){return(t/=255)<=.03928?t/12.92:nt((t+.055)/1.055,2.4)},q=function(t,e,r,i){var o,a;return o=t._rgb,a=e._rgb,new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["rgb",q]),n.prototype.luminance=function(t,e){var r,n,i,o,a;return null==e&&(e="rgb"),arguments.length?(o=this._rgb,0===t?o=[0,0,0,this._rgb[3]]:1===t?o=[255,255,255,this[3]]:(r=pt(this._rgb),n=1e-7,i=20,a=function(r,o){var s,u;return s=(u=r.interpolate(o,.5,e)).luminance(),Math.abs(t-s)<n||!i--?u:s>t?a(r,u):a(u,o)},o=r>t?a(x("black"),this).rgba():a(this,x("white")).rgba()),x(o).alpha(this.alpha())):pt(this._rgb)},Mt=function(t){var e,r,n,i;return(i=t/100)<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*K(r),e=i<20?0:.8274096064007395*(e=i-10)-254.76935184120902+115.67994401066147*K(e)):(n=351.97690566805693+.114206453784165*(n=i-55)-40.25366309332127*K(n),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*K(r),e=255),[n,r,e]},mt=function(){var t,e,r,n,i,o,a,s;for(i=(o=Et(arguments))[0],o[1],t=o[2],n=1e3,r=4e4,e=.4;r-n>e;)(a=Mt(s=.5*(r+n)))[2]/a[0]>=t/i?r=s:n=s;return _t(s)},x.temperature=x.kelvin=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["temperature"]),(function(){}))},p.temperature=p.kelvin=p.K=Mt,n.prototype.temperature=function(){return mt(this._rgb)},n.prototype.kelvin=n.prototype.temperature,x.contrast=function(t,e){var r,i,o,a;return"string"!==(o=St(t))&&"number"!==o||(t=new n(t)),"string"!==(a=St(e))&&"number"!==a||(e=new n(e)),(r=t.luminance())>(i=e.luminance())?(r+.05)/(i+.05):(i+.05)/(r+.05)},x.distance=function(t,e,r){var i,o,a,s,u,l,c;for(o in null==r&&(r="lab"),"string"!==(u=St(t))&&"number"!==u||(t=new n(t)),"string"!==(l=St(e))&&"number"!==l||(e=new n(e)),a=t.get(r),s=e.get(r),c=0,a)c+=(i=(a[o]||0)-(s[o]||0))*i;return Math.sqrt(c)},x.deltaE=function(t,e,r,i){var o,s,u,l,c,h,f,p,d,g,v,_,b,w,x,M,S,O,T,P,I,k,R,L;for(null==r&&(r=1),null==i&&(i=1),"string"!==(x=St(t))&&"number"!==x||(t=new n(t)),"string"!==(M=St(e))&&"number"!==M||(e=new n(e)),o=(S=t.lab())[0],u=S[1],c=S[2],s=(O=e.lab())[0],l=O[1],h=O[2],f=xt(u*u+c*c),p=xt(l*l+h*h),P=o<16?.511:.040975*o/(1+.01765*o),T=.0638*f/(1+.0131*f)+.638,w=f<1e-6?0:180*y(c,u)/a;w<0;)w+=360;for(;w>=360;)w-=360;return I=w>=164&&w<=345?.56+m(.2*E(a*(w+168)/180)):.36+m(.4*E(a*(w+35)/180)),b=xt((d=f*f*f*f)/(d+1900)),xt((k=(o-s)/(r*P))*k+(R=(_=f-p)/(i*T))*R+((g=u-l)*g+(v=c-h)*v-_*_)/((L=T*(b*I+1-b))*L))},n.prototype.get=function(t){var e,r,n,i,o;return this,n=(i=t.split("."))[0],e=i[1],o=this[n](),e?(r=n.indexOf(e))>-1?o[r]:console.warn("unknown channel "+e+" in mode "+n):o},n.prototype.set=function(t,e){var r,n,i,o,a;if(this,i=(o=t.split("."))[0],r=o[1])if(a=this[i](),(n=i.indexOf(r))>-1)if("string"===St(e))switch(e.charAt(0)){case"+":case"-":a[n]+=+e;break;case"*":a[n]*=+e.substr(1);break;case"/":a[n]/=+e.substr(1);break;default:a[n]=+e}else a[n]=e;else console.warn("unknown channel "+r+" in mode "+i);else a=e;return x(a,i).alpha(this.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(t){return arguments.length?x.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},n.prototype.darken=function(t){var e;return null==t&&(t=1),this,(e=this.lab())[0]-=o.Kn*t,x.lab(e).alpha(this.alpha())},n.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(t){var e;return null==t&&(t=1),this,(e=this.lch())[1]+=t*o.Kn,e[1]<0&&(e[1]=0),x.lch(e).alpha(this.alpha())},n.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},n.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),x(e[0]*t,e[1]*t,e[2]*t,t)},tt=function(t,e){return t*e/255},T=function(t,e){return t>e?e:t},H=function(t,e){return t>e?t:e},bt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},rt=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},w=function(t,e){return 255*(1-(1-e/255)/(t/255))},P=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t},(v=function(t,e,r){if(!v[r])throw"unknown blend mode "+r;return v[r](t,e)}).normal=(_=function(t){return function(e,r){var n,i;return n=x(r).rgb(),i=x(e).rgb(),x(t(n,i),"rgb")}})((I=function(t){return function(e,r){var n,i,o;for(o=[],n=i=0;i<=3;n=++i)o[n]=t(e[n],r[n]);return o}})((function(t,e){return t}))),v.multiply=_(I(tt)),v.screen=_(I(bt)),v.overlay=_(I(rt)),v.darken=_(I(T)),v.lighten=_(I(H)),v.dodge=_(I(P)),v.burn=_(I(w)),x.blend=v,x.analyze=function(t){var e,r,n,i;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,e=t.length;r<e;r++)null==(i=t[r])||isNaN(i)||(n.values.push(i),n.sum+=i,i<n.min&&(n.min=i),i>n.max&&(n.max=i),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return x.limits(n,t,e)},n},x.scale=function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g,v,_,b,w,M;return c="rgb",h=x("#ccc"),m=0,!1,a=[0,1],d=[],p=[0,0],r=!1,i=[],f=!1,l=0,u=1,o=!1,n={},y=!0,s=1,w=function(t){var e,r,n,o,a,s;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===St(t)&&null!=x.brewer&&(t=x.brewer[t]||x.brewer[t.toLowerCase()]||t),"array"===St(t)){for(1===t.length&&(t=[t[0],t[0]]),e=n=0,o=(t=t.slice(0)).length-1;0<=o?n<=o:n>=o;e=0<=o?++n:--n)r=t[e],"string"===St(r)&&(t[e]=x(r));for(d.length=0,e=s=0,a=t.length-1;0<=a?s<=a:s>=a;e=0<=a?++s:--s)d.push(e/(t.length-1))}return b(),i=t},v=function(t){var e,n;if(null!=r){for(n=r.length-1,e=0;e<n&&t>=r[e];)e++;return e-1}return 0},M=function(t){return t},function(t){var e,n,i,o,a;return a=t,r.length>2&&(o=r.length-1,e=v(t),i=r[0]+(r[1]-r[0])*(0+.5*m),n=r[o-1]+(r[o]-r[o-1])*(1-.5*m),a=l+(r[e]+.5*(r[e+1]-r[e])-i)/(n-i)*(u-l)),a},_=function(t,e){var o,a,f,m,g,_,b;if(null==e&&(e=!1),isNaN(t)||null===t)return h;if(b=e?t:r&&r.length>2?v(t)/(r.length-2):u!==l?(t-l)/(u-l):1,e||(b=M(b)),1!==s&&(b=nt(b,s)),b=p[0]+b*(1-p[0]-p[1]),b=Math.min(1,Math.max(0,b)),f=Math.floor(1e4*b),y&&n[f])o=n[f];else{if("array"===St(i))for(a=m=0,_=d.length-1;0<=_?m<=_:m>=_;a=0<=_?++m:--m){if(b<=(g=d[a])){o=i[a];break}if(b>=g&&a===d.length-1){o=i[a];break}if(b>g&&b<d[a+1]){b=(b-g)/(d[a+1]-g),o=x.interpolate(i[a],i[a+1],b,c);break}}else"function"===St(i)&&(o=i(b));y&&(n[f]=o)}return o},b=function(){return n={}},w(t),(g=function(t){var e;return e=x(_(t)),f&&e[f]?e[f]():e}).classes=function(t){var e;return null!=t?("array"===St(t)?(r=t,a=[t[0],t[t.length-1]]):(e=x.analyze(a),r=0===t?[e.min,e.max]:x.limits(e,"e",t)),g):r},g.domain=function(t){var e,r,n,o,s,c,h;if(!arguments.length)return a;if(l=t[0],u=t[t.length-1],d=[],n=i.length,t.length===n&&l!==u)for(s=0,o=t.length;s<o;s++)r=t[s],d.push((r-l)/(u-l));else for(e=h=0,c=n-1;0<=c?h<=c:h>=c;e=0<=c?++h:--h)d.push(e/(n-1));return a=[l,u],g},g.mode=function(t){return arguments.length?(c=t,b(),g):c},g.range=function(t,e){return w(t),g},g.out=function(t){return f=t,g},g.spread=function(t){return arguments.length?(m=t,g):m},g.correctLightness=function(t){return null==t&&(t=!0),o=t,b(),M=o?function(t){var e,r,n,i,o,a,s,u,l;for(e=_(0,!0).lab()[0],r=_(1,!0).lab()[0],s=e>r,n=_(t,!0).lab()[0],i=n-(o=e+(r-e)*t),u=0,l=1,a=20;Math.abs(i)>.01&&a-- >0;)s&&(i*=-1),i<0?(u=t,t+=.5*(l-t)):(l=t,t+=.5*(u-t)),n=_(t,!0).lab()[0],i=n-o;return t}:function(t){return t},g},g.padding=function(t){return null!=t?("number"===St(t)&&(t=[t,t]),p=t,g):p},g.colors=function(e,n){var o,s,u,l,c,h,f,p;if(arguments.length<2&&(n="hex"),c=[],0===arguments.length)c=i.slice(0);else if(1===e)c=[g(.5)];else if(e>1)s=a[0],o=a[1]-s,c=function(){h=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)h.push(t);return h}.apply(this).map((function(t){return g(s+t/(e-1)*o)}));else{if(t=[],f=[],r&&r.length>2)for(u=p=1,l=r.length;1<=l?p<l:p>l;u=1<=l?++p:--p)f.push(.5*(r[u-1]+r[u]));else f=a;c=f.map((function(t){return g(t)}))}return x[n]&&(c=c.map((function(t){return t[n]()}))),c},g.cache=function(t){return null!=t?(y=t,g):y},g.gamma=function(t){return null!=t?(s=t,g):s},g.nodata=function(t){return null!=t?(h=x(t),g):h},g},null==x.scales&&(x.scales={}),x.scales.cool=function(){return x.scale([x.hsl(180,1,.9),x.hsl(250,.7,.4)])},x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},x.analyze=function(t,e,r){var n,i,o,a,s,u;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},u=function(t,i){if(r(t,i))return null!=e&&"function"===St(e)?n(e(t)):null!=e&&"string"===St(e)||"number"===St(e)?n(t[e]):n(t)},"array"===St(t))for(a=0,o=t.length;a<o;a++)u(t[a]);else for(i in t)u(t[i],i);return s.domain=[s.min,s.max],s.limits=function(t,e){return x.limits(s,t,e)},s},x.limits=function(t,e,r){var n,i,o,a,s,u,l,c,h,f,p,d,y,g,v,_,b,w,M,S,E,O,T,P,I,R,L,C,A,N,j,F,D,B,z,G,q,U,V,W,Y,Z,H,X,J,$,tt,et,rt,it,ot,at,st,ut,lt;if(null==e&&(e="equal"),null==r&&(r=7),"array"===St(t)&&(t=x.analyze(t)),I=t.min,Q=t.max,t.sum,ut=t.values.sort((function(t,e){return t-e})),1===r)return[I,Q];if(T=[],"c"===e.substr(0,1)&&(T.push(I),T.push(Q)),"e"===e.substr(0,1)){for(T.push(I),S=j=1,z=r-1;1<=z?j<=z:j>=z;S=1<=z?++j:--j)T.push(I+S/r*(Q-I));T.push(Q)}else if("l"===e.substr(0,1)){if(I<=0)throw"Logarithmic scales are only possible for values > 0";for(R=Math.LOG10E*K(I),P=Math.LOG10E*K(Q),T.push(I),S=lt=1,G=r-1;1<=G?lt<=G:lt>=G;S=1<=G?++lt:--lt)T.push(nt(10,R+S/r*(P-R)));T.push(Q)}else if("q"===e.substr(0,1)){for(T.push(I),S=n=1,Z=r-1;1<=Z?n<=Z:n>=Z;S=1<=Z?++n:--n)F=(ut.length-1)*S/r,(D=k(F))===F?T.push(ut[D]):(B=F-D,T.push(ut[D]*(1-B)+ut[D+1]*B));T.push(Q)}else if("k"===e.substr(0,1)){for(C=ut.length,g=new Array(C),w=new Array(r),it=!0,A=0,_=null,(_=[]).push(I),S=i=1,H=r-1;1<=H?i<=H:i>=H;S=1<=H?++i:--i)_.push(I+S/r*(Q-I));for(_.push(Q);it;){for(E=o=0,X=r-1;0<=X?o<=X:o>=X;E=0<=X?++o:--o)w[E]=0;for(S=a=0,J=C-1;0<=J?a<=J:a>=J;S=0<=J?++a:--a){for(st=ut[S],L=Number.MAX_VALUE,E=s=0,$=r-1;0<=$?s<=$:s>=$;E=0<=$?++s:--s)(M=m(_[E]-st))<L&&(L=M,v=E);w[v]++,g[S]=v}for(N=new Array(r),E=u=0,tt=r-1;0<=tt?u<=tt:u>=tt;E=0<=tt?++u:--u)N[E]=null;for(S=l=0,et=C-1;0<=et?l<=et:l>=et;S=0<=et?++l:--l)null===N[b=g[S]]?N[b]=ut[S]:N[b]+=ut[S];for(E=c=0,rt=r-1;0<=rt?c<=rt:c>=rt;E=0<=rt?++c:--c)N[E]*=1/w[E];for(it=!1,E=h=0,q=r-1;0<=q?h<=q:h>=q;E=0<=q?++h:--h)if(N[E]!==_[S]){it=!0;break}_=N,++A>200&&(it=!1)}for(O={},E=f=0,U=r-1;0<=U?f<=U:f>=U;E=0<=U?++f:--f)O[E]=[];for(S=p=0,V=C-1;0<=V?p<=V:p>=V;S=0<=V?++p:--p)O[b=g[S]].push(ut[S]);for(ot=[],E=d=0,W=r-1;0<=W?d<=W:d>=W;E=0<=W?++d:--d)ot.push(O[E][0]),ot.push(O[E][O[E].length-1]);for(ot=ot.sort((function(t,e){return t-e})),T.push(ot[0]),S=y=1,Y=ot.length-1;y<=Y;S=y+=2)at=ot[S],isNaN(at)||-1!==T.indexOf(at)||T.push(at)}return T},C=function(t,e,r){var n,i,o,a;return t=(n=Et(arguments))[0],e=n[1],r=n[2],isNaN(t)&&(t=0),(t/=360)<1/3?o=1-((i=(1-e)/3)+(a=(1+e*E(l*t)/E(s-l*t))/3)):t<2/3?i=1-((a=(1-e)/3)+(o=(1+e*E(l*(t-=1/3))/E(s-l*t))/3)):a=1-((o=(1-e)/3)+(i=(1+e*E(l*(t-=2/3))/E(s-l*t))/3)),[255*(a=X(r*a*3)),255*(o=X(r*o*3)),255*(i=X(r*i*3)),n.length>3?n[3]:1]},ut=function(){var t,e,r,n,i,o,a;return i=(o=Et(arguments))[0],e=o[1],t=o[2],l=2*Math.PI,i/=255,e/=255,t/=255,0===(a=1-Math.min(i,e,t)/(n=(i+e+t)/3))?r=0:(r=(i-e+(i-t))/2,r/=Math.sqrt((i-e)*(i-e)+(i-t)*(e-t)),r=Math.acos(r),t>e&&(r=l-r),r/=l),[360*r,a,n]},x.hsi=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hsi"]),(function(){}))},p.hsi=C,n.prototype.hsi=function(){return ut(this._rgb)},D=function(t,e,r,n){var i,o,a,s,u,l,c,h,f,p;return"hsl"===n?(f=t.hsl(),p=e.hsl()):"hsv"===n?(f=t.hsv(),p=e.hsv()):"hcg"===n?(f=t.hcg(),p=e.hcg()):"hsi"===n?(f=t.hsi(),p=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",f=t.hcl(),p=e.hcl()),"h"===n.substr(0,1)&&(o=f[0],c=f[1],s=f[2],a=p[0],h=p[1],u=p[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===n||(l=h)):(i=o,1!==u&&0!==u||"hsv"===n||(l=c)):i=o+r*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),null==l&&(l=c+r*(h-c)),x[n](i,l,s+r*(u-s))},G=function(t,e,r,n){var i,o;return i=t.num(),o=e.num(),x.num(i+(o-i)*r,"num")},(d=d.concat(function(){var t,e,r,n;for(n=[],e=0,t=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)$=r[e],n.push([$,D]);return n}())).push(["num",G]),B=function(t,e,r,i){var o,a;return o=t.lab(),a=e.lab(),new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["lab",B])}).call(this)}).call(this,r(9)(t))},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(231),i=r(60),o=r(61);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function b(t,e,r,n){return q(z(e,t.length-r),t,r,n)}function w(t,e,r,n){return q(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}function M(t,e,r,n){return q(G(e),t,r,n)}function S(t,e,r,n){return q(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return l(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=t.slice(e,r),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return M(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function P(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function I(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=B(t[o]);return i}function k(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function C(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function A(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,o){return o||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function F(t,e,r,n,o){return o||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):A(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):A(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):A(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):A(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:z(new u(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(5))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},function(t,e,r){"use strict";var n=e,i=r(10),o=r(6),a=r(96);n.assert=o,n.toArray=a.toArray,n.zero2=a.zero2,n.toHex=a.toHex,n.encode=a.encode,n.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),a=0;a<n.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1)}return n},n.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var a,s,u=t.andln(3)+i&3,l=e.andln(3)+o&3;3===u&&(u=-1),3===l&&(l=-1),a=0==(1&u)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==l?u:-u,r[0].push(a),s=0==(1&l)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==u?l:-l,r[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},n.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(t){return"string"==typeof t?n.toArray(t,"hex"):t},n.intFromLE=function(t){return new i(t,"hex","le")}},function(t,e,r){"use strict";var n=r(6),i=r(0);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function s(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var a=t.charCodeAt(i);a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=63&a|128):o(t,i)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++i)),r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=63&a|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=63&a|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=s(t[r].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=a(i)),r+=u(i.toString(16))}return r},e.zero2=s,e.zero8=u,e.join32=function(t,e,r,i){var o=r-e;n(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4){var l;l="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=l>>>0}return a},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,o,a,s){var u=0,l=e;return u+=(l=l+n>>>0)<e?1:0,u+=(l=l+o>>>0)<o?1:0,t+r+i+a+(u+=(l=l+s>>>0)<s?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,o,a,s){return e+n+o+s>>>0},e.sum64_5_hi=function(t,e,r,n,i,o,a,s,u,l){var c=0,h=e;return c+=(h=h+n>>>0)<e?1:0,c+=(h=h+o>>>0)<o?1:0,c+=(h=h+s>>>0)<s?1:0,t+r+i+a+u+(c+=(h=h+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,o,a,s,u,l){return e+n+o+s+l>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(285).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,E=0|a[5],O=8191&E,T=E>>>13,P=0|a[6],I=8191&P,k=P>>>13,R=0|a[7],L=8191&R,C=R>>>13,A=0|a[8],N=8191&A,j=A>>>13,F=0|a[9],D=8191&F,B=F>>>13,z=0|s[0],G=8191&z,q=z>>>13,U=0|s[1],V=8191&U,W=U>>>13,Y=0|s[2],Z=8191&Y,H=Y>>>13,X=0|s[3],K=8191&X,J=X>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,G)|0))<<13)|0;l=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,G),i=(i=Math.imul(d,q))+Math.imul(m,G)|0,o=Math.imul(m,q);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,G),i=(i=Math.imul(g,q))+Math.imul(v,G)|0,o=Math.imul(v,q),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,W)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,W)|0;var vt=(l+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,q))+Math.imul(w,G)|0,o=Math.imul(w,q),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,W)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,q))+Math.imul(S,G)|0,o=Math.imul(S,q),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,G),i=(i=Math.imul(O,q))+Math.imul(T,G)|0,o=Math.imul(T,q),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,W)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,G),i=(i=Math.imul(I,q))+Math.imul(k,G)|0,o=Math.imul(k,q),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,W)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,q))+Math.imul(C,G)|0,o=Math.imul(C,q),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,q))+Math.imul(j,G)|0,o=Math.imul(j,q),n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var St=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,q))+Math.imul(B,G)|0,o=Math.imul(B,q),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,W)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,W)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,W))+Math.imul(B,V)|0,o=Math.imul(B,W),n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,H))+Math.imul(B,Z)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Pt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,dt)|0))<<13)|0;l=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Lt=(l+(n=n+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(C,dt)|0))<<13)|0;l=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var Ct=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var At=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(At>>>26)|0,At&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=Et,u[10]=Ot,u[11]=Tt,u[12]=Pt,u[13]=It,u[14]=kt,u[15]=Rt,u[16]=Lt,u[17]=Ct,u[18]=At,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(x,v),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return et})),r.d(e,"b",(function(){return Vr})),r.d(e,"c",(function(){return Wr})),r.d(e,"d",(function(){return Cr})),r.d(e,"e",(function(){return Yr})),r.d(e,"f",(function(){return i}));var i={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_symbol:{type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},projection:{name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carrée projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of ambient occlusion (AO) shading. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The radius of ambient occlusion (AO) shading, in meters. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to hight of one floor and brings the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0° is directly above, at zenith, and 90° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0° is directly above, at zenith, and 90° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}};var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function a(t){var e={exports:{}};return t(e,e.exports),e.exports}function s(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}
/*! https://mths.be/punycode v1.3.2 by @mathias */var u=a((function(t,e){!function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,a="object"==typeof o&&o;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,u,l=2147483647,c=/^xn--/,h=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,m=String.fromCharCode;function y(t){throw RangeError(p[t])}function g(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function v(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+g((t=t.replace(f,".")).split("."),e).join(".")}function _(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function b(t){return g(t,(function(t){var e="";return t>65535&&(e+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=m(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,r){var n=0;for(t=r?d(t/700):t>>1,t+=d(t/e);t>455;n+=36)t=d(t/35);return d(n+36*t/(t+38))}function M(t){var e,r,n,i,o,a,s,u,c,h,f,p=[],m=t.length,g=0,v=128,_=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&y("not-basic"),p.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<m;){for(o=g,a=1,s=36;i>=m&&y("invalid-input"),((u=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||u>d((l-g)/a))&&y("overflow"),g+=u*a,!(u<(c=s<=_?1:s>=_+26?26:s-_));s+=36)a>d(l/(h=36-c))&&y("overflow"),a*=h;_=x(g-o,e=p.length+1,0==o),d(g/e)>l-v&&y("overflow"),v+=d(g/e),g%=e,p.splice(g++,0,v)}return b(p)}function S(t){var e,r,n,i,o,a,s,u,c,h,f,p,g,v,b,M=[];for(p=(t=_(t)).length,e=128,r=0,o=72,a=0;a<p;++a)(f=t[a])<128&&M.push(m(f));for(n=i=M.length,i&&M.push("-");n<p;){for(s=l,a=0;a<p;++a)(f=t[a])>=e&&f<s&&(s=f);for(s-e>d((l-r)/(g=n+1))&&y("overflow"),r+=(s-e)*g,e=s,a=0;a<p;++a)if((f=t[a])<e&&++r>l&&y("overflow"),f==e){for(u=r,c=36;!(u<(h=c<=o?1:c>=o+26?26:c-o));c+=36)b=u-h,v=36-h,M.push(m(w(h+b%v,0))),u=d(b/v);M.push(m(w(u,0))),o=x(r,g,n==i),r=0,++n}++r,++e}return M.join("")}if(s={version:"1.3.2",ucs2:{decode:_,encode:b},decode:M,encode:S,toASCII:function(t){return v(t,(function(t){return h.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return v(t,(function(t){return c.test(t)?M(t.slice(4).toLowerCase()):t}))}},n&&i)if(t.exports==n)i.exports=s;else for(u in s)s.hasOwnProperty(u)&&(n[u]=s[u]);else r.punycode=s}(o)})),l=function(t){return"string"==typeof t},c=function(t){return"object"==typeof t&&null!==t},h=function(t){return null===t},f=function(t){return null==t};function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var d=function(t,e,r,n){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var l,c,h,f,d=t[u].replace(o,"%20"),m=d.indexOf(r);m>=0?(l=d.substr(0,m),c=d.substr(m+1)):(l=d,c=""),h=decodeURIComponent(l),f=decodeURIComponent(c),p(i,h)?Array.isArray(i[h])?i[h].push(f):i[h]=[i[h],f]:i[h]=f}return i},m=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},y=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var i=encodeURIComponent(m(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return i+encodeURIComponent(m(t))})).join(e):i+encodeURIComponent(m(t[n]))})).join(e):n?encodeURIComponent(m(n))+r+encodeURIComponent(m(t)):""},g=a((function(t,e){e.decode=e.parse=d,e.encode=e.stringify=y}));function v(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var _=/^([a-z0-9.+-]+:)/i,b=/:[0-9]*$/,w=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,x=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),M=["'"].concat(x),S=["%","/","?",";","#"].concat(M),E=["/","?","#"],O=/^[+a-z0-9A-Z_-]{0,63}$/,T=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P={javascript:!0,"javascript:":!0},I={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function R(t,e,r){if(t&&c(t)&&t instanceof v)return t;var n=new v;return n.parse(t,e,r),n}v.prototype.parse=function(t,e,r){if(!l(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(i);if(a=a.trim(),!r&&1===t.split("#").length){var s=w.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=_.exec(a);if(c){var h=(c=c[0]).toLowerCase();this.protocol=h,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===a.substr(0,2);!f||c&&I[c]||(a=a.substr(2),this.slashes=!0)}if(!I[c]&&(f||c&&!k[c])){for(var p,d,m=-1,y=0;y<E.length;y++){-1!==(v=a.indexOf(E[y]))&&(-1===m||v<m)&&(m=v)}-1!==(d=-1===m?a.lastIndexOf("@"):a.lastIndexOf("@",m))&&(p=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(p)),m=-1;for(y=0;y<S.length;y++){var v;-1!==(v=a.indexOf(S[y]))&&(-1===m||v<m)&&(m=v)}-1===m&&(m=a.length),this.host=a.slice(0,m),a=a.slice(m),this.parseHost(),this.hostname=this.hostname||"";var b="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!b)for(var x=this.hostname.split(/\./),R=(y=0,x.length);y<R;y++){var L=x[y];if(L&&!L.match(O)){for(var C="",A=0,N=L.length;A<N;A++)L.charCodeAt(A)>127?C+="x":C+=L[A];if(!C.match(O)){var j=x.slice(0,y),F=x.slice(y+1),D=L.match(T);D&&(j.push(D[1]),F.unshift(D[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=u.toASCII(this.hostname));var B=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+B,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!P[h])for(y=0,R=M.length;y<R;y++){var G=M[y];if(-1!==a.indexOf(G)){var q=encodeURIComponent(G);q===G&&(q=escape(G)),a=a.split(G).join(q)}}var U=a.indexOf("#");-1!==U&&(this.hash=a.substr(U),a=a.slice(0,U));var V=a.indexOf("?");if(-1!==V?(this.search=a.substr(V),this.query=a.substr(V+1),e&&(this.query=g.parse(this.query)),a=a.slice(0,V)):e&&(this.search="",this.query={}),a&&(this.pathname=a),k[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var W=this.search||"";this.path=B+W}return this.href=this.format(),this},v.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=g.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||k[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},v.prototype.resolve=function(t){return this.resolveObject(R(t,!1,!0)).format()},v.prototype.resolveObject=function(t){if(l(t)){var e=new v;e.parse(t,!1,!0),t=e}for(var r=new v,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(r[u]=t[u])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!k[t.protocol]){for(var c=Object.keys(t),p=0;p<c.length;p++){var d=c[p];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||I[t.protocol])r.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),r.pathname=m.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",g=r.search||"";r.path=y+g}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||_||r.host&&t.pathname,x=w,M=r.pathname&&r.pathname.split("/")||[],S=(m=t.pathname&&t.pathname.split("/")||[],r.protocol&&!k[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===M[0]?M[0]=r.host:M.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),w=w&&(""===m[0]||""===M[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,M=m;else if(m.length)M||(M=[]),M.pop(),M=M.concat(m),r.search=t.search,r.query=t.query;else if(!f(t.search)){if(S)r.hostname=r.host=M.shift(),(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift());return r.search=t.search,r.query=t.query,h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!M.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=M.slice(-1)[0],O=(r.host||t.host||M.length>1)&&("."===E||".."===E)||""===E,T=0,P=M.length;P>=0;P--)"."===(E=M[P])?M.splice(P,1):".."===E?(M.splice(P,1),T++):T&&(M.splice(P,1),T--);if(!w&&!x)for(;T--;T)M.unshift("..");!w||""===M[0]||M[0]&&"/"===M[0].charAt(0)||M.unshift(""),O&&"/"!==M.join("/").substr(-1)&&M.push("");var R,L=""===M[0]||M[0]&&"/"===M[0].charAt(0);S&&(r.hostname=r.host=L?"":M.length?M.shift():"",(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift()));return(w=w||r.host&&M.length)&&!L&&M.unshift(""),M.length?r.pathname=M.join("/"):(r.pathname=null,r.path=null),h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},v.prototype.parseHost=function(){var t=this.host,e=b.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};function L(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}class C extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var A=C;class N{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,r]of e)this.bindings[t]=r}concat(t){return new N(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var j=N;const F={kind:"null"},D={kind:"number"},B={kind:"string"},z={kind:"boolean"},G={kind:"color"},q={kind:"object"},U={kind:"value"},V={kind:"collator"},W={kind:"formatted"},Y={kind:"resolvedImage"};function Z(t,e){return{kind:"array",itemType:t,N:e}}function H(t){if("array"===t.kind){const e=H(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const X=[F,D,B,z,G,W,q,Z(U),Y];function K(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!K(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of X)if(!K(t,e))return null}return`Expected ${H(t)} but found ${H(e)} instead.`}function J(t,e){return e.some(e=>e.kind===t.kind)}function $(t,e){return e.some(e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t)}var Q=a((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var c=i.substr(0,u),h=i.substr(u+1,l-(u+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),m=a(h[2]),y=m<=.5?m*(d+1):m+d-m*d,g=2*m-y;return[n(255*s(g,y,p+1/3)),n(255*s(g,y,p)),n(255*s(g,y,p-1/3)),f];default:return null}}return null}}catch(t){}}));class tt{constructor(t,e,r,n=1){this.r=t,this.g=e,this.b=r,this.a=n}static parse(t){if(!t)return;if(t instanceof tt)return t;if("string"!=typeof t)return;const e=Q.parseCSSColor(t);return e?new tt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,r,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(r)},${n})`}toArray(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}toArray01(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[t/n,e/n,r/n,n]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:r,a:n}=this;return[t,e,r,n]}}tt.black=new tt(0,0,0,1),tt.white=new tt(1,1,1,1),tt.transparent=new tt(0,0,0,0),tt.red=new tt(1,0,0,1),tt.blue=new tt(0,0,1,1);var et=tt;class rt{constructor(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class nt{constructor(t,e,r,n,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i}}class it{constructor(t){this.sections=t}static fromString(t){return new it([new nt(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof it?t:it.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const r={};e.fontStack&&(r["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(r["font-scale"]=e.scale),e.textColor&&(r["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(r)}return t}}class ot{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new ot({name:t,available:!1}):null}serialize(){return["image",this.name]}}function at(t,e,r,n){if(!("number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255)){return`Invalid rgba value [${("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}return void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`}function st(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof et)return!0;if(t instanceof rt)return!0;if(t instanceof it)return!0;if(t instanceof ot)return!0;if(Array.isArray(t)){for(const e of t)if(!st(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!st(t[e]))return!1;return!0}return!1}function ut(t){if(null===t)return F;if("string"==typeof t)return B;if("boolean"==typeof t)return z;if("number"==typeof t)return D;if(t instanceof et)return G;if(t instanceof rt)return V;if(t instanceof it)return W;if(t instanceof ot)return Y;if(Array.isArray(t)){const e=t.length;let r;for(const e of t){const t=ut(e);if(r){if(r===t)continue;r=U;break}r=t}return Z(r||U,e)}return q}function lt(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof et||t instanceof it||t instanceof ot?t.toString():JSON.stringify(t)}class ct{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!st(t[1]))return e.error("invalid value");const r=t[1];let n=ut(r);const i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new ct(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof et?["rgba"].concat(this.value.toArray()):this.value instanceof it?this.value.serialize():this.value}}var ht=ct;var ft=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const pt={string:B,number:D,boolean:z,object:q};class dt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r,n=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const r=t[1];if("string"!=typeof r||!(r in pt)||"object"===r)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=pt[r],n++}else i=U;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}r=Z(i,o)}else r=pt[i];const o=[];for(;n<t.length;n++){const r=e.parse(t[n],n,U);if(!r)return null;o.push(r)}return new dt(r,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!K(this.type,ut(r)))return r;if(e===this.args.length-1)throw new ft(`Expected value to be of type ${H(this.type)}, but found ${H(ut(r))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map(t=>t.serialize()))}}var mt=dt;class yt{constructor(t){this.type=W,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");const n=[];let i=!1;for(let r=1;r<=t.length-1;++r){const o=t[r];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,D),!t))return null;let r=null;if(o["text-font"]&&(r=e.parse(o["text-font"],1,Z(B)),!r))return null;let a=null;if(o["text-color"]&&(a=e.parse(o["text-color"],1,G),!a))return null;const s=n[n.length-1];s.scale=t,s.font=r,s.textColor=a}else{const o=e.parse(t[r],1,U);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:o,scale:null,font:null,textColor:null})}}return new yt(n)}evaluate(t){return new it(this.sections.map(e=>{const r=e.content.evaluate(t);return ut(r)===Y?new nt("",r,null,null,null):new nt(lt(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const r={};e.scale&&(r["font-scale"]=e.scale.serialize()),e.font&&(r["text-font"]=e.font.serialize()),e.textColor&&(r["text-color"]=e.textColor.serialize()),t.push(r)}return t}}class gt{constructor(t){this.type=Y,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,B);return r?new gt(r):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),r=ot.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const vt={"to-boolean":z,"to-color":G,"to-number":D,"to-string":B};class _t{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");const n=vt[r],i=[];for(let r=1;r<t.length;r++){const n=e.parse(t[r],r,U);if(!n)return null;i.push(n)}return new _t(n,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof et)return e;if("string"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:at(e[0],e[1],e[2],e[3]),!r))return new et(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ft(r||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const r of this.args){if(e=r.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new ft(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?it.fromString(lt(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ot.fromString(lt(this.args[0].evaluate(t))):lt(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new yt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new gt(this.args[0]).serialize();const t=["to-"+this.type.kind];return this.eachChild(e=>{t.push(e.serialize())}),t}}var bt=_t;const wt=["Unknown","Point","LineString","Polygon"];var xt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?wt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord,i=r*e-t[0],o=n*e-t[1];return this.featureDistanceData.bearing[0]*i+this.featureDistanceData.bearing[1]*o}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=et.parse(t)),e}};class Mt{constructor(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const r=t[0],n=Mt.definitions[r];if(!n)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=o.filter(([e])=>!Array.isArray(e)||e.length===t.length-1);let s=null;for(const[n,o]of a){s=new Kt(e.registry,e.path,null,e.scope);const a=[];let u=!1;for(let e=1;e<t.length;e++){const r=t[e],i=Array.isArray(n)?n[e-1]:n.type,o=s.parse(r,1+a.length,i);if(!o){u=!0;break}a.push(o)}if(!u)if(Array.isArray(n)&&n.length!==a.length)s.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){const e=Array.isArray(n)?n[t]:n.type,r=a[t];s.concat(t+1).checkSubtype(e,r.type)}if(0===s.errors.length)return new Mt(r,i,o,a)}}if(1===a.length)e.errors.push(...s.errors);else{const r=(a.length?a:o).map(([t])=>{return e=t,Array.isArray(e)?`(${e.map(H).join(", ")})`:`(${H(e.type)}...)`;var e}).join(" | "),n=[];for(let r=1;r<t.length;r++){const i=e.parse(t[r],1+n.length);if(!i)return null;n.push(H(i.type))}e.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){Mt.definitions=e;for(const r in e)t[r]=Mt}}var St=Mt;class Et{constructor(t,e,r){this.type=V,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,z);if(!n)return null;const i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,z);if(!i)return null;let o=null;return r.locale&&(o=e.parse(r.locale,1,B),!o)?null:new Et(n,i,o)}evaluate(t){return new rt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}function Ot(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Tt(t,e){return!(t[0]<=e[0])&&(!(t[2]>=e[2])&&(!(t[1]<=e[1])&&!(t[3]>=e[3])))}function Pt(t,e){const r=(180+t[0])/360;const n=(i=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360);var i;const o=Math.pow(2,e.z);return[Math.round(r*o*8192),Math.round(n*o*8192)]}function It(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],o=t[0]-r[0],a=t[1]-r[1];return n*a-o*i==0&&n*o<=0&&i*a<=0}function kt(t,e){let r=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(It(t,s[e],s[e+1]))return!1;n=t,i=s[e],o=s[e+1],i[1]>n[1]!=o[1]>n[1]&&n[0]<(o[0]-i[0])*(n[1]-i[1])/(o[1]-i[1])+i[0]&&(r=!r)}}var n,i,o;return r}function Rt(t,e){for(let r=0;r<e.length;r++)if(kt(t,e[r]))return!0;return!1}function Lt(t,e,r,n){const i=t[0]-r[0],o=t[1]-r[1],a=e[0]-r[0],s=e[1]-r[1],u=n[0]-r[0],l=n[1]-r[1],c=i*l-u*o,h=a*l-u*s;return c>0&&h<0||c<0&&h>0}function Ct(t,e,r,n){const i=[e[0]-t[0],e[1]-t[1]],o=[n[0]-r[0],n[1]-r[1]];return 0!=(a=o)[0]*(s=i)[1]-a[1]*s[0]&&!(!Lt(t,e,r,n)||!Lt(r,n,t,e));var a,s}function At(t,e,r){for(const n of r)for(let r=0;r<n.length-1;++r)if(Ct(t,e,n[r],n[r+1]))return!0;return!1}function Nt(t,e){for(let r=0;r<t.length;++r)if(!kt(t[r],e))return!1;for(let r=0;r<t.length-1;++r)if(At(t[r],t[r+1],e))return!1;return!0}function jt(t,e){for(let r=0;r<e.length;r++)if(Nt(t,e[r]))return!0;return!1}function Ft(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=[];for(let n=0;n<t[i].length;n++){const a=Pt(t[i][n],r);Ot(e,a),o.push(a)}n.push(o)}return n}function Dt(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=Ft(t[i],e,r);n.push(o)}return n}function Bt(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const e=.5*n;let i=t[0]-r[0]>e?-n:r[0]-t[0]>e?n:0;0===i&&(i=t[0]-r[2]>e?-n:r[2]-t[0]>e?n:0),t[0]+=i}Ot(e,t)}function zt(t,e,r,n){const i=8192*Math.pow(2,n.z),o=[8192*n.x,8192*n.y],a=[];if(!t)return a;for(const n of t)for(const t of n){const n=[t.x+o[0],t.y+o[1]];Bt(n,e,r,i),a.push(n)}return a}function Gt(t,e,r,n){const i=8192*Math.pow(2,n.z),o=[8192*n.x,8192*n.y],a=[];if(!t)return a;for(const r of t){const t=[];for(const n of r){const r=[n.x+o[0],n.y+o[1]];Ot(e,r),t.push(r)}a.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const n of t)Bt(n,e,r,i)}var s;return a}class qt{constructor(t,e){this.type=z,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(st(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const r=e.features[t].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new qt(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new qt(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new qt(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=Ft(e.coordinates,n,i),a=zt(t.geometry(),r,n,i);if(!Tt(r,n))return!1;for(const t of a)if(!kt(t,o))return!1}if("MultiPolygon"===e.type){const o=Dt(e.coordinates,n,i),a=zt(t.geometry(),r,n,i);if(!Tt(r,n))return!1;for(const t of a)if(!Rt(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=Ft(e.coordinates,n,i),a=Gt(t.geometry(),r,n,i);if(!Tt(r,n))return!1;for(const t of a)if(!Nt(t,o))return!1}if("MultiPolygon"===e.type){const o=Dt(e.coordinates,n,i),a=Gt(t.geometry(),r,n,i);if(!Tt(r,n))return!1;for(const t of a)if(!jt(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Ut=qt;function Vt(t){if(t instanceof St){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ut)return!1;let e=!0;return t.eachChild(t=>{e&&!Vt(t)&&(e=!1)}),e}function Wt(t){if(t instanceof St&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(t=>{e&&!Wt(t)&&(e=!1)}),e}function Yt(t,e){if(t instanceof St&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(t=>{r&&!Yt(t,e)&&(r=!1)}),r}class Zt{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const r=t[1];return e.scope.has(r)?new Zt(r,e.scope.get(r)):e.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ht=Zt;class Xt{constructor(t,e=[],r,n=new j,i=[]){this.registry=t,this.path=e,this.key=e.map(t=>`[${t}]`).join(""),this.scope=n,this.errors=i,this.expectedType=r}parse(t,e,r,n,i={}){return e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)}_parse(t,e){function r(t,e,r){return"assert"===r?new mt(e,[t]):"coerce"===r?new bt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,i=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else n=r(n,t,e.typeAnnotation||"coerce");else n=r(n,t,e.typeAnnotation||"assert")}if(!(n instanceof ht)&&"resolvedImage"!==n.type.kind&&function t(e){if(e instanceof Ht)return t(e.boundExpression);if(e instanceof St&&"error"===e.name)return!1;if(e instanceof Et)return!1;if(e instanceof Ut)return!1;const r=e instanceof bt||e instanceof mt;let n=!0;if(e.eachChild(e=>{n=r?n&&t(e):n&&e instanceof ht}),!n)return!1;return Vt(e)&&Yt(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}(n)){const t=new xt;try{n=new ht(n.type,n.evaluate(t))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new Xt(this.registry,n,e||null,i,this.errors)}error(t,...e){const r=`${this.key}${e.map(t=>`[${t}]`).join("")}`;this.errors.push(new A(r,t))}checkSubtype(t,e){const r=K(t,e);return r&&this.error(r),r}}var Kt=Xt;function Jt(t,e){const r=t.length-1;let n,i,o=0,a=r,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),n=t[s],i=t[s+1],n<=e){if(s===r||e<i)return s;o=s+1}else{if(!(n>e))throw new ft("Input is not a number.");a=s-1}return 0}class $t{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const r=e.parse(t[1],1,D);if(!r)return null;const n=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let r=1;r<t.length;r+=2){const o=1===r?-1/0:t[r],a=t[r+1],s=r,u=r+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const l=e.parse(a,u,i);if(!l)return null;i=i||l.type,n.push([o,l])}return new $t(i,r,n)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);return r[Jt(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var Qt=$t,te=ee;function ee(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}function re(t,e,r){return t*(1-r)+e*r}ee.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},ee.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},ee.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},ee.prototype.solveCurveX=function(t,e){var r,n,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i},ee.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var ne=Object.freeze({__proto__:null,number:re,color:function(t,e,r){return new et(re(t.r,e.r,r),re(t.g,e.g,r),re(t.b,e.b,r),re(t.a,e.a,r))},array:function(t,e,r){return t.map((t,n)=>re(t,e[n],r))}});const ie=6/29,oe=3*ie*ie,ae=Math.PI/180,se=180/Math.PI;function ue(t){return t>.008856451679035631?Math.pow(t,1/3):t/oe+4/29}function le(t){return t>ie?t*t*t:oe*(t-4/29)}function ce(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function he(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fe(t){const e=he(t.r),r=he(t.g),n=he(t.b),i=ue((.4124564*e+.3575761*r+.1804375*n)/.95047),o=ue((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-ue((.0193339*e+.119192*r+.9503041*n)/1.08883)),alpha:t.a}}function pe(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*le(e),r=.95047*le(r),n=1.08883*le(n),new et(ce(3.2404542*r-1.5371385*e-.4985314*n),ce(-.969266*r+1.8760108*e+.041556*n),ce(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function de(t,e,r){const n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const me={forward:fe,reverse:pe,interpolate:function(t,e,r){return{l:re(t.l,e.l,r),a:re(t.a,e.a,r),b:re(t.b,e.b,r),alpha:re(t.alpha,e.alpha,r)}}},ye={forward:function(t){const{l:e,a:r,b:n}=fe(t),i=Math.atan2(n,r)*se;return{h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*ae,r=t.c;return pe({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:de(t.h,e.h,r),c:re(t.c,e.c,r),l:re(t.l,e.l,r),alpha:re(t.alpha,e.alpha,r)}}};var ge=Object.freeze({__proto__:null,lab:me,hcl:ye});class ve{constructor(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,r,n){let i=0;if("exponential"===t.name)i=_e(e,t.base,r,n);else if("linear"===t.name)i=_e(e,1,r,n);else if("cubic-bezier"===t.name){const o=t.controlPoints;i=new te(o[0],o[1],o[2],o[3]).solve(_e(e,1,r,n))}return i}static parse(t,e){let[r,n,i,...o]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);{const t=n.slice(1);if(4!==t.length||t.some(t=>"number"!=typeof t||t<0||t>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,D),!i)return null;const a=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=G:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const r=o[t],n=o[t+1],i=t+3,u=t+4;if("number"!=typeof r)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=r)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const l=e.parse(n,u,s);if(!l)return null;s=s||l.type,a.push([r,l])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new ve(s,r,n,i,a):e.error(`Type ${H(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);const o=Jt(e,n),a=e[o],s=e[o+1],u=ve.interpolationFactor(this.interpolation,n,a,s),l=r[o].evaluate(t),c=r[o+1].evaluate(t);return"interpolate"===this.operator?ne[this.type.kind.toLowerCase()](l,c,u):"interpolate-hcl"===this.operator?ye.reverse(ye.interpolate(ye.forward(l),ye.forward(c),u)):me.reverse(me.interpolate(me.forward(l),me.forward(c),u))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function _e(t,e,r,n){const i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var be=ve;class we{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let r=null;const n=e.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const n of t.slice(1)){const t=e.parse(n,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!t)return null;r=r||t.type,i.push(t)}const o=n&&i.some(t=>K(n,t.type));return new we(o?U:r,i)}evaluate(t){let e,r=null,n=0;for(const i of this.args){if(n++,r=i.evaluate(t),r&&r instanceof ot&&!r.available&&(e||(e=r),r=null,n===this.args.length))return e;if(null!==r)break}return r}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var xe=we;class Me{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let n=1;n<t.length-1;n+=2){const i=t[n];if("string"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=e.parse(t[n+1],n+1);if(!o)return null;r.push([i,o])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return n?new Me(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,r]of this.bindings)t.push(e,r.serialize());return t.push(this.result.serialize()),t}}var Se=Me;class Ee{constructor(t,e,r){this.type=t,this.index=e,this.input=r}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,D),n=e.parse(t[2],2,Z(e.expectedType||U));if(!r||!n)return null;const i=n.type;return new Ee(i.itemType,r,n)}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new ft(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new ft(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new ft(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Oe=Ee;class Te{constructor(t,e){this.type=z,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,U),n=e.parse(t[2],2,U);return r&&n?J(r.type,[z,B,D,F,U])?new Te(r,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(r.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(null==r)return!1;if(!$(e,["boolean","string","number","null"]))throw new ft(`Expected first argument to be of type boolean, string, number or null, but found ${H(ut(e))} instead.`);if(!$(r,["string","array"]))throw new ft(`Expected second argument to be of type array or string, but found ${H(ut(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Pe=Te;class Ie{constructor(t,e,r){this.type=D,this.needle=t,this.haystack=e,this.fromIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,U),n=e.parse(t[2],2,U);if(!r||!n)return null;if(!J(r.type,[z,B,D,F,U]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,D);return i?new Ie(r,n,i):null}return new Ie(r,n)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!$(e,["boolean","string","number","null"]))throw new ft(`Expected first argument to be of type boolean, string, number or null, but found ${H(ut(e))} instead.`);if(!$(r,["string","array"]))throw new ft(`Expected second argument to be of type array or string, but found ${H(ut(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ke=Ie;class Re{constructor(t,e,r,n,i,o){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i={},o=[];for(let a=2;a<t.length-1;a+=2){let s=t[a];const u=t[a+1];Array.isArray(s)||(s=[s]);const l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return l.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return l.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,ut(t)))return null}else r=ut(t);if(void 0!==i[String(t)])return l.error("Branch labels must be unique.");i[String(t)]=o.length}const c=e.parse(u,a,n);if(!c)return null;n=n||c.type,o.push(c)}const a=e.parse(t[1],1,U);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,n);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(r,a.type)?null:new Re(r,n,a,i,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(ut(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),r=[],n={};for(const t of e){const e=n[this.cases[t]];void 0===e?(n[this.cases[t]]=r.length,r.push([this.cases[t],[t]])):r[e][1].push(t)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,n]of r)1===n.length?t.push(i(n[0])):t.push(n.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}var Le=Re;class Ce{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n=[];for(let i=1;i<t.length-1;i+=2){const o=e.parse(t[i],i,z);if(!o)return null;const a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}const i=e.parse(t[t.length-1],t.length-1,r);return i?new Ce(r,n,i):null}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var Ae=Ce;class Ne{constructor(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,U),n=e.parse(t[2],2,D);if(!r||!n)return null;if(!J(r.type,[Z(U),B,U]))return e.error(`Expected first argument to be of type array or string, but found ${H(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,D);return i?new Ne(r.type,r,n,i):null}return new Ne(r.type,r,n)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!$(e,["string","array"]))throw new ft(`Expected first argument to be of type array or string, but found ${H(ut(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var je=Ne;function Fe(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function De(t,e,r,n){return 0===n.compare(e,r)}function Be(t,e,r){const n="=="!==t&&"!="!==t;return class i{constructor(t,e,r){this.type=z,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const r=t[0];let o=e.parse(t[1],1,U);if(!o)return null;if(!Fe(r,o.type))return e.concat(1).error(`"${r}" comparisons are not supported for type '${H(o.type)}'.`);let a=e.parse(t[2],2,U);if(!a)return null;if(!Fe(r,a.type))return e.concat(2).error(`"${r}" comparisons are not supported for type '${H(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${H(o.type)}' and '${H(a.type)}'.`);n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new mt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new mt(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,V),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const e=ut(o),r=ut(a);if(e.kind!==r.kind||"string"!==e.kind&&"number"!==e.kind)throw new ft(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=ut(o),r=ut(a);if("string"!==t.kind||"string"!==r.kind)return e(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):e(i,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild(t=>{e.push(t.serialize())}),e}}}const ze=Be("==",(function(t,e,r){return e===r}),De),Ge=Be("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return!De(0,e,r,n)})),qe=Be("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),Ue=Be(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),Ve=Be("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),We=Be(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0}));class Ye{constructor(t,e,r,n,i,o){this.type=B,this.number=t,this.locale=e,this.currency=r,this.unit=n,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,D);if(!r)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=e.parse(n.locale,1,B),!i))return null;let o=null;if(n.currency&&(o=e.parse(n.currency,1,B),!o))return null;let a=null;if(n.unit&&(a=e.parse(n.unit,1,B),!a))return null;let s=null;if(n["min-fraction-digits"]&&(s=e.parse(n["min-fraction-digits"],1,D),!s))return null;let u=null;return n["max-fraction-digits"]&&(u=e.parse(n["max-fraction-digits"],1,D),!u)?null:new Ye(r,i,o,a,s,u)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Ze{constructor(t){this.type=D,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error(`Expected argument of type string or array, but found ${H(r.type)} instead.`):new Ze(r):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ft(`Expected value to be of type string or array, but found ${H(ut(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const He={"==":ze,"!=":Ge,">":Ue,"<":qe,">=":We,"<=":Ve,array:mt,at:Oe,boolean:mt,case:Ae,coalesce:xe,collator:Et,format:yt,image:gt,in:Pe,"index-of":ke,interpolate:be,"interpolate-hcl":be,"interpolate-lab":be,length:Ze,let:Se,literal:ht,match:Le,number:mt,"number-format":Ye,object:mt,slice:je,step:Qt,string:mt,"to-boolean":bt,"to-color":bt,"to-number":bt,"to-string":bt,var:Ht,within:Ut};function Xe(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const o=i?i.evaluate(t):1,a=at(e,r,n,o);if(a)throw new ft(a);return new et(e/255*o,r/255*o,n/255*o,o)}function Ke(t,e){return t in e}function Je(t,e){const r=e[t];return void 0===r?null:r}function $e(t){return{type:t}}St.register(He,{error:[{kind:"error"},[B],(t,[e])=>{throw new ft(e.evaluate(t))}],typeof:[B,[U],(t,[e])=>H(ut(e.evaluate(t)))],"to-rgba":[Z(D,4),[G],(t,[e])=>e.evaluate(t).toArray()],rgb:[G,[D,D,D],Xe],rgba:[G,[D,D,D,D],Xe],has:{type:z,overloads:[[[B],(t,[e])=>Ke(e.evaluate(t),t.properties())],[[B,q],(t,[e,r])=>Ke(e.evaluate(t),r.evaluate(t))]]},get:{type:U,overloads:[[[B],(t,[e])=>Je(e.evaluate(t),t.properties())],[[B,q],(t,[e,r])=>Je(e.evaluate(t),r.evaluate(t))]]},"feature-state":[U,[B],(t,[e])=>Je(e.evaluate(t),t.featureState||{})],properties:[q,[],t=>t.properties()],"geometry-type":[B,[],t=>t.geometryType()],id:[U,[],t=>t.id()],zoom:[D,[],t=>t.globals.zoom],pitch:[D,[],t=>t.globals.pitch||0],"distance-from-center":[D,[],t=>t.distanceFromCenter()],"heatmap-density":[D,[],t=>t.globals.heatmapDensity||0],"line-progress":[D,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[D,[],t=>t.globals.skyRadialProgress||0],accumulated:[U,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[D,$e(D),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[D,$e(D),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:D,overloads:[[[D,D],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[D],(t,[e])=>-e.evaluate(t)]]},"/":[D,[D,D],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[D,[D,D],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[D,[],()=>Math.LN2],pi:[D,[],()=>Math.PI],e:[D,[],()=>Math.E],"^":[D,[D,D],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[D,[D],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[D,[D],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[D,[D],(t,[e])=>Math.log(e.evaluate(t))],log2:[D,[D],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[D,[D],(t,[e])=>Math.sin(e.evaluate(t))],cos:[D,[D],(t,[e])=>Math.cos(e.evaluate(t))],tan:[D,[D],(t,[e])=>Math.tan(e.evaluate(t))],asin:[D,[D],(t,[e])=>Math.asin(e.evaluate(t))],acos:[D,[D],(t,[e])=>Math.acos(e.evaluate(t))],atan:[D,[D],(t,[e])=>Math.atan(e.evaluate(t))],min:[D,$e(D),(t,e)=>Math.min(...e.map(e=>e.evaluate(t)))],max:[D,$e(D),(t,e)=>Math.max(...e.map(e=>e.evaluate(t)))],abs:[D,[D],(t,[e])=>Math.abs(e.evaluate(t))],round:[D,[D],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[D,[D],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[D,[D],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[z,[B,U],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[z,[U],(t,[e])=>t.id()===e.value],"filter-type-==":[z,[B],(t,[e])=>t.geometryType()===e.value],"filter-<":[z,[B,U],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[z,[U],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[z,[B,U],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[z,[U],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[z,[B,U],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[z,[U],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[z,[B,U],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[z,[U],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[z,[U],(t,[e])=>e.value in t.properties()],"filter-has-id":[z,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[z,[Z(B)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[z,[Z(U)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[z,[B,Z(U)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[z,[B,Z(U)],(t,[e,r])=>function(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:z,overloads:[[[z,z],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[$e(z),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:z,overloads:[[[z,z],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[$e(z),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[z,[z],(t,[e])=>!e.evaluate(t)],"is-supported-script":[z,[B],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return!r||r(e.evaluate(t))}],upcase:[B,[B],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[B,[B],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[B,$e(U),(t,e)=>e.map(e=>lt(e.evaluate(t))).join("")],"resolved-locale":[B,[V],(t,[e])=>e.evaluate(t).resolvedLocale()]});var Qe=He;function tr(t){return{result:"success",value:t}}function er(t){return{result:"error",value:t}}function rr(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function nr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function ir(t){return!!t.expression&&t.expression.interpolated}function or(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function ar(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function sr(t){return t}function ur(t,e){const r="color"===e.type,n=t.stops&&"object"==typeof t.stops[0][0],i=n||void 0!==t.property,o=n||!i,a=t.type||(ir(e)?"exponential":"interval");if(r&&((t=L({},t)).stops&&(t.stops=t.stops.map(t=>[t[0],et.parse(t[1])])),t.default?t.default=et.parse(t.default):t.default=et.parse(e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!ge[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);let s,u,l;if("exponential"===a)s=fr;else if("interval"===a)s=hr;else if("categorical"===a){s=cr,u=Object.create(null);for(const e of t.stops)u[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=pr}if(n){const r={},n=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},n.push(o)),r[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of n)i.push([r[t].zoom,ur(r[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:be.interpolationFactor.bind(void 0,o),zoomStops:i.map(t=>t[0]),evaluate:({zoom:r},n)=>fr({stops:i,base:t.base},e,r).evaluate(r,n)}}if(o){const r="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:be.interpolationFactor.bind(void 0,r),zoomStops:t.stops.map(t=>t[0]),evaluate:({zoom:r})=>s(t,e,r,u,l)}}return{kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[t.property]:void 0;return void 0===i?lr(t.default,e.default):s(t,e,i,u,l)}}}function lr(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function cr(t,e,r,n,i){return lr(typeof r===i?n[r]:void 0,t.default,e.default)}function hr(t,e,r){if("number"!==or(r))return lr(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];const i=Jt(t.stops.map(t=>t[0]),r);return t.stops[i][1]}function fr(t,e,r){const n=void 0!==t.base?t.base:1;if("number"!==or(r))return lr(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const o=Jt(t.stops.map(t=>t[0]),r),a=function(t,e,r,n){const i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1];let l=ne[e.type]||sr;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=ge[t.colorSpace];l=(t,r)=>e.reverse(e.interpolate(e.forward(t),e.forward(r),a))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==r)return l(e,r,a)}}:l(s,u,a)}function pr(t,e,r){return"color"===e.type?r=et.parse(r):"formatted"===e.type?r=it.fromString(r.toString()):"resolvedImage"===e.type?r=ot.fromString(r.toString()):or(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),lr(r,t.default,e.default)}class dr{constructor(t,e){var r;this.expression=t,this._warningHistory={},this._evaluator=new xt,this._defaultValue=e?"color"===(r=e).type&&(ar(r.default)||Array.isArray(r.default))?new et(0,0,0,0):"color"===r.type?et.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,r,n,i,o,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,n,i,o,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new ft(`Expected value to be one of ${Object.keys(this._enumValues).map(t=>JSON.stringify(t)).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function mr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Qe}function yr(t,e){const r=new Kt(Qe,[],e?function(t){const e={color:G,string:B,number:D,enum:B,boolean:z,formatted:W,resolvedImage:Y};if("array"===t.type)return Z(e[t.value]||U,t.length);return e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?tr(new dr(n,e)):er(r.errors)}class gr{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Wt(e.expression)}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}evaluate(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}}class vr{constructor(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Wt(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}evaluate(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}interpolationFactor(t,e,r){return this.interpolationType?be.interpolationFactor(this.interpolationType,t,e,r):0}}function _r(t,e){if("error"===(t=yr(t,e)).result)return t;const r=t.value.expression,n=Vt(r);if(!n&&!rr(e))return er([new A("","data expressions not supported")]);const i=Yt(r,["zoom","pitch","distance-from-center"]);if(!i&&!nr(e))return er([new A("","zoom expressions not supported")]);const o=function t(e){let r=null;if(e instanceof Se)r=t(e.result);else if(e instanceof xe){for(const n of e.args)if(r=t(n),r)break}else(e instanceof Qt||e instanceof be)&&e.input instanceof St&&"zoom"===e.input.name&&(r=e);if(r instanceof A)return r;return e.eachChild(e=>{const n=t(e);n instanceof A?r=n:!r&&n?r=new A("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new A("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}(r);if(!o&&!i)return er([new A("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof A)return er([o]);if(o instanceof be&&!ir(e))return er([new A("",'"interpolate" expressions cannot be used with this property')]);if(!o)return tr(new gr(n?"constant":"source",t.value));const a=o instanceof be?o.interpolation:void 0;return tr(new vr(n?"camera":"composite",t.value,o.labels,a))}class br{constructor(t,e){this._parameters=t,this._specification=e,L(this,ur(this._parameters,this._specification))}static deserialize(t){return new br(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function wr(t){return"object"==typeof t?["literal",t]:t}function xr(t,e){let r=t.stops;if(!r)return function(t,e){const r=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",r]:r;if("enum"===e.type)return["match",r,Object.keys(e.values),r,t.default];{const n=["color"===e.type?"to-color":e.type,r,wr(t.default)];return"array"===e.type&&n.splice(1,0,e.value,e.length||null),n}}(t,e);const n=r&&"object"==typeof r[0][0],i=n||void 0!==t.property,o=n||!i;return r=r.map(t=>!i&&e.tokens&&"string"==typeof t[1]?[t[0],Ir(t[1])]:[t[0],wr(t[1])]),n?function(t,e,r){const n={},i={},o=[];for(let e=0;e<r.length;e++){const a=r[e],s=a[0].zoom;void 0===n[s]&&(n[s]={zoom:s,type:t.type,property:t.property,default:t.default},i[s]=[],o.push(s)),i[s].push([a[0].value,a[1]])}if("exponential"===Pr({},e)){const r=[Mr(t),["linear"],["zoom"]];for(const t of o){const o=Er(n[t],e,i[t]);Tr(r,t,o,!1)}return r}{const t=["step",["zoom"]];for(const r of o){const o=Er(n[r],e,i[r]);Tr(t,r,o,!0)}return Or(t),t}}(t,e,r):o?function(t,e,r,n=["zoom"]){const i=Pr(t,e);let o,a=!1;if("interval"===i)o=["step",n],a=!0;else{if("exponential"!==i)throw new Error(`Unknown zoom function type "${i}"`);{const e=void 0!==t.base?t.base:1;o=[Mr(t),1===e?["linear"]:["exponential",e],n]}}for(const t of r)Tr(o,t[0],t[1],a);return Or(o),o}(t,e,r):Er(t,e,r)}function Mr(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Sr(t,e){const r=wr((n=t.default,i=e.default,void 0!==n?n:void 0!==i?i:void 0));var n,i;return void 0===r&&"resolvedImage"===e.type?"":r}function Er(t,e,r){const n=Pr(t,e),i=["get",t.property];if("categorical"===n&&"boolean"==typeof r[0][0]){const n=["case"];for(const t of r)n.push(["==",i,t[0]],t[1]);return n.push(Sr(t,e)),n}if("categorical"===n){const n=["match",i];for(const t of r)Tr(n,t[0],t[1],!1);return n.push(Sr(t,e)),n}if("interval"===n){const e=["step",["number",i]];for(const t of r)Tr(e,t[0],t[1],!0);return Or(e),void 0===t.default?e:["case",["==",["typeof",i],"number"],e,wr(t.default)]}if("exponential"===n){const e=void 0!==t.base?t.base:1,n=[Mr(t),1===e?["linear"]:["exponential",e],["number",i]];for(const t of r)Tr(n,t[0],t[1],!1);return void 0===t.default?n:["case",["==",["typeof",i],"number"],n,wr(t.default)]}throw new Error("Unknown property function type "+n)}function Or(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function Tr(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&2===t.length||t.push(e),t.push(r))}function Pr(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function Ir(t){const e=["concat"],r=/{([^{}]+)}/g;let n=0;for(let i=r.exec(t);null!==i;i=r.exec(t)){const o=t.slice(n,r.lastIndex-i[0].length);n=r.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(1===e.length)return t;if(n<t.length)e.push(t.slice(n));else if(2===e.length)return["to-string",e[1]];return e}function kr(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Rr(t){if(Array.isArray(t))return t.map(Rr);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=Rr(t[r]);return e}return kr(t)}function Lr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Lr(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function Cr(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Lr(t)||(t=Fr(t));const r=t;let n=!0;try{n=function(t){if(!Ar(t))return t;let e=Rr(t);return function t(e){let r=!1;const n=[];if("case"===e[0]){for(let t=1;t<e.length-1;t+=2)r=r||Ar(e[t]),n.push(e[t+1]);n.push(e[e.length-1])}else if("match"===e[0]){r=r||Ar(e[1]);for(let t=2;t<e.length-1;t+=2)n.push(e[t+1]);n.push(e[e.length-1])}else if("step"===e[0]){r=r||Ar(e[1]);for(let t=1;t<e.length-1;t+=2)n.push(e[t+1])}r&&(e.length=0,e.push("any",...n));for(let r=1;r<e.length;r++)t(e[r])}(e),e=function t(e){if(!Array.isArray(e))return e;const r=function(t){if(Nr.has(t[0]))for(let e=1;e<t.length;e++){if(Ar(t[e]))return!0}return t}(e);return!0===r?r:r.map(e=>t(e))}(e),e}(r)}catch(t){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(r,null,2)}\n        `)}const o=i["filter_"+e],a=yr(n,o);let s=null;if("error"===a.result)throw new Error(a.value.map(t=>`${t.key}: ${t.message}`).join(", "));s=(t,e,r)=>a.value.evaluate(t,e,{},r);let u=null,l=null;if(n!==r){const t=yr(r,o);if("error"===t.result)throw new Error(t.value.map(t=>`${t.key}: ${t.message}`).join(", "));u=(e,r,n,i,o)=>t.value.evaluate(e,r,{},n,void 0,void 0,i,o),l=!Vt(t.value.expression)}s=s;return{filter:s,dynamicFilter:u||void 0,needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let r=1;r<e.length;r++)if(t(e[r]))return!0;return!1}(n),needFeature:!!l}}function Ar(t){if(!Array.isArray(t))return!1;if(function(t){return"pitch"===t||"distance-from-center"===t}(t[0]))return!0;for(let e=1;e<t.length;e++){if(Ar(t[e]))return!0}return!1}const Nr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function jr(t,e){return t<e?-1:t>e?1:0}function Fr(t){if(!t)return!0;const e=t[0];if(t.length<=1)return"any"!==e;var r;return"=="===e?Dr(t[1],t[2],"=="):"!="===e?Gr(Dr(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Dr(t[1],t[2],e):"any"===e?(r=t.slice(1),["any"].concat(r.map(Fr))):"all"===e?["all"].concat(t.slice(1).map(Fr)):"none"===e?["all"].concat(t.slice(1).map(Fr).map(Gr)):"in"===e?Br(t[1],t.slice(2)):"!in"===e?Gr(Br(t[1],t.slice(2))):"has"===e?zr(t[1]):"!has"===e?Gr(zr(t[1])):"within"!==e||t}function Dr(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Br(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",t,["literal",e.sort(jr)]]:["filter-in-small",t,["literal",e]]}}function zr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Gr(t){return["!",t]}var qr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ur(t,e){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return qr.forEach(t=>{t in e&&(r[t]=e[t])}),r}function Vr(t){t=t.slice();const e=Object.create(null);for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(let r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Ur(t[r],e[t[r].ref]));return t}a((function(t,e){var r=function(){var t=function(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r},e=[1,12],r=[1,13],n=[1,9],i=[1,10],o=[1,11],a=[1,14],s=[1,15],u=[14,18,22,24],l=[18,22],c=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(t),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},t(u,[2,7]),t(u,[2,8]),t(u,[2,9]),t(u,[2,10]),t(u,[2,11]),t(u,[2,12]),t(u,[2,3]),t(u,[2,4]),t(u,[2,5]),t([14,18,21,22,24],[2,1]),t(u,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},t(u,[2,13]),{18:[1,24],22:[1,25]},t(l,[2,16]),{21:[1,26]},t(u,[2,18]),{22:[1,28],24:[1,27]},t(c,[2,20]),t(u,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:30,15:7,16:8,17:a,23:s},t(u,[2,19]),{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:31,15:7,16:8,17:a,23:s},t(l,[2,17]),t(l,[2,15]),t(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,r=[0],n=[null],i=[],o=this.table,a="",s=0,u=0,l=2,c=1,h=i.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(p.yy[d]=this.yy[d]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var m=f.yylloc;i.push(m);var y=f.options&&f.options.ranges;function g(){var t;return"number"!=typeof(t=f.lex()||c)&&(t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,_,b,w,x,M,S,E,O={};;){if(_=r[r.length-1],this.defaultActions[_]?b=this.defaultActions[_]:(null==v&&(v=g()),b=o[_]&&o[_][v]),void 0===b||!b.length||!b[0]){var T="";for(x in E=[],o[_])this.terminals_[x]&&x>l&&E.push("'"+this.terminals_[x]+"'");T=f.showPosition?"Parse error on line "+(s+1)+":\n"+f.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(s+1)+": Unexpected "+(v==c?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(T,{text:f.match,token:this.terminals_[v]||v,line:f.yylineno,loc:m,expected:E})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+v);switch(b[0]){case 1:r.push(v),n.push(f.yytext),i.push(f.yylloc),r.push(b[1]),v=null,u=f.yyleng,a=f.yytext,s=f.yylineno,m=f.yylloc;break;case 2:if(M=this.productions_[b[1]][1],O.$=n[n.length-M],O._$={first_line:i[i.length-(M||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(M||1)].first_column,last_column:i[i.length-1].last_column},y&&(O._$.range=[i[i.length-(M||1)].range[0],i[i.length-1].range[1]]),void 0!==(w=this.performAction.apply(O,[a,u,s,p.yy,b[1],n,i].concat(h))))return w;M&&(r=r.slice(0,-1*M*2),n=n.slice(0,-1*M),i=i.slice(0,-1*M)),r.push(this.productions_[b[1]][0]),n.push(O.$),i.push(O._$),S=o[r[r.length-2]][r[r.length-1]],r.push(S);break;case 3:return!0}}return!0}},f={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((r=this._input.match(this.rules[i[o]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function p(){this.yy={}}return h.lexer=f,p.prototype=h,h.Parser=p,new p}();void 0!==s&&(e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)})}));new Set(["vector","raster","raster-dem"]);const Wr={StyleExpression:dr,isExpression:mr,isExpressionFilter:Lr,createExpression:yr,createPropertyExpression:_r,normalizePropertyExpression:function(t,e){if(ar(t))return new br(t,e);if(mr(t)){const r=_r(t,e);if("error"===r.result)throw new Error(r.value.map(t=>`${t.key}: ${t.message}`).join(", "));return r.value}{let r=t;return"string"==typeof t&&"color"===e.type&&(r=et.parse(t)),{kind:"constant",evaluate:()=>r}}},ZoomConstantExpression:gr,ZoomDependentExpression:vr,StylePropertyFunction:br},Yr={convertFunction:xr,createFunction:ur,isFunction:ar}}).call(this,r(5),r(3).Buffer)},function(t,e,r){var n=r(1).Buffer,i=r(245).Transform,o=r(21).StringDecoder;function a(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(0)(a,i),a.prototype.update=function(t,e,r){"string"==typeof t&&(t=n.from(t,e));var i=this._update(t);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){n=t}finally{r(n)}},a.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},a.prototype._finalOrDigest=function(t){var e=this.__final()||n.alloc(0);return t&&(e=this._toString(e,t,!0)),e},a.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n},t.exports=a},function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(n)},function(t,e,r){"use strict";var n=r(26),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var o=Object.create(r(22));o.inherits=r(0);var a=r(74),s=r(42);o.inherits(h,a);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,r){"use strict";(function(e,n){var i=r(1).Buffer,o=e.crypto||e.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(t);if(t>0)if(t>65536)for(var a=0;a<t;a+=65536)o.getRandomValues(r.slice(a,a+65536));else o.getRandomValues(r);if("function"==typeof e)return n.nextTick((function(){e(null,r)}));return r}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(5),r(4))},function(t,e,r){"use strict";var n={};function i(t,e,r){r||(r=Error);var i=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,a,s;if("string"==typeof e&&(i="not ",e.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))s="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var u=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(u," ").concat(n," ").concat(o(e,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},function(t,e,r){"use strict";(function(e){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=l;var i=r(65),o=r(69);r(0)(l,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(t){if(!(this instanceof l))return new l(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r(4))},function(t,e,r){var n=r(1).Buffer;function i(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=n.from(t,e));for(var r=this._block,i=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var u=a%i,l=Math.min(o-s,i-u),c=0;c<l;c++)r[u+c]=t[s+c];s+=l,(a+=l)%i==0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},function(t,e,r){"use strict";var n=r(0),i=r(36),o=r(38),a=r(39),s=r(12);function u(t){s.call(this,"digest"),this._hash=t}n(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new o:new u(a(t))}},function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&g(t,"error",e,r)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,a,s;if(l(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var l=u.length,c=y(u,l);for(r=0;r<l;++r)o(c[r],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,o,a;if(l(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){"use strict";var n=r(1).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function c(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,r(3).Buffer)},function(t,e,r){(function(e){t.exports=function(t,r){for(var n=Math.min(t.length,r.length),i=new e(n),o=0;o<n;++o)i[o]=t[o]^r[o];return i}}).call(this,r(3).Buffer)},function(t,e,r){"use strict";var n=r(8),i=r(6);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(t,e,r){"use strict";const n=r(0),i=r(54).Reporter,o=r(52).Buffer;function a(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function s(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return s.isEncoderBuffer(t)||(t=new s(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(a,i),e.DecoderBuffer=a,a.isDecoderBuffer=function(t){if(t instanceof a)return!0;return"object"==typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},a.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},a.prototype.restore=function(t){const e=new a(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},a.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new a(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},a.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=s,s.isEncoderBuffer=function(t){if(t instanceof s)return!0;return"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},s.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(t,e),e+=r.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},function(t,e,r){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,r(4))},function(t,e,r){var n=r(1).Buffer;function i(t){n.isBuffer(t)||(t=n.from(t));for(var e=t.length/4|0,r=new Array(e),i=0;i<e;i++)r[i]=t.readUInt32BE(4*i);return r}function o(t){for(;0<t.length;t++)t[0]=0}function a(t,e,r,n,i){for(var o,a,s,u,l=r[0],c=r[1],h=r[2],f=r[3],p=t[0]^e[0],d=t[1]^e[1],m=t[2]^e[2],y=t[3]^e[3],g=4,v=1;v<i;v++)o=l[p>>>24]^c[d>>>16&255]^h[m>>>8&255]^f[255&y]^e[g++],a=l[d>>>24]^c[m>>>16&255]^h[y>>>8&255]^f[255&p]^e[g++],s=l[m>>>24]^c[y>>>16&255]^h[p>>>8&255]^f[255&d]^e[g++],u=l[y>>>24]^c[p>>>16&255]^h[d>>>8&255]^f[255&m]^e[g++],p=o,d=a,m=s,y=u;return o=(n[p>>>24]<<24|n[d>>>16&255]<<16|n[m>>>8&255]<<8|n[255&y])^e[g++],a=(n[d>>>24]<<24|n[m>>>16&255]<<16|n[y>>>8&255]<<8|n[255&p])^e[g++],s=(n[m>>>24]<<24|n[y>>>16&255]<<16|n[p>>>8&255]<<8|n[255&d])^e[g++],u=(n[y>>>24]<<24|n[p>>>16&255]<<16|n[d>>>8&255]<<8|n[255&m])^e[g++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,r[a]=l,n[l]=a;var c=t[a],h=t[c],f=t[h],p=257*t[l]^16843008*l;i[0][a]=p<<24|p>>>8,i[1][a]=p<<16|p>>>16,i[2][a]=p<<8|p>>>24,i[3][a]=p,p=16843009*f^65537*h^257*c^16843008*a,o[0][l]=p<<24|p>>>8,o[1][l]=p<<16|p>>>16,o[2][l]=p<<8|p>>>24,o[3][l]=p,0===a?a=s=1:(a=c^t[t[t[f^c]]],s^=t[t[s]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function l(t){this._key=i(t),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=4*(r+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var a=i[o-1];o%e==0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=s[o/e|0]<<24):e>6&&o%e==4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),i[o]=i[o-e]^a}for(var l=[],c=0;c<n;c++){var h=n-c,f=i[h-(c%4?0:4)];l[c]=c<4||h<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(t){return a(t=i(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},l.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=n.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},l.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var r=a(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},l.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=l},function(t,e,r){var n=r(1).Buffer,i=r(36);t.exports=function(t,e,r,o){if(n.isBuffer(t)||(t=n.from(t,"binary")),e&&(n.isBuffer(e)||(e=n.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=r/8,s=n.alloc(a),u=n.alloc(o||0),l=n.alloc(0);a>0||o>0;){var c=new i;c.update(l),c.update(t),e&&c.update(e),l=c.digest();var h=0;if(a>0){var f=s.length-a;h=Math.min(a,l.length),l.copy(s,f,0,h),a-=h}if(h<l.length&&o>0){var p=u.length-o,d=Math.min(o,l.length-h);l.copy(u,p,h,h+d),o-=d}}return l.fill(0),{key:s,iv:u}}},function(t,e,r){"use strict";var n=r(10),i=r(7),o=i.getNAF,a=i.getJSF,s=i.assert;function u(t,e){this.type=t,this.p=new n(e.p,16),this.red=e.prime?n.red(e.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=e.n&&new n(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var r=t._getDoubles(),n=o(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var a,u,l=[];for(a=0;a<n.length;a+=r.step){u=0;for(var c=a+r.step-1;c>=a;c--)u=(u<<1)+n[c];l.push(u)}for(var h=this.jpoint(null,null,null),f=this.jpoint(null,null,null),p=i;p>0;p--){for(a=0;a<l.length;a++)(u=l[a])===p?f=f.mixedAdd(r.points[a]):u===-p&&(f=f.mixedAdd(r.points[a].neg()));h=h.add(f)}return h.toP()},u.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,a=o(e,r,this._bitLength),u=this.jpoint(null,null,null),l=a.length-1;l>=0;l--){for(var c=0;l>=0&&0===a[l];l--)c++;if(l>=0&&c++,u=u.dblp(c),l<0)break;var h=a[l];s(0!==h),u="affine"===t.type?h>0?u.mixedAdd(i[h-1>>1]):u.mixedAdd(i[-h-1>>1].neg()):h>0?u.add(i[h-1>>1]):u.add(i[-h-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,r,n,i){var s,u,l,c=this._wnafT1,h=this._wnafT2,f=this._wnafT3,p=0;for(s=0;s<n;s++){var d=(l=e[s])._getNAFPoints(t);c[s]=d.wnd,h[s]=d.points}for(s=n-1;s>=1;s-=2){var m=s-1,y=s;if(1===c[m]&&1===c[y]){var g=[e[m],null,null,e[y]];0===e[m].y.cmp(e[y].y)?(g[1]=e[m].add(e[y]),g[2]=e[m].toJ().mixedAdd(e[y].neg())):0===e[m].y.cmp(e[y].y.redNeg())?(g[1]=e[m].toJ().mixedAdd(e[y]),g[2]=e[m].add(e[y].neg())):(g[1]=e[m].toJ().mixedAdd(e[y]),g[2]=e[m].toJ().mixedAdd(e[y].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],_=a(r[m],r[y]);for(p=Math.max(_[0].length,p),f[m]=new Array(p),f[y]=new Array(p),u=0;u<p;u++){var b=0|_[0][u],w=0|_[1][u];f[m][u]=v[3*(b+1)+(w+1)],f[y][u]=0,h[m]=g}}else f[m]=o(r[m],c[m],this._bitLength),f[y]=o(r[y],c[y],this._bitLength),p=Math.max(f[m].length,p),p=Math.max(f[y].length,p)}var x=this.jpoint(null,null,null),M=this._wnafT4;for(s=p;s>=0;s--){for(var S=0;s>=0;){var E=!0;for(u=0;u<n;u++)M[u]=0|f[u][s],0!==M[u]&&(E=!1);if(!E)break;S++,s--}if(s>=0&&S++,x=x.dblp(S),s<0)break;for(u=0;u<n;u++){var O=M[u];0!==O&&(O>0?l=h[u][O-1>>1]:O<0&&(l=h[u][-O-1>>1].neg()),x="affine"===l.type?x.mixedAdd(l):x.add(l))}}for(s=0;s<n;s++)h[s]=null;return i?x:x.toP()},u.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(t){return this.encode(t,!0)},l.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},l.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},l.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},l.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},l.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},l.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}},function(t,e,r){var n=r(303),i=r(311),o=r(312),a=r(44),s=r(81),u=r(1).Buffer;function l(t){var e;"object"!=typeof t||u.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=u.from(t));var r,l,c=o(t,e),h=c.tag,f=c.data;switch(h){case"CERTIFICATE":l=n.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=n.PublicKey.decode(f,"der")),r=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=n.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":f=function(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[t.algorithm.decrypt.cipher.algo.join(".")],l=t.algorithm.decrypt.cipher.iv,c=t.subjectPrivateKey,h=parseInt(o.split("-")[1],10)/8,f=s.pbkdf2Sync(e,r,n,h,"sha1"),p=a.createDecipheriv(o,f,l),d=[];return d.push(p.update(c)),d.push(p.final()),u.concat(d)}(f=n.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(r=(l=n.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:n.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=n.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=n.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+h)}}t.exports=l,l.signature=n.signature},function(t,e,r){
/**!

 @license
 handlebars v4.7.7

Copyright (C) 2011-2019 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(){var t=f();return t.compile=function(e,r){return u.compile(e,r,t)},t.precompile=function(e,r){return u.precompile(e,r,t)},t.AST=a.default,t.Compiler=u.Compiler,t.JavaScriptCompiler=l.default,t.Parser=s.parser,t.parse=s.parse,t.parseWithoutProcessing=s.parseWithoutProcessing,t}var i=r(1).default;e.__esModule=!0;var o=i(r(2)),a=i(r(45)),s=r(46),u=r(51),l=i(r(52)),c=i(r(49)),h=i(r(44)),f=o.default.create,p=n();p.create=n,h.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,r){"use strict";function n(){var t=new a.HandlebarsEnvironment;return l.extend(t,a),t.SafeString=s.default,t.Exception=u.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var i=r(3).default,o=r(1).default;e.__esModule=!0;var a=i(r(4)),s=o(r(37)),u=o(r(6)),l=i(r(5)),c=i(r(38)),h=o(r(44)),f=n();f.create=n,h.default(f),f.default=f,e.default=f,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},e.__esModule=!0},function(t,e,r){"use strict";function n(t,e,r){this.helpers=t||{},this.partials=e||{},this.decorators=r||{},s.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var i=r(1).default;e.__esModule=!0,e.HandlebarsEnvironment=n;var o=r(5),a=i(r(6)),s=r(10),u=r(30),l=i(r(32)),c=r(33);e.VERSION="4.7.7",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var h="[object Object]";n.prototype={constructor:n,logger:l.default,log:l.default.log,registerHelper:function(t,e){if(o.toString.call(t)===h){if(e)throw new a.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===h)o.extend(this.partials,t);else{if(void 0===e)throw new a.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===h){if(e)throw new a.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var f=l.default.log;e.log=f,e.createFrame=o.createFrame,e.logger=l.default},function(t,e){"use strict";function r(t){return i[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&(t[r]=arguments[e][r]);return t}e.__esModule=!0,e.extend=n,e.indexOf=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return a.test(t)?t.replace(o,r):t},e.isEmpty=function(t){return!t&&0!==t||!(!l(t)||0!==t.length)},e.createFrame=function(t){var e=n({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,a=/[&<>"'`=]/,s=Object.prototype.toString;e.toString=s;var u=function(t){return"function"==typeof t};u(/x/)&&(e.isFunction=u=function(t){return"function"==typeof t&&"[object Function]"===s.call(t)}),e.isFunction=u;var l=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===s.call(t)};e.isArray=l},function(t,e,r){"use strict";function n(t,e){var r=e&&e.loc,a=void 0,s=void 0,u=void 0,l=void 0;r&&(a=r.start.line,s=r.end.line,u=r.start.column,l=r.end.column,t+=" - "+a+":"+u);for(var c=Error.prototype.constructor.call(this,t),h=0;h<o.length;h++)this[o[h]]=c[o[h]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,this.endLineNumber=s,i?(Object.defineProperty(this,"column",{value:u,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=u,this.endColumn=l))}catch(t){}}var i=r(7).default;e.__esModule=!0;var o=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,r){t.exports={default:r(8),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e,r){return n.setDesc(t,e,r)}},function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){i.default(t),o.default(t),a.default(t),s.default(t),u.default(t),l.default(t),c.default(t)},e.moveHelperToHooks=function(t,e,r){t.helpers[e]&&(t.hooks[e]=t.helpers[e],r||delete t.helpers[e])};var i=n(r(11)),o=n(r(12)),a=n(r(25)),s=n(r(26)),u=n(r(27)),l=n(r(28)),c=n(r(29))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,r){var i=r.inverse,o=r.fn;if(!0===e)return o(this);if(!1===e||null==e)return i(this);if(n.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):i(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return o(e,r)}))},t.exports=e.default},function(t,e,r){(function(n){"use strict";var i=r(13).default,o=r(1).default;e.__esModule=!0;var a=r(5),s=o(r(6));e.default=function(t){t.registerHelper("each",(function(t,e){function r(e,r,n){h&&(h.key=e,h.index=r,h.first=0===r,h.last=!!n,f&&(h.contextPath=f+e)),c+=o(t[e],{data:h,blockParams:a.blockParams([t[e],e],[f+e,null])})}if(!e)throw new s.default("Must pass iterator to #each");var o=e.fn,u=e.inverse,l=0,c="",h=void 0,f=void 0;if(e.data&&e.ids&&(f=a.appendContextPath(e.data.contextPath,e.ids[0])+"."),a.isFunction(t)&&(t=t.call(this)),e.data&&(h=a.createFrame(e.data)),t&&"object"==typeof t)if(a.isArray(t))for(var p=t.length;l<p;l++)l in t&&r(l,l,l===t.length-1);else if(n.Symbol&&t[n.Symbol.iterator]){for(var d=[],m=t[n.Symbol.iterator](),y=m.next();!y.done;y=m.next())d.push(y.value);for(p=(t=d).length;l<p;l++)r(l,l,l===t.length-1)}else!function(){var e=void 0;i(t).forEach((function(t){void 0!==e&&r(e,l-1),e=t,l++})),void 0!==e&&r(e,l-1,!0)}();return 0===l&&(c=u(this)),c}))},t.exports=e.default}).call(e,function(){return this}())},function(t,e,r){t.exports={default:r(14),__esModule:!0}},function(t,e,r){r(15),t.exports=r(21).Object.keys},function(t,e,r){var n=r(16);r(18)("keys",(function(t){return function(e){return t(n(e))}}))},function(t,e,r){var n=r(17);t.exports=function(t){return Object(n(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(19),i=r(21),o=r(24);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(t,e,r){var n=r(20),i=r(21),o=r(22),a="prototype",s=function(t,e,r){var u,l,c,h=t&s.F,f=t&s.G,p=t&s.S,d=t&s.P,m=t&s.B,y=t&s.W,g=f?i:i[e]||(i[e]={}),v=f?n:p?n[e]:(n[e]||{})[a];for(u in f&&(r=e),r)(l=!h&&v&&u in v)&&u in g||(c=l?v[u]:r[u],g[u]=f&&"function"!=typeof v[u]?r[u]:m&&l?o(c,n):y&&v[u]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[a]=t[a],e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((g[a]||(g[a]={}))[u]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(23);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=n(r(6));e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(5),o=n(r(6));e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,r){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),e[0]=i,t.log.apply(t,e)}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,r){return t?r.lookupProperty(t,e):t}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(5),o=n(r(6));e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(t)&&(t=t.call(this));var r=e.fn;if(i.isEmpty(t))return e.inverse(this);var n=e.data;return e.data&&e.ids&&((n=i.createFrame(e.data)).contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),r(t,{data:n,blockParams:i.blockParams([t],[n&&n.contextPath])})}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){i.default(t)};var i=n(r(31))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerDecorator("inline",(function(t,e,r,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var a=r.partials;r.partials=n.extend({},a,e.partials);var s=t(i,o);return r.partials=a,s}),e.partials[i.args[0]]=i.fn,o}))},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];console[e].apply(console,n)}}};e.default=i,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==l[t]&&(l[t]=!0,u.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}var i=r(34).default,o=r(13).default,a=r(3).default;e.__esModule=!0,e.createProtoAccessControl=function(t){var e=i(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var r=i(null);return r.__proto__=!1,{properties:{whitelist:s.createNewLookupObject(r,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:s.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,r){return n("function"==typeof t?e.methods:e.properties,r)},e.resetLoggedProperties=function(){o(l).forEach((function(t){delete l[t]}))};var s=r(36),u=a(r(32)),l=i(null)},function(t,e,r){t.exports={default:r(35),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){"use strict";var n=r(34).default;e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i.extend.apply(void 0,[n(null)].concat(e))};var i=r(5)},function(t,e){"use strict";function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r,n,i,o,s){function u(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||e==s[0]||e===t.nullContext&&null===s[0]||(a=[e].concat(s)),r(t,e,t.helpers,t.partials,i.data||n,o&&[i.blockParams].concat(o),a)}return(u=a(r,u,t,s,n,o)).program=e,u.depth=s?s.length:0,u.blockParams=i||0,u}function i(){return""}function o(t,e){return e&&"root"in e||((e=e?p.createFrame(e):{}).root=t),e}function a(t,e,r,n,i,o){if(t.decorator){var a={};e=t.decorator(e,a,r,n&&n[0],i,o,n),h.extend(e,a)}return e}var s=r(39).default,u=r(13).default,l=r(3).default,c=r(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,r=p.COMPILER_REVISION;if(!(e>=p.LAST_COMPATIBLE_COMPILER_REVISION&&e<=p.COMPILER_REVISION)){if(e<p.LAST_COMPATIBLE_COMPILER_REVISION){var n=p.REVISION_CHANGES[r],i=p.REVISION_CHANGES[e];throw new f.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new f.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){function r(e){function n(e){return""+t.main(l,e,l.helpers,l.partials,s,c,u)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=i.data;r._setup(i),!i.partial&&t.useData&&(s=o(e,s));var u=void 0,c=t.useBlockParams?[]:void 0;return t.useDepths&&(u=i.depths?e!=i.depths[0]?[e].concat(i.depths):i.depths:[e]),(n=a(t.main,n,l,i.depths||[],s,c))(e,i)}if(!e)throw new f.default("No environment passed to template");if(!t||!t.main)throw new f.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i=t.compiler&&7===t.compiler[0],l={strict:function(t,e,r){if(!t||!(e in t))throw new f.default('"'+e+'" not defined in '+t,{loc:r});return l.lookupProperty(t,e)},lookupProperty:function(t,e){var r=t[e];return null==r||Object.prototype.hasOwnProperty.call(t,e)||y.resultIsAllowed(r,l.protoAccessControl,e)?r:void 0},lookup:function(t,e){for(var r=t.length,n=0;n<r;n++)if(null!=(t[n]&&l.lookupProperty(t[n],e)))return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:h.escapeExpression,invokePartial:function(r,n,i){i.hash&&(n=h.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=e.VM.resolvePartial.call(this,r,n,i);var o=h.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),a=e.VM.invokePartial.call(this,r,n,o);if(null==a&&e.compile&&(i.partials[i.name]=e.compile(r,t.compilerOptions,e),a=i.partials[i.name](n,o)),null!=a){if(i.indent){for(var s=a.split("\n"),u=0,l=s.length;u<l&&(s[u]||u+1!==l);u++)s[u]=i.indent+s[u];a=s.join("\n")}return a}throw new f.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var r=t[e];return r.decorator=t[e+"_d"],r},programs:[],program:function(t,e,r,i,o){var a=this.programs[t],s=this.fn(t);return e||o||i||r?a=n(this,t,s,e,r,i,o):a||(a=this.programs[t]=n(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var r=t||e;return t&&e&&t!==e&&(r=h.extend({},e,t)),r},nullContext:s({}),noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(r){if(r.partial)l.protoAccessControl=r.protoAccessControl,l.helpers=r.helpers,l.partials=r.partials,l.decorators=r.decorators,l.hooks=r.hooks;else{var n=h.extend({},e.helpers,r.helpers);(function(t,e){u(t).forEach((function(r){var n=t[r];t[r]=function(t,e){var r=e.lookupProperty;return m.wrapHelper(t,(function(t){return h.extend({lookupProperty:r},t)}))}(n,e)}))})(n,l),l.helpers=n,t.usePartial&&(l.partials=l.mergeIfNeeded(r.partials,e.partials)),(t.usePartial||t.useDecorators)&&(l.decorators=h.extend({},e.decorators,r.decorators)),l.hooks={},l.protoAccessControl=y.createProtoAccessControl(r);var o=r.allowCallsToHelperMissing||i;d.moveHelperToHooks(l,"helperMissing",o),d.moveHelperToHooks(l,"blockHelperMissing",o)}},r._child=function(e,r,i,o){if(t.useBlockParams&&!i)throw new f.default("must pass block params");if(t.useDepths&&!o)throw new f.default("must pass parent depths");return n(l,e,t[e],r,0,i,o)},r},e.wrapProgram=n,e.resolvePartial=function(t,e,r){return t?t.call||r.name||(r.name=t,t=r.partials[t]):t="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],t},e.invokePartial=function(t,e,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var o=void 0;if(r.fn&&r.fn!==i&&function(){r.data=p.createFrame(r.data);var t=r.fn;o=r.data["partial-block"]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=p.createFrame(r.data),r.data["partial-block"]=n,t(e,r)},t.partials&&(r.partials=h.extend({},r.partials,t.partials))}(),void 0===t&&o&&(t=o),void 0===t)throw new f.default("The partial "+r.name+" could not be found");if(t instanceof Function)return t(e,r)},e.noop=i;var h=l(r(5)),f=c(r(6)),p=r(4),d=r(10),m=r(43),y=r(33)},function(t,e,r){t.exports={default:r(40),__esModule:!0}},function(t,e,r){r(41),t.exports=r(21).Object.seal},function(t,e,r){var n=r(42);r(18)("seal",(function(t){return function(e){return t&&n(e)?t(e):e}}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){"use strict";e.__esModule=!0,e.wrapHelper=function(t,e){return"function"!=typeof t?t:function(){var r=arguments[arguments.length-1];return arguments[arguments.length-1]=e(r),t.apply(this,arguments)}}},function(t,e){(function(r){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==r?r:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var r={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!r.helpers.scopedId(t)&&!t.depth}}};e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){return"Program"===t.type?t:(a.default.yy=c,c.locInfo=function(t){return new c.SourceLocation(e&&e.srcName,t)},a.default.parse(t))}var i=r(1).default,o=r(3).default;e.__esModule=!0,e.parseWithoutProcessing=n,e.parse=function(t,e){var r=n(t,e);return new s.default(e).accept(r)};var a=i(r(47)),s=i(r(48)),u=o(r(50)),l=r(5);e.parser=a.default;var c={};l.extend(c,u)},function(t,e){"use strict";e.__esModule=!0;var r=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var u=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),l=n.prepareProgram([u],o[s-1].loc);l.chained=!0,this.$={strip:o[s-2].strip,program:l,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 27:case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 33:case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:case 41:this.$=o[s];break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=r.lexer.lex()||1)&&(t=r.symbols_[t]||t),t}var r=this,n=[0],i=[null],o=[],a=this.table,s="",u=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,m,y,g,v,_,b,w,x={};;){if(m=n[n.length-1],this.defaultActions[m]?y=this.defaultActions[m]:(null!=p||(p=e()),y=a[m]&&a[m][p]),void 0===y||!y.length||!y[0]){var M="";if(!c){for(v in w=[],a[m])this.terminals_[v]&&v>2&&w.push("'"+this.terminals_[v]+"'");M=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(M,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:w})}}if(y[0]instanceof Array&&y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(y[0]){case 1:n.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(y[1]),p=null,d?(p=d,d=null):(l=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(_=this.productions_[y[1]][1],x.$=i[i.length-_],x._$={first_line:o[o.length-(_||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(_||1)].first_column,last_column:o[o.length-1].last_column},f&&(x._$.range=[o[o.length-(_||1)].range[0],o[o.length-1].range[1]]),void 0!==(g=this.performAction.call(x,s,l,u,this.yy,y[1],i,o)))return g;_&&(n=n.slice(0,-1*_*2),i=i.slice(0,-1*_),o=o.slice(0,-1*_)),n.push(this.productions_[y[1]][0]),i.push(x.$),o.push(x._$),b=a[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},r=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(r=this._input.match(this.rules[o[a]]))||e&&!(r[0].length>e[0].length)||(e=r,n=a,this.options.flex));a++);return e?((i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,n){function i(t,r){return e.yytext=e.yytext.substring(t,e.yyleng-r+t)}switch(r){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();return e.lexer=r,t.prototype=e,e.Parser=t,new t}();e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function i(t,e,r){void 0===e&&(e=t.length);var n=t[e-1],i=t[e-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(t,e,r){void 0===e&&(e=-1);var n=t[e+1],i=t[e+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(t,e,r){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function s(t,e,r){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var u=r(1).default;e.__esModule=!0;var l=u(r(49));n.prototype=new l.default,n.prototype.Program=function(t){var e=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,u=0,l=n.length;u<l;u++){var c=n[u],h=this.accept(c);if(h){var f=i(n,u,r),p=o(n,u,r),d=h.openStandalone&&f,m=h.closeStandalone&&p,y=h.inlineStandalone&&f&&p;h.close&&a(n,u,!0),h.open&&s(n,u,!0),e&&y&&(a(n,u),s(n,u)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[u-1].original)[1])),e&&d&&(a((c.program||c.inverse).body),s(n,u)),e&&m&&(a(n,u),s((c.inverse||c.program).body))}}return t},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,r=t.program&&t.inverse,n=r,u=r;if(r&&r.chained)for(n=r.body[0].program;u.chained;)u=u.body[u.body.length-1].program;var l={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:o(e.body),closeStandalone:i((n||e).body)};if(t.openStrip.close&&a(e.body,null,!0),r){var c=t.inverseStrip;c.open&&s(e.body,null,!0),c.close&&a(n.body,null,!0),t.closeStrip.open&&s(u.body,null,!0),!this.options.ignoreStandalone&&i(e.body)&&o(n.body)&&(s(e.body),a(n.body))}else t.closeStrip.open&&s(e.body,null,!0);return l},n.prototype.Decorator=n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(){this.parents=[]}function i(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function o(t){i.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function a(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var s=r(1).default;e.__esModule=!0;var u=s(r(6));n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var r=this.accept(t[e]);if(this.mutating){if(r&&!n.prototype[r.type])throw new u.default('Unexpected node type "'+r.type+'" found when accepting '+e+" on "+t.type);t[e]=r}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new u.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,r=t.length;e<r;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,r--)},accept:function(t){if(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(t){a.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var r={loc:t.path.loc};throw new o.default(t.path.original+" doesn't match "+e,r)}}var i=r(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,r){r=this.locInfo(r);for(var n=t?"@":"",i=[],a=0,s=0,u=e.length;s<u;s++){var l=e[s].part,c=e[s].original!==l;if(n+=(e[s].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new o.default("Invalid path: "+n,{loc:r});".."===l&&a++}}return{type:"PathExpression",data:t,depth:a,parts:i,original:n,loc:r}},e.prepareMustache=function(t,e,r,n,i,o){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:t,params:e,hash:r,escaped:s,strip:i,loc:this.locInfo(o)}},e.prepareRawBlock=function(t,e,r,i){n(t,r);var o={type:"Program",body:e,strip:{},loc:i=this.locInfo(i)};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},e.prepareBlock=function(t,e,r,i,a,s){i&&i.path&&n(t,i);var u=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(r){if(u)throw new o.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),c=r.strip,l=r.program}return a&&(a=l,l=e,e=a),{type:u?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:i&&i.strip,loc:this.locInfo(s)}},e.prepareProgram=function(t,e){if(!e&&t.length){var r=t[0].loc,n=t[t.length-1].loc;r&&n&&(e={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,r,i){return n(t,r),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:r&&r.strip,loc:this.locInfo(i)}};var o=i(r(6))},function(t,e,r){"use strict";function n(){}function i(t,e){if(t===e)return!0;if(l.isArray(t)&&l.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1;return!0}}function o(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var a=r(34).default,s=r(1).default;e.__esModule=!0,e.Compiler=n,e.precompile=function(t,e,r){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var n=r.parse(t,e),i=(new r.Compiler).compile(n,e);return(new r.JavaScriptCompiler).compile(i,e)},e.compile=function(t,e,r){function n(){var n=r.parse(t,e),i=(new r.Compiler).compile(n,e),o=(new r.JavaScriptCompiler).compile(i,e,void 0,!0);return r.template(o)}function i(t,e){return o||(o=n()),o.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=l.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var o=void 0;return i._setup=function(t){return o||(o=n()),o._setup(t)},i._child=function(t,e,r,i){return o||(o=n()),o._child(t,e,r,i)},i};var u=s(r(6)),l=r(5),c=s(r(45)),h=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var r=0;r<e;r++){var n=this.opcodes[r],o=t.opcodes[r];if(n.opcode!==o.opcode||!i(n.args,o.args))return!1}for(e=this.children.length,r=0;r<e;r++)if(!this.children[r].equals(t.children[r]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=l.extend(a(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),r=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[r]=e,this.useDepths=this.useDepths||e.useDepths,r},accept:function(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,r=e.length,n=0;n<r;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){o(t);var e=t.program,r=t.inverse;e=e&&this.compileProgram(e),r=r&&this.compileProgram(r);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,r):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,r),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),r=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var r=t.params;if(r.length>1)throw new u.default("Unsupported number of partial arguments: "+r.length,t);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,i="SubExpression"===t.name.type;i&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,n,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){o(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,r){var n=t.path,i=n.parts[0],o=null!=e||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,r){var n=this.setupFullMustacheParams(t,e,r),i=t.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new u.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,c.default.helpers.simpleId(i))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],r=c.default.helpers.scopedId(t),n=!t.depth&&!r&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,r):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,r=0,n=e.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(e[r].value);for(;r--;)this.opcode("assignToHash",e[r].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:h.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=c.default.helpers.simpleId(t.path),r=e&&!!this.blockParamIndex(t.path.parts[0]),n=!r&&c.default.helpers.helperExpression(t),i=!r&&(n||e);if(i&&!n){var o=t.path.parts[0],a=this.options;a.knownHelpers[o]?n=!0:a.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=0,r=t.length;e<r;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var r=void 0;if(!t.parts||c.default.helpers.scopedId(t)||t.depth||(r=this.blockParamIndex(t.parts[0])),r){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,r,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",r),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(t){for(var e=0,r=this.options.blockParams.length;e<r;e++){var n=this.options.blockParams[e],i=n&&l.indexOf(n,t);if(n&&i>=0)return[e,i]}}}},function(t,e,r){"use strict";function n(t){this.value=t}function i(){}var o=r(13).default,a=r(1).default;e.__esModule=!0;var s=r(4),u=a(r(6)),l=r(5),c=a(r(53));i.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(t),")"]},compilerInfo:function(){var t=s.COMPILER_REVISION;return[t,s.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,r){return l.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:r?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,r,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var i=t.opcodes,o=void 0,a=void 0,s=void 0,l=void 0;for(s=0,l=i.length;s<l;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var h={compiler:this.compilerInfo(),main:c};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var f=this.context,p=f.programs,d=f.decorators;for(s=0,l=p.length;s<l;s++)p[s]&&(h[s]=p[s],d[s]&&(h[s+"_d"]=d[s],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new c.default(this.options.srcName),this.decorators=new c.default(this.options.srcName)},createFunctionContext:function(t){var e=this,r="",n=this.stackVars.concat(this.registers.list);n.length>0&&(r+=", "+n.join(", "));var i=0;o(this.aliases).forEach((function(t){var n=e.aliases[t];n.children&&n.referenceCount>1&&(r+=", alias"+ ++i+"="+t,n.children[0]="alias"+i)})),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(r);return t?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,a=void 0;return this.source.each((function(t){t.appendToBuffer?(o?t.prepend("  + "):o=t,a=t):(o&&(i?o.prepend("buffer += "):n=!0,a.add(";"),o=a=void 0),i=!0,e||(r=!1))})),r?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(t,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(e,"call",r))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var r=this.topStack();e.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++])),this.resolvePath("context",t,i,e,r)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,r){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,r)},resolvePath:function(t,e,r,n,i){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,r,n){var i=e.popStack(),o=0,a=r.length;for(t&&a--;o<a;o++)i=e.nameLookup(i,r[o],n);return t?[e.aliasable("container.strict"),"(",i,", ",e.quotedString(r[o]),", ",JSON.stringify(e.source.currentLocation)," )"]:i}(this.options.strict&&i,this,e,t));else for(var a=e.length;r<a;r++)this.replaceStack((function(i){var a=o.nameLookup(i,e[r],t);return n?[" && ",a]:[" != null ? ",a," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var r=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,r){var n=this.popStack(),i=this.setupHelper(t,e),o=[];r&&o.push(i.name),o.push(n),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(o,"||"),")"],s=this.source.functionCall(a,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(t,e){var r=[];r.push(t[0]);for(var n=1;n<t.length;n++)r.push(e,t[n]);return r},invokeKnownHelper:function(t,e){var r=this.setupHelper(t,e);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,r){var n=[],i=this.setupParams(e,1,n);t&&(e=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[t]=r),n&&(o.types[t]=n),i&&(o.ids[t]=i),o.values[t]=e},pushId:function(t,e,r){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(t,e){for(var r=t.children,n=void 0,i=void 0,o=0,a=r.length;o<a;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var u=this.context.programs.length;n.index=u,n.name="program"+u,this.context.programs[u]=i.compile(n,e,this.context,!this.precompile),this.context.decorators[u]=i.decorators,this.context.environments[u]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(t){for(var e=0,r=this.context.environments.length;e<r;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],r=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new u.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)e=["(",r=[a.value]],o=!0;else{i=!0;var s=this.incrStack();e=["((",this.push(s)," = ",a,")"],r=this.topStack()}var l=t.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),r=(e?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof n)return r.value;if(!e){if(!this.stackSlot)throw new u.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(e,t,n,r),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(t,e,r){var n={},i=[],o=[],a=[],s=!r,u=void 0;s&&(r=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"container.noop",n.inverse=l||"container.noop");for(var h=e;h--;)u=this.popStack(),r[h]=u,this.trackIds&&(a[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),i[h]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,r,n){var i=this.setupParams(t,e,r);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=i.RESERVED_WORDS={},r=0,n=t.length;r<n;r++)e[t[r]]=!0}(),i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=i,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r){if(a.isArray(t)){for(var n=[],i=0,o=t.length;i<o;i++)n.push(e.wrap(t[i],r));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function i(t){this.srcFile=t,this.source=[]}var o=r(13).default;e.__esModule=!0;var a=r(5),s=void 0;s||((s=function(t,e,r,n){this.src="",n&&this.add(n)}).prototype={add:function(t){a.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){a.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,r=this.source.length;e<r;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new s(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof s?t:(t=n(t,this,e),new s(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,r){return r=this.generateList(r),this.wrap([t,e?"."+e+"(":"(",r,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,r=[];o(t).forEach((function(i){var o=n(t[i],e);"undefined"!==o&&r.push([e.quotedString(i),":",o])}));var i=this.generateList(r);return i.prepend("{"),i.add("}"),i},generateList:function(t){for(var e=this.empty(),r=0,i=t.length;r<i;r++)r&&e.add(","),e.add(n(t[r],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=i,t.exports=e.default}])},function(t,e,r){t.exports=function(){"use strict";function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),f=Math.max(i,Math.floor(n-u*c/s+h)),p=Math.min(o,Math.floor(n+(s-u)*c/s+h));t(r,n,f,p,a)}var d=r[n],m=i,y=o;for(e(r,i,n),a(r[o],d)>0&&e(r,i,o);m<y;){for(e(r,m,y),m++,y--;a(r[m],d)<0;)m++;for(;a(r[y],d)>0;)y--}0===a(r[i],d)?e(r,i,y):(y++,e(r,y,o)),y<=n&&(i=y+1),n<=y&&(o=y-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?r.push(a):f(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!f(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=d([])).leaf=!1,i.height=n;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));m(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var h=Math.min(c+l-1,r);m(t,c,h,u,this.compareMinY);for(var f=c;f<=h;f+=u){var p=Math.min(f+u-1,h);i.children.push(this._build(t,f,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=c(u),h=(f=t,p=u,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);h<o?(o=h,i=l<i?l:i,a=u):h===o&&l<i&&(i=l,a=u)}e=a||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,u,l,h,f=1/0,p=1/0,d=e;d<=r-e;d++){var m=a(t,0,d,this.toBBox),y=a(t,d,r,this.toBBox),g=(i=m,o=y,s=void 0,u=void 0,l=void 0,h=void 0,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,h-u)),v=c(m)+c(y);g<f?(f=g,n=d,p=v<p?v:p):g===f&&v<p&&(p=v,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,r-e,r,i),l=h(o)+h(u),c=e;c<r-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),l+=h(o)}for(var p=r-e-1;p>=e;p--){var d=t.children[p];s(u,t.leaf?i(d):d),l+=h(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},function(t,e){t.exports='<div class="m-geojson-content">\n   {{#each features}}\n   <div id="{{id}}" class="result">\n      {{#each attributes}}\n      <table>\n         <tr>\n            <td class="key">{{key}}</td>\n            <td class="value">{{{value}}}</td>\n         </tr>\n      </table>\n      {{/each}}\n   </div>\n   <div class="m-separator"></div>\n   {{/each}}\n</div>'},function(t,e,r){"use strict";var n={};(0,r(13).assign)(n,r(322),r(325),r(115)),t.exports=n},function(t,e){var r=null,n=null;function i(t,e,r){t.addEventListener(e,(function(t){var i=new MouseEvent(r,t);i.pointerId=1,i.isPrimary=!0,i.pointerType="mouse",i.width=1,i.height=1,i.tiltX=0,i.tiltY=0,"buttons"in t&&0!==t.buttons?i.pressure=.5:i.pressure=0;var o=t.target;null!==n&&(o=n,"mouseup"===e&&(n=null)),o.dispatchEvent(i),i.defaultPrevented&&t.preventDefault()}))}function o(t,e,n){t.addEventListener(e,(function(t){for(var i=t.changedTouches,o=i.length,a=0;a<o;a++){var s=new CustomEvent(n,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var u=i.item(a);s.clientX=u.clientX,s.clientY=u.clientY,s.screenX=u.screenX,s.screenY=u.screenY,s.pageX=u.pageX,s.pageY=u.pageY;var l=u.target.getBoundingClientRect();s.offsetX=u.clientX-l.left,s.offsetY=u.clientY-l.top,s.pointerId=1+u.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===r&&(r=u.identifier),s.isPrimary=u.identifier===r,"touchend"===e&&s.isPrimary&&(r=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}}))}"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(i(document,"mousedown","pointerdown"),i(document,"mousemove","pointermove"),i(document,"mouseup","pointerup")),o(document,"touchstart","pointerdown"),o(document,"touchmove","pointermove"),o(document,"touchend","pointerup"))},function(t,e,r){"use strict";var n=r(0),i=r(63),o=r(1).Buffer,a=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function l(t,e,r,n,i,o,a){return u(t+(e&r|~e&n)+i+o|0,a)+e|0}function c(t,e,r,n,i,o,a){return u(t+(e&n|r&~n)+i+o|0,a)+e|0}function h(t,e,r,n,i,o,a){return u(t+(e^r^n)+i+o|0,a)+e|0}function f(t,e,r,n,i,o,a){return u(t+(r^(e|~n))+i+o|0,a)+e|0}n(s,i),s.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=l(r,n,i,o,t[0],3614090360,7),o=l(o,r,n,i,t[1],3905402710,12),i=l(i,o,r,n,t[2],606105819,17),n=l(n,i,o,r,t[3],3250441966,22),r=l(r,n,i,o,t[4],4118548399,7),o=l(o,r,n,i,t[5],1200080426,12),i=l(i,o,r,n,t[6],2821735955,17),n=l(n,i,o,r,t[7],4249261313,22),r=l(r,n,i,o,t[8],1770035416,7),o=l(o,r,n,i,t[9],2336552879,12),i=l(i,o,r,n,t[10],4294925233,17),n=l(n,i,o,r,t[11],2304563134,22),r=l(r,n,i,o,t[12],1804603682,7),o=l(o,r,n,i,t[13],4254626195,12),i=l(i,o,r,n,t[14],2792965006,17),r=c(r,n=l(n,i,o,r,t[15],1236535329,22),i,o,t[1],4129170786,5),o=c(o,r,n,i,t[6],3225465664,9),i=c(i,o,r,n,t[11],643717713,14),n=c(n,i,o,r,t[0],3921069994,20),r=c(r,n,i,o,t[5],3593408605,5),o=c(o,r,n,i,t[10],38016083,9),i=c(i,o,r,n,t[15],3634488961,14),n=c(n,i,o,r,t[4],3889429448,20),r=c(r,n,i,o,t[9],568446438,5),o=c(o,r,n,i,t[14],3275163606,9),i=c(i,o,r,n,t[3],4107603335,14),n=c(n,i,o,r,t[8],1163531501,20),r=c(r,n,i,o,t[13],2850285829,5),o=c(o,r,n,i,t[2],4243563512,9),i=c(i,o,r,n,t[7],1735328473,14),r=h(r,n=c(n,i,o,r,t[12],2368359562,20),i,o,t[5],4294588738,4),o=h(o,r,n,i,t[8],2272392833,11),i=h(i,o,r,n,t[11],1839030562,16),n=h(n,i,o,r,t[14],4259657740,23),r=h(r,n,i,o,t[1],2763975236,4),o=h(o,r,n,i,t[4],1272893353,11),i=h(i,o,r,n,t[7],4139469664,16),n=h(n,i,o,r,t[10],3200236656,23),r=h(r,n,i,o,t[13],681279174,4),o=h(o,r,n,i,t[0],3936430074,11),i=h(i,o,r,n,t[3],3572445317,16),n=h(n,i,o,r,t[6],76029189,23),r=h(r,n,i,o,t[9],3654602809,4),o=h(o,r,n,i,t[12],3873151461,11),i=h(i,o,r,n,t[15],530742520,16),r=f(r,n=h(n,i,o,r,t[2],3299628645,23),i,o,t[0],4096336452,6),o=f(o,r,n,i,t[7],1126891415,10),i=f(i,o,r,n,t[14],2878612391,15),n=f(n,i,o,r,t[5],4237533241,21),r=f(r,n,i,o,t[12],1700485571,6),o=f(o,r,n,i,t[3],2399980690,10),i=f(i,o,r,n,t[10],4293915773,15),n=f(n,i,o,r,t[1],2240044497,21),r=f(r,n,i,o,t[8],1873313359,6),o=f(o,r,n,i,t[15],4264355552,10),i=f(i,o,r,n,t[6],2734768916,15),n=f(n,i,o,r,t[13],1309151649,21),r=f(r,n,i,o,t[4],4149444226,6),o=f(o,r,n,i,t[11],3174756917,10),i=f(i,o,r,n,t[2],718787259,15),n=f(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},function(t,e,r){"use strict";var n=r(16).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&e.readable,s=r.writable||!1!==r.writable&&e.writable,u=function(){e.writable||c()},l=e._writableState&&e._writableState.finished,c=function(){s=!1,l=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,h=!0,s||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):s&&!l?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},m=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",u),e.on("close",u)):(e.on("complete",c),e.on("abort",d),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",c),!1!==r.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",c),e.removeListener("abort",d),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",p),e.removeListener("close",d)}}},function(t,e,r){"use strict";var n=r(3).Buffer,i=r(0),o=r(63),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function p(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(t,e){return t<<e|t>>>32-e}function m(t,e,r,n,i,o,a,s){return d(t+(e^r^n)+o+a|0,s)+i|0}function y(t,e,r,n,i,o,a,s){return d(t+(e&r|~e&n)+o+a|0,s)+i|0}function g(t,e,r,n,i,o,a,s){return d(t+((e|~r)^n)+o+a|0,s)+i|0}function v(t,e,r,n,i,o,a,s){return d(t+(e&n|r&~n)+o+a|0,s)+i|0}function _(t,e,r,n,i,o,a,s){return d(t+(e^(r|~n))+o+a|0,s)+i|0}i(p,o),p.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,p=0|this._e,b=0|this._a,w=0|this._b,x=0|this._c,M=0|this._d,S=0|this._e,E=0;E<80;E+=1){var O,T;E<16?(O=m(r,n,i,o,p,t[s[E]],h[0],l[E]),T=_(b,w,x,M,S,t[u[E]],f[0],c[E])):E<32?(O=y(r,n,i,o,p,t[s[E]],h[1],l[E]),T=v(b,w,x,M,S,t[u[E]],f[1],c[E])):E<48?(O=g(r,n,i,o,p,t[s[E]],h[2],l[E]),T=g(b,w,x,M,S,t[u[E]],f[2],c[E])):E<64?(O=v(r,n,i,o,p,t[s[E]],h[3],l[E]),T=y(b,w,x,M,S,t[u[E]],f[3],c[E])):(O=_(r,n,i,o,p,t[s[E]],h[4],l[E]),T=m(b,w,x,M,S,t[u[E]],f[4],c[E])),r=p,p=o,o=d(i,10),i=n,n=O,b=S,S=M,M=d(x,10),x=w,w=T}var P=this._b+i+M|0;this._b=this._c+o+S|0,this._c=this._d+p+b|0,this._d=this._e+r+w|0,this._e=this._a+n+x|0,this._a=P},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.alloc?n.alloc(20):new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=p},function(t,e,r){(e=t.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r}).sha=r(241),e.sha1=r(242),e.sha224=r(243),e.sha256=r(72),e.sha384=r(244),e.sha512=r(73)},function(t,e,r){(e=t.exports=r(74)).Stream=e,e.Readable=e,e.Writable=r(42),e.Duplex=r(14),e.Transform=r(77),e.PassThrough=r(251)},function(t,e,r){var n=r(3),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";(function(e,n,i){var o=r(26);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;v.WritableState=g;var l=Object.create(r(22));l.inherits=r(0);var c={deprecate:r(70)},h=r(75),f=r(41).Buffer,p=i.Uint8Array||function(){};var d,m=r(76);function y(){}function g(t,e){s=s||r(14),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),S(t,e))}(t,r,n,e,i);else{var a=x(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),n?u(b,t,r,a,i):b(t,r,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(s=s||r(14),!(d.call(v,this)||this instanceof s))return new v(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function _(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),S(t,e)}function w(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,_(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(_(t,e,!1,e.objectMode?1:l.length,l,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function M(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),S(t,e)}))}function S(t,e){var r=x(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(M,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}l.inherits(v,h),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===v&&(t&&t._writableState instanceof g)}})):d=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,r){var n,i=this._writableState,a=!1,s=!i.objectMode&&(n=t,f.isBuffer(n)||n instanceof p);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=y),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),o.nextTick(e,r)}(this,r):(s||function(t,e,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(n,a),i=!1),i}(this,i,t,r))&&(i.pendingcb++,a=function(t,e,r,n,i,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,r));return e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,n,i,o);return u}(this,i,s,t,e,r)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,S(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(4),r(249).setImmediate,r(5))},function(t,e,r){"use strict";var n=r(6);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<r;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,r=0,n=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,r=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,r){var n=r(264),i=r(272),o=r(90);e.createCipher=e.Cipher=n.createCipher,e.createCipheriv=e.Cipheriv=n.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},function(t,e,r){var n={ECB:r(265),CBC:r(266),CFB:r(267),CFB8:r(268),CFB1:r(269),OFB:r(270),CTR:r(88),GCM:r(88)},i=r(90);for(var o in i)i[o].module=n[i[o].mode];t.exports=i},function(t,e,r){var n;function i(t){this.rand=t}if(t.exports=function(t){return n||(n=new i(null)),n.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(278);if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return o.randomBytes(t)}}catch(t){}},function(t,e,r){(function(e){var n=r(48),i=r(15);function o(t){var e,r=t.modulus.byteLength();do{e=new n(i(r))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function a(t,r){var i=function(t){var e=o(t);return{blinder:e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(r),a=r.modulus.byteLength(),s=new n(t).mul(i.blinder).umod(r.modulus),u=s.toRed(n.mont(r.prime1)),l=s.toRed(n.mont(r.prime2)),c=r.coefficient,h=r.prime1,f=r.prime2,p=u.redPow(r.exponent1).fromRed(),d=l.redPow(r.exponent2).fromRed(),m=p.isub(d).imul(c).umod(h).imul(f);return d.iadd(m).imul(i.unblinder).umod(r.modulus).toArrayLike(e,"be",a)}a.getr=o,t.exports=a}).call(this,r(3).Buffer)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(283).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,i){for(var o=0,a=0,s=Math.min(t.length,r),u=e;u<s;u++){var l=t.charCodeAt(u)-48;o*=i,a=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&a<i,"Invalid character"),o+=a}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){c(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),r=0!==o||a!==this.length-1?f[6-u.length]+u+r:u+r}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=p[t],c=d[t];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(c).toString(t);r=(h=h.idivn(c)).isZero()?m+r:f[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,i),a},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;t[r++]=255&a,r<t.length&&(t[r++]=a>>8&255),r<t.length&&(t[r++]=a>>16&255),6===o?(r<t.length&&(t[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;t[r--]=255&a,r>=0&&(t[r--]=a>>8&255),r>=0&&(t[r--]=a>>16&255),6===o?(r>=0&&(t[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,E=0|a[5],O=8191&E,T=E>>>13,P=0|a[6],I=8191&P,k=P>>>13,R=0|a[7],L=8191&R,C=R>>>13,A=0|a[8],N=8191&A,j=A>>>13,F=0|a[9],D=8191&F,B=F>>>13,z=0|s[0],G=8191&z,q=z>>>13,U=0|s[1],V=8191&U,W=U>>>13,Y=0|s[2],Z=8191&Y,H=Y>>>13,X=0|s[3],K=8191&X,J=X>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,G)|0))<<13)|0;l=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,G),i=(i=Math.imul(d,q))+Math.imul(m,G)|0,o=Math.imul(m,q);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,G),i=(i=Math.imul(g,q))+Math.imul(v,G)|0,o=Math.imul(v,q),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,W)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,W)|0;var vt=(l+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,q))+Math.imul(w,G)|0,o=Math.imul(w,q),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,W)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,q))+Math.imul(S,G)|0,o=Math.imul(S,q),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,G),i=(i=Math.imul(O,q))+Math.imul(T,G)|0,o=Math.imul(T,q),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,W)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,G),i=(i=Math.imul(I,q))+Math.imul(k,G)|0,o=Math.imul(k,q),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,W)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,q))+Math.imul(C,G)|0,o=Math.imul(C,q),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,q))+Math.imul(j,G)|0,o=Math.imul(j,q),n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var St=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,q))+Math.imul(B,G)|0,o=Math.imul(B,q),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,W)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,W)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,W))+Math.imul(B,V)|0,o=Math.imul(B,W),n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,H))+Math.imul(B,Z)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Pt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,dt)|0))<<13)|0;l=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Lt=(l+(n=n+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(C,dt)|0))<<13)|0;l=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var Ct=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var At=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(At>>>26)|0,At&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=Et,u[10]=Ot,u[11]=Tt,u[12]=Pt,u[13]=It,u[14]=kt,u[15]=Rt,u[16]=Lt,u[17]=Ct,u[18]=At,0!==l&&(u[19]=l,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(t,e,r){return g(t,e,r)}function _(t,e){this.x=t,this.y=e}Math.imul||(y=m),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):r<63?m(this,t,e):r<1024?g(this,t,e):v(this,t,e)},_.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},_.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},_.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},_.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},_.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},_.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},_.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},_.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},_.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),v(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new O(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){O.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},i(x,w),x.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(M,w),i(S,w),i(E,w),E.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new M;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new E}return b[t]=e,e},O.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},O.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},O.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},O.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},O.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},O.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},O.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},O.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},O.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},O.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},O.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},O.prototype.isqr=function(t){return this.imul(t,t.clone())},O.prototype.sqr=function(t){return this.mul(t,t)},O.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},O.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},O.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},O.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},O.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,O),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){"use strict";var n=e;n.version=r(284).version,n.utils=r(7),n.rand=r(46),n.curve=r(97),n.curves=r(50),n.ec=r(296),n.eddsa=r(300)},function(t,e,r){"use strict";var n,i=e,o=r(51),a=r(97),s=r(7).assert;function u(t){"short"===t.type?this.curve=new a.short(t):"edwards"===t.type?this.curve=new a.edwards(t):this.curve=new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var r=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=u,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(295)}catch(t){n=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},function(t,e,r){var n=e;n.utils=r(8),n.common=r(24),n.sha=r(289),n.ripemd=r(293),n.hmac=r(294),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(t,e,r){"use strict";(function(e){var n,i=r(3),o=i.Buffer,a={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(a[n]=i[n]);var s=a.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(s[n]=o[n]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,r){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,r)}),s.alloc||(s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=o(t);return e&&0!==e.length?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!a.kStringMaxLength)try{a.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(t){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this,r(4))},function(t,e,r){"use strict";const n=r(54).Reporter,i=r(25).EncoderBuffer,o=r(25).DecoderBuffer,a=r(6),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function l(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=l;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const t=this._baseState,e={};c.forEach((function(r){e[r]=t[r]}));const r=new this.constructor(e.parent);return r._baseState=e,r},l.prototype._wrap=function(){const t=this._baseState;u.forEach((function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}}),this)},l.prototype._init=function(t){const e=this._baseState;a(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),a.equal(e.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(t){const e=this._baseState,r=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==r.length&&(a(null===e.children),e.children=r,r.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(a(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(r){r==(0|r)&&(r|=0);const n=t[r];e[n]=r})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){l.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),s.forEach((function(t){l.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return a(null===e.tag),e.tag=t,this._useArgs(r),this}})),l.prototype.use=function(t){a(t);const e=this._baseState;return a(null===e.use),e.use=t,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(t){const e=this._baseState;return a(null===e.default),e.default=t,e.optional=!0,this},l.prototype.explicit=function(t){const e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.explicit=t,this},l.prototype.implicit=function(t){const e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.implicit=t,this},l.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},l.prototype.key=function(t){const e=this._baseState;return a(null===e.key),e.key=t,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(t){const e=this._baseState;return a(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},l.prototype.contains=function(t){const e=this._baseState;return a(null===e.use),e.contains=t,this},l.prototype._decode=function(t,e){const r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));let n,i=r.default,a=!0,s=null;if(null!==r.key&&(s=t.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(a=this._peekTag(t,n,r.any),t.isError(a))return a}else{const n=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),a=!0}catch(t){a=!1}t.restore(n)}}if(r.obj&&a&&(n=t.enterObject()),a){if(null!==r.explicit){const e=this._decodeTag(t,r.explicit);if(t.isError(e))return e;t=e}const n=t.offset;if(null===r.use&&null===r.choice){let e;r.any&&(e=t.save());const n=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(n))return n;r.any?i=t.raw(e):t=n}if(e&&e.track&&null!==r.tag&&e.track(t.path(),n,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(t,e)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new o(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(n,e)}}return r.obj&&a&&(i=t.leaveObject(n)),null===r.key||null===i&&!0!==a?null!==s&&t.exitKey(s):t.leaveKey(s,r.key,i),i},l.prototype._decodeGeneric=function(t,e,r){const n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},l.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),a(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},l.prototype._decodeChoice=function(t,e){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(o){const a=t.save(),s=r.choice[o];try{const r=s._decode(t,e);if(t.isError(r))return!1;n={type:o,value:r},i=!0}catch(e){return t.restore(a),!1}return!0}),this),i?n:t.error("Choice not matched")},l.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},l.prototype._encode=function(t,e,r){const n=this._baseState;if(null!==n.default&&n.default===t)return;const i=this._encodeValue(t,e,r);return void 0===i||this._skipDefault(i,e,r)?void 0:i},l.prototype._encodeValue=function(t,e,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new n);let o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}let a=null,s=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)a=this._getUse(i.contains,r)._encode(t,e),s=!0;else if(i.children)a=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");const n=e.enterKey(r._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i}),this).filter((function(t){return t})),a=this._createEncoderBuffer(a);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,a=this._createEncoderBuffer(t.map((function(r){const n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)}),r))}else null!==i.use?o=this._getUse(i.use,r)._encode(t,e):(a=this._encodePrimitive(i.tag,t),s=!0);if(!i.any&&null===i.choice){const t=null!==i.implicit?i.implicit:i.tag,r=null===i.implicit?"universal":"context";null===t?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(t,s,r,a))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},l.prototype._encodeChoice=function(t,e){const r=this._baseState,n=r.choice[t.type];return n||a(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},l.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},l.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},l.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,e,r){"use strict";const n=r(0);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,r){const n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},i.prototype.error=function(t){let e;const r=this._reporterState,n=t instanceof o;if(e=n?t:new o(r.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},i.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},n(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,r){"use strict";function n(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=n(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=n(e.tag)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(319).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,E=0|a[5],O=8191&E,T=E>>>13,P=0|a[6],I=8191&P,k=P>>>13,R=0|a[7],L=8191&R,C=R>>>13,A=0|a[8],N=8191&A,j=A>>>13,F=0|a[9],D=8191&F,B=F>>>13,z=0|s[0],G=8191&z,q=z>>>13,U=0|s[1],V=8191&U,W=U>>>13,Y=0|s[2],Z=8191&Y,H=Y>>>13,X=0|s[3],K=8191&X,J=X>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,G)|0))<<13)|0;l=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,G),i=(i=Math.imul(d,q))+Math.imul(m,G)|0,o=Math.imul(m,q);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,G),i=(i=Math.imul(g,q))+Math.imul(v,G)|0,o=Math.imul(v,q),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,W)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,W)|0;var vt=(l+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,q))+Math.imul(w,G)|0,o=Math.imul(w,q),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,W)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,q))+Math.imul(S,G)|0,o=Math.imul(S,q),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,G),i=(i=Math.imul(O,q))+Math.imul(T,G)|0,o=Math.imul(T,q),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,W)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,G),i=(i=Math.imul(I,q))+Math.imul(k,G)|0,o=Math.imul(k,q),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,W)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,q))+Math.imul(C,G)|0,o=Math.imul(C,q),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,q))+Math.imul(j,G)|0,o=Math.imul(j,q),n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var St=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,q))+Math.imul(B,G)|0,o=Math.imul(B,q),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,W)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,W)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,W))+Math.imul(B,V)|0,o=Math.imul(B,W),n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,H))+Math.imul(B,Z)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Pt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,dt)|0))<<13)|0;l=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Lt=(l+(n=n+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(C,dt)|0))<<13)|0;l=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var Ct=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var At=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(At>>>26)|0,At&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=Et,u[10]=Ot,u[11]=Tt,u[12]=Pt,u[13]=It,u[14]=kt,u[15]=Rt,u[16]=Lt,u[17]=Ct,u[18]=At,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(x,v),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){t.exports='<div class="m-popup{{#gt tabs.length 1}} m-has-tabs{{/gt}} m-collapsed">\n  {{#gt tabs.length 1}}\n    <div class="m-tabs">\n      {{#each tabs}}\n        <div class="m-tab{{#eq @index 0}} m-activated{{/eq}}" data-index="{{@index}}">\n          <i class="{{icon}}"></i>\n        </div>\n      {{/each}}\n    </div>\n  {{/gt}}\n  <div class="m-content">\n    <div class="m-header">\n      {{#eq tabs.length 1}}\n        <div class="m-title">{{{tabs.0.title}}}</div>\n        <div class="m-subtitle">{{{tabs.0.subtitle}}}</div>\n      {{/eq}}\n      <a class="m-popup-closer" href="#" title="cerrar popup"></a>\n    </div>\n    <div class="m-body">{{{tabs.0.content}}}</div>\n  </div>\n</div>'},function(t,e,r){},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*m}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return(i?"/":"")+(e=r(n(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=r(n(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var r=function(t){"string"!=typeof t&&(t+="");var e,r=0,n=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){r=e+1;break}}else-1===n&&(i=!1,n=e+1);return-1===n?"":t.slice(r,n)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,n=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===n&&(i=!1,n=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=a+1;break}}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?"":t.slice(e,n)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(4))},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(64).Transform;function o(t){i.call(this),this._block=n.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(0)(o,i),o.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(t){n=t}r(n)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!n.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(t)||(t=n.from(t,e));for(var r=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)r[this._blockOffset++]=t[i++];for(var a=0,s=8*t.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},function(t,e,r){(e=t.exports=r(65)).Stream=e,e.Readable=e,e.Writable=r(69),e.Duplex=r(17),e.Transform=r(71),e.PassThrough=r(239),e.finished=r(37),e.pipeline=r(240)},function(t,e,r){"use strict";(function(e,n){var i;t.exports=E,E.ReadableState=S;r(20).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=r(66),s=r(3).Buffer,u=e.Uint8Array||function(){};var l,c=r(234);l=c&&c.debuglog?c.debuglog("stream"):function(){};var h,f,p,d=r(235),m=r(67),y=r(68).getHighWaterMark,g=r(16).codes,v=g.ERR_INVALID_ARG_TYPE,_=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(0)(E,a);var x=m.errorOrDestroy,M=["error","close","destroy","pause","resume"];function S(t,e,n){i=i||r(17),t=t||{},"boolean"!=typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=r(21).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function E(t){if(i=i||r(17),!(this instanceof E))return new E(t);var e=this instanceof i;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function O(t,e,r,n,i){l("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(l("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?I(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,k(t)))}(t,a);else if(i||(o=function(t,e){var r;n=e,s.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(a,e)),o)x(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),n)a.endEmitted?x(t,new w):T(t,a,e,!0);else if(a.ended)x(t,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?T(t,a,e,!1):R(t,a)):T(t,a,e,!1)}else n||(a.reading=!1,R(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function T(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&I(t)),R(t,e)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(t,e){e(t)},E.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=s.from(t,e),e=""),r=!0),O(this,t,e,!1,r)},E.prototype.unshift=function(t){return O(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){h||(h=r(21).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function P(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;l("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(k,t))}function k(t){var e=t._readableState;l("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,j(t)}function R(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(L,t,e))}function L(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(l("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function C(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function A(t){l("readable nexttick read 0"),t.read(0)}function N(t,e){l("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),j(t),e.flowing&&!e.reading&&t.read(0)}function j(t){var e=t._readableState;for(l("flow",e.flowing);e.flowing&&null!==t.read(););}function F(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function D(t){var e=t._readableState;l("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(B,e,t))}function B(t,e){if(l("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function z(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}E.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):I(this),null;if(0===(t=P(t,e))&&e.ended)return 0===e.length&&D(this),null;var n,i=e.needReadable;return l("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&l("length less than watermark",i=!0),e.ended||e.reading?l("reading or ended",i=!1):i&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=P(r,e))),null===(n=t>0?F(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&D(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(t){x(this,new b("_read()"))},E.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?u:y;function s(e,n){l("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,l("cleanup"),t.removeListener("close",d),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",f),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function u(){l("onend"),t.end()}i.endEmitted?n.nextTick(a):r.once("end",a),t.on("unpipe",s);var c=function(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,j(t))}}(r);t.on("drain",c);var h=!1;function f(e){l("ondata");var n=t.write(e);l("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==z(i.pipes,t))&&!h&&(l("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function p(e){l("onerror",e),y(),t.removeListener("error",p),0===o(t,"error")&&x(t,e)}function d(){t.removeListener("finish",m),y()}function m(){l("onfinish"),t.removeListener("close",d),y()}function y(){l("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",p),t.once("close",d),t.once("finish",m),t.emit("pipe",r),i.flowing||(l("pipe resume"),r.resume()),t},E.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=z(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},E.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?I(this):i.reading||n.nextTick(A,this))),r},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(C,this),r},E.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(C,this),e},E.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(N,t,e))}(this,t)),t.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(l("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<M.length;o++)t.on(M[o],this.emit.bind(this,M[o]));return this._read=function(e){l("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(237)),f(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=F,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,e){return void 0===p&&(p=r(238)),p(E,t,e)})}).call(this,r(5),r(4))},function(t,e,r){t.exports=r(20).EventEmitter},function(t,e,r){"use strict";(function(e){function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(n,a),o(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r(4))},function(t,e,r){"use strict";var n=r(16).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,r){"use strict";(function(e,n){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=E,E.WritableState=S;var a={deprecate:r(70)},s=r(66),u=r(3).Buffer,l=e.Uint8Array||function(){};var c,h=r(67),f=r(68).getHighWaterMark,p=r(16).codes,d=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,y=p.ERR_MULTIPLE_CALLBACK,g=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,_=p.ERR_STREAM_NULL_VALUES,b=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,x=h.errorOrDestroy;function M(){}function S(t,e,a){o=o||r(17),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new y;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(R,t,e),t._writableState.errorEmitted=!0,x(t,i)):(o(i),t._writableState.errorEmitted=!0,x(t,i),R(t,e))}(t,r,i,e,o);else{var a=I(r)||t.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||P(t,r),i?n.nextTick(T,t,r,a,o):T(t,r,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function E(t){var e=this instanceof(o=o||r(17));if(!e&&!c.call(E,this))return new E(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function O(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function T(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),R(t,e)}function P(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,O(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(O(t,e,!1,e.objectMode?1:l.length,l,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function k(t,e){t._final((function(r){e.pendingcb--,r&&x(t,r),e.prefinished=!0,t.emit("prefinish"),R(t,e)}))}function R(t,e){var r=I(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(k,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}r(0)(E,s),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===E&&(t&&t._writableState instanceof S)}})):c=function(t){return t instanceof this},E.prototype.pipe=function(){x(this,new g)},E.prototype.write=function(t,e,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=t,u.isBuffer(i)||i instanceof l);return s&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof r&&(r=M),o.ending?function(t,e){var r=new b;x(t,r),n.nextTick(e,r)}(this,r):(s||function(t,e,r,i){var o;return null===r?o=new _:"string"==typeof r||e.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(x(t,o),n.nextTick(i,o),!1)}(this,o,t,r))&&(o.pendingcb++,a=function(t,e,r,n,i,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,r));return e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else O(t,e,!1,s,n,i,o);return l}(this,o,s,t,e,r)),a},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||P(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(t,e,r){r(new m("_write()"))},E.prototype._writev=null,E.prototype.end=function(t,e,r){var i=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,r){e.ending=!0,R(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),E.prototype.destroy=h.destroy,E.prototype._undestroy=h.undestroy,E.prototype._destroy=function(t,e){e(t)}}).call(this,r(5),r(4))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(5))},function(t,e,r){"use strict";t.exports=c;var n=r(16).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(17);function l(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);u.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}r(0)(c,u),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,r){r(new i("_transform()"))},c.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,r){var n=r(0),i=r(18),o=r(1).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t,e,r){return r^t&(e^r)}function c(t,e,r){return t&e|r&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}n(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,d=0|this._f,m=0|this._g,y=0|this._h,g=0;g<16;++g)r[g]=t.readInt32BE(4*g);for(;g<64;++g)r[g]=0|(((e=r[g-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[g-7]+p(r[g-15])+r[g-16];for(var v=0;v<64;++v){var _=y+f(u)+l(u,d,m)+a[v]+r[v]|0,b=h(n)+c(n,i,o)|0;y=m,m=d,d=u,u=s+_|0,s=o,o=i,i=n,n=_+b|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=m+this._g|0,this._h=y+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},function(t,e,r){var n=r(0),i=r(18),o=r(1).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}function l(t,e,r){return r^t&(e^r)}function c(t,e,r){return t&e|r&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function y(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function g(t,e){return t>>>0<e>>>0?1:0}n(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,v=0|this._gh,_=0|this._hh,b=0|this._al,w=0|this._bl,x=0|this._cl,M=0|this._dl,S=0|this._el,E=0|this._fl,O=0|this._gl,T=0|this._hl,P=0;P<32;P+=2)e[P]=t.readInt32BE(4*P),e[P+1]=t.readInt32BE(4*P+4);for(;P<160;P+=2){var I=e[P-30],k=e[P-30+1],R=p(I,k),L=d(k,I),C=m(I=e[P-4],k=e[P-4+1]),A=y(k,I),N=e[P-14],j=e[P-14+1],F=e[P-32],D=e[P-32+1],B=L+j|0,z=R+N+g(B,L)|0;z=(z=z+C+g(B=B+A|0,A)|0)+F+g(B=B+D|0,D)|0,e[P]=z,e[P+1]=B}for(var G=0;G<160;G+=2){z=e[G],B=e[G+1];var q=c(r,n,i),U=c(b,w,x),V=h(r,b),W=h(b,r),Y=f(s,S),Z=f(S,s),H=a[G],X=a[G+1],K=l(s,u,v),J=l(S,E,O),$=T+Z|0,Q=_+Y+g($,T)|0;Q=(Q=(Q=Q+K+g($=$+J|0,J)|0)+H+g($=$+X|0,X)|0)+z+g($=$+B|0,B)|0;var tt=W+U|0,et=V+q+g(tt,W)|0;_=v,T=O,v=u,O=E,u=s,E=S,s=o+Q+g(S=M+$|0,M)|0,o=i,M=x,i=n,x=w,n=r,w=b,r=Q+et+g(b=$+tt|0,$)|0}this._al=this._al+b|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+M|0,this._el=this._el+S|0,this._fl=this._fl+E|0,this._gl=this._gl+O|0,this._hl=this._hl+T|0,this._ah=this._ah+r+g(this._al,b)|0,this._bh=this._bh+n+g(this._bl,w)|0,this._ch=this._ch+i+g(this._cl,x)|0,this._dh=this._dh+o+g(this._dl,M)|0,this._eh=this._eh+s+g(this._el,S)|0,this._fh=this._fh+u+g(this._fl,E)|0,this._gh=this._gh+v+g(this._gl,O)|0,this._hh=this._hh+_+g(this._hl,T)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},function(t,e,r){"use strict";(function(e,n){var i=r(26);t.exports=_;var o,a=r(61);_.ReadableState=v;r(20).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=r(75),l=r(41).Buffer,c=e.Uint8Array||function(){};var h=Object.create(r(22));h.inherits=r(0);var f=r(246),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,m=r(247),y=r(76);h.inherits(_,u);var g=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var n=e instanceof(o=o||r(14));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(21).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||r(14),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,r,n,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,M(t)}(t,a)):(i||(o=function(t,e){var r;n=e,l.isBuffer(n)||n instanceof c||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),n?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):E(t,a)):w(t,a,e,!1))):n||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&M(t)),E(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=l.from(t,e),e=""),r=!0),b(this,t,e,!1,r)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return d||(d=r(21).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function M(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(S,t):S(t))}function S(t){p("emit readable"),t.emit("readable"),I(t)}function E(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(O,t,e))}function O(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function T(t){p("readable nexttick read 0"),t.read(0)}function P(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),I(t),e.flowing&&!e.reading&&t.read(0)}function I(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function k(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=l.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),0===(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function C(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}_.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):M(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&R(this),null;var n,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(r,e))),null===(n=t>0?k(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&R(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?c:_;function l(e,n){p("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),t.removeListener("close",g),t.removeListener("finish",v),t.removeListener("drain",h),t.removeListener("error",y),t.removeListener("unpipe",l),r.removeListener("end",c),r.removeListener("end",_),r.removeListener("data",m),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){p("onend"),t.end()}o.endEmitted?i.nextTick(u):r.once("end",u),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,I(t))}}(r);t.on("drain",h);var f=!1;var d=!1;function m(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==C(o.pipes,t))&&!f&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function y(e){p("onerror",e),_(),t.removeListener("error",y),0===s(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",v),_()}function v(){p("onfinish"),t.removeListener("close",g),_()}function _(){p("unpipe"),r.unpipe(t)}return r.on("data",m),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",y),t.once("close",g),t.once("finish",v),t.emit("pipe",r),o.flowing||(p("pipe resume"),r.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=C(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},_.prototype.on=function(t,e){var r=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&M(this):i.nextTick(T,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(P,t,e))}(this,t)),this},_.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){p("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=k}).call(this,r(5),r(4))},function(t,e,r){t.exports=r(20).EventEmitter},function(t,e,r){"use strict";var n=r(26);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";t.exports=a;var n=r(14),i=Object.create(r(22));function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){u(t,e,r)})):u(this,null,null)}function u(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(0),i.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},function(t,e,r){"use strict";var n=r(0),i=r(256),o=r(12),a=r(1).Buffer,s=r(79),u=r(38),l=r(39),c=a.alloc(128);function h(t,e){o.call(this,"digest"),"string"==typeof e&&(e=a.from(e));var r="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>r)?e=("rmd160"===t?new u:l(t)).update(e).digest():e.length<r&&(e=a.concat([e,c],r));for(var n=this._ipad=a.allocUnsafe(r),i=this._opad=a.allocUnsafe(r),s=0;s<r;s++)n[s]=54^e[s],i[s]=92^e[s];this._hash="rmd160"===t?new u:l(t),this._hash.update(n)}n(h,o),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:l(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new h("rmd160",e):"md5"===t?new i(s,e):new h(t,e)}},function(t,e,r){var n=r(36);t.exports=function(t){return(new n).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,e,r){e.pbkdf2=r(258),e.pbkdf2Sync=r(84)},function(t,e){var r=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>r||e!=e)throw new TypeError("Bad key length")}},function(t,e,r){(function(e,r){var n;if(e.process&&e.process.browser)n="utf-8";else if(e.process&&e.process.version){n=parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else n="utf-8";t.exports=n}).call(this,r(5),r(4))},function(t,e,r){var n=r(79),i=r(38),o=r(39),a=r(1).Buffer,s=r(82),u=r(83),l=r(85),c=a.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,r){var s=function(t){function e(e){return o(t).update(e).digest()}return"rmd160"===t||"ripemd160"===t?function(t){return(new i).update(t).digest()}:"md5"===t?n:e}(t),u="sha512"===t||"sha384"===t?128:64;e.length>u?e=s(e):e.length<u&&(e=a.concat([e,c],u));for(var l=a.allocUnsafe(u+h[t]),f=a.allocUnsafe(u+h[t]),p=0;p<u;p++)l[p]=54^e[p],f[p]=92^e[p];var d=a.allocUnsafe(u+r+4);l.copy(d,0,0,u),this.ipad1=d,this.ipad2=l,this.opad=f,this.alg=t,this.blocksize=u,this.hash=s,this.size=h[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,r,n,i){s(r,n);var o=new f(i=i||"sha1",t=l(t,u,"Password"),(e=l(e,u,"Salt")).length),c=a.allocUnsafe(n),p=a.allocUnsafe(e.length+4);e.copy(p,0,0,e.length);for(var d=0,m=h[i],y=Math.ceil(n/m),g=1;g<=y;g++){p.writeUInt32BE(g,e.length);for(var v=o.run(p,o.ipad1),_=v,b=1;b<r;b++){_=o.run(_,o.ipad2);for(var w=0;w<m;w++)v[w]^=_[w]}v.copy(c,d),d+=m}return c}},function(t,e,r){var n=r(1).Buffer;t.exports=function(t,e,r){if(n.isBuffer(t))return t;if("string"==typeof t)return n.from(t,e);if(ArrayBuffer.isView(t))return n.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},function(t,e,r){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e},e.ip=function(t,e,r,n){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}r[n+0]=i>>>0,r[n+1]=o>>>0},e.rip=function(t,e,r,n){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=e>>>s+a&1,i<<=1,i|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.pc1=function(t,e,r,n){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,i){for(var o=0,a=0,s=n.length>>>1,u=0;u<s;u++)o<<=1,o|=t>>>n[u]&1;for(u=s;u<n.length;u++)a<<=1,a|=e>>>n[u]&1;r[i+0]=o>>>0,r[i+1]=a>>>0},e.expand=function(t,e,r){var n=0,i=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[r+0]=n>>>0,e[r+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var r=0,n=0;n<4;n++){r<<=4,r|=i[64*n+(t>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=i[256+64*n+(e>>>18-6*n&63)]}return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,r=0;r<o.length;r++)e<<=1,e|=t>>>o[r]&1;return e>>>0},e.padSplit=function(t,e,r){for(var n=t.toString(2);n.length<e;)n="0"+n;for(var i=[],o=0;o<e;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},function(t,e,r){"use strict";var n=r(6),i=r(0),o=r(86),a=r(43);function s(){this.tmp=new Array(2),this.keys=null}function u(t){a.call(this,t);var e=new s;this._desState=e,this.deriveKeys(e,t.key)}i(u,a),t.exports=u,u.create=function(t){return new u(t)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(t,e){t.keys=new Array(32),n.equal(e.length,this.blockSize,"Invalid key length");var r=o.readUInt32BE(e,0),i=o.readUInt32BE(e,4);o.pc1(r,i,t.tmp,0),r=t.tmp[0],i=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=l[a>>>1];r=o.r28shl(r,s),i=o.r28shl(i,s),o.pc2(r,i,t.keys,a)}},u.prototype._update=function(t,e,r,n){var i=this._desState,a=o.readUInt32BE(t,e),s=o.readUInt32BE(t,e+4);o.ip(a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,a,s,i.tmp,0):this._decrypt(i,a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],o.writeUInt32BE(r,a,n),o.writeUInt32BE(r,s,n+4)},u.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},u.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)n.equal(t[r],e);return t.slice(0,t.length-e)},u.prototype._encrypt=function(t,e,r,n,i){for(var a=e,s=r,u=0;u<t.keys.length;u+=2){var l=t.keys[u],c=t.keys[u+1];o.expand(s,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var h=o.substitute(l,c),f=s;s=(a^o.permute(h))>>>0,a=f}o.rip(s,a,n,i)},u.prototype._decrypt=function(t,e,r,n,i){for(var a=r,s=e,u=t.keys.length-2;u>=0;u-=2){var l=t.keys[u],c=t.keys[u+1];o.expand(a,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var h=o.substitute(l,c),f=a;a=(s^o.permute(h))>>>0,s=f}o.rip(a,s,n,i)}},function(t,e,r){var n=r(23),i=r(1).Buffer,o=r(89);function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var r=Math.ceil(e.length/16),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*r)]);for(var s=0;s<r;s++){var u=a(t),l=o+16*s;t._cache.writeUInt32BE(u[0],l+0),t._cache.writeUInt32BE(u[1],l+4),t._cache.writeUInt32BE(u[2],l+8),t._cache.writeUInt32BE(u[3],l+12)}var c=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,c)}},function(t,e){t.exports=function(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,e,r){var n=r(27),i=r(1).Buffer,o=r(12),a=r(0),s=r(271),u=r(23),l=r(89);function c(t,e,r,a){o.call(this);var u=i.alloc(4,0);this._cipher=new n.AES(e);var c=this._cipher.encryptBlock(u);this._ghash=new s(c),r=function(t,e,r){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var n=new s(r),o=e.length,a=o%16;n.update(e),a&&(a=16-a,n.update(i.alloc(a,0))),n.update(i.alloc(8,0));var u=8*o,c=i.alloc(8);c.writeUIntBE(u,0,8),n.update(c),t._finID=n.state;var h=i.from(t._finID);return l(h),h}(this,r,c),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}a(c,o),c.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},c.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=c},function(t,e,r){var n=r(27),i=r(1).Buffer,o=r(12);function a(t,e,r,a){o.call(this),this._cipher=new n.AES(e),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._mode=t}r(0)(a,o),a.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},function(t,e,r){var n=r(15);t.exports=v,v.simpleSieve=y,v.fermatTest=g;var i=r(94),o=new i(24),a=new(r(95)),s=new i(1),u=new i(2),l=new i(5),c=(new i(16),new i(8),new i(10)),h=new i(3),f=(new i(7),new i(11)),p=new i(4),d=(new i(12),null);function m(){if(null!==d)return d;var t=[];t[0]=2;for(var e=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<e&&t[i]<=n&&r%t[i]!=0;i++);e!==i&&t[i]<=n||(t[e++]=r)}return d=t,t}function y(t){for(var e=m(),r=0;r<e.length;r++)if(0===t.modn(e[r]))return 0===t.cmpn(e[r]);return!0}function g(t){var e=i.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function v(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var r,d;for(e=new i(e);;){for(r=new i(n(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(s),r.testn(1)||r.iadd(u),e.cmp(u)){if(!e.cmp(l))for(;r.mod(c).cmp(h);)r.iadd(p)}else for(;r.mod(o).cmp(f);)r.iadd(p);if(y(d=r.shrn(1))&&y(r)&&g(d)&&g(r)&&a.test(d)&&a.test(r))return r}}},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(275).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,E=0|a[5],O=8191&E,T=E>>>13,P=0|a[6],I=8191&P,k=P>>>13,R=0|a[7],L=8191&R,C=R>>>13,A=0|a[8],N=8191&A,j=A>>>13,F=0|a[9],D=8191&F,B=F>>>13,z=0|s[0],G=8191&z,q=z>>>13,U=0|s[1],V=8191&U,W=U>>>13,Y=0|s[2],Z=8191&Y,H=Y>>>13,X=0|s[3],K=8191&X,J=X>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,G)|0))<<13)|0;l=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,G),i=(i=Math.imul(d,q))+Math.imul(m,G)|0,o=Math.imul(m,q);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,G),i=(i=Math.imul(g,q))+Math.imul(v,G)|0,o=Math.imul(v,q),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,W)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,W)|0;var vt=(l+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,q))+Math.imul(w,G)|0,o=Math.imul(w,q),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,W)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,q))+Math.imul(S,G)|0,o=Math.imul(S,q),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,G),i=(i=Math.imul(O,q))+Math.imul(T,G)|0,o=Math.imul(T,q),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,W)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,G),i=(i=Math.imul(I,q))+Math.imul(k,G)|0,o=Math.imul(k,q),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,W)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,q))+Math.imul(C,G)|0,o=Math.imul(C,q),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,q))+Math.imul(j,G)|0,o=Math.imul(j,q),n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var St=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,q))+Math.imul(B,G)|0,o=Math.imul(B,q),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,W)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,W)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,W))+Math.imul(B,V)|0,o=Math.imul(B,W),n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,H))+Math.imul(B,Z)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Pt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,dt)|0))<<13)|0;l=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Lt=(l+(n=n+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(C,dt)|0))<<13)|0;l=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var Ct=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var At=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(At>>>26)|0,At&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=Et,u[10]=Ot,u[11]=Tt,u[12]=Pt,u[13]=It,u[14]=kt,u[15]=Rt,u[16]=Lt,u[17]=Ct,u[18]=At,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(x,v),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){var n=r(276),i=r(46);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},o.prototype.test=function(t,e,r){var i=t.bitLength(),o=n.mont(t),a=new n(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var l=t.shrn(u),c=s.toRed(o);e>0;e--){var h=this._randrange(new n(2),s);r&&r(h);var f=h.toRed(o).redPow(l);if(0!==f.cmp(a)&&0!==f.cmp(c)){for(var p=1;p<u;p++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(c))break}if(p===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var r=t.bitLength(),i=n.mont(t),o=new n(1).toRed(i);e||(e=Math.max(1,r/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),l=a.toRed(i);e>0;e--){var c=this._randrange(new n(2),a),h=t.gcd(c);if(0!==h.cmpn(1))return h;var f=c.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(l)){for(var p=1;p<s;p++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(l))break}if(p===s)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,r){"use strict";var n=e;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r},n.zero2=i,n.toHex=o,n.encode=function(t,e){return"hex"===e?o(t):t}},function(t,e,r){"use strict";var n=e;n.base=r(29),n.short=r(286),n.mont=r(287),n.edwards=r(288)},function(t,e,r){"use strict";var n=r(8).rotr32;function i(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function a(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?a(e,r,n):2===t?o(e,r,n):void 0},e.ch32=i,e.maj32=o,e.p32=a,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,r){"use strict";var n=r(8),i=r(24),o=r(98),a=r(6),s=n.sum32,u=n.sum32_4,l=n.sum32_5,c=o.ch32,h=o.maj32,f=o.s0_256,p=o.s1_256,d=o.g0_256,m=o.g1_256,y=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}n.inherits(v,y),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=u(m(r[n-2]),r[n-7],d(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],y=this.h[2],g=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],w=this.h[7];for(a(this.k.length===r.length),n=0;n<r.length;n++){var x=l(w,p(v),c(v,_,b),this.k[n],r[n]),M=s(f(i),h(i,o,y));w=b,b=_,_=v,v=s(g,x),g=y,y=o,o=i,i=s(x,M)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],y),this.h[3]=s(this.h[3],g),this.h[4]=s(this.h[4],v),this.h[5]=s(this.h[5],_),this.h[6]=s(this.h[6],b),this.h[7]=s(this.h[7],w)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(8),i=r(24),o=r(6),a=n.rotr64_hi,s=n.rotr64_lo,u=n.shr64_hi,l=n.shr64_lo,c=n.sum64,h=n.sum64_hi,f=n.sum64_lo,p=n.sum64_4_hi,d=n.sum64_4_lo,m=n.sum64_5_hi,y=n.sum64_5_lo,g=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function b(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function w(t,e,r,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function x(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function M(t,e,r,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function S(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function E(t,e){var r=s(t,e,28)^s(e,t,2)^s(e,t,7);return r<0&&(r+=4294967296),r}function O(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function T(t,e){var r=s(t,e,14)^s(t,e,18)^s(e,t,9);return r<0&&(r+=4294967296),r}function P(t,e){var r=a(t,e,1)^a(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function I(t,e){var r=s(t,e,1)^s(t,e,8)^l(t,e,7);return r<0&&(r+=4294967296),r}function k(t,e){var r=a(t,e,19)^a(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}function R(t,e){var r=s(t,e,19)^s(e,t,29)^l(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(_,g),t.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=k(r[n-4],r[n-3]),o=R(r[n-4],r[n-3]),a=r[n-14],s=r[n-13],u=P(r[n-30],r[n-29]),l=I(r[n-30],r[n-29]),c=r[n-32],h=r[n-31];r[n]=p(i,o,a,s,u,l,c,h),r[n+1]=d(i,o,a,s,u,l,c,h)}},_.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],l=this.h[5],p=this.h[6],d=this.h[7],g=this.h[8],v=this.h[9],_=this.h[10],P=this.h[11],I=this.h[12],k=this.h[13],R=this.h[14],L=this.h[15];o(this.k.length===r.length);for(var C=0;C<r.length;C+=2){var A=R,N=L,j=O(g,v),F=T(g,v),D=b(g,v,_,P,I),B=w(g,v,_,P,I,k),z=this.k[C],G=this.k[C+1],q=r[C],U=r[C+1],V=m(A,N,j,F,D,B,z,G,q,U),W=y(A,N,j,F,D,B,z,G,q,U);A=S(n,i),N=E(n,i),j=x(n,i,a,s,u),F=M(n,i,a,s,u,l);var Y=h(A,N,j,F),Z=f(A,N,j,F);R=I,L=k,I=_,k=P,_=g,P=v,g=h(p,d,V,W),v=f(d,d,V,W),p=u,d=l,u=a,l=s,a=n,s=i,n=h(V,W,Y,Z),i=f(V,W,Y,Z)}c(this.h,0,n,i),c(this.h,2,a,s),c(this.h,4,u,l),c(this.h,6,p,d),c(this.h,8,g,v),c(this.h,10,_,P),c(this.h,12,I,k),c(this.h,14,R,L)},_.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";const n=e;n.bignum=r(102),n.define=r(305).define,n.base=r(308),n.constants=r(309),n.decoders=r(105),n.encoders=r(103)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(304).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,E=0|a[5],O=8191&E,T=E>>>13,P=0|a[6],I=8191&P,k=P>>>13,R=0|a[7],L=8191&R,C=R>>>13,A=0|a[8],N=8191&A,j=A>>>13,F=0|a[9],D=8191&F,B=F>>>13,z=0|s[0],G=8191&z,q=z>>>13,U=0|s[1],V=8191&U,W=U>>>13,Y=0|s[2],Z=8191&Y,H=Y>>>13,X=0|s[3],K=8191&X,J=X>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,G)|0))<<13)|0;l=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,G),i=(i=Math.imul(d,q))+Math.imul(m,G)|0,o=Math.imul(m,q);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,G),i=(i=Math.imul(g,q))+Math.imul(v,G)|0,o=Math.imul(v,q),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,W)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,W)|0;var vt=(l+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,q))+Math.imul(w,G)|0,o=Math.imul(w,q),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,W)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,q))+Math.imul(S,G)|0,o=Math.imul(S,q),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,G),i=(i=Math.imul(O,q))+Math.imul(T,G)|0,o=Math.imul(T,q),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,W)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,G),i=(i=Math.imul(I,q))+Math.imul(k,G)|0,o=Math.imul(k,q),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,W)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,q))+Math.imul(C,G)|0,o=Math.imul(C,q),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,q))+Math.imul(j,G)|0,o=Math.imul(j,q),n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var St=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,q))+Math.imul(B,G)|0,o=Math.imul(B,q),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,W)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,W)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,W))+Math.imul(B,V)|0,o=Math.imul(B,W),n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,H))+Math.imul(B,Z)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Pt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,dt)|0))<<13)|0;l=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Lt=(l+(n=n+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(C,dt)|0))<<13)|0;l=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var Ct=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var At=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(At>>>26)|0,At&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=Et,u[10]=Ot,u[11]=Tt,u[12]=Pt,u[13]=It,u[14]=kt,u[15]=Rt,u[16]=Lt,u[17]=Ct,u[18]=At,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(x,v),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){"use strict";const n=e;n.der=r(104),n.pem=r(306)},function(t,e,r){"use strict";const n=r(0),i=r(52).Buffer,o=r(53),a=r(55);function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){o.call(this,"der",t)}function l(t){return t<10?"0"+t:t}t.exports=s,s.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},n(u,o),u.prototype._encodeComposite=function(t,e,r,n){const o=function(t,e,r,n){let i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(a.tagByName.hasOwnProperty(t))i=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t}if(i>=31)return n.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=a.tagClassByName[r||"universal"]<<6,i}(t,e,r,this.reporter);if(n.length<128){const t=i.alloc(2);return t[0]=o,t[1]=n.length,this._createEncoderBuffer([t,n])}let s=1;for(let t=n.length;t>=256;t>>=8)s++;const u=i.alloc(2+s);u[0]=o,u[1]=128|s;for(let t=1+s,e=n.length;e>0;t--,e>>=8)u[t]=255&e;return this._createEncoderBuffer([u,n])},u.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=i.alloc(2*t.length);for(let r=0;r<t.length;r++)e.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},u.prototype._encodeObjid=function(t,e,r){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let e=0;e<t.length;e++){let r=t[e];for(n++;r>=128;r>>=7)n++}const o=i.alloc(n);let a=o.length-1;for(let e=t.length-1;e>=0;e--){let r=t[e];for(o[a--]=127&r;(r>>=7)>0;)o[a--]=128|127&r}return this._createEncoderBuffer(o)},u.prototype._encodeTime=function(t,e){let r;const n=new Date(t);return"gentime"===e?r=[l(n.getUTCFullYear()),l(n.getUTCMonth()+1),l(n.getUTCDate()),l(n.getUTCHours()),l(n.getUTCMinutes()),l(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[l(n.getUTCFullYear()%100),l(n.getUTCMonth()+1),l(n.getUTCDate()),l(n.getUTCHours()),l(n.getUTCMinutes()),l(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=i.from(e)}if(i.isBuffer(t)){let e=t.length;0===t.length&&e++;const r=i.alloc(e);return t.copy(r),0===t.length&&(r[0]=0),this._createEncoderBuffer(r)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let e=t;e>=256;e>>=8)r++;const n=new Array(r);for(let e=n.length-1;e>=0;e--)n[e]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(i.from(n))},u.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},u.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},u.prototype._skipDefault=function(t,e,r){const n=this._baseState;let i;if(null===n.default)return!1;const o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0}},function(t,e,r){"use strict";const n=e;n.der=r(106),n.pem=r(307)},function(t,e,r){"use strict";const n=r(0),i=r(102),o=r(25).DecoderBuffer,a=r(53),s=r(55);function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){a.call(this,"der",t)}function c(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=s.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=t.readUInt8(e),t.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:s.tag[r]}}function h(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0==(128&n))return n;const i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(let e=0;e<i;e++){n<<=8;const e=t.readUInt8(r);if(t.isError(e))return e;n|=e}return n}t.exports=u,u.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},n(l,a),l.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;const n=t.save(),i=c(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},l.prototype._decodeTag=function(t,e,r){const n=c(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let i=h(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');const o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},l.prototype._skipUntilEnd=function(t,e){for(;;){const r=c(t,e);if(t.isError(r))return r;const n=h(t,r.primitive,e);if(t.isError(n))return n;let i;if(i=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===r.tagStr)break}},l.prototype._decodeList=function(t,e,r,n){const i=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=r.decode(t,"der",n);if(t.isError(o)&&e)break;i.push(o)}return i},l.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let r="";for(let t=0;t<e.length/2;t++)r+=String.fromCharCode(e.readUInt16BE(2*t));return r}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},l.prototype._decodeObjid=function(t,e,r){let n;const i=[];let o=0,a=0;for(;!t.isEmpty();)a=t.readUInt8(),o<<=7,o|=127&a,0==(128&a)&&(i.push(o),o=0);128&a&&i.push(o);const s=i[0]/40|0,u=i[0]%40;if(n=r?i:[s,u].concat(i.slice(1)),e){let t=e[n.join(" ")];void 0===t&&(t=e[n.join(".")]),void 0!==t&&(n=t)}return n},l.prototype._decodeTime=function(t,e){const r=t.raw().toString();let n,i,o,a,s,u;if("gentime"===e)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),s=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),u=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,a,s,u,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},l.prototype._decodeInt=function(t,e){const r=t.raw();let n=new i(r);return e&&(n=e[n.toString(10)]||n),n},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(t,e,r){var n=r(19),i=r(1).Buffer;function o(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var r,a=i.alloc(0),s=0;a.length<e;)r=o(s++),a=i.concat([a,n("sha1").update(t).update(r).digest()]);return a.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t}},function(t,e,r){var n=r(56),i=r(1).Buffer;t.exports=function(t,e){return i.from(t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed().toArray())}},function(t,e,r){"use strict";t.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();t.exports=function(t,e,r,i){var o=n,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,r){"use strict";var n=r(13),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,e.string2buf=function(t){var e,r,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},e.buf2string=function(t,e){var r,n,i,o,s=e||t.length,l=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)l[n++]=i;else if((o=a[i])>4)l[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&t[r++],o--;o>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return u(l,n)},e.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e}},function(t,e,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){t.exports='<div class="m-control"></div>'},function(t){t.exports=JSON.parse('{"location":{"title":"Get current location"},"layerswitcher":{"title":"Layer selector"},"scale":{"title":"Scale","scale":"Scale","level":"Zoom level"},"getfeatureinfo":{"info":"Information","title":"Consult layer","no_info":"No associated info","info_of":"Information about","unsupported_format":"Unsupported format"},"wmcselector":{"title":"Context selector"},"rotate":{"title":"Turn north"},"mouse":{"title":"Pointer coordinates"},"dialog":{"info":"INFORMATION","error":"ERROR","success":"SUCCESS","id_feature":"An ID has not been indicated to obtain the feature","invalid_type_layer":"A valid type was not specified for the layer","vector_filter":"The indicated filter is not correct","unauthorized_user":"An error occurred while loading the layer: Unauthorized user.","only_one_filter":"FeatureID and CQL are mutually exclusive, indicate only one type of filtering.","any_format":"TXT, HTML and GML are and unsupported"},"feature":{"incorrect_attributes":"The attributes were not specified correctly."},"heatmap":{"features":"The layer does not have any <br/> features with the specified attribute in set symbology. <br/>A default weighting is set","name":"Heatmap"},"exception":{"addto_method":"The used implementation does not have the addTo method","getelement_method":"The used implementation does not have the getElement method","getfeatureinfo_method":"The used implementation can not create GetFeatureInfo controls","mouse_method":"The used implementation can not create Mouse controls","navtoolbar_method":"The used implementation can not create navtoolbar controls","overviewmap_method":"The used implementation can not create OverviewMap controls","panzoom_method":"The used implementation can not create Panzoom controls","panzoombar_method":"The used implementation can not create Panzoombar controls","scale_method":"The used implementation can not create Scale controls","scaleline_method":"The used implementation can not create ScaleLine controls","wmcselector_method":"The used implementation can not create WMCSelector controls","geojson_method":"The used implementation can not create objects M.impl.format.GeoJSON","wkt_method":"The used implementation can not creat objects M.impl.format.WKT","getfeaturesbylayer_method":"The used implementation does not have the getFeaturesByLayer method","geojsonlayer_method":"The used implementation can not create GeoJSON layers","no_param":"No parameters specified","no_name":"You have not specified any name","kmllayer_method":"The used implementation can not create KML layers","isvisible_method":"The used implementation does not have the isVisible method","isqueryable_methd":"The used implementation does not have the isQueryable method","visibility_param":"You have not specified any visibility parameters","setvisible_method":"The used implementation does not have the setVisible method","inrange_method":"The used implementation does not have the inRange method","mapbox_method":"The used implementation can not create Mapbox layers","osm_method":"The used implementation can not create OSM layers","vectorlayer_method":"The used implementation can not create Vector layers","wfslayer_method":"The used implementation can not create WFS layers","wmclayer_method":"The used implementation can not create WMC layers","select_method":"The used implementation does not have the select method","unselect_method":"The used implementation does not have the unselect method","constructor_impl":"The used implementation does not have a constructor.","getlayers_method":"The used implementation does not have the getLayers method.","getbaselayers_method":"The used implementation does not have the getBaseLayers method.","addlayers_method":"The used implementation does not have the addLayers method.","removelayers_method":"The used implementation does not have the removeLayers method.","getwmc_method":"The implementation used does not have the getWMC method.","addwmc_method":"The used implementation does not have the addWMC method.","removewmc_method":"The used implementation does not have the removeWMC method.","getkml_method":"The used implementation does not have the getKML method.","addkml_method":"The implementation used does not have the addKML method.","removekml_method":"The implementation used does not have the removeKML method.","getwms_method":"The used implementation does not have the getWMS method.","addwms_method":"The used implementation does not have the addWMS method.","removewms_method":"The used implementation does not have the removeWMS method.","getwfs_method":"The implementation used does not have the getWFS method.","getgeojson_method":"The used implementation does not have the getGeoJSON method.","addwfs_method":"The used implementation does not have the addWFS method.","removewfs_method":"The used implementation does not have the removeWFS method.","getwmts_method":"The implementation used does not have the getWMTS method.","addwmts_method":"The used implementation does not have the addWMTS method.","removewmts_method":"The used implementation does not have the removeWMTS method.","getmbtiles_method":"The used implementation does not have the getMBtiles method.","getxyzs_method":"The used implementation does not have the getXYZs method.","gettms_method":"The used implementation does not have the getTMS method.","getcontrols_method":"The used implementation does not have the getControls method.","addcontrols_method":"The used implementation does not have the addControls method.","remove_control":"You have not specified any control to delete.","removecontrol_method":"The used implementation does not have the removeControls method.","setmaxextent_method":"The used implementation does not have the setMaxExtent method.","getbbox_method":"The used implementation does not have the getBbox method.","no_bbox":"You have not specified any bbox.","setbbox_method":"The used implementation does not have the setBbox method.","incorrect_bbox_format":"The format of the bbox parameter is not correct.","getzoom_method":"The used implementation does not have the getZoom method.","no_zoom":"You have not specified any zoom.","setzoom_method":"The implementation used does not have the setZoom method.","getcenter_method":"The used implementation does not have the getCenter method.","setcenter_method":"The used implementation does not have the setCenter method.","getresolutions_method":"The used implementation does not have the getResolutions method.","no_resolutions":"You have not specified any resolution.","setresolutions_method":"The used implementation does not have the setResolutions method.","getscale_method":"The used implementation does not have the getScale method.","getprojection_method":"The implementation used does not have the getProjection method.","no_projection":"You have not specified any projection.","setprojection_method":"The used implementation does not have the setProjection method.","no_plugins":"You have not specified any plugins.","no_add_plugin_to_map":"The plugin can not be added to the map.","no_plugin_to_remove":"You have not specified any plugins to delete.","destroy_method":"The used implementation does not have the destroy method.","addlabel_method":"The used implementation does not have the addLabel method.","no_point":"You have not specified any points.","remove_control_from_panel":"You must remove the controls from the panel previously.","getcontainer_method":"The used implementation does not have the getContainer method.","getmapimpl_method":"The used implementation does not have the getMapImpl method.","removepopup_method":"The used implementation does not have the removePopup method.","no_popup":"You have not specified any popup.","invalid_popup":"The specified popup is not valid.","no_maxextent":"You have not specified any maxExtent","must_be_document":"doc.nodeType must be DOCUMENT type","no_service_response":"There was no reply from the service","no_kml_response":"There was no response from the KML","no_getfeature_response":"There was no response in the GetFeature operation","no_map":"You have not specified any map","layerswitcher_method":"The used implementation can not create LayerSwitcher controls","location_method":"The used implementation can not create Location controls","wms_method":"The used implementation can not create WMS layers","wmts_method":"The used implementation can not create WMTS layers","no_impl":"No implementation specified","no_container":"You have not specified any container parameters","no_id_container":"There is no container with the specified id","no_center":"You have not specified any center parameters","no_attr_name":"The name of the attribute was not specified","no_empty":"The attribute name can not be null. Specify string or function","invalid_center_param":"The format of the center parameter is not correct","invalid_maxextent_param":"The format of the maxExtent parameter is not correct","invalid_resolutions_param":"The format of the resolutions parameter is not correct","invalid_zoom_param":"The format of the zoom parameter is not correct","min_gt_max":"A minimum radius greater than the maximum can not be established.","max_lt_min":"A maximum radius of less than the minimum can not be established.","no_geojson":"No GeoJSON has been specified","unsupported_lang":"A language without support has been established"}}')},function(t){t.exports=JSON.parse('{"location":{"error":"El control ubicación no acepta http. Debe usar https.","title":"Obtener ubicación actual"},"layerswitcher":{"title":"Selector de capas"},"scale":{"title":"Escala","scale":"Escala","level":"Nivel de zoom"},"getfeatureinfo":{"info":"Información","title":"Consultar capa","no_info":"No existe información asociada","info_of":"Información de","unsupported_format":"Formato no soportado"},"wmcselector":{"title":"Selector de contextos"},"rotate":{"title":"Girar al norte"},"mouse":{"title":"Coordenadas del puntero"},"dialog":{"info":"INFORMACIÓN","error":"ERROR","success":"ÉXITO","id_feature":"No se ha indicado un ID para obtener el feature","invalid_type_layer":"No se ha especificado un tipo válido para la capa","vector_filter":"El filtro indicado no es correcto","unauthorized_user":"Ha ocurrido un error al cargar la capa: Usuario no autorizado.","only_one_filter":"FeatureID y CQL son mutuamente excluyentes. Indicar sólo un tipo de filtrado.","any_format":"TXT, ni HTML ni GML están soportados"},"feature":{"incorrect_attributes":"No se han especificado correctamente los atributos."},"heatmap":{"features":"La capa no tiene ninguna feature <br/> con el atributo especificado en simbología establecida. <br/>Se setea una ponderación por defecto","name":"Mapa de calor"},"exception":{"addto_method":"La implementación usada no posee el método addTo","getelement_method":"La implementación usada no posee el método getElement","getfeatureinfo_method":"La implementación usada no puede crear controles GetFeatureInfo","mouse_method":"La implementación usada no puede crear controles Mouse","navtoolbar_method":"La implementación usada no puede crear controles Navtoolbar","overviewmap_method":"La implementación usada no puede crear controles OverviewMap","panzoom_method":"La implementación usada no puede crear controles Panzoom","panzoombar_method":"La implementación usada no puede crear controles Panzoombar","scale_method":"La implementación usada no puede crear controles Scale","scaleline_method":"La implementación usada no puede crear controles ScaleLine","wmcselector_method":"La implementación usada no puede crear controles WMCSelector","geojson_method":"La implementación usada no puede crear objetos M.impl.format.GeoJSON","wkt_method":"La implementación usada no puede creat objetos M.impl.format.WKT","getfeaturesbylayer_method":"La implementación usada no posee el método getFeaturesByLayer","geojsonlayer_method":"La implementación usada no puede crear capas GeoJSON","no_param":"No se ha especificado ningun parámetro","no_name":"No ha especificado ningún nombre","kmllayer_method":"La implementación usada no puede crear capas KML","isvisible_method":"La implementación usada no posee el método isVisible","isqueryable_methd":"La implementación usada no posee el método isQueryable","visibility_param":"No ha especificado ningún parámetro de visibilidad","setvisible_method":"La implementación usada no posee el método setVisible","inrange_method":"La implementación usada no posee el método inRange","mapbox_method":"La implementación usada no puede crear capas Mapbox","osm_method":"La implementación usada no puede crear capas OSM","vectorlayer_method":"La implementación usada no puede crear capas Vector","wfslayer_method":"La implementación usada no puede crear capas WFS","wmclayer_method":"La implementación usada no puede crear capas WMC","select_method":"La implementación usada no posee el método select","unselect_method":"La implementación usada no posee el método unselect","constructor_impl":"La implementación usada no posee un constructor.","getlayers_method":"La implementación usada no posee el método getLayers.","getbaselayers_method":"La implementación usada no posee el método getBaseLayers.","addlayers_method":"La implementación usada no posee el método addLayers.","removelayers_method":"La implementación usada no posee el método removeLayers.","getwmc_method":"La implementación usada no posee el método getWMC.","addwmc_method":"La implementación usada no posee el método addWMC.","removewmc_method":"La implementación usada no posee el método removeWMC.","getkml_method":"La implementación usada no posee el método getKML.","addkml_method":"La implementación usada no posee el método addKML.","removekml_method":"La implementación usada no posee el método removeKML.","getwms_method":"La implementación usada no posee el método getWMS.","addwms_method":"La implementación usada no posee el método addWMS.","removewms_method":"La implementación usada no posee el método removeWMS.","getwfs_method":"La implementación usada no posee el método getWFS.","getgeojson_method":"La implementación usada no posee el método getGeoJSON.","addwfs_method":"La implementación usada no posee el método addWFS.","removewfs_method":"La implementación usada no posee el método removeWFS.","getwmts_method":"La implementación usada no posee el método getWMTS.","addwmts_method":"La implementación usada no posee el método addWMTS.","removewmts_method":"La implementación usada no posee el método removeWMTS.","getmbtiles_method":"La implementación usada no posee el método getMBtiles.","getxyzs_method":"La implementación usada no posee el método getXYZs.","gettms_method":"La implementación usada no posee el método getTMS.","getcontrols_method":"La implementación usada no posee el método getControls.","addcontrols_method":"La implementación usada no posee el método addControls.","remove_control":"No ha especificado ningún control a eliminar.","removecontrol_method":"La implementación usada no posee el método removeControls.","setmaxextent_method":"La implementación usada no posee el método setMaxExtent.","getbbox_method":"La implementación usada no posee el método getBbox.","no_bbox":"No ha especificado ningún bbox.","setbbox_method":"La implementación usada no posee el método setBbox.","incorrect_bbox_format":"El formato del parámetro bbox no es el correcto.","getzoom_method":"La implementación usada no posee el método getZoom.","no_zoom":"No ha especificado ningún zoom.","setzoom_method":"La implementación usada no posee el método setZoom.","getcenter_method":"La implementación usada no posee el método getCenter.","setcenter_method":"La implementación usada no posee el método setCenter.","getresolutions_method":"La implementación usada no posee el método getResolutions.","no_resolutions":"No ha especificado ninguna resolución.","setresolutions_method":"La implementación usada no posee el método setResolutions.","getscale_method":"La implementación usada no posee el método getScale.","getprojection_method":"La implementación usada no posee el método getProjection.","no_projection":"No ha especificado ninguna proyección.","setprojection_method":"La implementación usada no posee el método setProjection.","no_plugins":"No ha especificado ningún plugin.","no_add_plugin_to_map":"El plugin no puede añadirse al mapa.","no_plugin_to_remove":"No ha especificado ningún plugin a eliminar.","destroy_method":"La implementación usada no posee el método destroy.","addlabel_method":"La implementación usada no posee el método addLabel.","no_point":"No ha especificado ningún punto.","remove_control_from_panel":"Debe eliminar los controles del panel previamente.","getcontainer_method":"La implementación usada no posee el método getContainer.","getmapimpl_method":"La implementación usada no posee el método getMapImpl.","removepopup_method":"La implementación usada no posee el método removePopup.","no_popup":"No ha especificado ningún popup.","invalid_popup":"El popup especificado no es válido.","no_maxextent":"No ha especificado ningún maxExtent","must_be_document":"doc.nodeType debe ser de tipo DOCUMENT","no_service_response":"No hubo respuesta del servicio","no_kml_response":"No hubo respuesta del KML","no_getfeature_response":"No hubo respuesta en la operación GetFeature","no_map":"No ha especificado ningun mapa","layerswitcher_method":"La implementación usada no puede crear controles LayerSwitcher","location_method":"La implementación usada no puede crear controles Location","wms_method":"La implementación usada no puede crear capas WMS","wmts_method":"La implementación usada no puede crear capas WMTS","no_impl":"No se ha especificado ninguna implementación","no_container":"No ha especificado ningún parámetro contenedor","no_id_container":"No existe ningún contenedor con el id especificado","no_center":"No ha especificado ningún parámetro center","no_attr_name":"No se ha especificado el nombre del atributo","no_empty":"El nombre de atributo no puede ser nulo. Especifique cadena o función","invalid_center_param":"El formato del parámetro center no es correcto","invalid_maxextent_param":"El formato del parámetro maxExtent no es correcto","invalid_resolutions_param":"El formato del parámetro resolutions no es correcto","invalid_zoom_param":"El formato del parámetro zoom no es correcto","min_gt_max":"No puede establecerse un radio mínimo mayor que el máximo.","max_lt_min":"No puede establecerse un radio máximo menor que el mínimo.","no_geojson":"No se ha especificado ningun GeoJSON","unsupported_lang":"Se ha establecido un idioma sin soporte"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution.","mode":"La opción \'mode\' no ha sido establecida correctamente. Consejo: {mode: 1 | 2 | 3}.","type":"La opción \'type\' no ha sido establecida. Cuando la opción \'url\' es usada el plugin necesita la opción \'type\'. Valores = geojson | kml | topojson.","layer_name":"La opción \'layerName\' no ha sido establecida. Cuando la opción \'url\' es usada el plugin necesita la opción \'layerName\'."},"attribution":"atribución","tooltip":"Reconocimientos"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls.","mode":"Options mode is bad setted. Tip: {mode: 1 | 2 | 3}.","type":"Missing \'type\' options. When \'url\' option is setted the plugin needs \'type\' option. Values = geojson | kml | topojson.","layer_name":"Missing \'layerName\' options. When \'url\' option is setted the plugin needs \'layerName\' option."},"attribution":"attribution","tooltip":"Acknowledgments"}')},function(t){t.exports=JSON.parse('{"tooltip":"Capas de fondo","none":"Ninguna"}')},function(t){t.exports=JSON.parse('{"tooltip":"Background layers","none":"None"}')},function(t){t.exports=JSON.parse('{"exception":{"cobertura":"Comprobando cobertura en la zona...","nocobertura":"Esta capa no tiene cobertura en esta zona"},"tooltip":"Capas Adicionales","layers":"Capas Adicionales","vectoriallayers":"Capas vectoriales","ortofotos":"Ortofotos","warning":"AVISO"}')},function(t){t.exports=JSON.parse('{"exception":{"cobertura":"Checking coverage in the area...","nocobertura":"This layer has no coverage in this area"},"tooltip":"Additional Layers","layers":"Additional Layers","vectoriallayers":"Vectorial layers","ortofotos":"Orthophotos","warning":"WARNING"}')},function(t){t.exports=JSON.parse('{"tooltip":"Área de influencia","tooltip_point":"Pintar punto","tooltip_line":"Pintar línea","tooltip_polygon":"Pintar polígono","tooltip_remove":"Eliminar","title_popup":"ÁREA DE INFLUENCIA","unit_m":"Metros","unit_km":"Kilómetros","exception_layer":"La implementación usada no puede crear capas BufferLayer","exception_control":"La implementación usada no puede crear controles influenceareaControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"Influence Area","tooltip_point":"Draw Point","tooltip_line":"Draw Line","tooltip_polygon":"Draw Polygon","tooltip_remove":"Remove","title_popup":"INFLUENCE AREA","unit_m":"Metres","unit_km":"Kilometres","exception_layer":"The implementation used cannot create BufferLayer layers","exception_control":"The implementation used cannot create influenceareaControl controls"}')},function(t){t.exports=JSON.parse('{"tooltip":"Cita previa","exception_calendarcontrol":"La implementación usada no puede crear controles CalendarControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"Previous appointment","exception_calendarcontrol":"The implementation used cannot create CalendarControl controls"}')},function(t){t.exports=JSON.parse('{"tooltip":"Panel de Comparadores","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","exception":"La implementación usada no puede crear controles ComparepanelControl","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","tooltip_deactivatecurtain":"Desactivar cortina","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","tooltipTimeline":"Línea de tiempo","titleTimeline":"Línea de tiempo","tooltipTransparency":"Transparencia","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","nolayertext":"Ninguna capa","freeze":"Inmovilizar cursor","unfreeze":"liberar cursor","activate_spyeye":"Activar Spy Eye","deactivate_spyeye":"Desactivar Spy Eye"}')},function(t){t.exports=JSON.parse('{"tooltip":"Comparepanel","title":"Comparepanel","play":"Play","pause":"Pause","exception":"The implementation used cannot create comparepanelControl controls","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","tooltip_deactivatecurtain":"Deactivate curtain","layers":"Layehrs","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","tooltipTimeline":"Timeline","titleTimeline":"Timeline","tooltipTransparency":"Transparency","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","nolayertext":"No layer selected","freeze":"freeze cursor","unfreeze":"defrost cursor","activate_spyeye":"SpyEye ON","deactivate_spyeye":"SpyEye OFF"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"tooltip":"Enlaces y contacto IGN","title":"Enlaces y contacto","links":{"downloads":"Descargas CNIG","compare":"Comparador PNOA","3d":"Visualizador 3D","photo":"Fototeca"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"tooltip":"IGN links and contact","title":"Links and contact","links":{"downloads":"CNIG Downloads","compare":"PNOA Comparator","3d":"3D Display","photo":"Aerial Photography Viewer"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles FullTOCControl.","extent":"No se puede obtener la extensión de la capa","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","only_http":"Sólo se permiten servicios http","only_https":"Sólo se permiten servicios https","no_http_https":"No se permiten servicios http ni https","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","select_layer":"Debes seleccionar al menos una capa","no_results":"No se han encontrado capas en este servicio","codsi":"Ha ocurrido un error al consultar el catálogo CODSI","codsi_no_results":"No hay resultados para su búsqueda"},"tooltip":"Capas","info":"Información","layer_info":"Información de la capa","configure_layer":"Configurar capa","close":"Cerrar","load_ext_services":"Cargar capas de información geográfica","layers":"Capas","add_service":"Añadir servicio","show_hide":"Mostrar/Ocultar leyenda","zoom":"Zoom a la capa","info_metadata":"Ver información","change_style":"Cambiar estilo","remove_layer":"Eliminar capa del mapa","select_style":"Selecciona un estilo","change":"Cambiar","url_service":"URL del servicio","query":"Consultar","loaded_services":"Capas de información geográfica","codsi_services":"Catálogo de Servicios INSPIRE (CODSI)","clean":"Limpiar búsqueda","availables":"Capas de información geográfica disponibles","title":"Título","name":"Nombre","abstract":"Resumen","provider":"Proveedor","service_info":"Información del servicio (Capabilities)","download_center":"Centro de descargas","add":"Añadir","drag_drop":"Arrastre y suelte para cambiar el orden de visualización","see_more":"Mostrar metadato del conjunto de datos","see_less":"Ocultar metadato del conjunto de datos","service":"Servicio","metadata_abstract":"Resumen (metadato)","responsible":"Responsable","access_constraints":"Restricciones de acceso","use_constraints":"Restricciones de uso","online_resources":"Recursos online","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","filter_results":"Filtrar resultados","clean_filter":"Limpiar filtro","filter_text":"Texto a buscar","metadata":"Metadatos","see_more_layer":"Ver más información de la capa","see_more_service":"Ver más información del servicio"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create FullTOCControl.","extent":"Cannot get the extent of the layer","capabilities":"An error has occurred in obtaining the GetCapabilities document","only_http":"Only http services are allowed","only_https":"Only https services are allowed","no_http_https":"No http or https services allowed","valid_url":"You must provide a valid URL","empty":"The fields are empty","select_layer":"You must select at least one layer","no_results":"No layers found in this service","codsi":"An error occurred while consulting the CODSI catalog","codsi_no_results":"There are no results for your search"},"tooltip":"Layers","info":"Information","layer_info":"Layer information","configure_layer":"Configure layer","close":"Close","load_ext_services":"Load geographic information layers","layers":"Layers","add_service":"Add service","show_hide":"Show/Hide legend","zoom":"Zoom to the layer","info_metadata":"View information","change_style":"Change style","remove_layer":"Remove layer from map","select_style":"Select a style","change":"Change","url_service":"Service URL","query":"Consult","loaded_services":"Preloaded geographic information layers","codsi_services":"INSPIRE Services Catalog (CODSI)","clean":"Clean search","availables":"Preloaded geographic information layers available","title":"Title","name":"Name","abstract":"Abstract","provider":"Provider","service_info":"Service information (Capabilities)","download_center":"Download center","add":"Add","drag_drop":"Drag and drop to change display order","see_more":"Show dataset metadata","see_less":"Hide dataset metadata","service":"Service","metadata_abstract":"Abstract (metadata)","responsible":"Responsible","access_constraints":"Access constraints","use_constraints":"Use constraints","online_resources":"Online resources","show_service_info":"Show service information","hide_service_info":"Hide service information","filter_results":"Filter results","clean_filter":"Clean filter","filter_text":"Text to search","metadata":"Metadata","see_more_layer":"View more information about the layer (Metadata)","see_more_service":"View more service information (Metadata)"}')},function(t){t.exports=JSON.parse('{"exception":{"emptylater":"La capa de dibujo está vacía.","geometrianoencontrar":"Geometría no reconocida.","formatocoord":"Las coordenadas introducidas no tienen el formato correcto.","introduzcoord":"No se han introducido las coordenadas correctamente.","errorfichero":"Error al cargar el fichero.","nodetectado":"No se han detectado geometrías en este fichero.","comprobar":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","insertado":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX y GeoJSON.","maxfichero":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","ficherosel":"No se ha seleccionado formato de descarga."},"tooltip":"Dibujo de geometrías","punto":"Punto","coordenadas":"Punto por coordenadas","linea":"Línea","poligono":"Polígono","texto":"Texto","editgeometria":"Editar geometría","descgeometria":"Descargar geometrías","subircapa":"Subir capa","limpiar":"Limpiar","color":"Color","grosor":"Grosor","borrar":"Borrar geometría","dibujar":"Dibujar geometría","descargar":"Descargar","sistema":"Sistema de coordenadas","longitud":"Longitud","latitud":"Latitud","fuente":"Fuente","tamaño":"Tamaño","eliminar":"Eliminar texto","ficheros":"Los formatos aceptados son KML, SHP (.zip), GPX y GeoJSON.","seleccionar":"Selecciona el fichero","cargarcapa":"Cargar capa"}')},function(t){t.exports=JSON.parse('{"exception":{"emptylater":"The drawing layer is empty.","geometrianoencontrar":"Unrecognized geometry.","formatocoord":"The entered coordinates are not in the correct format.","introduzcoord":"Coordinates are not entered correctly.","errorfichero":"Error loading the file.","nodetectado":"No geometries have been detected in this file.","comprobar":"Error loading the file. Verify that this is the correct file.","insertado":"A permitted file extension has not been inserted. The allowed ones are: KML, SHP (.zip), GPX and GeoJSON.","maxfichero":"The selected file exceeds the maximum of 20 MB allowed","ficherosel":"Download format has not been selected."},"tooltip":"Geometry drawing","punto":"Point","coordenadas":"Coordinate point","linea":"Line","poligono":"Polygon","texto":"Text","editgeometria":"Edit geometry","descgeometria":"Download geometry","subircapa":"Import layer","limpiar":"Clean","color":"Color","grosor":"Stroke","borrar":"Delete geometry","dibujar":"Draw geometry","descargar":"Download","sistema":"Coordinate system","longitud":"Longitude","latitud":"Latitude","fuente":"Font","tamaño":"Size","eliminar":"Delete text","ficheros":"The accepted formats are KML, SHP (.zip), GPX and GeoJSON.","seleccionar":"Select file","cargarcapa":"Load layer"}')},function(t){t.exports=JSON.parse('{"exception":{"loaderror":"La imagen no ha podido ser cargada.","teselaError":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","printError":"Se ha producido un error en la impresión."},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","printInfo":"Impresión generada a través de Mapea","tooltip":"Descargar Imagen georreferenciada","referenced":"Imagen georreferenciada","projection":"Proyección","downImg":"Descargar imagen","delete":"Borrar","down":"Descargar","title":"Título","notitle":"(Sin título)","keep":"Conservar vista"}')},function(t){t.exports=JSON.parse('{"exception":{"loaderror":"The image could not be loaded.","teselaError":"The request has caused an error in printing. < br / > Please try again.","printError":"Printing has failed."},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","printInfor":"Print generated by Mapea","tooltip":"Download Georeferenced image","referenced":"Georeferenced image","projection":"Projection","downImg":"Download image","delete":"Delete","down":"Download","title":"Title","notitle":"(No title)","keep":"Keep view"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles Georefimage2","encode_method":"La implementación usada no posee el método encodeLayer","loaderror":"La imagen no ha podido ser cargada.","teselaError":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","printError":"Se ha producido un error en la impresión.","imageError":"No ha podido realizarse la descarga en este momento. Por favor, inténtelo más tarde."},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","printInfo":"Impresión generada a través de Mapea","tooltip":"Descargar Imagen georreferenciada","generating":"Generando imagen georreferenciada","referenced":"Imagen georreferenciada","projection":"Proyección","downImg":"Descargar imagen","delete":"Borrar","down":"Descargar","title":"Título","notitle":"(Sin título)","keep":"Conservar vista","cancel":"Cancelar","accept":"Aceptar","download_modal":"El uso de la información de los productos y servicios de datos geográficos definidos en la <a target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Orden FOM/2807/2015</a>, así como sus derivados, conlleva la aceptación por el usuario de las condiciones generales de dicha orden, concretada en la siguiente <a target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">licencia de uso</a>, compatible con CC-BY 4.0.","use_license":"Licencia de uso","map":"Mapa","pnoa":"Imagen (PNOA)","screen":"Imagen Pantalla"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The used implementation cannot create Georefimage2 controls","encode_method":"The used implementation does not have the encodeLayer method","loaderror":"The image could not be loaded.","teselaError":"The request has caused an error in printing. < br / > Please try again.","printError":"Printing has failed.","imageError":"The download could not be completed at this time. Please try again later."},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","printInfor":"Print generated by Mapea","tooltip":"Download Georeferenced image","generating":"Generating georeferenced image","referenced":"Georeferenced image","projection":"Projection","downImg":"Download image","delete":"Delete","down":"Download","title":"Title","notitle":"(No title)","keep":"Keep view","cancel":"Cancel","accept":"Accept","download_modal":"The use of the information of the geographic data products and services defined in the <a target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Order FOM/2807/2015</a>, as well as its derivatives, entails the acceptance by the user of the general conditions of said order, specified in the following <a target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">license of use</a>, compatible with CC-BY 4.0.","use_license":"License of use","map":"Map","pnoa":"Image (PNOA)","screen":"Screen Image"}')},function(t){t.exports=JSON.parse('{"tooltip":"Panel de Comparadores","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","exception":"La implementación usada no puede crear controles IberpixCompareControl","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"Para utilizar esta opción de comparación, debe tener cargadas tantas capas en la herramienta \\"Capas\\" como divisiones haya seleccionado","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","nolayertext":"Ninguna capa","no_coverage":"La capa seleccionada no tiene cobertura en la zona del mapa en la que se encuentra","warning":"Advertencia","print_disabled":"La impresión no está disponible","georef_download_disabled":"La descarga no está disponible","printmap":"Impresión del mapa","georef_download":"Descargar Imagen georreferenciada","no_layer":"Sin capa"}')},function(t){t.exports=JSON.parse('{"tooltip":"IberpixCompare","title":"IberpixCompare","play":"Play","pause":"Pause","exception":"The implementation used cannot create iberpixcompareControl controls","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","layers":"Layehrs","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"In order to use this comparison option, you must have as many layers loaded in the \\"Layers\\" tool as divisions you have selected.","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","nolayertext":"No layer selected","no_coverage":"The selected layer does not have coverage in this area of the map","warning":"Warning","print_disabled":"Printing is not available","georef_download_disabled":"Image download is not available","printmap":"Map Printing","georef_download":"Download Georeferenced image","no_layer":"No layer"}')},function(t){t.exports=JSON.parse('{"exception":{"exists":"No existe dirección asociada para esta ubicación.","results":"No se han encontrado resultados"},"searchresult":"searchresult","tooltip":"Búsqueda de lugares","tooltip_input":"Topónimo, dirección o código postal","deleteresults":"Borrar resultados de la búsqueda","obtener":"Obtener dirección en un punto del mapa","direccion":"Topónimo, dirección o código postal","aprox":"Dirección aproximada","exact":"Dirección exacta"}')},function(t){t.exports=JSON.parse('{"exception":{"exists":"There is no associated address for this location.","results":"No results found"},"searchresult":"searchresult","tooltip":"Search places","tooltip_input":"Place name, address or postal code","deleteresults":"Delete search results","obtener":"Get direction at a point on the map","direccion":"Place name, address or postal code","aprox":"Approximate address","exact":"Exact address"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles InformationControl.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","mapeaerror":"No es posible establecer la conexión con el servidor de Catastro.","noresults":"No se han encontrado resultados","noubi":"No existe dirección asociada para esta ubicación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180."},"informacion":"Información","informacionCatastral":"Información catastral","errorConexion":"No es posible establecer conexión con el servidor de Catastro.","consultar":"Consultar Catastro","description":"Descripción","reference":"Referencia catastral","noReference":"No hay referencia","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE","searchresult":"searchresult","coordinateresult":"coordinateresult","tooltip":"Búsqueda de lugares","tooltip_input":"Topónimo, dirección o código postal","geographic":"Geograficas","zone":"huso","title":"Buscar por coordenadas","titleparcela":"Buscar parcela/catastro","province":"Provincia","municipality":"Municipio","selectmuni":"Seleccione municipio","selectprov":"Seleccione provincia","estate":"Polígono","plot":"Parcela","search":"Buscar","titlerefCatastral":"Búsqueda referencia catastral","refCastatro":"Referencia catastral","placeHolderRC":"Introduzca los 14 ó 20 dígitos de la RC","consultReference":"Consultar Referencia","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","dms":"GMS","dd":"GD","negative":"Nota: Los valores negativos se corresponden con latitud sur y longitud oeste respectivamente","notaRef":"Código de parcela (14 primeros dígitos). Ej.9977715VK3797F (edificio del IGN)","RCnull":"Debe introducir una referencia catastral","direccion":"Topónimo, dirección o código postal","obtener":"Obtener dirección en un punto del mapa","buscparcela":"Buscar parcela/catastro","busccoord":"Buscar por coordenadas","borrarresult":"Borrar resultados de la búsqueda","exact":"Dirección exacta","aprox":"Dirección aproximada","debeprov":"Debe seleccionar una provincia.","debemuni":"Debe seleccionar un municipio.","debepoli":"Debe seleccionar un polígono.","debeparce":"Debe seleccionar una parcela."}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create XYLocatorControl.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","mapeaerror":"It is not possible to establish a connection with the Cadastre server.","noresults":"No results found","noubi":"There is no associated address for this location.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180."},"searchresult":"searchresult","coordinateresult":"coordinateresult","informacion":"Information","informacionCatastral":"Cadastre information","errorConexion":"It is not possible to establish a connection with the Cadastre server.","consultar":"Cadastre information","description":"Description","reference":"Cadastral reference","noReference":"No reference","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES ","tooltip":"Search places","tooltip_input":"Place name, address or postal code","geographic":"Geographic","zone":"zone","title":"Coordinate locator","titleparcela":"Search parcel/cadastre","municipality":"Municipality","selectmuni":"Select a municipality","selectprov":"Select a province","estate":"Polygon","plot":"Parcel","search":"Search","placeHolderRC":"Enter the 14 or 20 digits of the RC","consultReference":"Consult Reference","titlerefCatastral":"Cadastral reference search","refCastatro":"Cadastral reference","province":"Province","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","north":"North","south":"South","east":"East","west":"West","dms":"DMS","dd":"DD","negative":"Note: Negative values​​ correspond to south latitude and west longitude respectively ","notaRef":"Parcel code (first 14 digits). Ex.9977715VK3797F (IGN building)","RCnull":"You must enter a cadastral reference","direccion":"Place name, address or postal code","obtener":"Get direction at a point on the map","buscparcela":"Search parcel/cadastre","busccoord":"Search coordinates","borrarresult":"Delete results","exact":"Exact address","aprox":"Approximate address","debeprov":"You must select a province.","debemuni":"You must select a municipality.","debepoli":"You must select an polygon.","debeparce":"You must select a parcel."}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles VectorsControl.","unknown_geom":"Geometría no reconocida.","format_not_selected":"No se ha seleccionado formato de descarga.","size":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","load":"Error al cargar el fichero.","no_geoms":"No se han detectado geometrías en este fichero.","load_correct":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","extension":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX, GML y GeoJSON.","not_extent":"No se puede obtener la extensión de la capa.","no_features":"Esta capa todavía no tiene ninguna entidad. Añada entidades primero.","query_profile":"No se han podido consultar los datos de altitud para esta entidad.","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","error_features_wfs":"No se han podido cargar features de la capa. Inténtalo aumentando el nivel de zoom en la zona de interés.","error_no_features_wfs":"No se han podido cargar features de la capa. Inténtalo de nuevo en otra zona.","error_wfs":"No se ha podido cargar el servicio WFS","wfs_zoom":"Aumente el nivel de zoom * niveles si quiere añadir este servicio WFS,"},"tooltip":"Notificar incidencia en cartografía","change_name":"Cambiar nombre","close":"Cerrar","info":"Información","warning":"Advertencia","coordinates":"Coordenadas","length":"Longitud","area":"Área","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)","vector_layers":"Capas vectoriales","profile":"Perfil Topográfico","add_point_layer":"Dibujar incidencias puntuales","add_line_layer":"Dibujar incidencias lineales","add_poly_layer":"Dibujar incidencias superficiales","add_wfs_layer":"Añadir capa WFS","load_layer":"Cargar ruta o capa","point_layer":"Capa incidencias puntuales","line_layer":"Capa incidencias lineales","poly_layer":"Capa incidencias superficiales","show_hide":"Ver/Ocultar","add_geom":"Añadir geometría a la incidencia","edit_geom":"Editar geometría de la incidencia","edit_geom_line":"Editar/Perfil","layer_zoom":"Zoom a la incidencia","download_layer":"Descargar capa","notify_err":"Notificar incidencia","delete_layer":"Eliminar incidencia","color":"Color","thickness":"Grosor","line":"Trazo","delete_geom":"Borrar geometría","query_profile":"Perfil topográfico","accepted":"Los formatos aceptados son KML, SHP (.zip), GPX, GML y GeoJSON.","select_file":"Selecciona el fichero","download":"Descargar","notifyerr":"Enviar incidencia","change":"Cambiar","expand":"Mostrar","collapse":"Ocultar","url_service":"URL del servicio","query":"Consultar","clean":"Limpiar búsqueda","select_service":"Selecciona una capa","select":"Seleccionar","loading":"Cargando","cancel":"Cancelar","reload_from_view":"Recargar desde la vista","loaded_services":"Servicios precargados","availables":"Servicios precargados disponibles","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","title":"Título","abstract":"Resumen","responsible":"Responsable","access_constraints":"Restricciones de acceso","symbology":"Simbología","symbology_profile":"Simbología/Perfil","generating_profile":"Generando perfil","calculate":"Calcular","calculating":"Calculando","try_again":"No se ha podido realizar la consulta. Por favor, inténtelo de nuevo más tarde"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create VectorsControl controls.","unknown_geom":"Unrecognized geometry.","format_not_selected":"No download format selected.","size":"The selected file exceeds the maximum 20 MB allowed.","load":"Error when loading the file.","no_geoms":"No geometries have been detected in this file.","load_correct":"Error when loading the file. Check that it is the right file.","extension":"A not allowed file extension has been inserted. The allowed ones are: KML, SHP(.zip), GPX, GML and GeoJSON.","not_extent":"Cannot get the layer extension.","no_features":"This layer does not yet have any entities. Add entities first.","query_profile":"The altitude data for this entity could not be queried.","capabilities":"An error has occurred in obtaining the GetCapabilities document","valid_url":"You must provide a valid URL","empty":"The fields are empty","error_features_wfs":"Unable to load layer features. Try increasing the zoom level in the area of interest.","error_no_features_wfs":"Unable to load layer features. Try again in another area.","error_wfs":"Could not load WFS service","wfs_zoom":"Increase the zoom in * levels if you want to add this WFS service"},"tooltip":"Report error in cartography","change_name":"Change name","close":"Close","info":"Information","warning":"Warning","coordinates":"Coordinates","length":"Length","area":"Area","zmin":"Min. Height","zmax":"Max. Height","altitude":"Height","distance":"Total Dist.","ytitle":"Height (m)","xtitle":"Distance (km)","vector_layers":"Vector layers","profile":"Topographic Profile","add_point_layer":"Drawing points","add_line_layer":"Drawing lines","add_poly_layer":"Drawing polygons","add_wfs_layer":"Add WFS layer","load_layer":"Load route or layer","point_layer":"Point layer","line_layer":"Linear layer","poly_layer":"Polygonal layer","show_hide":"Show/Hide","add_geom":"Add geometry","edit_geom":"Edit geometry","edit_geom_line":"Edit/Profile","layer_zoom":"Zoom to the layer","download_layer":"Download layer","notify_err":"Reporting error","delete_layer":"Remove layer","color":"Color","thickness":"Thickness","line":"Stroke","delete_geom":"Remove geometry","query_profile":"Topographic profile","accepted":"The accepted formats are KML, SHP (.zip), GPX, GML and GeoJSON.","select_file":"Select the file","download":"Download","notifyerr":"Enviar incidencia","change":"Change","expand":"Show","collapse":"Hide","url_service":"Service URL","query":"Consult","clean":"Clean search","select_service":"Select layer","select":"Select","loading":"Loading","cancel":"Cancel","reload_from_view":"Reload from the view","loaded_services":"Preloaded services","availables":"Preloaded services available","show_service_info":"Show service information","hide_service_info":"Hide service information","title":"Title","abstract":"Abstract","responsible":"Responsible","access_constraints":"Access constraints","symbology":"Symbology","symbology_profile":"Symbology/Profile","generating_profile":"Generating profile","calculate":"Calculate","calculating":"Calculating","try_again":"The query could not be executed. Please try again later"}')},function(t){t.exports=JSON.parse('{"tooltip":"Consultar Catastro","informacionCatastral":"Información catastral","errorConexion":"No es posible establecer conexión con el servidor de Catastro.","consultar":"Consultar Catastro","description":"Descripción","reference":"Referencia catastral","noReference":"No hay referencia","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE"}')},function(t){t.exports=JSON.parse('{"tooltip":"Cadastre information","informacionCatastral":"Cadastre information","errorConexion":"It is not possible to establish a connection with the Cadastre server.","consultar":"Cadastre information","description":"Description","reference":"Cadastral reference","noReference":"No reference","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES "}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Infocoordinates"},"tooltip":"Información Coordenadas","title":"Información Coordenadas","point":"Punto:","datum":"Datum:","latitude":"Latitud:","longitude":"Longitud:","formatCoordinates":"GMS","coordX":"Coord.X (m):","coordY":"Coord.Y (m):","altitude":"Altitud (m):","readingAltitude":"Consultando...","noDatafromWCS":"Sin datos","removePoint":"Elimina el punto","removeAllPoints":"Elimina todos los puntos","importAllPoints":"Exportar todos los puntos","displayONAllPoints":"Mostrar coordenadas de todos los puntos","displayOFFAllPoints":"Ocultar coordenadas de todos los puntos"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Infocoordinates controls."},"tooltip":"Coordinates Information","title":"Coordinates Information","point":"Point:","datum":"Datum:","latitude":"Latitude:","longitude":"Longitude:","formatCoordinates":"DMS","coordX":"Coord.X (m):","coordY":"Coord.Y (m):","altitude":"Altitude (m):","readingAltitude":"Reading...","noDatafromWCS":"No data","removePoint":"Removes point","removeAllPoints":"Remove all points","importAllPoints":"Export all points","displayONAllPoints":"Show coordinates of all points","displayOFFAllPoints":"Hide coordinates of all points"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles InformationControl."},"tooltip":"Consultar capas","title":"Información","not_queryable":"No existen capas consultables","querying":"Obteniendo información...","unsupported_format":"Formato no soportado","no_info":"No existe información asociada","info_of":"Información de"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create InformationControl."},"tooltip":"Consult layers","title":"Information","not_queryable":"There are no queryable layers","querying":"Getting information...","unsupported_format":"Unsupported format","no_info":"No associated info","info_of":"Information about"}')},function(t){t.exports=JSON.parse('{"tooltip":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir"}')},function(t){t.exports=JSON.parse('{"tooltip":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","layers":"Layehrs","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated"}')},function(t){t.exports=JSON.parse('{"exception":{"impl_length":"La implementación usada no puede crear controles MeasureLength.","impl_clear":"La implementación usada no puede crear controles MeasureClear.","impl_area":"La implementación usada no puede crear controles MeasureArea"},"text":{"tooltip":"Herramientas de medición","keep_drawing":"Click para continuar dibujando la línea","click_draw":"Click para empezar a dibujar","keep_drawing_area":"Click para continuar dibujando el área","measure_area":"Medir área","delete":"Borrar medidas","measure":"Medir distancias"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl_length":"The implementation used cannot create MeasureLength.","impl_clear":"The implementation used cannot create MeasureClear.","impl_area":"The implementation used cannot create MeasureArea"},"text":{"tooltip":"Measurement tools","keep_drawing":"Click to continue drawing the line","click_draw":"Click to start drawing","keep_drawing_area":"Click to continue drawing the area","measure_area":"Measure area","delete":"Remove measures","measure":"Measuring distances"}}')},function(t){t.exports=JSON.parse('{"tooltip":"Comparador de mapas espejo","title":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","backimglayersparams_undefined":"Los parámetros de BackImgLayers no están definidos correctamente."}')},function(t){t.exports=JSON.parse('{"tooltip":"Mirror Comparison","title":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","backimglayersparams_undefined":"BackImgLayers\' parameters are not defined correctly."}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles MouseSRSControl."},"tooltip":"Coordenadas","select_srs":"Selecciona un sistema de referencia","close":"Cerrar"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create MouseSRSControl."},"tooltip":"Coordinates","select_srs":"Select a reference system","close":"Close"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles OverviewMapControl."},"tooltip":"Mapa de situación"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create OverviewMapControl."},"tooltip":"Overview Map"}')},function(t){t.exports=JSON.parse('{"tooltip":"Más información","exception_popupcontrol":"La implementación usada no puede crear controles PopupControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"More information","exception_popupcontrol":"The implementation used cannot create PopupControl controls"}')},function(t){t.exports=JSON.parse('{"exception_predefinedzoomcontrol":"La implementación usada no puede crear controles PredefinedZoomControl"}')},function(t){t.exports=JSON.parse('{"exception_predefinedzoomcontrol":"The implementation used cannot create controls PredefinedZoomControl"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles PrinterMap.","encode":"La implementación usada no posee el método encodeLayer.","tile":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","error":"Se ha producido un error en la impresión.","imageError":"No ha podido realizarse la descarga en este momento. Por favor, inténtelo más tarde."},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","tooltip":"Impresión del mapa","credits":"Impresión generada a través del api-core","no_title":"(Sin título)","zone":"huso","base":"Cartografía base","title":"Título","description":"Descripción","layout":"Plantilla","format":"Formato","projection":"Proyección","keep":"Conservar vista","geo":"Imagen Georreferenciada","print":"Imprimir","delete":"Borrar","download":"Descargar","minimize":"Minimizar el control de impresión","fototeca":"Este documento carece de validez legal"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create PrinterMap.","encode":"The implementation used cannot use encodeLayer.","tile":"The request for some tile has caused a printing error. <br/>Please try again.","error":"An error has occurred while printing.","imageError":"The download could not be completed at this time. Please try again later."},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","tooltip":"Map Printing","credits":"Print generated through api-core","no_title":"(Untitled)","zone":"zone","base":"Base Cartography","title":"Title","description":"Description","layout":"Layout","format":"Format","projection":"Projection","keep":"Keep view","geo":"Georeferenced Image","print":"Print","delete":"Remove","download":"Download","minimize":"Minimize print control","fototeca":"This document has no legal validity"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles QueryAttributesControl.","no_data":"No hay datos para exportar."},"tooltip":"Tabla de atributos","values":"Valores","attribute_table":"Tabla de atributos","clean_filters":"Limpiar filtros aplicados","export":"Exportar datos","not_attributes":"No se han encontrado atributos.","close":"Cerrar","filters":"Filtros","bbox":"Por vista","area":"Por área","csv":"CSV (sólo atributos)","download":"Descargar","loading":"Cargando datos...","search":"Buscar","filter_by_bbox":"Filtrar resultados por vista actual","filter_by_area":"Filtrar resultados dibujando geometría","show_hide":"Ocultar / Mostrar","information":"Información","search_all_fields":"Búsqueda en todos los campos"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create QueryAttributesControl.","no_data":"No data for export."},"tooltip":"Search by filters","values":"Values","attribute_table":"Table of attributes","clean_filters":"Clean applied filters","export":"Export data","not_attributes":"No attributes found.","close":"Close","filters":"Filters","bbox":"By view","area":"By area","csv":"CSV (only attributes)","download":"Download","loading":"Loading information...","search":"Search","filter_by_bbox":"Filter results by current view","filter_by_area":"Filter results by drawing geometry","show_hide":"Hide / Show","information":"Information","search_all_fields":"Search over all fields"}')},function(t){t.exports=JSON.parse('{"tooltip":"Cambiar escala","insertscale":"Introducir escala"}')},function(t){t.exports=JSON.parse('{"tooltip":"Change scale","insertscale":"Insert scale"}')},function(t){t.exports=JSON.parse('{"tooltip":"Búsqueda por geometría","exception_selectiondrawcontrol":"La implementación usada no puede crear controles SelectionDrawImplControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"Search by geometry","exception_selectiondrawcontrol":"The implementation used cannot create SelectionDrawImplControl controls"}')},function(t){t.exports=JSON.parse('{"tooltip":"Vistas predefinidas"}')},function(t){t.exports=JSON.parse('{"tooltip":"Default views"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"title":"Compartir URL","text":"HTML embebido","copy":"Copiar","tooltip":"¡Copiado!","tooltipPanel":"Compartir"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"title":"Share URL","text":"Embedded HTML","copy":"Copy","tooltip":"Copied!","tooltipPanel":"Share"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles StyleManager.","geomNotSupported":"Geometría no soportada","attributeAdded":"El atributo ya se ha agregado.","repeatedVariable":"Nombre de variable repetido","variableName":"No existe ninguna variable con ese nombre.","incorrectName":"Nombre de variable incorrecto.","emptyString":"No está permitido introducir una cadena vacía.","emptyVariable":"Nombre de variable vacía.","moreColorsRanges":"No pueden existir más colores que rangos.","numberColors":"Número de colores incorrecto.","chooseStyle":"Debe elegir al menos un estilo","choStyle":"Elija estilo","layerNoFeaturesLoad":"La capa no tiene features o aún no se han cargado.","chooseLayer":"Tiene que elegir una capa","choLayer":"Elija capa","numberColorAllowed":"Ha llegado al número máximo de colores permitidos","information":"Información"},"selectLayer":"Seleccione una capa...","applyStyle":"Aplicar estilo","clearStyle":"Limpiar estilo","symbology":"Simbología","heatMap":"Mapa de calor","category":"Categoría","choropleths":"Coropleta","proportional":"Proporcional","statistic":"Estadísticos","attributeValue":"Valor de atributo","preview":"Previsualización","others":"Otros","type":"Tipo","options":"Opciones","pointOptions":"Opciones de punto","lineOptions":"Opciones de línea","polygonOptions":"Opciones de polígono","opacity":"Opacidad","radius":"Radio","width":"Ancho","pattern":"Patrón","size":"Tamaño","space":"Espacio","rotation":"Rotación","scale":"Escala","none":"Ninguno","text":"Texto","font":"Fuente","horizontalAlignment":"Alineación horizontal","verticalAlignment":"Alineación vertical","enableRotation":"Habilitar rotación con el mapa","fitGeometry":"Ajustar a geometría","minimumWidth":"Ancho Mínimo","smooth":"Suavizar","overflow":"Desbordar","hidden":"Oculto","visible":"Visible","ellipsis":"Puntos suspensivos","labelStroke":"Trazo de la etiqueta","label":"Trazo","anchorage":"Anclaje","form":"Forma","family":"Familia","iconSize":"Tamaño icono","gradient":"Gradiente","iconColor":"Color de icono","legend":"Leyenda","showLabel":"Mostrar etiqueta","fill":"Relleno","border":"Borde","bulk":"Grosor","attributes":"Atributos","attribute":"Atributo","minimumRadius":"Radio mínimo","maximumRadius":"Radio máximo","addColor":"Añadir color","blur":"Difuminado","ranks":"Rangos","rank":"Rango","numberRanks":"Número de rangos","since":"Desde","until":"Hasta","envelope":"Envoltura","quantity":"Cantidad","selectable":"Seleccionable","animated":"Animado","distance":"Distancia","points":"Puntos","fanDistance":"Distancia de abanico","textColor":"Color de texto","algorithm":"Algoritmo","arithmeticProgression":"Progresión aritmética","equalIntervals":"Intervalos iguales","geometricProgression":"Progresión geométrica","meanSigma":"Media sigma","naturalBreaks":"Rupturas naturales","quantile":"Cuantil","colorRamp":"Rampa de color","initial":"Inicial","final":"Final","cake":"Tarta","tDcake":"Tarta 3D","donut":"Donut","graphic":"Gráfico","classic":"Clásico","dark":"Oscuro","pale":"Pálido","neon":"Neón","pie":"Pastel","xAxis":"Eje X","yAxis":"Eje Y","addAttribute":"Añadir atributo","bevel":"Bisel","miter":"Inglete","rounded":"Redondeado","extreme":"Extremo","square":"Cuadrado","labelText":"Etiqueta","icon":"Icono","stroke":"Trazo","center":"Centro","justified":"Justificado","left":"Izquierda","right":"Derecha","alphabetical":"Alfabetico","down":"Abajo","hanging":"Colgando","ideographic":"Ideografico","up":"Arriba","patternOptions":"Opciones de patrón","adjust":"Ajustar","ranges":"Rangos","flowLine":"Línea de flujo","absolute":"Absoluto","arrow":"Flecha","arrowColor":"Color flecha"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create StyleManager controls.","geomNotSupported":"Geometry not supported","attributeAdded":"Attribute has already been added.","repeatedVariable":"Repeated variable name","variableName":"No variable with that name exists.","incorrectName":"Incorrect variable name.","emptyString":"It is not allowed to enter an empty string.","emptyVariable":"Empty variable name.","moreColorsRanges":"There cannot be more colors than ranges.","numberColors":"Incorrect number of colors.","chooseStyle":"You must choose at least one style","choStyle":"Choose style","layerNoFeaturesLoad":"The layer has no features or they have not been loaded yet.","chooseLayer":"You have to choose a layer","choLayer":"Choose layer","numberColorAllowed":"You have reached the maximum number of colors allowed","information":"Information"},"selectLayer":"Select a layer...","applyStyle":"Apply Style","clearStyle":"Clear Style","symbology":"Symbology","heatMap":"Heat Map","category":"Category","choropleths":"Choroplet","proportional":"Proportional","statistic":"Statistics","attributeValue":"Attribute Value","preview":"Preview","others":"Others","type":"Type","options":"Options","pointOptions":"Point Options","lineOptions":"Line Options","polygonOptions":"Polygon Options","opacity":"Opacity","radius":"Radius","width":"Width","pattern":"Pattern","size":"Size","space":"Space","rotation":"Rotation","scale":"Scale","none":"None","text":"Text","font":"Font","horizontalAlignment":"Horizontal Alignment","verticalAlignment":"Vertical Alignment","enableRotation":"Enable rotation with the map","fitGeometry":"Fit Geometry","minimumWidth":"Minimum Width","smooth":"Smooth","overflow":"Overflow","hidden":"Hidden","visible":"Visible","ellipsis":"Ellipsis","labelStroke":"Label Stroke","label":"Stroke","anchorage":"Anchorage","form":"Form","family":"Family","iconSize":"Icon size","gradient":"Gradient","iconColor":"Icon Color","legend":"Legend","showLabel":"Show Label","fill":"Fill","border":"Border","bulk":"Thickness","attributes":"Attributes","attribute":"Attribute","minimumRadius":"Minimum radius","maximumRadius":"Maximum Radius","addColor":"Add Color","blur":"Blur","ranks":"Ranks","rank":"Rank","numberRanks":"Number of ranks","since":"Since","until":"Until","envelope":"Envelope","quantity":"Quantity","selectable":"Selectable","animated":"Animated","distance":"Distance","points":"Points","fanDistance":"Fan Distance","textColor":"Text Color","algorithm":"Algorithm","arithmeticProgression":"Arithmetic Progression","equalIntervals":"Equal Intervals","geometricProgression":"Geometric Progression","meanSigma":"Mean Sigma","naturalBreaks":"Natural Breaks","quantile":"Quantile","colorRamp":"Color Ramp","initial":"Initial","final":"Final","cake":"Cake","tDcake":"3D Cake","donut":"Donut","graphic":"Graphic","classic":"Classic","dark":"Dark","pale":"Pale","neon":"Neon","pie":"Cake","xAxis":"X axis","yAxis":"Y axis","addAttribute":"Add Attribute","bevel":"Bezel","miter":"Miter","rounded":"Rounded","extreme":"Extreme","square":"Square","labelText":"Label","icon":"Icon","stroke":"Stroke","center":"Center","justified":"Justified","left":"Left","right":"Right","alphabetical":"Alphabetical","down":"Down","hanging":"Hanging","ideographic":"Ideographic","up":"Up","patternOptions":"Pattern options","adjust":"Adjust","ranges":"Ranges","flowLine":"Flowline","absolute":"Absolute","arrow":"Arrow","arrowColor":"Arrow color"}')},function(t){t.exports=JSON.parse('{"tooltip":"Línea de tiempo","title":"Línea de tiempo","play":"Iniciar","pause":"Parar","excepcion":"La implementación usada no puede crear controles TimelineControl","intervals_error":"Los intervalos no fueron definidos correctamente"}')},function(t){t.exports=JSON.parse('{"tooltip":"Timeline","title":"Timeline","play":"Play","pause":"Pause","excepcion":"The implementation used cannot create timelineControl controls","intervals_error":"The intervals were not defined correctly"}')},function(t){t.exports=JSON.parse('{"tooltip":"Capas","capas":"Capas"}')},function(t){t.exports=JSON.parse('{"tooltip":"Layers","capas":"Layers"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Perfiltopografico."},"tooltip":"Perfil Topográfico","title":"Perfil Topográfico","profil":{"title":"Perfil Topográfico","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Perfiltopografico controls."},"tooltip":"Topography Profile","title":"Topography Profile","profil":{"title":"Topographic Profile","zmin":"Min Alt.","zmax":"Max Alt.","altitude":"Alt.","distance":"Full Distance","ytitle":"Altitude (m)","xtitle":"Distance (km)"}}')},function(t){t.exports=JSON.parse('{"tooltip":"Transparencia","layers":"Capas","radius":"Radio","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","excepcion":"La implementación usada no puede crear controles TransparencyControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"Transparency","layers":"Layers","radius":"Radius","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","excepcion":"The implementation used cannot create TransparencyControl controls"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles VectorsControl.","unknown_geom":"Geometría no reconocida.","format_not_selected":"No se ha seleccionado formato de descarga.","size":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","load":"Error al cargar el fichero.","no_geoms":"No se han detectado geometrías en este fichero.","load_correct":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","extension":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX, GML y GeoJSON.","not_extent":"No se puede obtener la extensión de la capa.","no_features":"Esta capa todavía no tiene ninguna entidad. Añada entidades primero.","query_profile":"No se han podido consultar los datos de altitud para esta entidad.","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","error_features_wfs":"No se han podido cargar features de la capa. Inténtalo aumentando el nivel de zoom en la zona de interés.","error_no_features_wfs":"No se han podido cargar features de la capa. Inténtalo de nuevo en otra zona.","error_wfs":"No se ha podido cargar el servicio WFS","wfs_zoom":"Aumente el nivel de zoom * niveles si quiere añadir este servicio WFS","url_not_valid":"La URL introducida no es válida"},"tooltip":"Rutas y Capas Vectoriales","change_name":"Cambiar nombre","close":"CERRAR","info":"Información","warning":"Advertencia","coordinates":"Coordenadas","length":"Longitud","area":"Área","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)","vector_layers":"Capas vectoriales","profile":"Perfil Topográfico","add_point_layer":"Puntos","add_line_layer":"Rutas / Líneas","add_poly_layer":"Polígonos","add_wfs_layer":"Añadir capa WFS","load_layer":"Cargar ruta o capa","point_layer":"Capa puntual","line_layer":"Capa lineal","poly_layer":"Capa poligonal","show_hide":"Ver/Ocultar","add_geom":"Añadir geometría","edit_geom":"Editar geometría","edit_geom_line":"Editar/Perfil","layer_zoom":"Zoom a la capa","download_layer":"Descargar capa","delete_layer":"Eliminar capa","color":"Color","thickness":"Grosor","line":"Trazo","delete_geom":"Borrar geometría","query_profile":"Perfil topográfico","accepted":"Los formatos aceptados son KML, SHP (.zip), GPX, GML y GeoJSON.","select_file":"Selecciona el fichero","download":"Descargar","change":"Cambiar","expand":"Mostrar","collapse":"Ocultar","url_service":"URL del servicio","query":"Consultar","clean":"Limpiar búsqueda","select_service":"Selecciona una capa","select":"Seleccionar","loading":"Cargando","cancel":"Cancelar","reload_from_view":"Recargar desde la vista","loaded_services":"Servicios precargados","availables":"Servicios precargados disponibles","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","title":"Título","abstract":"Resumen","responsible":"Responsable","access_constraints":"Restricciones de acceso","symbology":"Simbología","symbology_profile":"Simbología/Perfil","generating_profile":"Generando perfil","calculate":"Calcular","calculating":"Calculando","try_again":"No se ha podido realizar la consulta. Por favor, inténtelo de nuevo más tarde","from_url":"Desde URL","url_layer":"URL del fichero","add_layer":"Añadir capa","add_from_url":"Añadir capa desde URL","add_points":"Añadir puntos"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create VectorsControl controls.","unknown_geom":"Unrecognized geometry.","format_not_selected":"No download format selected.","size":"The selected file exceeds the maximum 20 MB allowed.","load":"Error when loading the file.","no_geoms":"No geometries have been detected in this file.","load_correct":"Error when loading the file. Check that it is the right file.","extension":"A not allowed file extension has been inserted. The allowed ones are: KML, SHP(.zip), GPX, GML and GeoJSON.","not_extent":"Cannot get the layer extension.","no_features":"This layer does not yet have any entities. Add entities first.","query_profile":"The altitude data for this entity could not be queried.","capabilities":"An error has occurred in obtaining the GetCapabilities document","valid_url":"You must provide a valid URL","empty":"The fields are empty","error_features_wfs":"Unable to load layer features. Try increasing the zoom level in the area of interest.","error_no_features_wfs":"Unable to load layer features. Try again in another area.","error_wfs":"Could not load WFS service","wfs_zoom":"Increase the zoom in * levels if you want to add this WFS service","url_not_valid":"The entered URL is not valid"},"tooltip":"Routes and vector layers","change_name":"Change name","close":"CLOSE","info":"Information","warning":"Warning","coordinates":"Coordinates","length":"Length","area":"Area","zmin":"Min. Height","zmax":"Max. Height","altitude":"Height","distance":"Total Dist.","ytitle":"Height (m)","xtitle":"Distance (km)","vector_layers":"Vector layers","profile":"Topographic Profile","add_point_layer":"Points","add_line_layer":"Routes / Lines","add_poly_layer":"Polygons","add_wfs_layer":"Add WFS layer","load_layer":"Load route or layer","point_layer":"Point layer","line_layer":"Linear layer","poly_layer":"Polygonal layer","show_hide":"Show/Hide","add_geom":"Add geometry","edit_geom":"Edit geometry","edit_geom_line":"Edit/Profile","layer_zoom":"Zoom to the layer","download_layer":"Download layer","delete_layer":"Remove layer","color":"Color","thickness":"Thickness","line":"Stroke","delete_geom":"Remove geometry","query_profile":"Topographic profile","accepted":"The accepted formats are KML, SHP (.zip), GPX, GML and GeoJSON.","select_file":"Select the file","download":"Download","change":"Change","expand":"Show","collapse":"Hide","url_service":"Service URL","query":"Consult","clean":"Clean search","select_service":"Select layer","select":"Select","loading":"Loading","cancel":"Cancel","reload_from_view":"Reload from the view","loaded_services":"Preloaded services","availables":"Preloaded services available","show_service_info":"Show service information","hide_service_info":"Hide service information","title":"Title","abstract":"Abstract","responsible":"Responsible","access_constraints":"Access constraints","symbology":"Symbology","symbology_profile":"Symbology/Profile","generating_profile":"Generating profile","calculate":"Calculate","calculating":"Calculating","try_again":"The query could not be executed. Please try again later","from_url":"From URL","url_layer":"File URL","add_layer":"Add layer","add_from_url":"Add layer from URL","add_points":"Add points"}')},function(t){t.exports=JSON.parse('{"nextView":"Vista siguiente","previousView":"Vista anterior"}')},function(t){t.exports=JSON.parse('{"nextView":"Next View","previousView":"Previous View"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles XYLocatorControl.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180."},"coordinateresult":"coordinateresult","tooltip":"Buscar por coordenadas","geographic":"Geograficas","zone":"huso","title":"Localizador por coordenadas","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","clean":"Limpiar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","dms":"GMS","dd":"GD"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create XYLocatorControl.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180."},"coordinateresult":"coordinateresult","tooltip":"Search by coordinates","geographic":"Geographic","zone":"zone","title":"Coordinate locator","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","clean":"Clean","north":"North","south":"South","east":"East","west":"West","dms":"DMS","dd":"DD"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles ZoomExtentControl."},"tooltip":"Zoom al recuadro"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create ZoomExtentControl."},"tooltip":"Zoom to box"}')},function(t){t.exports=JSON.parse('{"tooltip":"Herramientas de zoom","zoomin":"Aumentar zoom","zoomout":"Disminuir zoom","previouszoom":"Zoom anterior","nextzoom":"Zoom posterior","rectzoom":"Zoom ventana","zoom_extent":"Zoom a la extensión del mapa"}')},function(t){t.exports=JSON.parse('{"tooltip":"Zoom tools","zoomin":"Zoom In","zoomout":"Zoom Out","previouszoom":"Previous history","nextzoom":"Next history","rectzoom":"Rectangular zoom","zoom_extent":"Zoom to the map extension"}')},function(t){t.exports=JSON.parse('{"tooltip":"Calcular área de visibilidad","calculating":"Realizando geoproceso de análisis","warning":"Advertencia","outbox":"Las coordenadas no están dentro del ámbito de cálculo","error_query":"No se ha podido realizar la consulta","active_viewshed":"Hacer click en punto del mapa","clear":"Limpiar resultado"}')},function(t){t.exports=JSON.parse('{"tooltip":"Calculate visibility area","calculating":"Performing geoprocessing analysis","warning":"Warning","outbox":"he coordinates are not within the calculation range","error_query":"Unable to perform query","active_viewshed":"Click a point on the map","clear":"Clean result"}')},function(t,e){t.exports='<div class="m-label-content">\n   {{{info}}}\n</div>'},function(t,e){t.exports='<div class="m-dialog {{severity}}">\n   <div class="m-modal">\n      <div class="m-content">\n         <div class="m-title">\n            <i class="m-icon"></i>\n            <span>{{{title}}}</span>\n         </div>\n         <div class="m-message">{{{message}}}</div>\n         <div class="m-button">\n            <button>OK</button>\n         </div>\n      </div>\n   </div>\n</div>'},function(t,e){t.exports='<div class="m-getfeatureinfo-content">\n   {{{info}}}\n</div>'},function(t,e){t.exports="  {{#each layers}}\n      <div class='m-getfeatureinfo-content-info'>\n          <div class='m-getfeatureinfo-content-info-header'>\n              <div class=\"m-arrow-right\"></div>\n              <div>\n                  <p> {{../info_of}} <strong>{{layerName}}</strong></p>\n              </div>\n          </div>\n          <div class='m-getfeatureinfo-content-info-body m-content-collapsed'>\n              {{{formatedInfo}}}\n          </div>\n      </div>\n  {{/each}}"},function(t,e){t.exports='<div class="m-control m-location-container" title="{{title}}">\n    <button id="m-location-button" class="g-cartografia-gps2"></button>\n</div>'},function(t,e){t.exports='<div class="m-control m-scale-container" title="{{title}}">\n    <div class="m-level">{{level}} </div>\n    <div id="m-level-number"></div>\n    <span class="m-scale-separator"> | </span>\n    <div class="m-unit">{{scale}} = 1 : </div>\n    <div class="m-scale" id="m-scale-span"></div>\n</div>\n'},function(t,e){t.exports='<div class="m-control m-rotate-container">\n    <button id="m-rotate-button" class="g-cartografia-brujula-norte" title="{{title}}"></button>\n</div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div id="div-contenedor" class="m-control m-container m-background">\n    {{#each layers}}\n        <button class="m-background-group-btn" id="m-baselayerselector-{{this.id}}" title="Selección de capa de fondo">{{{this.title}}}</button>\n    {{/each}}\n    <button class="m-background-unique-btn" id="m-baselayerselector-unique-btn" title="Selección de capa de fondo"></button>\n</div>'},function(t,e){t.exports='<div class="m-kml-content">\n   <p class="m-kml-name">{{{name}}}</p>\n   <div class="m-kml-desc">{{{desc}}}</div>\n</div>'},function(t,e,r){"use strict";t.exports=i;var n=r(60);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function l(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&o?function(t,e,r){return o.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){var n="",i=e;for(;i<r;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>r)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=a(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&u(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&u(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e){t.exports='<div class="m-panel">\n   <button class="m-panel-btn"></button>\n   <div class="m-panel-controls"></div>\n</div>'},function(t,e,r){(function(t,e,n,i){var o=void 0,a=function(a){return o||(o=new Promise((function(o,s){var u,l=void 0!==a?a:{},c=l.onAbort;l.onAbort=function(t){s(new Error(t)),c&&c(t)},l.postRun=l.postRun||[],l.postRun.push((function(){o(l)})),t=void 0,u||(u=void 0!==l?l:{}),u.onRuntimeInitialized=function(){function t(t,e){switch(typeof e){case"boolean":X(t,e?1:0);break;case"number":W(t,e);break;case"string":Z(t,e,-1,-1);break;case"object":if(null===e)Y(t);else if(null!=e.length){var r=Te(e);H(t,r,e.length,-1),Ce(r)}else K(t,"Wrong API use : tried to return a value of an unknown type ("+e+").",-1);break;default:Y(t)}}function e(t,e){for(var r=[],n=0;n<t;n+=1){var i=it(e+4*n,"i32"),o=F(i);if(1===o||2===o)i=V(i);else if(3===o)i=q(i);else if(4===o){i=G(o=i),o=U(o);for(var a=new Uint8Array(i),s=0;s<i;s+=1)a[s]=P[o+s];i=a}else i=null;r.push(i)}return r}function r(t,e){this.La=t,this.db=e,this.Ja=1,this.fb=[]}function n(t,e){if(this.db=e,e=z(t)+1,this.Ya=Le(e),null===this.Ya)throw Error("Unable to allocate memory for the SQL string");B(t,I,this.Ya,e),this.eb=this.Ya,this.Ua=this.ib=null}function i(t){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=t){var e=this.filename,r="/",n=e;if(r&&(r="string"==typeof r?r:Rt(r),n=e?st(r+"/"+e):r),e=le(!0,!0),n=Wt(n,4095&(void 0!==e?e:438)|32768,0),t){if("string"==typeof t){r=Array(t.length);for(var i=0,a=t.length;i<a;++i)r[i]=t.charCodeAt(i);t=r}te(n,146|e),r=re(n,577),ae(r,t,0,t.length,0),ne(r),te(n,e)}}this.handleError(s(this.filename,o)),this.db=it(o,"i32"),$(this.db),this.Za={},this.Na={}}var o=De(4),a=u.cwrap,s=a("sqlite3_open","number",["string","number"]),l=a("sqlite3_close_v2","number",["number"]),c=a("sqlite3_exec","number",["number","string","number","number","number"]),h=a("sqlite3_changes","number",["number"]),f=a("sqlite3_prepare_v2","number",["number","string","number","number","number"]),p=a("sqlite3_sql","string",["number"]),d=a("sqlite3_normalized_sql","string",["number"]),m=a("sqlite3_prepare_v2","number",["number","number","number","number","number"]),y=a("sqlite3_bind_text","number",["number","number","number","number","number"]),g=a("sqlite3_bind_blob","number",["number","number","number","number","number"]),v=a("sqlite3_bind_double","number",["number","number","number"]),_=a("sqlite3_bind_int","number",["number","number","number"]),b=a("sqlite3_bind_parameter_index","number",["number","string"]),w=a("sqlite3_step","number",["number"]),x=a("sqlite3_errmsg","string",["number"]),M=a("sqlite3_column_count","number",["number"]),S=a("sqlite3_data_count","number",["number"]),E=a("sqlite3_column_double","number",["number","number"]),O=a("sqlite3_column_text","string",["number","number"]),T=a("sqlite3_column_blob","number",["number","number"]),k=a("sqlite3_column_bytes","number",["number","number"]),R=a("sqlite3_column_type","number",["number","number"]),L=a("sqlite3_column_name","string",["number","number"]),C=a("sqlite3_reset","number",["number"]),A=a("sqlite3_clear_bindings","number",["number"]),N=a("sqlite3_finalize","number",["number"]),j=a("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),F=a("sqlite3_value_type","number",["number"]),G=a("sqlite3_value_bytes","number",["number"]),q=a("sqlite3_value_text","string",["number"]),U=a("sqlite3_value_blob","number",["number"]),V=a("sqlite3_value_double","number",["number"]),W=a("sqlite3_result_double","",["number","number"]),Y=a("sqlite3_result_null","",["number"]),Z=a("sqlite3_result_text","",["number","string","number","number"]),H=a("sqlite3_result_blob","",["number","number","number","number"]),X=a("sqlite3_result_int","",["number","number"]),K=a("sqlite3_result_error","",["number","string","number"]),J=a("sqlite3_aggregate_context","number",["number","number"]),$=a("RegisterExtensionFunctions","number",["number"]);r.prototype.bind=function(t){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(t)?this.xb(t):null==t||"object"!=typeof t||this.yb(t)},r.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var t=w(this.La);switch(t){case 100:return!0;case 101:return!1;default:throw this.db.handleError(t)}},r.prototype.sb=function(t){return null==t&&(t=this.Ja,this.Ja+=1),E(this.La,t)},r.prototype.Cb=function(t){if(null==t&&(t=this.Ja,this.Ja+=1),t=O(this.La,t),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(t)},r.prototype.Db=function(t){return null==t&&(t=this.Ja,this.Ja+=1),O(this.La,t)},r.prototype.getBlob=function(t){null==t&&(t=this.Ja,this.Ja+=1);var e=k(this.La,t);t=T(this.La,t);for(var r=new Uint8Array(e),n=0;n<e;n+=1)r[n]=P[t+n];return r},r.prototype.get=function(t,e){e=e||{},null!=t&&this.bind(t)&&this.step(),t=[];for(var r=S(this.La),n=0;n<r;n+=1)switch(R(this.La,n)){case 1:var i=e.useBigInt?this.Cb(n):this.sb(n);t.push(i);break;case 2:t.push(this.sb(n));break;case 3:t.push(this.Db(n));break;case 4:t.push(this.getBlob(n));break;default:t.push(null)}return t},r.prototype.getColumnNames=function(){for(var t=[],e=M(this.La),r=0;r<e;r+=1)t.push(L(this.La,r));return t},r.prototype.getAsObject=function(t,e){t=this.get(t,e),e=this.getColumnNames();for(var r={},n=0;n<e.length;n+=1)r[e[n]]=t[n];return r},r.prototype.getSQL=function(){return p(this.La)},r.prototype.getNormalizedSQL=function(){return d(this.La)},r.prototype.run=function(t){return null!=t&&this.bind(t),this.step(),this.reset()},r.prototype.nb=function(t,e){null==e&&(e=this.Ja,this.Ja+=1);var r=Te(t=ht(t));this.fb.push(r),this.db.handleError(y(this.La,e,r,t.length-1,0))},r.prototype.wb=function(t,e){null==e&&(e=this.Ja,this.Ja+=1);var r=Te(t);this.fb.push(r),this.db.handleError(g(this.La,e,r,t.length,0))},r.prototype.mb=function(t,e){null==e&&(e=this.Ja,this.Ja+=1),this.db.handleError((t===(0|t)?_:v)(this.La,e,t))},r.prototype.zb=function(t){null==t&&(t=this.Ja,this.Ja+=1),g(this.La,t,0,0,0)},r.prototype.ob=function(t,e){switch(null==e&&(e=this.Ja,this.Ja+=1),typeof t){case"string":return void this.nb(t,e);case"number":return void this.mb(t,e);case"bigint":return void this.nb(t.toString(),e);case"boolean":return void this.mb(t+0,e);case"object":if(null===t)return void this.zb(e);if(null!=t.length)return void this.wb(t,e)}throw"Wrong API use : tried to bind a value of an unknown type ("+t+")."},r.prototype.yb=function(t){var e=this;return Object.keys(t).forEach((function(r){var n=b(e.La,r);0!==n&&e.ob(t[r],n)})),!0},r.prototype.xb=function(t){for(var e=0;e<t.length;e+=1)this.ob(t[e],e+1);return!0},r.prototype.reset=function(){return this.freemem(),0===A(this.La)&&0===C(this.La)},r.prototype.freemem=function(){for(var t;void 0!==(t=this.fb.pop());)Ce(t)},r.prototype.free=function(){this.freemem();var t=0===N(this.La);return delete this.db.Za[this.La],this.La=0,t},n.prototype.next=function(){if(null===this.Ya)return{done:!0};if(null!==this.Ua&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var t=je(),e=De(4);ot(o),ot(e);try{this.db.handleError(m(this.db.db,this.eb,-1,o,e)),this.eb=it(e,"i32");var n=it(o,"i32");return 0===n?(this.gb(),{done:!0}):(this.Ua=new r(n,this.db),this.db.Za[n]=this.Ua,{value:this.Ua,done:!1})}catch(t){throw this.ib=D(this.eb),this.gb(),t}finally{Fe(t)}},n.prototype.gb=function(){Ce(this.Ya),this.Ya=null},n.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:D(this.eb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(t,e){if(!this.db)throw"Database closed";if(e){t=this.prepare(t,e);try{t.step()}finally{t.free()}}else this.handleError(c(this.db,t,0,0,o));return this},i.prototype.exec=function(t,e,n){if(!this.db)throw"Database closed";var i=je(),a=null;try{var s=z(t)+1,u=De(s);B(t,P,u,s);var l=u,c=De(4);for(t=[];0!==it(l,"i8");){ot(o),ot(c),this.handleError(m(this.db,l,-1,o,c));var h=it(o,"i32");if(l=it(c,"i32"),0!==h){for(s=null,a=new r(h,this),null!=e&&a.bind(e);a.step();)null===s&&(s={columns:a.getColumnNames(),values:[]},t.push(s)),s.values.push(a.get(null,n));a.free()}}return t}catch(t){throw a&&a.free(),t}finally{Fe(i)}},i.prototype.each=function(t,e,r,n,i){"function"==typeof e&&(n=r,r=e,e=void 0),t=this.prepare(t,e);try{for(;t.step();)r(t.getAsObject(null,i))}finally{t.free()}if("function"==typeof n)return n()},i.prototype.prepare=function(t,e){if(ot(o),this.handleError(f(this.db,t,-1,o,0)),0===(t=it(o,"i32")))throw"Nothing to prepare";var n=new r(t,this);return null!=e&&n.bind(e),this.Za[t]=n},i.prototype.iterateStatements=function(t){return new n(t,this)},i.prototype.export=function(){Object.values(this.Za).forEach((function(t){t.free()})),Object.values(this.Na).forEach(Oe),this.Na={},this.handleError(l(this.db));var t=se(this.filename);return this.handleError(s(this.filename,o)),this.db=it(o,"i32"),t},i.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach((function(t){t.free()})),Object.values(this.Na).forEach(Oe),this.Na={},this.handleError(l(this.db)),Kt("/"+this.filename),this.db=null)},i.prototype.handleError=function(t){if(0===t)return null;throw t=x(this.db),Error(t)},i.prototype.getRowsModified=function(){return h(this.db)},i.prototype.create_function=function(r,n){Object.prototype.hasOwnProperty.call(this.Na,r)&&(Oe(this.Na[r]),delete this.Na[r]);var i=Ee((function(r,i,o){i=e(i,o);try{var a=n.apply(null,i)}catch(t){return void K(r,t,-1)}t(r,a)}),"viii");return this.Na[r]=i,this.handleError(j(this.db,r,n.length,1,0,i,0,0,0)),this},i.prototype.create_aggregate=function(r,n){var i=n.init||function(){return null},o=n.finalize||function(t){return t},a=n.step;if(!a)throw"An aggregate function must have a step function in "+r;var s={};Object.hasOwnProperty.call(this.Na,r)&&(Oe(this.Na[r]),delete this.Na[r]),n=r+"__finalize",Object.hasOwnProperty.call(this.Na,n)&&(Oe(this.Na[n]),delete this.Na[n]);var u=Ee((function(t,r,n){var o=J(t,1);Object.hasOwnProperty.call(s,o)||(s[o]=i()),r=e(r,n),r=[s[o]].concat(r);try{s[o]=a.apply(null,r)}catch(e){delete s[o],K(t,e,-1)}}),"viii"),l=Ee((function(e){var r=J(e,1);try{var n=o(s[r])}catch(t){return delete s[r],void K(e,t,-1)}t(e,n),delete s[r]}),"vi");return this.Na[r]=u,this.Na[n]=l,this.handleError(j(this.db,r,a.length-1,1,0,0,u,l,0)),this},u.Database=i};var h,f,p,d,m,y,g=Object.assign({},u),v="./this.program",_="object"==typeof window,b="function"==typeof importScripts,w="object"==typeof e&&"object"==typeof e.versions&&"string"==typeof e.versions.node,x="";w?(x=b?r(62).dirname(x)+"/":n+"/",y=()=>{m||(d=r(232),m=r(62))},h=function(t,e){return y(),t=m.normalize(t),d.readFileSync(t,e?void 0:"utf8")},p=t=>((t=h(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,r)=>{y(),t=m.normalize(t),d.readFile(t,(function(t,n){t?r(t):e(n.buffer)}))},1<e.argv.length&&(v=e.argv[1].replace(/\\/g,"/")),e.argv.slice(2),t.exports=u,u.inspect=function(){return"[Emscripten Module object]"}):(_||b)&&(b?x=self.location.href:"undefined"!=typeof document&&document.currentScript&&(x=document.currentScript.src),x=0!==x.indexOf("blob:")?x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):"",h=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},b&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?e(n.response):r()},n.onerror=r,n.send(null)});var M,S=u.print||console.log.bind(console),E=u.printErr||console.warn.bind(console);Object.assign(u,g),g=null,u.thisProgram&&(v=u.thisProgram),u.wasmBinary&&(M=u.wasmBinary);u.noExitRuntime;"object"!=typeof WebAssembly&&Q("no native wasm support detected");var O,T,P,I,k,R,L,C,A,N=!1,j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function F(t,e,r){var n=e+r;for(r=e;t[r]&&!(r>=n);)++r;if(16<r-e&&t.buffer&&j)return j.decode(t.subarray(e,r));for(n="";e<r;){var i=t[e++];if(128&i){var o=63&t[e++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var a=63&t[e++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&t[e++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else n+=String.fromCharCode(i)}return n}function D(t,e){return t?F(I,t,e):""}function B(t,e,r,n){if(!(0<n))return 0;var i=r;n=r+n-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&57343>=a)a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o);if(127>=a){if(r>=n)break;e[r++]=a}else{if(2047>=a){if(r+1>=n)break;e[r++]=192|a>>6}else{if(65535>=a){if(r+2>=n)break;e[r++]=224|a>>12}else{if(r+3>=n)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63}e[r++]=128|a>>6&63}e[r++]=128|63&a}}return e[r]=0,r-i}function z(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);127>=n?e++:2047>=n?e+=2:55296<=n&&57343>=n?(e+=4,++r):e+=3}return e}function G(){var t=O.buffer;T=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=k=new Int16Array(t),u.HEAP32=R=new Int32Array(t),u.HEAPU8=I=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=L=new Uint32Array(t),u.HEAPF32=C=new Float32Array(t),u.HEAPF64=A=new Float64Array(t)}var q,U=[],V=[],W=[];function Y(){var t=u.preRun.shift();U.unshift(t)}var Z,H,X,K=0,J=null,$=null;function Q(t){throw u.onAbort&&u.onAbort(t),E(t="Aborted("+t+")"),N=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}function tt(){return Z.startsWith("data:application/octet-stream;base64,")}if(Z="sql-wasm.wasm",!tt()){var et=Z;Z=u.locateFile?u.locateFile(et,x):x+et}function rt(){var t=Z;try{if(t==Z&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){Q(t)}}function nt(t){for(;0<t.length;)t.shift()(u)}function it(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return P[t>>0];case"i16":return k[t>>1];case"i32":case"i64":return R[t>>2];case"float":return C[t>>2];case"double":return A[t>>3];case"*":return L[t>>2];default:Q("invalid type for getValue: "+e)}return null}function ot(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":P[t>>0]=0;break;case"i16":k[t>>1]=0;break;case"i32":R[t>>2]=0;break;case"i64":X=[0,(H=0,1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[t>>2]=X[0],R[t+4>>2]=X[1];break;case"float":C[t>>2]=0;break;case"double":A[t>>3]=0;break;case"*":L[t>>2]=0;break;default:Q("invalid type for setValue: "+e)}}var at=(t,e)=>{for(var r=0,n=t.length-1;0<=n;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t},st=t=>{var e="/"===t.charAt(0),r="/"===t.substr(-1);return(t=at(t.split("/").filter(t=>!!t),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},ut=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."},lt=t=>{if("/"===t)return"/";var e=(t=(t=st(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)};function ct(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){if("string"!=typeof(e=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=at(t.split("/").filter(t=>!!t),!e).join("/"))||"."}function ht(t,e){var r=Array(z(t)+1);return t=B(t,r,0,r.length),e&&(r.length=t),r}var ft=[];function pt(t,e){ft[t]={input:[],output:[],Xa:e},Ut(t,vt)}var dt,mt,yt,gt,vt={open:function(t){var e=ft[t.node.rdev];if(!e)throw new Pt(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.Xa.fsync(t.tty)},fsync:function(t){t.tty.Xa.fsync(t.tty)},read:function(t,e,r,n){if(!t.tty||!t.tty.Xa.tb)throw new Pt(60);for(var i=0,o=0;o<n;o++){try{var a=t.tty.Xa.tb(t.tty)}catch(t){throw new Pt(29)}if(void 0===a&&0===i)throw new Pt(6);if(null==a)break;i++,e[r+o]=a}return i&&(t.node.timestamp=Date.now()),i},write:function(t,e,r,n){if(!t.tty||!t.tty.Xa.jb)throw new Pt(60);try{for(var i=0;i<n;i++)t.tty.Xa.jb(t.tty,e[r+i])}catch(t){throw new Pt(29)}return n&&(t.node.timestamp=Date.now()),i}},_t={tb:function(t){if(!t.input.length){var r=null;if(w){var n=i.alloc(256),o=0;try{o=d.readSync(e.stdin.fd,n,0,256,-1)}catch(t){if(!t.toString().includes("EOF"))throw t;o=0}r=0<o?n.slice(0,o).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(r=window.prompt("Input: "))&&(r+="\n"):"function"==typeof readline&&(null!==(r=readline())&&(r+="\n"));if(!r)return null;t.input=ht(r,!0)}return t.input.shift()},jb:function(t,e){null===e||10===e?(S(F(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync:function(t){t.output&&0<t.output.length&&(S(F(t.output,0)),t.output=[])}},bt={jb:function(t,e){null===e||10===e?(E(F(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync:function(t){t.output&&0<t.output.length&&(E(F(t.output,0)),t.output=[])}},wt={Qa:null,Ra:function(){return wt.createNode(null,"/",16895,0)},createNode:function(t,e,r,n){if(24576==(61440&r)||4096==(61440&r))throw new Pt(63);return wt.Qa||(wt.Qa={dir:{node:{Pa:wt.Ga.Pa,Oa:wt.Ga.Oa,lookup:wt.Ga.lookup,ab:wt.Ga.ab,rename:wt.Ga.rename,unlink:wt.Ga.unlink,rmdir:wt.Ga.rmdir,readdir:wt.Ga.readdir,symlink:wt.Ga.symlink},stream:{Ta:wt.Ha.Ta}},file:{node:{Pa:wt.Ga.Pa,Oa:wt.Ga.Oa},stream:{Ta:wt.Ha.Ta,read:wt.Ha.read,write:wt.Ha.write,lb:wt.Ha.lb,bb:wt.Ha.bb,cb:wt.Ha.cb}},link:{node:{Pa:wt.Ga.Pa,Oa:wt.Ga.Oa,readlink:wt.Ga.readlink},stream:{}},pb:{node:{Pa:wt.Ga.Pa,Oa:wt.Ga.Oa},stream:qt}}),16384==(61440&(r=Nt(t,e,r,n)).mode)?(r.Ga=wt.Qa.dir.node,r.Ha=wt.Qa.dir.stream,r.Ia={}):32768==(61440&r.mode)?(r.Ga=wt.Qa.file.node,r.Ha=wt.Qa.file.stream,r.Ma=0,r.Ia=null):40960==(61440&r.mode)?(r.Ga=wt.Qa.link.node,r.Ha=wt.Qa.link.stream):8192==(61440&r.mode)&&(r.Ga=wt.Qa.pb.node,r.Ha=wt.Qa.pb.stream),r.timestamp=Date.now(),t&&(t.Ia[e]=r,t.timestamp=r.timestamp),r},Jb:function(t){return t.Ia?t.Ia.subarray?t.Ia.subarray(0,t.Ma):new Uint8Array(t.Ia):new Uint8Array(0)},qb:function(t,e){var r=t.Ia?t.Ia.length:0;r>=e||(e=Math.max(e,r*(1048576>r?2:1.125)>>>0),0!=r&&(e=Math.max(e,256)),r=t.Ia,t.Ia=new Uint8Array(e),0<t.Ma&&t.Ia.set(r.subarray(0,t.Ma),0))},Gb:function(t,e){if(t.Ma!=e)if(0==e)t.Ia=null,t.Ma=0;else{var r=t.Ia;t.Ia=new Uint8Array(e),r&&t.Ia.set(r.subarray(0,Math.min(e,t.Ma))),t.Ma=e}},Ga:{Pa:function(t){var e={};return e.dev=8192==(61440&t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,16384==(61440&t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.Ma:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.Ab=4096,e.blocks=Math.ceil(e.size/e.Ab),e},Oa:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&wt.Gb(t,e.size)},lookup:function(){throw It[44]},ab:function(t,e,r,n){return wt.createNode(t,e,r,n)},rename:function(t,e,r){if(16384==(61440&t.mode)){try{var n=At(e,r)}catch(t){}if(n)for(var i in n.Ia)throw new Pt(55)}delete t.parent.Ia[t.name],t.parent.timestamp=Date.now(),t.name=r,e.Ia[r]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.Ia[e],t.timestamp=Date.now()},rmdir:function(t,e){var r,n=At(t,e);for(r in n.Ia)throw new Pt(55);delete t.Ia[e],t.timestamp=Date.now()},readdir:function(t){var e,r=[".",".."];for(e in t.Ia)t.Ia.hasOwnProperty(e)&&r.push(e);return r},symlink:function(t,e,r){return(t=wt.createNode(t,e,41471,0)).link=r,t},readlink:function(t){if(40960!=(61440&t.mode))throw new Pt(28);return t.link}},Ha:{read:function(t,e,r,n,i){var o=t.node.Ia;if(i>=t.node.Ma)return 0;if(8<(t=Math.min(t.node.Ma-i,n))&&o.subarray)e.set(o.subarray(i,i+t),r);else for(n=0;n<t;n++)e[r+n]=o[i+n];return t},write:function(t,e,r,n,i,o){if(e.buffer===P.buffer&&(o=!1),!n)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.Ia||t.Ia.subarray)){if(o)return t.Ia=e.subarray(r,r+n),t.Ma=n;if(0===t.Ma&&0===i)return t.Ia=e.slice(r,r+n),t.Ma=n;if(i+n<=t.Ma)return t.Ia.set(e.subarray(r,r+n),i),n}if(wt.qb(t,i+n),t.Ia.subarray&&e.subarray)t.Ia.set(e.subarray(r,r+n),i);else for(o=0;o<n;o++)t.Ia[i+o]=e[r+o];return t.Ma=Math.max(t.Ma,i+n),n},Ta:function(t,e,r){if(1===r?e+=t.position:2===r&&32768==(61440&t.node.mode)&&(e+=t.node.Ma),0>e)throw new Pt(28);return e},lb:function(t,e,r){wt.qb(t.node,e+r),t.node.Ma=Math.max(t.node.Ma,e+r)},bb:function(t,e,r,n,i){if(32768!=(61440&t.node.mode))throw new Pt(43);if(t=t.node.Ia,2&i||t.buffer!==T){if((0<r||r+e<t.length)&&(t=t.subarray?t.subarray(r,r+e):Array.prototype.slice.call(t,r,r+e)),r=!0,e=65536*Math.ceil(e/65536),(i=Ne(65536,e))?(I.fill(0,i,i+e),e=i):e=0,!e)throw new Pt(48);P.set(t,e)}else r=!1,e=t.byteOffset;return{Fb:e,vb:r}},cb:function(t,e,r,n,i){if(32768!=(61440&t.node.mode))throw new Pt(43);return 2&i||wt.Ha.write(t,e,0,n,r,!1),0}}},xt=null,Mt={},St=[],Et=1,Ot=null,Tt=!0,Pt=null,It={},kt=(t,e={})=>{if(!(t=ct("/",t)))return{path:"",node:null};if(8<(e=Object.assign({rb:!0,kb:0},e)).kb)throw new Pt(32);t=at(t.split("/").filter(t=>!!t),!1);for(var r=xt,n="/",i=0;i<t.length;i++){var o=i===t.length-1;if(o&&e.parent)break;if(r=At(r,t[i]),n=st(n+"/"+t[i]),r.Va&&(!o||o&&e.rb)&&(r=r.Va.root),!o||e.Sa)for(o=0;40960==(61440&r.mode);)if(r=Jt(n),n=ct(ut(n),r),r=kt(n,{kb:e.kb+1}).node,40<o++)throw new Pt(32)}return{path:n,node:r}},Rt=t=>{for(var e;;){if(t===t.parent)return t=t.Ra.ub,e?"/"!==t[t.length-1]?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}},Lt=(t,e)=>{for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%Ot.length},Ct=t=>{var e=Lt(t.parent.id,t.name);if(Ot[e]===t)Ot[e]=t.Wa;else for(e=Ot[e];e;){if(e.Wa===t){e.Wa=t.Wa;break}e=e.Wa}},At=(t,e)=>{var r;if(r=(r=Dt(t,"x"))?r:t.Ga.lookup?0:2)throw new Pt(r,t);for(r=Ot[Lt(t.id,e)];r;r=r.Wa){var n=r.name;if(r.parent.id===t.id&&n===e)return r}return t.Ga.lookup(t,e)},Nt=(t,e,r,n)=>(t=new Ie(t,e,r,n),e=Lt(t.parent.id,t.name),t.Wa=Ot[e],Ot[e]=t),jt={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Ft=t=>{var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},Dt=(t,e)=>Tt?0:!e.includes("r")||292&t.mode?e.includes("w")&&!(146&t.mode)||e.includes("x")&&!(73&t.mode)?2:0:2,Bt=(t,e)=>{try{return At(t,e),20}catch(t){}return Dt(t,"wx")},zt=(t,e,r)=>{try{var n=At(t,e)}catch(t){return t.Ka}if(t=Dt(t,"wx"))return t;if(r){if(16384!=(61440&n.mode))return 54;if(n===n.parent||"/"===Rt(n))return 10}else if(16384==(61440&n.mode))return 31;return 0},Gt=(t,e)=>(yt||((yt=function(){this.$a={}}).prototype={},Object.defineProperties(yt.prototype,{object:{get:function(){return this.node},set:function(t){this.node=t}},flags:{get:function(){return this.$a.flags},set:function(t){this.$a.flags=t}},position:{get:function(){return this.$a.position},set:function(t){this.$a.position=t}}})),t=Object.assign(new yt,t),e=((t=0)=>{for(;4096>=t;t++)if(!St[t])return t;throw new Pt(33)})(e),t.fd=e,St[e]=t),qt={open:t=>{t.Ha=Mt[t.node.rdev].Ha,t.Ha.open&&t.Ha.open(t)},Ta:()=>{throw new Pt(70)}},Ut=(t,e)=>{Mt[t]={Ha:e}},Vt=(t,e)=>{var r="/"===e,n=!e;if(r&&xt)throw new Pt(10);if(!r&&!n){var i=kt(e,{rb:!1});if(e=i.path,(i=i.node).Va)throw new Pt(10);if(16384!=(61440&i.mode))throw new Pt(54)}e={type:t,Kb:{},ub:e,Eb:[]},(t=t.Ra(e)).Ra=e,e.root=t,r?xt=t:i&&(i.Va=e,i.Ra&&i.Ra.Eb.push(e))},Wt=(t,e,r)=>{var n=kt(t,{parent:!0}).node;if(!(t=lt(t))||"."===t||".."===t)throw new Pt(28);var i=Bt(n,t);if(i)throw new Pt(i);if(!n.Ga.ab)throw new Pt(63);return n.Ga.ab(n,t,e,r)},Yt=(t,e)=>Wt(t,1023&(void 0!==e?e:511)|16384,0),Zt=(t,e,r)=>{void 0===r&&(r=e,e=438),Wt(t,8192|e,r)},Ht=(t,e)=>{if(!ct(t))throw new Pt(44);var r=kt(e,{parent:!0}).node;if(!r)throw new Pt(44);e=lt(e);var n=Bt(r,e);if(n)throw new Pt(n);if(!r.Ga.symlink)throw new Pt(63);r.Ga.symlink(r,e,t)},Xt=t=>{var e=kt(t,{parent:!0}).node;t=lt(t);var r=At(e,t),n=zt(e,t,!0);if(n)throw new Pt(n);if(!e.Ga.rmdir)throw new Pt(63);if(r.Va)throw new Pt(10);e.Ga.rmdir(e,t),Ct(r)},Kt=t=>{var e=kt(t,{parent:!0}).node;if(!e)throw new Pt(44);t=lt(t);var r=At(e,t),n=zt(e,t,!1);if(n)throw new Pt(n);if(!e.Ga.unlink)throw new Pt(63);if(r.Va)throw new Pt(10);e.Ga.unlink(e,t),Ct(r)},Jt=t=>{if(!(t=kt(t).node))throw new Pt(44);if(!t.Ga.readlink)throw new Pt(28);return ct(Rt(t.parent),t.Ga.readlink(t))},$t=(t,e)=>{if(!(t=kt(t,{Sa:!e}).node))throw new Pt(44);if(!t.Ga.Pa)throw new Pt(63);return t.Ga.Pa(t)},Qt=t=>$t(t,!0),te=(t,e)=>{if(!(t="string"==typeof t?kt(t,{Sa:!0}).node:t).Ga.Oa)throw new Pt(63);t.Ga.Oa(t,{mode:4095&e|-4096&t.mode,timestamp:Date.now()})},ee=(t,e)=>{if(0>e)throw new Pt(28);if(!(t="string"==typeof t?kt(t,{Sa:!0}).node:t).Ga.Oa)throw new Pt(63);if(16384==(61440&t.mode))throw new Pt(31);if(32768!=(61440&t.mode))throw new Pt(28);var r=Dt(t,"w");if(r)throw new Pt(r);t.Ga.Oa(t,{size:e,timestamp:Date.now()})},re=(t,e,r)=>{if(""===t)throw new Pt(44);if("string"==typeof e){var n=jt[e];if(void 0===n)throw Error("Unknown file open mode: "+e);e=n}if(r=64&e?4095&(void 0===r?438:r)|32768:0,"object"==typeof t)var i=t;else{t=st(t);try{i=kt(t,{Sa:!(131072&e)}).node}catch(t){}}if(n=!1,64&e)if(i){if(128&e)throw new Pt(20)}else i=Wt(t,r,0),n=!0;if(!i)throw new Pt(44);if(8192==(61440&i.mode)&&(e&=-513),65536&e&&16384!=(61440&i.mode))throw new Pt(54);if(!n&&(r=i?40960==(61440&i.mode)?32:16384==(61440&i.mode)&&("r"!==Ft(e)||512&e)?31:Dt(i,Ft(e)):44))throw new Pt(r);return 512&e&&!n&&ee(i,0),e&=-131713,(i=Gt({node:i,path:Rt(i),flags:e,seekable:!0,position:0,Ha:i.Ha,Ib:[],error:!1})).Ha.open&&i.Ha.open(i),!u.logReadFiles||1&e||(gt||(gt={}),t in gt||(gt[t]=1)),i},ne=t=>{if(null===t.fd)throw new Pt(8);t.hb&&(t.hb=null);try{t.Ha.close&&t.Ha.close(t)}catch(t){throw t}finally{St[t.fd]=null}t.fd=null},ie=(t,e,r)=>{if(null===t.fd)throw new Pt(8);if(!t.seekable||!t.Ha.Ta)throw new Pt(70);if(0!=r&&1!=r&&2!=r)throw new Pt(28);t.position=t.Ha.Ta(t,e,r),t.Ib=[]},oe=(t,e,r,n,i)=>{if(0>n||0>i)throw new Pt(28);if(null===t.fd)throw new Pt(8);if(1==(2097155&t.flags))throw new Pt(8);if(16384==(61440&t.node.mode))throw new Pt(31);if(!t.Ha.read)throw new Pt(28);var o=void 0!==i;if(o){if(!t.seekable)throw new Pt(70)}else i=t.position;return e=t.Ha.read(t,e,r,n,i),o||(t.position+=e),e},ae=(t,e,r,n,i)=>{if(0>n||0>i)throw new Pt(28);if(null===t.fd)throw new Pt(8);if(0==(2097155&t.flags))throw new Pt(8);if(16384==(61440&t.node.mode))throw new Pt(31);if(!t.Ha.write)throw new Pt(28);t.seekable&&1024&t.flags&&ie(t,0,2);var o=void 0!==i;if(o){if(!t.seekable)throw new Pt(70)}else i=t.position;return e=t.Ha.write(t,e,r,n,i,void 0),o||(t.position+=e),e},se=t=>{var e;var r=re(t,r||0);t=$t(t).size;var n=new Uint8Array(t);return oe(r,n,0,t,0),e=n,ne(r),e},ue=()=>{Pt||((Pt=function(t,e){this.node=e,this.Hb=function(t){this.Ka=t},this.Hb(t),this.message="FS error"}).prototype=Error(),Pt.prototype.constructor=Pt,[44].forEach(t=>{It[t]=new Pt(t),It[t].stack="<generic error, no stack>"}))},le=(t,e)=>{var r=0;return t&&(r|=365),e&&(r|=146),r},ce=(t,e,r)=>{t=st("/dev/"+t);var n=le(!!e,!!r);mt||(mt=64);var i=mt++<<8|0;Ut(i,{open:t=>{t.seekable=!1},close:()=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(t,r,n,i)=>{for(var o=0,a=0;a<i;a++){try{var s=e()}catch(t){throw new Pt(29)}if(void 0===s&&0===o)throw new Pt(6);if(null==s)break;o++,r[n+a]=s}return o&&(t.node.timestamp=Date.now()),o},write:(t,e,n,i)=>{for(var o=0;o<i;o++)try{r(e[n+o])}catch(t){throw new Pt(29)}return i&&(t.node.timestamp=Date.now()),o}}),Zt(t,n,i)},he={};function fe(t,e,r){if("/"===e.charAt(0))return e;if(t=-100===t?"/":ge(t).path,0==e.length){if(!r)throw new Pt(44);return t}return st(t+"/"+e)}function pe(t,e,r){try{var n=t(e)}catch(t){if(t&&t.node&&st(e)!==st(Rt(t.node)))return-54;throw t}return R[r>>2]=n.dev,R[r+8>>2]=n.ino,R[r+12>>2]=n.mode,L[r+16>>2]=n.nlink,R[r+20>>2]=n.uid,R[r+24>>2]=n.gid,R[r+28>>2]=n.rdev,X=[n.size>>>0,(H=n.size,1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+40>>2]=X[0],R[r+44>>2]=X[1],R[r+48>>2]=4096,R[r+52>>2]=n.blocks,X=[Math.floor(n.atime.getTime()/1e3)>>>0,(H=Math.floor(n.atime.getTime()/1e3),1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+56>>2]=X[0],R[r+60>>2]=X[1],L[r+64>>2]=0,X=[Math.floor(n.mtime.getTime()/1e3)>>>0,(H=Math.floor(n.mtime.getTime()/1e3),1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+72>>2]=X[0],R[r+76>>2]=X[1],L[r+80>>2]=0,X=[Math.floor(n.ctime.getTime()/1e3)>>>0,(H=Math.floor(n.ctime.getTime()/1e3),1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+88>>2]=X[0],R[r+92>>2]=X[1],L[r+96>>2]=0,X=[n.ino>>>0,(H=n.ino,1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+104>>2]=X[0],R[r+108>>2]=X[1],0}var de,me=void 0;function ye(){return R[(me+=4)-4>>2]}function ge(t){if(!(t=St[t]))throw new Pt(8);return t}function ve(t){return L[t>>2]+4294967296*R[t+4>>2]}function _e(t){var e=z(t)+1,r=Le(e);return r&&B(t,P,r,e),r}de=w?()=>{var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now();var be={};function we(){if(!xe){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:v||"./this.program"};for(t in be)void 0===be[t]?delete e[t]:e[t]=be[t];var r=[];for(t in e)r.push(t+"="+e[t]);xe=r}return xe}var xe,Me=void 0,Se=[];function Ee(t,e){if(!Me){Me=new WeakMap;var r=q.length;if(Me)for(var n=0;n<0+r;n++){var i=q.get(n);i&&Me.set(i,n)}}if(Me.has(t))return Me.get(t);if(Se.length)r=Se.pop();else{try{q.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}r=q.length-1}try{q.set(r,t)}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var o={parameters:[],results:"v"==e[0]?[]:[i[e[0]]]},a=1;a<e.length;++a)o.parameters.push(i[e[a]]);e=new n(o,t)}else{for(n=[1,96],i=e.slice(0,1),o={i:127,p:127,j:126,f:125,d:124},128>(a=(e=e.slice(1)).length)?n.push(a):n.push(a%128|128,a>>7),a=0;a<e.length;++a)n.push(o[e[a]]);"v"==i?n.push(0):n.push(1,o[i]),e=[0,97,115,109,1,0,0,0,1],128>(i=n.length)?e.push(i):e.push(i%128|128,i>>7),e.push.apply(e,n),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}q.set(r,e)}return Me.set(t,r),r}function Oe(t){Me.delete(q.get(t)),Se.push(t)}function Te(t){var e=Le(t.length);return t.subarray||t.slice||(t=new Uint8Array(t)),I.set(t,e),e}function Pe(t,e,r,n){var i={string:t=>{var e=0;if(null!=t&&0!==t){var r=1+(t.length<<2);e=De(r),B(t,I,e,r)}return e},array:t=>{var e=De(t.length);return P.set(t,e),e}};t=u["_"+t];var o,a=[],s=0;if(n)for(var l=0;l<n.length;l++){var c=i[r[l]];c?(0===s&&(s=je()),a[l]=c(n[l])):a[l]=n[l]}return r=t.apply(null,a),o=r,0!==s&&Fe(s),"string"===e?D(o):"boolean"===e?!!o:o}function Ie(t,e,r,n){t||(t=this),this.parent=t,this.Ra=t.Ra,this.Va=null,this.id=Et++,this.name=e,this.mode=r,this.Ga={},this.Ha={},this.rdev=n}Object.defineProperties(Ie.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}}),ue(),Ot=Array(4096),Vt(wt,"/"),Yt("/tmp"),Yt("/home"),Yt("/home/web_user"),(()=>{Yt("/dev"),Ut(259,{read:()=>0,write:(t,e,r,n)=>n}),Zt("/dev/null",259),pt(1280,_t),pt(1536,bt),Zt("/dev/tty",1280),Zt("/dev/tty1",1536);var t=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(w)try{var e=r(233);return()=>e.randomBytes(1)[0]}catch(t){}return()=>Q("randomDevice")}();ce("random",t),ce("urandom",t),Yt("/dev/shm"),Yt("/dev/shm/tmp")})(),(()=>{Yt("/proc");var t=Yt("/proc/self");Yt("/proc/self/fd"),Vt({Ra:()=>{var e=Nt(t,"fd",16895,73);return e.Ga={lookup:(t,e)=>{var r=St[+e];if(!r)throw new Pt(8);return(t={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>r.path}}).parent=t}},e}},"/proc/self/fd")})();var ke={a:function(t,e,r,n){Q("Assertion failed: "+D(t)+", at: "+[e?D(e):"unknown filename",r,n?D(n):"unknown function"])},h:function(t,e){try{return t=D(t),te(t,e),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},H:function(t,e,r){try{if(e=fe(t,e=D(e)),-8&r)return-28;var n=kt(e,{Sa:!0}).node;return n?(t="",4&r&&(t+="r"),2&r&&(t+="w"),1&r&&(t+="x"),t&&Dt(n,t)?-2:0):-44}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},i:function(t,e){try{var r=St[t];if(!r)throw new Pt(8);return te(r.node,e),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},g:function(t){try{var e=St[t];if(!e)throw new Pt(8);var r=e.node,n="string"==typeof r?kt(r,{Sa:!0}).node:r;if(!n.Ga.Oa)throw new Pt(63);return n.Ga.Oa(n,{timestamp:Date.now()}),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},b:function(t,e,r){me=r;try{var n=ge(t);switch(e){case 0:var i=ye();return 0>i?-28:Gt(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=ye(),n.flags|=i,0;case 5:return i=ye(),k[i+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return R[Re()>>2]=28,-1;default:return-28}}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},G:function(t,e){try{var r=ge(t);return pe($t,r.path,e)}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},l:function(t,e,r){try{if(e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,isNaN(e))return-61;var n=St[t];if(!n)throw new Pt(8);if(0==(2097155&n.flags))throw new Pt(28);return ee(n.node,e),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},B:function(t,e){try{if(0===e)return-28;var r=z("/")+1;return e<r?-68:(B("/",I,t,e),r)}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},E:function(t,e){try{return t=D(t),pe(Qt,t,e)}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},y:function(t,e,r){try{return e=fe(t,e=D(e)),"/"===(e=st(e))[e.length-1]&&(e=e.substr(0,e.length-1)),Yt(e,r),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},D:function(t,e,r,n){try{e=D(e);var i=256&n;return e=fe(t,e,4096&n),pe(i?Qt:$t,e,r)}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},v:function(t,e,r,n){me=n;try{e=fe(t,e=D(e));var i=n?ye():0;return re(e,r,i).fd}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},t:function(t,e,r,n){try{if(e=fe(t,e=D(e)),0>=n)return-28;var i=Jt(e),o=Math.min(n,z(i)),a=P[r+o];return B(i,I,r,n+1),P[r+o]=a,o}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},s:function(t){try{return t=D(t),Xt(t),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},F:function(t,e){try{return t=D(t),pe($t,t,e)}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},p:function(t,e,r){try{return e=fe(t,e=D(e)),0===r?Kt(e):512===r?Xt(e):Q("Invalid flags passed to unlinkat"),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},o:function(t,e,r){try{if(e=fe(t,e=D(e),!0),r){var n=ve(r),i=R[r+8>>2];o=1e3*n+i/1e6,a=1e3*(n=ve(r+=16))+(i=R[r+8>>2])/1e6}else var o=Date.now(),a=o;t=o;var s=kt(e,{Sa:!0}).node;return s.Ga.Oa(s,{timestamp:Math.max(t,a)}),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},e:function(){return Date.now()},j:function(t,e){t=new Date(1e3*ve(t)),R[e>>2]=t.getSeconds(),R[e+4>>2]=t.getMinutes(),R[e+8>>2]=t.getHours(),R[e+12>>2]=t.getDate(),R[e+16>>2]=t.getMonth(),R[e+20>>2]=t.getFullYear()-1900,R[e+24>>2]=t.getDay();var r=new Date(t.getFullYear(),0,1);R[e+28>>2]=(t.getTime()-r.getTime())/864e5|0,R[e+36>>2]=-60*t.getTimezoneOffset();var n=new Date(t.getFullYear(),6,1).getTimezoneOffset();r=r.getTimezoneOffset(),R[e+32>>2]=0|(n!=r&&t.getTimezoneOffset()==Math.min(r,n))},w:function(t,e,r,n,i,o){try{var a=ge(n);if(0!=(2&e)&&0==(2&r)&&2!=(2097155&a.flags))throw new Pt(2);if(1==(2097155&a.flags))throw new Pt(2);if(!a.Ha.bb)throw new Pt(43);var s=a.Ha.bb(a,t,i,e,r),u=s.Fb;return R[o>>2]=s.vb,u}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},x:function(t,e,r,n,i,o){try{var a=ge(i);if(2&r){var s=I.slice(t,t+e);a&&a.Ha.cb&&a.Ha.cb(a,s,o,e,n)}}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return-t.Ka}},n:function t(e,r,n){t.Bb||(t.Bb=!0,function(t,e,r){function n(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var i=(new Date).getFullYear(),o=new Date(i,0,1),a=new Date(i,6,1);i=o.getTimezoneOffset();var s=a.getTimezoneOffset();R[t>>2]=60*Math.max(i,s),R[e>>2]=Number(i!=s),t=n(o),e=n(a),t=_e(t),e=_e(e),s<i?(L[r>>2]=t,L[r+4>>2]=e):(L[r>>2]=e,L[r+4>>2]=t)}(e,r,n))},q:function(){return 2147483648},d:de,c:function(t){var e=I.length;if(2147483648<(t>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=e*(1+.2/r);n=Math.min(n,t+100663296);var i=Math;n=Math.max(t,n),i=i.min.call(i,2147483648,n+(65536-n%65536)%65536);t:{try{O.grow(i-T.byteLength+65535>>>16),G();var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},z:function(t,e){var r=0;return we().forEach((function(n,i){var o=e+r;for(i=L[t+4*i>>2]=o,o=0;o<n.length;++o)P[i++>>0]=n.charCodeAt(o);P[i>>0]=0,r+=n.length+1})),0},A:function(t,e){var r=we();L[t>>2]=r.length;var n=0;return r.forEach((function(t){n+=t.length+1})),L[e>>2]=n,0},f:function(t){try{var e=ge(t);return ne(e),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return t.Ka}},m:function(t,e){try{var r=ge(t);return P[e>>0]=r.tty?2:16384==(61440&r.mode)?3:40960==(61440&r.mode)?7:4,0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return t.Ka}},u:function(t,e,r,n){try{t:{var i=ge(t);t=e;for(var o=e=0;o<r;o++){var a=L[t>>2],s=L[t+4>>2];t+=8;var u=oe(i,P,a,s);if(0>u){var l=-1;break t}if(e+=u,u<s)break}l=e}return L[n>>2]=l,0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return t.Ka}},k:function(t,e,r,n,i){try{if(e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,isNaN(e))return 61;var o=ge(t);return ie(o,e,n),X=[o.position>>>0,(H=o.position,1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[i>>2]=X[0],R[i+4>>2]=X[1],o.hb&&0===e&&0===n&&(o.hb=null),0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return t.Ka}},C:function(t){try{var e=ge(t);return e.Ha&&e.Ha.fsync?e.Ha.fsync(e):0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return t.Ka}},r:function(t,e,r,n){try{t:{var i=ge(t);t=e;for(var o=e=0;o<r;o++){var a=L[t>>2],s=L[t+4>>2];t+=8;var u=ae(i,P,a,s);if(0>u){var l=-1;break t}e+=u}l=e}return L[n>>2]=l,0}catch(t){if(void 0===he||!(t instanceof Pt))throw t;return t.Ka}}};!function(){function t(t){u.asm=t.exports,O=u.asm.I,G(),q=u.asm.Aa,V.unshift(u.asm.J),K--,u.monitorRunDependencies&&u.monitorRunDependencies(K),0==K&&(null!==J&&(clearInterval(J),J=null),$&&(t=$,$=null,t()))}function e(e){t(e.instance)}function r(t){return function(){if(!M&&(_||b)){if("function"==typeof fetch&&!Z.startsWith("file://"))return fetch(Z,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Z+"'";return t.arrayBuffer()})).catch((function(){return rt()}));if(f)return new Promise((function(t,e){f(Z,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return rt()}))}().then((function(t){return WebAssembly.instantiate(t,n)})).then((function(t){return t})).then(t,(function(t){E("failed to asynchronously prepare wasm: "+t),Q(t)}))}var n={a:ke};if(K++,u.monitorRunDependencies&&u.monitorRunDependencies(K),u.instantiateWasm)try{return u.instantiateWasm(n,t)}catch(t){return E("Module.instantiateWasm callback failed with error: "+t),!1}M||"function"!=typeof WebAssembly.instantiateStreaming||tt()||Z.startsWith("file://")||w||"function"!=typeof fetch?r(e):fetch(Z,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,n).then(e,(function(t){return E("wasm streaming compile failed: "+t),E("falling back to ArrayBuffer instantiation"),r(e)}))}))}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.J).apply(null,arguments)},u._sqlite3_free=function(){return(u._sqlite3_free=u.asm.K).apply(null,arguments)},u._sqlite3_value_double=function(){return(u._sqlite3_value_double=u.asm.L).apply(null,arguments)},u._sqlite3_value_text=function(){return(u._sqlite3_value_text=u.asm.M).apply(null,arguments)};var Re=u.___errno_location=function(){return(Re=u.___errno_location=u.asm.N).apply(null,arguments)};u._sqlite3_prepare_v2=function(){return(u._sqlite3_prepare_v2=u.asm.O).apply(null,arguments)},u._sqlite3_step=function(){return(u._sqlite3_step=u.asm.P).apply(null,arguments)},u._sqlite3_finalize=function(){return(u._sqlite3_finalize=u.asm.Q).apply(null,arguments)},u._sqlite3_reset=function(){return(u._sqlite3_reset=u.asm.R).apply(null,arguments)},u._sqlite3_value_int=function(){return(u._sqlite3_value_int=u.asm.S).apply(null,arguments)},u._sqlite3_clear_bindings=function(){return(u._sqlite3_clear_bindings=u.asm.T).apply(null,arguments)},u._sqlite3_value_blob=function(){return(u._sqlite3_value_blob=u.asm.U).apply(null,arguments)},u._sqlite3_value_bytes=function(){return(u._sqlite3_value_bytes=u.asm.V).apply(null,arguments)},u._sqlite3_value_type=function(){return(u._sqlite3_value_type=u.asm.W).apply(null,arguments)},u._sqlite3_result_blob=function(){return(u._sqlite3_result_blob=u.asm.X).apply(null,arguments)},u._sqlite3_result_double=function(){return(u._sqlite3_result_double=u.asm.Y).apply(null,arguments)},u._sqlite3_result_error=function(){return(u._sqlite3_result_error=u.asm.Z).apply(null,arguments)},u._sqlite3_result_int=function(){return(u._sqlite3_result_int=u.asm._).apply(null,arguments)},u._sqlite3_result_int64=function(){return(u._sqlite3_result_int64=u.asm.$).apply(null,arguments)},u._sqlite3_result_null=function(){return(u._sqlite3_result_null=u.asm.aa).apply(null,arguments)},u._sqlite3_result_text=function(){return(u._sqlite3_result_text=u.asm.ba).apply(null,arguments)},u._sqlite3_sql=function(){return(u._sqlite3_sql=u.asm.ca).apply(null,arguments)},u._sqlite3_aggregate_context=function(){return(u._sqlite3_aggregate_context=u.asm.da).apply(null,arguments)},u._sqlite3_column_count=function(){return(u._sqlite3_column_count=u.asm.ea).apply(null,arguments)},u._sqlite3_data_count=function(){return(u._sqlite3_data_count=u.asm.fa).apply(null,arguments)},u._sqlite3_column_blob=function(){return(u._sqlite3_column_blob=u.asm.ga).apply(null,arguments)},u._sqlite3_column_bytes=function(){return(u._sqlite3_column_bytes=u.asm.ha).apply(null,arguments)},u._sqlite3_column_double=function(){return(u._sqlite3_column_double=u.asm.ia).apply(null,arguments)},u._sqlite3_column_text=function(){return(u._sqlite3_column_text=u.asm.ja).apply(null,arguments)},u._sqlite3_column_type=function(){return(u._sqlite3_column_type=u.asm.ka).apply(null,arguments)},u._sqlite3_column_name=function(){return(u._sqlite3_column_name=u.asm.la).apply(null,arguments)},u._sqlite3_bind_blob=function(){return(u._sqlite3_bind_blob=u.asm.ma).apply(null,arguments)},u._sqlite3_bind_double=function(){return(u._sqlite3_bind_double=u.asm.na).apply(null,arguments)},u._sqlite3_bind_int=function(){return(u._sqlite3_bind_int=u.asm.oa).apply(null,arguments)},u._sqlite3_bind_text=function(){return(u._sqlite3_bind_text=u.asm.pa).apply(null,arguments)},u._sqlite3_bind_parameter_index=function(){return(u._sqlite3_bind_parameter_index=u.asm.qa).apply(null,arguments)},u._sqlite3_normalized_sql=function(){return(u._sqlite3_normalized_sql=u.asm.ra).apply(null,arguments)},u._sqlite3_errmsg=function(){return(u._sqlite3_errmsg=u.asm.sa).apply(null,arguments)},u._sqlite3_exec=function(){return(u._sqlite3_exec=u.asm.ta).apply(null,arguments)},u._sqlite3_changes=function(){return(u._sqlite3_changes=u.asm.ua).apply(null,arguments)},u._sqlite3_close_v2=function(){return(u._sqlite3_close_v2=u.asm.va).apply(null,arguments)},u._sqlite3_create_function_v2=function(){return(u._sqlite3_create_function_v2=u.asm.wa).apply(null,arguments)},u._sqlite3_open=function(){return(u._sqlite3_open=u.asm.xa).apply(null,arguments)};var Le=u._malloc=function(){return(Le=u._malloc=u.asm.ya).apply(null,arguments)},Ce=u._free=function(){return(Ce=u._free=u.asm.za).apply(null,arguments)};u._RegisterExtensionFunctions=function(){return(u._RegisterExtensionFunctions=u.asm.Ba).apply(null,arguments)};var Ae,Ne=u._emscripten_builtin_memalign=function(){return(Ne=u._emscripten_builtin_memalign=u.asm.Ca).apply(null,arguments)},je=u.stackSave=function(){return(je=u.stackSave=u.asm.Da).apply(null,arguments)},Fe=u.stackRestore=function(){return(Fe=u.stackRestore=u.asm.Ea).apply(null,arguments)},De=u.stackAlloc=function(){return(De=u.stackAlloc=u.asm.Fa).apply(null,arguments)};function Be(){function t(){if(!Ae&&(Ae=!0,u.calledRun=!0,!N)){if(u.noFSInit||dt||(dt=!0,ue(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?ce("stdin",u.stdin):Ht("/dev/tty","/dev/stdin"),u.stdout?ce("stdout",null,u.stdout):Ht("/dev/tty","/dev/stdout"),u.stderr?ce("stderr",null,u.stderr):Ht("/dev/tty1","/dev/stderr"),re("/dev/stdin",0),re("/dev/stdout",1),re("/dev/stderr",1)),Tt=!1,nt(V),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();W.unshift(t)}nt(W)}}if(!(0<K)){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)Y();nt(U),0<K||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=D,u.stackAlloc=De,u.stackSave=je,u.stackRestore=Fe,u.cwrap=function(t,e,r,n){var i=(r=r||[]).every(t=>"number"===t||"boolean"===t);return"string"!==e&&i&&!n?u["_"+t]:function(){return Pe(t,e,r,arguments)}},$=function t(){Ae||Be(),Ae||($=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Be(),l})))};t.exports=a,t.exports.default=a}).call(this,r(9)(t),r(4),"/",r(3).Buffer)},function(t,e){var r={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},n=/(italic|oblique)$/i,i={};t.exports=function(t,e,o){var a=i[t];if(!a){Array.isArray(t)||(t=[t]);for(var s=400,u="normal",l=[],c=0,h=t.length;c<h;++c){var f=t[c].split(" "),p=f[f.length-1].toLowerCase();for(var d in"normal"==p||"italic"==p||"oblique"==p?(u=p,f.pop(),p=f[f.length-1].toLowerCase()):n.test(p)&&(p=p.replace(n,""),u=f[f.length-1].replace(p,"")),r){var m=f.length>1?f[f.length-2].toLowerCase():"";if(p==d||p==d.replace("-","")||m+"-"+p==d){s=r[d],f.pop(),m&&d.startsWith(m)&&f.pop();break}}"number"==typeof p&&(s=p);var y=f.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==y.indexOf(" ")&&(y='"'+y+'"'),l.push(y)}a=i[t]=[u,s,l]}return a[0]+" "+a[1]+" "+e+"px"+(o?"/"+o:"")+" "+a[2]}},function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAwADADAREAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAAAgQGAAMFBwj/xAAaAQACAwEBAAAAAAAAAAAAAAABAwACBQQG/9oADAMBAAIQAxAAAAH6nAjsJBGa6wjLHdfHYSKvZeqmvnvmeW03ujmclCMS56qpDj7We++Xx06aCfzF5J29Bj3RYKgROx3M3XMzkpERpxsd18dhIIzJBEsd1/8A/8QAHBAAAwEBAQEBAQAAAAAAAAAAAgMFBAEAEwYU/9oACAEBAAEFAiLg8Oppos5Cc33Y5p4FTTOYJcLlQzo7UIDMqi5mfHzC183D3tSdLM522Fz66aFrQLc1Rj/H+aLvkZ15hu8+WmSPfpn0BIsbNa69U6blulVia27366agHO2/y5aGTPNQhOrNsx08AtW2WB0dpDwuHL0zmcuuV7t1zfBL00WCPB5//8QAIBEAAgEEAwEBAQAAAAAAAAAAAQIAERIhIgMTMRAyQv/aAAgBAwEBPwGXlsJOsn0yynhl5XD/AB9jYIBTAjGgqJaSt1Yu67RNTYZx5JMbkOVgcmikTqgAHk5MEGJ/SwGx8xje2JeRqsR64M5MkCPqbxKKwxAgApCGVqiLX9tE2N5+WFcpOwj0TsJ8EsLZf5//xAAoEQABBAEDAwQCAwAAAAAAAAACAAEDBBESIUExUWEFFSIzExQjMkL/2gAIAQIBAT8Bd2ZsuiuTWi0VG27r26Q/tldPRIN4pnZDcmqlottt3TOztllcIrUzVA6cqOMYhYAbZWjOKFzDq3dfrnJXe1r844Vd3uV/58PlUyKrM9Q+nC9O+cksvlWr8rEddh34worhyaKsgZfnKL0p3zguenGFHEETYBsL1H4SRS+VSb5T1843UUo0bZa31eVPMN20Oh9PlFbkAxggyTj1zyqd0jJ4pv75XqPzkii8q4JVZmth05X4YLMTuH+lHUijAQxnCmisQWfyxPqcvCrMYkVycsd2wqYlame2fThOzO2HRU5qpa6j7dl7jIH2xOvcZD+qJ0NOa0Wu2+3ZMzM2GX//xAAlEAABAwIGAwEBAQAAAAAAAAABAAIDBBEFEhMhMUEiMlEUQiP/2gAIAQEABj8CJJsB2jFh7PEczv4V6iulcfjUXQYi9ttvI7XQixBnieJ2cIEG4PaZh8Rs32lKbHG3KwdKSSMtDm7+fCkrv0Wu4y6X83V6kMeJOm9J+Hym7faIquqDy6TKFUUYh/0OzCw72UFBNTB7rgO1U+0oAMlxH/OVZYmBg5sFQ1A5bJlKxKkzFjsxsRypNV5qBbKZO1BpOMA9dQ8qGmptSeWK4kDx7J1PUB/6Mx2y7NCoaccukzFMxCIXb6yhSGMNyz7l4G91FHka/T3DiO/qbUQO15JrjKW2ACmxGql0dy17MvKfiEos31iCIIuD0jLh7/E8wP4VqihlafrVanoZXH65CXEH+I4gZwgALAdL/8QAIBABAAIBBQEBAQEAAAAAAAAAAQARITFBUXHwYcGBof/aAAgBAQABPyEGxrVoErNNRMOvX8mTK3aD3Uvhexf8HMvNNRMu/X8gNjWDRI4U8PY49ukPsWgQg3/YcdxUFIAyD3rM7VfN+McK+Xuce3GanEJwHiZmdd0I17qN3TltoZuneWOplXW0ftRenthouaHAJyPmGyKtMGyz/I7iEDNsff5NJkDFbMLdyg6m9/vUDGbaWoqanABwHmOFfD3OfbhMM8ofZ2S00dBuBIGrTCqFvg+aQ3Od9IKAe604jhTy9jn26wGxqVokvNNbMuvX9mDK2bH3cyZWzQe7lZprZh36/sBsagaBP//aAAwDAQACAAMAAAAQo4FGBA7SvIwnAyQo/F//xAAdEQEBAAIDAQEBAAAAAAAAAAABABGBITFBYXFR/9oACAEDAQE/EFxyyvBu9nL5WLwbhzyST2QGGeMh+2LL6JL6Lc4qBzcwn7L5w+9fIXAxbnHnoibLMJ9PsoMincq97c4J7LNvqKYdXedYhUx/YL6JM8MryavZ3s4Xk1Bjgv/EACIRAQABAwQDAQEBAAAAAAAAAAERACExQVFhcYHB8LHhkf/aAAgBAgEBPxBEkBSC3ZePHy8FF292LH76odjjF2Sdm/qgF+wcefh4aBJI0g8ZPjb7VNqj4ClFC5s67cHND9GV5g9xO1uKmADSaHpH/KQecnxt9qO9CfyxOif5V3rskzCZ7i9oisy4ErgvMOsbzPmpbEMy7JrrMfaiY4b23oR+SD0x/acuCUJkmSfFqSnEQ5M23cmG9HrDErM358F6GSSAIs1nJuPVE03LRYMx13xelH5ZPRH9oB5wPG/2ob1DQi9QJnfs/ZpgHKKEzvR68ZDAAiBZ2M2bVl8U1AQEPcREzGaAeMDxv9qu1IgkaQX7Lx4+HloszO5c/PdNm53bH57oBbsHHn5eSgQQFf/EACAQAQACAgIDAQEBAAAAAAAAAAERIQAxQVFhcZGBobH/2gAIAQEAAT8QTtB2AWq8GCJrqeglfoodN5zBhY7xKn8Zpp6KkEgAZQhHeCJvqegF/gANt4HaDsosR5MIyQ/phPKJGNPQc/0ACRXldq7yF3EzgMvsKPKYgZRAxGSmrFPBzImVkJYGgbpRaarCMEv7ZXwkFjR2DNrBDalj4/OOoUT4gQCVKaiJ8YKEllTEEgLuZjV5UGvGh5N2qoJuR5z5kIBY9B8zSwQ2oY+H3hA6OtTzAP8AcD15MbErKsRVvPrCI2DdxCA1bBZbxhvy/ugNKhakjtOsh6thgYJLAsFnZbOaWCG1BPx+cIyQftgPCYCdHYcZCYkxClOk4eZ5XF6Qd6bLtf8ADrI2LMXISFBcp7S41YIXgyJ6AgzSbcIwSfpkfKBSdPQMTtA2UUicmCJvqewt/qANtZxBhY7xIH9ZxBgY7zAn8YIGup7A1+Kh01gdoGwCgDgz/9k="},function(t,e,r){var n=r(332);e.Processor=n},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=l(t),a=n[0],s=n[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),c=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[c++]=255&e);1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(t,a,a+16383>s?s:a+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){},function(t,e,r){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=r(15),e.createHash=e.Hash=r(19),e.createHmac=e.Hmac=r(78);var n=r(257),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return o};var a=r(81);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync;var s=r(259);e.Cipher=s.Cipher,e.createCipher=s.createCipher,e.Cipheriv=s.Cipheriv,e.createCipheriv=s.createCipheriv,e.Decipher=s.Decipher,e.createDecipher=s.createDecipher,e.Decipheriv=s.Decipheriv,e.createDecipheriv=s.createDecipheriv,e.getCiphers=s.getCiphers,e.listCiphers=s.listCiphers;var u=r(274);e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var l=r(281);e.createSign=l.createSign,e.Sign=l.Sign,e.createVerify=l.createVerify,e.Verify=l.Verify,e.createECDH=r(314);var c=r(317);e.publicEncrypt=c.publicEncrypt,e.privateEncrypt=c.privateEncrypt,e.publicDecrypt=c.publicDecrypt,e.privateDecrypt=c.privateDecrypt;var h=r(321);e.randomFill=h.randomFill,e.randomFillSync=h.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e){},function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=r(3).Buffer,s=r(236).inspect,u=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,l;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,r,n,i=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,r=i,n=s,a.prototype.copy.call(e,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0==(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:u,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,r),l&&o(e,l),t}()},function(t,e){},function(t,e,r){"use strict";(function(e){var n;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(37),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[a];if(null!==e){var r=t[f].read();null!==r&&(t[c]=null,t[a]=null,t[s]=null,e(p(r,!1)))}}function m(t){e.nextTick(d,t)}var y=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var t=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(r,n){e.nextTick((function(){t[u]?n(t[u]):r(p(void 0,!0))}))}));var n,i=this[c];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[l]?r(p(void 0,!0)):e[h](r,n)}),n)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[h])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),n),y);t.exports=function(t){var e,r=Object.create(g,(i(e={},f,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,l,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var n=r[f].read();n?(r[c]=null,r[a]=null,r[s]=null,t(p(n,!1))):(r[a]=t,r[s]=e)},writable:!0}),e));return r[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[s];return null!==e&&(r[c]=null,r[a]=null,r[s]=null,e(t)),void(r[u]=t)}var n=r[a];null!==n&&(r[c]=null,r[a]=null,r[s]=null,n(p(void 0,!0))),r[l]=!0})),t.on("readable",m.bind(null,r)),r}}).call(this,r(4))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,r){"use strict";t.exports=i;var n=r(71);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(0)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){"use strict";var n;var i=r(16).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===n&&(n=r(37)),n(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function l(t){t()}function c(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,r){var o=r<e.length-1;return u(t,o,r>0,(function(t){n||(n=t),t&&a.forEach(l),o||(a.forEach(l),i(n))}))}));return e.reduce(c)}},function(t,e,r){var n=r(0),i=r(18),o=r(1).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<30|t>>>2}function c(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)r[h]=t.readInt32BE(4*h);for(;h<80;++h)r[h]=r[h-3]^r[h-8]^r[h-14]^r[h-16];for(var f=0;f<80;++f){var p=~~(f/20),d=0|((e=n)<<5|e>>>27)+c(p,i,o,s)+u+r[f]+a[p];u=s,s=o,o=l(i),i=n,n=d}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,r){var n=r(0),i=r(18),o=r(1).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<5|t>>>27}function c(t){return t<<30|t>>>2}function h(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<80;++f)r[f]=(e=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|e>>>31;for(var p=0;p<80;++p){var d=~~(p/20),m=l(n)+h(d,i,o,s)+u+r[p]+a[d]|0;u=s,s=o,o=c(i),i=n,n=m}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,r){var n=r(0),i=r(72),o=r(18),a=r(1).Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}n(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},function(t,e,r){var n=r(0),i=r(73),o=r(18),a=r(1).Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}n(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},function(t,e,r){t.exports=i;var n=r(20).EventEmitter;function i(){n.call(this)}r(0)(i,n),i.Readable=r(40),i.Writable=r(252),i.Duplex=r(253),i.Transform=r(254),i.PassThrough=r(255),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===n.listenerCount(this,"error"))throw t}function c(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("error",l),t.on("error",l),r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t}},function(t,e){},function(t,e,r){"use strict";var n=r(41).Buffer,i=r(248);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,o=n.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,r=o,i=s,e.copy(r,i),s+=a.data.length,a=a.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(250),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(5))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,o,a,s,u=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return l[u]=i,n(u),u++},f.clearImmediate=p}function p(t){delete l[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{p(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(5),r(4))},function(t,e,r){"use strict";t.exports=o;var n=r(77),i=Object.create(r(22));function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=r(0),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(42)},function(t,e,r){t.exports=r(14)},function(t,e,r){t.exports=r(40).Transform},function(t,e,r){t.exports=r(40).PassThrough},function(t,e,r){"use strict";var n=r(0),i=r(1).Buffer,o=r(12),a=i.alloc(128);function s(t,e){o.call(this,"digest"),"string"==typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>64?e=t(e):e.length<64&&(e=i.concat([e,a],64));for(var r=this._ipad=i.allocUnsafe(64),n=this._opad=i.allocUnsafe(64),s=0;s<64;s++)r[s]=54^e[s],n[s]=92^e[s];this._hash=[r]}n(s,o),s.prototype._update=function(t){this._hash.push(t)},s.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=s},function(t,e,r){t.exports=r(80)},function(t,e,r){(function(e){var n,i,o=r(1).Buffer,a=r(82),s=r(83),u=r(84),l=r(85),c=e.crypto&&e.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function p(){return i||(i=e.process&&e.process.nextTick?e.process.nextTick:e.queueMicrotask?e.queueMicrotask:e.setImmediate?e.setImmediate:e.setTimeout)}function d(t,e,r,n,i){return c.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return c.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},t,n<<3)})).then((function(t){return o.from(t)}))}t.exports=function(t,r,i,m,y,g){"function"==typeof y&&(g=y,y=void 0);var v=h[(y=y||"sha1").toLowerCase()];if(v&&"function"==typeof e.Promise){if(a(i,m),t=l(t,s,"Password"),r=l(r,s,"Salt"),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){p()((function(){e(null,t)}))}),(function(t){p()((function(){e(t)}))}))}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var r=d(n=n||o.alloc(8),n,10,128,t).then((function(){return!0})).catch((function(){return!1}));return f[t]=r,r}(v).then((function(e){return e?d(t,r,i,m,v):u(t,r,i,m,y)})),g)}else p()((function(){var e;try{e=u(t,r,i,m,y)}catch(t){return g(t)}g(null,e)}))}}).call(this,r(5))},function(t,e,r){var n=r(260),i=r(44),o=r(45),a=r(273),s=r(28);function u(t,e,r){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,r);if(a[t])return new n({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function l(t,e,r){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,r);if(a[t])return new n({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");r=8*a[t].key,n=a[t].iv}var i=s(e,!1,r,n);return u(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");r=8*a[t].key,n=a[t].iv}var i=s(e,!1,r,n);return l(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=function(){return Object.keys(a).concat(i.getCiphers())}},function(t,e,r){var n=r(12),i=r(261),o=r(0),a=r(1).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(t){n.call(this);var e,r=t.mode.toLowerCase(),i=s[r];e=t.decrypt?"decrypt":"encrypt";var o=t.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=a.concat([o,o.slice(0,8)]));var u=t.iv;a.isBuffer(u)||(u=a.from(u)),this._des=i.create({key:o,iv:u,type:e})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,o(u,n),u.prototype._update=function(t){return a.from(this._des.update(t))},u.prototype._final=function(){return a.from(this._des.final())}},function(t,e,r){"use strict";e.utils=r(86),e.Cipher=r(43),e.DES=r(87),e.CBC=r(262),e.EDE=r(263)},function(t,e,r){"use strict";var n=r(6),i=r(0),o={};function a(t){n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var r=Object.keys(o),n=0;n<r.length;n++){var a=r[n];e.prototype[a]=o[a]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},o._update=function(t,e,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];o._update.call(this,a,0,r,n);for(s=0;s<this.blockSize;s++)a[s]=r[n+s]}else{o._update.call(this,t,e,r,n);for(s=0;s<this.blockSize;s++)r[n+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s]}}},function(t,e,r){"use strict";var n=r(6),i=r(0),o=r(43),a=r(87);function s(t,e){n.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[a.create({type:"encrypt",key:r}),a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:i}),a.create({type:"decrypt",key:r})]}function u(t){o.call(this,t);var e=new s(this.type,this.options.key);this._edeState=e}i(u,o),t.exports=u,u.create=function(t){return new u(t)},u.prototype._update=function(t,e,r,n){var i=this._edeState;i.ciphers[0]._update(t,e,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad},function(t,e,r){var n=r(45),i=r(91),o=r(1).Buffer,a=r(92),s=r(12),u=r(27),l=r(28);function c(t,e,r){s.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(r),this._mode=t,this._autopadding=!0}r(0)(c,s),c.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return o.concat(n)};var h=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function p(t,e,r){var s=n[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof r&&(r=o.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===s.type?new a(s.module,e,r):"auth"===s.type?new i(s.module,e,r):new c(s.module,e,r)}c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return o.concat([this.cache,e])},e.createCipheriv=p,e.createCipher=function(t,e){var r=n[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=l(e,!1,r.key,r.iv);return p(t,i.key,i.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,r){var n=r(23);e.encrypt=function(t,e){var r=n(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},e.decrypt=function(t,e){var r=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return n(i,r)}},function(t,e,r){var n=r(1).Buffer,i=r(23);function o(t,e,r){var o=e.length,a=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=n.concat([t._prev,r?e:a]),a}e.encrypt=function(t,e,r){for(var i,a=n.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=n.allocUnsafe(0)),!(t._cache.length<=e.length)){a=n.concat([a,o(t,e,r)]);break}i=t._cache.length,a=n.concat([a,o(t,e.slice(0,i),r)]),e=e.slice(i)}return a}},function(t,e,r){var n=r(1).Buffer;function i(t,e,r){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=n.concat([t._prev.slice(1),n.from([r?e:i])]),i}e.encrypt=function(t,e,r){for(var o=e.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],r);return a}},function(t,e,r){var n=r(1).Buffer;function i(t,e,r){for(var n,i,a=-1,s=0;++a<8;)n=e&1<<7-a?128:0,s+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^n))>>a%8,t._prev=o(t._prev,r?n:i);return s}function o(t,e){var r=t.length,i=-1,o=n.allocUnsafe(t.length);for(t=n.concat([t,n.from([e])]);++i<r;)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,r){for(var o=e.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],r);return a}},function(t,e,r){(function(t){var n=r(23);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),n(r,o)}}).call(this,r(3).Buffer)},function(t,e,r){var n=r(1).Buffer,i=n.alloc(16,0);function o(t){var e=n.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}a.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){for(var t,e,r,n=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!=(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=o(i)},a.prototype.update=function(t){var e;for(this.cache=n.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=a},function(t,e,r){var n=r(91),i=r(1).Buffer,o=r(45),a=r(92),s=r(12),u=r(27),l=r(28);function c(t,e,r){s.call(this),this._cache=new h,this._last=void 0,this._cipher=new u.AES(e),this._prev=i.from(r),this._mode=t,this._autopadding=!0}function h(){this.cache=i.allocUnsafe(0)}function f(t,e,r){var s=o[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=i.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof e&&(e=i.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new a(s.module,e,r,!0):"auth"===s.type?new n(s.module,e,r,!0):new c(s.module,e,r)}r(0)(c,s),c.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return i.concat(n)},c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},h.prototype.add=function(t){this.cache=i.concat([this.cache,t])},h.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var r=o[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=l(e,!1,r.key,r.iv);return f(t,n.key,n.iv)},e.createDecipheriv=f},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,r){(function(t){var n=r(93),i=r(279),o=r(280);var a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var r=new t(i[e].prime,"hex"),n=new t(i[e].gen,"hex");return new o(r,n)},e.createDiffieHellman=e.DiffieHellman=function e(r,i,s,u){return t.isBuffer(i)||void 0===a[i]?e(r,"binary",i,s):(i=i||"binary",u=u||"binary",s=s||new t([2]),t.isBuffer(s)||(s=new t(s,u)),"number"==typeof r?new o(n(r,s),s,!0):(t.isBuffer(r)||(r=new t(r,i)),new o(r,s,!0)))}}).call(this,r(3).Buffer)},function(t,e){},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(277).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,E=0|a[5],O=8191&E,T=E>>>13,P=0|a[6],I=8191&P,k=P>>>13,R=0|a[7],L=8191&R,C=R>>>13,A=0|a[8],N=8191&A,j=A>>>13,F=0|a[9],D=8191&F,B=F>>>13,z=0|s[0],G=8191&z,q=z>>>13,U=0|s[1],V=8191&U,W=U>>>13,Y=0|s[2],Z=8191&Y,H=Y>>>13,X=0|s[3],K=8191&X,J=X>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,G)|0))<<13)|0;l=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,G),i=(i=Math.imul(d,q))+Math.imul(m,G)|0,o=Math.imul(m,q);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,G),i=(i=Math.imul(g,q))+Math.imul(v,G)|0,o=Math.imul(v,q),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,W)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,W)|0;var vt=(l+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,q))+Math.imul(w,G)|0,o=Math.imul(w,q),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,W)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,q))+Math.imul(S,G)|0,o=Math.imul(S,q),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,G),i=(i=Math.imul(O,q))+Math.imul(T,G)|0,o=Math.imul(T,q),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,W)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,G),i=(i=Math.imul(I,q))+Math.imul(k,G)|0,o=Math.imul(k,q),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,W)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,q))+Math.imul(C,G)|0,o=Math.imul(C,q),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,q))+Math.imul(j,G)|0,o=Math.imul(j,q),n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var St=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,q))+Math.imul(B,G)|0,o=Math.imul(B,q),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,W)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,W)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,W))+Math.imul(B,V)|0,o=Math.imul(B,W),n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,H))+Math.imul(B,Z)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Pt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,dt)|0))<<13)|0;l=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Lt=(l+(n=n+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(C,dt)|0))<<13)|0;l=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var Ct=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var At=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(At>>>26)|0,At&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=Et,u[10]=Ot,u[11]=Tt,u[12]=Pt,u[13]=It,u[14]=kt,u[15]=Rt,u[16]=Lt,u[17]=Ct,u[18]=At,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(x,v),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e){},function(t,e){},function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,e,r){(function(e){var n=r(94),i=new(r(95)),o=new n(24),a=new n(11),s=new n(10),u=new n(3),l=new n(7),c=r(93),h=r(15);function f(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._pub=new n(t),this}function p(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._priv=new n(t),this}t.exports=m;var d={};function m(t,e,r){this.setGenerator(e),this.__prime=new n(t),this._prime=n.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=f,this.setPrivateKey=p):this._primeCode=8}function y(t,r){var n=new e(t.toArray());return r?n.toString(r):n}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in d)return d[n];var h,f=0;if(t.isEven()||!c.simpleSieve||!c.fermatTest(t)||!i.test(t))return f+=1,f+="02"===r||"05"===r?8:4,d[n]=f,f;switch(i.test(t.shrn(1))||(f+=2),r){case"02":t.mod(o).cmp(a)&&(f+=8);break;case"05":(h=t.mod(s)).cmp(u)&&h.cmp(l)&&(f+=8);break;default:f+=4}return d[n]=f,f}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new n(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var r=(t=(t=new n(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new e(r.toArray()),o=this.getPrime();if(i.length<o.length){var a=new e(o.length-i.length);a.fill(0),i=e.concat([a,i])}return i},m.prototype.getPublicKey=function(t){return y(this._pub,t)},m.prototype.getPrivateKey=function(t){return y(this._priv,t)},m.prototype.getPrime=function(t){return y(this.__prime,t)},m.prototype.getGenerator=function(t){return y(this._gen,t)},m.prototype.setGenerator=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.__gen=t,this._gen=new n(t),this}}).call(this,r(3).Buffer)},function(t,e,r){var n=r(1).Buffer,i=r(19),o=r(64),a=r(0),s=r(282),u=r(313),l=r(80);function c(t){o.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){o.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new c(t)}function p(t){return new h(t)}Object.keys(l).forEach((function(t){l[t].id=n.from(l[t].id,"hex"),l[t.toLowerCase()]=l[t]})),a(c,o.Writable),c.prototype._write=function(t,e,r){this._hash.update(t),r()},c.prototype.update=function(t,e){return"string"==typeof t&&(t=n.from(t,e)),this._hash.update(t),this},c.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),n=s(r,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},a(h,o.Writable),h.prototype._write=function(t,e,r){this._hash.update(t),r()},h.prototype.update=function(t,e){return"string"==typeof t&&(t=n.from(t,e)),this._hash.update(t),this},h.prototype.verify=function(t,e,r){"string"==typeof e&&(e=n.from(e,r)),this.end();var i=this._hash.digest();return u(e,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:p,createSign:f,createVerify:p}},function(t,e,r){var n=r(1).Buffer,i=r(78),o=r(47),a=r(49).ec,s=r(48),u=r(30),l=r(107);function c(t,e,r,o){if((t=n.from(t.toArray())).length<e.byteLength()){var a=n.alloc(e.byteLength()-t.length);t=n.concat([a,t])}var s=r.length,u=function(t,e){t=(t=h(t,e)).mod(e);var r=n.from(t.toArray());if(r.length<e.byteLength()){var i=n.alloc(e.byteLength()-r.length);r=n.concat([i,r])}return r}(r,e),l=n.alloc(s);l.fill(1);var c=n.alloc(s);return c=i(o,c).update(l).update(n.from([0])).update(t).update(u).digest(),l=i(o,c).update(l).digest(),{k:c=i(o,c).update(l).update(n.from([1])).update(t).update(u).digest(),v:l=i(o,c).update(l).digest()}}function h(t,e){var r=new s(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function f(t,e,r){var o,a;do{for(o=n.alloc(0);8*o.length<t.bitLength();)e.v=i(r,e.k).update(e.v).digest(),o=n.concat([o,e.v]);a=h(o,t),e.k=i(r,e.k).update(e.v).update(n.from([0])).digest(),e.v=i(r,e.k).update(e.v).digest()}while(-1!==a.cmp(t));return a}function p(t,e,r,n){return t.toRed(s.mont(r)).redPow(e).fromRed().mod(n)}t.exports=function(t,e,r,i,d){var m=u(e);if(m.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(t,e){var r=l[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var i=new a(r).keyFromPrivate(e.privateKey).sign(t);return n.from(i.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==i)throw new Error("wrong private key type");return function(t,e,r){var i,o=e.params.priv_key,a=e.params.p,u=e.params.q,l=e.params.g,d=new s(0),m=h(t,u).mod(u),y=!1,g=c(o,u,t,r);for(;!1===y;)i=f(u,g,r),d=p(l,i,a,u),0===(y=i.invm(u).imul(m.add(o.mul(d))).mod(u)).cmpn(0)&&(y=!1,d=new s(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t));128&e[0]&&(e=[0].concat(e));var r=[48,t.length+e.length+4,2,t.length];return r=r.concat(t,[2,e.length],e),n.from(r)}(d,y)}(t,m,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");t=n.concat([d,t]);for(var y=m.modulus.byteLength(),g=[0,1];t.length+g.length+1<y;)g.push(255);g.push(0);for(var v=-1;++v<t.length;)g.push(t[v]);return o(g,m)},t.exports.getKey=c,t.exports.makeKey=f},function(t,e){},function(t){t.exports=JSON.parse('{"_from":"elliptic@^6.5.3","_id":"elliptic@6.5.4","_inBundle":false,"_integrity":"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.5.3","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.5.3","saveSpec":null,"fetchSpec":"^6.5.3"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz","_shasum":"da37cebd31e79a1367e941b592ed1fbebd58abbb","_spec":"elliptic@^6.5.3","_where":"/home/carmenmarquez/proyectos/IGN/api-cnig/api-ign-js/node_modules/browserify-sign","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.4"}')},function(t,e){},function(t,e,r){"use strict";var n=r(7),i=r(10),o=r(0),a=r(29),s=n.assert;function u(t){a.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(t,e,r,n){a.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(t,e,r,n){a.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?r=o[0]:(r=o[1],s(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new i(t.a,16),b:new i(t.b,16)}})):this._getEndoBasis(r)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),r=new i(2).toRed(e).redInvm(),n=r.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,r,n,o,a,s,u,l,c,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,p=this.n.clone(),d=new i(1),m=new i(0),y=new i(0),g=new i(1),v=0;0!==f.cmpn(0);){var _=p.div(f);l=p.sub(_.mul(f)),c=y.sub(_.mul(d));var b=g.sub(_.mul(m));if(!n&&l.cmp(h)<0)e=u.neg(),r=d,n=l.neg(),o=c;else if(n&&2==++v)break;u=l,p=f,f=l,y=d,d=c,g=m,m=b}a=l.neg(),s=c;var w=n.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(w)>=0&&(a=e,s=r),n.negative&&(n=n.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:n,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),l=o.mul(n.b);return{k1:t.sub(a).sub(s),k2:u.add(l).neg()}},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(e&&!o||!e&&o)&&(n=n.redNeg()),this.point(t,n)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var l=this._wnafMulAdd(1,n,i,2*o,r),c=0;c<2*o;c++)n[c]=null,i[c]=null;return l},o(l,a.BasePoint),u.prototype.point=function(t,e,r){return new l(this,t,e,r)},u.prototype.pointFromJSON=function(t,e){return l.fromJSON(this,t,e)},l.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},l.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},l.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},l.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},l.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(c,a.BasePoint),u.prototype.jpoint=function(t,e,r){return new c(this,t,e,r)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),h=n.redMul(l),f=u.redSqr().redIAdd(c).redISub(h).redISub(h),p=u.redMul(h.redISub(f)).redISub(o.redMul(c)),d=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,p,d)},c.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),c=r.redMul(u),h=s.redSqr().redIAdd(l).redISub(c).redISub(c),f=s.redMul(c.redISub(h)).redISub(i.redMul(l)),p=this.z.redMul(a);return this.curve.jpoint(h,f,p)},c.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),l=a.redAdd(a);for(e=0;e<t;e++){var c=o.redSqr(),h=l.redSqr(),f=h.redSqr(),p=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(u)),d=o.redMul(h),m=p.redSqr().redISub(d.redAdd(d)),y=d.redISub(m),g=p.redMul(y);g=g.redIAdd(g).redISub(f);var v=l.redMul(s);e+1<t&&(u=u.redMul(f)),o=m,s=v,l=g}return this.curve.jpoint(o,l.redMul(i),s)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),t=u,e=s.redMul(a.redISub(u)).redISub(l),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(c).redISub(f);p=p.redIAdd(p);var d=c.redAdd(c).redIAdd(c),m=d.redSqr(),y=f.redIAdd(f);y=(y=y.redIAdd(y)).redIAdd(y),t=m.redISub(p).redISub(p),e=d.redMul(p.redISub(t)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},c.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),e=s.redMul(a.redISub(u)).redISub(l),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),p=this.x.redSub(c).redMul(this.x.redAdd(c));p=p.redAdd(p).redIAdd(p);var d=f.redIAdd(f),m=(d=d.redIAdd(d)).redAdd(d);t=p.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var y=h.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),e=p.redMul(d.redISub(t)).redISub(y)}return this.curve.jpoint(t,e,r)},c.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),l=(u=u.redIAdd(u)).redMul(a),c=s.redSqr().redISub(l.redAdd(l)),h=l.redISub(c),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=s.redMul(h).redISub(f),d=r.redAdd(r).redMul(n);return this.curve.jpoint(c,p,d)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),c=e.redMul(l);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(s).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(h,f,p)},c.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},c.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},c.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,r){"use strict";var n=r(10),i=r(0),o=r(29),a=r(7);function s(t){o.call(this,"mont",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,r){o.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(e,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(s,o),t.exports=s,s.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===n.redSqrt().redSqr().cmp(n)},i(u,o.BasePoint),s.prototype.decodePoint=function(t,e){return this.point(a.toArray(t,e),1)},s.prototype.point=function(t,e){return new u(this,t,e)},s.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),n=t.redMul(e),i=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),a=i.redMul(n),s=e.z.redMul(o.redAdd(a).redSqr()),u=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},u.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,r){"use strict";var n=r(7),i=r(10),o=r(0),a=r(29),s=n.assert;function u(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,a.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function l(t,e,r,n,o){a.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,a),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=n.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(e&&!u||!e&&u)&&(s=s.redNeg()),this.point(t,s)},u.prototype.pointFromY=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},o(l,a.BasePoint),u.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},u.prototype.point=function(t,e,r,n){return new l(this,t,e,r,n)},l.fromJSON=function(t,e){return new l(t,e[0],e[1],e[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),a=o.redSub(r),s=n.redSub(e),u=i.redMul(a),l=o.redMul(s),c=i.redMul(s),h=a.redMul(o);return this.curve.point(u,l,h,c)},l.prototype._projDbl=function(){var t,e,r,n,i,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var l=(n=this.curve._mulA(s)).redAdd(u);this.zOne?(t=a.redSub(s).redSub(u).redMul(l.redSub(this.curve.two)),e=l.redMul(n.redSub(u)),r=l.redSqr().redSub(l).redSub(l)):(i=this.z.redSqr(),o=l.redSub(i).redISub(i),t=a.redSub(s).redISub(u).redMul(o),e=l.redMul(n.redSub(u)),r=l.redMul(o))}else n=s.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),t=this.curve._mulC(a.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(s.redISub(u)),r=n.redMul(o);return this.curve.point(t,e,r)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),a=i.redSub(n),s=i.redAdd(n),u=r.redAdd(e),l=o.redMul(a),c=s.redMul(u),h=o.redMul(u),f=a.redMul(s);return this.curve.point(l,c,f,h)},l.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),u=i.redSub(s),l=i.redAdd(s),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),h=n.redMul(u).redMul(c);return this.curve.twisted?(e=n.redMul(l).redMul(a.redSub(this.curve._mulA(o))),r=u.redMul(l)):(e=n.redMul(l).redMul(a.redSub(o)),r=this.curve._mulC(u).redMul(l)),this.curve.point(h,e,r)},l.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},l.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},l.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},l.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),0===this.x.cmp(e))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},function(t,e,r){"use strict";e.sha1=r(290),e.sha224=r(291),e.sha256=r(99),e.sha384=r(292),e.sha512=r(100)},function(t,e,r){"use strict";var n=r(8),i=r(24),o=r(98),a=n.rotl32,s=n.sum32,u=n.sum32_5,l=o.ft_1,c=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,c),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=a(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],c=this.h[2],f=this.h[3],p=this.h[4];for(n=0;n<r.length;n++){var d=~~(n/20),m=u(a(i,5),l(d,o,c,f),p,r[n],h[d]);p=f,f=c,c=a(o,30),o=i,i=m}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],c),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],p)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(8),i=r(99);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(t,e,r){"use strict";var n=r(8),i=r(100);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(t,e,r){"use strict";var n=r(8),i=r(24),o=n.rotl32,a=n.sum32,s=n.sum32_3,u=n.sum32_4,l=i.BlockHash;function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function p(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(c,l),e.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],l=this.h[3],c=this.h[4],v=r,_=n,b=i,w=l,x=c,M=0;M<80;M++){var S=a(o(u(r,h(M,n,i,l),t[d[M]+e],f(M)),y[M]),c);r=c,c=l,l=o(i,10),i=n,n=S,S=a(o(u(v,h(79-M,_,b,w),t[m[M]+e],p(M)),g[M]),x),v=x,x=w,w=o(b,10),b=_,_=S}S=s(this.h[1],i,w),this.h[1]=s(this.h[2],l,x),this.h[2]=s(this.h[3],c,v),this.h[3]=s(this.h[4],r,_),this.h[4]=s(this.h[0],n,b),this.h[0]=S},c.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,r){"use strict";var n=r(8),i=r(6);function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,r){"use strict";var n=r(10),i=r(297),o=r(7),a=r(50),s=r(46),u=o.assert,l=r(298),c=r(299);function h(t){if(!(this instanceof h))return new h(t);"string"==typeof t&&(u(Object.prototype.hasOwnProperty.call(a,t),"Unknown curve "+t),t=a[t]),t instanceof a.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=h,h.prototype.keyPair=function(t){return new l(this,t)},h.prototype.keyFromPrivate=function(t,e){return l.fromPrivate(this,t,e)},h.prototype.keyFromPublic=function(t,e){return l.fromPublic(this,t,e)},h.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||s(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var a=new n(e.generate(r));if(!(a.cmp(o)>0))return a.iaddn(1),this.keyFromPrivate(a)}},h.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},h.prototype.sign=function(t,e,r,o){"object"==typeof r&&(o=r,r=null),o||(o={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new n(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),u=t.toArray("be",a),l=new i({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new n(1)),f=0;;f++){var p=o.k?o.k(f):new n(l.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(h)>=0)){var d=this.g.mul(p);if(!d.isInfinity()){var m=d.getX(),y=m.umod(this.n);if(0!==y.cmpn(0)){var g=p.invm(this.n).mul(y.mul(e.getPrivate()).iadd(t));if(0!==(g=g.umod(this.n)).cmpn(0)){var v=(d.getY().isOdd()?1:0)|(0!==m.cmp(y)?2:0);return o.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),v^=1),new c({r:y,s:g,recoveryParam:v})}}}}}},h.prototype.verify=function(t,e,r,i){t=this._truncateToN(new n(t,16)),r=this.keyFromPublic(r,i);var o=(e=new c(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,u=a.invm(this.n),l=u.mul(t).umod(this.n),h=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(l,r.getPublic(),h)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(l,r.getPublic(),h)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(t,e,r,i){u((3&r)===r,"The recovery param is more than two bits"),e=new c(e,i);var o=this.n,a=new n(t),s=e.r,l=e.s,h=1&r,f=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");s=f?this.curve.pointFromX(s.add(this.curve.n),h):this.curve.pointFromX(s,h);var p=e.r.invm(o),d=o.sub(a).mul(p).umod(o),m=l.mul(p).umod(o);return this.g.mulAdd(d,s,m)},h.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new c(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},function(t,e,r){"use strict";var n=r(51),i=r(96),o=r(6);function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),r=i.toArray(t.nonce,t.nonceEnc||"hex"),n=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}t.exports=a,a.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=i.toArray(t,e),r=i.toArray(r,n),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},a.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(r),this._reseed++,i.encode(a,e)}},function(t,e,r){"use strict";var n=r(10),i=r(7).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,r){return e instanceof o?e:new o(t,{pub:e,pubEnc:r})},o.fromPrivate=function(t,e,r){return e instanceof o?e:new o(t,{priv:e,privEnc:r})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new n(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.validate()||i(t.validate(),"public point not validated"),t.mul(this.priv).getX()},o.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,r){"use strict";var n=r(10),i=r(7),o=i.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new n(t.r,16),this.s=new n(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=t[a],i>>>=0;return!(i<=127)&&(e.place=a,i)}function l(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function c(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}t.exports=a,a.prototype._importDER=function(t,e){t=i.toArray(t,e);var r=new s;if(48!==t[r.place++])return!1;var o=u(t,r);if(!1===o)return!1;if(o+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var a=u(t,r);if(!1===a)return!1;var l=t.slice(r.place,a+r.place);if(r.place+=a,2!==t[r.place++])return!1;var c=u(t,r);if(!1===c)return!1;if(t.length!==c+r.place)return!1;var h=t.slice(r.place,c+r.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new n(l),this.s=new n(h),this.recoveryParam=null,!0},a.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=l(e),r=l(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];c(n,e.length),(n=n.concat(e)).push(2),c(n,r.length);var o=n.concat(r),a=[48];return c(a,o.length),a=a.concat(o),i.encode(a,t)}},function(t,e,r){"use strict";var n=r(51),i=r(50),o=r(7),a=o.assert,s=o.parseBytes,u=r(301),l=r(302);function c(t){if(a("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof c))return new c(t);t=i[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=n.sha512}t.exports=c,c.prototype.sign=function(t,e){t=s(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),a=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),u=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},c.prototype.verify=function(t,e,r){t=s(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(i)).eq(o)},c.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},c.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},c.prototype.makeSignature=function(t){return t instanceof l?t:new l(this,t)},c.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},c.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),n=0!=(128&t[e]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},c.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(t){return o.intFromLE(t)},c.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,r){"use strict";var n=r(7),i=n.assert,o=n.parseBytes,a=n.cachedProperty;function s(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}s.fromPublic=function(t,e){return e instanceof s?e:new s(t,{pub:e})},s.fromSecret=function(t,e){return e instanceof s?e:new s(t,{secret:e})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(s,"privBytes",(function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),a(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},s.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},s.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),t)},s.prototype.getPublic=function(t){return n.encode(this.pubBytes(),t)},t.exports=s},function(t,e,r){"use strict";var n=r(10),i=r(7),o=i.assert,a=i.cachedProperty,s=i.parseBytes;function u(t,e){this.eddsa=t,"object"!=typeof e&&(e=s(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof n&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}a(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},function(t,e,r){"use strict";var n=r(101);e.certificate=r(310);var i=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=i;var o=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=o;var a=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}));e.PublicKey=a;var s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=u;var l=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=l;var c=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=c,e.DSAparam=n.define("DSAparam",(function(){this.int()}));var h=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=h;var f=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(t,e){},function(t,e,r){"use strict";const n=r(103),i=r(105),o=r(0);function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){const e=this.name;function r(t){this._initNamed(t,e)}return o(r,t),r.prototype._initNamed=function(e,r){t.call(this,e,r)},new r(this)},a.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},a.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},a.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(n[t])),this.encoders[t]},a.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},function(t,e,r){"use strict";const n=r(0),i=r(104);function o(t){i.call(this,t),this.enc="pem"}n(o,i),t.exports=o,o.prototype.encode=function(t,e){const r=i.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let t=0;t<r.length;t+=64)n.push(r.slice(t,t+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}},function(t,e,r){"use strict";const n=r(0),i=r(52).Buffer,o=r(106);function a(t){o.call(this,t),this.enc="pem"}n(a,o),t.exports=a,a.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,u=-1;for(let t=0;t<r.length;t++){const e=r[t].match(a);if(null!==e&&e[2]===n){if(-1!==s){if("END"!==e[1])break;u=t;break}if("BEGIN"!==e[1])break;s=t}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+n);const l=r.slice(s+1,u).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const c=i.from(l,"base64");return o.prototype.decode.call(this,c,e)}},function(t,e,r){"use strict";const n=e;n.Reporter=r(54).Reporter,n.DecoderBuffer=r(25).DecoderBuffer,n.EncoderBuffer=r(25).EncoderBuffer,n.Node=r(53)},function(t,e,r){"use strict";const n=e;n._reverse=function(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e},n.der=r(55)},function(t,e,r){"use strict";var n=r(101),i=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())})),u=n.define("RelativeDistinguishedName",(function(){this.setof(o)})),l=n.define("RDNSequence",(function(){this.seqof(u)})),c=n.define("Name",(function(){this.choice({rdnSequence:this.use(l)})})),h=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),f=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),p=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(c),this.key("validity").use(h),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),d=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())}));t.exports=d},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,e,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=r(28),s=r(44),u=r(1).Buffer;t.exports=function(t,e){var r,l=t.toString(),c=l.match(n);if(c){var h="aes"+c[1],f=u.from(c[2],"hex"),p=u.from(c[3].replace(/[\r\n]/g,""),"base64"),d=a(e,f.slice(0,8),parseInt(c[1],10)).key,m=[],y=s.createDecipheriv(h,d,f);m.push(y.update(p)),m.push(y.final()),r=u.concat(m)}else{var g=l.match(o);r=u.from(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(i)[1],data:r}}},function(t,e,r){var n=r(1).Buffer,i=r(48),o=r(49).ec,a=r(30),s=r(107);function u(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,r,l,c){var h=a(r);if("ec"===h.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(t,e,r){var n=s[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new o(n),a=r.data.subjectPrivateKey.data;return i.verify(e,t,a)}(t,e,h)}if("dsa"===h.type){if("dsa"!==l)throw new Error("wrong public key type");return function(t,e,r){var n=r.data.p,o=r.data.q,s=r.data.g,l=r.data.pub_key,c=a.signature.decode(t,"der"),h=c.s,f=c.r;u(h,o),u(f,o);var p=i.mont(n),d=h.invm(o);return 0===s.toRed(p).redPow(new i(e).mul(d).mod(o)).fromRed().mul(l.toRed(p).redPow(f.mul(d).mod(o)).fromRed()).mod(n).mod(o).cmp(f)}(t,e,h)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");e=n.concat([c,e]);for(var f=h.modulus.byteLength(),p=[1],d=0;e.length+p.length+2<f;)p.push(255),d++;p.push(0);for(var m=-1;++m<e.length;)p.push(e[m]);p=n.from(p);var y=i.mont(h.modulus);t=(t=new i(t).toRed(y)).redPow(new i(h.publicExponent)),t=n.from(t.fromRed().toArray());var g=d<8?1:0;for(f=Math.min(t.length,p.length),t.length!==p.length&&(g=1),m=-1;++m<f;)g|=t[m]^p[m];return 0===g}},function(t,e,r){(function(e){var n=r(49),i=r(315);t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function s(t,r,n){Array.isArray(t)||(t=t.toArray());var i=new e(t);if(n&&i.length<n){var o=new e(n-i.length);o.fill(0),i=e.concat([o,i])}return r?i.toString(r):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,r,n){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,r){r=r||"utf8",e.isBuffer(t)||(t=new e(t,r));var n=new i(t);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,r(3).Buffer)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(316).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,E=0|a[5],O=8191&E,T=E>>>13,P=0|a[6],I=8191&P,k=P>>>13,R=0|a[7],L=8191&R,C=R>>>13,A=0|a[8],N=8191&A,j=A>>>13,F=0|a[9],D=8191&F,B=F>>>13,z=0|s[0],G=8191&z,q=z>>>13,U=0|s[1],V=8191&U,W=U>>>13,Y=0|s[2],Z=8191&Y,H=Y>>>13,X=0|s[3],K=8191&X,J=X>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,G)|0))<<13)|0;l=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,G),i=(i=Math.imul(d,q))+Math.imul(m,G)|0,o=Math.imul(m,q);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,G),i=(i=Math.imul(g,q))+Math.imul(v,G)|0,o=Math.imul(v,q),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,W)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,W)|0;var vt=(l+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,G),i=(i=Math.imul(b,q))+Math.imul(w,G)|0,o=Math.imul(w,q),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,W)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,q))+Math.imul(S,G)|0,o=Math.imul(S,q),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,G),i=(i=Math.imul(O,q))+Math.imul(T,G)|0,o=Math.imul(T,q),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,W)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,G),i=(i=Math.imul(I,q))+Math.imul(k,G)|0,o=Math.imul(k,q),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,W)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,q))+Math.imul(C,G)|0,o=Math.imul(C,q),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,q))+Math.imul(j,G)|0,o=Math.imul(j,q),n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(T,K)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var St=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,q))+Math.imul(B,G)|0,o=Math.imul(B,q),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,W)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,W)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,W))+Math.imul(B,V)|0,o=Math.imul(B,W),n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,Z)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,H))+Math.imul(B,Z)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Pt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,dt)|0))<<13)|0;l=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Lt=(l+(n=n+Math.imul(L,dt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(C,dt)|0))<<13)|0;l=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var Ct=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var At=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(At>>>26)|0,At&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=Et,u[10]=Ot,u[11]=Tt,u[12]=Pt,u[13]=It,u[14]=kt,u[15]=Rt,u[16]=Lt,u[17]=Ct,u[18]=At,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(x,v),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e){},function(t,e,r){e.publicEncrypt=r(318),e.privateDecrypt=r(320),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}},function(t,e,r){var n=r(30),i=r(15),o=r(19),a=r(108),s=r(109),u=r(56),l=r(110),c=r(47),h=r(1).Buffer;t.exports=function(t,e,r){var f;f=t.padding?t.padding:r?1:4;var p,d=n(t);if(4===f)p=function(t,e){var r=t.modulus.byteLength(),n=e.length,l=o("sha1").update(h.alloc(0)).digest(),c=l.length,f=2*c;if(n>r-f-2)throw new Error("message too long");var p=h.alloc(r-n-f-2),d=r-c-1,m=i(c),y=s(h.concat([l,p,h.alloc(1,1),e],d),a(m,d)),g=s(m,a(y,c));return new u(h.concat([h.alloc(1),g,y],r))}(d,e);else if(1===f)p=function(t,e,r){var n,o=e.length,a=t.modulus.byteLength();if(o>a-11)throw new Error("message too long");n=r?h.alloc(a-o-3,255):function(t){var e,r=h.allocUnsafe(t),n=0,o=i(2*t),a=0;for(;n<t;)a===o.length&&(o=i(2*t),a=0),(e=o[a++])&&(r[n++]=e);return r}(a-o-3);return new u(h.concat([h.from([0,r?1:2]),n,h.alloc(1),e],a))}(d,e,r);else{if(3!==f)throw new Error("unknown padding");if((p=new u(e)).cmp(d.modulus)>=0)throw new Error("data too long for modulus")}return r?c(p,d):l(p,d)}},function(t,e){},function(t,e,r){var n=r(30),i=r(108),o=r(109),a=r(56),s=r(47),u=r(19),l=r(110),c=r(1).Buffer;t.exports=function(t,e,r){var h;h=t.padding?t.padding:r?1:4;var f,p=n(t),d=p.modulus.byteLength();if(e.length>d||new a(e).cmp(p.modulus)>=0)throw new Error("decryption error");f=r?l(new a(e),p):s(e,p);var m=c.alloc(d-f.length);if(f=c.concat([m,f],d),4===h)return function(t,e){var r=t.modulus.byteLength(),n=u("sha1").update(c.alloc(0)).digest(),a=n.length;if(0!==e[0])throw new Error("decryption error");var s=e.slice(1,a+1),l=e.slice(a+1),h=o(s,i(l,a)),f=o(l,i(h,r-a-1));if(function(t,e){t=c.from(t),e=c.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));var i=-1;for(;++i<n;)r+=t[i]^e[i];return r}(n,f.slice(0,a)))throw new Error("decryption error");var p=a;for(;0===f[p];)p++;if(1!==f[p++])throw new Error("decryption error");return f.slice(p)}(p,f);if(1===h)return function(t,e,r){var n=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var a=e.slice(2,i-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,f,r);if(3===h)return f;throw new Error("unknown padding")}},function(t,e,r){"use strict";(function(t,n){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=r(1),a=r(15),s=o.Buffer,u=o.kMaxLength,l=t.crypto||t.msCrypto,c=Math.pow(2,32)-1;function h(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function f(t,e,r){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>u)throw new RangeError("buffer too small")}function p(t,e,r,i){if(n.browser){var o=t.buffer,s=new Uint8Array(o,e,r);return l.getRandomValues(s),i?void n.nextTick((function(){i(null,t)})):t}if(!i)return a(r).copy(t,e),t;a(r,(function(r,n){if(r)return i(r);n.copy(t,e),i(null,t)}))}l&&l.getRandomValues||!n.browser?(e.randomFill=function(e,r,n,i){if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof r)i=r,r=0,n=e.length;else if("function"==typeof n)i=n,n=e.length-r;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return h(r,e.length),f(n,r,e.length),p(e,r,n,i)},e.randomFillSync=function(e,r,n){void 0===r&&(r=0);if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');h(r,e.length),void 0===n&&(n=e.length-r);return f(n,r,e.length),p(e,r,n)}):(e.randomFill=i,e.randomFillSync=i)}).call(this,r(5),r(4))},function(t,e,r){"use strict";var n=r(323),i=r(13),o=r(113),a=r(57),s=r(114),u=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(a[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(a[r]);this._dict_set=!0}}function c(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}l.prototype.push=function(t,e){var r,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(r=n.deflate(s,a))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),s.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=l,e.deflate=c,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},function(t,e,r){"use strict";var n,i=r(13),o=r(324),a=r(111),s=r(112),u=r(57);function l(t,e){return t.msg=u[e],e}function c(t){return(t<<1)-(t>4?9:0)}function h(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function p(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function d(t,e){t.pending_buf[t.pending++]=e}function m(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function y(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+258,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(r=e)+a]===d&&l[r+a-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do{}while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<f);if(n=258-(f-o),o=f-258,n>a){if(t.match_start=e,a=n,n>=s)break;p=l[o+a-1],d=l[o+a]}}}while((e=h[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function g(t){var e,r,n,o,u,l,c,h,f,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-262)){i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--r);e=r=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--r);o+=d}if(0===t.strm.avail_in)break;if(l=t.strm,c=t.window,h=t.strstart+t.lookahead,f=o,p=void 0,(p=l.avail_in)>f&&(p=f),r=0===p?0:(l.avail_in-=p,i.arraySet(c,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=a(l.adler,c,p,h):2===l.state.wrap&&(l.adler=s(l.adler,c,p,h)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function v(t,e){for(var r,n;;){if(t.lookahead<262){if(g(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}function _(t,e){for(var r,n,i;;){if(t.lookahead<262){if(g(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(p(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&p(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}function b(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):l(t,-2)}function M(t){var e,r=x(t);return 0===r&&((e=t.state).window_size=2*e.w_size,h(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function S(t,e,r,n,o,a){if(!t)return-2;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||8!==r||n<8||n>15||e<0||e>9||a<0||a>4)return l(t,-2);8===n&&(n=9);var u=new w;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,M(t)}n=[new b(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(g(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,p(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(p(t,!1),t.strm.avail_out),1)})),new b(4,4,8,4,v),new b(4,5,16,8,v),new b(4,6,32,32,v),new b(4,4,16,16,_),new b(8,16,32,32,_),new b(8,16,128,128,_),new b(8,32,128,256,_),new b(32,128,258,1024,_),new b(32,258,258,4096,_)],e.deflateInit=function(t,e){return S(t,e,8,15,8,0)},e.deflateInit2=S,e.deflateReset=M,e.deflateResetKeep=x,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var r,i,a,u;if(!t||!t.state||e>5||e<0)return t?l(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return l(t,0===t.avail_out?-5:-2);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,d(i,31),d(i,139),d(i,8),i.gzhead?(d(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),d(i,255&i.gzhead.time),d(i,i.gzhead.time>>8&255),d(i,i.gzhead.time>>16&255),d(i,i.gzhead.time>>24&255),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(d(i,255&i.gzhead.extra.length),d(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(d(i,0),d(i,0),d(i,0),d(i,0),d(i,0),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,3),i.status=113);else{var y=8+(i.w_bits-8<<4)<<8;y|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=32),y+=31-y%31,i.status=113,m(i,y),0!==i.strstart&&(m(i,t.adler>>>16),m(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending!==i.pending_buf_size));)d(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&f(t),i.pending+2<=i.pending_buf_size&&(d(i,255&t.adler),d(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(f(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&c(e)<=c(r)&&4!==e)return l(t,-5);if(666===i.status&&0!==t.avail_in)return l(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var v=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(g(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=258){if(g(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=t.strstart+258;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=258-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(h(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),f(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(d(i,255&t.adler),d(i,t.adler>>8&255),d(i,t.adler>>16&255),d(i,t.adler>>24&255),d(i,255&t.total_in),d(i,t.total_in>>8&255),d(i,t.total_in>>16&255),d(i,t.total_in>>24&255)):(m(i,t.adler>>>16),m(i,65535&t.adler)),f(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?l(t,-2):(t.state=null,113===e?l(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var r,n,o,s,u,l,c,f,p=e.length;if(!t||!t.state)return-2;if(2===(s=(r=t.state).wrap)||1===s&&42!==r.status||r.lookahead)return-2;for(1===s&&(t.adler=a(t.adler,e,p,0)),r.wrap=0,p>=r.w_size&&(0===s&&(h(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new i.Buf8(r.w_size),i.arraySet(f,e,p-r.w_size,r.w_size,0),e=f,p=r.w_size),u=t.avail_in,l=t.next_in,c=t.input,t.avail_in=p,t.next_in=0,t.input=e,g(r);r.lookahead>=3;){n=r.strstart,o=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=2,g(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=u,r.wrap=s,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,r){"use strict";var n=r(13);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var c=new Array(60);i(c);var h=new Array(512);i(h);var f=new Array(256);i(f);var p=new Array(29);i(p);var d,m,y,g=new Array(30);function v(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function _(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?h[t]:h[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function M(t,e,r){x(t,r[2*e],r[2*e+1])}function S(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function E(t,e,r){var n,i,o=new Array(16),a=0;for(n=1;n<=15;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=S(o[s]++,s))}}function O(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function T(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function I(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&P(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!P(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function k(t,e,r){var n,i,s,u,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===n?M(t,i,e):(M(t,(s=f[i])+256+1,e),0!==(u=o[s])&&x(t,i-=p[s],u),M(t,s=b(--n),r),0!==(u=a[s])&&x(t,n-=g[s],u))}while(l<t.last_lit);M(t,256,e)}function R(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)I(t,o,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,I(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,m=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)>d&&(o=d,m++),u[2*n+1]=o,n>l||(t.bl_count[o]++,a=0,n>=p&&(a=f[n-p]),s=u[2*n],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*n+1]+a)));if(0!==m){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,m-=2}while(m>0);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--r])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(t,e),E(o,l,t.bl_count)}function L(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function C(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<u&&i===a)){if(s<l)do{M(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(M(t,i,t.bl_tree),s--),M(t,16,t.bl_tree),x(t,s-3,2)):s<=10?(M(t,17,t.bl_tree),x(t,s-3,3)):(M(t,18,t.bl_tree),x(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}i(g);var A=!1;function N(t,e,r,i){x(t,0+(i?1:0),3),function(t,e,r,i){T(t),i&&(w(t,r),w(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}e._tr_init=function(t){A||(!function(){var t,e,r,n,i,u=new Array(16);for(r=0,n=0;n<28;n++)for(p[n]=r,t=0;t<1<<o[n];t++)f[r++]=n;for(f[r-1]=n,i=0,n=0;n<16;n++)for(g[n]=i,t=0;t<1<<a[n];t++)h[i++]=n;for(i>>=7;n<30;n++)for(g[n]=i<<7,t=0;t<1<<a[n]-7;t++)h[256+i++]=n;for(e=0;e<=15;e++)u[e]=0;for(t=0;t<=143;)l[2*t+1]=8,t++,u[8]++;for(;t<=255;)l[2*t+1]=9,t++,u[9]++;for(;t<=279;)l[2*t+1]=7,t++,u[7]++;for(;t<=287;)l[2*t+1]=8,t++,u[8]++;for(E(l,287,u),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=S(t,5);d=new v(l,o,257,286,15),m=new v(c,a,0,30,15),y=new v(new Array(0),s,0,19,7)}(),A=!0),t.l_desc=new _(t.dyn_ltree,d),t.d_desc=new _(t.dyn_dtree,m),t.bl_desc=new _(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,O(t)},e._tr_stored_block=N,e._tr_flush_block=function(t,e,r,n){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),R(t,t.l_desc),R(t,t.d_desc),a=function(t){var e;for(L(t,t.dyn_ltree,t.l_desc.max_code),L(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*u[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?N(t,e,r,n):4===t.strategy||o===i?(x(t,2+(n?1:0),3),k(t,l,c)):(x(t,4+(n?1:0),3),function(t,e,r,n){var i;for(x(t,e-257,5),x(t,r-1,5),x(t,n-4,4),i=0;i<n;i++)x(t,t.bl_tree[2*u[i]+1],3);C(t,t.dyn_ltree,e-1),C(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),k(t,t.dyn_ltree,t.dyn_dtree)),O(t),n&&T(t)},e._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(f[r]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){x(t,2,3),M(t,256,l),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,r){"use strict";var n=r(326),i=r(13),o=r(113),a=r(115),s=r(57),u=r(114),l=r(329),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);if(this.header=new l,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(s[r])}function f(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}h.prototype.push=function(t,e){var r,s,u,l,h,f=this.strm,p=this.options.chunkSize,d=this.options.dictionary,m=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(r=n.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&d&&(r=n.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===m&&(r=a.Z_OK,m=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(f.output,f.next_out),l=f.next_out-u,h=o.buf2string(f.output,u),f.next_out=l,f.avail_out=p-l,l&&i.arraySet(f.output,f.output,u,l,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,r){"use strict";var n=r(13),i=r(111),o=r(112),a=r(327),s=r(328);function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,c(t)):-2}function f(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,h(t))):-2}function p(t,e){var r,n;return t?(n=new l,t.state=n,n.window=null,0!==(r=f(t,e))&&(t.state=null),r):-2}var d,m,y=!0;function g(t){if(y){var e;for(d=new n.Buf32(512),m=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,m,0,t.work,{bits:5}),y=!1}t.lencode=d,t.lenbits=9,t.distcode=m,t.distbits=5}function v(t,e,r,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,e,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=h,e.inflateReset2=f,e.inflateResetKeep=c,e.inflateInit=function(t){return p(t,15)},e.inflateInit2=p,e.inflate=function(t,e){var r,l,c,h,f,p,d,m,y,_,b,w,x,M,S,E,O,T,P,I,k,R,L,C,A=0,N=new n.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(r=t.state).mode&&(r.mode=13),f=t.next_out,c=t.output,d=t.avail_out,h=t.next_in,l=t.input,p=t.avail_in,m=r.hold,y=r.bits,_=p,b=d,R=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(2&r.wrap&&35615===m){r.check=0,N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0),m=0,y=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&m)<<8)+(m>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&m)){t.msg="unknown compression method",r.mode=30;break}if(y-=4,k=8+(15&(m>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<k,t.adler=r.check=1,r.mode=512&m?10:12,m=0,y=0;break;case 2:for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(r.flags=m,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=m>>8&1),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,y=0,r.mode=3;case 3:for(;y<32;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.head&&(r.head.time=m),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,N[2]=m>>>16&255,N[3]=m>>>24&255,r.check=o(r.check,N,4,0)),m=0,y=0,r.mode=4;case 4:for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.head&&(r.head.xflags=255&m,r.head.os=m>>8),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,y=0,r.mode=5;case 5:if(1024&r.flags){for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.length=m,r.head&&(r.head.extra_len=m),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,y=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((w=r.length)>p&&(w=p),w&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,l,h,w,k)),512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,r.length-=w),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break t;w=0;do{k=l[h+w++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&w<p);if(512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break t;w=0;do{k=l[h+w++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&w<p);if(512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,k)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(m!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}m=0,y=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;y<32;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}t.adler=r.check=u(m),m=0,y=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=m,r.bits=y,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){m>>>=7&y,y-=7&y,r.mode=27;break}for(;y<3;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}switch(r.last=1&m,y-=1,3&(m>>>=1)){case 0:r.mode=14;break;case 1:if(g(r),r.mode=20,6===e){m>>>=2,y-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}m>>>=2,y-=2;break;case 14:for(m>>>=7&y,y-=7&y;y<32;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if((65535&m)!=(m>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&m,m=0,y=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(w=r.length){if(w>p&&(w=p),w>d&&(w=d),0===w)break t;n.arraySet(c,l,h,w,f),p-=w,h+=w,d-=w,f+=w,r.length-=w;break}r.mode=12;break;case 17:for(;y<14;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(r.nlen=257+(31&m),m>>>=5,y-=5,r.ndist=1+(31&m),m>>>=5,y-=5,r.ncode=4+(15&m),m>>>=4,y-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;y<3;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.lens[j[r.have++]]=7&m,m>>>=3,y-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},R=s(0,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,R){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;E=(A=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,O=65535&A,!((S=A>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(O<16)m>>>=S,y-=S,r.lens[r.have++]=O;else{if(16===O){for(C=S+2;y<C;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(m>>>=S,y-=S,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}k=r.lens[r.have-1],w=3+(3&m),m>>>=2,y-=2}else if(17===O){for(C=S+3;y<C;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}y-=S,k=0,w=3+(7&(m>>>=S)),m>>>=3,y-=3}else{for(C=S+7;y<C;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}y-=S,k=0,w=11+(127&(m>>>=S)),m>>>=7,y-=7}if(r.have+w>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;w--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,L={bits:r.lenbits},R=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,R){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},R=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,R){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(p>=6&&d>=258){t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=m,r.bits=y,a(t,b),f=t.next_out,c=t.output,d=t.avail_out,h=t.next_in,l=t.input,p=t.avail_in,m=r.hold,y=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;E=(A=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,O=65535&A,!((S=A>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(E&&0==(240&E)){for(T=S,P=E,I=O;E=(A=r.lencode[I+((m&(1<<T+P)-1)>>T)])>>>16&255,O=65535&A,!(T+(S=A>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}m>>>=T,y-=T,r.back+=T}if(m>>>=S,y-=S,r.back+=S,r.length=O,0===E){r.mode=26;break}if(32&E){r.back=-1,r.mode=12;break}if(64&E){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&E,r.mode=22;case 22:if(r.extra){for(C=r.extra;y<C;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.length+=m&(1<<r.extra)-1,m>>>=r.extra,y-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;E=(A=r.distcode[m&(1<<r.distbits)-1])>>>16&255,O=65535&A,!((S=A>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(0==(240&E)){for(T=S,P=E,I=O;E=(A=r.distcode[I+((m&(1<<T+P)-1)>>T)])>>>16&255,O=65535&A,!(T+(S=A>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}m>>>=T,y-=T,r.back+=T}if(m>>>=S,y-=S,r.back+=S,64&E){t.msg="invalid distance code",r.mode=30;break}r.offset=O,r.extra=15&E,r.mode=24;case 24:if(r.extra){for(C=r.extra;y<C;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.offset+=m&(1<<r.extra)-1,m>>>=r.extra,y-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===d)break t;if(w=b-d,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}w>r.wnext?(w-=r.wnext,x=r.wsize-w):x=r.wnext-w,w>r.length&&(w=r.length),M=r.window}else M=c,x=f-r.offset,w=r.length;w>d&&(w=d),d-=w,r.length-=w;do{c[f++]=M[x++]}while(--w);0===r.length&&(r.mode=21);break;case 26:if(0===d)break t;c[f++]=r.length,d--,r.mode=21;break;case 27:if(r.wrap){for(;y<32;){if(0===p)break t;p--,m|=l[h++]<<y,y+=8}if(b-=d,t.total_out+=b,r.total+=b,b&&(t.adler=r.check=r.flags?o(r.check,c,b,f-b):i(r.check,c,b,f-b)),b=d,(r.flags?m:u(m))!==r.check){t.msg="incorrect data check",r.mode=30;break}m=0,y=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;y<32;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(m!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}m=0,y=0}r.mode=29;case 29:R=1;break t;case 30:R=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=m,r.bits=y,(r.wsize||b!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&v(t,t.output,t.next_out,b-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,b-=t.avail_out,t.total_in+=_,t.total_out+=b,r.total+=b,r.wrap&&b&&(t.adler=r.check=r.flags?o(r.check,c,b,t.next_out-b):i(r.check,c,b,t.next_out-b)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===_&&0===b||4===e)&&0===R&&(R=-5),R)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?-2:(r.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,e,n,0)!==r.check?-3:v(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,r){"use strict";t.exports=function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g,v,_,b,w,x,M,S,E,O;r=t.state,n=t.next_in,E=t.input,i=n+(t.avail_in-5),o=t.next_out,O=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,f=r.window,p=r.hold,d=r.bits,m=r.lencode,y=r.distcode,g=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{d<15&&(p+=E[n++]<<d,d+=8,p+=E[n++]<<d,d+=8),_=m[p&g];e:for(;;){if(p>>>=b=_>>>24,d-=b,0===(b=_>>>16&255))O[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=m[(65535&_)+(p&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&_,(b&=15)&&(d<b&&(p+=E[n++]<<d,d+=8),w+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=E[n++]<<d,d+=8,p+=E[n++]<<d,d+=8),_=y[p&v];r:for(;;){if(p>>>=b=_>>>24,d-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=y[(65535&_)+(p&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(x=65535&_,d<(b&=15)&&(p+=E[n++]<<d,(d+=8)<b&&(p+=E[n++]<<d,d+=8)),(x+=p&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=b,d-=b,x>(b=o-a)){if((b=x-b)>c&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(M=0,S=f,0===h){if(M+=l-b,b<w){w-=b;do{O[o++]=f[M++]}while(--b);M=o-x,S=O}}else if(h<b){if(M+=l+h-b,(b-=h)<w){w-=b;do{O[o++]=f[M++]}while(--b);if(M=0,h<w){w-=b=h;do{O[o++]=f[M++]}while(--b);M=o-x,S=O}}}else if(M+=h-b,b<w){w-=b;do{O[o++]=f[M++]}while(--b);M=o-x,S=O}for(;w>2;)O[o++]=S[M++],O[o++]=S[M++],O[o++]=S[M++],w-=3;w&&(O[o++]=S[M++],w>1&&(O[o++]=S[M++]))}else{M=o-x;do{O[o++]=O[M++],O[o++]=O[M++],O[o++]=O[M++],w-=3}while(w>2);w&&(O[o++]=O[M++],w>1&&(O[o++]=O[M++]))}break}}break}}while(n<i&&o<s);n-=w=d>>3,p&=(1<<(d-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=p,r.bits=d}},function(t,e,r){"use strict";var n=r(13),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,u,l,c,h,f){var p,d,m,y,g,v,_,b,w,x=f.bits,M=0,S=0,E=0,O=0,T=0,P=0,I=0,k=0,R=0,L=0,C=null,A=0,N=new n.Buf16(16),j=new n.Buf16(16),F=null,D=0;for(M=0;M<=15;M++)N[M]=0;for(S=0;S<u;S++)N[e[r+S]]++;for(T=x,O=15;O>=1&&0===N[O];O--);if(T>O&&(T=O),0===O)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(E=1;E<O&&0===N[E];E++);for(T<E&&(T=E),k=1,M=1;M<=15;M++)if(k<<=1,(k-=N[M])<0)return-1;if(k>0&&(0===t||1!==O))return-1;for(j[1]=0,M=1;M<15;M++)j[M+1]=j[M]+N[M];for(S=0;S<u;S++)0!==e[r+S]&&(h[j[e[r+S]]++]=S);if(0===t?(C=F=h,v=19):1===t?(C=i,A-=257,F=o,D-=257,v=256):(C=a,F=s,v=-1),L=0,S=0,M=E,g=c,P=T,I=0,m=-1,y=(R=1<<T)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){_=M-I,h[S]<v?(b=0,w=h[S]):h[S]>v?(b=F[D+h[S]],w=C[A+h[S]]):(b=96,w=0),p=1<<M-I,E=d=1<<P;do{l[g+(L>>I)+(d-=p)]=_<<24|b<<16|w|0}while(0!==d);for(p=1<<M-1;L&p;)p>>=1;if(0!==p?(L&=p-1,L+=p):L=0,S++,0==--N[M]){if(M===O)break;M=e[r+h[S]]}if(M>T&&(L&y)!==m){for(0===I&&(I=T),g+=E,k=1<<(P=M-I);P+I<O&&!((k-=N[P+I])<=0);)P++,k<<=1;if(R+=1<<P,1===t&&R>852||2===t&&R>592)return 1;l[m=L&y]=T<<24|P<<16|g-c|0}}return 0!==L&&(l[g+L]=M-I<<24|64<<16|0),f.bits=T,0}},function(t,e,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,r){},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}[].includes||(Array.prototype.includes=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i,o=parseInt(arguments[1])||0;for(o>=0?n=o:(n=r+o)<0&&(n=0);n<r;){if(t===(i=e[n])||Object.equals(t,i)||t!=t&&i!=i)return!0;n++}return!1}),[].remove||(Array.prototype.remove=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i=parseInt(arguments[1])||0;i>=0?n=i:(n=r+i)<0&&(n=0);for(var o,a=[];n<r;)(t===(o=e[n])||Object.equals(t,o)||t!=t&&o!=o)&&a.push(n),n++;var s=0;a.forEach((function(t){t+=s,e.splice(t,1),s--}))}),Object.equals||(Object.equals=function(t,e){if(null!==t.equals&&"function"==typeof t.equals&&t.equals.call)return t.equals(e);if(null!==e.equals&&"function"==typeof e.equals&&e.equals.call)return e.equals(t);var n,i=[],o=[];if(isNaN(t)&&isNaN(e)&&"number"==typeof t&&"number"==typeof e)return!0;if(t===e)return!0;if("function"==typeof t&&"function"==typeof e||t instanceof Date&&e instanceof Date||t instanceof RegExp&&e instanceof RegExp||t instanceof String&&e instanceof String||t instanceof Number&&e instanceof Number)return t.toString()===e.toString();if(!(t instanceof Object&&e instanceof Object))return!1;if(t.isPrototypeOf(e)||e.isPrototypeOf(t))return!1;if(t.constructor!==e.constructor)return!1;if(t.prototype!==e.prototype)return!1;if(i.indexOf(t)>-1||o.indexOf(e)>-1)return!1;for(n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(r(e[n])!==r(t[n]))return!1}for(n in t){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(r(e[n])!==r(t[n]))return!1;switch(r(t[n])){case"object":case"function":if(i.push(t),o.push(e),!Object.equals(t[n],e[n]))return!1;i.pop(),o.pop();break;default:if(t[n]!==e[n])return!1}}return!0})},function(t,e,r){var n=r(333).newImageData;function i(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,n){return e?new ImageData(t,r,n):{data:t,width:r,height:n}}return function(e){var n,i,o=e.buffers,a=e.meta,s=e.imageOps,u=e.width,l=e.height,c=o.length,h=o[0].byteLength;if(s){var f=new Array(c);for(i=0;i<c;++i)f[i]=r(new Uint8ClampedArray(o[i]),u,l);n=t(f,a).data}else{n=new Uint8ClampedArray(h);var p=new Array(c),d=new Array(c);for(i=0;i<c;++i)p[i]=new Uint8ClampedArray(o[i]),d[i]=[0,0,0,0];for(var m=0;m<h;m+=4){for(var y=0;y<c;++y){var g=p[y];d[y][0]=g[m],d[y][1]=g[m+1],d[y][2]=g[m+2],d[y][3]=g[m+3]}var v=t(d,a);n[m]=v[0],n[m+1]=v[1],n[m+2]=v[2],n[m+3]=v[3]}}return n.buffer}}function o(t,e){var r=Object.keys(t.lib||{}).map((function(e){return"var "+e+" = "+t.lib[e].toString()+";"})).concat(["var __minion__ = ("+i.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Blob(r,{type:"text/javascript"}),o=URL.createObjectURL(n),a=new Worker(o);return a.addEventListener("message",e),a}function a(t){var e;this._imageOps=!!t.imageOps;var r=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var n=0;n<e;++n)r[n]=o(t,this._onWorkerMessage.bind(this,n));else r[0]=function(t,e){var r=i(t.operation);return{postMessage:function(t){setTimeout((function(){e({data:{buffer:r(t),meta:t.meta}})}),0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}a.prototype.process=function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()},a.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},a.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},a.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map((function(t){return t.data.buffer})),i=this._workers.length;if(this._running=i,1===i)this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:r},n);else for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var u=s*a,l=[],c=0,h=n.length;c<h;++c)l.push(n[s].slice(u,u+a));this._workers[s].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:r},l)}}},a.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},a.prototype._resolveJob=function(){var t,e,r=this._job,i=this._workers.length;if(1===i)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=r.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var a=4*Math.ceil(o/4/i),s=0;s<i;++s){var u=this._dataLookup[s].buffer,l=s*a;t.set(new Uint8ClampedArray(u),l),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},r.callback(null,n(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()},t.exports=a},function(t,e){var r=!0;try{new ImageData(10,10)}catch(t){r=!1}var n=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,i){if(r)return new ImageData(t,e,i);var o=n.createImageData(e,i);return o.data.set(t),o}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"easeIn",(function(){return ba})),r.d(n,"easeOut",(function(){return wa})),r.d(n,"inAndOut",(function(){return xa})),r.d(n,"linear",(function(){return Ma})),r.d(n,"upAndDown",(function(){return Sa}));var i={};r.r(i),r.d(i,"show",(function(){return Kb})),r.d(i,"info",(function(){return Jb})),r.d(i,"error",(function(){return $b})),r.d(i,"success",(function(){return Qb}));var o={};r.r(o),r.d(o,"LEFT",(function(){return Mw})),r.d(o,"CENTER",(function(){return Sw})),r.d(o,"RIGHT",(function(){return Ew})),r.d(o,"JUSTIFY",(function(){return Ow}));var a={};r.r(a),r.d(a,"TOP",(function(){return Tw})),r.d(a,"MIDDLE",(function(){return Pw})),r.d(a,"BOTTOM",(function(){return Iw})),r.d(a,"ALPHABETIC",(function(){return kw})),r.d(a,"HANGING",(function(){return Rw})),r.d(a,"IDEOGRAPHIC",(function(){return Lw}));var s={};r.r(s),r.d(s,"POINT",(function(){return uN})),r.d(s,"LINE",(function(){return lN})),r.d(s,"POLYGON",(function(){return cN})),r.d(s,"MPOINT",(function(){return hN})),r.d(s,"MLINE",(function(){return fN})),r.d(s,"MPOLYGON",(function(){return pN}));r(220),r(221);var u=484813681109536e-20,l=Math.PI/2,c=.017453292519943295,h=57.29577951308232,f=Math.PI/4,p=2*Math.PI,d=3.14159265359,m={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},y={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},g=/[\s_\-\/\(\)]/g;function v(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),i=e.toLowerCase().replace(g,""),o=-1;++o<n.length;)if((r=n[o]).toLowerCase().replace(g,"")===i)return t[r]}var _=function(t){var e,r,n,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*c},lat_1:function(t){i.lat1=t*c},lat_2:function(t){i.lat2=t*c},lat_ts:function(t){i.lat_ts=t*c},lon_0:function(t){i.long0=t*c},lon_1:function(t){i.long1=t*c},lon_2:function(t){i.long2=t*c},alpha:function(t){i.alpha=parseFloat(t)*c},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*c},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=v(y,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*c},pm:function(t){var e=v(m,t);i.from_greenwich=(e||parseFloat(t))*c},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in o)r=o[e],e in a?"function"==typeof(n=a[e])?n(r):i[n]=r:i[e]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},b=function(t){return new T(t).output()},w=/\s/,x=/[A-Za-z]/,S=/[A-Za-z84_]/,E=/[,\]]/,O=/[\d\.E\-\+]/;function T(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function P(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,i=r.reduce((function(t,e){return I(e,t),t}),n);e&&(t[e]=i)}function I(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void I(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&I(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&I(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void P(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return I(t,e[r]);return P(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}T.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;w.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},T.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(E.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},T.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},T.prototype.number=function(t){if(!O.test(t)){if(E.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},T.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},T.prototype.keyword=function(t){if(S.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!E.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},T.prototype.neutral=function(t){if(x.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(O.test(t))return this.word=t,void(this.state=3);if(!E.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},T.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function k(t){return.017453292519943295*t}var R,L=function(t){var e=b(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var i={};return I(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var i=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",k],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",k],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",k],["lat0","latitude_of_origin",k],["lat0","standard_parallel_1",k],["lat1","standard_parallel_1",k],["lat2","standard_parallel_2",k],["azimuth","Azimuth"],["alpha","azimuth",k],["srsCode","name"]].forEach((function(e){return r=t,i=(n=e)[0],o=n[1],void(!(i in r)&&o in r&&(r[i]=r[o],3===n.length&&(r[i]=n[2](r[i]))));var r,n,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=k(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function C(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?C[t]=_(arguments[1]):C[t]=L(arguments[1]):C[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?C.apply(e,t):C(t)}));if("string"==typeof t){if(t in C)return C[t]}else"EPSG"in t?C["EPSG:"+t.EPSG]=t:"ESRI"in t?C["ESRI:"+t.ESRI]=t:"IAU2000"in t?C["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(R=C)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),R("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),R("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),R.WGS84=R["EPSG:4326"],R["EPSG:3785"]=R["EPSG:3857"],R.GOOGLE=R["EPSG:3857"],R["EPSG:900913"]=R["EPSG:3857"],R["EPSG:102113"]=R["EPSG:3857"];var A=C;var N=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var j=["3857","900913","3785","102113"];var F=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in A}(t))return A[t];if(function(t){return N.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=L(t);if(function(t){var e=v(t,"authority");if(e){var r=v(e,"epsg");return r&&j.indexOf(r)>-1}}(e))return A["EPSG:3857"];var r=function(t){var e=v(t,"extension");if(e)return v(e,"proj4")}(e);return r?_(r):e}return function(t){return"+"===t[0]}(t)?_(t):void 0},D=function(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t},B=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)},z=function(t){return t<0?-1:1},G=function(t){return Math.abs(t)<=d?t:t-z(t)*p},q=function(t,e,r){var n=t*r,i=.5*t;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(l-e))/n},U=function(t,e){for(var r,n,i=.5*t,o=l-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(o),o+=n=l-2*Math.atan(e*Math.pow((1-r)/(1+r),i))-o,Math.abs(n)<=1e-10)return o;return-9999};function V(t){return t}var W=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,i=t.y;if(i*h>90&&i*h<-90&&n*h>180&&n*h<-180)return null;if(Math.abs(Math.abs(i)-l)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*G(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(f+.5*i));else{var o=Math.sin(i),a=q(this.e,i,o);e=this.x0+this.a*this.k0*G(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,i=t.y-this.y0;if(this.sphere)r=l-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(r=U(this.e,o)))return null}return e=G(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:V,inverse:V,names:["longlat","identity"]}],Y={},Z=[];function H(t,e){var r=Z.length;return t.names?(Z[r]=t,t.names.forEach((function(t){Y[t.toLowerCase()]=r})),this):(console.log(e),!0)}var X={start:function(){W.forEach(H)},add:H,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Y[e]&&Z[Y[e]]?Z[Y[e]]:void 0}},K={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},J=K.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};K.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var $={};$.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},$.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},$.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},$.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},$.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},$.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},$.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},$.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},$.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},$.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},$.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},$.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},$.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},$.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},$.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},$.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},$.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var Q=function(t,e,r,n,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=u,s.datum_params[4]*=u,s.datum_params[5]*=u,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=3,s.grids=a),s.a=r,s.b=n,s.es=i,s.ep2=o,s},tt={};function et(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:tt[t]||null,isNull:!1}}function rt(t){return t/3600*Math.PI/180}function nt(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function it(t){return t.map((function(t){return[rt(t.longitudeShift),rt(t.latitudeShift)]}))}function ot(t,e,r){return{name:nt(t,e+8,e+16).trim(),parent:nt(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function at(t,e,r,n){for(var i=e+176,o=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(i+16*a,n),longitudeShift:t.getFloat32(i+16*a+4,n),latitudeAccuracy:t.getFloat32(i+16*a+8,n),longitudeAccuracy:t.getFloat32(i+16*a+12,n)};o.push(s)}return o}function st(t,e){if(!(this instanceof st))return new st(t);e=e||function(t){if(t)throw t};var r=F(t);if("object"==typeof r){var n=st.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var i=v($,r.datumCode);i&&(r.datum_params=r.datum_params||(i.towgs84?i.towgs84.split(","):null),r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var o,a,s,u,l,c,h,f=function(t,e,r,n,i){if(!t){var o=v(K,n);o||(o=J),t=o.a,e=o.b,r=o.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<1e-10)&&(i=!0,e=t),{a:t,b:e,rf:r,sphere:i}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(o=f.a,a=f.b,f.rf,s=r.R_A,c=((u=o*o)-(l=a*a))/u,h=0,s?(u=(o*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*o,c=0):h=Math.sqrt(c),{es:c,e:h,ep2:(u-l)/l}),d=function(t){return void 0===t?null:t.split(",").map(et)}(r.nadgrids),m=r.datum||Q(r.datumCode,r.datum_params,f.a,f.b,p.es,p.ep2,d);D(this,r),D(this,n),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=m,this.init(),e(null,this)}else e(t)}else e(t)}st.projections=X,st.projections.start();var ut=st;function lt(t,e,r){var n,i,o,a,s=t.x,u=t.y,c=t.z?t.z:0;if(u<-l&&u>-1.001*l)u=-l;else if(u>l&&u<1.001*l)u=l;else{if(u<-l)return{x:-1/0,y:-1/0,z:t.z};if(u>l)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((n=r/Math.sqrt(1-e*o))+c)*a*Math.cos(s),y:(n+c)*a*Math.sin(s),z:(n*(1-e)+c)*i}}function ct(t,e,r,n){var i,o,a,s,u,c,h,f,p,d,m,y,g,v,_,b=t.x,w=t.y,x=t.z?t.z:0;if(i=Math.sqrt(b*b+w*w),o=Math.sqrt(b*b+w*w+x*x),i/r<1e-12){if(v=0,o/r<1e-12)return l,_=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,b);a=x/o,f=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),p=a*u,g=0;do{g++,c=e*(h=r/Math.sqrt(1-e*p*p))/(h+(_=i*f+x*p-h*(1-e*p*p))),y=(m=a*(u=1/Math.sqrt(1-c*(2-c)*s*s)))*f-(d=s*(1-c)*u)*p,f=d,p=m}while(y*y>1e-24&&g<30);return{x:v,y:Math.atan(m/Math.abs(d)),z:_}}function ht(t){return 1===t||2===t}var ft=function(t,e,r){if(function(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}(t,e))return r;if(5===t.datum_type||5===e.datum_type)return r;var n=t.a,i=t.es;if(3===t.datum_type){if(0!==pt(t,!1,r))return;n=6378137,i=.0066943799901413165}var o=e.a,a=e.b,s=e.es;if(3===e.datum_type&&(o=6378137,a=6356752.314,s=.0066943799901413165),i===s&&n===o&&!ht(t.datum_type)&&!ht(e.datum_type))return r;if((r=lt(r,i,n),ht(t.datum_type)&&(r=function(t,e,r){if(1===e)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(2===e){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(r,t.datum_type,t.datum_params)),ht(e.datum_type)&&(r=function(t,e,r){if(1===e)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(2===e){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(r,e.datum_type,e.datum_params)),r=ct(r,s,o,a),3===e.datum_type)&&0!==pt(e,!0,r))return;return r};function pt(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){i=n;break}if(s.mandatory,null!==s.grid){var u=s.grid.subgrids[0],l=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,c=u.ll[0]-l,f=u.ll[1]-l,p=u.ll[0]+(u.lim[0]-1)*u.del[0]+l,d=u.ll[1]+(u.lim[1]-1)*u.del[1]+l;if(!(f>n.y||c>n.x||d<n.y||p<n.x||(i=dt(n,e,u),isNaN(i.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*h+" "+n.y*h+" tried: '"+o+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function dt(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var i={x:t.x,y:t.y};i.x-=r.ll[0],i.y-=r.ll[1],i.x=G(i.x-Math.PI)+Math.PI;var o=mt(i,r);if(e){if(isNaN(o.x))return n;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,u=9;do{if(s=mt(o,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=G(o.x+r.ll[0]),n.y=o.y+r.ll[1]}else isNaN(o.x)||(n.x=t.x+o.x,n.y=t.y+o.y);return n}function mt(t,e){var r,n={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(n.x),o=Math.floor(n.y),a=n.x-1*i,s=n.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;r=o*e.lim[0]+i;var l=e.cvs[r][0],c=e.cvs[r][1];r++;var h=e.cvs[r][0],f=e.cvs[r][1];r+=e.lim[0];var p=e.cvs[r][0],d=e.cvs[r][1];r--;var m=e.cvs[r][0],y=e.cvs[r][1],g=a*s,v=a*(1-s),_=(1-a)*(1-s),b=(1-a)*s;return u.x=_*l+v*h+b*m+g*p,u.y=_*c+v*f+b*y+g*d,u}var yt=function(t,e,r){var n,i,o,a=r.x,s=r.y,u=r.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==r.z)switch(0===o?(n=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(n=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(n=u,i="z"),t.axis[o]){case"e":l[i]=n;break;case"w":l[i]=-n;break;case"n":l[i]=n;break;case"s":l[i]=-n;break;case"u":void 0!==r[i]&&(l.z=n);break;case"d":void 0!==r[i]&&(l.z=-n);break;default:return null}return l},gt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function vt(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function _t(t,e,r,n){var i;if(Array.isArray(r)&&(r=gt(r)),function(t){vt(t.x),vt(t.y)}(r),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(r=_t(t,i=new ut("WGS84"),r,n),t=i),n&&"enu"!==t.axis&&(r=yt(t,!1,r)),"longlat"===t.projName)r={x:r.x*c,y:r.y*c,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=ft(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*h,y:r.y*h,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&"enu"!==e.axis?yt(e,!0,r):r}var bt=ut("WGS84");function wt(t,e,r,n){var i,o,a;return Array.isArray(r)?(i=_t(t,e,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(r.splice(3)):[i.x,i.y,r[2]].concat(r.splice(3)):[i.x,i.y].concat(r.splice(2)):[i.x,i.y]):(o=_t(t,e,r,n),2===(a=Object.keys(r)).length||a.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;o[n]=r[n]})),o)}function xt(t){return t instanceof ut?t:t.oProj?t.oProj:ut(t)}var Mt=function(t,e,r){t=xt(t);var n,i=!1;return void 0===e?(e=t,t=bt,i=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=bt,i=!0),e=xt(e),r?wt(t,e,r):(n={forward:function(r,n){return wt(t,e,r,n)},inverse:function(r,n){return wt(e,t,r,n)}},i&&(n.oProj=e),n)},St=79,Et={forward:Ot,inverse:function(t){var e=kt(Ct(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Tt};function Ot(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,d=t.northing,m=t.zoneNumber,y=Lt(m),g=Math.floor(p/1e5),v=Math.floor(d/1e5)%20,i=g,o=v,a=y,s=a-1,u="AJSAJS".charCodeAt(s),l="AFAFAF".charCodeAt(s),c=u+i-1,h=l+o,f=!1,c>90&&(c=c-90+65-1,f=!0),(73===c||u<73&&c>73||(c>73||u<73)&&f)&&c++,(c===St||u<St&&c>St||(c>St||u<St)&&f)&&73==++c&&c++,c>90&&(c=c-90+65-1),h>86?(h=h-86+65-1,f=!0):f=!1,(73===h||l<73&&h>73||(h>73||l<73)&&f)&&h++,(h===St||l<St&&h>St||(h>St||l<St)&&f)&&73==++h&&h++,h>86&&(h=h-86+65-1),String.fromCharCode(c)+String.fromCharCode(h))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var i,o,a,s,u,l,c,h,f;var p,d,m,y,g,v}(function(t){var e,r,n,i,o,a,s,u=t.lat,l=t.lon,c=6378137,h=Pt(u),f=Pt(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=Pt(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),r=Math.tan(h)*Math.tan(h),n=.006739496752268451*Math.cos(h)*Math.cos(h),i=Math.cos(h)*(f-a),o=c*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var p=.9996*e*(i+(1-r+n)*i*i*i/6+(5-18*r+r*r+72*n-.39089081163157013)*i*i*i*i*i/120)+5e5,d=.9996*(o+e*Math.tan(h)*(i*i/2+(5-r+9*n+4*n*n)*i*i*i*i/24+(61-58*r+r*r+600*n-2.2240339282485886)*i*i*i*i*i*i/720));u<0&&(d+=1e7);return{northing:Math.round(d),easting:Math.round(p),zoneNumber:s,zoneLetter:Rt(u)}}({lat:t[1],lon:t[0]}),e)}function Tt(t){var e=kt(Ct(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Pt(t){return t*(Math.PI/180)}function It(t){return t/Math.PI*180}function kt(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=r-5e5,y=e;n<"N"&&(y-=1e7),c=6*(i-1)-180+3,f=(h=y/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*h)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*h)+151*d*d*d/96*Math.sin(6*h),o=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=m/(.9996*o);var g=f-o*Math.tan(f)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);g=It(g);var v,_=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(f);if(_=c+It(_),t.accuracy){var b=kt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:b.lat,right:b.lon,bottom:g,left:_}}else v={lat:g,lon:_};return v}function Rt(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Lt(t){var e=t%6;return 0===e&&(e=6),e}function Ct(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(o,o+=2);for(var u=Lt(a),l=function(t,e){var r="AJSAJS".charCodeAt(e-1),n=1e5,i=!1;for(;r!==t.charCodeAt(0);){if(73===++r&&r++,r===St&&r++,r>90){if(i)throw"Bad character: "+t;r=65,i=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r="AFAFAF".charCodeAt(e-1),n=0,i=!1;for(;r!==t.charCodeAt(0);){if(73===++r&&r++,r===St&&r++,r>86){if(i)throw"Bad character: "+t;r=65,i=!0}n+=1e5}return n}(n.charAt(1),u);c<At(s);)c+=2e6;var h=r-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,m=h/2,y=0,g=0;return m>0&&(f=1e5/Math.pow(10,m),p=t.substring(o,o+m),y=parseFloat(p)*f,d=t.substring(o+m),g=parseFloat(d)*f),{easting:y+l,northing:g+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function At(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Nt(t,e,r){if(!(this instanceof Nt))return new Nt(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Nt.fromMGRS=function(t){return new Nt(Tt(t))},Nt.prototype.toMGRS=function(t){return Ot([this.x,this.y],t)};var jt=Nt,Ft=.01068115234375,Dt=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Ft))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*Ft)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),r*=t,e[3]=r*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e},Bt=function(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},zt=function(t,e,r){for(var n=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(Bt(i,a,Math.cos(i),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<1e-10)return i}return i};var Gt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Dt(this.es),this.ml0=Bt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,i=t.x,o=t.y,a=G(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>1e-10?Math.tan(o):0,d=Math.pow(p,2),m=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var y=Bt(o,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+m+14*h-58*d*h+c/42*(61+179*m-m*d-479*d)))))+this.x0,n=this.a*(this.k0*(y-this.ml0+s*a*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+m-58*d+270*h-330*d*h+c/56*(1385+543*m-m*d-3111*d))))))+this.y0}else{var g=u*Math.sin(a);if(Math.abs(Math.abs(g)-1)<1e-10)return 93;if(r=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(n))>=1){if(g-1>1e-10)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,r=zt(e,this.es,this.en),Math.abs(r)<l){var s=Math.sin(r),u=Math.cos(r),c=Math.abs(u)>1e-10?Math.tan(r):0,h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.pow(c,2),d=Math.pow(p,2);e=1-this.es*Math.pow(s,2);var m=o*Math.sqrt(e)/this.k0,y=Math.pow(m,2);n=r-(e*=c)*y/(1-this.es)*.5*(1-y/12*(5+3*p-9*h*p+h-4*f-y/30*(61+90*p-252*h*p+45*d+46*h-y/56*(1385+3633*p+4095*d+1574*d*p)))),i=G(this.long0+m*(1-y/6*(1+2*p+h-y/20*(5+28*p+24*d+8*h*p+6*h-y/42*(61+662*p+1320*d+720*d*p))))/u)}else n=l*z(a),i=0;else{var g=Math.exp(o/this.k0),v=.5*(g-1/g),_=this.lat0+a/this.k0,b=Math.cos(_);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),n=Math.asin(e),a<0&&(n=-n),i=0===v&&0===b?0:G(Math.atan2(v,b)+this.long0)}return t.x=i,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},qt=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Ut=function(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},Vt=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(Ut(1,e)+1))),t<0?-e:e},Wt=function(t,e){for(var r,n=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return e+r*Math.sin(2*e)},Yt=function(t,e,r){for(var n,i,o=Math.sin(e),a=Math.cos(e),s=qt(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,m=0;--h>=0;)n=d,i=p,f=l*(d=f)-n-c*(p=m)+t[h],m=c*d-i+l*p;return[(l=o*u)*f-(c=a*s)*m,l*m+c*f]};var Zt={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Gt.init.apply(this),this.forward=Gt.forward,this.inverse=Gt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var n=Wt(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=G(t.x-this.long0),r=t.y;r=Wt(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),o=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*i),e=Math.atan2(o*i,Ut(n,i*a)),e=Vt(Math.tan(e));var s,u,l=Yt(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=Yt(this.utg,2*i,2*n);i+=o[0],n+=o[1],n=Math.atan(qt(n));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(n),l=Math.cos(n);i=Math.atan2(a*l,Ut(u,l*s)),n=Math.atan2(u,l*s),e=G(n+this.long0),r=Wt(this.cgb,i)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var Ht={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(G(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*c,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Zt.init.apply(this),this.forward=Zt.forward,this.inverse=Zt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Xt=function(t,e){return Math.pow((1-t)/(1+t),e)};var Kt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+f)/(Math.pow(Math.tan(.5*this.lat0+f),this.C)*Xt(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+f),this.C)*Xt(this.e*Math.sin(r),this.ratexp))-l,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+f)/this.K,1/this.C),i=20;i>0&&(r=2*Math.atan(n*Xt(this.e*Math.sin(t.y),-.5*this.e))-l,!(Math.abs(r-t.y)<1e-14));--i)t.y=r;return i?(t.x=e,t.y=r,t):null},names:["gauss"]};var Jt={init:function(){Kt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,i;return t.x=G(t.x-this.long0),Kt.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=i*r*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),r=Math.cos(a),i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*r-t.y*this.sinc0*e)}else i=this.phic0,n=0;return t.x=n,t.y=i,Kt.inverse.apply(this,[t]),t.x=G(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var $t={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+z(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/q(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=B(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-l,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,i,o,a,s=t.x,u=t.y,c=Math.sin(u),h=Math.cos(u),f=G(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=1e-10&&Math.abs(u+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*h*Math.cos(f)),t.x=this.a*e*h*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*h*Math.cos(f))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,c,this.e))-l,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=1e-10?(o=q(this.e,u*this.con,this.con*c),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+i*Math.cos(f)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(f))),t.y=e*(this.cosX0*n-this.sinX0*i*Math.cos(f))+this.y0),t.x=e*i*Math.sin(f)+this.x0,t))},inverse:function(t){var e,r,n,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=1e-10?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?G(this.long0+Math.atan2(t.x,-1*t.y)):G(this.long0+Math.atan2(t.x,t.y)):G(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=1e-10){if(a<=1e-10)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*U(this.e,n),e=this.con*G(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=1e-10?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=G(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),r=-1*U(this.e,Math.tan(.5*(l+o)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(l+t))*Math.pow((1-e)/(1+e),.5*r)}};var Qt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]};var te={init:function(){var t,e,r,n,i,o,a,s,u,h,d,m,y,g=0,v=0,_=0,b=0,w=0,x=0,M=0;this.no_off=(y="object"==typeof(m=this).PROJECTION?Object.keys(m.PROJECTION)[0]:m.PROJECTION,"no_uoff"in m||"no_off"in m||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(y)),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var E=!1;if("rectified_grid_angle"in this&&(E=!0),S&&(M=this.alpha),E&&(g=this.rectified_grid_angle*c),S||E)v=this.longc;else if(_=this.long1,w=this.lat1,b=this.long2,x=this.lat2,Math.abs(w-x)<=1e-7||(t=Math.abs(w))<=1e-7||Math.abs(t-l)<=1e-7||Math.abs(Math.abs(this.lat0)-l)<=1e-7||Math.abs(Math.abs(x)-l)<=1e-7)throw new Error;var O=1-this.es;e=Math.sqrt(O),Math.abs(this.lat0)>1e-10?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*e/t,(i=(n=this.B*e/(r*Math.sqrt(t)))*n-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(q(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=i=1),S||E?(S?(d=Math.asin(Math.sin(M)/n),E||(g=M)):(d=g,M=Math.asin(n*Math.sin(d))),this.lam0=v-Math.asin(.5*(i-1/i)*Math.tan(d))/this.B):(o=Math.pow(q(this.e,w,Math.sin(w)),this.B),a=Math.pow(q(this.e,x,Math.sin(x)),this.B),i=this.E/o,u=(a-o)/(a+o),h=((h=this.E*this.E)-a*o)/(h+a*o),(t=_-b)<-Math.pi?b-=p:t>Math.pi&&(b+=p),this.lam0=G(.5*(_+b)-Math.atan(h*Math.tan(.5*this.B*(_-b))/u)/this.B),d=Math.atan(2*Math.sin(this.B*G(_-this.lam0))/(i-1/i)),g=M=Math.asin(n*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(g),this.cosrot=Math.cos(g),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(f-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(f+i))},forward:function(t){var e,r,n,i,o,a,s,u,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-l)>1e-10){if(e=.5*((o=this.E/Math.pow(q(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),r=.5*(o+a),i=Math.sin(this.B*t.x),n=(e*this.singam-i*this.cosgam)/r,Math.abs(Math.abs(n)-1)<1e-10)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<1e-7?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(c.x=s,c.y=u):(s-=this.u_0,c.x=u*this.cosrot+s*this.sinrot,c.y=s*this.cosrot-u*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var e,r,n,i,o,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((n=Math.exp(-this.BrA*r))-1/n),o=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<1e-10)u.x=0,u.y=s<0?-l:l;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=U(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var ee={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=B(this.e,e,r),i=q(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=B(this.e,o,a),u=q(this.e,this.lat2,o),l=q(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(n/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=1e-10&&(r=z(r)*(l-2e-10));var n,i,o=Math.abs(Math.abs(r)-l);if(o>1e-10)n=q(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((o=r*this.ns)<=0)return null;i=0}var a=this.ns*G(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(i=U(this.e,n)))return null}else i=-l;return o=G(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var re={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y,c=G(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},ne=function(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)},ie=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},oe=function(t){return.375*t*(1+.25*t*(1+.46875*t))},ae=function(t){return.05859375*t*t*(1+.75*t)},se=function(t){return t*t*t*(35/3072)},ue=function(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)},le=function(t){return Math.abs(t)<l?t:t-z(t)*Math.PI},ce=function(t,e,r,n,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var he={init:function(){this.sphere||(this.e0=ie(this.es),this.e1=oe(this.es),this.e2=ae(this.es),this.e3=se(this.es),this.ml0=this.a*ne(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,i=t.y;if(n=G(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=ue(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=n*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),r=this.a*ne(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(o))}else{var a=this.ml0/this.a+i,s=ce(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-l)<=1e-10)return t.x=this.long0,t.y=l,i<0&&(t.y*=-1),t;var u=ue(this.a,this.e,Math.sin(s)),c=u*u*u/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(s),2),f=n*this.a/u,p=f*f;e=s-u*Math.tan(s)/c*f*f*(.5-(1+3*h)*f*f/24),r=f*(1-p*(h/3+(1+3*h)*h*p/15))/Math.cos(s)}return t.x=G(r+this.long0),t.y=le(e),t},names:["Cassini","Cassini_Soldner","cass"]},fe=function(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e};var pe={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-l)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=fe(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=.3333333333333333*t,e=t*t,r[0]+=.17222222222222222*e,r[1]=.06388888888888888*e,e*=t,r[0]+=.10257936507936508*e,r[1]+=.0664021164021164*e,r[2]=.016415012942191543*e,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=fe(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,i,o,a,s,u,c,h,p=t.x,d=t.y;if(p=G(p-this.long0),this.sphere){if(o=Math.sin(d),h=Math.cos(d),n=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+h*n:1+this.sinph0*o+this.cosph0*h*n)<=1e-10)return null;e=(r=Math.sqrt(2/r))*h*Math.sin(p),r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*h*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<1e-10)return null;r=f-.5*d,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(p),r*=n}}else{switch(s=0,u=0,c=0,n=Math.cos(p),i=Math.sin(p),o=Math.sin(d),a=fe(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:c=1+u*n;break;case this.N_POLE:c=l+d,a=this.qp-a;break;case this.S_POLE:c=d-l,a=this.qp+a}if(Math.abs(c)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),r=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*s-this.sinb1*u*n):(c=Math.sqrt(2/(1+u*n)))*s*this.ymf,e=this.xmf*c*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*i,r=n*(this.mode===this.S_POLE?c:-c)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,i,o,a,s,u,c,h,f=t.x/this.a,p=t.y/this.a;if(this.sphere){var d,m=0,y=0;if((r=.5*(d=Math.sqrt(f*f+p*p)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(r),m=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(d)<=1e-10?0:Math.asin(p*y/d),f*=y,p=m*d;break;case this.OBLIQ:r=Math.abs(d)<=1e-10?this.lat0:Math.asin(m*this.sinph0+p*y*this.cosph0/d),f*=y*this.cosph0,p=(m-Math.sin(r)*this.sinph0)*d;break;case this.N_POLE:p=-p,r=l-r;break;case this.S_POLE:r-=l}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(a=Math.sqrt(f*f+p*p))<1e-10)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),n=Math.cos(i),f*=i=Math.sin(i),this.mode===this.OBLIQ?(s=n*this.sinb1+p*i*this.cosb1/a,o=this.qp*s,p=a*this.cosb1*n-p*this.sinb1*i):(s=p*i/a,o=this.qp*s,p=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(o=f*f+p*p))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(f,p),u=Math.asin(s),c=this.apa,h=u+u,r=u+c[0]*Math.sin(h)+c[1]*Math.sin(h+h)+c[2]*Math.sin(h+h+h)}return t.x=G(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},de=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var me={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=B(this.e3,this.sin_po,this.cos_po),this.qs1=fe(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=B(this.e3,this.sin_po,this.cos_po),this.qs2=fe(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=fe(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=fe(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*G(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,0!==e&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),o=G(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,i,o,a=de(.5*e);if(t<1e-10)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(n=t*(r=Math.sin(a)))*n)*i/Math.cos(a)*(e/(1-s)-r/i+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return a;return null}};var ye={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=G(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),1,(o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=1e-10?(a=this.x0+1*this.a*r*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)/o):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),r=Math.sin(i),n=Math.cos(i),a=de(n*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),o=G(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};var ge={init:function(){this.sphere||(this.k0=B(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,i=t.y,o=G(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=fe(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=G(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*l:l;for(var n,i,o,a,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=n=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=G(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var ve={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=G(e-this.long0),i=le(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,r=t.y;return t.x=G(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=le(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var _e={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ie(this.es),this.e1=oe(this.es),this.e2=ae(this.es),this.e3=se(this.es),this.ml0=this.a*ne(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,i=t.x,o=t.y,a=G(i-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),r=this.a*(le(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=1e-10)e=this.a*a,r=-1*this.ml0;else{var s=ue(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(n),r=this.a*ne(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,i,o,a,s,u,l;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)e=G(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+i/this.a,s=n*n/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=1e-10){r=u;break}e=G(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=1e-10)r=0,e=G(this.long0+n/this.a);else{var h,f,p,d,m;for(a=(this.ml0+i)/this.a,s=n*n/this.a/this.a+a*a,u=a,o=20;o;--o)if(m=this.e*Math.sin(u),h=Math.sqrt(1-m*m)*Math.tan(u),f=this.a*ne(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=1e-10){r=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=G(this.long0+Math.asin(n*h/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var be={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,i=r-this.long0,o=n/u*1e-5,a=i,s=1,l=0;for(e=1;e<=10;e++)s*=o,l+=this.A[e]*s;var c,h=l,f=a,p=1,d=0,m=0,y=0;for(e=1;e<=6;e++)c=d*h+p*f,p=p*h-d*f,d=c,m=m+this.B_re[e]*p-this.B_im[e]*d,y=y+this.B_im[e]*p+this.B_re[e]*d;return t.x=y*this.a+this.x0,t.y=m*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,i=t.y,o=n-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,c=0,h=0,f=0;for(e=1;e<=6;e++)r=c*a+l*s,l=l*a-c*s,c=r,h=h+this.C_re[e]*l-this.C_im[e]*c,f=f+this.C_im[e]*l+this.C_re[e]*c;for(var p=0;p<this.iterations;p++){var d,m=h,y=f,g=a,v=s;for(e=2;e<=6;e++)d=y*h+m*f,m=m*h-y*f,y=d,g+=(e-1)*(this.B_re[e]*m-this.B_im[e]*y),v+=(e-1)*(this.B_im[e]*m+this.B_re[e]*y);m=1,y=0;var _=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)d=y*h+m*f,m=m*h-y*f,y=d,_+=e*(this.B_re[e]*m-this.B_im[e]*y),b+=e*(this.B_im[e]*m+this.B_re[e]*y);var w=_*_+b*b;h=(g*_+v*b)/w,f=(v*_-g*b)/w}var x=h,M=f,S=1,E=0;for(e=1;e<=9;e++)S*=x,E+=this.D[e]*S;var O=this.lat0+E*u*1e5,T=this.long0+M;return t.x=T,t.y=O,t},names:["New_Zealand_Map_Grid","nzmg"]};var we={init:function(){},forward:function(t){var e=t.x,r=t.y,n=G(e-this.long0),i=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=G(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]};var xe={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Dt(this.es)},forward:function(t){var e,r,n=t.x,i=t.y;if(n=G(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);r=this.a*Bt(i,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=de((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=de(Math.sin(e)/this.n)),n=G(n+this.long0),e=le(e)):(e=zt(t.y/this.a,this.es,this.en),(i=Math.abs(e))<l?(i=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),n=G(r)):i-1e-10<l&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var Me={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=G(e-this.long0),i=r,o=Math.PI*Math.sin(r);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<1e-10)break}i/=2,Math.PI/2-Math.abs(r)<1e-10&&(n=0);var s=.900316316158*this.a*n*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=G(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return t.x=n,t.y=i,t},names:["Mollweide","moll"]};var Se={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ie(this.es),this.e1=oe(this.es),this.e2=ae(this.es),this.e3=se(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=B(this.e,this.sinphi,this.cosphi),this.ml1=ne(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=B(this.e,this.sinphi,this.cosphi),this.ml2=ne(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ne(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var i=ne(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-i)}var o=this.ns*G(r-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==r&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=G(this.long0+o/this.ns),n=le(this.g-r/this.a),t.x=i,t.y=n,t;var a=this.g-r/this.a;return n=ce(a,this.e0,this.e1,this.e2,this.e3),i=G(this.long0+o/this.ns),t.x=i,t.y=n,t},names:["Equidistant_Conic","eqdc"]};var Ee={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,i=t.y,o=G(n-this.long0);Math.abs(i)<=1e-10&&(e=this.x0+this.R*o,r=this.y0);var a=de(2*Math.abs(i/Math.PI));(Math.abs(o)<=1e-10||Math.abs(Math.abs(i)-l)<=1e-10)&&(e=this.x0,r=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,c=Math.sin(a),h=Math.cos(a),f=h/(c+h-1),p=f*f,d=f*(2/c-1),m=d*d,y=Math.PI*this.R*(s*(f-m)+Math.sqrt(u*(f-m)*(f-m)-(m+u)*(p-m)))/(m+u);o<0&&(y=-y),e=this.x0+y;var g=u+f;return y=Math.PI*this.R*(d*g-s*Math.sqrt((m+u)*(u+1)-g*g))/(m+u),r=i>=0?this.y0+y:this.y0-y,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(n=t.x/h)*n+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,r=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<1e-10?this.long0:G(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Oe={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u,c,h,f,p,d,m,y,g,v,_,b,w,x,M,S=t.x,E=t.y,O=Math.sin(t.y),T=Math.cos(t.y),P=G(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(l-E)*Math.sin(P),t.y=this.y0-this.a*(l-E)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(l+E)*Math.sin(P),t.y=this.y0+this.a*(l+E)*Math.cos(P),t):(_=this.sin_p12*O+this.cos_p12*T*Math.cos(P),v=(g=Math.acos(_))?g/Math.sin(g):1,t.x=this.x0+this.a*v*T*Math.sin(P),t.y=this.y0+this.a*v*(this.cos_p12*O-this.sin_p12*T*Math.cos(P)),t):(e=ie(this.es),r=oe(this.es),n=ae(this.es),i=se(this.es),Math.abs(this.sin_p12-1)<=1e-10?(o=this.a*ne(e,r,n,i,l),a=this.a*ne(e,r,n,i,E),t.x=this.x0+(o-a)*Math.sin(P),t.y=this.y0-(o-a)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=1e-10?(o=this.a*ne(e,r,n,i,l),a=this.a*ne(e,r,n,i,E),t.x=this.x0+(o+a)*Math.sin(P),t.y=this.y0+(o+a)*Math.cos(P),t):(s=O/T,u=ue(this.a,this.e,this.sin_p12),c=ue(this.a,this.e,O),h=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(c*T)),b=0===(f=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(P)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(f)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(P)*Math.cos(h)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),g=u*b*(1-(w=b*b)*(y=(d=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*d)*(1-y)/6+(x=w*b)/8*(m=p*d)*(1-2*y)+(M=x*b)/120*(y*(4-7*y)-3*p*p*(1-7*y))-M*b/48*m),t.x=this.x0+g*Math.sin(f),t.y=this.y0+g*Math.cos(f),t))},inverse:function(t){var e,r,n,i,o,a,s,u,c,h,f,p,d,m,y,g,v,_,b,w,x,M,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*l*this.a)return;return r=e/this.a,n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(e)<=1e-10?a=this.lat0:(a=de(i*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-l,o=Math.abs(s)<=1e-10?this.lat0>=0?G(this.long0+Math.atan2(t.x,-t.y)):G(this.long0-Math.atan2(-t.x,t.y)):G(this.long0+Math.atan2(t.x*n,e*this.cos_p12*i-t.y*this.sin_p12*n))),t.x=o,t.y=a,t}return u=ie(this.es),c=oe(this.es),h=ae(this.es),f=se(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*ne(u,c,h,f,l),e=Math.sqrt(t.x*t.x+t.y*t.y),a=ce((p-e)/this.a,u,c,h,f),o=G(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*ne(u,c,h,f,l),e=Math.sqrt(t.x*t.x+t.y*t.y),a=ce((e-p)/this.a,u,c,h,f),o=G(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),d=ue(this.a,this.e,this.sin_p12),g=Math.cos(y),_=-(v=this.e*this.cos_p12*g)*v/(1-this.es),b=3*this.es*(1-_)*this.sin_p12*this.cos_p12*g/(1-this.es),M=1-_*(x=(w=e/d)-_*(1+_)*Math.pow(w,3)/6-b*(1+3*_)*Math.pow(w,4)/24)*x/2-w*x*x*x/6,m=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*g),o=G(this.long0+Math.asin(Math.sin(y)*Math.sin(x)/Math.cos(m))),S=Math.sin(m),a=Math.atan2((S-this.es*M*this.sin_p12)*Math.tan(m),S*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var Te={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=G(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),1,((o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=1e-10)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=de(e/this.a),n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(e)<=1e-10?(s=this.lat0,t.x=a,t.y=s,t):(s=de(i*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-l,Math.abs(o)<=1e-10?(a=this.lat0>=0?G(this.long0+Math.atan2(t.x,-t.y)):G(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=G(this.long0+Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},Pe=1,Ie=2,ke=3,Re=4,Le=5,Ce=6,Ae=1,Ne=2,je=3,Fe=4;function De(t,e,r,n){var i;return t<1e-10?(n.value=Ae,i=0):(i=Math.atan2(e,r),Math.abs(i)<=f?n.value=Ae:i>f&&i<=l+f?(n.value=Ne,i-=l):i>l+f||i<=-(l+f)?(n.value=je,i=i>=0?i-d:i+d):(n.value=Fe,i+=l)),i}function Be(t,e){var r=t+e;return r<-d?r+=p:r>+d&&(r-=p),r}var ze={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=l-f/2?this.face=Le:this.lat0<=-(l-f/2)?this.face=Ce:Math.abs(this.long0)<=f?this.face=Pe:Math.abs(this.long0)<=l+f?this.face=this.long0>0?Ie:Re:this.face=ke,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,i,o,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===Le)i=l-e,r>=f&&r<=l+f?(u.value=Ae,n=r-l):r>l+f||r<=-(l+f)?(u.value=Ne,n=r>0?r-d:r+d):r>-(l+f)&&r<=-f?(u.value=je,n=r+l):(u.value=Fe,n=r);else if(this.face===Ce)i=l+e,r>=f&&r<=l+f?(u.value=Ae,n=-r+l):r<f&&r>=-f?(u.value=Ne,n=-r):r<-f&&r>=-(l+f)?(u.value=je,n=-r-l):(u.value=Fe,n=r>0?-r+d:-r-d);else{var c,h,p,m,y,g;this.face===Ie?r=Be(r,+l):this.face===ke?r=Be(r,+d):this.face===Re&&(r=Be(r,-l)),m=Math.sin(e),y=Math.cos(e),g=Math.sin(r),c=y*Math.cos(r),h=y*g,p=m,this.face===Pe?n=De(i=Math.acos(c),p,h,u):this.face===Ie?n=De(i=Math.acos(h),p,-c,u):this.face===ke?n=De(i=Math.acos(-c),p,-h,u):this.face===Re?n=De(i=Math.acos(-h),p,c,u):(i=n=0,u.value=Ae)}return a=Math.atan(12/d*(n+Math.acos(Math.sin(n)*Math.cos(f))-l)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===Ne?a+=l:u.value===je?a+=d:u.value===Fe&&(a+=1.5*d),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,i,o,a,s,u,c,h,f,p,m={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=Ae:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=Ne,e-=l):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=je,e=e<0?e+d:e-d):(y.value=Fe,e+=l),c=d/12*Math.tan(e),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(n=Math.cos(e))*n*(i=Math.tan(r))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Le)u=Math.acos(s),m.phi=l-u,y.value===Ae?m.lam=a+l:y.value===Ne?m.lam=a<0?a+d:a-d:y.value===je?m.lam=a-l:m.lam=a;else if(this.face===Ce)u=Math.acos(s),m.phi=u-l,y.value===Ae?m.lam=-a+l:y.value===Ne?m.lam=-a:y.value===je?m.lam=-a-l:m.lam=a<0?-a-d:-a+d;else{var g,v,_;c=(g=s)*g,v=(c+=(_=c>=1?0:Math.sqrt(1-c)*Math.sin(a))*_)>=1?0:Math.sqrt(1-c),y.value===Ne?(c=v,v=-_,_=c):y.value===je?(v=-v,_=-_):y.value===Fe&&(c=v,v=_,_=-c),this.face===Ie?(c=g,g=-v,v=c):this.face===ke?(g=-g,v=-v):this.face===Re&&(c=g,g=v,v=-c),m.phi=Math.acos(-_)-l,m.lam=Math.atan2(v,g),this.face===Ie?m.lam=Be(m.lam,-l):this.face===ke?m.lam=Be(m.lam,-d):this.face===Re&&(m.lam=Be(m.lam,+l))}return 0!==this.es&&(h=m.phi<0?1:0,f=Math.tan(m.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),m.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),h&&(m.phi=-m.phi)),m.lam+=this.long0,t.x=m.lam,t.y=m.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Ge=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],qe=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ue=h/5,Ve=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var We={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=G(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*Ue);n<0?n=0:n>=18&&(n=17);var i={x:Ve(Ge[n],r=h*(r-.08726646259971647*n))*e,y:Ve(qe[n],r)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=Ge[18][0],e.y=t.y<0?-l:l;else{var r=Math.floor(18*e.y);for(r<0?r=0:r>=18&&(r=17);;)if(qe[r][0]>e.y)--r;else{if(!(qe[r+1][0]<=e.y))break;++r}var n=qe[r],i=5*(e.y-n[0])/(qe[r+1][0]-n[0]);i=function(t,e,r,n){for(var i=e;n;--n){var o=t(i);if(i-=o,Math.abs(o)<r)break}return i}((function(t){return(Ve(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),i,1e-10,100),e.x/=Ve(Ge[r],i),e.y=(5*r+i)*c,t.y<0&&(e.y=-e.y)}return e.x=G(e.x+this.long0),e},names:["Robinson","robin"]};var Ye={init:function(){this.name="geocent"},forward:function(t){return lt(t,this.es,this.a)},inverse:function(t){return ct(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Ze=0,He=1,Xe=2,Ke=3,Je={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var $e={init:function(){if(Object.keys(Je).forEach(function(t){if(void 0===this[t])this[t]=Je[t].def;else{if(Je[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Je[t].num&&(this[t]=parseFloat(this[t]))}Je[t].degrees&&(this[t]=this[t]*c)}.bind(this)),Math.abs(Math.abs(this.lat0)-l)<1e-10?this.mode=this.lat0<0?He:Ze:Math.abs(this.lat0)<1e-10?this.mode=Xe:(this.mode=Ke,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,r,n,i,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case Ke:r=this.sinph0*o+this.cosph0*a*s;break;case Xe:r=a*s;break;case He:r=-o;break;case Ze:r=o}switch(e=(r=this.pn1/(this.p-r))*a*Math.sin(t.x),this.mode){case Ke:r*=this.cosph0*o-this.sinph0*a*s;break;case Xe:r*=o;break;case Ze:r*=-a*s;break;case He:r*=a*s}return i=1/((n=r*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-r*this.sg)*this.cw*i,r=n*i,t.x=e*this.a,t.y=r*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,r,n,i={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,r=this.pn1*t.y*this.cw*n,t.x=e*this.cg+r*this.sg,t.y=r*this.cg-e*this.sg;var o=Ut(t.x,t.y);if(Math.abs(o)<1e-10)i.x=0,i.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Ke:i.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(i.y))*o,t.x*=s*this.cosph0;break;case Xe:i.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case Ze:i.y=Math.asin(a),t.y=-t.y;break;case He:i.y=-Math.asin(a)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]};var Qe,tr={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,i,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/Ut(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(o)*Math.cos(a),n=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-r)*r-n*n-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Ut(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(i/Ut(n,e)))}else"sphere"===this.shape&&(e=Math.cos(a),r=Math.cos(o)*e,n=Math.sin(o)*e,i=Math.sin(a),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Ut(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(i/Ut(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,i,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Ut(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Ut(1,a));var u=s/this.radius_p;if(e=a*a+u*u+o*o,(n=(r=2*this.radius_g*o)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-r-Math.sqrt(n))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(n=(r=2*this.radius_g*o)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-r-Math.sqrt(n))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Mt.defaultDatum="WGS84",Mt.Proj=ut,Mt.WGS84=new Mt.Proj("WGS84"),Mt.Point=jt,Mt.toPoint=gt,Mt.defs=A,Mt.nadgrid=function(t,e){var r=new DataView(e),n=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(r),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:nt(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,n);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o={header:i,subgrids:function(t,e,r){for(var n=[],i=0;i<e.nSubgrids;i++){var o=ot(t,176,r),a=at(t,176,o,r),s=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[rt(o.lowerLongitude),rt(o.lowerLatitude)],del:[rt(o.longitudeInterval),rt(o.latitudeInterval)],lim:[s,u],count:o.gridNodeCount,cvs:it(a)})}return n}(r,i,n)};return tt[t]=o,o},Mt.transform=_t,Mt.mgrs=Et,Mt.version="__VERSION__",(Qe=Mt).Proj.projections.add(Gt),Qe.Proj.projections.add(Zt),Qe.Proj.projections.add(Ht),Qe.Proj.projections.add(Jt),Qe.Proj.projections.add($t),Qe.Proj.projections.add(Qt),Qe.Proj.projections.add(te),Qe.Proj.projections.add(ee),Qe.Proj.projections.add(re),Qe.Proj.projections.add(he),Qe.Proj.projections.add(pe),Qe.Proj.projections.add(me),Qe.Proj.projections.add(ye),Qe.Proj.projections.add(ge),Qe.Proj.projections.add(ve),Qe.Proj.projections.add(_e),Qe.Proj.projections.add(be),Qe.Proj.projections.add(we),Qe.Proj.projections.add(xe),Qe.Proj.projections.add(Me),Qe.Proj.projections.add(Se),Qe.Proj.projections.add(Ee),Qe.Proj.projections.add(Oe),Qe.Proj.projections.add(Te),Qe.Proj.projections.add(ze),Qe.Proj.projections.add(We),Qe.Proj.projections.add(Ye),Qe.Proj.projections.add($e),Qe.Proj.projections.add(tr);var er=Mt,rr={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},nr={};nr[rr.DEGREES]=2*Math.PI*6370997/360,nr[rr.FEET]=.3048,nr[rr.METERS]=1,nr[rr.USFEET]=1200/3937;var ir=rr,or=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||nr[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();function ar(t,e,r){return Math.min(Math.max(t,e),r)}var sr="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function ur(t,e,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var u=((t-r)*a+(e-n)*s)/(a*a+s*s);u>1?(r=i,n=o):u>0&&(r+=a*u,n+=s*u)}return lr(t,e,r,n)}function lr(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function cr(t){return 180*t/Math.PI}function hr(t){return t*Math.PI/180}function fr(t,e){var r=t%e;return r*e<0?r+e:r}function pr(t,e,r){return t+r*(e-t)}var dr={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};function mr(t,e,r){var n=r||6371008.8,i=hr(t[1]),o=hr(e[1]),a=(o-i)/2,s=hr(e[0]-t[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function yr(t,e){for(var r=0,n=0,i=t.length;n<i-1;++n)r+=mr(t[n],t[n+1],e);return r}function gr(t,e){for(var r=0,n=t.length,i=t[n-1][0],o=t[n-1][1],a=0;a<n;a++){var s=t[a][0],u=t[a][1];r+=hr(s-i)*(2+Math.sin(hr(o))+Math.sin(hr(u))),i=s,o=u}return r*e*e/2}function vr(t,e,r,n){var i=n||6371008.8,o=hr(t[1]),a=hr(t[0]),s=e/i,u=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(r));return[cr(a+Math.atan2(Math.sin(r)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(u))),cr(u)]}function _r(){return function(){throw new Error("Unimplemented abstract method.")}()}var br=0;function wr(t){return t.ol_uid||(t.ol_uid=String(++br))}var xr,Mr=(xr=function(t,e){return(xr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}xr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Sr=function(t){function e(e){var r=this,n="Assertion failed. See https://openlayers.org/en/"+("v"+"6.3.1".split("-")[0])+"/doc/errors/#"+e+" for details.";return(r=t.call(this,n)||this).code=e,r.name="AssertionError",r.message=n,r}return Mr(e,t),e}(Error);function Er(t,e){if(!t)throw new Sr(e)}var Or="bottom-left",Tr="bottom-right",Pr="top-left",Ir="top-right",kr=0,Rr=1,Lr=2,Cr=4,Ar=8,Nr=16;function jr(t){for(var e=Vr(),r=0,n=t.length;r<n;++r)Jr(e,t[r]);return e}function Fr(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Dr(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Br(t,e,r){var n,i;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(i=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*i}function zr(t,e){return qr(t,e[0],e[1])}function Gr(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function qr(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function Ur(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=kr;return a<r?u|=Nr:a>i&&(u|=Cr),s<n?u|=Ar:s>o&&(u|=Lr),u===kr&&(u=Rr),u}function Vr(){return[1/0,1/0,-1/0,-1/0]}function Wr(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function Yr(t){return Wr(1/0,1/0,-1/0,-1/0,t)}function Zr(t,e){var r=t[0],n=t[1];return Wr(r,n,r,n,e)}function Hr(t,e,r,n,i){return Qr(Yr(i),t,e,r,n)}function Xr(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Kr(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Jr(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function $r(t,e){for(var r=0,n=e.length;r<n;++r)Jr(t,e[r]);return t}function Qr(t,e,r,n,i){for(;r<n;r+=i)tn(t,e[r],e[r+1]);return t}function tn(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function en(t,e){var r;return(r=e(nn(t)))||(r=e(on(t)))||(r=e(fn(t)))?r:(r=e(hn(t)))||!1}function rn(t){var e=0;return mn(t)||(e=pn(t)*ln(t)),e}function nn(t){return[t[0],t[1]]}function on(t){return[t[2],t[1]]}function an(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function sn(t,e){var r;return e===Or?r=nn(t):e===Tr?r=on(t):e===Pr?r=hn(t):e===Ir?r=fn(t):Er(!1,13),r}function un(t,e,r,n,i){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(r),u=Math.sin(r),l=o*s,c=o*u,h=a*s,f=a*u,p=t[0],d=t[1],m=p-l+f,y=p-l-f,g=p+l-f,v=p+l+f,_=d-c-h,b=d-c+h,w=d+c+h,x=d+c-h;return Wr(Math.min(m,y,g,v),Math.min(_,b,w,x),Math.max(m,y,g,v),Math.max(_,b,w,x),i)}function ln(t){return t[3]-t[1]}function cn(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return dn(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Yr(n),n}function hn(t){return[t[0],t[3]]}function fn(t){return[t[2],t[3]]}function pn(t){return t[2]-t[0]}function dn(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function mn(t){return t[2]<t[0]||t[3]<t[1]}function yn(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function gn(t,e,r,n){var i=[];if(n>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)i.push(t[0]+o*s/n,t[1],t[2],t[1]+a*s/n,t[2]-o*s/n,t[3],t[0],t[3]-a*s/n);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var u=[],l=[],c=(s=0,i.length);s<c;s+=2)u.push(i[s]),l.push(i[s+1]);return function(t,e,r){return Wr(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}(u,l,r)}function vn(t,e){var r=e.getExtent(),n=an(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=pn(r),o=Math.floor((n[0]-r[0])/i)*i;t[0]-=o,t[2]-=o}return t}var _n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bn=6378137*Math.PI,wn=[-bn,-bn,bn,bn],xn=[-180,-85,180,85],Mn=function(t){function e(e){return t.call(this,{code:e,units:ir.METERS,extent:wn,global:!0,worldExtent:xn,getPointResolution:function(t,e){return t/sr(e[1]/6378137)}})||this}return _n(e,t),e}(or),Sn=[new Mn("EPSG:3857"),new Mn("EPSG:102100"),new Mn("EPSG:102113"),new Mn("EPSG:900913"),new Mn("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Mn("urn:ogc:def:crs:EPSG::3857"),new Mn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function En(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=bn,s=0;s<n;s+=i){o[s]=a*t[s]/180;var u=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o}function On(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=0;a<n;a+=i)o[a]=180*t[a]/bn,o[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return o}var Tn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pn=[-180,-90,180,90],In=6378137*Math.PI/180,kn=function(t){function e(e,r){return t.call(this,{code:e,units:ir.DEGREES,extent:Pn,axisOrientation:r,global:!0,metersPerUnit:In,worldExtent:Pn})||this}return Tn(e,t),e}(or),Rn=[new kn("CRS:84"),new kn("EPSG:4326","neu"),new kn("urn:ogc:def:crs:EPSG::4326","neu"),new kn("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new kn("urn:ogc:def:crs:OGC:1.3:CRS84"),new kn("urn:ogc:def:crs:OGC:2:84"),new kn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new kn("urn:x-ogc:def:crs:EPSG:4326","neu")],Ln="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a])}return r};function Cn(t){for(var e in t)delete t[e]}var An="function"==typeof Object.values?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};function Nn(t){var e;for(e in t)return!1;return!e}var jn={};function Fn(t,e,r){var n=t.getCode(),i=e.getCode();n in jn||(jn[n]={}),jn[n][i]=r}function Dn(t,e){var r;return t in jn&&e in jn[t]&&(r=jn[t][e]),r}var Bn={};function zn(t,e,r){var n;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];n=e}else n=t.slice();return n}function Gn(t,e,r){if(void 0!==e&&t!==e){for(var n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function qn(t){!function(t,e){Bn[t]=e}(t.getCode(),t),Fn(t,t,zn)}function Un(t){return"string"==typeof t?Bn[t]||null:t||null}function Vn(t,e,r,n){var i,o=(t=Un(t)).getPointResolutionFunc();if(o)i=o(e,r),n&&n!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/nr[n]);else if(t.getUnits()==ir.DEGREES&&!n||n==ir.DEGREES)i=e;else{var a,s=Kn(t,Un("EPSG:4326")),u=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];i=(mr((u=s(u,u,2)).slice(0,2),u.slice(2,4))+mr(u.slice(4,6),u.slice(6,8)))/2,void 0!==(a=n?nr[n]:t.getMetersPerUnit())&&(i/=a)}return i}function Wn(t){!function(t){t.forEach(qn)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Fn(e,t,zn)}))}))}function Yn(t,e){return t?"string"==typeof t?Un(t):t:Un(e)}function Zn(t){return function(e,r,n){for(var i=e.length,o=void 0!==n?n:2,a=void 0!==r?r:new Array(i),s=0;s<i;s+=o){var u=t([e[s],e[s+1]]);a[s]=u[0],a[s+1]=u[1];for(var l=o-1;l>=2;--l)a[s+l]=e[s+l]}return a}}function Hn(t,e,r,n){var i=Un(t),o=Un(e);Fn(i,o,Zn(r)),Fn(o,i,Zn(n))}function Xn(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Kn(t,e)===zn)&&r}function Kn(t,e){var r=Dn(t.getCode(),e.getCode());return r||(r=Gn),r}function Jn(t,e){return Kn(Un(t),Un(e))}function $n(t,e,r){return Jn(e,r)(t,void 0,t.length)}function Qn(t,e,r,n){return gn(t,Jn(e,r),void 0,n)}var ti,ei,ri,ni=null;function ii(){return ni}function oi(t,e){return ni?$n(t,e,ni):t}function ai(t,e){return ni?$n(t,ni,e):t}function si(t,e){return ni?Qn(t,e,ni):t}function ui(t,e){return ni?Qn(t,ni,e):t}function li(t){var e,r,n=Object.keys(t.defs),i=n.length;for(e=0;e<i;++e){var o=n[e];if(!Un(o)){var a=t.defs(o);qn(new or({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:a.units}))}}for(e=0;e<i;++e){var s=n[e],u=Un(s);for(r=0;r<i;++r){var l=n[r],c=Un(l);if(!Dn(s,l))if(t.defs[s]===t.defs[l])Wn([u,c]);else{var h=t(s,l);Hn(u,c,h.forward,h.inverse)}}}}Wn(Sn),Wn(Rn),ti=Sn,ei=En,ri=On,Rn.forEach((function(t){ti.forEach((function(e){Fn(t,e,ei),Fn(e,t,ri)}))}));[{def:"+proj=longlat +datum=WGS84 +no_defs",extent:[-180,-90,180,90],codes:["EPSG:4326","urn:ogc:def:crs:EPSG::4326","urn:ogc:def:crs:OGC:1.3:CRS84","http://www.opengis.net/def/crs/OGC/1.3/CRS84"],units:"d",metersPerUnit:111319.49079327358,axisOrientation:"neu"},{def:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32627","urn:ogc:def:crs:EPSG::32627","http://www.opengis.net/gml/srs/epsg.xml#32627"],units:"m"},{def:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.44317933178,0,833978.5568206678,9329005.18301614],codes:["EPSG:32628","urn:ogc:def:crs:EPSG::32628","http://www.opengis.net/gml/srs/epsg.xml#32628"],units:"m"},{def:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32629","urn:ogc:def:crs:EPSG::32629","http://www.opengis.net/gml/srs/epsg.xml#32629"],units:"m"},{def:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32630","urn:ogc:def:crs:EPSG::32630","http://www.opengis.net/gml/srs/epsg.xml#32630"],units:"m"},{def:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32631","urn:ogc:def:crs:EPSG::32631","http://www.opengis.net/gml/srs/epsg.xml#32631"],units:"m"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-16.1,32.88,39.65,84.17],codes:["EPSG:4258","urn:ogc:def:crs:EPSG::4258","http://www.opengis.net/gml/srs/epsg.xml#4258"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-164850.78,3660417.01,988728.57,9567111.85],codes:["EPSG:25829","urn:ogc:def:crs:EPSG::25829","http://www.opengis.net/gml/srs/epsg.xml#25829"],units:"m"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[397101.09,3638520.14,1034670.43,9625438.82],codes:["EPSG:25828","urn:ogc:def:crs:EPSG::25828","http://www.opengis.net/gml/srs/epsg.xml#25828"],units:"m"},{def:"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-729785.83,3715125.82,940929.67,9518470.69],codes:["EPSG:25830","urn:ogc:def:crs:EPSG::25830","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m"},{def:"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-1300111.74,3804640.43,893164.13,9478718.31],codes:["EPSG:25831","urn:ogc:def:crs:EPSG::25831","http://www.opengis.net/gml/srs/epsg.xml#25831"],units:"m"},{def:"+proj=longlat +ellps=intl +no_defs",extent:[-16.09882145355955,25.711114310330917,48.60999527749605,84.16977336415472],codes:["EPSG:4230","urn:ogc:def:crs:EPSG::4230","http://www.opengis.net/gml/srs/epsg.xml#4230"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=28 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[997517.95,3873475.61,2024693.05,8529441.99],codes:["EPSG:23028","urn:ogc:def:crs:EPSG::23028","http://www.opengis.net/gml/srs/epsg.xml#23028"],units:"m"},{def:"+proj=utm +zone=29 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[448933.91,3860083.93,1860436.11,8381369.16],codes:["EPSG:23029","urn:ogc:def:crs:EPSG::23029","http://www.opengis.net/gml/srs/epsg.xml#23029"],units:"m"},{def:"+proj=utm +zone=30 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-99844.71,3879626.63,1682737.72,8251830.8],codes:["EPSG:23030","urn:ogc:def:crs:EPSG::23030","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m"},{def:"+proj=utm +zone=31 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-650883.16,3932764.97,1493695.91,8141744.84],codes:["EPSG:23031","urn:ogc:def:crs:EPSG::23031","http://www.opengis.net/gml/srs/epsg.xml#23031"],units:"m"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-21.93,24.6,-11.75,32.76],codes:["EPSG:4081","urn:ogc:def:crs:EPSG::4081","http://www.opengis.net/gml/srs/epsg.xml#4081"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[405849.71,2720975.6,1367994.77,3662797.15],codes:["EPSG:4082","urn:ogc:def:crs:EPSG::4082","http://www.opengis.net/gml/srs/epsg.xml#4082"],units:"m"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",extent:[-202677.94,2738405.48,804488.92,3629357.1],codes:["EPSG:4083","urn:ogc:def:crs:EPSG::4083","http://www.opengis.net/gml/srs/epsg.xml#4083"],units:"m"},{def:"+proj=merc +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[-20026376.39,15496570.74,20026376.39,18764656.23],codes:["EPSG:3395","urn:ogc:def:crs:EPSG::3395","http://www.opengis.net/gml/srs/epsg.xml#3395"],units:"m"}].forEach((function(t){t.codes.forEach((function(e){er.defs(e,t.def)})),Wn(t.codes.map((function(e){return new or({code:e,extent:t.extent,units:t.units,metersPerUnit:t.metersPerUnit,axisOrientation:t.axisOrientation})})))})),li(er);var ci="add",hi="remove",fi="propertychange";function pi(t,e,r,n,i){if(n&&n!==t&&(r=r.bind(n)),i){var o=r;r=function(){t.removeEventListener(e,r),o.apply(this,arguments)}}var a={target:t,type:e,listener:r};return t.addEventListener(e,r),a}function di(t,e,r,n){return pi(t,e,r,n,!0)}function mi(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Cn(t))}var yi=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function gi(t,e){return t>e?1:t<e?-1:0}function vi(t,e){return t.indexOf(e)>=0}function _i(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function bi(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function wi(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]}function xi(t,e){for(var r,n=t.length>>>0,i=0;i<n;i++)if(e(r=t[i],i,t))return r;return null}function Mi(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Si(t,e){var r;return!t.every((function(n,i){return r=i,!e(n,i,t)}))?r:-1}function Ei(){return!0}function Oi(){return!1}function Ti(){}function Pi(t){t.stopPropagation()}var Ii=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),ki=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ri=function(t){function e(e){var r=t.call(this)||this;return r.eventTarget_=e,r.pendingRemovals_={},r.dispatching_={},r.listeners_={},r}return ki(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var r=this.listeners_[t];r||(r=[],this.listeners_[t]=r),-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new Ii(t):t,r=e.type;e.target||(e.target=this.eventTarget_||this);var n,i=this.listeners_[r];if(i){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var o=0,a=i.length;o<a;++o)if(!1===(n="handleEvent"in i[o]?i[o].handleEvent(e):i[o].call(this,e))||e.propagationStopped){n=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var s=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];s--;)this.removeEventListener(r,Ti);delete this.dispatching_[r]}return n}},e.prototype.disposeInternal=function(){Cn(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var r=this.listeners_[t];if(r){var n=r.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(r[n]=Ti,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t]))}},e}(yi),Li="change",Ci="error",Ai="clear",Ni="contextmenu",ji="click",Fi="dblclick",Di="dragenter",Bi="dragover",zi="drop",Gi="keydown",qi="keypress",Ui="load",Vi="resize",Wi="touchmove",Yi="wheel",Zi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Hi(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)mi(t[e]);else mi(t)}var Xi=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return Zi(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Li)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=pi(this,t[i],e);return n}return pi(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=di(this,t[i],e);return n}return di(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(Ri),Ki=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ji=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.key=r,i.oldValue=n,i}return Ki(e,t),e}(Ii),$i=function(t){function e(e){var r=t.call(this)||this;return wr(r),r.values_={},void 0!==e&&r.setProperties(e),r}return Ki(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Ln({},this.values_)},e.prototype.notify=function(t,e){var r;r=to(t),this.dispatchEvent(new Ji(r,t,e)),r=fi,this.dispatchEvent(new Ji(r,t,e))},e.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},e}(Xi),Qi={};function to(t){return Qi.hasOwnProperty(t)?Qi[t]:Qi[t]="change:"+t}var eo=$i,ro=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),no="length",io=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return ro(e,t),e}(Ii),oo=function(t){function e(e,r){var n=t.call(this)||this,i=r||{};if(n.unique_=!!i.unique,n.array_=e||[],n.unique_)for(var o=0,a=n.array_.length;o<a;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return ro(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(no)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new io(ci,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new io(hi,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new io(hi,n,t)),this.dispatchEvent(new io(ci,e,t))}else{for(var i=r;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(no,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new Sr(58)},e}(eo),ao=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),so=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.map=r,i.frameState=void 0!==n?n:null,i}return ao(e,t),e}(Ii),uo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lo=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,o)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return uo(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(so),co=(r(35),"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():""),ho=-1!==co.indexOf("firefox"),fo=(-1!==co.indexOf("safari")&&co.indexOf("chrom"),-1!==co.indexOf("webkit")&&-1==co.indexOf("edge")),po=-1!==co.indexOf("macintosh"),mo="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,yo="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,go="undefined"!=typeof Image&&Image.prototype.decode,vo=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),_o={SINGLECLICK:"singleclick",CLICK:ji,DBLCLICK:Fi,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},bo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wo=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,n,i,o)||this;return a.pointerEvent=n,a}return bo(e,t),e}(lo),xo="pointermove",Mo="pointerdown",So="pointerup",Eo="pointerout",Oo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),To=function(t){function e(e,r){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=r?r*mo:mo,n.down_=null;var i=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=i,n.pointerdownListenerKey_=pi(i,Mo,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=pi(i,xo,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(Wi,n.boundHandleTouchMove_,!!vo&&{passive:!1}),n}return Oo(e,t),e.prototype.emulateClick_=function(t){var e=new wo(_o.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new wo(_o.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new wo(_o.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==_o.POINTERUP||e.type==_o.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==_o.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new wo(_o.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(mi),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new wo(_o.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(pi(document,_o.POINTERMOVE,this.handlePointerMove_,this),pi(document,_o.POINTERUP,this.handlePointerUp_,this),pi(this.element_,_o.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new wo(_o.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new wo(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(mi(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Wi,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(mi(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(mi),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(Ri),Po="postrender",Io="movestart",ko="moveend",Ro="layergroup",Lo="size",Co="target",Ao="view",No="prerender",jo="postrender",Fo="precompose",Do="postcompose",Bo="rendercomplete",zo=0,Go=1,qo=2,Uo=3,Vo=4,Wo=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Cn(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r},t.prototype.enqueue=function(t){Er(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,i=e[t],o=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<n&&r[u]<r[s]?u:s;e[t]=e[l],r[t]=r[l],t=l}e[t]=i,r[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var r=this.elements_,n=this.priorities_,i=r[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=i,n[e]=o},t.prototype.reprioritize=function(){var t,e,r,n=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(r=n(t=i[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=r,i[a++]=t);i.length=a,o.length=a,this.heapify_()},t}(),Yo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zo=function(t){function e(e,r){var n=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return Yo(e,t),e.prototype.enqueue=function(e){var r=t.prototype.enqueue.call(this,e);r&&e[0].addEventListener(Li,this.boundHandleTileChange_);return r},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(e.hifi&&r===qo||r===Uo||r===Vo){e.removeEventListener(Li,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var r,n,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),r.getState()!==zo||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++i,r.load())},e}(Wo);function Ho(t,e,r){return function(n,i,o,a){if(n){var s=e?0:o[0]*i,u=e?0:o[1]*i,l=t[0]+s/2,c=t[2]-s/2,h=t[1]+u/2,f=t[3]-u/2;l>c&&(c=l=(c+l)/2),h>f&&(f=h=(f+h)/2);var p=ar(n[0],l,c),d=ar(n[1],h,f),m=30*i;return a&&r&&(p+=-m*Math.log(1+Math.max(0,l-n[0])/m)+m*Math.log(1+Math.max(0,n[0]-c)/m),d+=-m*Math.log(1+Math.max(0,h-n[1])/m)+m*Math.log(1+Math.max(0,n[1]-f)/m)),[p,d]}}}function Xo(t){return t}function Ko(t,e,r,n){var i=pn(e)/r[0],o=ln(e)/r[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function Jo(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),ar(n,r/2,2*e)}function $o(t,e,r,n,i){return function(o,a,s,u){if(void 0!==o){var l=n?Ko(t,n,s,i):t;return(void 0===r||r)&&u?Jo(o,l,e):ar(o,e,l)}}}function Qo(t){return void 0!==t?0:void 0}function ta(t){return void 0!==t?t:void 0}var ea=0,ra=1,na="center",ia="resolution",oa="rotation";function aa(t,e,r){var n=void 0!==r?t.toFixed(r):""+t,i=n.indexOf(".");return(i=-1===i?n.length:i)>e?n:new Array(1+e-i).join("0")+n}function sa(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function ua(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function la(t,e){var r,n,i=t[0],o=t[1],a=e[0],s=e[1],u=a[0],l=a[1],c=s[0],h=s[1],f=c-u,p=h-l,d=0===f&&0===p?0:(f*(i-u)+p*(o-l))/(f*f+p*p||0);return d<=0?(r=u,n=l):d>=1?(r=c,n=h):(r=u+d*f,n=l+d*p),[r,n]}function ca(t,e,r){var n=fr(e+180,360)-180,i=Math.abs(3600*n),o=r||0,a=Math.pow(10,o),s=Math.floor(i/3600),u=Math.floor((i-3600*s)/60),l=i-3600*s-60*u;return(l=Math.ceil(l*a)/a)>=60&&(l=0,u+=1),u>=60&&(u=0,s+=1),s+"° "+aa(u,2)+"′ "+aa(l,2,o)+"″"+(0==n?"":" "+t.charAt(n<0?1:0))}function ha(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function fa(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function pa(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t}function da(t,e){return t[0]*=e,t[1]*=e,t}function ma(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function ya(t,e){return Math.sqrt(ma(t,e))}function ga(t,e){return ma(t,la(t,e))}function va(t,e){return ha(t,"{x}, {y}",e)}function _a(t,e){var r=e.getExtent();if(e.canWrapX()&&(t[0]<r[0]||t[0]>=r[2])){var n=pn(r),i=Math.floor((t[0]-r[0])/n);t[0]-=i*n}return t}function ba(t){return Math.pow(t,3)}function wa(t){return 1-ba(1-t)}function xa(t){return 3*t*t-2*t*t*t}function Ma(t){return t}function Sa(t){return t<.5?xa(2*t):1-xa(2*(t-.5))}var Ea="XY",Oa="XYZ",Ta="XYM",Pa="XYZM";function Ia(t,e,r,n,i,o){for(var a=o||[],s=0,u=e;u<r;u+=n){var l=t[u],c=t[u+1];a[s++]=i[0]*l+i[2]*c+i[4],a[s++]=i[1]*l+i[3]*c+i[5]}return o&&a.length!=s&&(a.length=s),a}function ka(t,e,r,n,i,o,a){for(var s=a||[],u=Math.cos(i),l=Math.sin(i),c=o[0],h=o[1],f=0,p=e;p<r;p+=n){var d=t[p]-c,m=t[p+1]-h;s[f++]=c+d*u-m*l,s[f++]=h+d*l+m*u;for(var y=p+2;y<p+n;++y)s[f++]=t[y]}return a&&s.length!=f&&(s.length=f),s}function Ra(t,e,r,n,i,o,a){for(var s=a||[],u=0,l=e;l<r;l+=n){s[u++]=t[l]+i,s[u++]=t[l+1]+o;for(var c=l+2;c<l+n;++c)s[u++]=t[c]}return a&&s.length!=u&&(s.length=u),s}var La=new Array(6);function Ca(t){return Na(t,1,0,0,1,0,0)}function Aa(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return t[0]=r*u+i*l,t[1]=n*u+o*l,t[2]=r*c+i*h,t[3]=n*c+o*h,t[4]=r*f+i*p+a,t[5]=n*f+o*p+s,t}function Na(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function ja(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function Fa(t,e,r){return Aa(t,Na(La,e,0,0,r,0,0))}function Da(t,e,r,n,i,o,a,s){var u=Math.sin(o),l=Math.cos(o);return t[0]=n*l,t[1]=i*u,t[2]=-n*u,t[3]=i*l,t[4]=a*n*l-s*n*u+e,t[5]=a*i*u+s*i*l+r,t}function Ba(t,e){var r,n=(r=e)[0]*r[3]-r[1]*r[2];Er(0!==n,32);var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5];return t[0]=s/n,t[1]=-o/n,t[2]=-a/n,t[3]=i/n,t[4]=(a*l-s*u)/n,t[5]=-(i*l-o*u)/n,t}function za(t){return"matrix("+t.join(", ")+")"}var Ga=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qa=[1,0,0,1,0,0],Ua=function(t){function e(){var e,r,n,i,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===i&&Mi(t,n)||(o=!0,i=this,n=t,r=e.apply(this,arguments)),r}),a}return Ga(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return _r()},e.prototype.closestPointXY=function(t,e,r,n){return _r()},e.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},e.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return _r()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){_r()},e.prototype.scale=function(t,e,r){_r()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return _r()},e.prototype.getType=function(){return _r()},e.prototype.applyTransform=function(t){_r()},e.prototype.intersectsExtent=function(t){return _r()},e.prototype.translate=function(t,e){_r()},e.prototype.transform=function(t,e){var r=Un(t),n=r.getUnits()==ir.TILE_PIXELS?function(t,n,i){var o=r.getExtent(),a=r.getWorldExtent(),s=ln(a)/ln(o);return Da(qa,a[0],a[3],s,-s,0,0,0),Ia(t,0,t.length,i,qa,n),Jn(r,e)(t,n,i)}:Jn(r,e);return this.applyTransform(n),this},e}(eo),Va=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Wa(t){var e;return t==Ea?e=2:t==Oa||t==Ta?e=3:t==Pa&&(e=4),e}var Ya=function(t){function e(){var e=t.call(this)||this;return e.layout=Ea,e.stride=2,e.flatCoordinates=null,e}return Va(e,t),e.prototype.computeExtent=function(t){return Hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return _r()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Wa(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){_r()},e.prototype.setLayout=function(t,e,r){var n;if(t)n=Wa(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout=Ea,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=Ea:3==t?e=Oa:4==t&&(e=Pa);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();ka(r,0,r.length,n,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var i=r;i||(i=an(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,r,n,i,o,a,s){for(var u=s||[],l=a[0],c=a[1],h=0,f=e;f<r;f+=n){var p=t[f]-l,d=t[f+1]-c;u[h++]=l+i*p,u[h++]=c+o*d;for(var m=f+2;m<f+n;++m)u[h++]=t[m]}s&&u.length!=h&&(u.length=h)}(o,0,o.length,a,t,n,i,o),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();Ra(r,0,r.length,n,t,e,r),this.changed()}},e}(Ua);function Za(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function Ha(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=Za(t,e,s,n),e=s}return i}function Xa(t,e,r,n,i,o,a){var s,u=t[e],l=t[e+1],c=t[r]-u,h=t[r+1]-l;if(0===c&&0===h)s=e;else{var f=((i-u)*c+(o-l)*h)/(c*c+h*h);if(f>1)s=r;else{if(f>0){for(var p=0;p<n;++p)a[p]=pr(t[e+p],t[r+p],f);return void(a.length=n)}s=e}}for(p=0;p<n;++p)a[p]=t[s+p];a.length=n}function Ka(t,e,r,n,i){var o=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var s=t[e],u=t[e+1],l=lr(o,a,s,u);l>i&&(i=l),o=s,a=u}return i}function Ja(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Ka(t,e,s,n,i),e=s}return i}function $a(t,e,r,n,i,o,a,s,u,l,c){if(e==r)return l;var h,f;if(0===i){if((f=lr(a,s,t[e],t[e+1]))<l){for(h=0;h<n;++h)u[h]=t[e+h];return u.length=n,f}return l}for(var p=c||[NaN,NaN],d=e+n;d<r;)if(Xa(t,d-n,d,n,a,s,p),(f=lr(a,s,p[0],p[1]))<l){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(l))/i|0,1);if(o&&(Xa(t,r-n,e,n,a,s,p),(f=lr(a,s,p[0],p[1]))<l)){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n}return l}function Qa(t,e,r,n,i,o,a,s,u,l,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];l=$a(t,e,d,n,i,o,a,s,u,l,h),e=d}return l}function ts(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e}function es(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)t[e++]=a[s];return e}function rs(t,e,r,n,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var l=es(t,e,r[s],n);o[a++]=l,e=l}return o.length=a,o}function ns(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=e;s<r;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function is(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];o[a++]=ns(t,e,l,n,o[a]),e=l}return o.length=a,o}function os(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];o[a++]=is(t,e,l,n,o[a]),e=l[l.length-1]}return o.length=a,o}function as(t,e,r,n,i,o,a){var s=(r-e)/n;if(s<3){for(;e<r;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,r-n],c=0;l.length>0;){for(var h=l.pop(),f=l.pop(),p=0,d=t[f],m=t[f+1],y=t[h],g=t[h+1],v=f+n;v<h;v+=n){var _=ur(t[v],t[v+1],d,m,y,g);_>p&&(c=v,p=_)}p>i&&(u[(c-e)/n]=1,f+n<c&&l.push(f,c),c+n<h&&l.push(c,h))}for(v=0;v<s;++v)u[v]&&(o[a++]=t[e+v*n],o[a++]=t[e+v*n+1]);return a}function ss(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=as(t,e,c,n,i,o,a),s.push(a),e=c}return a}function us(t,e){return e*Math.round(t/e)}function ls(t,e,r,n,i,o,a){if(e==r)return a;var s,u,l=us(t[e],i),c=us(t[e+1],i);e+=n,o[a++]=l,o[a++]=c;do{if(s=us(t[e],i),u=us(t[e+1],i),(e+=n)==r)return o[a++]=s,o[a++]=u,a}while(s==l&&u==c);for(;e<r;){var h=us(t[e],i),f=us(t[e+1],i);if(e+=n,h!=s||f!=u){var p=s-l,d=u-c,m=h-l,y=f-c;p*y==d*m&&(p<0&&m<p||p==m||p>0&&m>p)&&(d<0&&y<d||d==y||d>0&&y>d)?(s=h,u=f):(o[a++]=s,o[a++]=u,l=s,c=u,s=h,u=f)}}return o[a++]=s,o[a++]=u,a}function cs(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=ls(t,e,c,n,i,o,a),s.push(a),e=c}return a}var hs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fs=function(t){function e(e,r){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return hs(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Br(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ka(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.getArea=function(){return Za(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=as(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Ea)},e.prototype.getType=function(){return dr.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ya),ps=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ds=function(t){function e(e,r){var n=t.call(this)||this;return n.setCoordinates(e,r),n}return ps(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=lr(t,e,i[0],i[1]);if(o<n){for(var a=this.stride,s=0;s<a;++s)r[s]=i[s];return r.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Zr(this.flatCoordinates,t)},e.prototype.getType=function(){return dr.POINT},e.prototype.intersectsExtent=function(t){return qr(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ts(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ya);function ms(t,e,r,n,i){return!en(i,(function(i){return!ys(t,e,r,n,i[0],i[1])}))}function ys(t,e,r,n,i,o){for(var a=0,s=t[r-n],u=t[r-n+1];e<r;e+=n){var l=t[e],c=t[e+1];u<=o?c>o&&(l-s)*(o-u)-(i-s)*(c-u)>0&&a++:c<=o&&(l-s)*(o-u)-(i-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function gs(t,e,r,n,i,o){if(0===r.length)return!1;if(!ys(t,e,r[0],n,i,o))return!1;for(var a=1,s=r.length;a<s;++a)if(ys(t,r[a-1],r[a],n,i,o))return!1;return!0}function vs(t,e,r,n,i,o,a){for(var s,u,l,c,h,f,p,d=i[o+1],m=[],y=0,g=r.length;y<g;++y){var v=r[y];for(c=t[v-n],f=t[v-n+1],s=e;s<v;s+=n)h=t[s],p=t[s+1],(d<=f&&p<=d||f<=d&&d<=p)&&(l=(d-f)/(p-f)*(h-c)+c,m.push(l)),c=h,f=p}var _=NaN,b=-1/0;for(m.sort(gi),c=m[0],s=1,u=m.length;s<u;++s){h=m[s];var w=Math.abs(h-c);w>b&&gs(t,e,r,n,l=(c+h)/2,d)&&(_=l,b=w),c=h}return isNaN(_)&&(_=i[o]),a?(a.push(_,d,b),a):[_,d,b]}function _s(t,e,r,n,i){for(var o=[],a=0,s=r.length;a<s;++a){var u=r[a];o=vs(t,e,u,n,i,2*a,o),e=u[u.length-1]}return o}function bs(t,e,r,n,i){for(var o,a=[t[e],t[e+1]],s=[];e+n<r;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],o=i(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}function ws(t,e,r,n,i){var o=Qr([1/0,1/0,-1/0,-1/0],t,e,r,n);return!!dn(i,o)&&(!!Gr(i,o)||(o[0]>=i[0]&&o[2]<=i[2]||(o[1]>=i[1]&&o[3]<=i[3]||bs(t,e,r,n,(function(t,e){return function(t,e,r){var n=!1,i=Ur(t,e),o=Ur(t,r);if(i===Rr||o===Rr)n=!0;else{var a=t[0],s=t[1],u=t[2],l=t[3],c=e[0],h=e[1],f=r[0],p=r[1],d=(p-h)/(f-c),m=void 0,y=void 0;o&Lr&&!(i&Lr)&&(n=(m=f-(p-l)/d)>=a&&m<=u),n||!(o&Cr)||i&Cr||(n=(y=p-(f-u)*d)>=s&&y<=l),n||!(o&Ar)||i&Ar||(n=(m=f-(p-s)/d)>=a&&m<=u),n||!(o&Nr)||i&Nr||(n=(y=p-(f-a)*d)>=s&&y<=l)}return n}(i,t,e)})))))}function xs(t,e,r,n,i){if(!function(t,e,r,n,i){return!!ws(t,e,r,n,i)||(!!ys(t,e,r,n,i[0],i[1])||(!!ys(t,e,r,n,i[0],i[3])||(!!ys(t,e,r,n,i[2],i[1])||!!ys(t,e,r,n,i[2],i[3]))))}(t,e,r[0],n,i))return!1;if(1===r.length)return!0;for(var o=1,a=r.length;o<a;++o)if(ms(t,r[o-1],r[o],n,i)&&!ws(t,r[o-1],r[o],n,i))return!1;return!0}function Ms(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}function Ss(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return i>0}function Es(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var u=r[a],l=Ss(t,e,u,n);if(0===a){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0}function Os(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var u=r[a],l=Ss(t,e,u,n);(0===a?o&&l||!o&&!l:o&&!l||!o&&l)&&Ms(t,e,u,n),e=u}return e}function Ts(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o)e=Os(t,e,r[o],n,i);return e}var Ps=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Is=function(t){function e(e,r,n){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==r&&n?(i.setFlatCoordinates(r,e),i.ends_=n):i.setCoordinates(e,r),i}return Ps(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?wi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<Br(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ja(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qa(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return gs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Ha(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Os(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,is(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=an(this.getExtent());this.flatInteriorPoint_=vs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new ds(this.getFlatInteriorPoint(),Ta)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new fs(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o],u=new fs(e.slice(i,s),t);n.push(u),i=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Es(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Os(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=cs(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,Ea,n)},e.prototype.getType=function(){return dr.POLYGON},e.prototype.intersectsExtent=function(t){return xs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=rs(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Ya),ks=Is;function Rs(t,e,r,n){for(var i=r||32,o=[],a=0;a<i;++a)wi(o,vr(t,e,2*Math.PI*a/i,n));return o.push(o[0],o[1]),new Is(o,Ea,[o.length])}function Ls(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=[e,r,e,i,n,i,n,r,e,r];return new Is(o,Ea,[o.length])}function Cs(t,e,r){for(var n=e||32,i=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=i*(n+1),u=new Array(s),l=0;l<s;l+=i){u[l]=0,u[l+1]=0;for(var c=2;c<i;c++)u[l+c]=a[c]}var h=[u.length],f=new Is(u,o,h);return As(f,a,t.getRadius(),r),f}function As(t,e,r,n){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=n||0,u=0;u<=a;++u){var l=u*o,c=s+2*fr(u,a)*Math.PI/a;i[l]=e[0]+r*Math.cos(c),i[l+1]=e[1]+r*Math.sin(c)}t.changed()}var Ns=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function js(t,e){setTimeout((function(){t(e)}),0)}function Fs(t){return!(t.sourceCenter&&t.targetCenter&&!fa(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var Ds=function(t){function e(e){var r=t.call(this)||this,n=Ln({},e);return r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=Yn(n.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.cancelAnchor_=void 0,n.center&&(n.center=ai(n.center,r.projection_)),n.extent&&(n.extent=ui(n.extent,r.projection_)),r.applyOptions_(n),r}return Ns(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,r,n,i=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=Yn(t.projection,"EPSG:3857"),h=c.getExtent(),f=t.constrainOnlyCenter,p=t.extent;s||p||!c.isGlobal()||(f=!1,p=h);if(void 0!==t.resolutions){var d=t.resolutions;r=d[i],n=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function(t,e,r,n){return function(i,o,a,s){if(void 0!==i){var u=t[0],l=t[t.length-1],c=r?Ko(u,r,a,n):u;if(s)return void 0===e||e?Jo(i,c,l):ar(i,l,c);var h=Math.min(c,i),f=Math.floor(_i(t,h,o));return t[f]>c&&f<t.length-1?t[f+1]:t[f]}}}(d,u,!f&&p,l):$o(r,n,u,!f&&p,l)}else{var m=(h?Math.max(pn(h),ln(h)):360*nr[ir.DEGREES]/c.getMetersPerUnit())/256/Math.pow(2,0),y=m/Math.pow(2,28);void 0!==(r=t.maxResolution)?i=0:r=m/Math.pow(a,i),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(a,o):m/Math.pow(a,o):y),o=i+Math.floor(Math.log(r/n)/Math.log(a)),n=r/Math.pow(a,o-i),e=t.constrainResolution?function(t,e,r,n,i,o){return function(a,s,u,l){if(void 0!==a){var c=i?Ko(e,i,u,o):e,h=void 0!==r?r:0;if(l)return void 0===n||n?Jo(a,c,h):ar(a,h,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,d=Math.min(c,a),m=Math.floor(Math.log(e/d)/Math.log(t)+p),y=Math.max(f,m);return ar(e/Math.pow(t,y),h,c)}}}(a,r,n,u,!f&&p,l):$o(r,n,u,!f&&p,l)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var r=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Ho(t.extent,t.constrainOnlyCenter,e)}var r=Yn(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Ho(n,!1,!1)}return Xo}(t),n=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=i||hr(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=o?0:t:void 0}):!1===e?ta:"number"==typeof e?(r=e,n=2*Math.PI/r,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):ta}return Qo;var r,n;var i,o}(t);this.constraints_={center:r,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Ln({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Ln({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var n=arguments[r];n.center&&((n=Ln({},n)).center=ai(n.center,this.getProjection())),n.anchor&&((n=Ln({},n)).anchor=ai(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&js(e,!0))}for(var i=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],l=0;l<r;++l){var c=arguments[l],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||xa,callback:e};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=s;var f=fr(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=s+f,s=h.targetRotation}Fs(h)?h.complete=!0:i+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(ea,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[ea]>0},e.prototype.getInteracting=function(){return this.hints_[ra]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(ea,-this.hints_[ea]);for(var e=0,r=this.animations_.length;e<r;++e){var n=this.animations_[e];if(n[0].callback&&js(n[0].callback,!1),!t)for(var i=0,o=n.length;i<o;++i){var a=n[i];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],i=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):i=!1;var c=s.easing(l);if(s.sourceCenter){var h=s.sourceCenter[0],f=s.sourceCenter[1],p=h+c*(s.targetCenter[0]-h),d=f+c*(s.targetCenter[1]-f);this.targetCenter_=[p,d]}if(s.sourceResolution&&s.targetResolution){var m=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var y=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(m,0,y,!0);this.targetCenter_=this.calculateCenterZoom(g,s.anchor)}this.targetResolution_=m,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var v=1===c?fr(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var _=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(_,s.anchor)}this.targetRotation_=v}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[r]=null,this.setHint(ea,-1);var b=n[0].callback;b&&js(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var r,n=this.getCenterInternal();return void 0!==n&&(pa(r=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),ua(r,e)),r},e.prototype.calculateCenterZoom=function(t,e){var r,n=this.getCenterInternal(),i=this.getResolution();void 0!==n&&void 0!==i&&(r=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]);return r},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?oi(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(na)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return si(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),r=this.getCenterInternal();Er(r,1);var n=this.getResolution();Er(void 0!==n,2);var i=this.getRotation();return Er(void 0!==i,3),un(r,n,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(ia)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(ui(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var r=e||this.getViewportSize_(),n=pn(t)/r[0],i=ln(t)/r[1];return Math.max(n,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(t){return r/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(oa)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/e;return function(t){return Math.log(r/t)/e/i}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),r=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:r,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var i=_i(this.resolutions_,t,1);n=i,e=this.resolutions_[i],r=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=ar(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,ar(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var r,n=Ln({size:this.getViewportSize_()},e||{});if(Er(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Er(!mn(t),25),r=Ls(i=ui(t,this.getProjection()));else if(t.getType()===dr.CIRCLE){var i;(r=Ls(i=ui(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),an(i))}else{var o=ii();r=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(r,n)},e.prototype.fitInternal=function(t,e){var r=e||{},n=r.size;n||(n=this.getViewportSize_());var i,o=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0!==r.nearest&&r.nearest;i=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;for(var s=t.getFlatCoordinates(),u=this.getRotation(),l=Math.cos(-u),c=Math.sin(-u),h=1/0,f=1/0,p=-1/0,d=-1/0,m=t.getStride(),y=0,g=s.length;y<g;y+=m){var v=s[y]*l-s[y+1]*c,_=s[y]*c+s[y+1]*l;h=Math.min(h,v),f=Math.min(f,_),p=Math.max(p,v),d=Math.max(d,_)}var b=this.getResolutionForExtentInternal([h,f,p,d],[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);b=isNaN(b)?i:Math.max(b,i),b=this.getConstrainedResolution(b,a?0:1),c=-c;var w=(h+p)/2,x=(f+d)/2,M=[(w+=(o[1]-o[3])/2*b)*l-(x+=(o[0]-o[2])/2*b)*c,x*l+w*c],S=r.callback?r.callback:Ti;void 0!==r.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(M,b),duration:r.duration,easing:r.easing},S):(this.targetResolution_=b,this.targetCenter_=M,this.applyTargetState_(!1,!0),js(S,!0))},e.prototype.centerOn=function(t,e,r){this.centerOnInternal(ai(t,this.getProjection()),e,r)},e.prototype.centerOnInternal=function(t,e,r){var n=this.getRotation(),i=Math.cos(-n),o=Math.sin(-n),a=t[0]*i-t[1]*o,s=t[1]*i+t[0]*o,u=this.getResolution(),l=(a+=(e[0]/2-r[0])*u)*i-(s+=(r[1]-e[1]/2)*u)*(o=-o),c=s*i+a*o;this.setCenterInternal([l,c])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=oi(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var r=e&&ai(e,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=ai(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(ai(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),i=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,i,r),a=this.constraints_.center(this.targetCenter_,o,i,r);this.get(oa)!==n&&this.set(oa,n),this.get(ia)!==o&&this.set(ia,o),this.get(na)&&fa(this.get(na),a)||this.set(na,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,r){var n=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();var l=r||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&fa(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:u,resolution:s,duration:n,easing:wa,anchor:l}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(ra,1)},e.prototype.endInteraction=function(t,e,r){var n=r&&ai(r,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,r){this.setHint(ra,-1),this.resolveConstraints(t,e,r)},e.prototype.getConstrainedCenter=function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))},e.prototype.getConstrainedResolution=function(t,e){var r=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,n)},e}(eo);function Bs(t,e,r){var n=r&&r.length?r.shift():yo?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function zs(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function Gs(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function qs(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function Us(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Vs(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var Ws="opacity",Ys="visible",Zs="extent",Hs="zIndex",Xs="maxResolution",Ks="minResolution",Js="maxZoom",$s="minZoom",Qs="source",tu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eu=function(t){function e(e){var r=t.call(this)||this,n=Ln({},e);return n[Ws]=void 0!==e.opacity?e.opacity:1,Er("number"==typeof n[Ws],64),n[Ys]=void 0===e.visible||e.visible,n[Hs]=e.zIndex,n[Xs]=void 0!==e.maxResolution?e.maxResolution:1/0,n[Ks]=void 0!==e.minResolution?e.minResolution:0,n[$s]=void 0!==e.minZoom?e.minZoom:-1/0,n[Js]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}return tu(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=ar(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r?r:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return _r()},e.prototype.getLayerStatesArray=function(t){return _r()},e.prototype.getExtent=function(){return this.get(Zs)},e.prototype.getMaxResolution=function(){return this.get(Xs)},e.prototype.getMinResolution=function(){return this.get(Ks)},e.prototype.getMinZoom=function(){return this.get($s)},e.prototype.getMaxZoom=function(){return this.get(Js)},e.prototype.getOpacity=function(){return this.get(Ws)},e.prototype.getSourceState=function(){return _r()},e.prototype.getVisible=function(){return this.get(Ys)},e.prototype.getZIndex=function(){return this.get(Hs)},e.prototype.setExtent=function(t){this.set(Zs,t)},e.prototype.setMaxResolution=function(t){this.set(Xs,t)},e.prototype.setMinResolution=function(t){this.set(Ks,t)},e.prototype.setMaxZoom=function(t){this.set(Js,t)},e.prototype.setMinZoom=function(t){this.set($s,t)},e.prototype.setOpacity=function(t){Er("number"==typeof t,64),this.set(Ws,t)},e.prototype.setVisible=function(t){this.set(Ys,t)},e.prototype.setZIndex=function(t){this.set(Hs,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(eo),ru="undefined",nu="loading",iu="ready",ou="error",au=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),su="layers",uu=function(t){function e(e){var r=this,n=e||{},i=Ln({},n);delete i.layers;var o=n.layers;return(r=t.call(this,i)||this).layersListenerKeys_=[],r.listenerKeys_={},r.addEventListener(to(su),r.handleLayersChanged_),o?Array.isArray(o)?o=new oo(o.slice(),{unique:!0}):Er("function"==typeof o.getArray,43):o=new oo(void 0,{unique:!0}),r.setLayers(o),r}return au(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(mi),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(pi(t,ci,this.handleLayersAdd_,this),pi(t,hi,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(mi);Cn(this.listenerKeys_);for(var r=t.getArray(),n=0,i=r.length;n<i;n++){var o=r[n];this.listenerKeys_[wr(o)]=[pi(o,fi,this.handleLayerChange_,this),pi(o,Li,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[wr(e)]=[pi(e,fi,this.handleLayerChange_,this),pi(e,Li,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=wr(t.element);this.listenerKeys_[e].forEach(mi),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(su)},e.prototype.setLayers=function(t){this.set(su,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var n=this.getLayerState(),i=r,o=e.length;i<o;i++){var a=e[i];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=cn(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return iu},e}(eu);function lu(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function cu(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function hu(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var fu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var pu=function(t){function e(e){var r=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new uu({layers:t.layers});o[Ro]=a,o[Co]=t.target,o[Ao]=void 0!==t.view?t.view:new Ds,void 0!==t.controls&&(Array.isArray(t.controls)?r=new oo(t.controls.slice()):(Er("function"==typeof t.controls.getArray,47),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new oo(t.interactions.slice()):(Er("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?i=new oo(t.overlays.slice()):(Er("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new oo;return{controls:r,interactions:n,keyboardEventTarget:e,overlays:i,values:o}}(e);r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:mo,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=[1,0,0,1,0,0],r.pixelToCoordinateTransform_=[1,0,0,1,0,0],r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=new To(r,e.moveTolerance);var i=r.handleMapBrowserEvent.bind(r);for(var o in _o)r.mapBrowserEventHandler_.addEventListener(_o[o],i);r.keyboardEventTarget_=n.keyboardEventTarget,r.keyHandlerKeys_=null;var a=r.handleBrowserEvent.bind(r);return r.viewport_.addEventListener(Ni,a,!1),r.viewport_.addEventListener(Yi,a,!!vo&&{passive:!1}),r.controls=n.controls||new oo,r.interactions=n.interactions||new oo,r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.handleResize_,r.postRenderFunctions_=[],r.tileQueue_=new Zo(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addEventListener(to(Ro),r.handleLayerGroupChanged_),r.addEventListener(to(Ao),r.handleViewChanged_),r.addEventListener(to(Lo),r.handleSizeChanged_),r.addEventListener(to(Co),r.handleTargetChanged_),r.setProperties(n.values),r.controls.forEach(function(t){t.setMap(this)}.bind(r)),r.controls.addEventListener(ci,function(t){t.element.setMap(this)}.bind(r)),r.controls.addEventListener(hi,function(t){t.element.setMap(null)}.bind(r)),r.interactions.forEach(function(t){t.setMap(this)}.bind(r)),r.interactions.addEventListener(ci,function(t){t.element.setMap(this)}.bind(r)),r.interactions.addEventListener(hi,function(t){t.element.setMap(null)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r.overlays_.addEventListener(ci,function(t){this.addOverlayInternal_(t.element)}.bind(r)),r.overlays_.addEventListener(hi,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(r)),r}return fu(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(Ni,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Yi,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(Vi,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:Ei,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var r=[];return this.forEachFeatureAtPixel(t,(function(t){r.push(t)}),e),r},e.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||Ei;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Ei,i=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Co)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return oi(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?ja(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ro)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=ai(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?ja(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Lo)},e.prototype.getView=function(){return this.get(Ao)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,r,n){return function(t,e,r,n,i){if(!t||!(r in t.wantedTiles))return 1/0;if(!t.wantedTiles[r][e.getKey()])return 1/0;var o=t.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}(this.frameState_,t,e,r,n)},e.prototype.handleBrowserEvent=function(t,e){var r=e||t.type,n=new lo(r,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.getActive())if(!i.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var i=t.viewHints;if(i[ea]||i[ra]){var o=!go&&Date.now()-t.time>8;r=o?0:8,n=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}!t||!this.hasListener(Bo)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(Bo,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,r=this.keyHandlerKeys_.length;e<r;++e)mi(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[pi(n,Gi,this.handleBrowserEvent,this),pi(n,qi,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Vi,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),Us(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Vi,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(mi(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(mi(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=pi(t,fi,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=pi(t,Li,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(mi),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[pi(t,fi,this.render,this),pi(t,Li,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),r=this.getView(),n=this.frameState_,i=null;if(void 0!==e&&function(t){return t[0]>0&&t[1]>0}(e)&&r&&r.isDef()){var o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:un(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),n)(!this.previousExtent_||!mn(this.previousExtent_)&&!Xr(i.extent,this.previousExtent_))&&(this.dispatchEvent(new so(Io,this,n)),this.previousExtent_=Yr(this.previousExtent_));this.previousExtent_&&!i.viewHints[ea]&&!i.viewHints[ra]&&!Xr(i.extent,this.previousExtent_)&&(this.dispatchEvent(new so(ko,this,i)),Dr(i.extent,this.previousExtent_))}this.dispatchEvent(new so(Po,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Ro,t)},e.prototype.setSize=function(t){this.set(Lo,t)},e.prototype.setTarget=function(t){this.set(Co,t)},e.prototype.setView=function(t){this.set(Ao,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(e=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(e)}},e}(eo),du=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mu=function(t){function e(e){var r=t.call(this)||this;return r.element=e.element?e.element:null,r.target_=null,r.map_=null,r.listenerKeys=[],r.render_=e.render?e.render:Ti,e.target&&r.setTarget(e.target),r}return du(e,t),e.prototype.disposeInternal=function(){Us(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Us(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)mi(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ti&&this.listenerKeys.push(pi(t,Po,this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(eo),yu=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),gu=["style","variant","weight","size","lineHeight","family"],vu=function(t){var e=t.match(yu);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=gu.length;n<i;++n){var o=e[n+1];void 0!==o&&(r[gu[n]]=o)}return r.families=r.family.split(/,\s?/),r},_u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function bu(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var wu=function(t){function e(e){var r=this,n=Ln({},e);delete n.source,(r=t.call(this,n)||this).mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addEventListener(to(Qs),r.handleSourcePropertyChange_);var i=e.source?e.source:null;return r.setSource(i),r}return _u(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Qs)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ru},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(mi(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=pi(t,Li,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(mi(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(mi(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=pi(t,Fo,(function(t){var e=t.frameState.layerStatesArray,r=this.getLayerState(!1);Er(!e.some((function(t){return t.layer===r.layer})),67),e.push(r)}),this),this.mapRenderKey_=pi(this,Li,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Qs,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(eu),xu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Mu(t){this.updateElement_(t.frameState)}var Su=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||Mu,target:n.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===n.collapsed||n.collapsed,r.overrideCollapsible_=void 0!==n.collapsible,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.collapseLabel?n.collapseLabel:"»";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(ji,r.handleClick_.bind(r),!1);var c=i+" ol-unselectable ol-control"+(r.collapsed_&&r.collapsible_?" ol-collapsed":"")+(r.collapsible_?"":" ol-uncollapsible"),h=r.element;return h.className=c,h.appendChild(r.ulElement_),h.appendChild(l),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return xu(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],n=t.layerStatesArray,i=0,o=n.length;i<o;++i){var a=n[i];if(bu(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var l=u(t);if(l)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(l))for(var c=0,h=l.length;c<h;++c)l[c]in e||(r.push(l[c]),e[l[c]]=!0);else l in e||(r.push(l),e[l]=!0)}}}}return r},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Mi(e,this.renderedAttributions_)){Vs(this.ulElement_);for(var n=0,i=e.length;n<i;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?qs(this.collapseLabel_,this.label_):qs(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(mu),Eu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ou(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains("ol-hidden");i||0!==r?i&&0!==r&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.transform=n}this.rotation_=r}}var Tu=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),render:n.render||Ou,target:n.target})||this;var i=void 0!==n.className?n.className:"ol-rotate",o=void 0!==n.label?n.label:"⇧";r.label_=null,"string"==typeof o?(r.label_=document.createElement("span"),r.label_.className="ol-compass",r.label_.textContent=o):(r.label_=o,r.label_.classList.add("ol-compass"));var a=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(r.label_),s.addEventListener(ji,r.handleClick_.bind(r),!1);var u=i+" ol-unselectable ol-control",l=r.element;return l.className=u,l.appendChild(s),r.callResetNorth_=n.resetNorth?n.resetNorth:void 0,r.duration_=void 0!==n.duration?n.duration:250,r.autoHide_=void 0===n.autoHide||n.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add("ol-hidden"),r}return Eu(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:wa}):t.setRotation(0))}},e}(mu),Pu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Iu=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),target:n.target})||this;var i=void 0!==n.className?n.className:"ol-zoom",o=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",u=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",l=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i+"-in",c.setAttribute("type","button"),c.title=u,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(ji,r.handleClick_.bind(r,o),!1);var h=document.createElement("button");h.className=i+"-out",h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(ji,r.handleClick_.bind(r,-o),!1);var f=i+" ol-unselectable ol-control",p=r.element;return p.className=f,p.appendChild(c),p.appendChild(h),r.duration_=void 0!==n.duration?n.duration:250,r}return Pu(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:wa})):e.setZoom(n)}}},e}(mu);function ku(t){var e=t||{},r=new oo;return(void 0===e.zoom||e.zoom)&&r.push(new Iu(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&r.push(new Tu(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&r.push(new Su(e.attributionOptions)),r}var Ru=function(){function t(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var i=this.points_[e]-this.points_[r],o=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),Lu="active",Cu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Au(t,e,r,n){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:wa})}}var Nu=function(t){function e(e){var r=t.call(this)||this;return e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return Cu(e,t),e.prototype.getActive=function(){return this.get(Lu)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Lu,t)},e.prototype.setMap=function(t){this.map_=t},e}(eo),ju=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Fu(t){var e=!1;if(t.type==_o.DBLCLICK){var r=t.originalEvent,n=t.map,i=t.coordinate,o=r.shiftKey?-this.delta_:this.delta_;Au(n.getView(),o,i,this.duration_),t.preventDefault(),e=!0}return!e}var Du=function(t){function e(e){var r=t.call(this,{handleEvent:Fu})||this,n=e||{};return r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:250,r}return ju(e,t),e}(Nu),Bu=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},zu=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Gu=function(t){return t.target.getTargetElement()===document.activeElement},qu=Ei,Uu=function(t){var e=t.originalEvent;return 0==e.button&&!(fo&&po&&e.ctrlKey)},Vu=Oi,Wu=function(t){return t.type==_o.SINGLECLICK},Yu=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Zu=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Hu=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Xu=function(t){var e=t.pointerEvent;return Er(void 0!==e,56),"mouse"==e.pointerType},Ku=function(t){var e=t.pointerEvent;return Er(void 0!==e,56),e.isPrimary&&0===e.button},Ju=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function $u(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return[r/e,n/e]}var Qu=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,n)||this,n.handleDownEvent&&(r.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(r.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(r.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(r.handleUpEvent=n.handleUpEvent),n.stopDown&&(r.stopDown=n.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return Ju(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==_o.POINTERDRAG)this.handleDragEvent(t);else if(t.type==_o.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==_o.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==_o.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===_o.POINTERDOWN||e===_o.POINTERDRAG||e===_o.POINTERUP}(t)){var e=t.pointerEvent,r=e.pointerId.toString();t.type==_o.POINTERUP?delete this.trackedPointers_[r]:(t.type==_o.POINTERDOWN||r in this.trackedPointers_)&&(this.trackedPointers_[r]=e),this.targetPointers=An(this.trackedPointers_)}},e}(Nu),tl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function el(t){return Yu(t)&&Ku(t)}var rl=function(t){function e(e){var r=t.call(this,{stopDown:Oi})||this,n=e||{};return r.kinetic_=n.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1,r.condition_=n.condition?n.condition:el,r.noKinetic_=!1,r}return tl(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Gu(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,r=$u(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var n=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],i=t.map.getView();da(n,i.getResolution()),pa(n,i.getRotation()),i.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(i),a[1]-n*Math.sin(i)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:wa})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Qu),nl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),il=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{stopDown:Oi})||this).condition_=n.condition?n.condition:zu,r.lastAngle_=void 0,r.duration_=void 0!==n.duration?n.duration:250,r}return nl(e,t),e.prototype.handleDragEvent=function(t){if(Xu(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==Qo){var n=e.getSize(),i=t.pixel,o=Math.atan2(n[1]/2-i[1],i[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!Xu(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!Xu(t)&&(!(!Uu(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(Qu),ol=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),al=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return ol(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new ks([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(yi),sl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ul="boxstart",ll="boxdrag",cl="boxend",hl=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.coordinate=r,i.mapBrowserEvent=n,i}return sl(e,t),e}(Ii),fl=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.box_=new al(n.className||"ol-dragbox"),r.minArea_=void 0!==n.minArea?n.minArea:64,r.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:Ti,r.startPixel_=null,r.condition_=n.condition?n.condition:Uu,r.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:r.defaultBoxEndCondition,r}return sl(e,t),e.prototype.defaultBoxEndCondition=function(t,e,r){var n=r[0]-e[0],i=r[1]-e[1];return n*n+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new hl(ll,t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new hl(cl,t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new hl(ul,t.coordinate,t)),!0)},e}(Qu),pl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function dl(){var t,e,r=this.getMap(),n=r.getView(),i=r.getSize(),o=this.getGeometry().getExtent();if(this.out_){var a=n.calculateExtentInternal(i),s=(t=[r.getPixelFromCoordinateInternal(nn(o)),r.getPixelFromCoordinateInternal(fn(o))],$r(Yr(e),t));yn(a,1/n.getResolutionForExtentInternal(s,i)),o=a}var u=n.getConstrainedResolution(n.getResolutionForExtentInternal(o,i)),l=n.getConstrainedCenter(an(o),u);n.animateInternal({resolution:u,center:l,duration:this.duration_,easing:wa})}var ml=function(t){function e(e){var r=this,n=e||{},i=n.condition?n.condition:Zu;return(r=t.call(this,{condition:i,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:dl})||this).duration_=void 0!==n.duration?n.duration:200,r.out_=void 0!==n.out&&n.out,r}return pl(e,t),e}(fl),yl=37,gl=38,vl=39,_l=40,bl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function wl(t){var e=!1;if(t.type==Gi){var r=t.originalEvent.keyCode;if(this.condition_(t)&&(r==_l||r==yl||r==vl||r==gl)){var n=t.map.getView(),i=n.getResolution()*this.pixelDelta_,o=0,a=0;r==_l?a=-i:r==yl?o=-i:r==vl?o=i:a=i;var s=[o,a];pa(s,n.getRotation()),function(t,e,r){var n=t.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:Ma,center:t.getConstrainedCenter(i)})}}(n,s,this.duration_),t.preventDefault(),e=!0}}return!e}var xl=function(t){function e(e){var r=t.call(this,{handleEvent:wl})||this,n=e||{};return r.defaultCondition_=function(t){return Yu(t)&&Hu(t)},r.condition_=void 0!==n.condition?n.condition:r.defaultCondition_,r.duration_=void 0!==n.duration?n.duration:100,r.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,r}return bl(e,t),e}(Nu),Ml=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Sl(t){var e=!1;if(t.type==Gi||t.type==qi){var r=t.originalEvent.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var n=t.map,i=r=="+".charCodeAt(0)?this.delta_:-this.delta_;Au(n.getView(),i,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var El=function(t){function e(e){var r=t.call(this,{handleEvent:Sl})||this,n=e||{};return r.condition_=n.condition?n.condition:Hu,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return Ml(e,t),e}(Nu),Ol=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tl="trackpad",Pl="wheel",Il=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,r.duration_=void 0!==n.duration?n.duration:250,r.timeout_=void 0!==n.timeout?n.timeout:80,r.useAnchor_=void 0===n.useAnchor||n.useAnchor,r.condition_=n.condition?n.condition:qu,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}return Ol(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Gu(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==Yi)return!0;t.preventDefault();var e,r=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Yi&&(e=n.deltaY,ho&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=mo),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Tl:Pl);var o=r.getView();if(this.mode_===Tl&&!o.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-ar(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(r=r?r>0?1:-1:0),Au(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Nu),kl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rl=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Oi),(r=t.call(this,i)||this).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==n.threshold?n.threshold:.3,r.duration_=void 0!==n.duration?n.duration:250,r}return kl(e,t),e.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],i=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Qo){var u=a.getViewport().getBoundingClientRect(),l=$u(this.targetPointers);l[0]-=u.left,l[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Qu),Ll=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cl=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Oi),(r=t.call(this,i)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return Ll(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],i=r.clientX-n.clientX,o=r.clientY-n.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=$u(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),u.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Qu);function Al(t){var e=t||{},r=new oo,n=new Ru(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&r.push(new il),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&r.push(new Du({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&r.push(new rl({condition:e.onFocusOnly?Gu:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&r.push(new Rl),(void 0===e.pinchZoom||e.pinchZoom)&&r.push(new Cl({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(r.push(new xl),r.push(new El({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&r.push(new Il({condition:e.onFocusOnly?Gu:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&r.push(new ml({duration:e.zoomDuration})),r}var Nl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jl=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.inversePixelTransform=r,o.frameState=n,o.context=i,o}return Nl(e,t),e}(Ii),Fl=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Dl=/^([a-z]*)$|^hsla?\(.*\)$/i;function Bl(t){return"string"==typeof t?t:Yl(t)}function zl(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}var Gl,ql,Ul=(Gl={},ql=0,function(t){var e;if(Gl.hasOwnProperty(t))e=Gl[t];else{if(ql>=1024){var r=0;for(var n in Gl)0==(3&r++)&&(delete Gl[n],--ql)}e=function(t){var e,r,n,i,o;if(Dl.exec(t)&&(t=zl(t)),Fl.exec(t)){var a=t.length-1,s=void 0;s=a<=4?1:2;var u=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),r=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),i=u?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,r=(r<<4)+r,n=(n<<4)+n,u&&(i=(i<<4)+i)),o=[e,r,n,i/255]}else 0==t.indexOf("rgba(")?Wl(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Wl(o)):Er(!1,14);return o}(t),Gl[t]=e,++ql}return e});function Vl(t){return Array.isArray(t)?t:Ul(t)}function Wl(t){return t[0]=ar(t[0]+.5|0,0,255),t[1]=ar(t[1]+.5|0,0,255),t[2]=ar(t[2]+.5|0,0,255),t[3]=ar(t[3],0,1),t}function Yl(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:t[3])+")"}var Zl=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,r){var n=Hl(t,e,r);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,r,n){var i=Hl(t,e,r);this.cache_[i]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Hl(t,e,r){return e+":"+t+":"+(r?Bl(r):"null")}var Xl=new Zl;function Kl(t){return Array.isArray(t)?Yl(t):t}var Jl=function(){function t(){}return t.prototype.drawCustom=function(t,e,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),$l=[],Ql=[0,0,0,0],tc=new eo,ec=new Ri;ec.setSize=function(){console.warn("labelCache is deprecated.")};var rc,nc,ic,oc=null,ac={},sc=function(){var t,e,r=["monospace","serif"],n=r.length,i="wmytzilWMYTZIL@#/&?$%10";function o(t,o,a){for(var s=!0,u=0;u<n;++u){var l=r[u];if(e=cc(t+" "+o+" 32px "+l,i),a!=l){var c=cc(t+" "+o+" 32px "+a+","+l,i);s=s&&c!=e}}return!!s}function a(){for(var e=!0,r=tc.getKeys(),n=0,i=r.length;n<i;++n){var a=r[n];tc.get(a)<100&&(o.apply(this,a.split("\n"))?(Cn(ac),oc=null,rc=void 0,tc.set(a,100)):(tc.set(a,tc.get(a)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var r=vu(e);if(r)for(var n=r.families,i=0,s=n.length;i<s;++i){var u=n[i],l=r.style+"\n"+r.weight+"\n"+u;void 0===tc.get(l)&&(tc.set(l,100,!0),o(r.style,r.weight,u)||(tc.set(l,0,!0),void 0===t&&(t=setInterval(a,32))))}}}(),uc=(ic=ac,function(t){var e=ic[t];if(null==e)if(yo){var r=vu(t),n=lc(t,"Žg"),i=isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight);ac[t]=i*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else nc||((nc=document.createElement("div")).innerHTML="M",nc.style.margin="0 !important",nc.style.padding="0 !important",nc.style.position="absolute !important",nc.style.left="-99999px !important"),nc.style.font=t,document.body.appendChild(nc),e=nc.offsetHeight,ic[t]=e,document.body.removeChild(nc);return e});function lc(t,e){return oc||(oc=Bs(1,1)),t!=rc&&(oc.font=t,rc=oc.font),oc.measureText(e)}function cc(t,e){return lc(t,e).width}function hc(t,e,r){if(e in r)return r[e];var n=cc(t,e);return r[e]=n,n}function fc(t,e,r,n){0!==e&&(t.translate(r,n),t.rotate(e),t.translate(-r,-n))}function pc(t,e,r,n,i,o,a,s,u,l,c){t.save(),1!==r&&(t.globalAlpha*=r),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(u,l),t.scale(c,c),function(t,e){for(var r=t.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}(n,t)):t.drawImage(n,i,o,a,s,u,l,a*c,s*c),t.restore()}var dc=null;function mc(t){return yo?za(t):(dc||(dc=Bs(1,1).canvas),dc.style.transform=za(t),dc.style.transform)}var yc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gc=function(t){function e(e,r,n,i,o,a,s){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=r,u.extent_=n,u.transform_=i,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=0,u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=0,u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}return yc(e,t),e.prototype.drawImages_=function(t,e,r,n){if(this.image_){var i=Ia(t,e,r,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=i.length;l<c;l+=2){var h=i[l]-this.imageAnchorX_,f=i[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var p=h+this.imageAnchorX_,d=f+this.imageAnchorY_;Da(a,p,d,this.imageScale_,this.imageScale_,u,-p,-d),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=Ia(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=i[e]+this.textOffsetX_,u=i[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var l=Da(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,r,n,i){var o=this.context_,a=Ia(t,e,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return i&&o.closePath(),r},e.prototype.drawRings_=function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)e=this.moveToLineTo_(t,e,r[i],n,!0);return e},e.prototype.drawCircle=function(t){if(dn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,r){var n=t.getFlatCoordinates();if(n){var i=t.getStride();return Ia(n,0,n.length,i,e,r)}return null}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],i=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case dr.POINT:this.drawPoint(t);break;case dr.LINE_STRING:this.drawLineString(t);break;case dr.POLYGON:this.drawPolygon(t);break;case dr.MULTI_POINT:this.drawMultiPoint(t);break;case dr.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case dr.MULTI_POLYGON:this.drawMultiPolygon(t);break;case dr.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case dr.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&dn(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),dn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(dn(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();r.beginPath();for(var s=0,u=o.length;s<u;++s)i=this.moveToLineTo_(n,i,o[s],a,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),dn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),dn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var u=i[a];n=this.drawRings_(r,n,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Mi(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:"center";r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var r=t.getColor();this.fillState_={fillStyle:Kl(r||"#000")}}else this.fillState_=null;if(e){var n=e.getColor(),i=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==i?i:"round",lineDash:o||$l,lineDashOffset:a||0,lineJoin:void 0!==s?s:"round",lineWidth:this.pixelRatio_*(void 0!==u?u:1),miterLimit:void 0!==l?l:10,strokeStyle:Kl(n||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),r=t.getImage(1),n=t.getOrigin(),i=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=i[1],this.image_=r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=i[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:Kl(r||"#000")}}else this.textFillState_=null;var n=t.getStroke();if(n){var i=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:a||$l,lineDashOffset:s||0,lineJoin:void 0!==u?u:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:Kl(i||"#000")}}else this.textStrokeState_=null;var h=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),m=t.getRotation(),y=t.getScale(),g=t.getText(),v=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==h?h:"10px sans-serif",textAlign:void 0!==v?v:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==g?g:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==m?m:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},e}(Jl),vc=0,_c=1,bc=2,wc=3,xc=4,Mc="Circle",Sc="Default",Ec="Image",Oc="LineString",Tc="Polygon",Pc="Text",Ic={Point:function(t,e,r,n){var i=r.getImage();if(i){if(i.getImageState()!=bc)return;var o=t.getBuilder(r.getZIndex(),Ec);o.setImageStyle(i,t.addDeclutter(!1)),o.drawPoint(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Pc);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,n)}},LineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),Oc);o.setFillStrokeStyle(null,i),o.drawLineString(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Pc);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},Polygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var a=t.getBuilder(r.getZIndex(),Tc);a.setFillStrokeStyle(i,o),a.drawPolygon(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Pc);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},MultiPoint:function(t,e,r,n){var i=r.getImage();if(i){if(i.getImageState()!=bc)return;var o=t.getBuilder(r.getZIndex(),Ec);o.setImageStyle(i,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Pc);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,n)}},MultiLineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),Oc);o.setFillStrokeStyle(null,i),o.drawMultiLineString(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Pc);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},MultiPolygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(o||i){var a=t.getBuilder(r.getZIndex(),Tc);a.setFillStrokeStyle(i,o),a.drawMultiPolygon(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Pc);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},GeometryCollection:function(t,e,r,n){var i,o,a=e.getGeometriesArray();for(i=0,o=a.length;i<o;++i){(0,Ic[a[i].getType()])(t,a[i],r,n)}},Circle:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var a=t.getBuilder(r.getZIndex(),Mc);a.setFillStrokeStyle(i,o),a.drawCircle(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Pc);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}}};function kc(t,e){return parseInt(wr(t),10)-parseInt(wr(e),10)}function Rc(t,e){var r=Lc(t,e);return r*r}function Lc(t,e){return.5*t/e}function Cc(t,e,r,n,i,o){var a=!1,s=r.getImage();if(s){var u=s.getImageState();u==bc||u==wc?s.unlistenImageChange(i):(u==vc&&s.load(),u=s.getImageState(),s.listenImageChange(i),a=!0)}return function(t,e,r,n,i){var o=r.getGeometryFunction()(e);if(!o)return;var a=o.simplifyTransformed(n,i);if(r.getRenderer())!function t(e,r,n,i){if(r.getType()==dr.GEOMETRY_COLLECTION){for(var o=r.getGeometries(),a=0,s=o.length;a<s;++a)t(e,o[a],n,i);return}e.getBuilder(n.getZIndex(),Sc).drawCustom(r,i,n.getRenderer())}(t,a,r,e);else{(0,Ic[a.getType()])(t,a,r,e)}}(t,e,r,n,o),a}function Ac(t,e){var r=t.canvas,n=e||{},i=n.pixelRatio||mo,o=n.size;o&&(r.width=o[0]*i,r.height=o[1]*i,r.style.width=o[0]+"px",r.style.height=o[1]+"px");var a=[0,0,r.width,r.height],s=Fa([1,0,0,1,0,0],i,i);return new gc(t,i,a,s,0)}function Nc(t){var e,r=t.frameState,n=Aa(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),i=Rc(r.viewState.resolution,r.pixelRatio),o=ii();return o&&(e=Kn(o,r.viewState.projection)),new gc(t.context,r.pixelRatio,r.extent,n,r.viewState.rotation,i,e)}function jc(t,e){e&&e.clear();for(var r=t.declutterItems,n=r.length-1;n>=0;--n)for(var i=r[n],o=i.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],i.opacity,e);return r.length=0,e}var Fc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Dc(t,e){Xl.expire()}var Bc=function(t){function e(e){var r=t.call(this)||this;return r.map_=e,r.declutterTree_=null,r}return Fc(e,t),e.prototype.dispatchRenderEvent=function(t,e){_r()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Da(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Ba(n,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o,a,s){var u,l=e.viewState;function c(t,e,r){return i.call(o,e,t?r:null)}var h=l.projection,f=_a(t.slice(),h),p=[[0,0]];if(h.canWrapX()&&n){var d=pn(h.getExtent());p.push([-d,0],[d,0])}var m,y=e.layerStatesArray,g=y.length;this.declutterTree_&&(m=this.declutterTree_.all().map((function(t){return t.value})));for(var v=[],_=0;_<p.length;_++)for(var b=g-1;b>=0;--b){var w=y[b],x=w.layer;if(x.hasRenderer()&&bu(w,l)&&a.call(s,x)){var M=x.getRenderer(),S=x.getSource();if(M&&S){var E=S.getWrapX()?f:t,O=c.bind(null,w.managed);v[0]=E[0]+p[_][0],v[1]=E[1]+p[_][1],u=M.forEachFeatureAtCoordinate(v,e,r,O,m)}if(u)return u}}},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){return _r()},e.prototype.hasFeatureAtCoordinate=function(t,e,r,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,n,Ei,this,i,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=jc(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){Xl.canExpireCache()&&t.postRenderFunctions.push(Dc)},e}(yi),zc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gc=function(t){function e(e){var r=t.call(this,e)||this;r.fontChangeListenerKey_=pi(tc,fi,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className="ol-unselectable ol-layers";var i=e.getViewport();return i.insertBefore(r.element_,i.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return zc(e,t),e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new jl(t,void 0,e);r.dispatchEvent(n)}},e.prototype.disposeInternal=function(){mi(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(Fo,e);var r=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=e.viewState;this.children_.length=0;for(var i=null,o=0,a=r.length;o<a;++o){var s=r[o];if(e.layerIndex=o,bu(s,n)&&(s.sourceState==iu||s.sourceState==ru)){var u=s.layer.render(e,i);u&&u!==i&&(this.children_.push(u),i=u)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(Do,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],l=u.layer;if(l.hasRenderer()&&bu(u,o)&&i(l)){var c=l.getRenderer().getDataAtPixel(t,e,r);if(c){var h=n(l,c);if(h)return h}}}},e}(Bc),qc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uc=function(t){function e(e){return(e=Ln({},e)).controls||(e.controls=ku()),e.interactions||(e.interactions=Al()),t.call(this,e)||this}return qc(e,t),e.prototype.createRenderer=function(){return new Gc(this)},e}(pu);function Vc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Yc=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Vc(this,t),this._listener=e,this._scope=r,this.eventKey_=Pz(),this.once_=n}var e,r,n;return e=t,(r=[{key:"fire",value:function(t){var e=t;_z(e)||(e=[e]),this._listener.apply(this._scope,e)}},{key:"getEventKey",value:function(){return this.eventKey_}},{key:"isOnce",value:function(){return this.once_}},{key:"has",value:function(t,e){var r=!1;return r=wz(t)?this._listener===t&&this._scope===e:this.eventKey_===t,r}}])&&Wc(e.prototype,r),n&&Wc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events_={}}var e,r,n;return e=t,(r=[{key:"add",value:function(t,e,r){var n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!bz(t)&&wz(e)&&(bz(this.events_[t])&&(this.events_[t]=[]),-1===this.indexOf(t,e,r))){var o=new Yc(e,r,i);this.events_[t].push(o),n=o.getEventKey()}return n}},{key:"remove",value:function(t,e,r){var n=this.events_[t];if(!bz(n)){var i=this.indexOf(t,e,r);-1!==i&&n.splice(i,1)}}},{key:"removeByKey",value:function(t,e){var r=this.events_[t];if(!bz(r)){var n=r.map((function(t,r){var n=-1;return t.getEventKey()===e&&(n=r),n}));-1!==n&&r.splice(n,1)}}},{key:"fire",value:function(t,e){var r=this,n=[].concat(this.events_[t]);bz(n)||n.forEach((function(n){n.fire(e),!0===n.isOnce()&&r.remove(t,n.getEventKey())}))}},{key:"indexOf",value:function(t,e,r){var n=-1,i=this.events_[t];if(!bz(i))for(var o=0,a=i.length;o<a;o+=1)if(i[o].has(e,r)){n=o;break}return n}}])&&Zc(e.prototype,r),n&&Zc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Kc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventsManager_=new Hc}var e,r,n;return e=t,(r=[{key:"on",value:function(t,e,r){return this.eventsManager_.add(t,e,r)}},{key:"once",value:function(t,e,r){return this.eventsManager_.add(t,e,r,!0)}},{key:"un",value:function(t,e,r){this.eventsManager_.remove(t,e,r)}},{key:"unByKey",value:function(t,e){this.eventsManager_.remove(t,e)}},{key:"fire",value:function(t,e){var r=e;bz(r)&&(r=[this]),this.eventsManager_.fire(t,r)}}])&&Xc(e.prototype,r),n&&Xc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Jc=r(116),$c=r.n(Jc),Qc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),th=0,eh=1;function rh(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}var nh=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||rh})||this).dragListenerKeys_=[],r.currentResolution_=void 0,r.direction_=th,r.dragging_,r.heightLimit_=0,r.widthLimit_=0,r.startX_,r.startY_,r.thumbSize_=null,r.sliderInitialized_=!1,r.duration_=void 0!==n.duration?n.duration:200;var i=void 0!==n.className?n.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=i+"-thumb ol-unselectable";var a=r.element;return a.className=i+" ol-unselectable ol-control",a.appendChild(o),a.addEventListener(Mo,r.handleDraggerStart_.bind(r),!1),a.addEventListener(xo,r.handleDraggerDrag_.bind(r),!1),a.addEventListener(So,r.handleDraggerEnd_.bind(r),!1),a.addEventListener(ji,r.handleContainerClick_.bind(r),!1),o.addEventListener(ji,Pi,!1),r}return Qc(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,r=t.offsetHeight,n=t.firstElementChild,i=getComputedStyle(n),o=n.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),a=n.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);this.thumbSize_=[o,a],e>r?(this.direction_=eh,this.widthLimit_=e-o):(this.direction_=th,this.heightLimit_=r-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),r=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),i=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:i,duration:this.duration_,easing:wa})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var r=this.handleDraggerDrag_,n=this.handleDraggerEnd_;this.dragListenerKeys_.push(pi(document,xo,r,this),pi(document,So,n,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,r=t.clientY-this.startY_,n=this.getRelativePosition_(e,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(mi),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),r=this.element.firstElementChild;this.direction_==eh?r.style.left=this.widthLimit_*e+"px":r.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){return ar(this.direction_===eh?t/this.widthLimit_:e/this.heightLimit_,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return ar(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},e}(mu);function ih(t){return(ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ah(t,e){return(ah=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=lh(t);if(e){var i=lh(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uh(this,r)}}function uh(t,e){if(e&&("object"===ih(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function lh(t){return(lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ch=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ah(t,e)}(o,t);var e,r,n,i=sh(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,Bz({},t,!0))).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&oh(e.prototype,r),n&&oh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(nh),hh=function(t){throw t};function fh(t){return(fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ph(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dh(t,e){return(dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=vh(t);if(e){var i=vh(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yh(this,r)}}function yh(t,e){if(e&&("object"===fh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gh(t)}function gh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vh(t){return(vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dh(t,e)}(o,t);var e,r,n,i=mh(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).impl_=t,!bz(e.impl_)&&wz(e.impl_.setFacadeObj)&&e.impl_.setFacadeObj(gh(e)),e}return e=o,(r=[{key:"getImpl",value:function(){return this.impl_}},{key:"setImpl",value:function(t){this.impl_=t}},{key:"destroy",value:function(){!bz(this.impl_)&&wz(this.impl_.destroy)&&this.impl_.destroy()}}])&&ph(e.prototype,r),n&&ph(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Kc),bh="load",wh=r(117),xh=r(118),Mh={attributions:{esAttributions:r(119),enAttributions:r(120)},backimglayer:{esBackimglayer:r(121),enBackimglayer:r(122)},beautytoc:{esBeautytoc:r(123),enBeautytoc:r(124)},buffer:{esBuffer:r(125),enBuffer:r(126)},calendar:{esCalendar:r(127),enCalendar:r(128)},comparepanel:{esComparepanel:r(129),enComparepanel:r(130)},contactlink:{esContactlink:r(131),enContactlink:r(132)},fulltoc:{esFulltoc:r(133),enFulltoc:r(134)},geometrydraw:{esGeometrydraw:r(135),enGeometrydraw:r(136)},georefimage:{esGeorefimage:r(137),enGeorefimage:r(138)},georefimage2:{esGeorefimage2:r(139),enGeorefimage2:r(140)},iberpixcompare:{esIberpixcompare:r(141),enIberpixcompare:r(142)},ignsearch:{esIgnsearch:r(143),enIgnsearch:r(144)},ignsearchlocator:{esIgnsearchlocator:r(145),enIgnsearchlocator:r(146)},incicarto:{esIncicarto:r(147),enIncicarto:r(148)},infocatastro:{esInfocatastro:r(149),enInfocatastro:r(150)},infocoordinates:{esInfocoordinates:r(151),enInfocoordinates:r(152)},information:{esInformation:r(153),enInformation:r(154)},lyrcompare:{esLyrcompare:r(155),enLyrcompare:r(156)},measurebar:{esMeasurebar:r(157),enMeasurebar:r(158)},mirrorpanel:{esMirrorpanel:r(159),enMirrorpanel:r(160)},mousesrs:{esMousesrs:r(161),enMousesrs:r(162)},overviewmap:{esOverviewmap:r(163),enOverviewmap:r(164)},popup:{esPopup:r(165),enPopup:r(166)},predefinedzoom:{esPredefinedzoom:r(167),enPredefinedzoom:r(168)},printermap:{esPrintermap:r(169),enPrintermap:r(170)},queryattributes:{esQueryattributes:r(171),enQueryattributes:r(172)},rescale:{esRescale:r(173),enRescale:r(174)},selectiondraw:{esSelectiondraw:r(175),enSelectiondraw:r(176)},selectionzoom:{esSelectionzoom:r(177),enSelectionzoom:r(178)},sharemap:{esSharemap:r(179),enSharemap:r(180)},stylemanager:{esStylemanager:r(181),enStylemanager:r(182)},timeline:{esTimeline:r(183),enTimeline:r(184)},toc:{esToc:r(185),enToc:r(186)},topographicprofile:{esTopographicprofile:r(187),enTopographicprofile:r(188)},transparency:{esTransparency:r(189),enTransparency:r(190)},vectors:{esVectors:r(191),enVectors:r(192)},viewhistory:{esViewhistory:r(193),enViewhistory:r(194)},xylocator:{esXylocator:r(195),enXylocator:r(196)},zoomextent:{esZoomextent:r(197),enZoomextent:r(198)},zoompanel:{esZoompanel:r(199),enZoompanel:r(200)},viewshed:{esViewshed:r(201),enViewshed:r(202)}},Sh={translations:{en:wh,es:xh},lang:"es"},Eh=function(t){return"es"===t?(Sh.translations[t].attributions=Mh.attributions.esAttributions,Sh.translations[t].backimglayer=Mh.backimglayer.esBackimglayer,Sh.translations[t].beautytoc=Mh.beautytoc.esBeautytoc,Sh.translations[t].buffer=Mh.buffer.esBuffer,Sh.translations[t].calendar=Mh.calendar.esCalendar,Sh.translations[t].comparepanel=Mh.comparepanel.esComparepanel,Sh.translations[t].contactlink=Mh.contactlink.esContactlink,Sh.translations[t].fulltoc=Mh.fulltoc.esFulltoc,Sh.translations[t].geometrydraw=Mh.geometrydraw.esGeometrydraw,Sh.translations[t].georefimage=Mh.georefimage.esGeorefimage,Sh.translations[t].georefimage2=Mh.georefimage2.esGeorefimage2,Sh.translations[t].iberpixcompare=Mh.iberpixcompare.esIberpixcompare,Sh.translations[t].ignsearch=Mh.ignsearch.esIgnsearch,Sh.translations[t].ignsearchlocator=Mh.ignsearchlocator.esIgnsearchlocator,Sh.translations[t].incicarto=Mh.incicarto.esIncicarto,Sh.translations[t].infocatastro=Mh.infocatastro.esInfocatastro,Sh.translations[t].infocoordinates=Mh.infocoordinates.esInfocoordinates,Sh.translations[t].information=Mh.information.esInformation,Sh.translations[t].lyrcompare=Mh.lyrcompare.esLyrcompare,Sh.translations[t].measurebar=Mh.measurebar.esMeasurebar,Sh.translations[t].mirrorpanel=Mh.mirrorpanel.esMirrorpanel,Sh.translations[t].mousesrs=Mh.mousesrs.esMousesrs,Sh.translations[t].popup=Mh.popup.esPopup,Sh.translations[t].predefinedzoom=Mh.predefinedzoom.esPredefinedzoom,Sh.translations[t].printermap=Mh.printermap.esPrintermap,Sh.translations[t].queryattributes=Mh.queryattributes.esQueryattributes,Sh.translations[t].rescale=Mh.rescale.esRescale,Sh.translations[t].selectiondraw=Mh.selectiondraw.esSelectiondraw,Sh.translations[t].selectionzoom=Mh.selectionzoom.esSelectionzoom,Sh.translations[t].sharemap=Mh.sharemap.esSharemap,Sh.translations[t].stylemanager=Mh.stylemanager.esStylemanager,Sh.translations[t].timeline=Mh.timeline.esTimeline,Sh.translations[t].toc=Mh.toc.esToc,Sh.translations[t].topographicprofile=Mh.topographicprofile.esTopographicprofile,Sh.translations[t].transparency=Mh.transparency.esTransparency,Sh.translations[t].vectors=Mh.vectors.esVectors,Sh.translations[t].viewhistory=Mh.viewhistory.esViewhistory,Sh.translations[t].xylocator=Mh.xylocator.esXylocator,Sh.translations[t].zoomextent=Mh.zoomextent.esZoomextent,Sh.translations[t].zoompanel=Mh.zoompanel.esZoompanel,Sh.translations[t].viewshed=Mh.viewshed.esViewshed):"en"===t&&(Sh.translations[t].attributions=Mh.attributions.enAttributions,Sh.translations[t].backimglayer=Mh.backimglayer.enBackimglayer,Sh.translations[t].beautytoc=Mh.beautytoc.enBeautytoc,Sh.translations[t].buffer=Mh.buffer.enBuffer,Sh.translations[t].calendar=Mh.calendar.enCalendar,Sh.translations[t].comparepanel=Mh.comparepanel.enComparepanel,Sh.translations[t].contactlink=Mh.contactlink.enContactlink,Sh.translations[t].fulltoc=Mh.fulltoc.enFulltoc,Sh.translations[t].geometrydraw=Mh.geometrydraw.enGeometrydraw,Sh.translations[t].georefimage=Mh.georefimage.enGeorefimage,Sh.translations[t].georefimage2=Mh.georefimage2.enGeorefimage2,Sh.translations[t].iberpixcompare=Mh.iberpixcompare.enIberpixcompare,Sh.translations[t].ignsearch=Mh.ignsearch.enIgnsearch,Sh.translations[t].ignsearchlocator=Mh.ignsearchlocator.enIgnsearchlocator,Sh.translations[t].incicarto=Mh.incicarto.enIncicarto,Sh.translations[t].infocatastro=Mh.infocatastro.enInfocatastro,Sh.translations[t].infocoordinates=Mh.infocoordinates.enInfocoordinates,Sh.translations[t].information=Mh.information.enInformation,Sh.translations[t].lyrcompare=Mh.lyrcompare.enLyrcompare,Sh.translations[t].measurebar=Mh.measurebar.enMeasurebar,Sh.translations[t].mirrorpanel=Mh.mirrorpanel.enMirrorpanel,Sh.translations[t].mousesrs=Mh.mousesrs.enMousesrs,Sh.translations[t].popup=Mh.popup.enPopup,Sh.translations[t].predefinedzoom=Mh.predefinedzoom.enPredefinedzoom,Sh.translations[t].printermap=Mh.printermap.enPrintermap,Sh.translations[t].queryattributes=Mh.queryattributes.enQueryattributes,Sh.translations[t].rescale=Mh.rescale.enRescale,Sh.translations[t].selectiondraw=Mh.selectiondraw.enSelectiondraw,Sh.translations[t].selectionzoom=Mh.selectionzoom.enSelectionzoom,Sh.translations[t].sharemap=Mh.sharemap.enSharemap,Sh.translations[t].stylemanager=Mh.stylemanager.enStylemanager,Sh.translations[t].timeline=Mh.timeline.enTimeline,Sh.translations[t].toc=Mh.toc.enToc,Sh.translations[t].topographicprofile=Mh.topographicprofile.enTopographicprofile,Sh.translations[t].transparency=Mh.transparency.enTransparency,Sh.translations[t].vectors=Mh.vectors.enVectors,Sh.translations[t].viewhistory=Mh.viewhistory.enViewhistory,Sh.translations[t].xylocator=Mh.xylocator.enXylocator,Sh.translations[t].zoomextent=Mh.zoomextent.enZoomextent,Sh.translations[t].zoompanel=Mh.zoompanel.enZoompanel,Sh.translations[t].viewshed=Mh.viewshed.enViewshed),Sh.translations[t]},Oh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sh.lang;return Eh(e)[t]};function Th(t){return(Th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ph(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ih(t,e){return(Ih=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Lh(t);if(e){var i=Lh(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Rh(this,r)}}function Rh(t,e){if(e&&("object"===Th(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Lh(t){return(Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ch=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ih(t,e)}(o,t);var e,r,n,i=kh(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=t;return r=i.call(this,n),yz(n.addTo)&&hh(Oh("exception").addto_method),yz(n.getElement)&&hh(Oh("exception").getelement_method),yz(n.isByDefault)&&(n.isByDefault=!0),r.name=e,r.map_=null,r.element_=null,r.activationBtn_=null,r.activated=!1,r.panel_=null,r.controls_=null,r}return e=o,(r=[{key:"setImpl",value:function(t){var e=t;yz(e.addTo)&&hh(Oh("exception").addto_method),yz(e.getElement)&&hh(Oh("exception").getelement_method),yz(e.isByDefault)&&(e.isByDefault=!0)}},{key:"addTo",value:function(t){var e=this;this.map_=t;var r=this.getImpl(),n=this.createView(t);n instanceof Promise?n.then((function(n){e.manageActivation(n),r.addTo(t,n),e.fire("added:map")})):(this.manageActivation(n),r.addTo(t,n),this.fire("added:map"))}},{key:"createView",value:function(t){}},{key:"manageActivation",value:function(t){var e=this;this.element_=t,this.activationBtn_=this.getActivationButton(this.element_),bz(this.activationBtn_)||this.activationBtn_.addEventListener("click",(function(t){t.preventDefault(),e.activated?(e.deactivate(),e.activated=!1):(e.activate(),e.activated=!0)}),!1)}},{key:"getActivationButton",value:function(t){}},{key:"activate",value:function(){bz(this.element_)||this.element_.classList.add("activated"),yz(this.getImpl().activate)||this.getImpl().activate(),this.activated=!0,this.fire("activated")}},{key:"deactivate",value:function(){bz(this.element_)||this.element_.classList.remove("activated"),yz(this.getImpl().deactivate)||this.getImpl().deactivate(),this.activated=!1,this.fire("deactivated")}},{key:"getElement",value:function(){return this.getImpl().getElement()}},{key:"setPanel",value:function(t){this.panel_=t}},{key:"getPanel",value:function(){return this.panel_}},{key:"destroy",value:function(){}}])&&Ph(e.prototype,r),n&&Ph(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h),Ah=r(31),Nh=r.n(Ah);function jh(t){return function(t){const e=t.compile;return t.compile=function(t,r){const n=e.call(this,t,r);return function(t,e){return n(t,function(t){return{allowProtoPropertiesByDefault:!0,allowProtoMethodsByDefault:!0,...t}}(e))}},t}(t.create())}var Fh=function(t){t.registerHelper("gt",(function(t,e,r){return t>e?r.fn(this):r.inverse(this)})),t.registerHelper("lt",(function(t,e,r){return t<e?r.fn(this):r.inverse(this)})),t.registerHelper("eq",(function(t,e,r){return Object.equals(t,e)?r.fn(this):r.inverse(this)})),t.registerHelper("oneword",(function(t,e){return/\s/g.test(Wz(t))?e.inverse(this):e.fn(this)})),t.registerHelper("printType",(function(t,e,r,n,i){var o="<li id=".concat(r,'><span id="info">').concat(e,"</span>");return"Municipio"!==t&&"provincia"!==t&&"comunidad autonoma"!==t&&!0!==i||(o+=" (".concat(t,")")),void 0!==n&&(o+=" en ".concat(n)),o})),t.registerHelper("pattern",(function(t){var e="";return t.data.root.fields.forEach((function(t){if(t.isFormatter&&void 0!==t.typeparam)for(var r=t.typeparam,n=t.value,i=0;i<n;i+=1)e+=r})),e})),t.registerHelper("formatterStr",(function(t){var e,r,n="";r=t.value,e=t.typeparam;for(var i=0;i<r;i+=1)n+=e;return n})),t.registerHelper("ifCond",(function(t,e,r){return t===e?r.fn(void 0):r.inverse(void 0)})),t.registerHelper("sum",(function(t,e){return t+e})),t.registerHelper("neq",(function(t,e,r){return Object.equals(t,e)?r.inverse(void 0):r.fn(void 0)})),t.registerHelper("unless",(function(t,e){return t?e.inverse(void 0):e.fn(void 0)})),t.registerHelper("get",(function(t,e){return e[t]})),t.registerHelper("uppercase",(function(t){return t.toUpperCase()})),t.registerHelper("lowercase",(function(t){return t.toLowerCase()}))},Dh={},Bh=function(t,e){var r,n={};yz(e)||(n=Zz(n,e.vars),r=e.parseToHtml);var i=jh(Nh.a);Fh(i);var o=i.compile(t)(n);return!1!==r?Nz(o):o},zh=function(t,e){var r;return yz(e)||(r=e.scope),new Promise((function(n,i){var o=Dh[t];if(yz(o)){var a=t;yz(e)||!0!==e.jsonp||(a=function(t){var e=null;return bz(t)||(e=(e=M.config.MAPEA_URL.concat(M.config.TEMPLATES_PATH)).concat(t)),e}(t));var s=bz(e)&&!0===e.jsonp;lz(a,null,{jsonp:s}).then((function(e){var i=jh(Nh.a);Fh(i),o=i.compile(e.text),Dh[t]=o,n.call(r,o)}))}else n.call(r,o)}))};function Gh(t){return(Gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vh(t,e){return(Vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Zh(t);if(e){var i=Zh(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Yh(this,r)}}function Yh(t,e){if(e&&("object"===Gh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Zh(t){return(Zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vh(t,e)}(o,t);var e,r,n,i=Wh(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qh(this,o);var r=new ch(e);return t=i.call(this,r,o.NAME),yz(ch)&&hh(Oh("exception").panzoombar_method),t}return e=o,(r=[{key:"createView",value:function(t){return Bh($c.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&Uh(e.prototype,r),n&&Uh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ch);Hh.NAME="panzoombar";var Xh=Hh,Kh={WMC:"WMC",KML:"KML",WMS:"WMS",WFS:"WFS",WMTS:"WMTS",OSM:"OSM",GeoJSON:"GeoJSON",Vector:"Vector",MVT:"MVT",XYZ:"XYZ",TMS:"TMS"},Jh=function(t){var e=Ez(t,!0);return e="WMS_FULL"===e?"WMS":"WFST"===e?"WFS":Object.keys(Kh).find((function(t){var r=Kh[t];return Mz(r)&&Ez(r,!0)===e})),Kh[e]},$h=function(t){return-1!==["WMC","KML","WMS","WFS","WMTS","MVT","XYZ","TMS"].indexOf(Jh(t))};r(222),r(223);function Qh(t){return(Qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var tf=/OSM\.*/,ef=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(Mz(e)&&t.test(e)){var l=e.split("*")[o];bz(l)||(s=u[n](l))}else xz(e)?s=e[r]:hh("El parámetro no es de un tipo soportado: ".concat(Qh(e)));return Mz(s)&&(s=s.trim()),!0===a&&(s=Ez(s)),s}},rf=function(t){var e=t,r=[];bz(e)&&(e={type:"OSM",name:"osm"});var n=e;return _z(n)||(n=[n]),r=n.map((function(t){return{type:"OSM",transparent:ef({parameter:t,type:"boolean",attr:"transparent"})(tf,1),legend:ef({parameter:t,type:"string",name:"legend"})(tf,2),name:ef({parameter:t,type:"string",name:"name"})(tf,3)}})),_z(e)||(r=r[0]),r};function nf(t){return(nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var of=function(t){var e=t,r={};if(bz(e)&&hh(Oh("exception").no_center),Mz(e))if(e=Ez(e),/^-?\d+(\.\d+)?[,;]-?\d+(\.\d+)?([*](true|false))?$/i.test(e)){var n=e.split(/\*/),i=n[0],o=n[1],a=i.split(/[,;]+/);2===a.length?(r.x=Number.parseFloat(a[0]),r.y=Number.parseFloat(a[1])):hh(Oh("exception").invalid_center_param),r.draw=/^1|(true)$/i.test(o)}else hh(Oh("exception").invalid_center_param);else _z(e)?2===e.length||3===e.length?(Mz(e[0])&&(e[0]=Number.parseFloat(e[0])),Mz(e[1])&&(e[1]=Number.parseFloat(e[1])),r.x=e[0],r.y=e[1]):hh(Oh("exception").invalid_center_param):xz(e)?(vz(e.x)?hh(Oh("exception").invalid_center_param):(Mz(e.x)&&(e.x=Number.parseFloat(e.x)),r.x=e.x),vz(e.y)?hh(Oh("exception").invalid_center_param):(Mz(e.y)&&(e.y=Number.parseFloat(e.y)),r.y=e.y),vz(e.draw)?r.draw=!1:r.draw=/^true$/.test(e.draw)):hh("El parámetro no es de un tipo soportado: ".concat("undefined"==typeof maxExtentParameter?"undefined":nf(maxExtentParameter)));return(Number.isNaN(r.x)||Number.isNaN(r.y))&&hh(Oh("exception").invalid_center_param),r},af=function(t){var e,r=t;if(!bz(r)){if(e={x:{},y:{}},bz(r)&&hh(Oh("exception").no_maxextent),Mz(r))if(/^\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?$/.test(r)){var n=r.split(/[,;]+/);4===n.length?(e.x.min=Number.parseFloat(n[0]),e.y.min=Number.parseFloat(n[1]),e.x.max=Number.parseFloat(n[2]),e.y.max=Number.parseFloat(n[3])):hh(Oh("exception").invalid_maxextent_param)}else hh(Oh("exception").invalid_maxextent_param);else _z(r)?4===r.length?(Mz(r[0])&&(r[0]=Number.parseFloat(r[0])),Mz(r[1])&&(r[1]=Number.parseFloat(r[1])),Mz(r[2])&&(r[2]=Number.parseFloat(r[2])),Mz(r[3])&&(r[3]=Number.parseFloat(r[3])),e.x.min=r[0],e.y.min=r[1],e.x.max=r[2],e.y.max=r[3]):hh(Oh("exception").invalid_maxextent_param):xz(r)?(vz(r.left)?vz(r.x.min)?hh(Oh("exception").invalid_maxextent_param):(Mz(r.x.min)&&(r.x.min=Number.parseFloat(r.x.min)),e.x.min=r.x.min):(Mz(r.left)&&(r.left=Number.parseFloat(r.left)),e.x.min=r.left),vz(r.bottom)?vz(r.y.min)?hh(Oh("exception").invalid_maxextent_param):(Mz(r.y.min)&&(r.y.min=Number.parseFloat(r.y.min)),e.y.min=r.y.min):(Mz(r.bottom)&&(r.bottom=Number.parseFloat(r.bottom)),e.y.min=r.bottom),vz(r.right)?vz(r.x.max)?hh(Oh("exception").invalid_maxextent_param):(Mz(r.x.max)&&(r.x.max=Number.parseFloat(r.x.max)),e.x.max=r.x.max):(Mz(r.right)&&(r.right=Number.parseFloat(r.right)),e.x.max=r.right),vz(r.top)?vz(r.y.max)?hh(Oh("exception").invalid_maxextent_param):(Mz(r.y.max)&&(r.y.max=Number.parseFloat(r.y.max)),e.y.max=r.y.max):(Mz(r.top)&&(r.top=Number.parseFloat(r.top)),e.y.max=r.top)):hh("El parámetro no es de un tipo soportado: ".concat(nf(r)));(Number.isNaN(e.x.min)||Number.isNaN(e.y.min)||Number.isNaN(e.x.max)||Number.isNaN(e.y.max))&&hh(Oh("exception").invalid_maxextent_param)}return e},sf=function(t){var e={code:null,units:null};if(bz(t)&&hh(Oh("exception").no_projection),Mz(t))if(/^(EPSG:)?\d+\*((d(egrees)?)|(m(eters)?))$/i.test(t)){var r=t.split(/\*/);e.code=r[0],e.units=Ez(r[1].substring(0,1))}else hh("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ));else xz(t)?vz(t.code)||vz(t.units)?hh("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ)):(e.code=t.code,e.units=Ez(t.units.substring(0,1))):hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return"m"!==e.units&&"d"!==e.units&&hh('La unidad "'.concat(t.units,'" del parámetro projection no es válida. Las disponibles son: "m" o "d"')),e},uf=function(t){var e=t,r=[];bz(e)&&hh(Oh("exception").no_resolutions),Mz(e)&&(/^\d+(\.\d+)?([,;]\d+(\.\d+)?)*$/.test(e)?e=e.split(/[,;]+/):hh(Oh("exception").invalid_resolutions_param)),_z(e)?r=e.map((function(t){return Mz(t)?Number.parseFloat(t):t})):hh("El parámetro no es de un tipo soportado: ".concat(nf(e)));for(var n=!0,i=0,o=r.length;i<o&&n;i+=1)n=!Number.isNaN(r[i]);return n||hh(Oh("exception").invalid_resolutions_param),r},lf=function(t){var e,r=t;return bz(r)&&hh(Oh("exception").no_zoom),Mz(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:hh("El parámetro no es de un tipo soportado: ".concat(nf(r))),Number.isNaN(e)&&hh(Oh("exception").invalid_zoom_param),e},cf=function(t){var e,r=t;return bz(r)&&hh(Oh("exception").no_zoom),Mz(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:hh("El parámetro no es de un tipo soportado: ".concat(nf(r))),Number.isNaN(e)&&hh(Oh("exception").invalid_zoom_param),e},hf=function(t){var e,r=t;return bz(r)&&hh(Oh("exception").no_zoom),Mz(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:hh("El parámetro no es de un tipo soportado: ".concat(nf(r))),Number.isNaN(e)&&hh(Oh("exception").invalid_zoom_param),e},ff=function(t){var e=t,r=[];bz(e)&&hh(Oh("exception").no_param);var n=e;return _z(n)||(n=[n]),r=n.map((function(t){var e,r,n={};return n.type="KML",n.name=(Mz(e=t)?/^KML\*.+/i.test(e)?/^KML\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(r=e.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(e)||/^[^*]*/.test(e))&&(r=e.split(/\*/)[0].trim()):xz(e)&&!bz(e.name)?r=e.name.trim():xz(e)||hh("El parámetro no es de un tipo soportado: ".concat(nf(e))),(Sz(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.url=function(t){var e;if(Mz(t))if(/^KML\*[^*]+\*[^*]+\*[^*]+\.kml\*(true|false)$/i.test(t)){var r=t.split(/\*/);e=r[2].concat(r[3])}else{var n=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)\*.*/i);n&&n.length>2&&(e=n[2])}else xz(t)?e=t.url:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e}(t),n.extract=function(t){var e,r;return Mz(t)?/^KML\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(t)?e=(r=t.split(/\*/))[r.length-3].trim():/^[^*]+\*[^*]+\*(true|false)$/i.test(t)?e=(r=t.split(/\*/))[2].trim():/^[^*]+\*(true|false)$/i.test(t)&&(e=(r=t.split(/\*/))[1].trim()):xz(t)?e=Ez(t.extract):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e=bz(e)?void 0:/^1|(true)$/i.test(e)}(t),n.label=function(t){var e,r;return Mz(t)?e="false"!==(e=(r=t.split(/\*/))[r.length-2].trim()):xz(t)?e=Ez(t.label):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e}(t),n.visibility=function(t){var e,r;return Mz(t)?e="false"!==(e=(r=t.split(/\*/))[r.length-1].trim()):xz(t)?e=Ez(t.visibility):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e}(t),n})),_z(e)||(r=r[0]),r},pf=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(e){var r,n,i={};return i.type="WFS",i.name=(Mz(r=e)?/^WFS(T)?\*.+/i.test(r)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(r)||/^[^*]*\*[^*]+:[^*]+/.test(r)?n=r.split(/\*/)[3].trim().split(":")[1]:/^WFS(T)?\*[^*]*\*[^*]+[^*]+/i.test(r)&&(n=r.split(/\*/)[3].trim()):/^[^*]*\*[^*]+:[^*]+/.test(r)&&(n=r.split(/\*/)[1].trim().split(":")[1]):xz(r)&&!bz(r.name)?n=r.name.trim():xz(r)||hh("El parámetro no es de un tipo soportado: ".concat(nf(r))),(Sz(n)||/^(true|false)$/i.test(n))&&(n=null),n),i.url=function(t){var e;if(Mz(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else xz(t)?e=t.url:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e}(e),i.namespace=function(t){var e;return Mz(t)?/^WFS(T)?\*.+/i.test(t)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim().split(":")[0]):/^[^*]*\*[^*]+:[^*]+/.test(t)&&(e=t.split(/\*/)[1].trim().split(":")[0]):xz(t)&&!bz(t.namespace)?e=t.namespace.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),(Sz(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.legend=function(t){var e;return Mz(t)?/^WFS(T)?\*[^*]/i.test(t)?e=t.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):xz(t)&&!bz(t.legend)?e=t.legend.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),(Sz(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.cql=function(t){var e;return Mz(t)?(/^[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim()),/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*/i.test(t)&&(e=t.split(/\*/)[6].trim())):xz(t)&&!bz(t.cql)||!bz(t.ecql)?e=t.cql?t.cql.trim():t.ecql.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),(/^(true|false)$/i.test(e)||/^\d\.\d\.\d$/.test(e))&&(e=void 0),e}(e),i.geometry=function(t){var e;return Mz(t)?/^WFS(T)?\*.+/i.test(t)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+/i.test(t)||/^WFS(T)?\*[^*]*\*[^*][^*]+\*[^*]+/i.test(t))&&(e=t.split(/\*/)[4].trim()):xz(t)&&!bz(t.geometry)?e=t.geometry.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),(Sz(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.ids=function(t){var e;return Mz(t)?/^WFS(T)?\*.+/i.test(t)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*(.-?)+$/i.test(t)||/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]+\*(.-?)+$/i.test(t))&&(e=t.split(/\*/)[5].trim().split("-")):xz(t)&&!bz(t.ids)?e=t.ids:xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),Sz(e)&&(e=null),bz(e)||_z(e)||(e=[e]),e}(e),i.version=function(t){var e;return Mz(t)?/(\d\.\d\.\d)$/.test(t)&&(e=t.match(/\d\.\d\.\d$/)[0]):xz(t)?e=t.version:hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e}(e),i.style=function(t){var e;return Mz(t)?/^WFS(T)?\*.+/i.test(t)&&/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*\*[^*]*/i.test(t)&&(e=t.split(/\*/)[7].trim()):xz(t)&&!bz(t.style)?e=t.style:xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e}(e),i.options=function(t){var e;return Mz(t)||(xz(t)?e=t.options:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)))),e}(e),i.outputFormat=t.outputFormat,i})),_z(t)||(e=e[0]),e},df=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e,r,n={};return n.type="GeoJSON",n.name=(Mz(e=t)?/^GeoJSON(T)?\*[^*]/i.test(e)?r=e.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(e)&&(r=e.split(/\*/)[2].trim()):xz(e)&&!bz(e.legend)?r=e.legend.trim():xz(e)||hh("El parámetro no es de un tipo soportado: ".concat(nf(e))),(Sz(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.url=function(t){var e;if(Mz(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else xz(t)?e=t.url:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e}(t),n.extract=function(t){var e,r;return Mz(t)?/^GeoJSON\*[^*]+\*[^*]+\*[^*]*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():(r=t.split(/\*/)[3],e=!bz(r)&&[r]):xz(t)?e=Ez(t.extract):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e}(t),n.style=function(t){var e;return Mz(t)?/^GeoJSON(T)?\*.+/i.test(t)&&(/^GeoJSON(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]*/i.test(t)||/^GeoJSON(T)?\*[^*]*\*[^*]+\*/i.test(t))&&(e=t.split(/\*/)[4].trim()):xz(t)&&!bz(t.style)?e=t.style:xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e}(t),n})),_z(t)||(e=e[0]),e},mf=function(t){var e=[];bz(t)&&hh("No ha especificado ningún parámetro");var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e={type:"MVT"};return e.name=function(t){var e;if(Mz(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+)\*([^*]+)/i);r&&r.length>2&&(e=r[2])}}else xz(t)&&!bz(t.name)?e=t.name.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e}(t),e.url=function(t){var e;if(Mz(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+).*/i);r&&r.length>1&&(e=r[1])}}else xz(t)&&!bz(t.url)?e=t.url.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e}(t),e})),_z(t)||(e=e[0]),e},yf=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e,r,n={};return n.type="WMC",n.name=(Mz(e=t)?/^\w{3,7}\*[^*]+\*[^*]+$/.test(e)?r=e.split(/\*/)[2].trim():/^\w{3,7}\*[^*]$/.test(e)||/^[^*]+\*[^*]+$/.test(e)?r=e.split(/\*/)[1].trim():/^[^*]+$/.test(e)&&!Sz(e)&&(r=e):xz(e)?r=Ez(e.name):hh("El parámetro no es de un tipo soportado: ".concat(nf(e))),Sz(r)&&(r=null),r),n.url=function(t){var e;if(Mz(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else xz(t)?e=t.url:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e}(t),n.options=function(t){var e;return Mz(t)||(xz(t)?e=t.options:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)))),e}(t),n})),_z(t)||(e=e[0]),e},gf=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e=function(t){var e;return Mz(t)?/^WMS\*.+/i.test(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim()):/^[^*]*\*[^*]+/.test(t)?e=t.split(/\*/)[1].trim():/^[^*]*/.test(t)&&(e=t.split(/\*/)[0].trim()):xz(t)&&!bz(t.name)?e=t.name.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),(Sz(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),r=function(t){var e;if(Mz(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else xz(t)?e=t.url:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e}(t),n=function(t){var e;return Mz(t)?/^WMS\*[^*]/i.test(t)?e=t.split(/\*/)[1].trim():/^[^*]+\*[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):xz(t)&&!bz(t.legend)?e=t.legend.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),(Sz(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),i=function(t){var e;return Mz(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[4].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(t)?(t.split(/\*/),e=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(t)&&(e=t.split(/\*/)[2].trim()):xz(t)?e=Ez(t.transparent):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),o=function(t){var e;return Mz(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t)?e=t.split(/\*/)[5].trim():/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=!0:/^WMS_FULL\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[2].trim():(/^[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t)||/^[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t))&&t.split(/\*/):xz(t)?e=Ez(t.tiled):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),a=function(t){var e;if(Mz(t)){if(/^WMS(\*[^*]*){6}$/i.test(t))e=t.split(/\*/)[6].trim();else if(/^WMS_FULL(\*[^*]*){3}/i.test(t)){e=t.split(/\*/)[3].trim()}bz(e)||(e=e.split(/[,;]+/))}else xz(t)?e=t.maxExtent:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return bz(e)||4!==e.length?bz(e)||hh(Oh("exception").invalid_maxextent_param):(Mz(e[0])&&(e[0]=Number.parseFloat(e[0])),Mz(e[1])&&(e[1]=Number.parseFloat(e[1])),Mz(e[2])&&(e[2]=Number.parseFloat(e[2])),Mz(e[3])&&(e[3]=Number.parseFloat(e[3]))),e}(t),s=function(t){var e;return Mz(t)?/(\d\.\d\.\d)$/.test(t)&&(e=t.match(/\d\.\d\.\d$/)[0]):xz(t)?e=t.version:hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e}(t),u=function(t){var e;return Mz(t)||(xz(t)?e=t.options:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)))),e}(t);return{type:"WMS",name:e,url:r,legend:n,transparent:i,tiled:o,maxExtent:a,version:s,displayInLayerSwitcher:function(t){var e;return Mz(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[8].trim()):xz(t)?e=Ez(t.displayInLayerSwitcher):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),queryable:function(t){var e;return Mz(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[9].trim()):xz(t)?e=Ez(t.queryable):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),visibility:function(t){var e;return Mz(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[10].trim()):xz(t)?e=Ez(t.visibility):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),options:u}})),_z(t)||(e=e[0]),e},vf=function(t){var e;if(Mz(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else xz(t)?e=t.url:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e},_f=function(t,e,r,n){var i,o;return Mz(t)?r+3<=(o=t.split(/\*/)).length-1?(i=o[r+3].trim(),i=isNaN(i)?"false"!==i.toLowerCase():Number(i)):i=e:xz(t)?i=Ez(t[n]):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),i},bf=function(t){var e=t,r=[];bz(e)&&hh(Oh("exception").no_param);var n=e;return _z(n)||(n=[n]),r=n.map((function(t){var e,r,n={};return n.type="XYZ",n.name=(Mz(e=t)?/^XYZ\*.+/i.test(e)?/^XYZ\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(r=e.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(e)||/^[^*]*/.test(e))&&(r=e.split(/\*/)[0].trim()):xz(e)&&!bz(e.name)?r=e.name.trim():xz(e)||hh("El parámetro no es de un tipo soportado: ".concat(nf(e))),(Sz(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.legend=n.name,n.url=vf(t),n.visibility=_f(t,"true",0,"visibility"),n.transparent=_f(t,"true",1,"transparent"),n})),_z(e)||(r=r[0]),r},wf=function(t){var e=t,r=[];bz(e)&&hh(Oh("exception").no_param);var n=e;return _z(n)||(n=[n]),r=n.map((function(t){var e,r,n={};return n.type="TMS",n.name=(Mz(e=t)?/^TMS\*.+/i.test(e)?/^TMS\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(r=e.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(e)||/^[^*]*/.test(e))&&(r=e.split(/\*/)[0].trim()):xz(e)&&!bz(e.name)?r=e.name.trim():xz(e)||hh("El parámetro no es de un tipo soportado: ".concat(nf(e))),(Sz(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.legend=n.name,n.url=vf(t),n.visibility=_f(t,"true",0,"visibility"),n.transparent=_f(t,"true",1,"transparent"),n.tileGridMaxZoom=_f(t,"17",2,"tileGridMaxZoom"),n})),_z(e)||(r=r[0]),r},xf=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e,r,n={};return n.type="WMTS",n.name=(Mz(e=t)?/^WMTS\*.+/i.test(e)?/^WMTS\*[^*]+\*[^*]+/i.test(e)&&(r=e.split(/\*/)[2].trim()):/^[^*]*\*[^*]+/.test(e)&&(r=e.split(/\*/)[1].trim()):xz(e)&&!bz(e.name)?r=e.name.trim():xz(e)||hh("El parámetro no es de un tipo soportado: ".concat(nf(e))),(Sz(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.url=function(t){var e;if(Mz(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else xz(t)?e=t.url:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return e}(t),n.matrixSet=function(t){var e;return Mz(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]+/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):xz(t)&&!bz(t.matrixSet)?e=t.matrixSet.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),(Sz(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),n.legend=function(t){var e;return Mz(t)?/^WMTS\*.+/i.test(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]+/i.test(t)&&(e=t.split(/\*/)[4].trim()):/^[^*]+\*[^*]+\*[^*]*\*[^*]+/.test(t)&&(e=t.split(/\*/)[3].trim()):xz(t)&&!bz(t.legend)?e=t.legend.trim():xz(t)||hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),(Sz(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),n.options=function(t){var e;return Mz(t)||(xz(t)?e=t.options:hh("El parámetro no es de un tipo soportado: ".concat(nf(t)))),e}(t),n.transparent=function(t){var e;return Mz(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)/i.test(t)?e=t.split(/\*/)[5].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(t)?(t.split(/\*/),e=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(t)&&(e=t.split(/\*/)[2].trim()):xz(t)?e=Ez(t.transparent):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),n.format=function(t){var e;return Mz(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)/i.test(t)&&(e=t.split(/\*/)[6].trim()):xz(t)?e=Ez(t.format):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),e}(t),n.displayInLayerSwitcher=function(t){var e;return Mz(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[7].trim()):xz(t)?e=Ez(t.displayInLayerSwitcher):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),n.queryable=function(t){var e;return Mz(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[8].trim()):xz(t)?e=Ez(t.queryable):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),n.visibility=function(t){var e;return Mz(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[9].trim()):xz(t)?e=Ez(t.visibility):hh("El parámetro no es de un tipo soportado: ".concat(nf(t))),bz(e)||(e=/^1|(true)$/i.test(e)),e}(t),n})),_z(t)||(e=e[0]),e},Mf={kml:ff,wfs:pf,osm:rf,wmc:yf,wms:gf,wmts:xf,geojson:df,mvt:mf,xyz:bf,tms:wf},Sf=function(t,e){var r=[];bz(t)&&hh(Oh("exception").no_param);var n=t;return _z(n)||(n=[n]),r=n.map((function(t){var r=null;if(xz(t)&&t instanceof Lf)r=t;else{var n=function(t,e){var r;if(Mz(t))if(/^\s*osm\s*$/i.test(t))r="OSM";else{var n=t.match(/^(\w+)\*.+$/);n&&n.length>1&&(r=Jh(n[1]),yz(r)&&hh("No se reconoce el tipo de capa ".concat(n[1]))),yz(r)&&!bz(e)?r=e:yz(r)&&hh("No se reconoce el tipo de capa ".concat(r))}else xz(t)?bz(t.type)||(r=Jh(t.type),yz(r)&&hh("No se reconoce el tipo de capa ".concat(r))):hh("El parámetro no es de un tipo soportado: ".concat(nf(t)));return bz(r)||bz(e)||r===e||hh("El tipo de la capa (".concat(r).concat(") no era el esperado (").concat(e).concat(")")),bz(r)&&!bz(e)&&(r=e),r}(t,e);n=Ez(n),r=wz(Mf[n])?Mf[n](t):t}return r})),_z(t)||(r=r[0]),r};function Ef(t){return(Ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Of(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tf(t,e){return(Tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=kf(t);if(e){var i=kf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return If(this,r)}}function If(t,e){if(e&&("object"===Ef(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function kf(t){return(kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tf(t,e)}(o,t);var e,r,n,i=Pf(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=i.call(this,e);var n=Sf(t);return r.type=n.type,r.url=n.url,r.name=n.name,r.transparent=n.transparent,r.maxExtent_=null,r.zindex_=null,r.map_=null,r.userMaxExtent=n.maxExtent,r.legend=n.legend,r.minZoom=n.minZoom||Number.NEGATIVE_INFINITY,r.maxZoom=n.maxZoom||Number.POSITIVE_INFINITY,r}return e=o,(r=[{key:"getLegend",value:function(){return this.getImpl().legend}},{key:"setLegend",value:function(t){this.legend=t,this.getImpl().legend=t}},{key:"url",get:function(){return this.getImpl().url},set:function(t){this.getImpl().url=t}},{key:"name",get:function(){return this.getImpl().name},set:function(t){this.getImpl().name=t}},{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){bz(t)?this.getImpl().transparent=!0:Mz(t)?this.getImpl().transparent="true"===Ez(t):this.getImpl().transparent=t}},{key:"displayInLayerSwitcher",get:function(){return this.getImpl().displayInLayerSwitcher},set:function(t){bz(t)?this.getImpl().displayInLayerSwitcher=!0:Mz(t)?this.getImpl().displayInLayerSwitcher="true"===Ez(t):this.getImpl().displayInLayerSwitcher=t}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return bz(t)&&(t=this.map_.userMaxExtent,bz(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return e(t.getMaxExtent())}))}},{key:"setMaxExtent",value:function(t){this.userMaxExtent=t,!_z(t)&&xz(t)&&(this.userMaxExtent=[t.x.min,t.y.min,t.x.max,t.y.max]),wz(this.getImpl().setMaxExtent)&&(bz(t)?this.resetMaxExtent():this.getImpl().setMaxExtent(t))}},{key:"resetMaxExtent",value:function(){var t=this;this.userMaxExtent=null,this.calculateMaxExtent().then((function(e){wz(t.getImpl().setMaxExtent)&&t.getImpl().setMaxExtent(e)}))}},{key:"setMap",value:function(t){this.map_=t}},{key:"getLayerGroup",value:function(){return this.getImpl().layerGroup}},{key:"setLayerGroup",value:function(t){this.getImpl().layerGroup=t}},{key:"isVisible",value:function(){return yz(this.getImpl().isVisible)&&hh(Oh("exception").isvisible_method),this.getImpl().isVisible()}},{key:"isQueryable",value:function(){return yz(this.getImpl().isQueryable)&&hh(Oh("exception").isqueryable_method),this.getImpl().isQueryable()}},{key:"setVisible",value:function(t){var e=t;bz(e)&&hh(Oh("exception").visibility_param),Mz(e)||gz(e)||hh(Oh("exception").visibility_param),yz(this.getImpl().setVisible)&&hh(Oh("exception").setvisible_method),e=/^1|(true)$/i.test(e),this.getImpl().setVisible(e)}},{key:"inRange",value:function(){return yz(this.getImpl().inRange)&&hh(Oh("exception").inrage_method),this.getImpl().inRange()}},{key:"getLegendURL",value:function(){return this.getImpl().getLegendURL()}},{key:"setLegendURL",value:function(t){var e=t;bz(e)&&(e=Fz([M.config.THEME_URL,o.LEGEND_DEFAULT])),this.getImpl().setLegendURL(e)}},{key:"getZIndex",value:function(){return this.zindex_}},{key:"setZIndex",value:function(t){this.zindex_=t,this.getImpl().setZIndex(t)}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"setMinZoom",value:function(t){this.minZoom=t,this.getImpl().setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"setMaxZoom",value:function(t){this.maxZoom=t,this.getImpl().setMaxZoom(t)}},{key:"getOpacity",value:function(){return this.getImpl().getOpacity()}},{key:"setOpacity",value:function(t){this.getImpl().setOpacity(t)}},{key:"refresh",value:function(){!yz(this.getImpl().refresh)&&wz(this.getImpl().refresh)&&this.getImpl().refresh()}},{key:"generateName_",value:function(){this.name=Pz("layer_","_".concat(this.type))}}])&&Of(e.prototype,r),n&&Of(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h);Rf.LEGEND_DEFAULT="/img/legend-default.png",Rf.LEGEND_ERROR="/img/legend-error.png";var Lf=Rf,Cf="preload",Af="useInterimTilesOnError",Nf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jf=function(t){function e(e){var r=this,n=e||{},i=Ln({},n);return delete i.preload,delete i.useInterimTilesOnError,(r=t.call(this,i)||this).setPreload(void 0!==n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return Nf(e,t),e.prototype.getPreload=function(){return this.get(Cf)},e.prototype.setPreload=function(t){this.set(Cf,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Af)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Af,t)},e}(wu),Ff=function(){function t(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function Df(t,e,r,n,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new Ff(t,e,r,n)}var Bf=Ff,zf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gf=function(t){function e(e){var r=t.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r}return zf(e,t),e.prototype.getFeatures=function(t){return _r()},e.prototype.prepareFrame=function(t){return _r()},e.prototype.renderFrame=function(t,e){return _r()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(n,i){var o=this.loadedTileCallback.bind(this,r,n);return t.forEachLoadedTile(e,n,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){},e.prototype.getDataAtPixel=function(t,e,r){return _r()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===bc&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=bc&&e!=wc&&t.addEventListener(Li,this.boundHandleImageChange_),e==vc&&(t.load(),e=t.getState()),e==bc},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==iu&&t.changed()},e}(Xi),qf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uf=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform_=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r}return qf(e,t),e.prototype.useContainer=function(t,e,r){var n,i,o=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===o&&((s=t.firstElementChild)instanceof HTMLCanvasElement&&(i=s.getContext("2d")));if(i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=o;var a=n.style;a.position="absolute",a.width="100%",a.height="100%";var s=(i=Bs()).canvas;n.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=n,this.context=i}},e.prototype.clip=function(t,e,r){var n=e.pixelRatio,i=e.size[0]*n/2,o=e.size[1]*n/2,a=e.viewState.rotation,s=hn(r),u=fn(r),l=on(r),c=nn(r);ja(e.coordinateToPixelTransform,s),ja(e.coordinateToPixelTransform,u),ja(e.coordinateToPixelTransform,l),ja(e.coordinateToPixelTransform,c),t.save(),fc(t,-a,i,o),t.beginPath(),t.moveTo(s[0]*n,s[1]*n),t.lineTo(u[0]*n,u[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(c[0]*n,c[1]*n),t.clip(),fc(t,a,i,o)},e.prototype.clipUnrotated=function(t,e,r){var n=hn(r),i=fn(r),o=on(r),a=nn(r);ja(e.coordinateToPixelTransform,n),ja(e.coordinateToPixelTransform,i),ja(e.coordinateToPixelTransform,o),ja(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;ja(s,n),ja(s,i),ja(s,o),ja(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var i=new jl(t,this.inversePixelTransform,r,e);n.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(No,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(jo,t,e)},e.prototype.getRenderTransform=function(t,e,r,n,i,o,a){var s=i/2,u=o/2,l=n/e,c=-l,h=-t[0]+a,f=-t[1];return Da(this.tempTransform_,s,u,l,c,-r,h,f)},e.prototype.getDataAtPixel=function(t,e,r){var n,i=ja(this.inversePixelTransform,t.slice()),o=this.context;try{n=o.getImageData(Math.round(i[0]),Math.round(i[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(Gf),Vf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wf=function(t){function e(e){var r=t.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new Bf(0,0,0,0),r}return Vf(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==qo||r==Vo||r==Uo&&!n},e.prototype.getTile=function(t,e,r,n){var i=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,i,o);return s.getState()==Uo&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(qo)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,r,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,r,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],n=t.viewState,i=n.projection,o=n.resolution,a=n.center,s=n.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),h=c.getRevision(),f=c.getTileGridForProjection(i),p=f.getZForResolution(o,c.zDirection),d=f.getResolution(p),m=t.extent,y=r.extent&&ui(r.extent,i);y&&(m=cn(m,ui(r.extent,i)));var g=c.getTilePixelRatio(u),v=Math.round(t.size[0]*g),_=Math.round(t.size[1]*g);if(s){var b=Math.round(Math.sqrt(v*v+_*_));v=b,_=b}var w=d*v/2/g,x=d*_/2/g,M=[a[0]-w,a[1]-x,a[0]+w,a[1]+x],S=f.getTileRangeForExtentAndZ(m,p),E={};E[p]={};var O=this.createLoadedTileFinder(c,i,E),T=this.tmpExtent,P=this.tmpTileRange_;this.newTiles_=!1;for(var I=S.minX;I<=S.maxX;++I)for(var k=S.minY;k<=S.maxY;++k){var R=this.getTile(p,I,k,t);if(this.isDrawableTile(R)){var L=wr(this);if(R.getState()==qo){E[p][R.tileCoord.toString()]=R;var C=R.inTransition(L);this.newTiles_||!C&&-1!==this.renderedTiles.indexOf(R)||(this.newTiles_=!0)}if(1===R.getAlpha(L,t.time))continue}var A=f.getTileCoordChildTileRange(R.tileCoord,P,T),N=!1;A&&(N=O(p+1,A)),N||f.forEachTileCoordParentTileRange(R.tileCoord,O,P,T)}var j=d/o;Da(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/g,1/g,s,-v/2,-_/2);var F=mc(this.pixelTransform);this.useContainer(e,F,r.opacity);var D=this.context,B=D.canvas;Ba(this.inversePixelTransform,this.pixelTransform),Da(this.tempTransform_,v/2,_/2,j,j,0,-v/2,-_/2),B.width!=v||B.height!=_?(B.width=v,B.height=_):this.containerReused||D.clearRect(0,0,v,_),y&&this.clipUnrotated(D,t,y),this.preRender(D,t),this.renderedTiles.length=0;var z,G,q,U=Object.keys(E).map(Number);U.sort(gi),1!==r.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(z=[],G=[]):U=U.reverse();for(var V=U.length-1;V>=0;--V){var W=U[V],Y=c.getTilePixelSize(W,u,i),Z=f.getResolution(W)/d,H=Y[0]*Z*j,X=Y[1]*Z*j,K=f.getTileCoordForCoordAndZ(hn(M),W),J=f.getTileCoordExtent(K),$=ja(this.tempTransform_,[g*(J[0]-M[0])/d,g*(M[3]-J[3])/d]),Q=g*c.getGutterForProjection(i),tt=E[W];for(var et in tt){var rt=(R=tt[et]).tileCoord,nt=$[0]-(K[1]-rt[1])*H,it=Math.round(nt+H),ot=$[1]-(K[2]-rt[2])*X,at=Math.round(ot+X),st=it-(I=Math.round(nt)),ut=at-(k=Math.round(ot)),lt=p===W;if(!(C=lt&&1!==R.getAlpha(wr(this),t.time)))if(z){D.save(),q=[I,k,I+st,k,I+st,k+ut,I,k+ut];for(var ct=0,ht=z.length;ct<ht;++ct)if(p!==W&&W<G[ct]){var ft=z[ct];D.beginPath(),D.moveTo(q[0],q[1]),D.lineTo(q[2],q[3]),D.lineTo(q[4],q[5]),D.lineTo(q[6],q[7]),D.moveTo(ft[6],ft[7]),D.lineTo(ft[4],ft[5]),D.lineTo(ft[2],ft[3]),D.lineTo(ft[0],ft[1]),D.clip()}z.push(q),G.push(W)}else D.clearRect(I,k,st,ut);this.drawTileImage(R,t,I,k,st,ut,Q,lt,r.opacity),z&&!C&&D.restore(),this.renderedTiles.push(R),this.updateUsedTiles(t.usedTiles,c,R)}}return this.renderedRevision=h,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!Xr(this.renderedExtent_,M),this.renderedExtent_=M,this.renderedPixelRatio=u,this.renderedProjection=i,this.manageTilePyramid(t,c,f,u,i,m,p,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(D,t),r.extent&&D.restore(),F!==B.style.transform&&(B.style.transform=F),this.container},e.prototype.drawTileImage=function(t,e,r,n,i,o,a,s,u){var l=this.getTileImage(t);if(l){var c=wr(this),h=s?t.getAlpha(c,e.time):1,f=u*h,p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,r,n,i,o),p&&this.context.restore(),1!==h?e.animate=!0:s&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=wr(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r){var n=wr(e);n in t||(t[n]={}),t[n][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,r,n,i,o,a,s,u){var l=wr(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,h,f,p,d,m,y=t.wantedTiles[l],g=t.tileQueue;for(m=r.getMinZoom();m<=a;++m)for(h=r.getTileRangeForExtentAndZ(o,m,h),f=r.getResolution(m),p=h.minX;p<=h.maxX;++p)for(d=h.minY;d<=h.maxY;++d)a-m<=s?((c=e.getTile(m,p,d,n,i)).getState()==zo&&(y[c.getKey()]=!0,g.isKeyQueued(c.getKey())||g.enqueue([c,l,r.getTileCoordCenter(c.tileCoord),f])),void 0!==u&&u(c)):e.useTile(m,p,d,i)},e}(Uf);Wf.prototype.getLayer;var Yf=Wf,Zf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hf=function(t){function e(e){return t.call(this,e)||this}return Zf(e,t),e.prototype.createRenderer=function(){return new Yf(this)},e}(jf),Xf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kf=function(t){function e(e){var r=e||{};return t.call(this,r)||this}return Xf(e,t),e}(wu),Jf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$f=function(t){function e(e){var r=t.call(this,e)||this;return r.image_=null,r}return Jf(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,i=n.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=cn(s,ui(e.extent,n.projection))),!a[ea]&&!a[ra]&&!mn(s))if(o){var u=n.projection,l=o.getImage(s,i,r,u);l&&this.loadImage(l)&&(this.image_=l)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var r=this.image_,n=r.getExtent(),i=r.getResolution(),o=r.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,u=t.viewState,l=u.center,c=u.resolution,h=t.size,f=s*i/(c*o),p=Math.round(h[0]*s),d=Math.round(h[1]*s),m=u.rotation;if(m){var y=Math.round(Math.sqrt(p*p+d*d));p=y,d=y}Da(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,m,-p/2,-d/2),Ba(this.inversePixelTransform,this.pixelTransform);var g=mc(this.pixelTransform);this.useContainer(e,g,a.opacity);var v=this.context,_=v.canvas;_.width!=p||_.height!=d?(_.width=p,_.height=d):this.containerReused||v.clearRect(0,0,p,d);var b=!1;if(a.extent){var w=ui(a.extent,u.projection);(b=!Gr(w,t.extent)&&dn(w,t.extent))&&this.clipUnrotated(v,t,w)}var x=r.getImage(),M=Da(this.tempTransform_,p/2,d/2,f,f,0,o*(n[0]-l[0])/i,o*(l[1]-n[3])/i);this.renderedResolution=i*s/o;var S=M[4],E=M[5],O=x.width*M[0],T=x.height*M[3];if(this.preRender(v,t),O>=.5&&T>=.5){var P=a.opacity,I=void 0;1!==P&&(I=this.context.globalAlpha,this.context.globalAlpha=P),this.context.drawImage(x,0,0,+x.width,+x.height,Math.round(S),Math.round(E),Math.round(O),Math.round(T)),1!==P&&(this.context.globalAlpha=I)}return this.postRender(v,t),b&&v.restore(),g!==_.style.transform&&(_.style.transform=g),this.container},e}(Uf),Qf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tp=function(t){function e(e){return t.call(this,e)||this}return Qf(e,t),e.prototype.createRenderer=function(){return new $f(this)},e}(Kf);function ep(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function rp(t,e,r){return t+"/"+e+"/"+r}function np(t){return rp(t[0],t[1],t[2])}function ip(t){return t.split("/").map(Number)}function op(t){return(t[1]<<t[0])+t[2]}var ap=[0,0,0],sp=function(){function t(t){var e,r,n,i;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Er((e=this.resolutions_,r=!0,n=function(t,e){return e-t}||gi,e.every((function(t,i){if(0===i)return!0;var o=n(e[i-1],t);return!(o>0||r&&0===o)}))),17),!t.origins)for(var o=0,a=this.resolutions_.length-1;o<a;++o)if(i){if(this.resolutions_[o]/this.resolutions_[o+1]!==i){i=void 0;break}}else i=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Er(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0===s||this.origin_||this.origins_||(this.origin_=hn(s)),Er(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Er(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Er(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new Bf(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):s&&this.calculateTileRanges_(s)}return t.prototype.forEachTileCoord=function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,r,n){var i,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?Df(i=Math.floor(i/2),i,o=Math.floor(o/2),o,r):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],i=2*t[2];return Df(n,n+1,i,i+1,e)}var o=this.getTileCoordExtent(t,r);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,r){var n=this.getOrigin(t),i=this.getResolution(t),o=hu(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*i,s=n[0]+(e.maxX+1)*o[0]*i;return Wr(a,n[1]+e.minY*o[1]*i,s,n[1]+(e.maxY+1)*o[1]*i,r)},t.prototype.getTileRangeForExtentAndZ=function(t,e,r){var n=ap;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var i=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),Df(i,n[1],o,n[2],r)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=hu(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]},t.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=hu(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*i[0]*n,a=r[1]-(t[2]+1)*i[1]*n;return Wr(o,a,o+i[0]*n,a+i[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,r,n,i){var o=this.getZForResolution(r),a=r/this.getResolution(o),s=this.getOrigin(o),u=hu(this.getTileSize(o),this.tmpSize_),l=n?.5:0,c=n?.5:0,h=Math.floor((t-s[0])/r+l),f=Math.floor((s[1]-e)/r+c),p=a*h/u[0],d=a*f/u[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),ep(o,p,d,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,r,n,i){var o=this.getOrigin(r),a=this.getResolution(r),s=hu(this.getTileSize(r),this.tmpSize_),u=n?.5:0,l=n?.5:0,c=Math.floor((t-o[0])/a+u),h=Math.floor((o[1]-e)/a+l),f=c/s[0],p=h/s[1];return n?(f=Math.ceil(f)-1,p=Math.ceil(p)-1):(f=Math.floor(f),p=Math.floor(p)),ep(r,f,p,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return ar(_i(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r},t}(),up=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var lp=function(t){function e(e){var r=t.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener(to(r.geometryName_),r.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;r.setGeometry(n)}else{var i=e;r.setProperties(i)}return r}return up(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(mi(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=pi(t,Li,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(Er("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(to(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(to(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(eo);function cp(t,e,r,n){for(var i=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=r.length;a<s;++a){var u=r[a];o=Hr(t,e,u[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}function hp(t,e,r,n,i,o){var a=NaN,s=NaN,u=(r-e)/n;if(1===u)a=t[e],s=t[e+1];else if(2==u)a=(1-i)*t[e]+i*t[e+n],s=(1-i)*t[e+1]+i*t[e+n+1];else if(0!==u){for(var l=t[e],c=t[e+1],h=0,f=[0],p=e+n;p<r;p+=n){var d=t[p],m=t[p+1];h+=Math.sqrt((d-l)*(d-l)+(m-c)*(m-c)),f.push(h),l=d,c=m}var y=i*h,g=function(t,e,r){for(var n,i,o=r||gi,a=0,s=t.length,u=!1;a<s;)(i=+o(t[n=a+(s-a>>1)],e))<0?a=n+1:(s=n,u=!i);return u?a:~a}(f,y);if(g<0){var v=(y-f[-g-2])/(f[-g-1]-f[-g-2]),_=e+(-g-2)*n;a=pr(t[_],t[_+n],v),s=pr(t[_+1],t[_+n+1],v)}else a=t[e+g*n],s=t[e+g*n+1]}return o?(o[0]=a,o[1]=s,o):[a,s]}function fp(t,e,r,n,i,o){if(r==e)return null;var a;if(i<t[e+n-1])return o?((a=t.slice(e,e+n))[n-1]=i,a):null;if(t[r-1]<i)return o?((a=t.slice(r-n,r))[n-1]=i,a):null;if(i==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,u=r/n;s<u;){var l=s+u>>1;i<t[(l+1)*n-1]?u=l:s=l+1}var c=t[s*n-1];if(i==c)return t.slice((s-1)*n,(s-1)*n+n);var h=(i-c)/(t[(s+1)*n-1]-c);a=[];for(var f=0;f<n-1;++f)a.push(pr(t[(s-1)*n+f],t[s*n+f],h));return a.push(i),a}var pp=[1,0,0,1,0,0],dp=function(){function t(t,e,r,n,i){this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===dr.POINT?Zr(this.flatCoordinates_):Hr(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=an(this.getExtent());this.flatInteriorPoints_=vs(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=cp(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=_s(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=hp(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,i=r.length;n<i;++n){var o=r[n],a=hp(t,e,o,2,.5);wi(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var r=(t=Un(t)).getExtent(),n=t.getWorldExtent(),i=ln(n)/ln(r);Da(pp,n[0],n[3],i,-i,0,0,0),Ia(this.flatCoordinates_,0,this.flatCoordinates_.length,2,pp,this.flatCoordinates_)},t}();dp.prototype.getEnds=function(){return this.ends_},dp.prototype.getEndss=dp.prototype.getEnds,dp.prototype.getFlatCoordinates=dp.prototype.getOrientedFlatCoordinates;var mp=dp;function yp(t,e,r,n){for(var i=t[e],o=t[e+1],a=0,s=e+n;s<r;s+=n){var u=t[s],l=t[s+1];a+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return a}var gp=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vp=function(t){function e(e,r){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return gp(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?wi(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Br(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ka(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.forEachSegment=function(t){return bs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=Ta&&this.layout!=Pa)return null;var r=void 0!==e&&e;return fp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return hp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return yp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=as(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Ea)},e.prototype.getType=function(){return dr.LINE_STRING},e.prototype.intersectsExtent=function(t){return ws(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ya),_p=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bp=function(t){function e(e,r){var n=t.call(this)||this;return r&&!Array.isArray(e[0])?n.setFlatCoordinates(r,e):n.setCoordinates(e,r),n}return _p(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?wi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){if(n<Br(this.getExtent(),t,e))return n;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var u=lr(t,e,i[a],i[a+1]);if(u<n){n=u;for(var l=0;l<o;++l)r[l]=i[a+l];r.length=o}}return n},e.prototype.getCoordinates=function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new ds(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],i=0,o=t.length;i<o;i+=r){var a=new ds(t.slice(i,i+r),e);n.push(a)}return n},e.prototype.getType=function(){return dr.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,i=e.length;n<i;n+=r){if(qr(t,e[n],e[n+1]))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ya),wp=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xp=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,r);else if(void 0!==r&&n)i.setFlatCoordinates(r,e),i.ends_=n;else{for(var o=i.getLayout(),a=e,s=[],u=[],l=0,c=a.length;l<c;++l){var h=a[l];0===l&&(o=h.getLayout()),wi(s,h.getFlatCoordinates()),u.push(s.length)}i.setFlatCoordinates(o,s),i.ends_=u}return i}return wp(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?wi(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<Br(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ja(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qa(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=Ta&&this.layout!=Pa||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,i=void 0!==r&&r;return function(t,e,r,n,i,o,a){if(a)return fp(t,e,r[r.length-1],n,i,o);var s;if(i<t[n-1])return o?((s=t.slice(0,n))[n-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-n))[n-1]=i,s):null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(e!=c){if(i<t[e+n-1])return null;if(i<=t[c-1])return fp(t,e,c,n,i,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,i)},e.prototype.getCoordinates=function(){return is(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new vp(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],u=new vp(t.slice(i,s),r);n.push(u),i=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var s=n[o];wi(t,hp(e,r,s,i,.5)),r=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=ss(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,Ea,n)},e.prototype.getType=function(){return dr.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){if(ws(t,e,r[o],n,i))return!0;e=r[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=rs(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Ya),Mp=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sp=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=i.getLayout(),a=e,s=[],u=[],l=0,c=a.length;l<c;++l){var h=a[l];0===l&&(o=h.getLayout());for(var f=s.length,p=h.getEnds(),d=0,m=p.length;d<m;++d)p[d]+=f;wi(s,h.getFlatCoordinates()),u.push(p)}r=o,e=s,n=u}return void 0!==r&&n?(i.setFlatCoordinates(r,e),i.endss_=n):i.setCoordinates(e,r),i}return Mp(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;wi(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,i=(e=t.getEnds().slice()).length;n<i;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,r)},e.prototype.closestPointXY=function(t,e,r,n){return n<Br(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Ja(t,e,s,n,i),e=s[s.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,r,n,i,o,a,s,u,l,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];l=Qa(t,e,d,n,i,o,a,s,u,l,h),e=d[d.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return function(t,e,r,n,i,o){if(0===r.length)return!1;for(var a=0,s=r.length;a<s;++a){var u=r[a];if(gs(t,e,u,n,i,o))return!0;e=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=Ha(t,e,s,n),e=s[s.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Ts(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,os(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=cp(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=_s(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new bp(this.getFlatInteriorPoints().slice(),Ta)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(!Es(t,e,s,n,i))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ts(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=function(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u],h=[];a=cs(t,e,c,n,i,o,a,h),s.push(h),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,Ea,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new ks(this.flatCoordinates.slice(e,i),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o].slice(),u=s[s.length-1];if(0!==i)for(var l=0,c=s.length;l<c;++l)s[l]-=i;var h=new ks(e.slice(i,u),t,s);n.push(h),i=u}return n},e.prototype.getType=function(){return dr.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(xs(t,e,s,n,i))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=function(t,e,r,n,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var l=rs(t,e,r[s],n,o[a]);o[a++]=l,e=l[l.length-1]}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(Ya),Ep=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Op(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}var Tp=function(t){function e(e){var r=t.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return Ep(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(mi),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(pi(this.geometries_[t],Li,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,r,n){if(n<Br(this.getExtent(),t,e))return n;for(var i=this.geometries_,o=0,a=i.length;o<a;++o)n=i[o].closestPointXY(t,e,r,n);return n},e.prototype.containsXY=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Yr(t);for(var e=this.geometries_,r=0,n=e.length;r<n;++r)Kr(t,e[r].getExtent());return t},e.prototype.getGeometries=function(){return Op(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],n=this.geometries_,i=!1,o=0,a=n.length;o<a;++o){var s=n[o],u=s.getSimplifiedGeometry(t);r.push(u),u!==s&&(i=!0)}if(i){var l=new e(null);return l.setGeometriesArray(r),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return dr.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,r){var n=r;n||(n=an(this.getExtent()));for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Op(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(Ua),Pp=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ip=function(t){function e(e,r,n){var i=t.call(this)||this;if(void 0!==n&&void 0===r)i.setFlatCoordinates(n,e);else{var o=r||0;i.setCenterAndRadius(e,o,n)}return i}return Pp(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<n){if(0===s)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var l=this.getRadius()/Math.sqrt(s);r[0]=i[0]+l*o,r[1]=i[1]+l*a;for(u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return Wr(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return dr.CIRCLE},e.prototype.intersectsExtent=function(t){if(dn(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||en(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=ts(n,0,t,this.stride);n[i++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[i++]=n[o];n.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(ka(r,0,r.length,n,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(Ra(r,0,r.length,n,t,e,r)),this.changed()},e}(Ya);Ip.prototype.transform;var kp=Ip;function Rp(t){return function(t){if(Array.isArray(t))return Lp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Lp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Cp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ap(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Np(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ap(Object(r),!0).forEach((function(e){jp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ap(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Fp=function(t,e){var r=Jn(e,"EPSG:4326"),n=[],i={};return t.forEach((function(e){var o=[];if(Array.isArray(e.geometry.coordinates[0])&&t.length>1)e.geometry.coordinates.forEach((function(t){if(!Number.isFinite(t[0])&&Array.isArray(t))o.push(t.map((function(t){var e=[];return Number.isFinite(t[0])?e.push(r(t)):t.forEach((function(t){e.push(r(t))})),e}))),i=Np(Np({},e),{},{geometry:{type:e.geometry.type,coordinates:o}});else{var n=r(t);o.push(n),i=Np(Np({},e),{},{geometry:{type:e.geometry.type,coordinates:o}})}})),n.push(i);else if(3===e.geometry.coordinates.length)e.geometry.coordinates.pop(),i=Np(Np({},e),{},{geometry:{type:e.geometry.type,coordinates:r(e.geometry.coordinates)}}),n.push(i);else if(1===t.length)if(e.geometry.coordinates[0].length>2){var a=e.geometry.coordinates[0].map((function(t){return r(t)}));i=Np(Np({},e),{},{geometry:{type:e.geometry.type,coordinates:a}}),n.push(i)}else i=Np(Np({},e),{},{geometry:{type:e.geometry.type,coordinates:r(e.geometry.coordinates[0])}}),n.push(i);else if(Number.isFinite(e.geometry.coordinates[0])){var s=r(e.geometry.coordinates);i=Np(Np({},e),{},{geometry:{type:e.geometry.type,coordinates:s}}),n.push(i)}})),n},Dp=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"generateResolutions",value:function(t,e,r,n){var i,o,a,s=[];bz(e)&&(i=t.getExtent());var u=pn(i)/256;bz(r)&&(o=0),bz(n)&&(a=20);for(var l=a-o,c=0;c<l;c+=1)s[c]=u/Math.pow(2,c);return s}},{key:"addOverlayImage",value:function(t,e){e.getMapImpl().updateSize();var r=e.getMapImpl().getSize(),n=t.screenXY,i=t.screenXUnits,o=t.screenYUnits,a=t.overlayXY,s=t.overlayXUnits,u=t.overlayYUnits,l=t.size,c=t.src,h=document.createElement("img");h.src=c,h.style.width="".concat(l[0],"px"),h.style.height="".concat(l[1],"px");var f=a[0];"fraction"===s&&(f*=l[0]);var p=a[1];"fraction"===u&&(p=l[1]-p*l[1]),h.style.position="absolute";var d=n[0];"fraction"===i&&(d=d*r[0]-f);var m=n[1];return"fraction"===o&&(m=r[1]-m*r[1]-p),h.style.top="".concat(m,"px"),h.style.left="".concat(d,"px"),e.getMapImpl().getOverlayContainerStopEvent().appendChild(h),h}},{key:"getExtentHeight",value:function(t){return t[3]-t[1]}},{key:"getExtentWidth",value:function(t){return t[2]-t[0]}},{key:"getCentroid",value:function(e){var r,n,i,o,a;if(bz(e))r=null;else if(e instanceof mp)r=e;else switch(e.getType()){case"Point":r=e.getCoordinates();break;case"LineString":case"LinearRing":r=(n=e.getCoordinates())[i=Math.floor(n.length/2)];break;case"Polygon":r=t.getCentroid(e.getInteriorPoint());break;case"MultiPoint":o=e.getPoints(),i=Math.floor(o.length/2),r=t.getCentroid(o[i]);break;case"MultiLineString":a=e.getLineStrings(),i=Math.floor(a.length/2),r=t.getCentroid(a[i]);break;case"MultiPolygon":o=e.getInteriorPoints(),r=t.getCentroid(o);break;case"Circle":r=e.getCenter();break;default:return null}return r}},{key:"getFeaturesExtent",value:function(t,e){var r=t.map((function(t){return t instanceof yG?t.getImpl().getOLFeature():t})),n=r.map((function(t){return t.getGeometry().getExtent().slice(0)}));if(1===n.length){var i=r[0].getGeometry();if("Point"===i.getType()){var o=function(t,e){return e/Un(t).getMetersPerUnit()}(e,1e3),a=i.getCoordinates()[0],s=i.getCoordinates()[1];n=[[a-o,s-o,a+o,s+o]]}}return 0===n.length?null:n.reduce((function(t,e){return Kr(t,e)}))}},{key:"getCentroidCoordinate",value:function(e){var r,n,i,o,a,s;return"Point"===e.getType()?r=e.getCoordinates():"LineString"===e.getType()||"LinearRing"===e.getType()?r=(n=e.getCoordinates())[i=Math.floor(n.length/2)]:"Polygon"===e.getType()?r=t.getCentroidCoordinate(e.getInteriorPoint()):"MultiPoint"===e.getType()?(o=e.getPoints(),i=Math.floor(o.length/2),r=t.getCentroidCoordinate(o[i])):"MultiLineString"===e.getType()?(a=e.getLineStrings(),i=Math.floor(a.length/2),r=t.getCentroidCoordinate(a[i])):"MultiPolygon"===e.getType()?(o=e.getInteriorPoints(),r=t.getCentroidCoordinate(o)):"Circle"===e.getType()?r=e.getCenter():"GeometryCollection"===e.getType()&&(s=e.getGeometries(),i=Math.floor(s.length/2),r=t.getCentroidCoordinate(s[i])),r}},{key:"transformExtent",value:function(t,e,r){var n=Mz(e)?Un(e):e,i=Mz(r)?Un(r):r,o=n.getExtent();return t.every((function(t,e){return e<2?t<=o[e]:t>=o[e]}))?i.getExtent():Qn(t,n,i)}},{key:"olRenderFeature2olFeature",value:function(t,e,r){var n;if(!bz(t)){var i,o=t.getId(),a=t.getProperties();if(bz(e)&&bz(e))i=this.getGeometryFromRenderFeature(t.getGeometry());else{var s=e.getExtent(),u=e.getWorldExtent();if(!bz(s)&&!bz(u)){var l=this.cloneOLRenderFeature(t);l.transform(e,r),i=this.getGeometryFromRenderFeature(l.getGeometry())}}n=new lp,bz(o)?n.setId(Pz("mapea_feature_")):n.setId(o),n.setProperties(a,!0),n.setGeometry(i)}return n}},{key:"cloneOLRenderFeature",value:function(t){var e=t.getType(),r=t.getFlatCoordinates(),n=t.getEnds(),i=t.getProperties(),o=t.getId(),a=Rp(r),s=Object.assign(i),u=Rp(n);return new mp(e,a,u,s,o)}},{key:"getGeometryFromRenderFeature",value:function(t){var e,r=t.getFlatCoordinates(),n=t.getEnds(),i=t.getEndss();switch(t.getType()){case dr.POINT:e=new ds(r);break;case dr.LINE_STRING:e=new vp(r);break;case dr.LINEAR_RING:e=new fs(r);break;case dr.POLYGON:e=new ks(r);break;case dr.MULTI_POINT:e=new bp(r);break;case dr.MULTI_LINE_STRING:e=new xp(r,void 0,n);break;case dr.MULTI_POLYGON:e=new Sp(r,void 0,i);break;case dr.GEOMETRY_COLLECTION:var o=t.getGeometries();e=new Tp(o);break;case dr.CIRCLE:var a=t.getFlatInteriorPoint();e=new kp(a);break;default:e=null}return e}},{key:"getWMTSScale",value:function(t,e){var r=Un(t.getProjection().code).getMetersPerUnit(),n=t.getMapImpl().getSize(),i=n[0],o=t.getMapImpl().getView().calculateExtent(n),a=r*(o[2]-o[0])/i*1e3/.28;return 1==!e&&(a=a>=1e3&&a<=95e4?1e3*Math.round(a/1e3):a>=95e4?1e6*Math.round(a/1e6):Math.round(a)),Math.trunc(a)}}],(r=null)&&Cp(e.prototype,r),n&&Cp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bp(t){return(Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qp(t,e){return(qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Up(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Wp(t);if(e){var i=Wp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Vp(this,r)}}function Vp(t,e){if(e&&("object"===Bp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Wp(t){return(Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qp(t,e)}(o,t);var e,r,n,i=Up(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return zp(this,o),(t=i.call(this,e)).vendorOptions_=r,t.map=null,t.ol3Layer=null,t.options=e,t.visibility=!1!==t.options.visibility,t.displayInLayerSwitcher=!1!==t.options.displayInLayerSwitcher,t.zIndex_=null,t.opacity_=t.options.opacity||1,t.legendUrl_=Fz([M.config.THEME_URL,Lf.LEGEND_DEFAULT]),t.minZoom=t.options.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=t.options.maxZoom||Number.POSITIVE_INFINITY,t}return e=o,(r=[{key:"isVisible",value:function(){return bz(this.ol3Layer)?this.visibility:this.ol3Layer.getVisible()}},{key:"isQueryable",value:function(){return!1}},{key:"inRange",value:function(){var t=!1;if(!bz(this.ol3Layer)){var e=this.map.getMapImpl().getView().getResolution(),r=this.ol3Layer.getMaxResolution();t=e>=this.ol3Layer.getMinResolution()&&e<=r}return t}},{key:"setVisible",value:function(t){this.visibility=t,bz(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"getMinZoom",value:function(){return bz(this.getOL3Layer())||(this.minZoom=this.getOL3Layer().getMinZoom()),this.minZoom}},{key:"setMinZoom",value:function(t){this.minZoom=t,bz(this.getOL3Layer())||this.getOL3Layer().setMinZoom(t)}},{key:"getMaxZoom",value:function(){return bz(this.getOL3Layer())||(this.maxZoom=this.getOL3Layer().getMaxZoom()),this.maxZoom}},{key:"setMaxZoom",value:function(t){this.maxZoom=t,bz(this.getOL3Layer())||this.getOL3Layer().setMaxZoom(t)}},{key:"getZIndex",value:function(){return bz(this.getOL3Layer())||(this.zIndex_=this.getOL3Layer().getZIndex()),this.zIndex_}},{key:"setZIndex",value:function(t){this.zIndex_=t,bz(this.getOL3Layer())||this.getOL3Layer().setZIndex(t)}},{key:"getOpacity",value:function(){return bz(this.getOL3Layer())||(this.opacity_=this.getOL3Layer().getOpacity()),this.opacity_}},{key:"setOpacity",value:function(t){var e=t;!bz(t)&&Mz(t)&&(e=Number(t)),this.opacity_=e,bz(this.getOL3Layer())||this.getOL3Layer().setOpacity(e)}},{key:"getOL3Layer",value:function(){return this.ol3Layer}},{key:"setOL3Layer",value:function(t){var e=this.map.getMapImpl();return e.removeLayer(this.ol3Layer),this.ol3Layer=t,e.addLayer(t),this}},{key:"getMap",value:function(){return this.map}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}},{key:"getNumZoomLevels",value:function(){return 20}},{key:"unselectFeatures",value:function(t,e,r){}},{key:"selectFeatures",value:function(t,e,r){}}])&&Gp(e.prototype,r),n&&Gp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Kc);function Zp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hp=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.capabilities_=e,this.projection_=n,this.serviceUrl_=r}var e,r,n;return e=t,(r=[{key:"capabilities",get:function(){return this.capabilities_}},{key:"projection",get:function(){return this.projection_}},{key:"serviceUrl",get:function(){return this.serviceUrl_}},{key:"getLayerExtent",value:function(t){var e=this.capabilities_.Capability.Layer,r=this.getExtentRecursive_(e,t);return this.transformExtent(r)}},{key:"getExtentRecursive_",value:function(t,e){var r,n=this,i=null;if(!bz(t))if(_z(t))for(r=0;r<t.length&&null===i;r+=1)i=this.getExtentRecursive_(t[r],e);else if(xz(t))if(bz(e)||t.Name===e)if(bz(t.BoundingBox)){if(!bz(t.LatLonBoundingBox)){var o=t.LatLonBoundingBox[0];this.capabilitiesProj="EPSG:4326";var a=Un("EPSG:4326"),s=Un(this.projection_.code);i=Dp.transformExtent(o.extent,a,s)}}else{var u=t.BoundingBox.find((function(t){return t.crs===n.projection_.code}));if(bz(u)){var l=t.BoundingBox[0];this.capabilitiesProj=l.crs;var c=Un(l.crs),h=Un(this.projection_.code);i=Dp.transformExtent(l.extent,c,h)}else this.capabilitiesProj=u.crs,i=u.extent}else yz(t.Layer)||(i=this.getExtentRecursive_(t.Layer,e));return i}},{key:"getLayers",value:function(){var t=this.capabilities_.Capability.Layer;return this.getLayersRecursive_(t)}},{key:"getLayersRecursive_",value:function(t){var e=this,r=[];if(bz(t.Layer))if(_z(t))t.forEach((function(t){r=r.concat(e.getLayersRecursive_(t))}));else{var n="image/png";try{var i=this.capabilities_.Capability.Request.GetMap.Format;1===i.length&&(n=i[0])}catch(t){}r.push(new lg({url:this.serviceUrl_,name:t.Name,legend:bz(t.Title)?"":t.Title},{format:n},{capabilitiesMetadata:{abstract:bz(t.Abstract)?"":t.Abstract,attribution:bz(t.Attribution)?"":t.Attribution,metadataURL:bz(t.MetadataURL)?"":t.MetadataURL,style:bz(t.Style)?"":t.Style}}))}else r=this.getLayersRecursive_(t.Layer);return r}},{key:"transformExtent",value:function(t){var e=t;if("1.3.0"===this.capabilities_.version&&Mz(this.capabilitiesProj)){var r=Un(this.capabilitiesProj).getAxisOrientation();Array.isArray(e)&&"ne"===r.substr(0,2)&&(e=[t[1],t[0],t[3],t[2]])}return e}}])&&Zp(e.prototype,r),n&&Zp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xp(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var Kp="http://www.w3.org/2001/XMLSchema-instance";function Jp(t,e){return vd().createElementNS(t,e)}function $p(t,e){return function t(e,r,n){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)r?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else{var i=void 0;for(i=e.firstChild;i;i=i.nextSibling)t(i,r,n)}return n}(t,e,[]).join("")}function Qp(t){return"documentElement"in t}function td(t){return(new DOMParser).parseFromString(t,"application/xml")}function ed(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&wi(n[n.length-1],i)}}function rd(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&n[n.length-1].push(i)}}function nd(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&(n[n.length-1]=i)}}function id(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:n.localName,u=void 0;s in a?u=a[s]:(u=[],a[s]=u),u.push(o)}}}function od(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);void 0!==o&&(i[i.length-1][void 0!==e?e:n.localName]=o)}}function ad(t,e){return function(r,n,i){t.call(void 0!==e?e:this,r,n,i),i[i.length-1].node.appendChild(r)}}function sd(t,e){var r,n;return function(e,i,o){if(void 0===r){r={};var a={};a[e.localName]=t,r[e.namespaceURI]=a,n=ud(e.localName)}dd(r,n,i,o)}}function ud(t,e){var r=t;return function(t,n,i){var o=n[n.length-1].node,a=r;return void 0===a&&(a=i),Jp(void 0!==e?e:o.namespaceURI,a)}}var ld=ud();function cd(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=t[e[i]];return n}function hd(t,e,r){var n,i,o=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)o[t[n]]=e;return o}function fd(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(n,i,r)}}}function pd(t,e,r,n,i){return n.push(t),fd(e,r,n,i),n.pop()}function dd(t,e,r,n,i,o){for(var a,s,u=(void 0!==i?i:r).length,l=0;l<u;++l)void 0!==(a=r[l])&&void 0!==(s=e.call(void 0!==o?o:this,a,n,void 0!==i?i[l]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,n)}function md(t,e,r,n,i,o,a){return i.push(t),dd(e,r,n,i,o,a),i.pop()}var yd=void 0;var gd=void 0;function vd(){return void 0===gd&&"undefined"!=typeof document&&(gd=document.implementation.createDocument("","",null)),gd}var _d=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=td(t);return this.readFromDocument(e)}return Qp(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){},t.prototype.readFromNode=function(t){},t}();function bd(t){return wd($p(t,!1))}function wd(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function xd(t){var e=$p(t,!1),r=Date.parse(e);return isNaN(r)?void 0:r/1e3}function Md(t){return Sd($p(t,!1))}function Sd(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function Ed(t){return Od($p(t,!1))}function Od(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function Td(t){return $p(t,!1).trim()}function Pd(t,e){Rd(t,e?"1":"0")}function Id(t,e){var r=e.toPrecision();t.appendChild(vd().createTextNode(r))}function kd(t,e){var r=e.toString();t.appendChild(vd().createTextNode(r))}function Rd(t,e){t.appendChild(vd().createTextNode(e))}var Ld=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cd=[null,"http://www.opengis.net/wms"],Ad=hd(Cd,{Service:od((function(t,e){return pd({},Fd,t,e)})),Capability:od((function(t,e){return pd({},Nd,t,e)}))}),Nd=hd(Cd,{Request:od((function(t,e){return pd({},Wd,t,e)})),Exception:od((function(t,e){return pd([],Gd,t,e)})),Layer:od((function(t,e){return pd({},qd,t,e)}))}),jd=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return Ld(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=pd({version:this.version},Ad,t,[]);return e||null},e}(_d),Fd=hd(Cd,{Name:od(Td),Title:od(Td),Abstract:od(Td),KeywordList:od(em),OnlineResource:od(Xp),ContactInformation:od((function(t,e){return pd({},Dd,t,e)})),Fees:od(Td),AccessConstraints:od(Td),LayerLimit:od(Ed),MaxWidth:od(Ed),MaxHeight:od(Ed)}),Dd=hd(Cd,{ContactPersonPrimary:od((function(t,e){return pd({},Bd,t,e)})),ContactPosition:od(Td),ContactAddress:od((function(t,e){return pd({},zd,t,e)})),ContactVoiceTelephone:od(Td),ContactFacsimileTelephone:od(Td),ContactElectronicMailAddress:od(Td)}),Bd=hd(Cd,{ContactPerson:od(Td),ContactOrganization:od(Td)}),zd=hd(Cd,{AddressType:od(Td),Address:od(Td),City:od(Td),StateOrProvince:od(Td),PostCode:od(Td),Country:od(Td)}),Gd=hd(Cd,{Format:rd(Td)}),qd=hd(Cd,{Name:od(Td),Title:od(Td),Abstract:od(Td),KeywordList:od(em),CRS:id(Td),EX_GeographicBoundingBox:od((function(t,e){var r=pd({},Vd,t,e);if(!r)return;var n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,a=r.northBoundLatitude;if(void 0===n||void 0===i||void 0===o||void 0===a)return;return[n,i,o,a]})),BoundingBox:id((function(t,e){var r=[Sd(t.getAttribute("minx")),Sd(t.getAttribute("miny")),Sd(t.getAttribute("maxx")),Sd(t.getAttribute("maxy"))],n=[Sd(t.getAttribute("resx")),Sd(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:r,res:n}})),Dimension:id((function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:wd(t.getAttribute("multipleValues")),nearestValue:wd(t.getAttribute("nearestValue")),current:wd(t.getAttribute("current")),values:Td(t)}})),Attribution:od((function(t,e){return pd({},Ud,t,e)})),AuthorityURL:id((function(t,e){var r=$d(t,e);if(r)return r.name=t.getAttribute("name"),r;return})),Identifier:id(Td),MetadataURL:id((function(t,e){var r=$d(t,e);if(r)return r.type=t.getAttribute("type"),r;return})),DataURL:id($d),FeatureListURL:id($d),Style:id((function(t,e){return pd({},Xd,t,e)})),MinScaleDenominator:od(Md),MaxScaleDenominator:od(Md),Layer:id((function(t,e){var r=e[e.length-1],n=pd({},qd,t,e);if(!n)return;var i=wd(t.getAttribute("queryable"));void 0===i&&(i=r.queryable);n.queryable=void 0!==i&&i;var o=Od(t.getAttribute("cascaded"));void 0===o&&(o=r.cascaded);n.cascaded=o;var a=wd(t.getAttribute("opaque"));void 0===a&&(a=r.opaque);n.opaque=void 0!==a&&a;var s=wd(t.getAttribute("noSubsets"));void 0===s&&(s=r.noSubsets);n.noSubsets=void 0!==s&&s;var u=Sd(t.getAttribute("fixedWidth"));u||(u=r.fixedWidth);n.fixedWidth=u;var l=Sd(t.getAttribute("fixedHeight"));l||(l=r.fixedHeight);n.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach((function(t){if(t in r){var e=n[t]||[];n[t]=e.concat(r[t])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in n)){var e=r[t];n[t]=e}})),n}))}),Ud=hd(Cd,{Title:od(Td),OnlineResource:od(Xp),LogoURL:od(tm)}),Vd=hd(Cd,{westBoundLongitude:od(Md),eastBoundLongitude:od(Md),southBoundLatitude:od(Md),northBoundLatitude:od(Md)}),Wd=hd(Cd,{GetCapabilities:od(Qd),GetMap:od(Qd),GetFeatureInfo:od(Qd)}),Yd=hd(Cd,{Format:id(Td),DCPType:id((function(t,e){return pd({},Zd,t,e)}))}),Zd=hd(Cd,{HTTP:od((function(t,e){return pd({},Hd,t,e)}))}),Hd=hd(Cd,{Get:od($d),Post:od($d)}),Xd=hd(Cd,{Name:od(Td),Title:od(Td),Abstract:od(Td),LegendURL:id(tm),StyleSheetURL:od($d),StyleURL:od($d)}),Kd=hd(Cd,{Format:od(Td),OnlineResource:od(Xp)}),Jd=hd(Cd,{Keyword:rd(Td)});function $d(t,e){return pd({},Kd,t,e)}function Qd(t,e){return pd({},Yd,t,e)}function tm(t,e){var r=$d(t,e);if(r){var n=[Od(t.getAttribute("width")),Od(t.getAttribute("height"))];return r.size=n,r}}function em(t,e){return pd([],Jd,t,e)}var rm=jd;function nm(t){return(nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function im(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function om(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function am(t,e){return(am=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=lm(t);if(e){var i=lm(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return um(this,r)}}function um(t,e){if(e&&("object"===nm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function lm(t){return(lm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cm=["SRS","BoundingBox","ScaleHint","LatLonBoundingBox"],hm=function(t,e){null!==t&&cm.forEach((function(r){var n,i;(n=e,i=r,Array.prototype.filter.call(n.children,(function(t){return t.tagName===i})).length>0)||Array.prototype.filter.call(t.children,(function(t){return t.tagName===r})).forEach((function(t){var r=t.cloneNode(!0);e.appendChild(r)}))}))},fm=[function t(e,r){var n=e,i=r[n.Name];if(bz(i))_z(n.Layer)&&n.Layer.forEach((function(e){return t(e,r)}));else{var o=i.querySelector("SRS");if(null!==o){var a=o.innerHTML;n.SRS=[a]}}},function t(e,r){var n=r[e.Name];if(bz(n))_z(e.Layer)&&e.Layer.forEach((function(e){return t(e,r)}));else if(_z(e.BoundingBox)){var i=Array.prototype.map.call(n.children,(function(t){return t}));i=i.filter((function(t){return["BoundingBox"].includes(t.tagName)})),e.BoundingBox.forEach((function(t,e){var r=t;if(null===r.crs){var n=i[e];if(!bz(n)){var o=n.getAttribute("SRS");bz(o)||(r.crs=o)}}}))}},function t(e,r){var n=e,i=r[e.Name];if(bz(i))_z(e.Layer)&&e.Layer.forEach((function(e){return t(e,r)}));else{n.ScaleHint=[];var o=Array.prototype.map.call(i.children,(function(t){return t}));(o=o.filter((function(t){return"ScaleHint"===t.tagName}))).forEach((function(t){var e={minScale:parseFloat(t.getAttribute("min")),maxScale:parseFloat(t.getAttribute("max"))};n.ScaleHint.push(e)}))}},function t(e,r){var n=e,i=r[e.Name];if(bz(i))_z(n.Layer)&&n.Layer.forEach((function(e){return t(e,r)}));else{n.LatLonBoundingBox=[];var o=Array.prototype.map.call(i.children,(function(t){return t}));(o=o.filter((function(t){return"LatLonBoundingBox"===t.tagName}))).forEach((function(t){var e={crs:"EPSG:4326",extent:[parseFloat(t.getAttribute("minx")),parseFloat(t.getAttribute("miny")),parseFloat(t.getAttribute("maxx")),parseFloat(t.getAttribute("maxy"))]};n.LatLonBoundingBox.push(e)}))}},function(t,e){var r=t;bz(r.BoundingBox)&&!bz(r.LatLonBoundingBox)&&(r.BoundingBox=r.LatLonBoundingBox)},function(t,e){var r=t;bz(r.MaxScaleDenominator)&&!bz(r.ScaleHint)&&(r.MaxScaleDenominator=r.ScaleHint[0].maxScale)},function(t,e){var r=t;bz(r.MinScaleDenominator)&&!bz(r.ScaleHint)&&(r.MinScaleDenominator=r.ScaleHint[0].minScale)}],pm=function t(e,r){_z(e)?e.forEach((function(e){t(e,r)})):xz(e)&&(!function(t,e){fm.forEach((function(r){r(t,e)}))}(e,r),t(e.Layer,r))},dm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&am(t,e)}(o,t);var e,r,n,i=sm(o);function o(){return im(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"customRead",value:function(t){var e=this.read(t),r=function t(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=n,a=e;if(!0===r&&null!==e&&(a=e.querySelector("Layer")),null!==a){hm(i,a);var s=a.querySelector("Name").innerHTML,u=a.children;Array.prototype.forEach.call(u,(function(e){"Layer"===e.tagName&&(o=t(e,!1,o,a))})),o[s]=a}return o}(t),n=e.Capability;return bz(n)||bz(n.Layer)||pm(n.Layer,r),e}}])&&om(e.prototype,r),n&&om(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(rm);function mm(t,e,r,n){var i=$n(r,e,t),o=Vn(e,n,r),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var u=t.getExtent();if(!u||zr(u,i)){var l=Vn(t,o,i)/o;isFinite(l)&&l>0&&(o/=l)}return o}function ym(t,e,r,n){var i=r-t,o=n-e,a=Math.sqrt(i*i+o*o);return[Math.round(r+i/a),Math.round(n+o/a)]}function gm(t,e,r,n,i,o,a,s,u,l,c){var h=Bs(Math.round(r*t),Math.round(r*e));if(0===u.length)return h.canvas;h.scale(r,r);var f=[1/0,1/0,-1/0,-1/0];u.forEach((function(t,e,r){Kr(f,t.extent)}));var p=pn(f),d=ln(f),m=Bs(Math.round(r*p/n),Math.round(r*d/n)),y=r/n;u.forEach((function(t,e,r){var n=t.extent[0]-f[0],i=-(t.extent[3]-f[3]),o=pn(t.extent),a=ln(t.extent);m.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*y,i*y,o*y,a*y)}));var g=hn(a);return s.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,u=a[0][0],l=a[0][1],c=a[1][0],p=a[1][1],d=a[2][0],y=a[2][1],v=(s[0][0]-g[0])/o,_=-(s[0][1]-g[1])/o,b=(s[1][0]-g[0])/o,w=-(s[1][1]-g[1])/o,x=(s[2][0]-g[0])/o,M=-(s[2][1]-g[1])/o,S=u,E=l;u=0,l=0;var O=function(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var a=Math.abs(t[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}([[c-=S,p-=E,0,0,b-v],[d-=S,y-=E,0,0,x-v],[0,0,c,p,w-_],[0,0,d,y,M-_]]);if(O){h.save(),h.beginPath();var T=(v+b+x)/3,P=(_+w+M)/3,I=ym(T,P,v,_),k=ym(T,P,b,w),R=ym(T,P,x,M);h.moveTo(k[0],k[1]),h.lineTo(I[0],I[1]),h.lineTo(R[0],R[1]),h.clip(),h.transform(O[0],O[2],O[1],O[3],v,_),h.translate(f[0]-S,f[3]-E),h.scale(n/r,-n/r),h.drawImage(m.canvas,0,0),h.restore()}})),c&&(h.save(),h.strokeStyle="black",h.lineWidth=1,s.getTriangles().forEach((function(t,e,r){var n=t.target,i=(n[0][0]-g[0])/o,a=-(n[0][1]-g[1])/o,s=(n[1][0]-g[0])/o,u=-(n[1][1]-g[1])/o,l=(n[2][0]-g[0])/o,c=-(n[2][1]-g[1])/o;h.beginPath(),h.moveTo(s,u),h.lineTo(i,a),h.lineTo(l,c),h.closePath(),h.stroke()})),h.restore()),h.canvas}var vm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_m=function(t){function e(e,r,n){var i=t.call(this)||this,o=n||{};return i.tileCoord=e,i.state=r,i.interimTile=null,i.hifi=!0,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i}return vm(e,t),e.prototype.changed=function(){this.dispatchEvent(Li)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==qo)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==qo){t.interimTile=null;break}t.getState()==Go?e=t:t.getState()==zo?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==Uo&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){_r()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:ba(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Ri),bm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wm=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=r,o.state=i,o}return bm(e,t),e.prototype.changed=function(){this.dispatchEvent(Li)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return _r()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){_r()},e}(Ri),xm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Mm(t,e,r){var n=t;if(n.src&&go){var i=n.decode(),o=!0;return i.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():r())})),function(){o=!1}}var a=[di(n,Ui,e),di(n,Ci,r)];return function(){a.forEach(mi)}}var Sm=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,n,vc)||this;return s.src_=i,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=vc,s.imageLoadFunction_=a,s}return xm(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=wc,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=ln(this.extent)/this.image_.height),this.state=bc,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=vc&&this.state!=wc||(this.state=_c,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Mm(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(wm),Em=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var Om=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=i,s.src_=n,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return Em(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=Uo,this.unlistenImage_(),this.image_=((t=Bs(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=qo:this.state=Vo,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Uo&&(this.state=zo,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==zo&&(this.state=Go,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Mm(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(_m),Tm=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var r=this.entries_[t];return Er(void 0!==r,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},t.prototype.remove=function(t){var e=this.entries_[t];return Er(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Er(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}(),Pm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Im=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pm(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=ip(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(np(e.tileCoord)),e.release())}.bind(this))}},e}(Tm),km=function(){function t(t,e,r,n,i,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=Jn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&pn(n)==pn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?pn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?pn(this.targetProj_.getExtent()):null;var u=hn(r),l=fn(r),c=on(r),h=nn(r),f=this.transformInv_(u),p=this.transformInv_(l),d=this.transformInv_(c),m=this.transformInv_(h),y=10+(o?Math.max(0,Math.ceil(Math.log2(rn(r)/(o*o*256*256)))):0);if(this.addQuad_(u,l,c,h,f,p,d,m,y),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach((function(t,e,r){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,n,i,o,a,s,u){var l=jr([i,o,a,s]),c=this.sourceWorldWidth_?pn(l)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1,p=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)p=pn(jr([t,e,r,n]))/this.targetWorldWidth_>.25||p;!f&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)}if(p||!this.maxSourceExtent_||dn(l,this.maxSourceExtent_)){if(!(p||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(u>0))return;p=!0}if(u>0){if(!p){var d=[(t[0]+r[0])/2,(t[1]+r[1])/2],m=this.transformInv_(d),y=void 0;if(f)y=(fr(i[0],h)+fr(a[0],h))/2-fr(m[0],h);else y=(i[0]+a[0])/2-m[0];var g=(i[1]+a[1])/2-m[1];p=y*y+g*g>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var v=[(e[0]+r[0])/2,(e[1]+r[1])/2],_=this.transformInv_(v),b=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(b);this.addQuad_(t,e,v,b,i,o,_,w,u-1),this.addQuad_(b,v,r,n,w,_,a,s,u-1)}else{var x=[(t[0]+e[0])/2,(t[1]+e[1])/2],M=this.transformInv_(x),S=[(r[0]+n[0])/2,(r[1]+n[1])/2],E=this.transformInv_(S);this.addQuad_(t,x,S,n,i,M,E,s,u-1),this.addQuad_(x,e,r,S,M,o,a,E,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,r,n,i,a,s),this.addTriangle_(t,e,r,i,o,a)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,r,n){var i=e.source;Jr(t,i[0]),Jr(t,i[1]),Jr(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Rm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lm=function(t){function e(e,r,n,i,o,a,s,u,l,c,h){var f=t.call(this,o,zo)||this;f.renderEdges_=void 0!==h&&h,f.pixelRatio_=s,f.gutter_=u,f.canvas_=null,f.sourceTileGrid_=r,f.targetTileGrid_=i,f.wrappedTileCoord_=a||o,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var p=i.getTileCoordExtent(f.wrappedTileCoord_),d=f.targetTileGrid_.getExtent(),m=f.sourceTileGrid_.getExtent(),y=d?cn(p,d):p;if(0===rn(y))return f.state=Vo,f;var g=e.getExtent();g&&(m=m?cn(m,g):g);var v=i.getResolution(f.wrappedTileCoord_[0]),_=mm(e,n,an(y),v);if(!isFinite(_)||_<=0)return f.state=Vo,f;var b=void 0!==c?c:.5;if(f.triangulation_=new km(e,n,y,m,_*b,v),0===f.triangulation_.getTriangles().length)return f.state=Vo,f;f.sourceZ_=r.getZForResolution(_);var w=f.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(w[1]=ar(w[1],m[1],m[3]),w[3]=ar(w[3],m[1],m[3])):w=cn(w,m)),rn(w)){for(var x=r.getTileRangeForExtentAndZ(w,f.sourceZ_),M=x.minX;M<=x.maxX;M++)for(var S=x.minY;S<=x.maxY;S++){var E=l(f.sourceZ_,M,S,s);E&&f.sourceTiles_.push(E)}0===f.sourceTiles_.length&&(f.state=Vo)}else f.state=Vo;return f}return Rm(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,n){e&&e.getState()==qo&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=Uo;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n="number"==typeof r?r:r[0],i="number"==typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=gm(n,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=qo}this.changed()},e.prototype.load=function(){if(this.state==zo){this.state=Go,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,n){var i=e.getState();if(i==zo||i==Go){t++;var o=pi(e,Li,(function(r){var n=e.getState();n!=qo&&n!=Uo&&n!=Vo||(mi(o),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,r){t.getState()==zo&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(mi),this.sourcesListenerKeys_=null},e}(_m);function Cm(t,e){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){return a?t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],r=e.getFullTileRange(t);return Er(r,55),(r.getHeight()-a[2]-1).toString()})):void 0}}function Am(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=Cm(t[i],e);return Nm(n)}function Nm(t){return 1===t.length?t[0]:function(e,r,n){if(e){var i=fr(op(e),t.length);return t[i](e,r,n)}}}function jm(t,e,r){}function Fm(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}var Dm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Bm(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var zm=function(t){function e(e){var r=t.call(this)||this;return r.projection_=Un(e.projection),r.attributions_=Bm(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:iu,r.wrapX_=void 0!==e.wrapX&&e.wrapX,r}return Dm(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return _r()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Bm(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(eo);function Gm(t){var e=t.getDefaultTileGrid();return e||(e=Vm(t),t.setDefaultTileGrid(e)),e}function qm(t){var e=t||{},r=e.extent||Un("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Um(r,e.maxZoom,e.tileSize,e.maxResolution)};return new sp(n)}function Um(t,e,r,n){for(var i=void 0!==e?e:42,o=ln(t),a=pn(t),s=hu(void 0!==r?r:256),u=n>0?n:Math.max(a/s[0],o/s[1]),l=i+1,c=new Array(l),h=0;h<l;++h)c[h]=u/Math.pow(2,h);return c}function Vm(t,e,r,n){return function(t,e,r,n){var i=void 0!==n?n:Pr,o=Um(t,e,r);return new sp({extent:t,origin:sn(t,i),resolutions:o,tileSize:r})}(Wm(t),e,r,n)}function Wm(t){var e=(t=Un(t)).getExtent();if(!e){var r=180*nr[ir.DEGREES]/t.getMetersPerUnit();e=Wr(-r,-r,r,r)}return e}var Ym=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zm=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=[256,256],i=e.tileGrid;i&&hu(i.getTileSize(i.getMinZoom()),n);var o="undefined"!=typeof screen,a=o?screen.availWidth||screen.width:1920,s=o?screen.availHeight||screen.height:1080,u=4*Math.ceil(a/n[0])*Math.ceil(s/n[1]);return r.tileCache=new Im(Math.max(u,e.cacheSize||0)),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return Ym(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,n){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,u=!0,l=r.minX;l<=r.maxX;++l)for(var c=r.minY;c<=r.maxY;++c)a=rp(e,l,c),s=!1,i.containsKey(a)&&(s=(o=i.get(a)).getState()===qo)&&(s=!1!==n(o)),s||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,r,n,i){return _r()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Gm(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Xn(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),i=this.getTilePixelRatio(e),o=hu(n.getTileSize(t),this.tmpSize);return 1==i?o:cu(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=function(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),o=Wm(r);if(zr(o,i))return e;var a=pn(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,n)}(n,t,r)),function(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,r):e.getFullTileRange(r))||o.containsXY(n,i)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,r,n){},e}(zm),Hm=function(t){function e(e,r){var n=t.call(this,e)||this;return n.tile=r,n}return Ym(e,t),e}(Ii),Xm=Zm,Km="tileloadstart",Jm="tileloadend",$m="tileloaderror",Qm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ty=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.generateTileUrlFunction_=!e.tileUrlFunction,r.tileLoadFunction=e.tileLoadFunction,r.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(r):jm,r.urls=null,e.urls?r.setUrls(e.urls):e.url&&r.setUrl(e.url),r.tileLoadingKeys_={},r}return Qm(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,n=wr(r),i=r.getState();i==Go?(this.tileLoadingKeys_[n]=!0,e=Km):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=i==Uo?$m:i==qo?Jm:void 0),null!=e&&this.dispatchEvent(new Hm(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=Fm(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Am(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,r){var n=rp(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Xm),ey=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ry(t,e){t.getImage().src=e}var ny=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ry,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:Om,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return ey(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[n];i.expireCache(i==r?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Xn(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Xn(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Xn(e,t)){var r=wr(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Gm(t)),this.tileGridForProjection[r]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Xn(e,t))return this.tileCache;var r=wr(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new Im(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,e,r,n,i,o){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=s?this.tileUrlFunction(s,n,i):void 0,l=new this.tileClass(a,void 0!==u?zo:Vo,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,l.addEventListener(Li,this.handleTileChange.bind(this)),l},e.prototype.getTile=function(t,e,r,n,i){var o=this.getProjection();if(o&&i&&!Xn(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,r],u=void 0,l=np(s);a.containsKey(l)&&(u=a.get(l));var c=this.getKey();if(u&&u.key==c)return u;var h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(i),p=this.getTileCoordForTileUrlFunction(s,i),d=new Lm(o,h,i,f,s,p,this.getTilePixelRatio(n),this.getGutter(),function(t,e,r,n){return this.getTileInternal(t,e,r,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=c,u?(d.interimTile=u,d.refreshInterimChain(),a.replace(l,d)):a.set(l,d),d}return this.getTileInternal(t,e,r,n,o||i)},e.prototype.getTileInternal=function(t,e,r,n,i){var o=null,a=rp(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var u=o;o=this.createTile_(t,e,r,n,i,s),u.getState()==zo?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,n,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var r=Un(t);if(r){var n=wr(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(ty),iy="carmentaserver",oy="geoserver",ay="mapserver",sy="qgis";function uy(t,e){var r=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))}));var n=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}var ly=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function cy(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var i=n.getResolution(t[0]),o=n.getTileCoordExtent(t,this.tmpExtent_),a=hu(n.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=lu(a,s,this.tmpSize),o=Fr(o,i*s,o)),1!=e&&(a=cu(a,e,this.tmpSize));var u={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Ln(u,this.params_),this.getRequestUrl_(t,a,o,e,r,u)}}var hy=function(t){function e(e){var r=this,n=e||{},i=n.params||{},o=!("TRANSPARENT"in i)||i.TRANSPARENT;return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!o,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:cy,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).gutter_=void 0!==n.gutter?n.gutter:0,r.params_=i,r.v13_=!0,r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return ly(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){var i=Un(r),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var s=a.getZForResolution(e,this.zDirection),u=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=u[0])){var l=a.getResolution(u[0]),c=a.getTileCoordExtent(u,this.tmpExtent_),h=hu(a.getTileSize(u[0]),this.tmpSize),f=this.gutter_;0!==f&&(h=lu(h,f,this.tmpSize),c=Fr(c,l*f,c)),o&&o!==i&&(l=mm(o,i,t,l),c=Qn(c,i,o),t=$n(t,i,o));var p={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Ln(p,this.params_,n);var d=Math.floor((t[0]-c[0])/l),m=Math.floor((c[3]-t[1])/l);return p[this.v13_?"I":"X"]=d,p[this.v13_?"J":"Y"]=m,this.getRequestUrl_(u,h,c,1,o||i,p)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i*39.37*(25.4/.28)}return Ln(r,e),uy(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case oy:var s=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case ay:o.MAP_RESOLUTION=90*n;break;case iy:case sy:o.DPI=90*n;break;default:Er(!1,52)}var u,l=i.getAxisOrientation(),c=r;if(this.v13_&&"ne"==l.substr(0,2)){var h=void 0;h=r[0],c[0]=r[1],c[1]=h,h=r[2],c[2]=r[3],c[3]=h}if(o.BBOX=c.join(","),1==a.length)u=a[0];else u=a[fr(op(t),a.length)];return uy(u,o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.updateParams=function(t){Ln(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||"1.3.0";this.v13_=sa(t,"1.3")>=0},e}(ny);function fy(t){return(fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function py(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function my(){return(my="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=yy(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function yy(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=by(t)););return t}function gy(t,e){return(gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=by(t);if(e){var i=by(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _y(this,r)}}function _y(t,e){if(e&&("object"===fy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function by(t){return(by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gy(t,e)}(o,t);var e,r,n,i=vy(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};py(this,o);var e=t;return bz(t.tileLoadFunction)&&(e.tileLoadFunction=o.tileLoadFunction),i.call(this,e)}return e=o,n=[{key:"tileLoadFunction",value:function(t,e){t.getImage().src="".concat(e,"&_= ").concat(this.revision_)}}],(r=[{key:"changed",value:function(){bz(this.tileCache)||this.tileCache.clear(),my(by(o.prototype),"changed",this).call(this)}}])&&dy(e.prototype,r),n&&dy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(hy),xy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),My=function(t){function e(e,r,n,i,o,a){var s=this,u=e.getExtent(),l=r.getExtent(),c=l?cn(n,l):n,h=mm(e,r,an(c),i),f=new km(e,r,c,u,.5*h,i),p=a(f.calculateSourceExtent(),h,o),d=p?vc:xc,m=p?p.getPixelRatio():1;return(s=t.call(this,n,i,m,d)||this).targetProj_=r,s.maxSourceExtent_=u,s.triangulation_=f,s.targetResolution_=i,s.targetExtent_=n,s.sourceImage_=p,s.sourcePixelRatio_=m,s.canvas_=null,s.sourceListenerKey_=null,s}return xy(e,t),e.prototype.disposeInternal=function(){this.state==_c&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==bc){var e=pn(this.targetExtent_)/this.targetResolution_,r=ln(this.targetExtent_)/this.targetResolution_;this.canvas_=gm(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==vc){this.state=_c,this.changed();var t=this.sourceImage_.getState();t==bc||t==wc?this.reproject_():(this.sourceListenerKey_=pi(this.sourceImage_,Li,(function(t){var e=this.sourceImage_.getState();e!=bc&&e!=wc||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){mi(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(wm),Sy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ey="imageloadstart",Oy="imageloadend",Ty="imageloaderror",Py=function(t){function e(e,r){var n=t.call(this,e)||this;return n.image=r,n}return Sy(e,t),e}(Ii);function Iy(t,e){t.getImage().src=e}var ky=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return r.resolutions_=void 0!==e.resolutions?e.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return Sy(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=_i(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,r,n){var i=this.getProjection();if(i&&n&&!Xn(i,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Xn(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&Xr(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new My(i,n,t,e,r,function(t,e,r){return this.getImageInternal(t,e,r,i)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(n=i),this.getImageInternal(t,e,r,n)},e.prototype.getImageInternal=function(t,e,r,n){return _r()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case _c:this.loading=!0,this.dispatchEvent(new Py(Ey,e));break;case bc:this.loading=!1,this.dispatchEvent(new Py(Oy,e));break;case wc:this.loading=!1,this.dispatchEvent(new Py(Ty,e))}},e}(zm),Ry=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ly=[101,101],Cy=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Iy,r.params_=n.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return Ry(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){if(void 0!==this.url_){var i=Un(r),o=this.getProjection();o&&o!==i&&(e=mm(o,i,t,e),t=$n(t,i,o));var a=un(t,e,0,Ly),s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Ln(s,this.params_,n);var u=Math.floor((t[0]-a[0])/e),l=Math.floor((a[3]-t[1])/e);return s[this.v13_?"I":"X"]=u,s[this.v13_?"J":"Y"]=l,this.getRequestUrl_(a,Ly,1,o||i,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i*39.37*(25.4/.28)}return Ln(r,e),uy(this.url_,r)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var i=e/r,o=an(t),a=un(o,i,0,[Math.ceil(pn(t)/i),Math.ceil(ln(t)/i)]),s=un(o,i,0,[Math.ceil(this.ratio_*pn(t)/i),Math.ceil(this.ratio_*ln(t)/i)]),u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==r&&Gr(u.getExtent(),a))return u;var l={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Ln(l,this.params_),this.imageSize_[0]=Math.round(pn(s)/i),this.imageSize_[1]=Math.round(ln(s)/i);var c=this.getRequestUrl_(s,this.imageSize_,r,n,l);return this.image_=new Sm(s,e,r,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Li,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){if(Er(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=r)switch(this.serverType_){case oy:var o=90*r+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case ay:i.MAP_RESOLUTION=90*r;break;case iy:case sy:i.DPI=90*r;break;default:Er(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=a.join(","),uy(this.url_,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Ln(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||"1.3.0";this.v13_=sa(t,"1.3")>=0},e}(ky);function Ay(t){return(Ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ny(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fy(){return(Fy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Dy(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Dy(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qy(t)););return t}function By(t,e){return(By=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qy(t);if(e){var i=qy(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Gy(this,r)}}function Gy(t,e){if(e&&("object"===Ay(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function qy(t){return(qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&By(t,e)}(o,t);var e,r,n,i=zy(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ny(this,o);var r=e;return(t=i.call(this,r)).imageLoadFunction_=r.imageLoadFunction||t.imageLoadFunction,t}return e=o,(r=[{key:"changed",value:function(){Fy(qy(o.prototype),"changed",this).call(this)}},{key:"imageLoadFunction",value:function(t,e){t.getImage().src="".concat(e,"&_=").concat(this.revision_)}}])&&jy(e.prototype,r),n&&jy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Cy);function Vy(t){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zy(t,e){return(Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ky(t);if(e){var i=Ky(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Xy(this,r)}}function Xy(t,e){if(e&&("object"===Vy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ky(t){return(Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zy(t,e)}(o,t);var e,r,n,i=Hy(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return Wy(this,o),(t=i.call(this,e,r)).facadeLayer_=null,t.options=e,t.layers=[],t.displayInLayerSwitcher_=!0,t.getCapabilitiesPromise=null,t.extentPromise=null,t.extent=null,t.resolutions_=null,t.extentProj_=null,!1===t.options.visibility&&(t.visibility=!1),bz(t.tiled)&&(t.tiled=!0!==t.options.singleTile),bz(t.options.numZoomLevels)&&(t.options.numZoomLevels=20),bz(t.options.animated)&&(t.options.animated=!1),t.format=bz(t.options.format)?"image/png":t.options.format,t.styles=t.options.styles||"",t.sldBody=e.sldBody,t.zIndex_=$g.Z_INDEX.WMS,t.minZoom=e.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=e.maxZoom||Number.POSITIVE_INFINITY,t}return e=o,(r=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().filter((function(t){return!t.equals(e)&&t.isVisible()})).forEach((function(t){return t.setVisible(!1)})),bz(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),bz(r)||this.map.setZoom(r)}else bz(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"addTo",value:function(t){if(this.map=t,this.fire("added:map"),!vz(this.options)&&!vz(this.options.minScale)&&!vz(this.options.maxScale)){var e=this.map.getProjection().units;this.options.minResolution=Lz(this.options.minScale,e),this.options.maxResolution=Lz(this.options.maxScale,e)}bz(this.name)?this.addAllLayers_():this.addSingleLayer_(),this.legendUrl_===Fz([M.config.THEME_URL,Lf.LEGEND_DEFAULT])&&(this.legendUrl_=Tz(this.url,{SERVICE:"WMS",VERSION:this.version,REQUEST:"GetLegendGraphic",LAYER:this.name,FORMAT:"image/png"}))}},{key:"setResolutions",value:function(t){var e=this;this.resolutions_=t,this.facadeLayer_.calculateMaxExtent().then((function(r){if(!bz(e.ol3Layer)){var n=e.options.minResolution,i=e.options.maxResolution,o=e.createOLSource_(t,n,i,r);e.ol3Layer.setSource(o),e.ol3Layer.setExtent(r)}}))}},{key:"addSingleLayer_",value:function(){var t=this,e=this;this.getCapabilities().then((function(r){var n=r.capabilities.Capability.Layer.Layer;if(_z(n))for(var i=0,o=n.length;i<o;i+=1)if(void 0!==n[i]&&void 0!==n[i].Name&&n[i].Name===e.facadeLayer_.name){n=n[i],t.addCapabilitiesMetadata(n);try{t.legendUrl_=n.Style[0].LegendURL[0].OnlineResource}catch(t){}}else if(void 0!==n[i]&&void 0!==n[i].Layer&&void 0!==n[i].Layer.filter((function(t){return t.Name===e.facadeLayer_.name}))[0]){n=n[i].Layer.filter((function(t){return t.Name===e.facadeLayer_.name}))[0],t.addCapabilitiesMetadata(n);try{t.legendUrl_=n.Style[0].LegendURL[0].OnlineResource}catch(t){}}t.addCapabilitiesMetadata(n)})),this.facadeLayer_.calculateMaxExtent().then((function(e){var r=t.options.minResolution,n=t.options.maxResolution,i=t.opacity_,o=t.zIndex_,a=t.visibility&&!1!==t.options.visibility,s=t.map.getResolutions();if(bz(s)&&!bz(t.resolutions_))s=t.resolutions_;else if(bz(s)){var u=t.getNumZoomLevels(),l=t.map.getMapImpl().getSize(),c=t.map.getProjection().units;s=bz(r)||bz(n)?Cz(e,l,u,c):Rz(r,n,u)}var h=t.createOLSource_(s,r,n,e);!0===t.tiled?t.ol3Layer=new Hf(Bz({visible:a,source:h,extent:e,minResolution:r,maxResolution:n,opacity:i,zIndex:o},t.vendorOptions_,!0)):t.ol3Layer=new tp(Bz({visible:a,source:h,extent:e,minResolution:r,maxResolution:n,opacity:i,zIndex:o},t.vendorOptions_,!0)),t.map.getMapImpl().addLayer(t.ol3Layer),t.isVisible()&&!t.inRange()?t.setVisible(!1):t.setVisible(t.visibility),null!==o&&t.setZIndex(o),null!==t.resolutions_&&t.setResolutions(t.resolutions_);var f=!1===t.transparent||!0===t.options.animated;t.ol3Layer.set("animated",f),t.ol3Layer.setMaxZoom(t.maxZoom),t.ol3Layer.setMinZoom(t.minZoom)}))}},{key:"addCapabilitiesMetadata",value:function(t){var e={abstract:bz(t.Abstract)?"":t.Abstract,attribution:bz(t.Attribution)?"":t.Attribution,metadataURL:bz(t.MetadataURL)?"":t.MetadataURL,style:bz(t.Style)?"":t.Style};void 0===this.facadeLayer_.capabilitiesMetadata&&(this.facadeLayer_.capabilitiesMetadata=e)}},{key:"createOLSource_",value:function(t,e,r,n){var i=this,o=this.vendorOptions_.source;if(bz(this.vendorOptions_.source)){var a={LAYERS:this.name,VERSION:this.version,TRANSPARENT:this.transparent,FORMAT:this.format,STYLES:this.styles};"1.3.0"!==this.version&&(a.TILED=this.tiled),bz(this.sldBody)||(a.SLD_BODY=this.sldBody),bz(this.options.params)||Object.keys(this.options.params).forEach((function(t){a[t.toUpperCase()]=i.options.params[t]}));var s=this.opacity_,u=this.zIndex_;if(!0===this.tiled){var l=nn(n);o=new wy({url:this.url,params:a,tileGrid:new sp({resolutions:t,extent:n,origin:l}),extent:n,minResolution:e,maxResolution:r,opacity:s,zIndex:u})}else o=new Uy({url:this.url,params:a,extent:n,minResolution:e,maxResolution:r,opacity:s,zIndex:u})}return o}},{key:"addAllLayers_",value:function(){var t=this;this.getCapabilities().then((function(e){e.getLayers().forEach((function(e){var r=new lg({url:t.url,name:e.name,version:e.version,tiled:t.tiled},t.vendorOptions_);t.layers.push(r)})),t.map.addWMS(t.layers);var r=t.layers.length;t.layers.forEach((function(t){t.setZIndex($g.Z_INDEX.WMS+r),r+=1}))}))}},{key:"getExtent",value:function(){var t=this,e=Un(this.map.getProjection().code);return this.extentPromise=new Promise((function(r,n){bz(t.extent_)?t.getCapabilities().then((function(n){t.extent_=n.getLayerExtent(t.name),t.extentProj_=e,r(t.extent_)})):(t.extent_=Dp.transformExtent(t.extent_,t.extentProj_,e),t.extentProj_=e,r(t.extent_))})),this.extentPromise}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"updateMinMaxResolution",value:function(t){bz(this.options.minResolution)||(this.options.minResolution=Lz(this.options.minScale,t.units),this.ol3Layer.setMinResolution(this.options.minResolution)),bz(this.options.maxResolution)||(this.options.maxResolution=Lz(this.options.maxScale,t.units),this.ol3Layer.setMaxResolution(this.options.maxResolution))}},{key:"setMaxExtent",value:function(t){var e=this.options.minResolution,r=this.options.maxResolution;if(this.getOL3Layer().setExtent(t),!0===this.tiled){var n=this.map.getResolutions();if(bz(n)&&!bz(this.resolutions_)&&(n=this.resolutions_),!bz(n)){var i=this.createOLSource_(n,e,r,t);this.ol3Layer.setSource(i)}}}},{key:"getNumZoomLevels",value:function(){return this.options.numZoomLevels}},{key:"getLayers",value:function(){return this.layers}},{key:"getCapabilities",value:function(){if(bz(this.getCapabilitiesPromise)){var t=this.url,e=this.version,r=this.map.getProjection();this.getCapabilitiesPromise=new Promise((function(n,i){var o=Iz(t,e);lz(o).then((function(e){var i=e.xml,o=(new dm).customRead(i),a=new Hp(o,t,r);n(a)}))}))}return this.getCapabilitiesPromise}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}},{key:"refresh",value:function(){var t=this.getOL3Layer();bz(t)||t.getSource().changed()}},{key:"getExtentFromCapabilities",value:function(t){var e=this.facadeLayer_.name;return t.getLayerExtent(e)}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"destroy",value:function(){var t=this.map.getMapImpl();bz(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),bz(this.layers)||(this.layers.map(this.map.removeLayers,this.map),this.layers.length=0),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.version===t.version),e}}])&&Yy(e.prototype,r),n&&Yy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Yp);Jy.LEGEND_IMAGE=null;var $y=Jy;function Qy(t){return(Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function eg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tg(Object(r),!0).forEach((function(e){rg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ng(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ig(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function og(t,e){return(og=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ag(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ug(t);if(e){var i=ug(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return sg(this,r)}}function sg(t,e){if(e&&("object"===Qy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ug(t){return(ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&og(t,e)}(o,t);var e,r,n,i=ag(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ng(this,o),yz($y)&&hh(Oh("exception").wms_method),bz(t)&&hh(Oh("exception").no_param);var a=Sf(t,"WMS"),s=eg(eg({},r),{},{visibility:a.visibility,queryable:a.queryable,displayInLayerSwitcher:a.displayInLayerSwitcher}),u=new $y(s,n);return(e=i.call(this,a,u)).legend=a.legend,e.version=a.version,bz(a.tiled)||(e.tiled=a.tiled),e.transparent=a.transparent,bz(n.capabilitiesMetadata)||(e.capabilitiesMetadata=n.capabilitiesMetadata),e.minZoom=a.minZoom,e.maxZoom=a.maxZoom,e.options=s,e.getCapabilitiesPromise_=null,e._updateNoCache(),e}return e=o,(r=[{key:"type",get:function(){return"WMS"},set:function(t){yz(t)||bz(t)||"WMS"===t||hh("El tipo de capa debe ser '".concat("WMS").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){bz(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"tiled",get:function(){return this.getImpl().tiled},set:function(t){bz(t)?this.getImpl().tiled=!0:Mz(t)?this.getImpl().tiled="true"===Ez(t):this.getImpl().tiled=t}},{key:"version",get:function(){return this.getImpl().version},set:function(t){bz(t)?this.getImpl().version="1.3.0":this.getImpl().version=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}},{key:"getMaxExtent",value:function(t){var e,r=this;return bz(this.userMaxExtent)?(bz(this.options.wmcMaxExtent)?bz(this.map_.userMaxExtent)?this.getCapabilities().then((function(e){var n=r.getImpl().getExtentFromCapabilities(e);if(bz(n)){var i=r.map_.getProjection().getExtent();r.maxExtent_=i}else r.maxExtent_=n;wz(t)&&t(r.maxExtent_)})):this.maxExtent_=this.map_.userMaxExtent:this.maxExtent_=this.options.wmcMaxExtent,e=this.maxExtent_):e=this.userMaxExtent,!bz(e)&&wz(t)&&t(e),e}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return t.getMaxExtent(e)}))}},{key:"getCapabilities",value:function(){return bz(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"getNoCacheUrl",value:function(){return this._noCacheUrl}},{key:"getNoCacheName",value:function(){return this._noCacheName}},{key:"updateMinMaxResolution",value:function(t){return this.getImpl().updateMinMaxResolution(t)}},{key:"_updateNoCache",value:function(){var t=M.config.tileMappgins.tiledNames.indexOf(this.name);-1!==t&&qz(M.config.tileMappgins.tiledUrls[t],this.url)&&(this._noCacheUrl=M.config.tileMappgins.urls[t],this._noCacheName=M.config.tileMappgins.names[t])}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.version===t.version),e}}])&&ig(e.prototype,r),n&&ig(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Lf),cg=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var r;if(e){var n=e.dataProjection?Un(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===ir.TILE_PIXELS&&(n=Un(n)).setWorldExtent(e.extent),r={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(r)},t.prototype.adaptOptions=function(t){return Ln({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return _r()},t.prototype.readFeature=function(t,e){return _r()},t.prototype.readFeatures=function(t,e){return _r()},t.prototype.readGeometry=function(t,e){return _r()},t.prototype.readProjection=function(t){return _r()},t.prototype.writeFeature=function(t,e){return _r()},t.prototype.writeFeatures=function(t,e){return _r()},t.prototype.writeGeometry=function(t,e){return _r()},t}();function hg(t,e,r){var n,i=r?Un(r.featureProjection):null,o=r?Un(r.dataProjection):null;if(n=i&&o&&!Xn(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&r&&void 0!==r.decimals){var a=Math.pow(10,r.decimals);n===t&&(n=t.clone()),n.applyTransform((function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*a)/a;return t}))}return n}function fg(t,e){var r=e?Un(e.featureProjection):null,n=e?Un(e.dataProjection):null;return r&&n&&!Xn(r,n)?Qn(t,n,r):t}var pg="arraybuffer",dg="json",mg="text",yg="xml",gg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vg=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===yd&&"undefined"!=typeof XMLSerializer&&(yd=new XMLSerializer),yd),e}return gg(e,t),e.prototype.getType=function(){return yg},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var r=td(t);return this.readFeatureFromDocument(r,e)}return Qp(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var r=td(t);return this.readFeaturesFromDocument(r,e)}return Qp(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var r=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&wi(r,this.readFeaturesFromNode(n,e));return r},e.prototype.readFeaturesFromNode=function(t,e){return _r()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var r=td(t);return this.readGeometryFromDocument(r,e)}return Qp(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=td(t);return this.readProjectionFromDocument(e)}return Qp(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeGeometryNode=function(t,e){return null},e}(cg),_g=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bg="http://www.opengis.net/gml",wg=/^[\s\xa0]*$/,xg=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType=n.featureType,r.featureNS=n.featureNS,r.srsName=n.srsName,r.schemaLocation="",r.FEATURE_COLLECTION_PARSERS={},r.FEATURE_COLLECTION_PARSERS[r.namespace]={featureMember:rd(r.readFeaturesInternal),featureMembers:nd(r.readFeaturesInternal)},r}return _g(e,t),e.prototype.readFeaturesInternal=function(t,e){var r=t.localName,n=null;if("FeatureCollection"==r)n=pd([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r){var i=e[0],o=i.featureType,a=i.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,u=t.childNodes.length;s<u;++s){var l=t.childNodes[s];if(1===l.nodeType){var c=l.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",f=0,p=l.namespaceURI;for(var d in a){if(a[d]===p){h=d;break}++f}h||(a[h="p"+f]=p),o.push(h+":"+c)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var m=a;(a={}).p0=m}var y={},g=Array.isArray(o)?o:[o];for(var v in a){var _={};for(s=0,u=g.length;s<u;++s){(-1===g[s].indexOf(":")?"p0":g[s].split(":")[0])===v&&(_[g[s].split(":").pop()]="featureMembers"==r?rd(this.readFeatureElement,this):nd(this.readFeatureElement,this))}y[a[v]]=_}n=pd("featureMember"==r?void 0:[],y,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var r=e[0];r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension");var n=pd(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?fg(n,r):hg(n,!1,r):void 0},e.prototype.readFeatureElementInternal=function(t,e,r){for(var n,i={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=$p(o,!1),wg.test(a)&&(a=void 0)):(r&&(a=this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(n=s):a=this.readFeatureElementInternal(o,e,!1)),i[s]?(i[s]instanceof Array||(i[s]=[i[s]]),i[s].push(a)):i[s]=a;var u=o.attributes.length;if(u>0){i[s]={_content_:i[s]};for(var l=0;l<u;l++){var c=o.attributes[l].name;i[s][c]=o.attributes[l].value}}}if(r){var h=new lp(i);n&&h.setGeometryName(n);var f=t.getAttribute("fid")||function(t,e,r){return t.getAttributeNS(e,r)||""}(t,this.namespace,"id");return f&&h.setId(f),h}return i},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new ds(r,Oa)},e.prototype.readMultiPoint=function(t,e){var r=pd([],this.MULTIPOINT_PARSERS_,t,e,this);return r?new bp(r):void 0},e.prototype.readMultiLineString=function(t,e){var r=pd([],this.MULTILINESTRING_PARSERS_,t,e,this);if(r)return new xp(r)},e.prototype.readMultiPolygon=function(t,e){var r=pd([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(r)return new Sp(r)},e.prototype.pointMemberParser_=function(t,e){fd(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){fd(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){fd(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);return r?new vp(r,Oa):void 0},e.prototype.readFlatLinearRing_=function(t,e){var r=pd(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);return r||void 0},e.prototype.readLinearRing=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new fs(r,Oa)},e.prototype.readPolygon=function(t,e){var r=pd([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)wi(i,r[a]),o.push(i.length);return new ks(i,Oa,o)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return pd(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){var r=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){var r={featureType:this.featureType,featureNS:this.featureNS};return e&&Ln(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]},e.prototype.readProjectionFromNode=function(t){return Un(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(vg);xg.prototype.namespace=bg,xg.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},xg.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},xg.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},xg.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:rd(xg.prototype.pointMemberParser_),pointMembers:rd(xg.prototype.pointMemberParser_)}},xg.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:rd(xg.prototype.lineStringMemberParser_),lineStringMembers:rd(xg.prototype.lineStringMemberParser_)}},xg.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:rd(xg.prototype.polygonMemberParser_),polygonMembers:rd(xg.prototype.polygonMemberParser_)}},xg.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:rd(xg.prototype.readFlatCoordinatesFromNode_)}},xg.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:rd(xg.prototype.readLineString)}},xg.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:rd(xg.prototype.readPolygon)}},xg.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:nd(xg.prototype.readFlatLinearRing_)}};var Mg=xg,Sg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eg={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Og=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,r.curve_=void 0!==n.curve&&n.curve,r.multiCurve_=void 0===n.multiCurve||n.multiCurve,r.multiSurface_=void 0===n.multiSurface||n.multiSurface,r.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",r.hasZ=void 0!==n.hasZ&&n.hasZ,r}return Sg(e,t),e.prototype.readMultiCurve_=function(t,e){var r=pd([],this.MULTICURVE_PARSERS_,t,e,this);return r?new xp(r):void 0},e.prototype.readMultiSurface_=function(t,e){var r=pd([],this.MULTISURFACE_PARSERS_,t,e,this);if(r)return new Sp(r)},e.prototype.curveMemberParser_=function(t,e){fd(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){fd(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return pd([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return pd([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return pd([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return pd([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var r=pd(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.exteriorParser_=function(t,e){var r=pd(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.readSurface_=function(t,e){var r=pd([null],this.SURFACE_PARSERS_,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)wi(i,r[a]),o.push(i.length);return new ks(i,Oa,o)}},e.prototype.readCurve_=function(t,e){var r=pd([null],this.CURVE_PARSERS_,t,e,this);return r?new vp(r,Oa):void 0},e.prototype.readEnvelope_=function(t,e){var r=pd([null],this.ENVELOPE_PARSERS_,t,e,this);return Wr(r[1][0],r[1][1],r[2][0],r[2][1])},e.prototype.readFlatPos_=function(t,e){for(var r,n=$p(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=i.exec(n);)o.push(parseFloat(r[1])),n=n.substr(r[0].length);if(""===n){var a=e[0].srsName,s="enu";if(a)s=Un(a).getAxisOrientation();if("neu"===s){var u,l=void 0;for(l=0,u=o.length;l<u;l+=3){var c=o[l],h=o[l+1];o[l]=h,o[l+1]=c}}var f=o.length;if(2==f&&o.push(0),0!==f)return o}},e.prototype.readFlatPosList_=function(t,e){var r=$p(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],i=n.srsName,o=n.srsDimension,a="enu";i&&(a=Un(i).getAxisOrientation());var s,u,l,c=r.split(/\s+/),h=2;t.getAttribute("srsDimension")?h=Od(t.getAttribute("srsDimension")):t.getAttribute("dimension")?h=Od(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?h=Od(t.parentNode.getAttribute("srsDimension")):o&&(h=Od(o));for(var f=[],p=0,d=c.length;p<d;p+=h)s=parseFloat(c[p]),u=parseFloat(c[p+1]),l=3===h?parseFloat(c[p+2]):0,"en"===a.substr(0,2)?f.push(s,u,l):f.push(u,s,l);return f},e.prototype.writePos_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);var a=n.srsName,s="enu";a&&(s=Un(a).getAxisOrientation());var u,l=e.getCoordinates();(u="en"===s.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],i)&&(u+=" "+(l[2]||0));Rd(t,u)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=Un(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];r&&(i+=" "+(t[2]||0));return i},e.prototype.writePosList_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var a,s=n.srsName,u=e.getCoordinates(),l=u.length,c=new Array(l),h=0;h<l;++h)a=u[h],c[h]=this.getCoords_(a,s,i);Rd(t,c.join(" "))},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=Jp(t.namespaceURI,"pos");t.appendChild(i),this.writePos_(i,e,r)},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];md({node:t},this.ENVELOPE_SERIALIZERS_,ld,i,r,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=Jp(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Jp(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();md({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=Jp(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=Jp(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)}else if("Curve"===t.nodeName){var o=Jp(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();md({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.srsName,o=n.hasZ;i&&t.setAttribute("srsName",i);var a=e.getPoints();md({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS_,ud("pointMember"),a,r,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();md({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeRing_=function(t,e,r){var n=Jp(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writePointMember_=function(t,e,r){var n=Jp(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeSurfacePatches_=function(t,e,r){var n=Jp(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeCurveSegments_=function(t,e,r){var n=Jp(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=Ln({},i);o.node=t,n=Array.isArray(e)?fg(e,i):hg(e,!0,i),md(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=e.getProperties(),u=[],l=[];for(var c in s){var h=s[c];null!==h&&(u.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=ad(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=ad(Rd)))}var f=Ln({},i);f.node=t,md(f,i.serializers,ud(void 0,o),l,r,u)},e.prototype.writeFeatureMembers_=function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a={};a[o]={},a[o][i]=ad(this.writeFeatureElement,this);var s=Ln({},n);s.node=t,md(s,a,ud(i,o),e,r)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return Jp(this.namespace,Eg[n.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.curve,u=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"LineString"===n&&!0===s?n="Curve":"MultiLineString"===n&&!0===u&&(n="MultiCurve"),Jp(this.namespace,n)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var r=Jp(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Ln(n,e),this.writeGeometryElement(r,t,[n]),r},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Jp(this.namespace,"featureMembers");r.setAttributeNS(Kp,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Ln(n,e),this.writeFeatureMembers_(r,t,[n]),r},e}(Mg);Og.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:nd(Og.prototype.readFlatPos_),posList:nd(Og.prototype.readFlatPosList_)}},Og.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Og.prototype.interiorParser_,exterior:Og.prototype.exteriorParser_}},Og.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:nd(Mg.prototype.readPoint),MultiPoint:nd(Mg.prototype.readMultiPoint),LineString:nd(Mg.prototype.readLineString),MultiLineString:nd(Mg.prototype.readMultiLineString),LinearRing:nd(Mg.prototype.readLinearRing),Polygon:nd(Mg.prototype.readPolygon),MultiPolygon:nd(Mg.prototype.readMultiPolygon),Surface:nd(Og.prototype.readSurface_),MultiSurface:nd(Og.prototype.readMultiSurface_),Curve:nd(Og.prototype.readCurve_),MultiCurve:nd(Og.prototype.readMultiCurve_),Envelope:nd(Og.prototype.readEnvelope_)}},Og.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:rd(Og.prototype.curveMemberParser_),curveMembers:rd(Og.prototype.curveMemberParser_)}},Og.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:rd(Og.prototype.surfaceMemberParser_),surfaceMembers:rd(Og.prototype.surfaceMemberParser_)}},Og.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:rd(Mg.prototype.readLineString),Curve:rd(Og.prototype.readCurve_)}},Og.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:rd(Mg.prototype.readPolygon),Surface:rd(Og.prototype.readSurface_)}},Og.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:nd(Og.prototype.readPatch_)}},Og.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:nd(Og.prototype.readSegment_)}},Og.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:rd(Og.prototype.readFlatPosList_),upperCorner:rd(Og.prototype.readFlatPosList_)}},Og.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:nd(Og.prototype.readPolygonPatch_)}},Og.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:nd(Og.prototype.readLineStringSegment_)}},Og.prototype.writeFeatures,Og.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:ad(Og.prototype.writeRing_),interior:ad(Og.prototype.writeRing_)}},Og.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ad(Rd),upperCorner:ad(Rd)}},Og.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ad(Og.prototype.writeSurfaceOrPolygonMember_),polygonMember:ad(Og.prototype.writeSurfaceOrPolygonMember_)}},Og.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ad(Og.prototype.writePointMember_)}},Og.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ad(Og.prototype.writeLineStringOrCurveMember_),curveMember:ad(Og.prototype.writeLineStringOrCurveMember_)}},Og.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ad(Og.prototype.writeCurveOrLineString_),MultiCurve:ad(Og.prototype.writeMultiCurveOrLineString_),Point:ad(Og.prototype.writePoint_),MultiPoint:ad(Og.prototype.writeMultiPoint_),LineString:ad(Og.prototype.writeCurveOrLineString_),MultiLineString:ad(Og.prototype.writeMultiCurveOrLineString_),LinearRing:ad(Og.prototype.writeLinearRing_),Polygon:ad(Og.prototype.writeSurfaceOrPolygon_),MultiPolygon:ad(Og.prototype.writeMultiSurfaceOrPolygon_),Surface:ad(Og.prototype.writeSurfaceOrPolygon_),MultiSurface:ad(Og.prototype.writeMultiSurfaceOrPolygon_),Envelope:ad(Og.prototype.writeEnvelope)}};var Tg=Og,Pg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ig=function(t){function e(e){var r=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return r.matrixIds_=e.matrixIds,r}return Pg(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(sp),kg=Ig;function Rg(t,e,r){var n=[],i=[],o=[],a=[],s=[],u=void 0!==r?r:[],l=t.SupportedCRS,c=Un(l.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Un(l),h=c.getMetersPerUnit(),f="ne"==c.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){if(!(u.length>0)||xi(u,(function(r){return e.Identifier==r.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===r.TileMatrix}))){i.push(e.Identifier);var r=28e-5*e.ScaleDenominator/h,l=e.TileWidth,c=e.TileHeight;f?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),n.push(r),a.push(l==c?l:[l,c]),s.push([e.MatrixWidth,e.MatrixHeight])}})),new Ig({extent:e,origins:o,resolutions:n,matrixIds:i,tileSizes:a,sizes:s})}var Lg="KVP",Cg="REST";Tg.prototype.writePos_=function(t,e,r){var n=e.getCoordinates();Rd(t,"".concat(n[0]," ").concat(n[1]))},Tg.prototype.getCoords_=function(t,e){return"".concat(t[0]," ").concat(t[1])};function Ag(t){return(Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ng(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jg(t,e){return(jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Fg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Bg(t);if(e){var i=Bg(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Dg(this,r)}}function Dg(t,e){if(e&&("object"===Ag(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Bg(t){return(Bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jg(t,e)}(o,t);var e,r,n,i=Fg(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).userZoom_=null,e}return e=o,(r=[{key:"setUserZoom",value:function(t){this.userZoom_=t,bz(t)||this.setZoom(t)}},{key:"getUserZoom",value:function(){return this.userZoom_}},{key:"setProjection",value:function(t){this.projection_=t}},{key:"getResolutions",value:function(){return this.get("resolutions")}},{key:"setResolutions",value:function(t){this.set("resolutions",t),this.maxResolution_=t[0],this.minResolution_=t[t.length-1],this.applyOptions_({minZoom:this.minZoom_,resolutions:t,zoomFactor:this.zoomFactor_,minResolution:this.minResolution_,maxResolution:this.maxResolution_,projection:this.projection_,center:this.getCenter()}),bz(this.userZoom_)||this.setZoom(this.userZoom_)}}])&&Ng(e.prototype,r),n&&Ng(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ds);function Gg(t){return(Gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qg(t){return function(t){if(Array.isArray(t))return Ug(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ug(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ug(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ug(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yg(t,e){return(Yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Kg(t);if(e){var i=Kg(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Hg(this,r)}}function Hg(t,e){if(e&&("object"===Gg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xg(t)}function Xg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kg(t){return(Kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yg(t,e)}(o,t);var e,r,n,i=Zg(o);function o(t,e){var r;return Vg(this,o),(r=i.call(this)).facadeMap_=e,r.layers_=[],r.layerGroups_=[],r.controls_=[],r.initZoom_=!0,r.userResolutions_=null,r.userBbox_=null,r.maxExtentForResolutions_=null,r.envolvedMaxExtent_=null,r._calculatedResolutions=!1,r._resolutionsEnvolvedExtent=!1,r._resolutionsBaseLayer=!1,r.map_=new Uc({controls:[],target:t.id,view:new zg}),r.map_.getView().setConstrainResolution(!0),r.facadeMap_.on("completed",(function(){r.map_.updateSize()})),r.map_.on("singleclick",r.onMapClick_.bind(Xg(r))),r.map_.addInteraction(new Nu({handleEvent:function(t){return"pointermove"===t.type&&r.onMapMove_(t),!0}})),r}return e=o,(r=[{key:"getLayers",value:function(t){var e=this.getKML(t),r=this.getWMS(t),n=this.getWFS(t),i=this.getWMTS(t),o=this.getMVT(t),a=this.getMBTiles(t),s=this.getMBTilesVector(t),u=this.getXYZs(t),l=this.getTMS(t),c=this.getUnknowLayers_(t);return e.concat(r).concat(n).concat(i).concat(o).concat(a).concat(s).concat(u).concat(l).concat(c)}},{key:"getBaseLayers",value:function(){return this.getLayers().filter((function(t){var e=!1;return"WMS"!==t.type&&"WMTS"!==t.type&&"TMS"!==t.type||(e=!0!==t.transparent),e}))}},{key:"addLayers",value:function(t){var e=this,r=t;return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length||r.forEach((function(t){"WMS"===t.type?e.facadeMap_.addWMS(t):"WMTS"===t.type?e.facadeMap_.addWMTS(t):"KML"===t.type?e.facadeMap_.addKML(t):"WFS"===t.type?e.facadeMap_.addWFS(t):"MVT"===t.type?e.facadeMap_.addMVT(t):"MBTiles"===t.type?e.facadeMap_.addMBTiles(t):"MBTilesVector"===t.type?e.facadeMap_.addMBTilesVector(t):"XYZ"===t.type?e.facadeMap_.addXYZ(t):"TMS"===t.type?e.facadeMap_.addTMS(t):$h(t.type)||e.addUnknowLayers_([t])})),this}},{key:"removeLayers",value:function(t){var e=t.filter((function(t){return!$h(t.type)})),r=t.filter((function(t){return $h(t.type)}));return r.length>0&&(this.removeKML(r),this.removeWMS(r),this.removeWFS(r),this.removeWMTS(r),this.removeMVT(r),this.removeMBTiles(r),this.removeXYZ(r),this.removeTMS(r)),e.length>0&&this.removeUnknowLayers_(e),this}},{key:"getKML",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"KML"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name),bz(t.extract)||(n=n&&t.extract===r.extract)),n}));e=e.concat(r)}),this),e}},{key:"addKML",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if("KML"===t.type&&!Dz(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.KML;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}}),this),this}},{key:"removeKML",value:function(t){var e=this;return this.getKML(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!t.equals(e)})),t.getImpl().destroy()}),this),this}},{key:"getWMS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"WMS"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:t instanceof lg?n=t===r:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name),bz(t.legend)||(n=n&&t.legend===r.legend),bz(t.transparent)||(n=n&&t.transparent===r.transparent),bz(t.tiled)||(n=n&&t.tiled===r.tiled),bz(t.cql)||(n=n&&t.cql===r.cql),bz(t.version)||(n=n&&t.version===r.version)),n}));e=e.concat(r)}),this),e}},{key:"addWMS",value:function(t){var e=this,r=this.getBaseLayers().length>0,n=[];return t.forEach((function(t){if("WMS"===t.type&&!Dz(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),n.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.setZIndex(o.Z_INDEX_BASELAYER);else if(null==t.getZIndex()){var i=e.layers_.length+o.Z_INDEX.WMS;t.setZIndex(i)}})),(n.length>0&&!r||n.some((function(t){return!0!==t.transparent&&t.isVisible()})))&&this.updateResolutionsFromBaseLayer(),this}},{key:"removeWMS",value:function(t){var e=this;return this.getWMS(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!t.equals(e)})),t.getImpl().destroy()})),this}},{key:"getGeoJSON",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"GeoJSON"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name),bz(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"getWFS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"WFS"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name),bz(t.namespace)||(n=n&&t.namespace===r.namespace),bz(t.legend)||(n=n&&t.legend===r.legend),bz(t.cql)||(n=n&&t.cql===r.cql),bz(t.geometry)||(n=n&&t.geometry===r.geometry),bz(t.ids)||(n=n&&t.ids===r.ids),bz(t.version)||(n=n&&t.version===r.version)),n}));e=e.concat(r)})),e}},{key:"addWFS",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if("WFS"===t.type&&!Dz(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.WFS;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeWFS",value:function(t){var e=this;return this.getWFS(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy()})),this}},{key:"getWMTS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"WMTS"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name),bz(t.matrixSet)||(n=n&&t.matrixSet===r.matrixSet),bz(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"addWMTS",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if("WMTS"===t.type&&!Dz(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.isVisible()&&e.updateResolutionsFromBaseLayer(),t.setZIndex(o.Z_INDEX_BASELAYER);else{if(null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.WMTS;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeWMTS",value:function(t){var e=this;return this.getWMTS(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy()})),this}},{key:"getMBTiles",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"MBTiles"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name),bz(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"addMBTiles",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if("MBTiles"===t.type&&!Dz(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.MBTiles;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeMBTiles",value:function(t){var e=this;return this.getMBTiles(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire("removed:map",[t])})),this}},{key:"getMBTilesVector",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"MBTilesVector"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name),bz(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"addMBTilesVector",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if("MBTilesVector"===t.type&&!Dz(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.MBTilesVector;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeMBTilesVector",value:function(t){var e=this;return this.getMBTilesVector(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire("removed:map",[t])})),this}},{key:"getUnknowLayers_",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return!$h(t.type)}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:t instanceof Lf?n=t.equals(r):(bz(t.type)||(n=n&&t.type===r.type),bz(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"addUnknowLayers_",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(!Dz(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.isVisible()&&e.updateResolutionsFromBaseLayer(),t.setZIndex(o.Z_INDEX_BASELAYER);else{if(t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX[t.type];t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeUnknowLayers_",value:function(t){var e=this;t.forEach((function(t){if(Dz(e.layers_,t)&&(e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),!0!==t.transparent)){var r=e.facadeMap_.getBaseLayers();r.length>0&&r[0].setVisible(!0)}}))}},{key:"getMVT",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"MVT"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"removeMVT",value:function(t){var e=this;return this.getMVT(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire("removed:map",[t])})),this}},{key:"addMVT",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if("MVT"===t.type&&!Dz(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.MVT;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"getXYZs",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"XYZ"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"addXYZ",value:function(t){var e=this;return t.forEach((function(t){if("XYZ"===t.type)if(Dz(e.layers_,t)||!0!==t.transparent)t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(0);else{t.getImpl().addTo(e.facadeMap_),e.layers_.push(t);var r=e.layers_.length+o.Z_INDEX.XYZ;t.setZIndex(r)}})),this}},{key:"removeXYZ",value:function(t){var e=this;return this.getXYZs(t).forEach((function(t){t.getImpl().destroy(),e.layers_=e.layers_.filter((function(e){return!e.equals(t)}))})),this}},{key:"getTMS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"TMS"===t.type}));return bz(r)&&(r=[]),_z(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(bz(t.type)||(n=n&&t.type===r.type),bz(t.url)||(n=n&&t.url===r.url),bz(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"addTMS",value:function(t){var e=this;return t.forEach((function(t){if("TMS"===t.type)if(Dz(e.layers_,t)||!0!==t.transparent)t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(0);else{t.getImpl().addTo(e.facadeMap_),e.layers_.push(t);var r=e.layers_.length+o.Z_INDEX.TMS;t.setZIndex(r)}})),this}},{key:"removeTMS",value:function(t){var e=this;return this.getTMS(t).forEach((function(t){t.getImpl().destroy(),e.layers_=e.layers_.filter((function(e){return!e.equals(t)}))})),this}},{key:"getControls",value:function(t){var e=t,r=[],n=this.facadeMap_.getPanels().map((function(t){return t.getControls()}));n.length>0&&(n=n.reduce((function(t,e){return t.concat(e)})));var i=this.controls_.concat(n);bz(e)&&(e=[]),_z(e)||(e=[e]),0===e.length?r=i:e.forEach((function(t){r=r.concat(i.filter((function(e){var n=!1;return Dz(r,e)||(Mz(t)?n=t===e.name:t instanceof Ch?n=t===e:xz(t)&&(n=t.name===e.name)),n})))}));var o=[];return r.forEach((function(t){o.map((function(t){return t.name})).includes(t.name)||o.push(t)})),o}},{key:"addControls",value:function(t){var e=this;return t.forEach((function(t){t instanceof Xh&&e.facadeMap_.addControls(M.config.controls.default.split(",")),Dz(e.controls_,t)||e.controls_.push(t)})),this}},{key:"removeControls",value:function(t){var e=this;return this.getControls(t).forEach((function(t){t.destroy(),e.controls_=e.controls_.filter((function(e){var r=e.constructor===t.constructor;return bz(e.equals)||(r=!e.equals(t)),r}))})),this}},{key:"setMaxExtent",value:function(t,e){var r=t;return bz(r)||_z(r)||!xz(r)||(r=[t.x.min,t.y.min,t.x.max,t.y.max]),this.getMapImpl().getView().set("extent",r),this.updateResolutionsFromBaseLayer(),bz(r)||!1===e||this.setBbox(r),this}},{key:"getMaxExtent",value:function(){var t=this.getMapImpl().getView().get("extent");return bz(t)?this.envolvedMaxExtent_:{x:{min:t[0],max:t[2]},y:{min:t[1],max:t[3]}}}},{key:"setBbox",value:function(t,e){var r;return bz(t)&&hh(Oh("exception").no_bbox),this.userBbox_=t,_z(t)?r=t:xz(t)&&(r=[t.x.min,t.y.min,t.x.max,t.y.max]),this.getMapImpl().getView().fit(r,e),this}},{key:"getBbox",value:function(){var t=null,e=this.getMapImpl(),r=e.getView();if(!bz(r.getCenter())){var n=r.calculateExtent(e.getSize());bz(n)||(t={x:{min:n[0],max:n[2]},y:{min:n[1],max:n[3]}})}return t}},{key:"setZoom",value:function(t){return bz(t)&&hh(Oh("exception").no_zoom),this.getMapImpl().getView().setUserZoom(t),this}},{key:"setMinZoom",value:function(t){return bz(t)&&hh(Oh("exception").no_zoom),this.getMapImpl().getView().setMinZoom(t),this}},{key:"setMaxZoom",value:function(t){return bz(t)&&hh(Oh("exception").no_zoom),this.getMapImpl().getView().setMaxZoom(t),this}},{key:"getZoom",value:function(){var t=null,e=this.getMapImpl().getView(),r=e.getResolution(),n=this.getResolutions();if(bz(n))bz(r)||(t=e.getZoomForResolution(r));else for(var i=0,o=n.length;i<o;i+=1)if(n[i]<=r){t=i;break}return t}},{key:"getMinZoom",value:function(){var t;return this.getMapImpl()&&this.getMapImpl().getView()&&(t=this.getMapImpl().getView().getMinZoom()),t}},{key:"getMaxZoom",value:function(){var t;return this.getMapImpl()&&this.getMapImpl().getView()&&(t=this.getMapImpl().getView().getMaxZoom()),t}},{key:"setCenter",value:function(t){bz(t)&&hh(Oh("exception").no_center);var e=[t.x,t.y],r=this.getMapImpl().getView(),n=r.getCenter();return bz(n)||this.getMapImpl().getView().animate({duration:250,source:n}),r.setCenter(e),this}},{key:"getCenter",value:function(){var t=null,e=this.getMapImpl().getView().getCenter();return bz(e)||(t={x:e[0],y:e[1]}),t}},{key:"getResolutions",value:function(){return this.getMapImpl().getView().getResolutions()}},{key:"setResolutions",value:function(t,e){bz(t)&&hh(Oh("exception").no_resolutions),bz(e)&&(this.userResolutions_=t);var r,n=Un(this.getProjection().code),i=this.getMapImpl(),o=i.getView().getProperties(),a=i.getView().getUserZoom(),s=i.getView().getMinZoom(),u=i.getView().getMaxZoom(),l=i.getSize(),c=new zg({projection:n});if(c.setProperties(o),c.setResolutions(t),c.setUserZoom(a),c.setMinZoom(s),c.setMaxZoom(u),c.setConstrainResolution(!0),bz(a)){var h=this.facadeMap_.getBbox();if(!bz(h)){var f=c.getResolutionForExtent([h.x.min,h.y.min,h.x.max,h.y.max],l),p=t.map((function(t){return Math.abs(t-f)})),d=p.indexOf(Math.min.apply(Math,qg(p)));r=t[d]}}else r=t[a];return c.setResolution(r),i.setView(c),this.getWMS().forEach((function(e){e.getImpl().setResolutions(t)})),this}},{key:"getScale",value:function(){var t=this.getMapImpl().getView().getResolution(),e=this.getProjection().units,r=Az(t,e);return bz(r)||(r=r>=1e3&&r<=95e4?1e3*Math.round(r/1e3):r>=95e4?1e6*Math.round(r/1e6):Math.round(r)),r}},{key:"getExactScale",value:function(){var t=this.getMapImpl().getView().getResolution(),e=this.getProjection().units,r=Az(t,e);return Math.trunc(r)}},{key:"setProjection",value:function(t){bz(t)&&hh(Oh("exception").no_projection);var e=Un(t.code);bz(e)&&(e=new or(t));var r=Un(this.getProjection().code),n=this.facadeMap_.getMaxExtent(),i=this.facadeMap_.getResolutions(),o=this.getMapImpl(),a=o.getView().getProperties(),s=o.getView().getResolution(),u=o.getView().getUserZoom(),l=o.getView().getMinZoom(),c=o.getView().getMaxZoom(),h=new zg({projection:e});h.setProperties(a),bz(i)||h.setResolutions(i),bz(s)||h.setResolution(s),h.setUserZoom(u),h.setMinZoom(l),h.setMaxZoom(c),h.setConstrainResolution(!0),o.setView(h),this.facadeMap_.getWMS().forEach((function(e){e.updateMinMaxResolution(t)})),bz(n)||(_z(n)||(n=[n.x.min,n.y.min,n.x.max,n.y.max]),this.setMaxExtent(Dp.transformExtent(n,r,e),!1)),this.updateResolutionsFromBaseLayer();var f=this.facadeMap_.getPopup();if(!bz(f)){var p=f.getCoordinate();bz(p)||(p=$n(p,r,e),f.setCoordinate(p))}var d=this.facadeMap_.getLabel();if(!bz(d)){var m=d.getCoordinate();bz(m)||(m=$n(m,r,e),d.setCoordinate(m))}return this.fire("change"),this}},{key:"getProjection",value:function(){var t=this.getMapImpl().getView().getProjection(),e=null;return bz(t)||(e={code:t.getCode(),units:t.getUnits(),getExtent:function(){return t.getExtent()}}),e}},{key:"getMapImpl",value:function(){return this.map_}},{key:"removePopup",value:function(t){if(!bz(t)){var e=t.getImpl();this.getMapImpl().removeOverlay(e)}return this}},{key:"destroy",value:function(){this.layers_.length=0,this.controls_.length=0,this.popup_=null,this.options_=null,this.map_.setTarget(null),this.map_=null}},{key:"updateResolutionsFromBaseLayer",value:function(){this.fire("completed"),this.refresh()}},{key:"addLabel",value:function(t){return this.label=t,t.show(this.facadeMap_),this}},{key:"getLabel",value:function(){return this.label}},{key:"removeLabel",value:function(){if(!bz(this.label)){var t=this.label.getPopup();this.removePopup(t),this.label=null}}},{key:"refresh",value:function(){return this.map_.updateSize(),this}},{key:"getContainer",value:function(){return this.map_.getOverlayContainerStopEvent()}},{key:"setFacadeMap",value:function(t){this.facadeMap_=t}},{key:"onMapClick_",value:function(t){var e=t.pixel,r=this.map_.getCoordinateFromPixel(e),n=this.facadeMap_.getLabel();bz(n)||n.hide(),this.facadeMap_.fire("click",[{pixel:e,coord:r,vendor:t}])}},{key:"onMapMove_",value:function(t){var e=t.pixel,r=this.map_.getCoordinateFromPixel(e);this.facadeMap_.fire("move",[{pixel:e,coord:r,vendor:t}])}}])&&Wg(e.prototype,r),n&&Wg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Kc);Jg.Z_INDEX={},Jg.Z_INDEX_BASELAYER=0,Jg.Z_INDEX.OSM=5,Jg.Z_INDEX.WMS=40,Jg.Z_INDEX.WMTS=40,Jg.Z_INDEX.KML=40,Jg.Z_INDEX.WFS=40,Jg.Z_INDEX.MVT=40,Jg.Z_INDEX.Vector=40,Jg.Z_INDEX.GeoJSON=40,Jg.Z_INDEX.XYZ=40,Jg.Z_INDEX.TMS=40;var $g=Jg,Qg="bottom-left",tv="bottom-center",ev="bottom-right",rv="center-left",nv="center-center",iv="center-right",ov="top-left",av="top-center",sv="top-right";function uv(t){return(uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var lv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cv="element",hv="map",fv="offset",pv="position",dv="positioning",mv=function(t){function e(e){var r=t.call(this)||this;r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",r.element.style.position="absolute";var n=e.autoPan;return n&&"object"!==uv(n)&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addEventListener(to(cv),r.handleElementChanged),r.addEventListener(to(hv),r.handleMapChanged),r.addEventListener(to(fv),r.handleOffsetChanged),r.addEventListener(to(pv),r.handlePositionChanged),r.addEventListener(to(dv),r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:ov),void 0!==e.position&&r.setPosition(e.position),r}return lv(e,t),e.prototype.getElement=function(){return this.get(cv)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(hv)},e.prototype.getOffset=function(){return this.get(fv)},e.prototype.getPosition=function(){return this.get(pv)},e.prototype.getPositioning=function(){return this.get(dv)},e.prototype.handleElementChanged=function(){Vs(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Us(this.element),mi(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=pi(t,Po,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(cv,t)},e.prototype.setMap=function(t){this.set(hv,t)},e.prototype.setOffset=function(t){this.set(fv,t)},e.prototype.setPosition=function(t){this.set(pv,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(pv)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),i=this.getRect(n,[zs(n),Gs(n)]),o=void 0===t.margin?20:t.margin;if(!Gr(r,i)){var a=i[0]-r[0],s=r[2]-i[2],u=i[1]-r[1],l=r[3]-i[3],c=[0,0];if(a<0?c[0]=a-o:s<0&&(c[0]=Math.abs(s)+o),u<0?c[1]=u-o:l<0&&(c[1]=Math.abs(l)+o),0!==c[0]||0!==c[1]){var h=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(h),p=[f[0]+c[0],f[1]+c[1]],d=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(p),duration:d.duration,easing:d.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(dv,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";i==ev||i==iv||i==sv?s="-100%":i!=tv&&i!=nv&&i!=av||(s="-50%"),i==Qg||i==tv||i==ev?u="-100%":i!=rv&&i!=nv&&i!=iv||(u="-50%");var l="translate("+s+", "+u+") translate("+o+", "+a+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l,r.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(eo);function yv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gv=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"listen",value:function(){t.WIDTH=window.innerWidth,t.HEIGHT=window.innerHeight,window.addEventListener("resize",(function(e){t.WIDTH=e.target.innerWidth,t.HEIGHT=e.target.innerHeight}))}}],(r=null)&&yv(e.prototype,r),n&&yv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();gv.WIDTH=window.innerWidth,gv.HEIGHT=window.innerHeight,gv.listen();var vv=gv;function _v(t){return(_v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xv(t,e){return(xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ev(t);if(e){var i=Ev(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Sv(this,r)}}function Sv(t,e){if(e&&("object"===_v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ev(t){return(Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ov=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xv(t,e)}(o,t);var e,r,n,i=Mv(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return bv(this,o),(t=i.call(this,{})).panMapIfOutOfView=e.panMapIfOutOfView,void 0===t.panMapIfOutOfView&&(t.panMapIfOutOfView=!1),t.ani_opts=e.ani_opts,void 0===t.ani_opts&&(t.ani_opts={duration:250}),t.facadeMap_=null,t.cachedAniPixel_=null,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.container=e,this.content=this.getContentFromContainer(e),Gz(this.content),this.setElement(this.container),t.getMapImpl().addOverlay(this)}},{key:"show",value:function(t,e){return this.setPosition(t),this.panMapIfOutOfView&&this.panIntoView(t),this.content.scrollTop=0,wz(e)&&e(),this}},{key:"centerByStatus",value:function(t,e){var r=this.getMap().getView().getResolution(),n=[].concat(e);if(t===Bv.status.COLLAPSED)n[1]-=.1*vv.HEIGHT*r;else{if(t!==Bv.status.DEFAULT)return;n[1]-=.275*vv.HEIGHT*r}var i=this.facadeMap_.getFeatureCenter();this.facadeMap_.setCenter({x:n[0],y:n[1]}),bz(i)||this.facadeMap_.drawFeatures([i])}},{key:"getContentFromContainer",value:function(t){return t.querySelector("div.m-body")}},{key:"panIntoView",value:function(t){var e=this;return this.panIntoSynchronizedAnim_().then((function(){e.isAnimating_=!0;var r=e.element.querySelector(".m-popup"),n=r.clientWidth+20,i=r.clientHeight+20+30,o=e.getMap().getSize(),a=e.getMap().getView().getCenter(),s=n-60,u=e.getOffset(),l=e.getMap().getPixelFromCoordinate(t);if(!bz(l)){var c=l[0]-60,h=o[0]-(l[0]+s),f=l[1]-(i+u[1]),p=o[1]-(l[1]+20)-u[1],d=e.getMap().getPixelFromCoordinate(a),m=d.slice();h<0?m[0]-=h:c<0&&(m[0]+=c),f<0?m[1]+=f:p<0&&(m[1]-=p),!bz(e.ani_opts)&&bz(e.ani_opts.source)&&(e.ani_opts.source=a,e.getMap().getView().animate(e.ani_opts)),m[0]===d[0]&&m[1]===d[1]||e.getMap().getView().setCenter(e.getMap().getCoordinateFromPixel(m))}e.isAnimating_=!1})),this.getMap().getView().getCenter()}},{key:"panIntoSynchronizedAnim_",value:function(){var t=this;return new Promise((function(e,r){if(!0===t.isAnimating_){var n=300;bz(t.ani_opts)||(n=t.ani_opts.duration),setTimeout(e,n)}else e()}))}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"setContainer",value:function(t){this.setElement(t),this.content=this.getContentFromContainer(t),Gz(this.content)}},{key:"getContent",value:function(){return this.content}}])&&wv(e.prototype,r),n&&wv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(mv),Tv=(r(224),r(58)),Pv=r.n(Tv);function Iv(t){return(Iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kv(t,e){return(kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Cv(t);if(e){var i=Cv(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Lv(this,r)}}function Lv(t,e){if(e&&("object"===Iv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Cv(t){return(Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Av(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nv(t,e,r){return e&&Av(t.prototype,e),r&&Av(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function jv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Fv=Nv((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};jv(this,t),this.icon=e.icon,this.title=e.title,this.content=e.content,this.listeners=e.listeners||[]})),Dv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kv(t,e)}(r,t);var e=Rv(r);function r(t){var n;jv(this,r);var i=new Ov(t);return(n=e.call(this,i)).coord_=null,n.tabs_=[],n.element_=null,n.status_=r.status.COLLAPSED,n}return Nv(r,[{key:"getTabs",value:function(){return this.tabs_}},{key:"removeTab",value:function(t){this.tabs_=this.tabs_.filter((function(e){return e.content!==t.content})),this.update()}},{key:"addTab",value:function(t){var e=t;e instanceof Fv||(e=new Fv(t)),this.tabs_.push(e),this.update()}},{key:"addTo",value:function(t,e){if(this.map_=t,bz(this.element_)){var r=Bh(Pv.a,{jsonp:!0,vars:{tabs:this.tabs_}});this.tabs_.length>0&&(this.element_=r,this.addEvents(r),this.getImpl().addTo(t,r),this.show(e))}else this.getImpl().addTo(t,this.element_),this.show(e)}},{key:"update",value:function(){if(!bz(this.map_)){var t=Bh(Pv.a,{jsonp:!0,vars:{tabs:this.tabs_}});this.tabs_.length>0&&(this.element_=t,this.addEventTabs(this.tabs_[0],t),this.addEvents(t),this.getImpl().setContainer(t),this.show(this.coord_))}}},{key:"show",value:function(t){var e=this;this.coord_=t,this.getImpl().show(this.coord_,(function(){e.fire("show")}))}},{key:"hide",value:function(t){bz(t)||t.preventDefault(),this.getImpl().hide()}},{key:"switchTab",value:function(t){if(this.tabs_.length>t){var e=this.tabs_[t];this.setContent_(e.content),this.addEventTabs(e,this.getContent()),this.show(this.coord_)}}},{key:"addEventTabs",value:function(t,e){t.listeners.forEach((function(t){!0===t.all?e.querySelectorAll(t.selector).forEach((function(e){e.addEventListener(t.type,(function(e){return t.callback(e)}))})):e.querySelector(t.selector).addEventListener(t.type,(function(e){return t.callback(e)}))}))}},{key:"setContent_",value:function(t){this.getContent().innerHTML=t}},{key:"getContent",value:function(){return this.getImpl().getContent()}},{key:"addEvents",value:function(t){var e,n=this,i=t,o=i.querySelectorAll("div.m-tab");Array.prototype.forEach.call(o,(function(t){t.addEventListener("click",(function(r){r.preventDefault();var i=r.clientY;if("click"===r.type||Math.abs(e-i)<5){Array.prototype.forEach.call(o,(function(t){t.classList.remove("m-activated")})),t.classList.add("m-activated");var a=t.getAttribute("data-index");n.switchTab(a)}})),t.addEventListener("touchend",(function(r){r.preventDefault();var i=r.clientY;if("touchend"===r.type||Math.abs(e-i)<5){Array.prototype.forEach.call(o,(function(t){t.classList.remove("m-activated")})),t.classList.add("m-activated");var a=t.getAttribute("data-index");n.switchTab(a)}}))}));var a=i.querySelector("a.m-popup-closer");a.addEventListener("click",this.hide.bind(this),!1),a.addEventListener("touchend",this.hide.bind(this),!1);var s=i.querySelector("div.m-tabs");if(bz(s)&&(s=i.querySelector("div.m-content > div.m-header")),!bz(s)){var u;s.addEventListener("touchstart",(function(t){t.preventDefault(),e=t.touches[0].clientY,n.status_===r.status.COLLAPSED?u=.9*vv.HEIGHT:n.status_===r.status.DEFAULT?u=.45*vv.HEIGHT:n.status_===r.status.FULL&&(u=0),i.classList.add("m-no-animation")}),!1),s.addEventListener("touchmove",(function(t){t.preventDefault(),n.touchY=t.touches[0].clientY;var r=n.touchY-e;i.style.top="".concat(u+r,"px")}),!1),s.addEventListener("touchend",(function(t){t.preventDefault(),n.manageCollapsiblePopup_(e,n.touchY)}),!1);var l=window.matchMedia("(max-width: 768px)");setTimeout((function(){return n.manageTransform(l,i)}),10),l.addEventListener("change",(function(t){n.manageTransform(t,i)})),s.addEventListener("mouseup",(function(t){t.preventDefault(),n.tabs_.length<=1&&(n.status_===r.status.COLLAPSED?n.setStatus_(r.status.DEFAULT):n.status_===r.status.DEFAULT?n.setStatus_(r.status.FULL):n.setStatus_(r.status.COLLAPSED))}))}}},{key:"setStatus_",value:function(t){t!==this.status_&&(this.element_.classList.remove(this.status_),this.status_=t,this.element_.classList.add(this.status_),this.element_.style.top="",this.element_.classList.remove("m-no-animation"),vv.WIDTH<=M.config.MOBILE_WIDTH&&this.getImpl().centerByStatus(t,this.coord_))}},{key:"manageTransform",value:function(t,e){e&&e.parentElement&&(t.matches?e.parentElement.classList.add("unsetTransform"):e.parentElement.classList.remove("unsetTransform"))}},{key:"manageCollapsiblePopup_",value:function(t,e){var n=100*e/vv.HEIGHT;100*Math.abs(t-e)/vv.HEIGHT>10?this.status_===r.status.COLLAPSED?n<45?this.setStatus_(r.status.FULL):n<85?this.setStatus_(r.status.DEFAULT):this.setStatus_(r.status.COLLAPSED):this.status_===r.status.DEFAULT?n>45?this.setStatus_(r.status.COLLAPSED):n<45?this.setStatus_(r.status.FULL):this.setStatus_(r.status.DEFAULT):this.status_===r.status.FULL&&(n>45?this.setStatus_(r.status.COLLAPSED):n>0?this.setStatus_(r.status.DEFAULT):this.setStatus_(r.status.FULL)):this.setStatus_(this.status_)}},{key:"getCoordinate",value:function(){return this.coord_}},{key:"setCoordinate",value:function(t){this.coord_=t,bz(this.element_)||this.getImpl().show(t)}},{key:"destroy",value:function(){this.tabs_.length=0,this.coord_=null,this.fire("destroy")}}]),r}(_h);Dv.status={},Dv.status.COLLAPSED="m-collapsed",Dv.status.DEFAULT="m-default",Dv.status.FULL="m-full";var Bv=Dv,zv=r(203),Gv=r.n(zv);function qv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Uv=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text_=e,this.coord_=[r.x,r.y],this.popup_=null,this.facadeMap_=null,this.panMapIfOutOfView=n}var e,r,n;return e=t,(r=[{key:"show",value:function(t){this.facadeMap_=t;var e=Bh(Gv.a,{vars:{info:this.text_},parseToHtml:!1});t.removePopup(),this.popup_=new Bv({panMapIfOutOfView:this.panMapIfOutOfView}),this.popup_.addTab({icon:"g-cartografia-comentarios",title:"Información",content:e}),t.addPopup(this.popup_,this.coord_)}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"getPopup",value:function(){return this.popup_}},{key:"getCoordinate",value:function(){var t=this.coord;return bz(t)&&(t=this.getPopup().getCoordinate()),t}},{key:"setCoordinate",value:function(t){var e=this.getPopup();bz(e)||e.setCoordinate(t)}}])&&qv(e.prototype,r),n&&qv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vv(t){return(Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yv(t,e){return(Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Xv(t);if(e){var i=Xv(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Hv(this,r)}}function Hv(t,e){if(e&&("object"===Vv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Xv(t){return(Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yv(t,e)}(o,t);var e,r,n,i=Zv(o);function o(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=new Uv(t,e,r);return i.call(this,n)}return e=o,(r=[{key:"hide",value:function(){this.getImpl().hide()}},{key:"show",value:function(t){this.getImpl().show(t)}},{key:"getPopup",value:function(){return this.getImpl().getPopup()}},{key:"getCoordinate",value:function(){return this.getImpl().getCoordinate()}},{key:"setCoordinate",value:function(t){this.getImpl().coordinate=t}}])&&Wv(e.prototype,r),n&&Wv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h);Kv.POPUP_TEMPLATE="label_popup.html";var Jv=Kv;function $v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qv(t,e,r){return e&&$v(t.prototype,e),r&&$v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function t_(t){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e_=Qv((function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),bz(e)&&hh(Oh("exception").no_param),this.container=function t(e){var r;return Mz(e)?r=document.getElementById(e):xz(e)?bz(e.id)?bz(e.container)?hh(Oh("exception").no_container):r=t(e.container):r=document.getElementById(e.id):hh("El tipo del parámetro container no es válido: ".concat(t_(e))),bz(r)&&hh(Oh("exception").no_id_container),r}(e),this.layers=(Mz(r=e)?n=Oz("layers",r):xz(r)?n=r.layers:hh("El tipo del parámetro container no es válido: ".concat(t_(r))),n),this.wmc=function(t){var e;return Mz(t)?(e=Oz("wmc",t),bz(e)&&(e=Oz("wmcfile",t)),bz(e)&&(e=Oz("wmcfiles",t))):xz(t)?(e=t.wmc,bz(e)&&(e=t.wmcfile),bz(e)&&(e=t.wmcfiles)):hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.wms=function(t){var e;return Mz(t)?e=Oz("wms",t):xz(t)?e=t.wms:hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.wmts=function(t){var e;return Mz(t)?e=Oz("wmts",t):xz(t)?e=t.wmts:hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.kml=function(t){var e;return Mz(t)?e=Oz("kml",t):xz(t)?e=t.kml:hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.controls=function(t){var e;return Mz(t)?e=Oz("controls",t):xz(t)?e=t.controls:hh("El tipo del parámetro controls no es válido: ".concat(t_(t))),e}(e),this.getfeatureinfo=function(t){var e;return Mz(t)?e=Oz("getfeatureinfo",t):xz(t)?(e=t.getfeatureinfo,!yz(e)&&bz(e)&&(e="plain")):hh("El tipo del parámetro controls no es válido: ".concat(t_(t))),e}(e),this.maxExtent=function(t){var e;return Mz(t)?(e=Oz("maxExtent",t),bz(e)&&(e=Oz("maxextent",t))):xz(t)?(e=t.maxExtent,bz(e)&&(e=t.maxextent)):hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.bbox=function(t){var e;return Mz(t)?e=Oz("bbox",t):xz(t)?e=t.bbox:hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.zoom=function(t){var e;return Mz(t)?e=Oz("zoom",t):xz(t)?e=t.zoom:hh("El tipo del parámetro zoom no es válido: ".concat(t_(t))),e}(e),this.minZoom=function(t){var e;return Mz(t)?e=Oz("minZoom",t):xz(t)?e=t.minZoom:hh("El tipo del parámetro minZoom no es válido: ".concat(t_(t))),e}(e),this.maxZoom=function(t){var e;return Mz(t)?e=Oz("maxZoom",t):xz(t)?e=t.maxZoom:hh("El tipo del parámetro maxZoom no es válido: ".concat(t_(t))),e}(e),this.center=function(t){var e;return Mz(t)?e=Oz("center",t):xz(t)?e=t.center:hh("El tipo del parámetro center no es válido: ".concat(t_(t))),e}(e),this.resolutions=function(t){var e;return Mz(t)?e=Oz("resolutions",t):xz(t)?e=t.resolutions:hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.projection=function(t){var e;return Mz(t)?e=Oz("projection",t):xz(t)?e=t.projection:hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.label=function(t){var e;return Mz(t)?e=Oz("label",t):xz(t)?e=t.label:hh("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.ticket=function(t){var e;return Mz(t)?e=Oz("ticket",t):xz(t)?e=t.ticket:hh("El tipo del parámetro ticket no es válido: ".concat(t_(t))),e}(e)}));function r_(t){return(r_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n_(t){return function(t){if(Array.isArray(t))return i_(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i_(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a_(t,e){return(a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=l_(t);if(e){var i=l_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u_(this,r)}}function u_(t,e){if(e&&("object"===r_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l_(t){return(l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a_(t,e)}(o,t);var e,r,n,i=s_(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,e)).options_=t,r.canvas_=document.createElement("canvas"),r.updateCanvasPromise_=null,r.layer_=null,r}return e=o,n=[{key:"setValue",value:function(t,e,r){var n=r,i=t,a=_z(e)?e:e.split("."),s=a.length,u=a[0];1===s?(_z(n)?n=n_(n):xz(n)&&(n=Object.assign({},n)),i[u]=n):s>1&&(bz(i[u])&&(i[u]={}),o.setValue(i[u],a.slice(1,s),n))}},{key:"deserialize",value:function(t){var e=decodeURIComponent(escape(window.atob(t))),r=JSON.parse(e),n=r.parameters,i=r.deserializedMethod;return new Function("serializedParams","return ".concat(i,"(serializedParams)"))(n)}}],(r=[{key:"canvas",get:function(){return this.canvas_}},{key:"apply",value:function(t){this.layer_=t,this.getImpl().applyToLayer(t),this.updateCanvas()}},{key:"unapply",value:function(t){}},{key:"get",value:function(t){var e;if(e=this.options_[t],bz(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return bz(t)||(r=t[e],t instanceof o&&(r=t.get(e))),r}),this))}return e}},{key:"set",value:function(t,e){var r=this.get(t);return o.setValue(this.options_,t,e),bz(this.layer_)||this.getImpl().updateFacadeOptions(this.options_),bz(this.feature_)||this.applyToFeature(this.feature_),this.fire("change",[t,r,e]),this.refresh(),this}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;bz(t)||(this.layer_=t),bz(this.layer_)||(this.apply(this.layer_),this.updateCanvas())}},{key:"getOptions",value:function(){return this.options_}},{key:"toImage",value:function(){var t,e=this;if(bz(this.updateCanvasPromise_))if(bz(this.options_.icon)||bz(this.options_.icon.src))t=this.canvas_.toDataURL("png");else{var r=new Image;r.crossOrigin="Anonymous";var n=this.canvas_;r.onload=function(){n.getContext("2d").drawImage(e,0,0,50,50)},r.src=this.options_.icon.src,t=this.canvas_.toDataURL("png")}else t=this.updateCanvasPromise_.then((function(){return e.canvas_.toDataURL("png")}));return t}},{key:"updateCanvas",value:function(){this.updateCanvasPromise_=this.getImpl().updateCanvas(this.canvas_)}},{key:"equals",value:function(t){return this.constructor===t.constructor}},{key:"clone",value:function(){var t={};Zz(t,this.options_);var e=new(0,this.getImpl().constructor)(t);return new this.constructor(t,e)}},{key:"toJSON",value:function(){return{parameters:[Jz(this.getOptions())],deserializedMethod:this.getDeserializedMethod_()}}},{key:"serialize",value:function(){return window.btoa(unescape(encodeURIComponent(JSON.stringify(this))))}}])&&o_(e.prototype,r),n&&o_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h),h_=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return _r()},t.prototype.getImage=function(t){return _r()},t.prototype.getHitDetectionImage=function(t){return _r()},t.prototype.getImageState=function(){return _r()},t.prototype.getImageSize=function(){return _r()},t.prototype.getHitDetectionImageSize=function(){return _r()},t.prototype.getOrigin=function(){return _r()},t.prototype.getSize=function(){return _r()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){_r()},t.prototype.load=function(){_r()},t.prototype.unlistenImageChange=function(t){_r()},t}(),f_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p_=function(t){function e(e){var r=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(r=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.anchor_=null,r.size_=null,r.imageSize_=null,r.hitDetectionImageSize_=null,r.render(),r}return f_(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return bc},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e="round",r="round",n=0,i=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t="#000"),t=Kl(t),void 0===(a=this.stroke_.getWidth())&&(a=1),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(r=this.stroke_.getLineJoin())&&(r="round"),void 0===(e=this.stroke_.getLineCap())&&(e="round"),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var s=2*(this.radius_+a)+1,u={strokeStyle:t,strokeWidth:a,size:s,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:r,miterLimit:n},l=Bs(s,s);this.canvas_=l.canvas;var c=s=this.canvas_.width,h=this.getDisplacement();this.draw_(u,l,0,0),this.createHitDetectionCanvas_(u),this.anchor_=[s/2-h[0],s/2+h[1]],this.size_=[s,s],this.imageSize_=[c,c]},e.prototype.draw_=function(t,e,r,n){var i,o,a;e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(s*=2),i=0;i<=s;i++)o=2*i*Math.PI/s-Math.PI/2+this.angle_,a=i%2==0?this.radius_:u,e.lineTo(t.size/2+a*Math.cos(o),t.size/2+a*Math.sin(o))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l="#000"),e.fillStyle=Kl(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=Vl(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var n=Bs(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,r,n){e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var i=this.points_;if(i===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(i*=2);var a=void 0,s=void 0,u=void 0;for(a=0;a<=i;a++)u=2*a*Math.PI/i-Math.PI/2+this.angle_,s=a%2==0?this.radius_:o,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(h_),d_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m_=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return d_(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(p_),y_=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),g_=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();function v_(t){return(v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var __=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=M_,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===v_(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=M_,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();var b_=null;function w_(t,e){if(!b_){var r=new y_({color:"rgba(255,255,255,0.4)"}),n=new g_({color:"#3399CC",width:1.25});b_=[new __({image:new m_({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return b_}function x_(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t[dr.POLYGON]=[new __({fill:new y_({color:[255,255,255,.5]})})],t[dr.MULTI_POLYGON]=t[dr.POLYGON],t[dr.LINE_STRING]=[new __({stroke:new g_({color:e,width:5})}),new __({stroke:new g_({color:r,width:3})})],t[dr.MULTI_LINE_STRING]=t[dr.LINE_STRING],t[dr.CIRCLE]=t[dr.POLYGON].concat(t[dr.LINE_STRING]),t[dr.POINT]=[new __({image:new m_({radius:6,fill:new y_({color:r}),stroke:new g_({color:e,width:1.5})}),zIndex:1/0})],t[dr.MULTI_POINT]=t[dr.POINT],t[dr.GEOMETRY_COLLECTION]=t[dr.POLYGON].concat(t[dr.LINE_STRING],t[dr.POINT]),t}function M_(t){return t.getGeometry()}var S_=__,E_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O_="renderOrder",T_=function(t){function e(e){var r=this,n=e||{},i=Ln({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return E_(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(O_)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(O_,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:w_,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var r;if(Array.isArray(t))r=t;else Er("function"==typeof t.getZIndex,41),r=[t];e=function(){return r}}return e}(this.style_),this.changed()},e}(wu),P_={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},I_=[P_.FILL],k_=[P_.STROKE],R_=[P_.BEGIN_PATH],L_=[P_.CLOSE_PATH],C_=P_,A_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),N_=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=r,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return A_(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,r,n,i,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=n);var u,l,c,h=t[e],f=t[e+1],p=this.tmpCoordinate_,d=!0;for(u=e+n;u<r;u+=n)p[0]=t[u],p[1]=t[u+1],(c=Ur(s,p))!==l?(d&&(this.coordinates[a++]=h,this.coordinates[a++]=f),this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):c===Rr?(this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):d=!0,h=p[0],f=p[1],l=c;return(i&&d||u===e+n)&&(this.coordinates[a++]=h,this.coordinates[a++]=f),a},e.prototype.drawCustomCoordinates_=function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],u=this.appendFlatCoordinates(t,e,s,n,!1,!1);i.push(u),e=s}return e},e.prototype.drawCustom=function(t,e,r){this.beginGeometry(t,e);var n,i,o,a,s,u=t.getType(),l=t.getStride(),c=this.coordinates.length;if(u==dr.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var f=0,p=h.length;f<p;++f){var d=[];s=this.drawCustomCoordinates_(n,s,h[f],l,d),a.push(d)}this.instructions.push([C_.CUSTOM,c,a,t,r,os])}else u==dr.POLYGON||u==dr.MULTI_LINE_STRING?(o=[],n=u==dr.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),l,o),this.instructions.push([C_.CUSTOM,c,o,t,r,is])):u==dr.LINE_STRING||u==dr.MULTI_POINT?(n=t.getFlatCoordinates(),i=this.appendFlatCoordinates(n,0,n.length,l,!1,!1),this.instructions.push([C_.CUSTOM,c,i,t,r,ns])):u==dr.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),i=this.coordinates.length,this.instructions.push([C_.CUSTOM,c,i,t,r]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var r=t.getExtent();this.beginGeometryInstruction1_=[C_.BEGIN_GEOMETRY,e,0,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[C_.BEGIN_GEOMETRY,e,0,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,i=e.length,o=-1;for(t=0;t<i;++t)(n=(r=e[t])[0])==C_.END_GEOMETRY?o=t:n==C_.BEGIN_GEOMETRY&&(r[2]=t,bi(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=Kl(n||"#000")}else r.fillStyle=void 0;if(e){var i=e.getColor();r.strokeStyle=Kl(i||"#000");var o=e.getLineCap();r.lineCap=void 0!==o?o:"round";var a=e.getLineDash();r.lineDash=a?a.slice():$l;var s=e.getLineDashOffset();r.lineDashOffset=s||0;var u=e.getLineJoin();r.lineJoin=void 0!==u?u:"round";var l=e.getWidth();r.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,r=[C_.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[C_.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,n=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||i!=t.currentLineDash&&!Mi(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[C_.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Dr(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Fr(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Jl),j_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F_=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return j_(e,t),e.prototype.drawCoordinates_=function(t,e,r,n){return this.appendFlatCoordinates(t,e,r,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,n);this.instructions.push([C_.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([C_.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,n);this.instructions.push([C_.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([C_.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),n=t.getSize(),i=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=r[0],this.anchorY_=r[1],this.declutterGroups_=e,this.hitDetectionImage_=i,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(N_),D_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),B_=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return D_(e,t),e.prototype.drawFlatCoordinates_=function(t,e,r,n){var i=this.coordinates.length,o=this.appendFlatCoordinates(t,e,r,n,!1,!1),a=[C_.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r},e.prototype.drawLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([C_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],R_);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(k_),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([C_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],R_);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(a,u,o[l],s);this.hitDetectionInstructions.push(k_),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(k_),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(k_),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(R_)},e}(N_),z_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),G_=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return z_(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,r,n){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=r.length;this.instructions.push(R_),this.hitDetectionInstructions.push(R_);for(var u=0;u<s;++u){var l=r[u],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,l,n,!0,!a),f=[C_.MOVE_TO_LINE_TO,c,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(L_),this.hitDetectionInstructions.push(L_)),e=l}return o&&(this.instructions.push(I_),this.hitDetectionInstructions.push(I_)),a&&(this.instructions.push(k_),this.hitDetectionInstructions.push(k_)),e},e.prototype.drawCircle=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([C_.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([C_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,a,!1,!1);var u=[C_.CIRCLE,s];this.instructions.push(R_,u),this.hitDetectionInstructions.push(R_,u),void 0!==r.fillStyle&&(this.instructions.push(I_),this.hitDetectionInstructions.push(I_)),void 0!==r.strokeStyle&&(this.instructions.push(k_),this.hitDetectionInstructions.push(k_)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([C_.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([C_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([C_.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([C_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(a,u,o[l],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,n=0,i=r.length;n<i;++n)r[n]=us(r[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(N_);function q_(t,e,r,n,i){var o,a,s,u,l,c,h,f,p,d=r,m=r,y=0,g=0,v=r;for(o=r;o<n;o+=i){var _=e[o],b=e[o+1];void 0!==u&&(f=_-u,p=b-l,s=Math.sqrt(f*f+p*p),void 0!==c&&(g+=a,Math.acos((c*f+h*p)/(a*s))>t&&(g>y&&(y=g,d=v,m=o),g=0,v=o-i)),a=s,c=f,h=p),u=_,l=b}return(g+=s)>y?[v,o]:[d,m]}var U_="point",V_="line",W_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y_={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Z_={Circle:G_,Default:N_,Image:F_,LineString:B_,Polygon:G_,Text:function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return W_(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var r=this.textFillState_,n=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(r||n)){var o,a,s=this.coordinates.length,u=t.getType(),l=null,c=2,h=2;if(i.placement===V_){if(!dn(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(l=t.getFlatCoordinates(),h=t.getStride(),u==dr.LINE_STRING)f=[l.length];else if(u==dr.MULTI_LINE_STRING)f=t.getEnds();else if(u==dr.POLYGON)f=t.getEnds().slice(0,1);else if(u==dr.MULTI_POLYGON){var p=t.getEndss();for(f=[],o=0,a=p.length;o<a;++o)f.push(p[o][0])}this.beginGeometry(t,e);for(var d=i.textAlign,m=0,y=void 0,g=0,v=f.length;g<v;++g){if(null==d){var _=q_(i.maxAngle,l,m,f[g],h);m=_[0],y=_[1]}else y=f[g];for(o=m;o<y;o+=h)this.coordinates.push(l[o],l[o+1]);c=this.coordinates.length,m=f[g];var b=this.declutterGroups_?0===g?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(s,c,b),s=c}this.endGeometry(e)}else{var w=null;switch(i.overflow||(w=[]),u){case dr.POINT:case dr.MULTI_POINT:c=(l=t.getFlatCoordinates()).length;break;case dr.LINE_STRING:l=t.getFlatMidpoint();break;case dr.CIRCLE:l=t.getCenter();break;case dr.MULTI_LINE_STRING:c=(l=t.getFlatMidpoints()).length;break;case dr.POLYGON:l=t.getFlatInteriorPoint(),i.overflow||w.push(l[2]/this.resolution),h=3;break;case dr.MULTI_POLYGON:var x=t.getFlatInteriorPoints();for(l=[],o=0,a=x.length;o<a;o+=3)i.overflow||w.push(x[o+2]/this.resolution),l.push(x[o],x[o+1]);if(0==(c=l.length))return}c=this.appendFlatCoordinates(l,0,c,h,!1,!1),this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var M=this.pixelRatio;this.instructions.push([C_.DRAW_IMAGE,s,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,i.padding==Ql?Ql:i.padding.map((function(t){return t*M})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.hitDetectionInstructions.push([C_.DRAW_IMAGE,s,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,i.padding,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||"center",textBaseline:e.textBaseline||"middle",scale:e.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,e,r){var n=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,l=Y_[i.textBaseline],c=this.textOffsetY_*u,h=this.text_,f=i.scale,p=n?n.lineWidth*f/2:0;this.instructions.push([C_.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,u,c,o,p*u,h,a,1]),this.hitDetectionInstructions.push([C_.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,1,c,o,p,h,a,1/u])},e.prototype.setTextStyle=function(t,e){var r,n,i;if(t){this.declutterGroups_=e;var o=t.getFill();o?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=Kl(o.getColor()||"#000")):(n=null,this.textFillState_=n);var a=t.getStroke();if(a){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var s=a.getLineDash(),u=a.getLineDashOffset(),l=a.getWidth(),c=a.getMiterLimit();i.lineCap=a.getLineCap()||"round",i.lineDash=s?s.slice():$l,i.lineDashOffset=void 0===u?0:u,i.lineJoin=a.getLineJoin()||"round",i.lineWidth=void 0===l?1:l,i.miterLimit=void 0===c?10:c,i.strokeStyle=Kl(a.getColor()||"#000")}else i=null,this.textStrokeState_=i;r=this.textState_;var h=t.getFont()||"10px sans-serif";sc(h);var f=t.getScale();r.overflow=t.getOverflow(),r.font=h,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||"middle",r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||Ql,r.scale=void 0===f?1:f;var p=t.getOffsetX(),d=t.getOffsetY(),m=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0===y?0:y,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:wr(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+wr(n.fillStyle):""}else this.text_=""},e}(N_)},H_=function(){function t(t,e,r,n,i){this.declutter_=i,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[[1/0,1/0,-1/0,-1/0]],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var i=r[n].finish();t[e][n]=i}}return t},t.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var i=n[e];void 0===i&&(i=new(0,Z_[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=i);return i},t}();function X_(t,e,r,n,i,o,a,s,u,l,c){for(var h,f,p=[],d=t[e]>t[r-n],m=i.length,y=t[e],g=t[e+1],v=t[e+=n],_=t[e+1],b=0,w=Math.sqrt(Math.pow(v-y,2)+Math.pow(_-g,2)),x=!1,M=0;M<m;++M){for(var S=i[h=d?m-M-1:M],E=s*u(l,S,c),O=o+E/2;e<r-n&&b+w<O;)y=v,g=_,v=t[e+=n],_=t[e+1],b+=w,w=Math.sqrt(Math.pow(v-y,2)+Math.pow(_-g,2));var T=O-b,P=Math.atan2(_-g,v-y);if(d&&(P+=P>0?-Math.PI:Math.PI),void 0!==f){var I=P-f;if(x=x||0!==I,I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>a)return null}f=P;var k=T/w,R=pr(y,v,k),L=pr(g,_,k);p[h]=[R,L,E/2,P,S],o+=E}return x?p:[[p[0][0],p[0][1],p[0][2],p[0][3],i]]}var K_=r(32),J_=r.n(K_),$_=[1/0,1/0,-1/0,-1/0],Q_=[1,0,0,1,0,0],tb=[],eb=[],rb=[],nb=[],ib=function(){function t(t,e,r,n){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,n){var i=t+e+r+n;if(this.labels_[i])return this.labels_[i];var o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[e],u=this.pixelRatio,l=s.scale*u,c=Y_[s.textAlign||"center"],h=n&&o.lineWidth?o.lineWidth:0,f=t.split("\n"),p=f.length,d=[],m=function(t,e,r){for(var n=e.length,i=0,o=0;o<n;++o){var a=cc(t,e[o]);i=Math.max(i,a),r.push(a)}return i}(s.font,f,d),y=uc(s.font),g=y*p,v=m+h,_=[],b={width:Math.ceil((v+2)*l),height:Math.ceil((g+h)*l),contextInstructions:_};(1!=l&&_.push("scale",[l,l]),_.push("font",s.font),n)&&(_.push("strokeStyle",o.strokeStyle),_.push("lineWidth",h),_.push("lineCap",o.lineCap),_.push("lineJoin",o.lineJoin),_.push("miterLimit",o.miterLimit),(yo?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(_.push("setLineDash",[o.lineDash]),_.push("lineDashOffset",o.lineDashOffset)));r&&_.push("fillStyle",a.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");var w,x=.5-c,M=c*v+x*h;if(n)for(w=0;w<p;++w)_.push("strokeText",[f[w],M+x*d[w],.5*(h+y)+w*y]);if(r)for(w=0;w<p;++w)_.push("fillText",[f[w],M+x*d[w],.5*(h+y)+w*y]);return this.labels_[i]=b,b},t.prototype.replayTextBackground_=function(t,e,r,n,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g){var v=y||g;e-=i*=f,r-=o*=f;var _=d+l>n.width?n.width-l:d,b=s+c>n.height?n.height-c:s,w=m[3]+_*f+m[1],x=m[0]+b*f+m[2],M=e-m[3],S=r-m[0];(v||0!==h)&&(tb[0]=M,nb[0]=M,tb[1]=S,eb[1]=S,eb[0]=M+w,rb[0]=eb[0],rb[1]=S+x,nb[1]=rb[1]);var E=null;if(0!==h){var O=e+i,T=r+o;E=Da(Q_,O,T,1,1,h,-O,-T),ja(Q_,tb),ja(Q_,eb),ja(Q_,rb),ja(Q_,nb),Wr(Math.min(tb[0],eb[0],rb[0],nb[0]),Math.min(tb[1],eb[1],rb[1],nb[1]),Math.max(tb[0],eb[0],rb[0],nb[0]),Math.max(tb[1],eb[1],rb[1],nb[1]),$_)}else Wr(M,S,M+w,S+x,$_);var P=t.canvas,I=g?g[2]*f/2:0,k=$_[0]-I<=P.width&&$_[2]+I>=0&&$_[1]-I<=P.height&&$_[3]+I>=0;if(p&&(e=Math.round(e),r=Math.round(r)),a){if(!k&&1==a[4])return;Kr(a,$_);var R=k?[t,E?E.slice(0):null,u,n,l,c,_,b,e,r,f]:null;R&&(v&&R.push(y,g,tb.slice(0),eb.slice(0),rb.slice(0),nb.slice(0)),a.push(R))}else k&&(v&&this.replayTextBackground_(t,tb,eb,rb,nb,y,g),pc(t,E,u,n,l,c,_,b,e,r,f))},t.prototype.fill_=function(t){if(this.alignFill_){var e=ja(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,r,n){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new J_.a(9)),!n.collides(o)){n.insert(o);for(var a=5,s=t.length;a<s;++a){var u=t[a],l=u[0],c=l.globalAlpha;c!==r&&(l.globalAlpha=r),u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),pc.apply(void 0,u),c!==r&&(l.globalAlpha=c)}}t.length=5,Yr(t)}}return n},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,n){var i=this.textStates[e],o=this.createLabel(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,u=Y_[i.textAlign||"center"],l=Y_[i.textBaseline||"middle"],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:u*(o.width/s-2*i.scale)+2*(.5-u)*c,anchorY:l*o.height/s+2*(.5-l)*c}},t.prototype.execute_=function(t,e,r,n,i,o){var a,s,u;this.declutterItems.length=0,this.pixelCoordinates_&&Mi(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Ia(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),s=this.renderedTransform_,u=e,s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5]);for(var l,c,h,f,p,d,m,y,g,v,_,b,w,x,M,S,E,O=0,T=r.length,P=0,I=0,k=0,R=null,L=null,C=this.coordinateCache_,A=this.viewRotation_,N=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,j={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:A},F=this.instructions!=r||this.overlaps?0:200;O<T;){var D=r[O];switch(D[0]){case C_.BEGIN_GEOMETRY:(M=D[1]).getGeometry()?void 0===o||dn(o,D[3])?++O:O=D[2]+1:O=D[2];break;case C_.BEGIN_PATH:I>F&&(this.fill_(t),I=0),k>F&&(t.stroke(),k=0),I||k||(t.beginPath(),f=NaN,p=NaN),++O;break;case C_.CIRCLE:var B=a[P=D[1]],z=a[P+1],G=a[P+2]-B,q=a[P+3]-z,U=Math.sqrt(G*G+q*q);t.moveTo(B+U,z),t.arc(B,z,U,0,2*Math.PI,!0),++O;break;case C_.CLOSE_PATH:t.closePath(),++O;break;case C_.CUSTOM:P=D[1],l=D[2];var V=D[3],W=D[4],Y=6==D.length?D[5]:void 0;j.geometry=V,j.feature=M,O in C||(C[O]=[]);var Z=C[O];Y?Y(a,P,l,2,Z):(Z[0]=a[P],Z[1]=a[P+1],Z.length=2),W(Z,j),++O;break;case C_.DRAW_IMAGE:P=D[1],l=D[2],v=D[3],c=D[4],h=D[5],g=i?null:D[6];var H=D[7],X=D[8],K=D[9],J=D[10],$=D[11],Q=D[12],tt=D[13],et=D[14];if(!v&&D.length>=19){_=D[18],b=D[19],w=D[20],x=D[21];var rt=this.drawLabelWithPointPlacement_(_,b,w,x);v=rt.label,D[3]=v;var nt=D[22];c=(rt.anchorX-nt)*this.pixelRatio,D[4]=c;var it=D[23];h=(rt.anchorY-it)*this.pixelRatio,D[5]=h,H=v.height,D[7]=H,et=v.width,D[14]=et}var ot=void 0;D.length>24&&(ot=D[24]);var at=void 0,st=void 0,ut=void 0;D.length>16?(at=D[15],st=D[16],ut=D[17]):(at=Ql,st=!1,ut=!1),$&&N?Q+=A:$||N||(Q-=A);for(var lt=0,ct=0;P<l;P+=2)if(!(ot&&ot[lt++]<et/this.pixelRatio)){if(g){var ht=Math.floor(ct);g.length<ht+1&&((y=[1/0,1/0,-1/0,-1/0]).push(g[0][4]),g.push(y)),y=g[ht]}this.replayImageOrLabel_(t,a[P],a[P+1],v,c,h,y,H,X,K,J,Q,tt,n,et,at,st?R:null,ut?L:null),y&&(ct===Math.floor(ct)&&this.declutterItems.push(this,y,M),ct+=1/y[4])}++O;break;case C_.DRAW_CHARS:var ft=D[1],pt=D[2],dt=D[3];y=i?null:D[4];var mt=D[5];x=D[6];var yt=D[7],gt=D[8],vt=D[9];w=D[10];var _t=D[11];_=D[12],b=D[13];var bt=D[14],wt=this.textStates[b],xt=wt.font,Mt=wt.scale*gt,St=void 0;xt in this.widths_?St=this.widths_[xt]:(St={},this.widths_[xt]=St);var Et=yp(a,ft,pt,2),Ot=Mt*hc(xt,_,St);if(mt||Ot<=Et){var Tt=this.textStates[b].textAlign,Pt=X_(a,ft,pt,2,_,(Et-Ot)*Y_[Tt],yt,Mt,hc,xt,St);if(Pt){var It=void 0,kt=void 0,Rt=void 0,Lt=void 0,Ct=void 0;if(w)for(It=0,kt=Pt.length;It<kt;++It)Rt=(Ct=Pt[It])[4],Lt=this.createLabel(Rt,b,"",w),c=Ct[2]+_t,h=dt*Lt.height+2*(.5-dt)*_t-vt,this.replayImageOrLabel_(t,Ct[0],Ct[1],Lt,c,h,y,Lt.height,1,0,0,Ct[3],bt,!1,Lt.width,Ql,null,null);if(x)for(It=0,kt=Pt.length;It<kt;++It)Rt=(Ct=Pt[It])[4],Lt=this.createLabel(Rt,b,x,""),c=Ct[2],h=dt*Lt.height-vt,this.replayImageOrLabel_(t,Ct[0],Ct[1],Lt,c,h,y,Lt.height,1,0,0,Ct[3],bt,!1,Lt.width,Ql,null,null)}}this.declutterItems.push(this,y,M),++O;break;case C_.END_GEOMETRY:if(void 0!==i){var At=i(M=D[1]);if(At)return At}++O;break;case C_.FILL:F?I++:this.fill_(t),++O;break;case C_.MOVE_TO_LINE_TO:for(P=D[1],l=D[2],S=a[P],m=(E=a[P+1])+.5|0,(d=S+.5|0)===f&&m===p||(t.moveTo(S,E),f=d,p=m),P+=2;P<l;P+=2)d=(S=a[P])+.5|0,m=(E=a[P+1])+.5|0,P!=l-2&&d===f&&m===p||(t.lineTo(S,E),f=d,p=m);++O;break;case C_.SET_FILL_STYLE:R=D,this.alignFill_=D[2],I&&(this.fill_(t),I=0,k&&(t.stroke(),k=0)),t.fillStyle=D[1],++O;break;case C_.SET_STROKE_STYLE:L=D,k&&(t.stroke(),k=0),this.setStrokeStyle_(t,D),++O;break;case C_.STROKE:F?k++:t.stroke(),++O;break;default:++O}}I&&this.fill_(t),k&&t.stroke()},t.prototype.execute=function(t,e,r,n){this.viewRotation_=r,this.execute_(t,e,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,r,n,i){return this.viewRotation_=r,this.execute_(t,e,this.hitDetectionInstructions,!0,n,i)},t}(),ob=[Tc,Mc,Oc,Ec,Pc,Sc],ab=function(){function t(t,e,r,n,i,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(i)}return t.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);var n=t[e];for(var i in n){var o=n[i];r[i]=new ib(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,i=t.length;n<i;++n)if(t[n]in r)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o){var a=2*(n=Math.round(n))+1,s=Da(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Bs(a,a));var u,l=this.hitDetectionContext_;l.canvas.width!==a||l.canvas.height!==a?(l.canvas.width=a,l.canvas.height=a):l.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(Jr(u=[1/0,1/0,-1/0,-1/0],t),Fr(u,e*(this.renderBuffer_+n),u));var c,h=function(t){if(void 0!==sb[t])return sb[t];for(var e=2*t+1,r=new Array(e),n=0;n<e;n++)r[n]=new Array(e);var i=t,o=0,a=0;for(;i>=o;)ub(r,t+i,t+o),ub(r,t+o,t+i),ub(r,t-o,t+i),ub(r,t-i,t+o),ub(r,t-i,t-o),ub(r,t-o,t-i),ub(r,t+o,t-i),ub(r,t+i,t-o),o++,2*((a+=1+2*o)-i)+1>0&&(a+=1-2*(i-=1));return sb[t]=r,r}(n);function f(t){for(var e=l.getImageData(0,0,a,a).data,r=0;r<a;r++)for(var n=0;n<a;n++)if(h[r][n]&&e[4*(n*a+r)+3]>0){var s=void 0;return(!o||c!=Ec&&c!=Pc||-1!==o.indexOf(t))&&(s=i(t)),s||void l.clearRect(0,0,a,a)}}var p,d,m,y,g,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(gi),p=v.length-1;p>=0;--p){var _=v[p].toString();for(m=this.executorsByZIndex_[_],d=ob.length-1;d>=0;--d)if(void 0!==(y=m[c=ob[d]])&&(g=y.executeHitDetection(l,s,r,f,u)))return g}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],i=e[2],o=e[3],a=[r,n,r,o,i,o,i,n];return Ia(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return Nn(this.executorsByZIndex_)},t.prototype.execute=function(t,e,r,n,i,o){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(gi),this.maxExtent_&&(t.save(),this.clip(t,e));var s,u,l,c,h,f,p=i||ob;for(s=0,u=a.length;s<u;++s){var d=a[s].toString();for(h=this.executorsByZIndex_[d],l=0,c=p.length;l<c;++l){var m=p[l];if(void 0!==(f=h[m]))if(!o||m!=Ec&&m!=Pc)f.execute(t,e,r,n);else{var y=o[d];y?y.push(f,e.slice(0)):o[d]=[f,e.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),sb={0:[[!0]]};function ub(t,e,r){var n,i=Math.floor(t.length/2);if(e>=i)for(n=i;n<e;n++)t[n][r]=!0;else if(e<i)for(n=e+1;n<i;n++)t[n][r]=!0}function lb(t,e,r,n,i,o){for(var a=Object.keys(t).map(Number).sort(gi),s=0,u=a.length;s<u;++s)for(var l=t[a[s].toString()],c=void 0,h=0,f=l.length;h<f;){var p=l[h++];p!==c&&(c=p,o.push({items:p.declutterItems,opacity:n}));var d=l[h++];p.execute(e,d,r,i)}}var cb=ab,hb="fraction",fb="pixels",pb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),db=function(t){function e(e,r,n,i,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==i&&(s.image_.crossOrigin=i),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=n,s.src_=r,s.tainted_,s}return pb(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&this.imageState_===bc){t||(t=Bs(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Li)},e.prototype.handleImageError_=function(){this.imageState_=wc,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=bc,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],r=this.size_[1],n=Bs(e,r);n.fillRect(0,0,e,r),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==vc){this.imageState_=_c;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Mm(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var r=t.getImageData(0,0,this.image_.width,this.image_.height),n=r.data,i=this.color_[0]/255,o=this.color_[1]/255,a=this.color_[2]/255,s=0,u=n.length;s<u;s+=4)n[s]*=i,n[s+1]*=o,n[s+2]*=a;t.putImageData(r,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Ri);var mb="bottom-left",yb="bottom-right",gb="top-left",vb="top-right",_b=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bb=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.opacity?n.opacity:1,o=void 0!==n.rotation?n.rotation:0,a=void 0!==n.scale?n.scale:1,s=void 0!==n.rotateWithView&&n.rotateWithView;(r=t.call(this,{opacity:i,rotation:o,scale:a,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:s})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:gb,r.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:hb,r.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:hb,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var u=void 0!==n.img?n.img:null,l=void 0!==n.imgSize?n.imgSize:null,c=n.src;Er(!(void 0!==c&&u),4),Er(!u||u&&l,5),void 0!==c&&0!==c.length||!u||(c=u.src||wr(u)),Er(void 0!==c&&c.length>0,6);var h=void 0!==n.src?vc:bc;return r.color_=void 0!==n.color?Vl(n.color):null,r.iconImage_=function(t,e,r,n,i,o){var a=Xl.get(e,n,o);return a||(a=new db(t,e,r,n,i,o),Xl.set(e,n,o,a)),a}(u,c,l,r.crossOrigin_,h,r.color_),r.offset_=void 0!==n.offset?n.offset:[0,0],r.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:gb,r.origin_=null,r.size_=void 0!==n.size?n.size:null,r}return _b(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==hb||this.anchorYUnits_==hb){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==hb&&(t[0]*=e[0]),this.anchorYUnits_==hb&&(t[1]*=e[1])}if(this.anchorOrigin_!=gb){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=vb&&this.anchorOrigin_!=yb||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=mb&&this.anchorOrigin_!=yb||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=gb){var r=this.getSize(),n=this.iconImage_.getSize();if(!r||!n)return null;t=t.slice(),this.offsetOrigin_!=vb&&this.offsetOrigin_!=yb||(t[0]=n[0]-r[0]-t[0]),this.offsetOrigin_!=mb&&this.offsetOrigin_!=yb||(t[1]=n[1]-r[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Li,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Li,t)},e}(h_);function wb(t,e,r,n,i,o,a){var s=Bs(t[0]/2,t[1]/2);s.imageSmoothingEnabled=!1;for(var u=s.canvas,l=new gc(s,.5,i,null,a),c=r.length,h=Math.floor(16777215/c),f={},p=1;p<=c;++p){var d=r[p-1],m=d.getStyleFunction()||n;if(n){var y=m(d,o);if(y){Array.isArray(y)||(y=[y]);for(var g="#"+("000000"+(p*h).toString(16)).slice(-6),v=0,_=y.length;v<_;++v){var b=y[v],w=b.clone(),x=w.getFill();x&&x.setColor(g);var M=w.getStroke();M&&M.setColor(g),w.setText(void 0);var S=b.getImage();if(S){var E=S.getImageSize();if(!E)continue;var O=document.createElement("canvas");O.width=E[0],O.height=E[1];var T=O.getContext("2d",{alpha:!1});T.fillStyle=g;var P=T.canvas;T.fillRect(0,0,P.width,P.height),Bs(E?E[0]:P.width,E?E[1]:P.height).drawImage(P,0,0),w.setImage(new bb({img:P,imgSize:E,anchor:S.getAnchor(),anchorXUnits:fb,anchorYUnits:fb,offset:S.getOrigin(),size:S.getSize(),opacity:S.getOpacity(),scale:S.getScale(),rotation:S.getRotation(),rotateWithView:S.getRotateWithView()}))}var I=Number(w.getZIndex());(C=f[I])||(C={},f[I]=C,C[dr.POLYGON]=[],C[dr.CIRCLE]=[],C[dr.LINE_STRING]=[],C[dr.POINT]=[]);var k=w.getGeometryFunction()(d);k&&dn(i,k.getExtent())&&C[k.getType().replace("Multi","")].push(k,w)}}}}for(var R=Object.keys(f).map(Number).sort(gi),L=(p=0,R.length);p<L;++p){var C=f[R[p]];for(var A in C){var N=C[A];for(v=0,_=N.length;v<_;v+=2){l.setStyle(N[v+1]);for(var j=0,F=e.length;j<F;++j)l.setTransform(e[j]),l.drawGeometry(N[v])}}}return document.body.appendChild(s.canvas),s.getImageData(0,0,u.width,u.height)}function xb(t,e,r){var n=[];if(r){var i=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*r.width),o=r.data[i],a=r.data[i+1],s=r.data[i+2]+256*(a+256*o),u=Math.floor(16777215/e.length);s&&s%u==0&&n.push(e[s/u-1])}return n}var Mb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sb=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r}return Mb(e,t),e.prototype.useContainer=function(e,r,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,r,n)},e.prototype.renderFrame=function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,r){Na(t,e,0,0,r,0,0)}(this.pixelTransform,1/r,1/r),Ba(this.inversePixelTransform,this.pixelTransform);var i=za(this.pixelTransform);this.useContainer(e,i,n.opacity);var o=this.context,a=o.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&a.width>0&&(a.width=0),this.container;var u=Math.round(t.size[0]*r),l=Math.round(t.size[1]*r);a.width!=u||a.height!=l?(a.width=u,a.height=l,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,u,l),this.preRender(o,t);var c=t.extent,h=t.viewState,f=h.center,p=h.resolution,d=h.projection,m=h.rotation,y=d.getExtent(),g=this.getLayer().getSource(),v=!1;if(n.extent){var _=ui(n.extent,d);(v=!Gr(_,t.extent)&&dn(_,t.extent))&&this.clip(o,t,_)}var b=t.viewHints,w=!(b[ea]||b[ra]),x=this.getRenderTransform(f,p,m,r,u,l,0),M=this.getLayer().getDeclutter()?{}:null;if(s.execute(o,x,m,w,void 0,M),g.getWrapX()&&d.canWrapX()&&!Gr(y,c)){for(var S=c[0],E=pn(y),O=0,T=void 0;S<y[0];){T=E*--O;var P=this.getRenderTransform(f,p,m,r,u,l,T);s.execute(o,P,m,w,void 0,M),S+=E}for(O=0,S=c[2];S>y[2];){T=E*++O;var I=this.getRenderTransform(f,p,m,r,u,l,T);s.execute(o,I,m,w,void 0,M),S-=E}}if(M){var k=t.viewHints;lb(M,o,m,1,!(k[ea]||k[ra]),t.declutterItems)}v&&o.restore(),this.postRender(o,t);var R=n.opacity,L=this.container;return R!==parseFloat(L.style.opacity)&&(L.style.opacity=1===R?"":R),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,r){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];ja(this.pixelTransform,n);var i=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,u=this.renderedExtent_,l=this.getLayer(),c=[],h=n[0]/2,f=n[1]/2;c.push(this.getRenderTransform(i,o,a,.5,h,f,0).slice());var p=l.getSource(),d=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!Gr(d,u)){for(var m=u[0],y=pn(d),g=0,v=void 0;m<d[0];)v=y*--g,c.push(this.getRenderTransform(i,o,a,.5,h,f,v).slice()),m+=y;for(g=0,m=u[2];m>d[2];)v=y*++g,c.push(this.getRenderTransform(i,o,a,.5,h,f,v).slice()),m-=y}this.hitDetectionImageData_=wb(n,c,this.renderedFeatures_,l.getStyleFunction(),u,o,a)}e(xb(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(this.replayGroup_){var o=e.viewState.resolution,a=e.viewState.rotation,s=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,a,r,(function(t){var e=wr(t);if(!(e in u))return u[e]=!0,n(t,s)}),s.getDeclutter()?i:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource();if(!r)return!1;var n=t.viewHints[ea],i=t.viewHints[ra],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!a&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,u=t.viewState,l=u.projection,c=u.resolution,h=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=kc);var m=u.center.slice(),y=Fr(s,p*c),g=[y.slice()],v=l.getExtent();if(r.getWrapX()&&l.canWrapX()&&!Gr(v,t.extent)){var _=pn(v),b=Math.max(pn(y)/2,_);y[0]=v[0]-b,y[2]=v[2]+b,_a(m,l);var w=vn(g[0],l);w[0]<v[0]&&w[2]<v[2]?g.push([w[0]+_,w[1],w[2]+_,w[3]]):w[0]>v[0]&&w[2]>v[2]&&g.push([w[0]-_,w[1],w[2]-_,w[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&Gr(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x,M=new H_(Lc(c,h),y,c,h,e.getDeclutter()),S=ii();if(S){for(var E=0,O=g.length;E<O;++E)r.loadFeatures(si(g[E],l),c,S);x=Kn(S,l)}else for(E=0,O=g.length;E<O;++E)r.loadFeatures(g[E],c,l);var T=Rc(c,h),P=function(t){var r,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(r=n(t,c)),r){var i=this.renderFeature(t,T,r,M,x);this.dirty_=this.dirty_||i}}.bind(this),I=si(y,l),k=r.getFeaturesInExtent(I);d&&k.sort(d);for(E=0,O=k.length;E<O;++E)P(k[E]);this.renderedFeatures_=k;var R=M.finish(),L=new cb(y,c,h,r.getOverlaps(),R,e.getRenderBuffer());return this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=y,this.renderedRotation_=u.rotation,this.renderedCenter_=m,this.renderedProjection_=l,this.replayGroup_=L,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,r,n,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=Cc(n,t,r[a],e,this.boundHandleStyleImageChange_,i)||o;else o=Cc(n,t,r,e,this.boundHandleStyleImageChange_,i);return o},e}(Uf),Eb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ob=function(t){function e(e){return t.call(this,e)||this}return Eb(e,t),e.prototype.createRenderer=function(){return new Sb(this)},e}(T_),Tb=!1;function Pb(t,e,r,n){return function(i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(i,o,a):t,!0),e.getType()==pg&&(s.responseType="arraybuffer"),s.withCredentials=Tb,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var o=e.getType(),u=void 0;o==dg||o==mg?u=s.responseText:o==yg?(u=s.responseXML)||(u=(new DOMParser).parseFromString(s.responseText,"application/xml")):o==pg&&(u=s.response),u?r.call(this,e.readFeatures(u,{extent:i,featureProjection:a}),e.readProjection(u)):n.call(this)}else n.call(this)}.bind(this),s.onerror=function(){n.call(this)}.bind(this),s.send()}}function Ib(t,e){return Pb(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),Ti)}function kb(t,e){return[[-1/0,-1/0,1/0,1/0]]}var Rb="addfeature",Lb="changefeature",Cb="clear",Ab="removefeature",Nb=function(){function t(t){this.rbush_=new J_.a(t),this.items_={}}return t.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[wr(e)]=r},t.prototype.load=function(t,e){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var o=t[n],a=e[n],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[n]=s,this.items_[wr(a)]=s}this.rbush_.load(r)},t.prototype.remove=function(t){var e=wr(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},t.prototype.update=function(t,e){var r=this.items_[wr(e)];Xr([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r},t.prototype.isEmpty=function(){return Nn(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Wr(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),jb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fb=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return jb(e,t),e}(Ii),Db=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{attributions:n.attributions,projection:void 0,state:iu,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=Ti,r.format_=n.format,r.overlaps_=void 0===n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&(Er(r.format_,7),r.loader_=Ib(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:kb;var i,o,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=a?new Nb:null,r.loadedExtentsRtree_=new Nb,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(i=n.features).getArray()),a||void 0!==i||(i=new oo(o)),void 0!==o&&r.addFeaturesInternal(o),void 0!==i&&r.bindFeaturesCollection_(i),r}return jb(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=wr(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Fb(Rb,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[pi(e,Li,this.handleFeatureChange_,this),pi(e,fi,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var r=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=e),r&&(Er(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],n=[],i=0,o=t.length;i<o;i++){var a=wr(u=t[i]);this.addToIndex_(a,u)&&r.push(u)}i=0;for(var s=r.length;i<s;i++){var u;a=wr(u=r[i]);this.setupChangeEvents_(a,u);var l=u.getGeometry();if(l){var c=l.getExtent();e.push(c),n.push(u)}else this.nullGeometryFeatures_[a]=u}this.featuresRtree_&&this.featuresRtree_.load(e,n);i=0;for(var h=r.length;i<h;i++)this.dispatchEvent(new Fb(Rb,r[i]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(Rb,(function(r){e||(e=!0,t.push(r.feature),e=!1)})),this.addEventListener(Ab,(function(r){e||(e=!0,t.remove(r.feature),e=!1)})),t.addEventListener(ci,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(hi,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(mi)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new Fb(Cb);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,(function(r){return r.getGeometry().intersectsCoordinate(t)?e(r):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(r){if(r.getGeometry().intersectsExtent(t)){var n=e(r);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Nn(this.nullGeometryFeatures_)||wi(t,An(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],n=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],u=e||Ei;return this.featuresRtree_.forEachInExtent(s,(function(t){if(u(t)){var e=t.getGeometry(),l=a;if((a=e.closestPointXY(r,n,o,a))<l){i=t;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}})),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,r=wr(e),n=e.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new Fb(Lb,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:wr(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Nn(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,r){var n=this.loadedExtentsRtree_,i=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var s=i[t];n.forEachInExtent(s,(function(t){return Gr(t.extent,s)}))||(a.loader_.call(a,s,e,r),n.insert(s,{extent:s.slice()}),a.loading=a.loader_!==Ti)},a=this,s=0,u=i.length;s<u;++s)o(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,(function(r){if(Xr(r.extent,t))return e=r,!0})),e&&r.remove(e)},e.prototype.removeFeature=function(t){var e=wr(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=wr(t);this.featureChangeKeys_[e].forEach(mi),delete this.featureChangeKeys_[e];var r=t.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Fb(Ab,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Er(this.format_,7),this.setLoader(Ib(t,this.format_))},e}(zm);function Bb(t){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zb(t){return function(t){if(Array.isArray(t))return Gb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Gb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gb(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ub(t,e){return(Ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Yb(t);if(e){var i=Yb(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Wb(this,r)}}function Wb(t,e){if(e&&("object"===Bb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Yb(t){return(Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ub(t,e)}(o,t);var e,r,n,i=Vb(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).facadeVector_=null,r.features_=[],r.postComposeEvtKey_=null,r.load_=!1,r.loaded_=!1,r.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,r.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,r.visibility=!1!==t.visibility,r}return e=o,(r=[{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),t.on("change:proj",this.setProjection_.bind(this),this),this.ol3Layer=new Ob(this.vendorOptions_),this.updateSource_(),this.setVisible(this.visibility),this.map.getMapImpl().addLayer(this.ol3Layer),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom)}},{key:"updateSource_",value:function(){bz(this.vendorOptions_.source)&&(bz(this.ol3Layer.getSource())&&this.ol3Layer.setSource(new Db),this.redraw(),this.loaded_=!0,this.fire(bh,[this.features_]))}},{key:"inRange",value:function(){return!0}},{key:"addFeatures",value:function(t,e){var r=this;t.forEach((function(t){var e=r.features_.find((function(e){return e.equals(t)}));bz(e)&&r.features_.push(t)})),e&&this.updateLayer_(),this.redraw()}},{key:"updateLayer_",value:function(){var t=this.facadeVector_.getStyle();bz(t)||(t instanceof c_?this.facadeVector_.setStyle(t):t.apply(this.facadeVector_))}},{key:"getFeatures",value:function(t,e){var r=this.features_;return t||(r=e.execute(r)),r}},{key:"getFeatureById",value:function(t){return this.features_.filter((function(e){return e.getId()===t}))[0]}},{key:"removeFeatures",value:function(t){this.features_=this.features_.filter((function(e){return!t.includes(e)})),this.redraw()}},{key:"redraw",value:function(){var t=this.getOL3Layer();if(!bz(t)){var e=t.getSource();zb(e.getFeatures()).forEach(e.removeFeature,e);var r=this.facadeVector_.getFeatures();e.addFeatures(r.map(lG.facade2OLFeature))}}},{key:"getFeaturesExtent",value:function(t,e){var r=this.getFeatures(t,e),n=Dp.getFeaturesExtent(r,this.map.getProjection().code);return null===n&&(n=this.map.getProjection().getExtent()),n}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!bz(n)){var i=n.getAttribute("vendor.mapea.click");wz(i)&&i(r,n)}}},{key:"unselectFeatures",value:function(){}},{key:"setFacadeObj",value:function(t){this.facadeVector_=t}},{key:"setProjection_",value:function(t,e){if(t.code!==e.code){var r=Un(t.code),n=Un(e.code);this.facadeVector_.getFeatures().forEach((function(t){return t.getImpl().getOLFeature().getGeometry().transform(r,n)}))}}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&this.constructor===t.constructor&&(e=!0),e}},{key:"refresh",value:function(){this.getOL3Layer().getSource().clear()}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"destroy",value:function(){var t=this.map.getMapImpl();bz(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}}])&&qb(e.prototype,r),n&&qb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Yp),Hb=(r(225),r(204)),Xb=r.n(Hb),Kb=function(t,e,r){var n,i={message:t,title:e,severity:r},o=Bh(Xb.a,{vars:i});n=document.querySelectorAll("div.m-dialog"),Array.prototype.forEach.call(n,(function(t){t.parentElement.removeChild(t)}));var a=document.querySelector("div.m-mapea-container");o.querySelector("div.m-button > button").addEventListener("click",(function(t){var e;(e=o).parentElement.removeChild(e)})),a.appendChild(o)},Jb=function(t,e){var r=e;return bz(r)&&(r=Oh("dialog").info),Kb(t,r,"info")},$b=function(t,e){var r=e;return bz(r)&&(r=Oh("dialog").error),Kb(t,r,"error")},Qb=function(t,e){var r=e;return bz(r)&&(r=Oh("dialog").success),Kb(t,r,"success")};function tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ew=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"getFunctionFilter",value:function(){}},{key:"execute",value:function(t){}},{key:"toCQL",value:function(){}}])&&tw(e.prototype,r),n&&tw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rw(t){return(rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ow(t,e){return(ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uw(t);if(e){var i=uw(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return sw(this,r)}}function sw(t,e){if(e&&("object"===rw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function uw(t){return(uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ow(t,e)}(o,t);var e,r,n,i=aw(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nw(this,o);var r=0;return e.stroke&&(r=e.stroke.getWidth()),t=i.call(this,{radius:e.radius,fill:e.fill,rotation:e.rotation,rotateWithView:e.rotateWithView}),"number"==typeof e.opacity&&t.setOpacity(e.opacity),t.color_=e.color,t.fontSize_=e.fontSize||1,t.stroke_=e.stroke,t.fill_=e.fill,t.radius_=e.radius-r,t.form_=e.form||"none",t.gradient_=e.gradient,t.offset_=[e.offsetX?e.offsetX:0,e.offsetY?e.offsetY:0],t.glyph_=t.getGlyph(e.glyph)||"",t.renderMaker(),t}return e=o,n=[{key:"addDefs",value:function(t,e){var r=t;if("string"==typeof t&&(r={font:t,name:t,copyright:""}),!r.font||"string"!=typeof r.font)throw new Error("bad font def");var n=r.font;o.defs.fonts[n]=r,Object.keys(e).forEach((function(t){var n=e[t];"string"==typeof n&&1===n.length&&(n={char:n}),o.defs.glyphs[t]={font:r.font,char:n.char||"".concat(String.fromCharCode(n.code))||"",theme:n.theme||r.name,name:n.name||t,search:n.search||""}}))}}],(r=[{key:"clone",value:function(){var t=new o({glyph:"",color:this.color_,fontSize:this.fontSize_,stroke:this.stroke_,fill:this.fill_,radius:this.radius_+(this.stroke_?this.stroke_.getWidth():0),form:this.form_,gradient:this.gradient_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setScale(this.getScale()),t.setGlyph(this.getGlyph()),t.renderMaker(),t}},{key:"setGlyph",value:function(t){this.glyph_=t}},{key:"getFill",value:function(){return this.fill_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getGlyph",value:function(t){var e=this.glyph_;return t&&(e=(e=o.defs.glyphs[t])||{font:"none",char:t.charAt(0),theme:"none",name:"none",search:""}),e}},{key:"getGlyphName",value:function(){var t=this,e="";return Object.keys(o.defs.glyphs).forEach((function(r){o.defs.glyph[r]===t.glyph_&&(e=r)})),e}},{key:"getFontInfo",value:function(t){return o.defs.fonts[t.font]}},{key:"renderMaker",value:function(t){var e,r=0;this.stroke_&&(e=Bl(this.stroke_.getColor()),r=this.stroke_.getWidth());var n=this.getImage(),i={strokeStyle:e,strokeWidth:r,size:n.width},o=n.getContext("2d");o.clearRect(0,0,n.width,n.height),this.drawMarker_(i,o,0,0);var a=this.getAnchor();a[0]=n.width/2-this.offset_[0],a[1]=n.width/2-this.offset_[1]}},{key:"drawPath_",value:function(t,e){var r=e,n=2*this.radius_+t.strokeWidth+1,i=t.strokeWidth/2,o=t.size/2,a={fac:1,posX:t.size/2,posY:t.size/2};r.lineJoin="round",r.beginPath();var s=Math.PI;switch(this.form_){case"none":a.fac=1;break;case"circle":case"ban":r.arc(o,o,n/2,0,2*Math.PI,!0);break;case"poi":r.arc(o,o-.4*this.radius_,.6*this.radius_,.15*s,.85*s,!0),r.lineTo(o-.89*.05*n,(.95+.45*.05)*n+i),r.arc(o,.95*n+i,.05*n,.85*Math.PI,.15*Math.PI,!0),a={fac:.45,posX:o,posY:o-.35*this.radius_};break;case"bubble":r.arc(o,o-.2*this.radius_,.8*this.radius_,.4*s,.6*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"marker":r.arc(o,o-.2*this.radius_,.8*this.radius_,.25*s,.75*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"coma":r.moveTo(o+.8*this.radius_,o-.2*this.radius_),r.quadraticCurveTo(.95*n+i,.75*n+i,.5*n+i,n+i),r.arc(o,o-.2*this.radius_,.8*this.radius_,.45*s,0,!1),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;default:var u;switch(this.form_){case"shield":u=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0],a.posY=.45*n+i;break;case"blazon":u=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0],a.fac=.8,a.posY=.4*n+i;break;case"bookmark":u=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0],a.fac=.9,a.posY=.4*n+i;break;case"hexagon":u=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2],a.fac=.9,a.posY=.5*n+i;break;case"diamond":u=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0],a.fac=.75,a.posY=.35*n+i;break;case"triangle":u=[0,0,1,0,.5,1,0,0],a.fac=.6,a.posY=.3*n+i;break;case"sign":u=[.5,.05,1,.95,0,.95,.5,.05],a.fac=.7,a.posY=.65*n+i;break;case"lozenge":u=[.5,0,1,.5,.5,1,0,.5,.5,0],a.fac=.7;break;default:u=[0,0,1,0,1,1,0,1,0,0]}for(var l=0;l<u.length;l+=2)r.lineTo(u[l]*n+i,u[l+1]*n+i)}return r.closePath(),a}},{key:"drawMarker_",value:function(t,e,r,n){var i=e,o=this.fill_?this.fill_.getColor():"#000",a=this.stroke_?this.stroke_.getColor():"#000";"none"===this.form_&&this.stroke_&&this.fill_&&(a=this.fill_.getColor(),o=this.stroke_.getColor()),i.setTransform(1,0,0,1,0,0),i.translate(r,n);var s=this.drawPath_(t,i);if(this.fill_){if(this.gradient_&&"none"!==this.form_){var u=i.createLinearGradient(0,0,t.size/2,t.size);u.addColorStop(1,Bl(o)),u.addColorStop(0,Bl(a)),i.fillStyle=u}else i.fillStyle=Bl(o);i.fill()}if(this.stroke_&&t.strokeWidth&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.stroke()),this.glyph_.char){i.font="".concat(2*s.fac*this.radius_*this.fontSize_,"px ").concat(this.glyph_.font),i.strokeStyle=i.fillStyle,i.lineWidth=t.strokeWidth*("none"===this.form_?2:1),i.fillStyle=Bl(this.color_||a),i.textAlign="center",i.textBaseline="middle";var l=this.glyph_.char;t.strokeWidth&&"transparent"!==a&&i.strokeText(l,s.posX,s.posY),i.fillText(l,s.posX,s.posY)}if("ban"===this.form_&&this.stroke_&&t.strokeWidth){i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth;var c=this.radius_+t.strokeWidth,h=this.radius_*Math.cos(Math.PI/4);i.moveTo(c+h,c-h),i.lineTo(c-h,c+h),i.stroke()}}},{key:"getChecksum",value:function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!==this.checksums_[1]||e!==this.checksums_[2]||this.radius_!==this.checksums_[3]||"".concat(this.form_,"-").concat(this.glyphs_!==this.checksums_[4])){var r="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[r,t,e,this.radius_,"".concat(this.form_,"-").concat(this.glyphs_)]}return this.checksums_[0]}}])&&iw(e.prototype,r),n&&iw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(p_);function cw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}lw.defs={fonts:{},glyphs:{}},lw.addDefs({font:"g-cartografia",name:"g-cartografia",prefix:"g-cartografia-"},{"g-cartografia-spinner":{font:"g-cartografia",code:59663,name:"spinner",search:"spinner"},"g-cartografia-posicion3":{font:"g-cartografia",code:59661,name:"posicion3",search:"posicion3"},"g-cartografia-brujula-norte":{font:"g-cartografia",code:59648,name:"brujula-norte",search:"brujula-norte"},"g-cartografia-capas2":{font:"g-cartografia",code:59649,name:"capas2",search:"capas2"},"g-cartografia-comentarios":{font:"g-cartografia",code:59650,name:"comentarios",search:"comentarios"},"g-cartografia-escala3":{font:"g-cartografia",code:59651,name:"escala3",search:"escala3"},"g-cartografia-flecha":{font:"g-cartografia",code:59652,name:"flecha",search:"flecha"},"g-cartografia-flecha-abajo":{font:"g-cartografia",code:59653,name:"flecha-abajo",search:"flecha-abajo"},"g-cartografia-flecha-arriba":{font:"g-cartografia",code:59654,name:"flecha-arriba",search:"flecha-arriba"},"g-cartografia-flecha-derecha":{font:"g-cartografia",code:59655,name:"flecha-derecha",search:"flecha-derecha"},"g-cartografia-flecha-izquierda":{font:"g-cartografia",code:59656,name:"flecha-izquierda",search:"flecha-izquierda"},"g-cartografia-gps2":{font:"g-cartografia",code:59657,name:"gps2",search:"gps2"},"g-cartografia-info":{font:"g-cartografia",code:59658,name:"info",search:"info"},"g-cartografia-papelera":{font:"g-cartografia",code:59659,name:"papelera",search:"papelera"},"g-cartografia-pin":{font:"g-cartografia",code:59660,name:"pin",search:"pin"},"g-cartografia-zoom-extension":{font:"g-cartografia",code:59662,name:"zoom-extension",search:"zoom-extension"}});var fw=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cw(this,t),this.options_=e,this.layer_=null,this.updateFacadeOptions(e)}var e,r,n;return e=t,n=[{key:"getCanvasSize",value:function(){return[100,100]}}],(r=[{key:"updateFacadeOptions",value:function(){}},{key:"applyToLayer",value:function(t){this.layer_=t,t.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"updateCanvas",value:function(e){var r=t.getCanvasSize(),n=Ac(e.getContext("2d"),{size:r});n.setStyle(this.olStyleFn_()[0]),this.drawGeometryToCanvas(n)}},{key:"drawGeometryToCanvas",value:function(t){}},{key:"clone",value:function(){return new t(Object.assign({},this.options_))}}])&&hw(e.prototype,r),n&&hw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pw(t){return(pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yw(t,e){return(yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_w(t);if(e){var i=_w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vw(this,r)}}function vw(t,e){if(e&&("object"===pw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _w(t){return(_w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yw(t,e)}(o,t);var e,r,n,i=gw(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dw(this,o),(t=i.call(this,e)).updateFacadeOptions(e),t}return e=o,n=[{key:"getValue",value:function(t,e,r){var n=/^\{\{([^}]+)\}\}$/,i=t;if(n.test(t)||wz(t))if(e instanceof lp){var o=lG.olFeature2Facade(e,!1);if(n.test(t)){var a=t.replace(n,"$1");i=o.getAttribute(a)}else if(wz(t)){var s;bz(r)||(s=r.getImpl().getMap()),i=t(o,s)}}else i=void 0;return bz(i)&&(i=void 0),i}}],(r=[{key:"olStyleFn",get:function(){return this.olStyleFn_}},{key:"applyToLayer",value:function(t){this.layer_=t;var e=t.getImpl().getOL3Layer();bz(e)||e.setStyle(this.olStyleFn_)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}}])&&mw(e.prototype,r),n&&mw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(fw),ww=r(2),xw=r.n(ww),Mw="left",Sw="center",Ew="right",Ow="justify",Tw="top",Pw="middle",Iw="bottom",kw="alphabetic",Rw="hanging",Lw="ideographic",Cw=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new y_({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:U_,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();function Aw(t){return(Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fw(t,e){return(Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Dw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=zw(t);if(e){var i=zw(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Bw(this,r)}}function Bw(t,e){if(e&&("object"===Aw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zw(t){return(zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fw(t,e)}(o,t);var e,r,n,i=Dw(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Nw(this,o),(t=i.call(this,e)).textOverflow_=void 0!==e.textOverflow?e.textOverflow:"",t.minWidth_=e.minWidth||0,t}return e=o,(r=[{key:"getTextOverflow",value:function(){return this.textOverflow_}},{key:"getMinWidth",value:function(){return this.minWidth_}}])&&jw(e.prototype,r),n&&jw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Cw);function qw(t){return(qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ww(t,e){return(Ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Hw(t);if(e){var i=Hw(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Zw(this,r)}}function Zw(t,e){if(e&&("object"===qw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Hw(t){return(Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ww(t,e)}(o,t);var e,r,n,i=Yw(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Uw(this,o),i.call(this,{anchor:t.anchor?t.anchor.slice():void 0,anchorOrigin:t.anchorOrigin,anchorXUnits:t.anchorXUnits,anchorYUnits:t.anchorYUnits,crossOrigin:t.crossOrigin||null,color:t.color&&t.color.slice?t.color.slice():t.color||void 0,src:t.src,offset:t.offset?t.offset.slice():void 0,offsetOrigin:t.offsetOrigin,size:t.size?t.size.slice():void 0,imgSize:t.imgSize,opacity:t.opacity,scale:t.scale,snapToPixel:t.snapToPixel,rotation:t.rotation,rotateWithView:t.rotateWithView})}return e=o,(r=[{key:"clone",value:function(){return new o({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}},{key:"size",set:function(t){this.size_=Array.isArray(t)?t:null}},{key:"anchor",set:function(t){this.anchor_=Array.isArray(t)?t:null}},{key:"origin",set:function(t){this.origin_=Array.isArray(t)?t:null}}])&&Vw(e.prototype,r),n&&Vw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(bb);function Kw(t){return(Kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qw(t,e){return(Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rx(t);if(e){var i=rx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ex(this,r)}}function ex(t,e){if(e&&("object"===Kw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function rx(t){return(rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qw(t,e)}(o,t);var e,r,n,i=tx(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$w(this,o);var e=t;return t.anchor||(e.anchor=[]),t.offset||(e.offset=[]),i.call(this,{glyph:t.glyph,color:t.color,fontSize:t.fontSize,stroke:t.stroke,fill:t.fill,radius:t.radius,form:t.form,gradient:t.gradient,offsetX:t.offset[0],offsetY:t.offset[1],opacity:t.opacity,rotation:t.rotation,rotateWithView:t.rotateWithView})}return e=o,r&&Jw(e.prototype,r),n&&Jw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(lw);function ix(t){return(ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ox(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ax(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sx(t,e){return(sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ux(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=cx(t);if(e){var i=cx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lx(this,r)}}function lx(t,e){if(e&&("object"===ix(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function cx(t){return(cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sx(t,e)}(o,t);var e,r,n,i=ux(o);function o(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ox(this,o);var n=document.createElement("canvas"),a=Number(r.scale)>0?Number(r.scale):1,s=a*mo||mo,u=n.getContext("2d");if(r.image){r.image.load();var l=r.image.getImage();l.width?(n.width=Math.round(l.width*s),n.height=Math.round(l.height*s),u.globalAlpha="number"==typeof r.opacity?r.opacity:1,u.drawImage(l,0,0,l.width,l.height,0,0,n.width,n.height),e=u.createPattern(n,"repeat")):(e=[0,0,0,0],l.onload=function(){n.width=Math.round(l.width*s),n.height=Math.round(l.height*s),u.globalAlpha="number"==typeof r.opacity?r.opacity:1,u.drawImage(l,0,0,l.width,l.height,0,0,n.width,n.height),e=u.createPattern(n,"repeat"),this.color_=e,this.checksum_=void 0,r.layer&&r.layer.refresh()})}else{var c=o.getPattern(r);if(n.width=Math.round(c.width*s),n.height=Math.round(c.height*s),u.beginPath(),r.fill&&(u.fillStyle=Bl(r.fill.getColor()),u.fillRect(0,0,n.width,n.height)),u.scale(s,s),u.lineCap="round",u.lineWidth=c.stroke||1,u.fillStyle=Bl(r.color||"#000"),u.strokeStyle=Bl(r.color||"#000"),c.circles)for(var h=0;h<c.circles.length;h+=1){var f=c.circles[h];u.beginPath(),u.arc(f[0],f[1],f[2],0,2*Math.PI),c.fill&&u.fill(),c.stroke&&u.stroke()}if(c.repeat||(c.repeat=[[0,0]]),c.char&&(u.font=c.font||"".concat(c.width,"px Arial"),u.textAlign="center",u.textBaseline="middle",c.angle?(u.fillText(c.char,c.width/4,c.height/4),u.fillText(c.char,5*c.width/4,5*c.height/4),u.fillText(c.char,c.width/4,5*c.height/4),u.fillText(c.char,5*c.width/4,c.height/4),u.fillText(c.char,3*c.width/4,3*c.height/4),u.fillText(c.char,-c.width/4,-c.height/4),u.fillText(c.char,3*c.width/4,-c.height/4),u.fillText(c.char,-c.width/4,3*c.height/4)):u.fillText(c.char,c.width/2,c.height/2)),c.lines)for(var p=0;p<c.lines.length;p+=1)for(var d=0;d<c.repeat.length;d+=1){var m=c.lines[p];u.beginPath(),u.moveTo(m[0]+c.repeat[d][0],m[1]+c.repeat[d][1]);for(var y=2;y<m.length;y+=2)u.lineTo(m[y]+c.repeat[d][0],m[y+1]+c.repeat[d][1]);c.fill&&u.fill(),c.stroke&&u.stroke(),u.save(),u.strokeStyle="red",u.strokeWidth=.1,u.restore()}if(e=u.createPattern(n,"repeat"),r.offset){var g=r.offset;if("number"==typeof g&&(g=[g,g]),g instanceof Array){var v=Math.round(g[0]*s),_=Math.round(g[1]*s);u.scale(1/s,1/s),u.clearRect(0,0,n.width,n.height),u.translate(v,_),u.fillStyle=e,u.fillRect(-v,-_,n.width,n.height),e=u.createPattern(n,"repeat")}}}return(t=i.call(this,{color:e})).canvas_=n,t.options_=r,t}return e=o,n=[{key:"getPattern",value:function(t){var e=t,r=o.patterns[e.pattern]||o.patterns.dot,n=Math.round(e.spacing)||10;switch(e.pattern){case"dot":case"circle":var i=0===e.size?0:e.size/2||2;e.angle?(n=Math.round(1.4*n),r.width=n,r.height=n,r.circles=[[n/4,n/4,i],[3*n/4,3*n/4,i]],"circle"===e.pattern&&(r.circles=r.circles.concat([[n/4+n,n/4,i],[n/4,n/4+n,i],[3*n/4-n,3*n/4,i],[3*n/4,3*n/4-n,i],[n/4+n,n/4+n,i],[3*n/4-n,3*n/4-n,i]]))):(r.width=n,r.height=n,r.circles=[[n/2,n/2,i]],"circle"===e.pattern&&(r.circles=r.circles.concat([[n/2+n,n/2,i],[n/2-n,n/2,i],[n/2,n/2+n,i],[n/2,n/2-n,i],[n/2+n,n/2+n,i],[n/2+n,n/2-n,i],[n/2-n,n/2+n,i],[n/2-n,n/2-n,i]])));break;case"tile":case"square":i=0===e.size?0:e.size/2||2,e.angle?(r.width=n,r.height=n,r.lines=[[n/2-i,n/2,n/2,n/2-i,n/2+i,n/2,n/2,n/2+i,n/2-i,n/2]]):(r.width=n,r.height=n,r.lines=[[n/2-i,n/2-i,n/2+i,n/2-i,n/2+i,n/2+i,n/2-i,n/2+i,n/2-i,n/2-i]]),"square"===e.pattern&&(r.repeat=[[0,0],[0,n],[n,0],[0,-n],[-n,0],[-n,-n],[n,n],[-n,n],[n,-n]]);break;case"cross":case"hatch":"cross"===e.pattern&&e.angle&&(e.angle=45);var a=Math.round(((e.angle||0)-90)%360);a>180&&(a-=360),a*=Math.PI/180;var s=Math.cos(a),u=Math.sin(a);if(Math.abs(u)<1e-4)r.width=n,r.height=n,r.lines=[[0,.5,n,.5]],r.repeat=[[0,0],[0,n]];else if(Math.abs(s)<1e-4)r.height=n,r.width=n,r.lines=[[.5,0,.5,n]],r.repeat=[[0,0],[n,0]],"cross"===e.pattern&&(r.lines.push([0,.5,n,.5]),r.repeat.push([0,n]));else{r.width=Math.round(Math.abs(n/u))||1,r.height=Math.round(Math.abs(n/s))||1;var l=r.width,c=r.height;"cross"===e.pattern?(r.lines=[[-l,-c,2*l,2*c],[2*l,-c,-l,2*c]],r.repeat=[[0,0]]):s*u>0?(r.lines=[[-l,-c,2*l,2*c]],r.repeat=[[0,0],[l,0],[0,c]]):(r.lines=[[2*l,-c,-l,2*c]],r.repeat=[[0,0],[-l,0],[0,c]])}r.stroke=0===e.size?0:e.size||4}return r}},{key:"addPattern",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.patterns[t||e.char]={width:e.width||e.size||10,height:e.height||e.size||10,font:e.font,char:e.char,circles:e.circles,lines:e.lines,repeat:e.repeat,stroke:e.stroke,angle:e.angle,fill:e.fill}}}],(r=[{key:"clone",value:function(){return new o(this.options_)}},{key:"getImage",value:function(){return this.canvas_}}])&&ax(e.prototype,r),n&&ax(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(y_);function fx(t){return(fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function px(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mx(t,e){return(mx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=vx(t);if(e){var i=vx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gx(this,r)}}function gx(t,e){if(e&&("object"===fx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vx(t){return(vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}hx.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:30,height:20,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],stroke:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}};var _x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mx(t,e)}(o,t);var e,r,n,i=yx(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return px(this,o),i.call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager})}return e=o,(r=[{key:"clone",value:function(){var t=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t}}])&&dx(e.prototype,r),n&&dx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(m_);function bx(t){return(bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mx(){return(Mx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Sx(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Sx(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ix(t)););return t}function Ex(t,e){return(Ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ox(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ix(t);if(e){var i=Ix(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Tx(this,r)}}function Tx(t,e){if(e&&("object"===bx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Px(t)}function Px(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ix(t){return(Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ex(t,e)}(o,t);var e,r,n,i=Ox(o);function o(){var t,e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wx(this,o),t=i.call(this,n);var a=document.createElement("canvas");t.canvas_=document.createElement("canvas");var s=Number(n.scale)>0?Number(n.scale):1,u=s*mo||mo,l=a.getContext("2d");if(n.image){n.image.load();var c=n.image.getImage();if(c.width)a.width=Math.round(c.width*u),a.height=Math.round(c.height*u),l.globalAlpha="number"==typeof n.opacity?n.opacity:1,l.drawImage(c,0,0,c.width,c.height,0,0,a.width,a.height),e=l.createPattern(a,"repeat");else{var h=Px(t);e=[0,0,0,0],c.onload=function(){a.width=Math.round(c.width*u),a.height=Math.round(c.height*u),l.globalAlpha="number"==typeof n.opacity?n.opacity:1,l.drawImage(c,0,0,c.width,c.height,0,0,a.width,a.height),e=l.createPattern(a,"repeat"),h.setColor(e),n.layer&&n.layer.refresh()}}}else{var f=t.getPattern_(n);if(a.width=Math.round(f.width*u),a.height=Math.round(f.height*u),l.beginPath(),n.fill&&(l.fillStyle=Bl(n.fill.getColor()),l.fillRect(0,0,a.width,a.height)),l.scale(u,u),l.lineCap="round",l.lineWidth=f.stroke||1,l.fillStyle=Bl(n.color||"#000"),l.strokeStyle=Bl(n.color||"#000"),f.circles)for(r=0;r<f.circles.length;r+=1){var p=f.circles[r];l.beginPath(),l.arc(p[0],p[1],p[2],0,2*Math.PI),f.fill&&l.fill(),f.stroke&&l.stroke()}if(f.repeat||(f.repeat=[[0,0]]),f.char&&(l.font="".concat(f.font||f.width," px Arial"),l.textAlign="center",l.textBaseline="middle",f.angle?(l.fillText(f.char,f.width/4,f.height/4),l.fillText(f.char,5*f.width/4,5*f.height/4),l.fillText(f.char,f.width/4,5*f.height/4),l.fillText(f.char,5*f.width/4,f.height/4),l.fillText(f.char,3*f.width/4,3*f.height/4),l.fillText(f.char,-f.width/4,-f.height/4),l.fillText(f.char,3*f.width/4,-f.height/4),l.fillText(f.char,-f.width/4,3*f.height/4)):l.fillText(f.char,f.width/2,f.height/2)),f.lines)for(r=0;r<f.lines.length;r+=1)for(var d=0;d<f.repeat.length;d+=1){var m=f.lines[r];l.beginPath(),l.moveTo(m[0]+f.repeat[d][0],m[1]+f.repeat[d][1]);for(var y=2;y<m.length;y+=2)l.lineTo(m[y]+f.repeat[d][0],m[y+1]+f.repeat[d][1]);f.fill&&l.fill(),f.stroke&&l.stroke(),l.save(),l.strokeStyle="red",l.strokeWidth=.1,l.restore()}if(e=l.createPattern(a,"repeat"),n.offset){var g=n.offset;if("number"==typeof g&&(g=[g,g]),g instanceof Array){var v=Math.round(g[0]*u),_=Math.round(g[1]*u);l.scale(1/u,1/u),l.clearRect(0,0,a.width,a.height),l.translate(v,_),l.fillStyle=e,l.fillRect(-v,-_,a.width,a.height),e=l.createPattern(a,"repeat")}}}return t.setColor(e),t}return e=o,(r=[{key:"clone",value:function(){var t=Mx(Ix(o.prototype),"clone",this).call(this);return t.canvas_=this.canvas_,t}},{key:"getImage",value:function(){return this.canvas_}},{key:"getPattern_",value:function(t){var e,r=hx.patterns[t.pattern]||hx.patterns.dot,n=Math.round(t.spacing)||10;switch(t.pattern){case"dot":case"circle":e=0===t.size?0:t.size/2||2,t.angle?(n=Math.round(1.4*n),r.width=Math.round(1.4*n),r.height=Math.round(1.4*n),r.circles=[[n/4,n/4,e],[3*n/4,3*n/4,e]],"circle"===t.pattern&&(r.circles=r.circles.concat([[n/4+n,n/4,e],[n/4,n/4+n,e],[3*n/4-n,3*n/4,e],[3*n/4,3*n/4-n,e],[n/4+n,n/4+n,e],[3*n/4-n,3*n/4-n,e]]))):(r.width=n,r.height=n,r.circles=[[n/2,n/2,e]],"circle"===t.pattern&&(r.circles=r.circles.concat([[n/2+n,n/2,e],[n/2-n,n/2,e],[n/2,n/2+n,e],[n/2,n/2-n,e],[n/2+n,n/2+n,e],[n/2+n,n/2-n,e],[n/2-n,n/2+n,e],[n/2-n,n/2-n,e]])));break;case"tile":case"square":e=0===t.size?0:t.size/2||2,t.angle?(r.width=n,r.height=n,r.lines=[[n/2-e,n/2,n/2,n/2-e,n/2+e,n/2,n/2,n/2+e,n/2-e,n/2]]):(r.width=n,r.height=n,r.lines=[[n/2-e,n/2-e,n/2+e,n/2-e,n/2+e,n/2+e,n/2-e,n/2+e,n/2-e,n/2-e]]),"square"===t.pattern&&(r.repeat=[[0,0],[0,n],[n,0],[0,-n],[-n,0],[-n,-n],[n,n],[-n,n],[n,-n]]);break;case"cross":t.angle&&(t.angle=45);case"hatch":var i=Math.round(((t.angle||0)-90)%360);i>180&&(i-=360),i*=Math.PI/180;var o=Math.cos(i),a=Math.sin(i);if(Math.abs(a)<1e-4)r.width=n,r.height=n,r.lines=[[0,.5,n,.5]],r.repeat=[[0,0],[0,n]];else if(Math.abs(o)<1e-4)r.width=n,r.height=n,r.lines=[[.5,0,.5,n]],r.repeat=[[0,0],[n,0]],"cross"===t.pattern&&(r.lines.push([0,.5,n,.5]),r.repeat.push([0,n]));else{var s=Math.round(Math.abs(n/a))||1;r.width=Math.round(Math.abs(n/a))||1;var u=Math.round(Math.abs(n/o))||1;r.height=Math.round(Math.abs(n/o))||1,"cross"===t.pattern?(r.lines=[[-s,-u,2*s,2*u],[2*s,-u,-s,2*u]],r.repeat=[[0,0]]):o*a>0?(r.lines=[[-s,-u,2*s,2*u]],r.repeat=[[0,0],[s,0],[0,u]]):(r.lines=[[2*s,-u,-s,2*u]],r.repeat=[[0,0],[-s,0],[0,u]])}r.stroke=0===t.size?0:t.size||4}return r}}])&&xx(e.prototype,r),n&&xx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(g_),Rx=function(t,e,r){var n;if(!bz(t.fill)){var i=bw.getValue(t.fill.color,e,r),o=bw.getValue(t.fill.opacity,e,r);o||0===o||(o=1),bz(i)||(n=new y_({color:xw()(i).alpha(o).css()}))}return n},Lx=function(t,e,r){var n;if(!bz(t.stroke)){var i=bw.getValue(t.stroke.color,e,r);if(!bz(i)){var o=t.stroke.linedashoffset;n=new g_({color:i,width:bw.getValue(t.stroke.width,e,r),lineDash:bw.getValue(t.stroke.linedash,e,r),lineDashOffset:bw.getValue(o,e,r),lineCap:bw.getValue(t.stroke.linecap,e,r),lineJoin:bw.getValue(t.stroke.linejoin,e,r),miterLimit:bw.getValue(t.stroke.miterlimit,e,r)})}}return n},Cx=function(t,e,r){var n;if(t.label){var i=bw.getValue(t.label.text,e,r),s=bw.getValue(t.label.align,e,r),u=bw.getValue(t.label.baseline,e,r);if(n=new Cw({font:bw.getValue(t.label.font,e,r),rotateWithView:bw.getValue(t.label.rotate,e,r),scale:bw.getValue(t.label.scale,e,r),offsetX:bw.getValue(t.label.offset?t.label.offset[0]:void 0,e,r),offsetY:bw.getValue(t.label.offset?t.label.offset[1]:void 0,e,r),fill:new y_({color:bw.getValue(t.label.color||"#000",e,r)}),textAlign:Object.values(o).includes(s)?s:"center",textBaseline:Object.values(a).includes(u)?u:"top",text:void 0===i?void 0:String(i),rotation:bw.getValue(t.label.rotation,e,r)}),!bz(t.label.stroke)){var l=t.label.stroke,c=l.miterlimit,h=l.linedashoffset;n.setStroke(new g_({color:bw.getValue(t.label.stroke.color,e,r),width:bw.getValue(t.label.stroke.width,e,r),lineCap:bw.getValue(t.label.stroke.linecap,e,r),lineJoin:bw.getValue(t.label.stroke.linejoin,e,r),lineDash:bw.getValue(t.label.stroke.linedash,e,r),lineDashOffset:bw.getValue(h,e,r),miterLimit:bw.getValue(c,e,r)}))}}return n},Ax={},Nx=function(t,e,r,n){var i="rgba(0,0,0,1)";if(!bz(t.fill.pattern.color)){var o=bw.getValue(t.fill.pattern.opacity,e,r)||1;o||0===o||(o=1),i=xw()(t.fill.pattern.color).alpha(o).css()}return"LineString"===e.getGeometry().getType()||"MultiLineString"===e.getGeometry().getType()?new kx({pattern:(bw.getValue(t.fill.pattern.name,e,r)||"").toLowerCase(),color:i,width:bw.getValue(t.fill.width,e,r),size:bw.getValue(t.fill.pattern.size,e,r),spacing:bw.getValue(t.fill.pattern.spacing,e,r),image:"Image"===bw.getValue(t.fill.pattern.name,e,r)?new bb({src:bw.getValue(t.fill.pattern.src,e,r),crossOrigin:"anonymous"}):void 0,angle:bw.getValue(t.fill.pattern.rotation,e,r),scale:bw.getValue(t.fill.pattern.scale,e,r),offset:bw.getValue(t.fill.pattern.offset,e,r),fill:n,layer:r}):new hx({pattern:(bw.getValue(t.fill.pattern.name,e,r)||"").toLowerCase(),color:i,size:bw.getValue(t.fill.pattern.size,e,r),spacing:bw.getValue(t.fill.pattern.spacing,e,r),image:"IMAGE"===bw.getValue(t.fill.pattern.name,e,r)?new bb({src:bw.getValue(t.fill.pattern.src,e,r)}):void 0,angle:bw.getValue(t.fill.pattern.rotation,e,r),scale:bw.getValue(t.fill.pattern.scale,e,r),offset:bw.getValue(t.fill.pattern.offset,e,r),fill:n,layer:r})},jx=function(t,e,r){var n=t||{},i=Rx(n,e,r),o=Lx(n,e,r),a=new _x({fill:i,stroke:o,radius:bw.getValue(n.radius,e,r),snapToPixel:bw.getValue(n.snapToPixel,e,r)}),s=new S_({image:a}),u=new S_;if(!bz(n.icon)){var l,c=bw.getValue(n.icon.src,e,r);bz(c)?bz(n.icon.form)||(l=function(t,e,r){return new nx({form:bz(bw.getValue(t.icon.form,e,r))?"":bw.getValue(t.icon.form,e,r).toLowerCase(),gradient:bw.getValue(t.icon.gradient,e,r),glyph:bw.getValue(t.icon.class,e,r),fontSize:bw.getValue(t.icon.fontsize,e,r),radius:bw.getValue(t.icon.radius,e,r),rotation:bw.getValue(t.icon.rotation,e,r),rotateWithView:bw.getValue(t.icon.rotate,e,r),offsetX:bw.getValue(t.icon.offset?t.icon.offset[0]:void 0,e,r),offsetY:bw.getValue(t.icon.offset?t.icon.offset[1]:void 0,e,r),fill:new y_({color:bw.getValue(void 0!==t.icon.fill?t.icon.fill:"#FFFFFF",e,r)}),stroke:t.icon.color?new g_({color:bw.getValue(t.icon.color,e,r),width:1}):void 0,anchor:bw.getValue(t.icon.anchor,e,r),anchorXUnits:bw.getValue(t.icon.anchorxunits,e,r),anchorYUnits:bw.getValue(t.icon.anchoryunits,e,r),src:bw.getValue(t.icon.src,e,r),opacity:bw.getValue(t.icon.opacity,e,r),scale:bw.getValue(t.icon.scale,e,r),snapToPixel:bw.getValue(t.icon.snaptopixel,e,r),offsetOrigin:bw.getValue(t.icon.offsetorigin,e,r),offset:bw.getValue(t.icon.offset,e,r),crossOrigin:bw.getValue(t.icon.crossorigin,e,r),anchorOrigin:bw.getValue(t.icon.anchororigin,e,r),size:bw.getValue(t.icon.size,e,r)})}(n,e,r),u.setImage(l)):(l=function(t,e,r){var n=bw.getValue(t.icon.anchor,e,r),i=bw.getValue(t.icon.anchorxunits,e,r),o=bw.getValue(t.icon.anchoryunits,e,r),a=bw.getValue(t.icon.src,e,r),s=bw.getValue(t.icon.opacity,e,r),u=bw.getValue(t.icon.scale,e,r),l=bw.getValue(t.icon.rotation,e,r),c=bw.getValue(t.icon.rotate,e,r),h=bw.getValue(t.icon.snaptopixel,e,r),f=bw.getValue(t.icon.offsetorigin,e,r),p=bw.getValue(t.icon.offset,e,r),d=bw.getValue(t.icon.crossorigin,e,r),m=bw.getValue(t.icon.anchororigin,e,r),y=a+n+i+o+s+u+l+c+h+f+p+d+m+m+bw.getValue(t.icon.size,e,r),g=Ax[y];return g||(g=new Xw({anchor:bw.getValue(t.icon.anchor,e,r),anchorXUnits:bw.getValue(t.icon.anchorxunits,e,r),anchorYUnits:bw.getValue(t.icon.anchoryunits,e,r),src:bw.getValue(t.icon.src,e,r),opacity:bw.getValue(t.icon.opacity,e,r),scale:bw.getValue(t.icon.scale,e,r),rotation:bw.getValue(t.icon.rotation,e,r),rotateWithView:bw.getValue(t.icon.rotate,e,r),snapToPixel:bw.getValue(t.icon.snaptopixel,e,r),offsetOrigin:bw.getValue(t.icon.offsetorigin,e,r),offset:bw.getValue(t.icon.offset,e,r),crossOrigin:bw.getValue(t.icon.crossorigin,e,r),anchorOrigin:bw.getValue(t.icon.anchororigin,e,r),size:bw.getValue(t.icon.size,e,r)}),Ax[y]=g),g}(n,e,r),u.setImage(l))}var h=Cx(n,e,r);return bz(n.label)||yz(h.getText())||s.setText(h),[s,u]},Fx=function(t,e,r){var n=t||{},i=Lx(n,e,r),o=function(t,e,r){var n;if(!bz(t.fill)){var i=bw.getValue(t.fill.color,e,r),o=bw.getValue(t.fill.opacity,e,r);o||0===o||(o=1);var a=bw.getValue(t.fill.width,e,r);bz(i)||(n=new g_({color:xw()(i).alpha(o).css(),width:a}))}return n}(n,e,r),a=function(t,e,r){var n,i=t.label;if(!bz(i)){var o={text:void 0===bw.getValue(i.text,e)?void 0:String(bw.getValue(i.text,e)),font:bw.getValue(i.font,e),fill:new y_({color:bw.getValue(i.color||"#000",e)}),textBaseline:(bw.getValue(i.baseline,e)||"").toLowerCase(),textAlign:bw.getValue(i.align,e),scale:bw.getValue(i.scale,e),rotateWithView:bw.getValue(i.rotate,e)||!1,overflow:bw.getValue(i.textoverflow,e)||!1,minWidth:bw.getValue(i.minwidth,e)||0,geometry:bw.getValue(i.geometry,e),offsetX:bw.getValue(t.label.offset?t.label.offset[0]:void 0,e),offsetY:bw.getValue(t.label.offset?t.label.offset[1]:void 0,e)};n=new Gw(o),bz(i.stroke)||n.setStroke(new g_({color:bw.getValue(i.stroke.color,e),width:bw.getValue(i.stroke.width,e),lineCap:bw.getValue(i.stroke.linecap,e),lineJoin:bw.getValue(i.stroke.linejoin,e),lineDash:bw.getValue(i.stroke.linedash,e),lineDashOffset:bw.getValue(i.stroke.linedashoffset,e),miterLimit:bw.getValue(i.stroke.miterlimit,e)}))}return n}(n,e);n.fill&&!bz(n.fill.pattern)&&(o=Nx(n,e,r,o));var s=new S_,u=new S_;bz(n.label)||(!0===bw.getValue(n.label.path,e)&&(s.textPath=a,!bz(n.label.smooth)&&!0===n.label.smooth&&wz(e.getGeometry)&&s.setGeometry(e.getGeometry().cspline()),a.setPlacement("line")),s.setText(a));return s.setStroke(i),u.setStroke(o),[s,u]},Dx=function(t,e,r){var n=t||{},i=new S_,o=Lx(n,e,r);n.stroke&&!bz(n.stroke.pattern)&&(o=function(t,e,r){var n="rgba(0,0,0,1)";bz(t.stroke.pattern.color)||(n=bw.getValue(t.stroke.pattern.color,e,r));var i=new y_({color:t.stroke.color?t.stroke.color:"rgba(0,0,0,0)",opacity:t.stroke.opacity?t.stroke.opacity:1});return new kx({pattern:(bw.getValue(t.stroke.pattern.name,e,r)||"").toLowerCase(),color:n,width:bw.getValue(t.stroke.width,e,r),size:bw.getValue(t.stroke.pattern.size,e,r),spacing:bw.getValue(t.stroke.pattern.spacing,e,r),image:"Image"===bw.getValue(t.stroke.pattern.name,e,r)?new bb({src:bw.getValue(t.stroke.pattern.src,e,r),crossOrigin:"anonymous"}):void 0,angle:bw.getValue(t.stroke.pattern.rotation,e,r),scale:bw.getValue(t.stroke.pattern.scale,e,r),offset:bw.getValue(t.stroke.pattern.offset,e,r),fill:i,layer:r})}(n,e,r));var a=Rx(n,e,r),s=Cx(n,e,r);return n.fill&&!bz(n.fill.pattern)&&(a=Nx(n,e,r,a)),i.setFill(a),i.setStroke(o),i.setText(s),[i]};function Bx(t){return(Bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qx(t,e){return(qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ux(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Wx(t);if(e){var i=Wx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Vx(this,r)}}function Vx(t,e){if(e&&("object"===Bx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Wx(t){return(Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yx={Point:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return jx(e[0].point,e[1],e[2])},LineString:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Fx(e[0].line,e[1],e[2])},Polygon:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Dx(e[0].polygon,e[1],e[2])},MultiPoint:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return jx(e[0].point,e[1],e[2])},MultiLineString:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Fx(e[0].line,e[1],e[2])},MultiPolygon:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Dx(e[0].polygon,e[1],e[2])}},Zx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qx(t,e)}(o,t);var e,r,n,i=Ux(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zx(this,o),(t=i.call(this,e)).styles_={},t}return e=o,(r=[{key:"toImage",value:function(){var t=this,e=null,r=null,n=null,i=eG(),o=[];yz(this.options_.point)||(e=function(e){return new Promise((function(r,n){var i=new Image;if(i.onload=function(){return r(i)},i.onerror=n,i.width=30,i.height=30,!0===Qz(t.options_.point))i.src=e;else{var o=(0,Yx.Point)(t.options_,t,t.layer_);o[0].getImage().setRadius(5);var a=o[0].getImage().getImage(1).toDataURL();i.src=a}}))},o.push(e(i))),yz(this.options_.polygon)||(r=function(e){return new Promise((function(r,n){var i=new Image;if(i.onload=function(){return r(i)},i.onerror=n,!0===Qz(t.options_.polygon))i.src=e,i.width=30,i.height=30;else{var o=(0,Yx.Polygon)(t.options_,t,t.layer_),a=document.createElement("canvas");a.width=30,a.height=30;var s=Ac(a.getContext("2d"));s.setStyle(o[0],0,0);var u=[25,15],l=Math.floor(u[0]),c=Math.floor(u[1]),h=u[0]-l,f=u[1]-c;s.drawGeometry(new ks([[[h+3,f+3],[l-3,f+3],[l-3,c-3],[h+3,c-3],[h+3,f+3]]])),i.src=a.toDataURL()}}))},o.push(r(i))),yz(this.options_.line)||(n=function(e){return new Promise((function(r,n){var i=new Image;if(i.onload=function(){return r(i)},i.onerror=n,!0===Qz(t.options_.line))i.src=e,i.width=30,i.height=30;else{var o=(0,Yx.LineString)(t.options_,t,t.layer_),a=document.createElement("canvas");a.width=30,a.height=30;var s=Ac(a.getContext("2d"));s.setStyle(o[0],0,0);var u=yz(o[0].getStroke())?1.5:o[0].getStroke().getWidth();s.drawGeometry(new vp([[0+u/2,0+u/2],[25/3,7.5-u/2],[50/3,0+u/2],[25-u/2,7.5-u/2]])),i.src=a.toDataURL()}}))},o.push(n(i)));var a=document.createElement("canvas");a.width=200,a.height=50;var s=a.getContext("2d"),u=[0,60,120],l=0;return Promise.all(o).then((function(t){return t.forEach((function(t){s.drawImage(t,u[l],0),l+=1})),a.toDataURL()}))}},{key:"updateFacadeOptions",value:function(t){var e=this;this.olStyleFn_=function(r){var n=JSON.stringify(r.getProperties()),i=[];e.styles_=[];var o=r;if(o instanceof lp||o instanceof mp){var a=o.getGeometry().getType(),s=Yx[a];wz(s)&&(i=s(t,o,e.layer_),e.styles_[n]=i)}else o=e;return i}}},{key:"drawGeometryToCanvas",value:function(t){}},{key:"updateCanvas",value:function(t){}},{key:"getCanvasSize",value:function(){return 0}},{key:"getRadius_",value:function(t){return t instanceof bb?25:t instanceof lw?t.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&Gx(e.prototype,r),n&&Gx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(bw);function Hx(t){return(Hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kx(t,e){return(Kx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qx(t);if(e){var i=Qx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $x(this,r)}}function $x(t,e){if(e&&("object"===Hx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qx(t){return(Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kx(t,e)}(o,t);var e,r,n,i=Jx(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).feature_=null,r}return e=o,(r=[{key:"applyToFeature",value:function(t){var e=this;this.feature_=t;var r=t.getStyle().getOptions();r.point&&(r=r.point),r.icon&&r.icon.src&&"string"==typeof r.icon.src&&r.icon.src.endsWith(".svg")&&(r.icon.fill||r.icon.stroke)?sG(r.icon.src,r).then((function(t){r.icon.src=t,e.applyToFeature(e.feature_)})):this.getImpl().applyToFeature(t)}}])&&Xx(e.prototype,r),n&&Xx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(c_);function eM(t){return(eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rM(t){return function(t){if(Array.isArray(t))return nM(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nM(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aM(){return(aM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=sM(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function sM(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hM(t)););return t}function uM(t,e){return(uM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hM(t);if(e){var i=hM(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cM(this,r)}}function cM(t,e){if(e&&("object"===eM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hM(t){return(hM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uM(t,e)}(o,t);var e,r,n,i=lM(o);function o(){return iM(this,o),i.apply(this,arguments)}return e=o,n=[{key:"deserialize",value:function(t,e){var r=$z(t),n=r.map((function(t,e){return"arg".concat(e)})),i=n.reduce((function(t,e){return t.concat(", ").concat(e)}));return new Function(n,"return new ".concat(e,"(").concat(i,")")).apply(void 0,rM(r))}}],(r=[{key:"apply",value:function(t,e,r){var n=this;this.layer_=t,this.getImpl().applyToLayer(t),!0===e&&(r?t.getFeatures().forEach((function(t){t.style=null})):t.getFeatures().forEach((function(t){t.setStyle(n.clone())}))),this.updateCanvas()}},{key:"toImage",value:function(){var t=aM(hM(o.prototype),"toImage",this).call(this),e={fill:this.options_.fill,stroke:this.options_.stroke};return!0===Qz(e)&&(t=eG(this.canvas_)),t}},{key:"ORDER",get:function(){return 1}}])&&oM(e.prototype,r),n&&oM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(tM);function pM(t){return(pM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dM(Object(r),!0).forEach((function(e){yM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vM(t,e){return(vM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wM(t);if(e){var i=wM(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bM(this,r)}}function bM(t,e){if(e&&("object"===pM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wM(t){return(wM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vM(t,e)}(o,t);var e,r,n,i=_M(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;e=bz(e)?o.DEFAULT_NULL:Zz(e,o.DEFAULT),e=Zz({},e);var r=new Zx(e);return i.call(this,e,r)}return e=o,(r=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Generic'))"}}])&&gM(e.prototype,r),n&&gM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(fM);xM.DEFAULT={point:{radius:5}},xM.PARAMS_DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},xM.DEFAULT_NULL={point:mM(mM({},xM.PARAMS_DEFAULT_NULL),{},{radius:5}),line:mM({},xM.PARAMS_DEFAULT_NULL),polygon:mM({},xM.PARAMS_DEFAULT_NULL)};var MM=xM;function SM(t){return(SM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function OM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?EM(Object(r),!0).forEach((function(e){TM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function TM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kM(t,e){return(kM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function RM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=CM(t);if(e){var i=CM(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return LM(this,r)}}function LM(t,e){if(e&&("object"===SM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function CM(t){return(CM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kM(t,e)}(o,t);var e,r,n,i=RM(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;PM(this,o);var s=a||new Zb(r,n);return t=i.call(this,e,s),yz(Zb)&&hh(Oh("exception").vectorlayer_method),t.style_=null,t.filter_=null,t.minZoom=e.minZoom,t.maxZoom=e.maxZoom,t.setStyle(r.style),s.on(bh,(function(e){return t.fire(bh,[e])})),t}return e=o,(r=[{key:"type",get:function(){return"Vector"},set:function(t){yz(t)||bz(t)||"Vector"===t||hh("El tipo de capa debe ser '".concat("Vector").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"getFilter",value:function(){return this.filter_}},{key:"removeFilter",value:function(){this.setFilter(null)}},{key:"addFeatures",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t;bz(r)||(_z(r)||(r=[r]),this.getImpl().addFeatures(r,e))}},{key:"getFeatures",value:function(t){var e=t;return bz(this.getFilter())&&(e=!0),this.getImpl().getFeatures(e,this.filter_)}},{key:"getFeatureById",value:function(t){var e=null;return bz(t)?$b(Oh("dialog").id_feature):e=this.getImpl().getFeatureById(t),e}},{key:"removeFeatures",value:function(t){var e=t;_z(e)||(e=[e]),this.getImpl().removeFeatures(e)}},{key:"clear",value:function(){this.removeFilter(),this.removeFeatures(this.getFeatures(!0))}},{key:"refresh",value:function(){this.getImpl().refresh(!0),this.redraw()}},{key:"redraw",value:function(){this.getImpl().redraw()}},{key:"getFeaturesExtent",value:function(t){return this.getImpl().getFeaturesExtent(!0,this.filter_)}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"setStyle",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;this.getImpl().isLoaded()?(bz(this.getStyle())&&this.applyStyle_(n,r),bz(t)||this.applyStyle_(t,r)):this.once(bh,(function(){bz(e.getStyle())&&e.applyStyle_(n,r),bz(t)||e.applyStyle_(t,r)}))}},{key:"applyStyle_",value:function(t,e){var r=this,n=t;Mz(n)?n=c_.deserialize(n):n instanceof c_||(n=new MM(n));var i=n.getOptions();i.point&&(i=i.point),i.icon&&i.icon.src&&"string"==typeof i.icon.src&&i.icon.src.endsWith(".svg")&&(i.icon.fill||i.icon.stroke)?sG(i.icon.src,i).then((function(n){i.icon.src=n,r.applyStyle_(t,e)})):(n instanceof c_&&(!bz(this.style_)&&this.style_ instanceof c_&&this.style_.unapply(this),n.apply(this,e),this.style_=n,this.fire("change:style",[n,this])),this.fire("change:style",[n,this]))}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null),this.getFeatures().forEach((function(t){return t.clearStyle()}))}},{key:"getLegendURL",value:function(){var t=this.getImpl().getLegendURL();return-1!==t.indexOf(Lf.LEGEND_DEFAULT)&&-1===t.indexOf(Lf.LEGEND_ERROR)&&this.style_ instanceof c_&&(t=this.style_.toImage()),t}},{key:"getGeometryType",value:function(){var t=null;if(!bz(this.getFeatures())){var e=this.getFeatures()[0];bz(e)||bz(e.getGeometry())||(t=e.getGeometry().type)}return t}},{key:"getMaxExtent",value:function(){return this.getFeaturesExtent()}},{key:"calculateMaxExtent",value:function(){return this.getImpl().getFeaturesExtentPromise(!0,this.filter_)}},{key:"setFilter",value:function(t){if(bz(t)||t instanceof ew){this.filter_=t;var e=this.style_;e instanceof HS&&e.getImpl().deactivateChangeEvent(),this.redraw(),e instanceof HS&&(e.getImpl().activateChangeEvent(),e.refresh())}else $b(Oh("dialog").vector_filter)}},{key:"toGeoJSON",value:function(){var t=this.map_.getProjection().code,e=this.getFeatures().map((function(t){return t.getGeoJSON()}));return{type:"FeatureCollection",features:Fp(e,t)}}}])&&IM(e.prototype,r),n&&IM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Lf);AM.DEFAULT_PARAMS={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},AM.DEFAULT_OPTIONS_STYLE={point:OM(OM({},AM.DEFAULT_PARAMS),{},{radius:5}),line:OM({},AM.DEFAULT_PARAMS),polygon:OM({},AM.DEFAULT_PARAMS)};var NM=AM,jM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),FM=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return r.resolution=void 0,r.distance=void 0!==e.distance?e.distance:20,r.features=[],r.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Er(e.getType()==dr.POINT,10),e},r.boundRefresh_=r.refresh.bind(r),r.setSource(e.source||null),r}return jM(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(Li,this.boundRefresh_),this.source=t,t&&t.addEventListener(Li,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,o=r.length;i<o;i++){var a=r[i];if(!(wr(a)in n)){var s=this.geometryFunction(a);if(s){Zr(s.getCoordinates(),t),Fr(t,e,t);var u=this.source.getFeaturesInExtent(t);u=u.filter((function(t){var e=wr(t);return!(e in n)&&(n[e]=!0,!0)})),this.features.push(this.createCluster(u))}}}},e.prototype.createCluster=function(t){for(var e=[0,0],r=t.length-1;r>=0;--r){var n=this.geometryFunction(t[r]);n?ua(e,n.getCoordinates()):t.splice(r,1)}da(e,1/t.length);var i=new lp(new ds(e));return i.set("features",t),i},e}(Db);function DM(t){return(DM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GM(){return(GM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=qM(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function qM(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZM(t)););return t}function UM(t,e){return(UM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function VM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ZM(t);if(e){var i=ZM(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return WM(this,r)}}function WM(t,e){if(e&&("object"===DM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YM(t)}function YM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZM(t){return(ZM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var HM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UM(t,e)}(o,t);var e,r,n,i=VM(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return BM(this,o),(t=i.call(this,e)).styleCluster_=e.style,t.oldCluster_=new Db,t.clusters_=[],t.animation_={start:!1},t.set("animationDuration","number"==typeof e.animationDuration?e.animationDuration:700),t.set("animationMethod",e.animationMethod||wa),t.getSource().on("change",t.saveCluster_.bind(YM(t))),t.on("prerender",t.animate.bind(YM(t))),t.on("postrender",t.postanimate.bind(YM(t))),t.setStyle(e.style),t}return e=o,n=[{key:"getClusterForFeature",value:function(t,e){return e.find((function(e){var r,n=e.get("features");return bz(n)||(r=n.find((function(e){return e===t}))),r}))}}],(r=[{key:"saveCluster_",value:function(){if(this.oldCluster_.clear(),this.get("animationDuration")){var t=this.getSource().getFeatures();t.length&&t[0].get("features")&&(this.oldCluster_.addFeatures(this.clusters_),this.clusters_=t.slice(0),this.sourceChanged=!0)}}},{key:"animate",value:function(t){var e=this,r=t,n=this.get("animationDuration");if(n){if(this.animation_.resolution!==r.frameState.viewState.resolution&&this.sourceChanged){var i=r.frameState.viewState.resolution,o=r.frameState.extent;this.animation_.reverse=this.animation_.resolution>=i,this.prepareAnimation_(o,r.frameState.viewState.resolution),r.frameState.time=this.animation_.start}var a=this.animation_.clustersFrom.length;if(a>0&&a<=1e3&&this.animation_.start){var s=Nc(r),u=(r.frameState.time-this.animation_.start)/n;u>1&&(this.animation_.start=!1,u=1),u=this.get("animationMethod")(u),r.context.save(),r.context.globalAlpha=this.getOpacity(),this.animation_.clustersFrom.forEach((function(t,n){var i=t.getGeometry().getCoordinates(),o=e.animation_.clustersTo[n].getGeometry().getCoordinates();e.animation_.reverse?(i[0]=o[0]+u*(i[0]-o[0]),i[1]=o[1]+u*(i[1]-o[1])):(i[0]+=u*(o[0]-i[0]),i[1]+=u*(o[1]-i[1]));var a=e.getStyle()(t,r.frameState.viewState.resolution),l=new ds(i);bz(a)||a.forEach((function(t){var e=t.getImage();bz(e)||(null==e.getOrigin()&&(e.origin_=[]),null==e.getAnchor()&&(e.normalizedAnchor_=[]),null==e.getSize()&&(e.size_=[])),s.setStyle(t),s.drawGeometry(l)}))})),r.context.restore(),r.frameState.animate=!0,r.context.save(),r.context.beginPath(),r.context.rect(0,0,0,0),r.context.clip(),this.clip_=!0}else this.animation_.clustersFrom.length=0,this.animation_.clustersTo.length=0,this.animation_.start=!1}}},{key:"prepareAnimation_",value:function(t,e){var r=this;this.animation_.clustersFrom=[],this.animation_.clustersTo=[];var n=Fr(t,100*e),i=this.oldCluster_.getFeaturesInExtent(n),a=this.getSource().getFeaturesInExtent(n),s=this.animation_.reverse?a:i,u=this.animation_.reverse?i:a;s.forEach((function(t){var e=t.get("features");if(!bz(e)){var n=o.getClusterForFeature(e[0],u);bz(n)||!1===n||(r.animation_.clustersFrom.push(t),r.animation_.clustersTo.push(n))}})),this.animation_.resolution=e,this.sourceChanged=!1,this.animation_.start=(new Date).getTime()}},{key:"postanimate",value:function(t){this.clip_&&(t.context.restore(),this.clip_=!1)}},{key:"setStyle",value:function(t){GM(ZM(o.prototype),"setStyle",this).call(this,this.styleCluster_)}}])&&zM(e.prototype,r),n&&zM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ob),XM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),KM="select",JM=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.selected=r,o.deselected=n,o.mapBrowserEvent=i,o}return XM(e,t),e}(Ii),$M={};function QM(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),r=this.removeCondition_(t),n=this.toggleCondition_(t),i=!e&&!r&&!n,o=t.map,a=this.getFeatures(),s=[],u=[];if(i){Cn(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return u.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var c=a.item(l),h=u.indexOf(c);h>-1?u.splice(h,1):(a.remove(c),s.push(c))}0!==u.length&&a.extend(u)}else{o.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.filter_(t,i))return!e&&!n||vi(a.getArray(),t)?(r||n)&&vi(a.getArray(),t)&&(s.push(t),this.removeFeatureLayerAssociation_(t)):(u.push(t),this.addFeatureLayerAssociation_(t,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=s.length-1;f>=0;--f)a.remove(s[f]);a.extend(u)}return(u.length>0||s.length>0)&&this.dispatchEvent(new JM(KM,u,s,t)),!0}var tS=function(t){function e(e){var r,n,i=t.call(this,{handleEvent:QM})||this,o=e||{};if(i.boundAddFeature_=i.addFeature_.bind(i),i.boundRemoveFeature_=i.removeFeature_.bind(i),i.condition_=o.condition?o.condition:Wu,i.addCondition_=o.addCondition?o.addCondition:Vu,i.removeCondition_=o.removeCondition?o.removeCondition:Vu,i.toggleCondition_=o.toggleCondition?o.toggleCondition:Zu,i.multi_=!!o.multi&&o.multi,i.filter_=o.filter?o.filter:Ei,i.hitTolerance_=o.hitTolerance?o.hitTolerance:0,i.style_=void 0!==o.style?o.style:(wi((r=x_())[dr.POLYGON],r[dr.LINE_STRING]),wi(r[dr.GEOMETRY_COLLECTION],r[dr.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.features_=o.features||new oo,o.layers)if("function"==typeof o.layers)n=o.layers;else{var a=o.layers;n=function(t){return vi(a,t)}}else n=Ei;return i.layerFilter_=n,i.featureLayerAssociation_={},i}return XM(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[wr(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[wr(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(ci,this.boundAddFeature_),this.features_.addEventListener(hi,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ci,this.boundAddFeature_),this.features_.removeEventListener(hi,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var e=t.element;this.style_&&this.applySelectedStyle_(e)},e.prototype.removeFeature_=function(t){var e=t.element;this.style_&&this.restorePreviousStyle_(e)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=wr(t);e in $M||($M[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){var r=wr(t),n=this.getMap().getInteractions().getArray().filter((function(r){return r instanceof e&&r.getStyle()&&-1!==r.getFeatures().getArray().indexOf(t)}));n.length>0?t.setStyle(n[n.length-1].getStyle()):(t.setStyle($M[r]),delete $M[r])},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[wr(t)]},e}(Nu);function eS(t){return(eS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iS(t,e){return(iS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uS(t);if(e){var i=uS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return aS(this,r)}}function aS(t,e){if(e&&("object"===eS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sS(t)}function sS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uS(t){return(uS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iS(t,e)}(o,t);var e,r,n,i=oS(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rS(this,o);var r=e,n=new Ob({source:new Db({features:new oo,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:r.featureStyle});return e.layers.push(n),r.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))},(t=i.call(this,r)).map=r.map,t.pointRadius=r.pointRadius||12,t.circleMaxObjects=r.circleMaxObjects||10,t.maxObjects=r.maxObjects||60,t.spiral=!1!==r.spiral,t.animate=r.animate,t.animationDuration=r.animationDuration||500,t.selectCluster_=!1!==r.selectCluster,t.maxFeaturesToSelect=r.maxFeaturesToSelect,t.facadeLayer_=r.fLayer,t.style_=r.style,t.filter_=r.filter,t.overlayLayer_=n,t.originalHandleEvent=t.handleEvent,t.on("select",t.selectCluster.bind(sS(t)),sS(t)),t}return e=o,(r=[{key:"setMap",value:function(t){var e=this;this.getMap()&&(this.getMap().getView()&&this.getMap().getView().un("change:resolution",this.clear.bind(this)),this.getMap().removeLayer(this.overlayLayer_)),tS.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&t.getView()&&t.getView().on("change:resolution",this.clear.bind(this)),this.handleEvent=function(t){return e.originalHandleEvent.apply(e,[t]),!0}}},{key:"clear",value:function(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()}},{key:"getLayer",value:function(){return this.overlayLayer_}},{key:"refreshViewEvents",value:function(){this.getMap()&&this.getMap().getView()&&this.getMap().getView().on("change:resolution",this.clear.bind(this))}},{key:"selectCluster",value:function(t){if(t.selected.length){var e=t.selected[0];if(!e.get("selectclusterfeature")){var r=e.get("features");if(r&&1!==r.length)if(r&&!(r.length>this.maxFeaturesToSelect)||this.facadeLayer_.getImpl().getNumZoomLevels()-this.map.getZoom()==1){this.selectCluster_||this.getFeatures().clear();var n=e.getGeometry().getCoordinates(),i=this.getMap().getView().getResolution(),o=i*this.pointRadius*(.5+r.length/4);!this.spiral||r.length<=this.circleMaxObjects?(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInCircle_(r,i,o,n)):(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInSpiral_(r,i,n)),this.animate&&this.animateCluster_(n)}else{var a=Dp.getFeaturesExtent(r,this.map.getProjection().code);this.map.setBbox(a)}}}else this.clear()}},{key:"drawFeaturesAndLinsInCircle_",value:function(t,e,r,n){for(var i=Math.min(t.length,this.circleMaxObjects),o=0;o<i;o+=1){var a=2*Math.PI*(o/i);2!==i&&4!==i||(a+=Math.PI/4);var s=[n[0]+r*Math.sin(a),n[1]+r*Math.cos(a)];this.drawAnimatedFeatureAndLink_(t[o],e,n,s)}}},{key:"drawFeaturesAndLinsInSpiral_",value:function(t,e,r){for(var n,i=0,o=2*this.pointRadius,a=Math.min(this.maxObjects,t.length),s=0;s<a;s+=1){i+=(o+.1)/(n=o/2+o*i/(2*Math.PI));var u=e*n*Math.sin(i),l=e*n*Math.cos(i),c=[r[0]+u,r[1]+l];this.drawAnimatedFeatureAndLink_(t[s],e,r,c)}}},{key:"drawAnimatedFeatureAndLink_",value:function(t,e,r,n){var i=new lp;t.getKeys().forEach((function(e){i.set(e,t.get(e))}));var o=t.getStyle();o||(o=this.facadeLayer_.getStyle().getImpl().oldOL3Layer.getStyle());var a=o(t,e),s=a.map?a.map((function(t){return t.clone()})):[a.clone()];i.setId(t.getId()),i.setStyle(s),i.set("features",[t]);var u=!0===["Point","MultiPoint"].includes(t.getGeometry().getType())?new ds(n):t.getGeometry(),l=!0===["Point","MultiPoint"].includes(t.getGeometry().getType())?new vp([r,n]):new vp([r,Dp.getCentroid(t.getGeometry())]);i.set("geometry",u),this.overlayLayer_.getSource().addFeature(i);var c=new lp({selectclusterlink:!0,geometry:l});this.overlayLayer_.getSource().addFeature(c)}},{key:"animateCluster_",value:function(t,e){var r=this;this.listenerKey_&&(this.overlayLayer_.setVisible(!0),Hi(this.listenerKey_));var n=this.overlayLayer_.getSource().getFeatures();if(n.length){this.overlayLayer_.setVisible(!1);var i=this.animationDuration||500,o=(new Date).getTime();this.listenerKey_=this.facadeLayer_.getImpl().getOL3Layer().on(["postrender","postcompose"],(function(e){for(var a=Nc(e),s=r.getMap().getView().getResolution(),u=wa((e.frameState.time-o)/i),l=0;l<n.length;l+=1){if(n[l].get("features")){var c=n[l],h=c.get("features")[0],f=c.getGeometry().getCoordinates();f[0]=t[0]+u*(f[0]-t[0]),f[1]=t[1]+u*(f[1]-t[1]);for(var p=new ds(f),d=r.overlayLayer_.getStyle()(h,s).map((function(t){return t.clone()})),m=0;m<d.length;m+=1){var y=d[m];y.getImage().size||(y.getImage().size=[42,42]),a.setStyle(y),a.drawLineString(new vp([t,f]))}var g=h.getStyle();g||(g=r.facadeLayer_.getStyle().getImpl().oldOL3Layer.getStyle());for(var v=g(h,s),_=v.map?v.map((function(t){return t.clone()})):[v.clone()],b=0;b<_.length;b+=1){var w=_[b],x=w.getImage();if(x instanceof Xw){var M=null==x.getOrigin()?[0,0]:x.getOrigin(),S=null==x.getAnchor()?[0,0]:x.getAnchor(),E=null==x.getSize()?[42,42]:x.getSize();x.size=E,x.anchor=S,x.origin=M,w.setImage(x)}a.setStyle(w),a.drawGeometry(p)}}if(u>1)return Hi(r.listenerKey_),r.overlayLayer_.setVisible(!0),void r.overlayLayer_.changed();e.frameState.animate=!0}}),this)}}}])&&nS(e.prototype,r),n&&nS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(tS);function cS(t){return(cS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pS(t,e){return(pS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yS(t);if(e){var i=yS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mS(this,r)}}function mS(t,e){if(e&&("object"===cS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yS(t){return(yS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pS(t,e)}(o,t);var e,r,n,i=dS(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hS(this,o),i.call(this,t)}return e=o,(r=[{key:"clone",value:function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new o({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}}])&&fS(e.prototype,r),n&&fS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(S_),vS=function(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(t[1]-r[1])*(e[0]-r[0])<=0},_S=function(t){t.sort((function(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}));for(var e=[],r=0;r<t.length;r+=1){for(;e.length>=2&&vS(e[e.length-2],e[e.length-1],t[r]);)e.pop();e.push(t[r])}for(var n=[],i=t.length-1;i>=0;i-=1){for(;n.length>=2&&vS(n[n.length-2],n[n.length-1],t[i]);)n.pop();n.push(t[i])}return n.pop(),e.pop(),e.concat(n)};function bS(t){return(bS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wS(t){return function(t){if(Array.isArray(t))return xS(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return xS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xS(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function SS(t,e){return(SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ES(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=TS(t);if(e){var i=TS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return OS(this,r)}}function OS(t,e){if(e&&("object"===bS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function TS(t){return(TS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var PS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SS(t,e)}(a,t);var e,r,i,o=ES(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,{})).convexHullLayer_=null,r.oldOL3Layer_=null,r.optionsVendor_=e,r.options_=t,r.clusterLayer_=null,r.selectClusterInteraction_=null,r.hoverInteraction_=null,r}return e=a,i=[{key:"updateRangeImpl",value:function(t,e,r,n,i){var o=i.getOptions().ranges.find((function(r){return r.min===t&&r.max===e}))||!1;return o&&(o.style=r),o}}],(r=[{key:"applyToLayer",value:function(t,e){this.layer_=t,this.options_=this.updateLastRange_(),bz(this.selectClusterInteraction_)||this.selectClusterInteraction_.clear(),this.updateCanvas();var r=t.getFeatures();r.length>0?this.clusterize_(r):this.layer_.on(bh,this.clusterize_.bind(this),this)}},{key:"selectClusterInteraction",get:function(){return this.selectClusterInteraction_}},{key:"clusterize_",value:function(t){var e=t.map((function(t){return t.getImpl().getOLFeature()}));this.clusterLayer_=new HM({name:"Cluster",source:new FM({distance:this.options_.distance,geometryFunction:function(t){return new ds(an(t.getGeometry().getExtent()))},source:new Db({features:e})}),animationDuration:this.optionsVendor_.animationDuration,style:this.clusterStyleFn_.bind(this),animationMethod:n[this.optionsVendor_.animationMethod]}),!1===this.options_.animated&&this.clusterLayer_.set("animationDuration",void 0),this.clusterLayer_.setZIndex(99999);var r=this.layer_.getImpl().getOL3Layer();r instanceof HM||(this.oldOL3Layer_=r),this.clusterLayer_.setMaxResolution(this.oldOL3Layer_.getMaxResolution()),this.clusterLayer_.setMinResolution(this.oldOL3Layer_.getMinResolution()),this.layer_.getImpl().setOL3Layer(this.clusterLayer_),bz(this.options_.ranges)&&(this.options_.ranges=this.getDefaultRanges_()),!1!==this.options_.hoverInteraction&&this.addCoverInteraction_(),!1!==this.options_.selectInteraction&&this.addSelectInteraction_()}},{key:"setRanges",value:function(t){bz(t)?this.options_.ranges=this.getDefaultRanges_():this.options_.ranges=t}},{key:"updateLastRange_",value:function(){var t=Zz({},this.options_);if(!bz(this.options_)&&!bz(this.options_.ranges)){var e=t.ranges;if(e.length>0){var r=(e=e.sort((function(t,e){return t.min-e.min}))).pop();if(bz(r.max)){var n=this.layer_.getFeatures().length;r.max=n}t.ranges.push(r)}}return t}},{key:"setAnimated",value:function(t,e,r){return r.getOptions().animated=t,!1===t?this.clusterLayer_.set("animationDuration",void 0):this.clusterLayer_.set("animationDuration",this.optionsVendor_.animationDuration),this}},{key:"addSelectInteraction",value:function(){this.addSelectInteraction_()}},{key:"addSelectInteraction_",value:function(){var t=this,e=this.layer_.getImpl().getMap();this.selectClusterInteraction_=new lS({fLayer:this.layer_,map:e,maxFeaturesToSelect:this.options_.maxFeaturesToSelect,pointRadius:this.optionsVendor_.distanceSelectFeatures,animate:!0,layers:[this.clusterLayer_]}),this.selectClusterInteraction_.on("select",this.selectClusterFeature_.bind(this),this),e.getMapImpl().addInteraction(this.selectClusterInteraction_),e.getMapImpl().on("change:view",(function(e){return t.selectClusterInteraction_.refreshViewEvents(e)}))}},{key:"removeSelectInteraction",value:function(){this.removeSelectInteraction_()}},{key:"removeSelectInteraction_",value:function(){this.layer_.getImpl().getMap().getMapImpl().removeInteraction(this.selectClusterInteraction_)}},{key:"hoverFeatureFn_",value:function(t,e){if(!bz(t)){var r=[];t.forEach((function(t){t instanceof MG?r=r.concat(t.getAttribute("features")):r.push(t)}));var n=r.map((function(t){return t.getImpl().getOLFeature().getGeometry().getCoordinates()})),i=_S(n);if(i.length>2){var o=new lp(new ks([i])),a=lG.olFeature2Facade(o);bz(this.convexHullLayer_)?(this.convexHullLayer_=new NM({name:"cluster_cover_".concat(this.layer_.name),extract:!1},{displayInLayerSwitcher:!1,style:new MM({polygon:this.optionsVendor_.convexHullStyle})}),this.convexHullLayer_.addFeatures(a),this.layer_.getImpl().getMap().addLayers(this.convexHullLayer_),this.layer_.getImpl().getMap().getMapImpl().getView().on("change:resolution",this.clearConvexHull.bind(this),this),this.convexHullLayer_.setStyle(new MM({polygon:this.optionsVendor_.convexHullStyle})),this.convexHullLayer_.setZIndex(99990)):(this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures()),this.convexHullLayer_.addFeatures(a))}}}},{key:"leaveFeatureFn_",value:function(t,e){bz(this.convexHullLayer_)||this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures())}},{key:"addCoverInteraction_",value:function(){this.hoverKey_=this.layer_.on("hover:features",this.hoverFeatureFn_.bind(this)),this.leaveKey_=this.layer_.on("leave:features",this.leaveFeatureFn_.bind(this))}},{key:"removeCoverInteraction_",value:function(){this.layer_.unByKey("hover:features",this.hoverKey_),this.layer_.unByKey("leave:features",this.leaveKey_)}},{key:"clusterStyleFn_",value:function(t,e,r){var n,i=t.get("features");if(!i)return new gS;var o=i.length,a=this.options_.ranges.find((function(t){return t.min<=o&&t.max>=o}));if(bz(a)){if(1===o){var s=i[0].getStyle();s||(s=this.oldOL3Layer_.getStyle()),(n=s(i[0],e))[0].setGeometry(i[0].getGeometry())}}else{var u=a.style.clone();if(u instanceof MM||(u=new MM({point:u.getOptions()})),r)u.set("point.fill.opacity",.33);else if(this.options_.displayAmount){u.set("point.label",this.options_.label);var l=u.get("point.label.color");if(bz(l)){var c=u.get("point.fill.color");l=bz(c)?"#000":Yz(c),u.set("point.label.color",l)}}n=u.getImpl().olStyleFn(t,e)}return n}},{key:"getDefaultRanges_",value:function(){var t=this.layer_.getFeatures().length,e=Math.floor(t/3),r=[{min:2,max:e=Math.max(e,3),style:new MM({point:HS.RANGE_1_DEFAULT})},{min:e,max:2*e,style:new MM({point:HS.RANGE_2_DEFAULT})},{min:2*e,max:t+1,style:new MM({point:HS.RANGE_3_DEFAULT})}];return this.options_.ranges=r,r}},{key:"selectClusterFeature_",value:function(t){this.clearConvexHull()}},{key:"unapply",value:function(){bz(this.clusterLayer_)?bz(this.layer_)||this.layer_.un(bh,this.clusterize_.bind(this),this):(this.layer_.getImpl().setOL3Layer(this.oldOL3Layer_),this.oldOL3Layer_.setMaxResolution(this.clusterLayer_.getMaxResolution()),this.oldOL3Layer_.setMinResolution(this.clusterLayer_.getMinResolution()),this.removeCoverInteraction_(),this.removeSelectInteraction_(),this.clearConvexHull(),this.deactivateChangeResolutionEvent(),this.layer_.redraw(),this.deactivateChangeEvent())}},{key:"clearConvexHull",value:function(){null!==this.convexHullLayer_&&(this.layer_.getImpl().getMap().removeLayers(this.convexHullLayer_),this.convexHullLayer_=null)}},{key:"updateCanvas",value:function(){}},{key:"activateChangeEvent",value:function(){if(null!==this.clusterLayer_){var t=this.clusterLayer_.getSource(),e=FM.prototype.refresh;t.getSource().on("change",e)}}},{key:"deactivateChangeEvent",value:function(){if(null!==this.clusterLayer_){var t=this.clusterLayer_.getSource();Hi({bindTo:void 0,callOnce:!1,listener:FM.prototype.refresh,target:t.getSource(),type:"change"})}}},{key:"deactivateChangeResolutionEvent",value:function(){if(!bz(this.layer_)&&!bz(this.layer_.getImpl())){var t=this.layer_.getImpl().getMap();if(!bz(t)&&!bz(t.getMapImpl())){var e=t.getMapImpl().getView();Hi({type:"change:resolution",bindTo:void 0,listener:this.clearConvexHull,target:e,callOnce:!1})}}}},{key:"deactivateTemporarilyChangeEvent",value:function(t,e){this.deactivateChangeEvent(),wz(t)&&(null==e?t():t.apply(void 0,wS(e)))}},{key:"oldOL3Layer",get:function(){return this.oldOL3Layer_}}])&&MS(e.prototype,r),i&&MS(e,i),Object.defineProperty(e,"prototype",{writable:!1}),a}(fw);function IS(t){return(IS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function RS(t,e){return(RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=AS(t);if(e){var i=AS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return CS(this,r)}}function CS(t,e){if(e&&("object"===IS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function AS(t){return(AS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var NS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RS(t,e)}(o,t);var e,r,n,i=LS(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).styles_=[],r}return e=o,(r=[{key:"apply",value:function(t){this.layer_=t,bz(t)||this.updateInternal_(t)}},{key:"add",value:function(t){var e=this,r=t,n=this.layer_;return this.unapplyInternal(this.layer_),_z(r)||(r=[r]),(r=r.filter((function(t){return t.constructor!==e.constructor}))).forEach((function(t){e.styles_=e.styles_.filter((function(e){return e.constructor!==t.constructor}))})),this.styles_=this.styles_.concat(r),bz(n)||this.updateInternal_(n),this}},{key:"remove",value:function(t){var e=t,r=this.layer_;_z(e)||(e=[e]),bz(this.layer_)||this.unapplyInternal(this.layer_),this.styles_=this.styles_.filter((function(t){return!e.includes(t)})),r.setStyle(this.oldStyle_,!0),r.setStyle(this)}},{key:"getStyles",value:function(){return this.styles_}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"clear",value:function(){this.remove(this.styles_)}},{key:"unapplyInternal",value:function(t){this.styles_.concat(this).sort((function(t,e){return Xz(e,t)})).forEach((function(e){e instanceof o&&e.unapplySoft(t)}))}},{key:"unapplySoft",value:function(t){}},{key:"unapply",value:function(t){this.unapplyInternal(t),this.layer_=null}},{key:"updateInternal_",value:function(t){this.styles_.concat(this).sort((function(t,e){return Xz(t,e)})).forEach((function(e){e instanceof o?e.applyInternal(t):e instanceof c_&&e.apply(t,!0)}))}}])&&kS(e.prototype,r),n&&kS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(c_);function jS(t){return(jS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return DS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DS(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function BS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GS(){return(GS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=qS(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function qS(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=YS(t)););return t}function US(t,e){return(US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function VS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=YS(t);if(e){var i=YS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return WS(this,r)}}function WS(t,e){if(e&&("object"===jS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function YS(t){return(YS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ZS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&US(t,e)}(o,t);var e,r,n,i=VS(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};BS(this,o);var n=new PS(e,r);return t=i.call(this,e,n),Zz(e,o.DEFAULT),Zz(r,o.DEFAULT_VENDOR),t.optsVendor_=r,t.oldStyle_=null,t}return e=o,n=[{key:"deserialize",value:function(t){var e=FS(t,3),r=e[0],n=e[1],i=e[2],o=r;o.ranges.forEach((function(t){t.style=c_.deserialize(t.style)})),o=$z(r);var a=$z(n),s=new Function(["options","optsVendor"],"return new M.style.Cluster(options, optsVendor)")(o,a),u=i.map((function(t){return c_.deserialize(t)}));return s.add(u),s}}],(r=[{key:"apply",value:function(t){GS(YS(o.prototype),"apply",this).call(this,t);var e=t.getStyle();this.oldStyle_=e instanceof o?e.getOldStyle():e}},{key:"unapplySoft",value:function(t){this.getImpl().unapply()}},{key:"add",value:function(t){return bz(this.layer_)||this.unapplySoft(this.layer_),GS(YS(o.prototype),"add",this).call(this,t)}},{key:"applyInternal",value:function(t){this.layer_=t,this.getImpl().applyToLayer(t),this.updateCanvas()}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"getRanges",value:function(){return this.options_.ranges}},{key:"getOptions",value:function(){return this.options_}},{key:"setRanges",value:function(t){return this.getImpl().ranges=t,this.unapply(this.layer_),this.layer_.style=this,this}},{key:"getRange",value:function(t,e){return this.options_.ranges.find((function(r){return r.min===t&&r.max===e}))}},{key:"updateRange",value:function(t,e,r){return PS.updateRangeImpl(t,e,r,this.layer_,this),this.unapply(this.layer_),this.layer_.style=this,this}},{key:"setAnimated",value:function(t){return this.getImpl().setAnimated(t,this.layer_,this)}},{key:"isAnimated",value:function(){return this.options_.animated}},{key:"toImage",value:function(){return this.oldStyle_ instanceof c_?this.oldStyle_.toImage():GS(YS(o.prototype),"toImage",this).call(this)}},{key:"refresh",value:function(){if(!bz(this.layer_)){var t=this.layer_;this.unapply(this.layer_),this.apply(t),this.updateCanvas()}}},{key:"ORDER",get:function(){return 4}},{key:"addSelectInteraction",value:function(){this.getImpl().addSelectInteraction()}},{key:"removeSelectInteraction",value:function(){this.getImpl().removeSelectInteraction()}},{key:"toJSON",value:function(){var t=Zz({},this.getOptions());t.ranges=this.getRanges().map((function(t){var e=Zz({},t);return e.style=t.style.serialize(),e})),t=Jz(t);var e=Zz({},this.optsVendor_);return{parameters:[t,e=Jz(e),this.getStyles().map((function(t){return t.serialize()}))],deserializedMethod:"M.style.Cluster.deserialize"}}}])&&zS(e.prototype,r),n&&zS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NS);ZS.DEFAULT={ranges:[],hoverInteraction:!0,displayAmount:!0,selectInteraction:!0,distance:60,animated:!0,maxFeaturesToSelect:15,label:{text:function(t){var e,r=t.getAttribute("features");return r.length&&(e=r.length.toString()),e},color:"#fff",font:"bold 15px Arial",baseline:"middle",align:"center"}},ZS.DEFAULT_VENDOR={animationDuration:250,animationMethod:"linear",distanceSelectFeatures:15,convexHullStyle:{fill:{color:"#fff",opacity:.25},stroke:{color:"#7b98bc"}}},ZS.RANGE_1_DEFAULT={fill:{color:"#81c89a"},stroke:{color:"#6eb988",width:3},radius:15},ZS.RANGE_2_DEFAULT={fill:{color:"#85b9d2"},stroke:{color:"#6da4be",width:3},radius:20},ZS.RANGE_3_DEFAULT={fill:{color:"#938fcf"},stroke:{color:"#827ec5",width:3},radius:25};var HS=ZS;function XS(t){return(XS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function JS(t,e){return(JS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tE(t);if(e){var i=tE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return QS(this,r)}}function QS(t,e){if(e&&("object"===XS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tE(t){return(tE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JS(t,e)}(o,t);var e,r,n,i=$S(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new nE;return(t=i.call(this,e)).id_=Pz("mapea","render_feature"),t}return e=o,(r=[{key:"getId",value:function(){return this.id_}},{key:"getGeometry",value:function(){return null}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"getType",value:function(){return this.getImpl().getType()}},{key:"getAttribute",value:function(t){var e;if(e=this.getImpl().getAttribute(t),bz(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return bz(t)||(r=t instanceof o?t.getAttribute(e):t[e]),r}),this))}return e}},{key:"equals",value:function(t){return this.getId()===t.getId()}}])&&KS(e.prototype,r),n&&KS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h);function rE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nE=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olFeature_=null}var e,r,n;return e=t,n=[{key:"olFeature2Facade",value:function(t,e){var r=null;return bz(t)||(r=new eE).getImpl().setOLFeature(t),r}},{key:"facade2OLFeature",value:function(t){return t.getImpl().getOLFeature()}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"getType",value:function(){return this.getOLFeature().getType()}},{key:"setOLFeature",value:function(t){bz(t)||(this.olFeature_=t)}},{key:"getAttributes",value:function(){return this.olFeature_.getProperties()}},{key:"getAttribute",value:function(t){return this.olFeature_.get(t)}},{key:"setFacadeObj",value:function(t){this.facadeFeature_=t}},{key:"getCentroid",value:function(){}}])&&rE(e.prototype,r),n&&rE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function iE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var aE=function(t,e){var r,n=t.getId();return bz(n)||(r=e.getFeatureById(n)),bz(r)&&t instanceof mp&&(r=nE.olFeature2Facade(t)),r},sE=function(){function t(){iE(this,t),this.map_=null,this.defaultCursor_=void 0}var e,r,n;return e=t,(r=[{key:"addTo",value:function(t){this.map_=t}},{key:"getFeaturesByLayer",value:function(t,e){var r=[];if(!bz(e)&&e.isVisible()&&!bz(e.getImpl().getOL3Layer())){var n=e.getImpl().getOL3Layer();this.map_.getMapImpl().forEachFeatureAtPixel(t.pixel,(function(t,n){if(n instanceof HM&&!bz(t.get("features"))){var i=t.get("features").map((function(t){return aE(t,e)}));if(1===i.length)r.push(i[0]);else{var o=e.getStyle();o instanceof HS||(o=o.getStyles().find((function(t){return t instanceof HS}))),r.push(new MG(i,{ranges:o.getRanges(),hoverInteraction:o.getOptions().hoverInteraction,maxFeaturesToSelect:o.getOptions().maxFeaturesToSelect,distance:o.getOptions().distance}))}}else Object.prototype.hasOwnProperty.call(t.getProperties(),"selectclusterlink")||r.push(aE(t,e))}),{layerFilter:function(t){var r=!1;return e.getStyle()instanceof HS&&e.getStyle().getOptions().selectInteraction&&(r=t===e.getStyle().getImpl().selectClusterInteraction.getLayer()),r=r||t===n}})}return r}},{key:"addCursorPointer",value:function(){var t=this.map_.getMapImpl().getViewport();"pointer"!==t.style.cursor&&(this.defaultCursor_=t.style.cursor),t.style.cursor="pointer"}},{key:"removeCursorPointer",value:function(){this.map_.getMapImpl().getViewport().style.cursor=this.defaultCursor_}},{key:"destroy",value:function(){this.map_.un("click",this.onMapClick_,this),this.map_=null}}])&&oE(e.prototype,r),n&&oE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function uE(t){return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lE(t){return function(t){if(Array.isArray(t))return cE(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return cE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cE(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pE(t,e){return(pE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yE(t);if(e){var i=yE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mE(this,r)}}function mE(t,e){if(e&&("object"===uE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yE(t){return(yE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pE(t,e)}(o,t);var e,r,n,i=dE(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sE(e);return hE(this,o),(t=i.call(this,r)).map_=null,t.layers_=[],t.activated_=!1,t.prevSelectedFeatures_={},t.prevHoverFeatures_={},wz(r.addTo)||hh(Oh("exception").addto_method),wz(r.getFeaturesByLayer)||hh(Oh("exception").getfeaturesbylayer_method),t}return e=o,(r=[{key:"addTo",value:function(t){this.map_=t,this.map_.on("move",this.moveOverMap_.bind(this)),this.map_.on("click",this.clickOnMap_.bind(this)),this.getImpl().addTo(this.map_),this.fire("added:map")}},{key:"clickOnMap_",value:function(t){var e=this;if(!0===this.activated_){var r=this.getImpl();this.map_.removePopup(),this.layers_.forEach((function(n,i){var o=r.getFeaturesByLayer(t,n),a=lE(e.prevSelectedFeatures_[n.name]);if(a[0]===o[0]&&1===i&&o!==[]&&e.selectFeatures(a,n,t),0===o.length&&a.length>0)e.unselectFeatures(a,n,t);else if(o.length>0&&void 0!==o[0]){var s=o.filter((function(t){return!a.some((function(e){return e.equals(t)}))})),u=a.filter((function(t){return!o.some((function(e){return e.equals(t)}))}));u.length>0&&e.unselectFeatures(u,n,t),s.length>0&&e.selectFeatures(s,n,t)}}))}}},{key:"moveOverMap_",value:function(t){var e=this;if(!0===this.activated_){var r=this.getImpl();this.layers_.forEach((function(n){var i=r.getFeaturesByLayer(t,n),o=lE(e.prevHoverFeatures_[n.name]);if(0===i.length&&o.length>0)e.leaveFeatures_(o,n,t);else if(i.length>0){var a=i.filter((function(t){return t instanceof yG&&!o.some((function(e){return e.equals(t)}))})),s=o.filter((function(t){return!i.some((function(e){return e.equals(t)}))}));s.length>0&&e.leaveFeatures_(s,n,t),a.length>0&&e.hoverFeatures_(a,n,t)}}))}}},{key:"selectFeatures",value:function(t,e,r){this.prevSelectedFeatures_[e.name]=this.prevSelectedFeatures_[e.name].concat(t);var n=e.getImpl();wz(n.selectFeatures)&&n.selectFeatures(t,r.coord,r),e.fire("select:features",[t,r])}},{key:"unselectFeatures",value:function(t,e,r){this.prevSelectedFeatures_[e.name]=this.prevSelectedFeatures_[e.name].filter((function(e){return!t.some((function(t){return t.equals(e)}))}));var n=e.getImpl();wz(n.unselectFeatures)&&n.unselectFeatures(t,r.coord),e.fire("unselect:features",[t,r.coord])}},{key:"hoverFeatures_",value:function(t,e,r){this.prevHoverFeatures_[e.name]=this.prevHoverFeatures_[e.name].concat(t),e.fire("hover:features",[t,r]),this.getImpl().addCursorPointer()}},{key:"leaveFeatures_",value:function(t,e,r){this.prevHoverFeatures_[e.name]=this.prevHoverFeatures_[e.name].filter((function(e){return!t.some((function(t){return t.equals(e)}))})),e.fire("leave:features",[t,r.coord]),this.getImpl().removeCursorPointer()}},{key:"activate",value:function(){!1===this.activated_&&(this.activated_=!0,this.fire("activated"))}},{key:"deactivate",value:function(){!0===this.activated_&&(this.activated_=!1,this.fire("deactivated"))}},{key:"addLayer",value:function(t){Dz(this.layers_,t)||(this.layers_.push(t),this.prevSelectedFeatures_[t.name]=[],this.prevHoverFeatures_[t.name]=[])}},{key:"removeLayer",value:function(t){this.layers_=this.layers_.filter((function(e){return!e.equals(t)})),this.prevSelectedFeatures_[t.name]=null,this.prevHoverFeatures_[t.name]=null,delete this.prevSelectedFeatures_[t.name],delete this.prevHoverFeatures_[t.name]}},{key:"destroy",value:function(){}},{key:"clearSelectedFeatures",value:function(){var t=this;Object.keys(this.prevSelectedFeatures_).forEach((function(e){t.prevSelectedFeatures_[e]=[]}))}},{key:"clearHoverFeatures",value:function(){var t=this;Object.keys(this.prevHoverFeatures_).forEach((function(e){t.prevHoverFeatures_[e]=[]}))}}])&&fE(e.prototype,r),n&&fE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h),vE=(r(226),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),_E={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},bE=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[bg].featureMember=rd(r.readFeaturesInternal),r.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",r}return vE(e,t),e.prototype.readFlatCoordinates_=function(t,e){var r=$p(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,i="enu";if(n){var o=Un(n);o&&(i=o.getAxisOrientation())}for(var a=r.trim().split(/\s+/),s=[],u=0,l=a.length;u<l;u++){var c=a[u].split(/,+/),h=parseFloat(c[0]),f=parseFloat(c[1]),p=3===c.length?parseFloat(c[2]):0;"en"===i.substr(0,2)?s.push(h,f,p):s.push(f,h,p)}return s},e.prototype.readBox_=function(t,e){var r=pd([null],this.BOX_PARSERS_,t,e,this);return Wr(r[1][0],r[1][1],r[1][3],r[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var r=pd(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.outerBoundaryIsParser_=function(t,e){var r=pd(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve"),Jp("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=e.getProperties(),u=[],l=[];for(var c in s){var h=s[c];null!==h&&(u.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=ad(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=ad(Rd)))}var f=Ln({},i);f.node=t,md(f,i.serializers,ud(void 0,o),l,r,u)},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)}else if("Curve"===t.nodeName){var o=Jp(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();md({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=Ln({},i);o.node=t,n=Array.isArray(e)?fg(e,i):hg(e,!0,i),md(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=Jp(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,r){for(var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=e.getCoordinates(),s=a.length,u=new Array(s),l=0;l<s;++l){var c=a[l];u[l]=this.getCoords_(c,o,i)}Rd(t,u.join(" "))},e.prototype.writeCurveSegments_=function(t,e,r){var n=Jp(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();md({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=Jp(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Jp(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,r){var n=Jp(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeRing_=function(t,e,r){var n=Jp(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=Un(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];r&&(i+=","+(t[2]||0));return i},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();Rd(a,this.getCoords_(s,o,i))},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();md({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS_,ud("pointMember"),a,r,void 0,this)},e.prototype.writePointMember_=function(t,e,r){var n=Jp(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();md({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];md({node:t},this.ENVELOPE_SERIALIZERS_,ld,i,r,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return Jp("http://www.opengis.net/gml",_E[n.nodeName])},e}(Mg);bE.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:nd(bE.prototype.readFlatCoordinates_)}},bE.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:bE.prototype.innerBoundaryIsParser_,outerBoundaryIs:bE.prototype.outerBoundaryIsParser_}},bE.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:rd(bE.prototype.readFlatCoordinates_)}},bE.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:nd(Mg.prototype.readPoint),MultiPoint:nd(Mg.prototype.readMultiPoint),LineString:nd(Mg.prototype.readLineString),MultiLineString:nd(Mg.prototype.readMultiLineString),LinearRing:nd(Mg.prototype.readLinearRing),Polygon:nd(Mg.prototype.readPolygon),MultiPolygon:nd(Mg.prototype.readMultiPolygon),Box:nd(bE.prototype.readBox_)}},bE.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ad(bE.prototype.writeCurveOrLineString_),MultiCurve:ad(bE.prototype.writeMultiCurveOrLineString_),Point:ad(bE.prototype.writePoint_),MultiPoint:ad(bE.prototype.writeMultiPoint_),LineString:ad(bE.prototype.writeCurveOrLineString_),MultiLineString:ad(bE.prototype.writeMultiCurveOrLineString_),LinearRing:ad(bE.prototype.writeLinearRing_),Polygon:ad(bE.prototype.writeSurfaceOrPolygon_),MultiPolygon:ad(bE.prototype.writeMultiSurfaceOrPolygon_),Surface:ad(bE.prototype.writeSurfaceOrPolygon_),MultiSurface:ad(bE.prototype.writeMultiSurfaceOrPolygon_),Envelope:ad(bE.prototype.writeEnvelope)}},bE.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ad(bE.prototype.writeLineStringOrCurveMember_),curveMember:ad(bE.prototype.writeLineStringOrCurveMember_)}},bE.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:ad(bE.prototype.writeRing_),innerBoundaryIs:ad(bE.prototype.writeRing_)}},bE.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ad(bE.prototype.writePointMember_)}},bE.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ad(bE.prototype.writeSurfaceOrPolygonMember_),polygonMember:ad(bE.prototype.writeSurfaceOrPolygonMember_)}},bE.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ad(Rd),upperCorner:ad(Rd)}};var wE=bE,xE=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}(),ME=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SE=function(t){function e(e,r){var n=t.call(this,e)||this;return n.conditions=r,Er(n.conditions.length>=2,57),n}return ME(e,t),e}(xE),EE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),OE=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return EE(e,t),e}(SE),TE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),PE=function(t){function e(e,r,n){var i=t.call(this,"BBOX")||this;if(i.geometryName=e,i.extent=r,4!==r.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return i.srsName=n,i}return TE(e,t),e}(xE),IE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kE=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.geometryName=r||"the_geom",o.geometry=n,o.srsName=i,o}return IE(e,t),e}(xE),RE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LE=function(t){function e(e,r,n){return t.call(this,"Contains",e,r,n)||this}return RE(e,t),e}(kE),CE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AE=function(t){function e(e,r){var n=t.call(this,e)||this;return n.propertyName=r,n}return CE(e,t),e}(xE),NE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jE=function(t){function e(e,r,n){var i=t.call(this,"During",e)||this;return i.begin=r,i.end=n,i}return NE(e,t),e}(AE),FE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),DE=function(t){function e(e,r,n,i){var o=t.call(this,e,r)||this;return o.expression=n,o.matchCase=i,o}return FE(e,t),e}(AE),BE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zE=function(t){function e(e,r,n){return t.call(this,"PropertyIsEqualTo",e,r,n)||this}return BE(e,t),e}(DE),GE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qE=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThan",e,r)||this}return GE(e,t),e}(DE),UE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VE=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,r)||this}return UE(e,t),e}(DE),WE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),YE=function(t){function e(e,r,n){return t.call(this,"Intersects",e,r,n)||this}return WE(e,t),e}(kE),ZE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),HE=function(t){function e(e,r,n){var i=t.call(this,"PropertyIsBetween",e)||this;return i.lowerBoundary=r,i.upperBoundary=n,i}return ZE(e,t),e}(AE),XE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),KE=function(t){function e(e,r,n,i,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=r,s.wildCard=void 0!==n?n:"*",s.singleChar=void 0!==i?i:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return XE(e,t),e}(AE),JE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$E=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return JE(e,t),e}(AE),QE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tO=function(t){function e(e,r){return t.call(this,"PropertyIsLessThan",e,r)||this}return QE(e,t),e}(DE),eO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rO=function(t){function e(e,r){return t.call(this,"PropertyIsLessThanOrEqualTo",e,r)||this}return eO(e,t),e}(DE),nO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iO=function(t){function e(e){var r=t.call(this,"Not")||this;return r.condition=e,r}return nO(e,t),e}(xE),oO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aO=function(t){function e(e,r,n){return t.call(this,"PropertyIsNotEqualTo",e,r,n)||this}return oO(e,t),e}(DE),sO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uO=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return sO(e,t),e}(SE),lO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cO=function(t){function e(e,r,n){return t.call(this,"Within",e,r,n)||this}return lO(e,t),e}(kE);function hO(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(OE,e))}function fO(t,e,r){return new PE(t,e,r)}var pO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dO={"http://www.opengis.net/gml":{boundedBy:od(Mg.prototype.readGeometryElement,"bounds")}},mO={"http://www.opengis.net/wfs":{totalInserted:od(Ed),totalUpdated:od(Ed),totalDeleted:od(Ed)}},yO={"http://www.opengis.net/wfs":{TransactionSummary:od((function(t,e){return pd({},mO,t,e)}),"transactionSummary"),InsertResults:od((function(t,e){return pd([],EO,t,e)}),"insertIds")}},gO={"http://www.opengis.net/wfs":{PropertyName:ad(Rd)}},vO={"http://www.opengis.net/wfs":{Insert:ad((function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a=n.gmlVersion,s=Jp(o,i);t.appendChild(s),2===a?wE.prototype.writeFeatureElement(s,e,r):Tg.prototype.writeFeatureElement(s,e,r)})),Update:ad((function(t,e,r){var n=r[r.length-1];Er(void 0!==e.getId(),27);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=TO(o,i),u=e.getGeometryName();t.setAttribute("typeName",s),t.setAttributeNS(_O,"xmlns:"+o,a);var l=e.getId();if(void 0!==l){for(var c=e.getKeys(),h=[],f=0,p=c.length;f<p;f++){var d=e.get(c[f]);if(void 0!==d){var m=c[f];d&&"function"==typeof d.getSimplifiedGeometry&&(m=u),h.push({name:m,value:d})}}md({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},vO,ud("Property"),h,r),OO(t,l,r)}})),Delete:ad((function(t,e,r){var n=r[r.length-1];Er(void 0!==e.getId(),26);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=TO(o,i);t.setAttribute("typeName",s),t.setAttributeNS(_O,"xmlns:"+o,a);var u=e.getId();void 0!==u&&OO(t,u,r)})),Property:ad((function(t,e,r){var n=Jp(wO,"Name"),i=r[r.length-1].gmlVersion;if(t.appendChild(n),Rd(n,e.name),void 0!==e.value&&null!==e.value){var o=Jp(wO,"Value");t.appendChild(o),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===i?wE.prototype.writeGeometryElement(o,e.value,r):Tg.prototype.writeGeometryElement(o,e.value,r):Rd(o,e.value)}})),Native:ad((function(t,e,r){e.vendorId&&t.setAttribute("vendorId",e.vendorId);void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore));void 0!==e.value&&Rd(t,e.value)}))}},_O="http://www.w3.org/2000/xmlns/",bO="http://www.opengis.net/ogc",wO="http://www.opengis.net/wfs",xO={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},MO=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType_=n.featureType,r.featureNS_=n.featureNS,r.gmlFormat_=n.gmlFormat?n.gmlFormat:new Tg,r.schemaLocation_=n.schemaLocation?n.schemaLocation:xO["1.1.0"],r}return pO(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var r={node:t};Ln(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Ln(r,this.getReadOptions(t,e||{}));var n=[r];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[bg].featureMember=rd(Mg.prototype.readFeaturesInternal);var i=pd([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=td(t);return this.readTransactionResponseFromDocument(e)}return Qp(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=td(t);return this.readFeatureCollectionMetadataFromDocument(e)}return Qp(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},r=Od(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=r,pd(e,dO,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return pd({},yO,t,[])},e.prototype.writeGetFeature=function(t){var e,r=Jp(wO,"GetFeature");if(r.setAttribute("service","WFS"),r.setAttribute("version","1.1.0"),t&&(t.handle&&r.setAttribute("handle",t.handle),t.outputFormat&&r.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&r.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&r.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&r.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&r.setAttribute("count",String(t.count)),void 0!==t.viewParams&&r.setAttribute("viewParams",t.viewParams),e=t.filter,t.bbox)){Er(t.geometryName,12);var n=fO(t.geometryName,t.bbox,t.srsName);e=e?hO(e,n):n}r.setAttributeNS(Kp,"xsi:schemaLocation",this.schemaLocation_);var i={node:r};return Ln(i,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),Er(Array.isArray(t.featureTypes),11),function(t,e,r){var n=r[r.length-1],i=Ln({},n);i.node=t,md(i,PO,ud("Query"),e,r)}(r,t.featureTypes,[i]),r},e.prototype.writeTransaction=function(t,e,r,n){var i,o,a=[],s=Jp(wO,"Transaction"),u=n.version?n.version:"1.1.0",l="1.0.0"===u?2:3;s.setAttribute("service","WFS"),s.setAttribute("version",u),n&&(i=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle));var c=xO[u];s.setAttributeNS(Kp,"xsi:schemaLocation",c);var h=n.featurePrefix?n.featurePrefix:"feature";return t&&(o=Ln({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,hasZ:n.hasZ,srsName:n.srsName}),Ln(o,i),md(o,vO,ud("Insert"),t,a)),e&&(o=Ln({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,hasZ:n.hasZ,srsName:n.srsName}),Ln(o,i),md(o,vO,ud("Update"),e,a)),r&&md({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,srsName:n.srsName},vO,ud("Delete"),r,a),n.nativeElements&&md({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,srsName:n.srsName},vO,ud("Native"),n.nativeElements,a),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var r=[{}];return this.gmlFormat_.readGeometryElement(e,r),Un(r.pop().srsName)}return null},e}(vg);var SO={"http://www.opengis.net/ogc":{FeatureId:rd((function(t,e){return t.getAttribute("fid")}))}};var EO={"http://www.opengis.net/wfs":{Feature:function(t,e){fd(SO,t,e)}}};function OO(t,e,r){var n=Jp(bO,"Filter"),i=Jp(bO,"FeatureId");n.appendChild(i),i.setAttribute("fid",e),t.appendChild(n)}function TO(t,e){var r=(t=t||"feature")+":";return 0===e.indexOf(r)?e:r+e}var PO={"http://www.opengis.net/wfs":{Query:ad((function(t,e,r){var n,i=r[r.length-1],o=i.featurePrefix,a=i.featureNS,s=i.propertyNames,u=i.srsName;n=o?TO(o,e):e;t.setAttribute("typeName",n),u&&t.setAttribute("srsName",u);a&&t.setAttributeNS(_O,"xmlns:"+o,a);var l=Ln({},i);l.node=t,md(l,gO,ud("PropertyName"),s,r);var c=i.filter;if(c){var h=Jp(bO,"Filter");t.appendChild(h),IO(h,c,r)}}))},"http://www.opengis.net/ogc":{During:ad((function(t,e,r){var n=Jp("http://www.opengis.net/fes","ValueReference");Rd(n,e.propertyName),t.appendChild(n);var i=Jp(bg,"TimePeriod");t.appendChild(i);var o=Jp(bg,"begin");i.appendChild(o),NO(o,e.begin);var a=Jp(bg,"end");i.appendChild(a),NO(a,e.end)})),And:ad(kO),Or:ad(kO),Not:ad((function(t,e,r){var n={node:t},i=e.condition;md(n,PO,ud(i.getTagName()),[i],r)})),BBOX:ad((function(t,e,r){r[r.length-1].srsName=e.srsName,CO(t,e.geometryName),Tg.prototype.writeGeometryElement(t,e.extent,r)})),Contains:ad((function(t,e,r){r[r.length-1].srsName=e.srsName,CO(t,e.geometryName),Tg.prototype.writeGeometryElement(t,e.geometry,r)})),Intersects:ad((function(t,e,r){r[r.length-1].srsName=e.srsName,CO(t,e.geometryName),Tg.prototype.writeGeometryElement(t,e.geometry,r)})),Within:ad((function(t,e,r){r[r.length-1].srsName=e.srsName,CO(t,e.geometryName),Tg.prototype.writeGeometryElement(t,e.geometry,r)})),PropertyIsEqualTo:ad(RO),PropertyIsNotEqualTo:ad(RO),PropertyIsLessThan:ad(RO),PropertyIsLessThanOrEqualTo:ad(RO),PropertyIsGreaterThan:ad(RO),PropertyIsGreaterThanOrEqualTo:ad(RO),PropertyIsNull:ad((function(t,e,r){CO(t,e.propertyName)})),PropertyIsBetween:ad((function(t,e,r){CO(t,e.propertyName);var n=Jp(bO,"LowerBoundary");t.appendChild(n),AO(n,""+e.lowerBoundary);var i=Jp(bO,"UpperBoundary");t.appendChild(i),AO(i,""+e.upperBoundary)})),PropertyIsLike:ad((function(t,e,r){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString());CO(t,e.propertyName),AO(t,""+e.pattern)}))}};function IO(t,e,r){md({node:t},PO,ud(e.getTagName()),[e],r)}function kO(t,e,r){for(var n={node:t},i=e.conditions,o=0,a=i.length;o<a;++o){var s=i[o];md(n,PO,ud(s.getTagName()),[s],r)}}function RO(t,e,r){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),CO(t,e.propertyName),AO(t,""+e.expression)}function LO(t,e,r){var n=Jp(bO,t);Rd(n,r),e.appendChild(n)}function CO(t,e){LO("PropertyName",t,e)}function AO(t,e){LO("Literal",t,e)}function NO(t,e){var r=Jp(bg,"TimeInstant");t.appendChild(r);var n=Jp(bg,"timePosition");r.appendChild(n),Rd(n,e)}var jO=MO,FO=r(205),DO=r.n(FO),BO=r(206),zO=r.n(BO);function GO(t){return(GO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function UO(t,e){return(UO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function VO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=YO(t);if(e){var i=YO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return WO(this,r)}}function WO(t,e){if(e&&("object"===GO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function YO(t){return(YO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ZO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UO(t,e)}(o,t);var e,r,n,i=VO(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{})).facadeMap_=null,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,mu.call(this,{element:e,target:null}),t.getMapImpl().addControl(this)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"getElement",value:function(){return this.element}}])&&qO(e.prototype,r),n&&qO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(mu);function HO(t){return(HO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XO(t){return function(t){if(Array.isArray(t))return KO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return KO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KO(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function JO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $O(t,e){return($O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function QO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=eT(t);if(e){var i=eT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return tT(this,r)}}function tT(t,e){if(e&&("object"===HO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function eT(t){return(eT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$O(t,e)}(a,t);var e,r,n,o=QO(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this)).userFormats=["text/html","text/plain","application/vnd.ogc.gml"],r.featureCount=e.featureCount,bz(r.featureCount)&&(r.featureCount=10),r.buffer=e.buffer||5,r.element=document.createElement("div"),r.activated=t,r.currentFormat=0,r}return e=a,n=[{key:"insert",value:function(t,e){var r=!1;switch(e){case"text/html":var n=document.createElement("div");n.innerHTML=t;var i="";Array.prototype.forEach.call(n.querySelectorAll("body"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("div"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("table"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("b"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("span"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("input"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("a"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("img"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("p"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("ul"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("li"),(function(t){i+=t.innerHTML.trim()})),i.length>0&&!/WMS\s+server\s+error/i.test(t)&&(r=!0);break;case"application/vnd.ogc.gml":r=(new jO).readFeatures(t).length>0;break;case"text/plain":/returned\s+no\s+results/i.test(t)||/features\s+were\s+found/i.test(t)||/:$/i.test(t)||(r=!0)}return r}},{key:"unsupportedFormat",value:function(t,e){var r=!1;return"text/html"===e&&(r=a.regExs.msUnsupportedFormat.test(t)),r}}],(r=[{key:"addTo",value:function(t,e){!1===t.getMapImpl().getControls().getArray().some((function(t){return t instanceof a}))&&(this.facadeMap_=t,t.getMapImpl().addControl(this),this.addOnClickEvent_())}},{key:"deleteOnClickEvent_",value:function(){Hi(this.clickEventKey_)}},{key:"addOnClickEvent_",value:function(){var t=this,e=this.facadeMap_.getMapImpl();!0===this.activated&&(this.clickEventKey_=e.on("singleclick",(function(e){return t.buildUrl_(i,e)})))}},{key:"buildUrl_",value:function(t,e){this.evt=e;var r=this.facadeMap_.getMapImpl(),n=this.buildWMSInfoURL(this.facadeMap_.getWMS()),i=this.buildWMTSInfoURL(this.facadeMap_.getWMTS()),o=[].concat(XO(i),XO(n)).filter((function(t){return!bz(t)}));o.length>0?this.showInfoFromURL_(o,e.coordinate,r):t.info("No existen capas consultables")}},{key:"buildWMSInfoURL",value:function(t){var e=this,r=this.facadeMap_.getMapImpl().getView().getResolution(),n=this.facadeMap_.getProjection().code;return t.map((function(t){var i,o=t.getImpl().getOL3Layer();if(t.isVisible()&&t.isQueryable()&&!bz(o)){i={};var a={INFO_FORMAT:e.userFormats[e.currentFormat],FEATURE_COUNT:e.featureCount},s=o.getSource(),u=e.evt.coordinate;/buffer/i.test(t.url)||(a.BUFFER=e.buffer);var l=s.getFeatureInfoUrl(u,r,n,a);i={layer:t.legend||t.name,url:l}}return i}))}},{key:"buildWMTSInfoURL",value:function(t){var e=this;return t.map((function(t){var r;if(t.isVisible()&&t.isQueryable()){r={};var n=e.userFormats[e.currentFormat],i=e.evt.coordinate,o=t.getFeatureInfoUrl(i,e.facadeMap_.getZoom(),n);r={layer:t.legend||t.name,url:o}}return r}))}},{key:"formatInfo",value:function(t,e,r){var n=null;switch(e){case"text/html":n=t;break;case"application/vnd.ogc.gml":var i=(new jO).readFeatures(t);n="",i.forEach((function(t){var e=t.getKeys();n+="<div class='divinfo'>",n+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>' ".concat(jz(r)," '</td></tr>'");for(var i=0,o=e.length;i<o;i+=1){var a=e[i],s=t.get(a);n+='<tr><td class="key"><b>',n+=jz(a),n+='</b></td><td class="value">',n+=s,n+="</td></tr>"}n+="</tbody></table></div>"}));break;case"text/plain":n=a.regExs.gsResponse.test(t)?this.txtToHtmlGeoserver(t,r):this.txtToHtmlMapserver(t,r)}return n}},{key:"txtToHtmlGeoserver",value:function(t,e){var r=t,n=(r=(r=r.replace(/[\w\s\S]*':/i,"")).replace(/---(-*)(n+)---(-*)/g,"#newfeature#")).split("\n"),i="<div class='divinfo'>";i+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(jz(e),"</td></tr>");for(var o=0,s=n.length;o<s;o+=1){var u=n[o].trim();if(-1!==u.indexOf("=")){var l=u.split("="),c=l[0].trim(),h="-";l.length>1&&(0!==(h=l[1].trim()).length&&"null"!==h||(h="-")),!1===a.regExs.gsGeometry.test(c)&&(i+='<tr><td class="key"><b>',i+=jz(c),i+='</b></td><td class="value">',i+=h,i+="</td></tr>")}else a.regExs.gsNewFeature.test(u)&&(i+='<tr><td class="header" colspan="3">'.concat(jz(e),"</td></tr>"))}return i+="</tbody></table></div>"}},{key:"txtToHtmlMapserver",value:function(t){for(var e=t,r=(e=e.replace(/[\w\s\S]*(layer)/i,"$1")).replace(/layer(\s*)'(\w+)'[\w\s\S]*/i,"$2"),n=(e=(e=(e=(e=e.replace(/layer(\s*)'(\w+)'([\w\s\S]*)/i,"$3")).replace(/feature(\s*)(\w*)(\s*)(:)([\w\s\S]*)/i,"$5")).replace(/'/g,"")).replace(/=/g,";")).split("\n"),i="",o="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(jz(r),"</td></tr>"),s=0,u=n.length;s<u;s+=1){var l=n[s].trim(),c=n[s]?n[s].trim():"",h=l.split(";"),f=h[0].trim(),p="-";h.length>1&&0===(p=h[1].trim()).length&&(p="-"),f.length>0&&(a.regExs.msNewFeature.test(f)?c.length>0&&!a.regExs.msNewFeature.test(c)&&(i+="<tr><td class='header' colspan='3'>".concat(jz(r),"</td><td></td></tr>")):(i+='<tr><td class="key"><b>',i+=jz(f),i+='</b></td><td class="value">',i+=p,i+="</td></tr>"))}return i.length>0&&(i="".concat(o+i,"</tbody></table>")),i}},{key:"showInfoFromURL_",value:function(t,e,r){var n=this,o=Bh(DO.a,{vars:{info:a.LOADING_MESSAGE},parseToHtml:!1}),s=[],u=this.userFormats[this.currentFormat],l=0,c={icon:"g-cartografia-info",title:a.POPUP_TITLE,content:o},h=this.facadeMap_.getPopup();bz(h)?((h=new Bv).addTab(c),this.facadeMap_.addPopup(h,e)):h.getTabs().some((function(t){return t.title!==a.POPUP_TITLE}))?h.addTab(c):(this.facadeMap_.removePopup(),(h=new Bv).addTab(c),this.facadeMap_.addPopup(h,e)),t.forEach((function(e){var r=e.url,o=e.layer;lz(r).then((function(e){if(h=n.facadeMap_.getPopup(),200===e.code&&!1===e.error){var r=e.text;if(!0===a.insert(r,u)){var f=n.formatInfo(r,u,o);s.push({formatedInfo:f,layerName:o})}else if(a.unsupportedFormat(r,u)){if(!(n.currentFormat>2))return n.currentFormat+=1,void n.buildUrl_(i,n.evt);s.push({formatedInfo:Oh("getfeatureinfo").any_format,layerName:o})}}if(l+=1,t.length===l&&!bz(h))if(h.removeTab(c),0===s.length)h.addTab({icon:"g-cartografia-info",title:a.POPUP_TITLE,content:Oh("getfeatureinfo").no_info});else{var p=Bh(zO.a,{vars:{layers:s,info_of:Oh("getfeatureinfo").info_of},parseToHtml:!1}).replace(/(.*)(<a href=.*)(>.*<\/a.*)/g,'$1$2 target="_blank"$3');h.addTab({icon:"g-cartografia-info",title:a.POPUP_TITLE,content:p,listeners:[{selector:".m-getfeatureinfo-content-info div.m-arrow-right",all:!0,type:"click",callback:function(t){return n.toogleSection(t)}}]})}}))})),this.popup_=h}},{key:"toogleSection",value:function(t){var e=t.target,r=e.parentElement.parentElement.querySelector(".m-getfeatureinfo-content-info-body");if(r.classList.contains("m-content-collapsed")){r.classList.remove("m-content-collapsed"),e.classList.remove("m-arrow-right"),e.classList.add("m-arrow-down");var n=this.popup_.getCoordinate();bz(this.popup_.getImpl().panIntoView)||this.popup_.getImpl().panIntoView(n)}else r.classList.add("m-content-collapsed"),e.classList.add("m-arrow-right"),e.classList.remove("m-arrow-down")}}])&&JO(e.prototype,r),n&&JO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(ZO);rT.LOADING_MESSAGE="Obteniendo información...",rT.POPUP_TITLE=Oh("getfeatureinfo").info,rT.regExs={gsResponse:/^results[\w\s\S]*'http:/i,msNewFeature:/feature(\s*)(\w+)(\s*):/i,gsNewFeature:/#newfeature#/,gsGeometry:/geom$/i,msGeometry:/boundedby$/i,msUnsupportedFormat:/error(.*)unsupported(.*)info_format/i};var nT=rT;function iT(t){return(iT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sT(t,e){return(sT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=cT(t);if(e){var i=cT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lT(this,r)}}function lT(t,e){if(e&&("object"===iT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function cT(t){return(cT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sT(t,e)}(o,t);var e,r,n,i=uT(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};oT(this,o);var n=new nT(t,r);return e=i.call(this,n,o.NAME),yz(nT)&&hh(Oh("exception").getfeatureinfo_method),e}return e=o,(r=[{key:"createView",value:function(t){return""}},{key:"getActivationButton",value:function(t){return null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}}])&&aT(e.prototype,r),n&&aT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ch);hT.NAME="getfeatureinfo";var fT=hT,pT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dT="accuracy",mT="accuracyGeometry",yT="altitude",gT="altitudeAccuracy",vT="heading",_T="position",bT="projection",wT="speed",xT="tracking",MT="trackingOptions",ST=function(t){function e(e){var r=t.call(this,Ci)||this;return r.code=e.code,r.message=e.message,r}return pT(e,t),e}(Ii),ET=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.position_=null,r.transform_=Gn,r.watchId_=void 0,r.addEventListener(to(bT),r.handleProjectionChanged_),r.addEventListener(to(xT),r.handleTrackingChanged_),void 0!==n.projection&&r.setProjection(n.projection),void 0!==n.trackingOptions&&r.setTrackingOptions(n.trackingOptions),r.setTracking(void 0!==n.tracking&&n.tracking),r}return pT(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Kn(Un("EPSG:4326"),t),this.position_&&this.set(_T,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(dT,e.accuracy),this.set(yT,null===e.altitude?void 0:e.altitude),this.set(gT,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(vT,null===e.heading?void 0:hr(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var r=this.transform_(this.position_);this.set(_T,r),this.set(wT,null===e.speed?void 0:e.speed);var n=Rs(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(mT,n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new ST(t))},e.prototype.getAccuracy=function(){return this.get(dT)},e.prototype.getAccuracyGeometry=function(){return this.get(mT)||null},e.prototype.getAltitude=function(){return this.get(yT)},e.prototype.getAltitudeAccuracy=function(){return this.get(gT)},e.prototype.getHeading=function(){return this.get(vT)},e.prototype.getPosition=function(){return this.get(_T)},e.prototype.getProjection=function(){return this.get(bT)},e.prototype.getSpeed=function(){return this.get(wT)},e.prototype.getTracking=function(){return this.get(xT)},e.prototype.getTrackingOptions=function(){return this.get(MT)},e.prototype.setProjection=function(t){this.set(bT,Un(t))},e.prototype.setTracking=function(t){this.set(xT,t)},e.prototype.setTrackingOptions=function(t){this.set(MT,t)},e}(eo);function OT(t){return(OT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PT(){return(PT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=IT(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function IT(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CT(t)););return t}function kT(t,e){return(kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function RT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=CT(t);if(e){var i=CT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return LT(this,r)}}function LT(t,e){if(e&&("object"===OT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function CT(t){return(CT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kT(t,e)}(o,t);var e,r,n,i=RT(o);function o(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(a=i.call(this,n)).vendorOptions_=n,a.geolocation_=null,a.accuracyFeature_=lG.olFeature2Facade(new lp),a.tracking_=t,a.highAccuracy_=e,a.maximumAge_=r,a.activated_=!1,a.positionFeature_=lG.olFeature2Facade(new lp({style:o.POSITION_STYLE})),a}return e=o,(r=[{key:"activate",value:function(){var t=this;if(this.element.classList.add("m-locating"),bz(this.geolocation_)){var e=Un(this.facadeMap_.getProjection().code);this.geolocation_=new ET(Bz({projection:e,tracking:this.tracking_,trackingOptions:{enableHighAccuracy:this.highAccuracy_,maximumAge:this.maximumAge_}},this.vendorOptions_,!0)),this.geolocation_.on("change:accuracyGeometry",(function(e){var r=e.target.get(e.key);t.accuracyFeature_.getImpl().getOLFeature().setGeometry(r)})),this.geolocation_.once("change:position",(function(e){var r=e.target.get(e.key),n=bz(r)?null:new ds(r);t.positionFeature_.getImpl().getOLFeature().setGeometry(n),t.facadeMap_.setCenter(r),t.element.classList.contains("m-locating")&&t.facadeMap_.setZoom(o.ZOOM),t.element.classList.remove("m-locating"),t.element.classList.add("m-located"),t.geolocation_.setTracking(t.tracking_)}))}this.geolocation_.setTracking(!0),this.facadeMap_.drawFeatures([this.accuracyFeature_])}},{key:"removePositions_",value:function(){bz(this.accuracyFeature_)||this.facadeMap_.removeFeatures([this.accuracyFeature_]),bz(this.positionFeature_)||this.facadeMap_.removeFeatures([this.positionFeature_]),this.geolocation_.setTracking(!1)}},{key:"deactivate",value:function(){this.removePositions_(),this.element.classList.remove("m-located"),this.element.classList.remove("m-locating"),this.geolocation_=null}},{key:"setTracking",value:function(t){this.tracking_=t,this.geolocation_.setTracking(t)}},{key:"destroy",value:function(){this.removePositions_(),PT(CT(o.prototype),"destroy",this).call(this)}}])&&TT(e.prototype,r),n&&TT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ZO);AT.POSITION_STYLE=new S_({image:new m_({radius:6,fill:new y_({color:"#3399CC"}),stroke:new g_({color:"#fff",width:2})})}),AT.ZOOM=16;var NT=AT,jT=r(207),FT=r.n(jT);r(227);function DT(t){return(DT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GT(t,e){return(GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=VT(t);if(e){var i=VT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return UT(this,r)}}function UT(t,e){if(e&&("object"===DT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function VT(t){return(VT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GT(t,e)}(o,t);var e,r,n,i=qT(o);function o(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};BT(this,o),yz(NT)&&hh(Oh("exception").location_method);var n=new NT(t,e,6e4,r);return i.call(this,n,o.NAME)}return e=o,(r=[{key:"createView",value:function(t){return Bh(FT.a,{vars:{title:Oh("location").title}})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-location-button")}},{key:"equals",value:function(t){var e=t instanceof o;return e}},{key:"setTracking",value:function(t){this.getImpl().tracking=t}}])&&zT(e.prototype,r),n&&zT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ch);WT.NAME="location";var YT=WT,ZT=(r(59),r(208)),HT=r.n(ZT);function XT(t){return(XT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $T(){return($T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=QT(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function QT(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nP(t)););return t}function tP(t,e){return(tP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=nP(t);if(e){var i=nP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rP(this,r)}}function rP(t,e){if(e&&("object"===XT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nP(t){return(nP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tP(t,e)}(o,t);var e,r,n,i=eP(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return KT(this,o),(t=i.call(this)).facadeMap_=null,t.exactScale=e.exactScale||!1,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.scaleContainer_=e.querySelector("#".concat("m-scale-span")),this.element=e,this.render=this.renderCB,this.target_=null,t.getMapImpl().addControl(this)}},{key:"renderCB",value:function(t){var e=t.frameState;bz(e)||function(t,e,r,n){var i,o=e;r.getWMTS().length>0||r.getWMTS().length<=0&&!0===n?i=Dp.getWMTSScale(r,n):r.getWMTS().length<=0&&1==!n&&(i=r.getScale()),bz(i)||(o.innerHTML=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}(i));var a=document.querySelector("#m-level-number");null!==a&&(a.innerHTML=Math.round(r.getZoom(),2))}(e.viewState,this.scaleContainer_,this.facadeMap_,this.exactScale)}},{key:"destroy",value:function(){$T(nP(o.prototype),"destroy",this).call(this),this.scaleContainer_=null}}])&&JT(e.prototype,r),n&&JT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ZO);function oP(t){return(oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uP(t,e){return(uP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hP(t);if(e){var i=hP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cP(this,r)}}function cP(t,e){if(e&&("object"===oP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hP(t){return(hP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uP(t,e)}(o,t);var e,r,n,i=lP(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};aP(this,o);var r=new iP(e);return t=i.call(this,r,o.NAME),yz(iP)&&hh(Oh("exception").scale_method),t}return e=o,(r=[{key:"createView",value:function(t){return Bh(HT.a,{vars:{title:Oh("scale").title,scale:Oh("scale").scale,level:Oh("scale").level}})}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&sP(e.prototype,r),n&&sP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ch);fP.NAME="scale";var pP=fP;r(228);function dP(t){return(dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yP(){return(yP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=gP(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function gP(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wP(t)););return t}function vP(t,e){return(vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wP(t);if(e){var i=wP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bP(this,r)}}function bP(t,e){if(e&&("object"===dP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wP(t){return(wP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vP(t,e)}(o,t);var e,r,n,i=_P(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){var r=this;yP(wP(o.prototype),"addTo",this).call(this,t,e);var n=t.getMapImpl();this.panel=e,this.panel.querySelector("button").addEventListener("click",(function(){n.getView().setRotation(0)})),this.addRotationEvent(n),n.on("change:view",(function(t){r.addRotationEvent(t.target)}))}},{key:"addRotationEvent",value:function(t){var e=this;t.getView().on("change:rotation",(function(t){var r=t.target.getRotation(),n="rotate(".concat(360*r/(2*Math.PI),"deg)");e.panel.querySelector("button").style.transform=n}))}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&mP(e.prototype,r),n&&mP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ZO);xP.PANEL_ID="m-layerswitcher-panel";var MP=xP,SP=r(209),EP=r.n(SP);function OP(t){return(OP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PP(t,e){return(PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function IP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=RP(t);if(e){var i=RP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kP(this,r)}}function kP(t,e){if(e&&("object"===OP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function RP(t){return(RP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PP(t,e)}(o,t);var e,r,n,i=IP(o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),yz(MP)&&hh("La implementación usada no puede crear controles Scale");var t=new MP;return i.call(this,t,o.NAME)}return e=o,(r=[{key:"createView",value:function(t){return Bh(EP.a,{vars:{title:Oh("rotate").title}})}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&TP(e.prototype,r),n&&TP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ch);LP.NAME="rotate";var CP=LP,AP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NP="degrees",jP="imperial",FP="nautical",DP="metric",BP="us",zP=[1,2,5];function GP(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}var qP=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(r=t.call(this,{element:document.createElement("div"),render:n.render||GP,target:n.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=i+"-inner",r.element.className=i+" ol-unselectable",r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==n.minWidth?n.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addEventListener(to("units"),r.handleUnitsChanged_),r.setUnits(n.units||DP),r.scaleBar_=n.bar||!1,r.scaleBarSteps_=n.steps||4,r.scaleBarText_=n.text||!1,r}return AP(e,t),e.prototype.getUnits=function(){return this.get("units")},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set("units",t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n==NP?ir.DEGREES:ir.METERS,o=Vn(r,t.resolution,e,i),a=this.minWidth_*o,s="";if(n==NP){var u=nr[ir.DEGREES];(a*=u)<u/60?(s="″",o*=3600):a<u?(s="′",o*=60):s="°"}else n==jP?a<.9144?(s="in",o/=.0254):a<1609.344?(s="ft",o/=.3048):(s="mi",o/=1609.344):n==FP?(o/=1852,s="nm"):n==DP?a<.001?(s="μm",o*=1e6):a<1?(s="mm",o*=1e3):a<1e3?s="m":(s="km",o/=1e3):n==BP?a<.9144?(s="in",o*=39.37):a<1609.344?(s="ft",o/=.30480061):(s="mi",o/=1609.3472):Er(!1,33);for(var l,c,h,f,p=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){h=Math.floor(p/3);var d=Math.pow(10,h);if(l=zP[(p%3+3)%3]*d,c=Math.round(l/o),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;++p}f=this.scaleBar_?this.createScaleBar(c,l,s):l.toFixed(h<0?-h:0)+" "+s,this.renderedHTML_!=f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,r){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,r):"")+"</div>"),s===this.scaleBarSteps_-1&&i.push(this.createStepText(s+1,t,!0,e,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,r,n,i){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(r?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=this.getMap().getView().getResolution(),e=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*e*39.37*(25.4/.28)},e}(mu);function UP(t){return(UP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function WP(t,e){return(WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function YP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=HP(t);if(e){var i=HP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ZP(this,r)}}function ZP(t,e){if(e&&("object"===UP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function HP(t){return(HP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XP="degrees",KP="imperial",JP="nautical",$P="metric",QP="us",tI=[1,2,5],eI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WP(t,e)}(o,t);var e,r,n,i=YP(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,mi(this),pi(this,to("units"),this.handleUnitsChanged,this),t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"handleUnitsChanged_",value:function(){this.updateElement_()}},{key:"updateElement_",value:function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n===XP?ir.DEGREES:ir.METERS,o=Vn(r,t.resolution,e,i);r.getUnits()!==ir.DEGREES&&r.getMetersPerUnit()&&i===ir.METERS&&(o*=r.getMetersPerUnit()),"d"===r.getUnits()&&(o/=12e4);var a=this.minWidth_*o,s="";if(n===XP){var u=nr[ir.DEGREES];r.getUnits()===ir.DEGREES?a*=u:o/=u,a<u/60?(s="″",o*=3600):a<u?(s="′",o*=60):s="°"}else n===KP?a<.9144?(s="in",o/=.0254):a<1609.344?(s="ft",o/=.3048):(s="mi",o/=1609.344):n===JP?(o/=1852,s="nm"):n===$P?a<.001?(s="μm",o*=1e6):a<1?(s="mm",o*=1e3):a<1e3?s="m":(s="km",o/=1e3):n===QP?a<.9144?(s="in",o*=39.37):a<1609.344?(s="ft",o/=.30480061):(s="mi",o/=1609.3472):Er(!1,33);for(var l,c,h=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){if(l=tI[(h%3+3)%3]*Math.pow(10,Math.floor(h/3)),c=Math.round(l/o),Number.isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;h+=1}var f=l.toString().concat(" ").concat(s);this.renderedHTML_!==f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!==c&&(this.innerElement_.style.width=c.toString().concat("px"),this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}}])&&VP(e.prototype,r),n&&VP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(qP),rI=r(210),nI=r.n(rI);function iI(t){return(iI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sI(t,e){return(sI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=cI(t);if(e){var i=cI(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lI(this,r)}}function lI(t,e){if(e&&("object"===iI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function cI(t){return(cI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sI(t,e)}(o,t);var e,r,n,i=uI(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};oI(this,o);var r=new eI(e);return t=i.call(this,r,o.NAME),yz(eI)&&hh(Oh("exception").scaleline_method),t}return e=o,(r=[{key:"createView",value:function(t){return Bh(nI.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&aI(e.prototype,r),n&&aI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ch);hI.NAME="scaleline";var fI=hI,pI=r(211),dI=r.n(pI);function mI(t){return(mI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gI(t,e){return(gI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bI(t);if(e){var i=bI(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _I(this,r)}}function _I(t,e){if(e&&("object"===mI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bI(t){return(bI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gI(t,e)}(o,t);var e,r,n,i=vI(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&yI(e.prototype,r),n&&yI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Iu);function xI(t){return(xI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function EI(t,e){return(EI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=PI(t);if(e){var i=PI(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return TI(this,r)}}function TI(t,e){if(e&&("object"===xI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function PI(t){return(PI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var II=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EI(t,e)}(o,t);var e,r,n,i=OI(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};MI(this,o);var r=new wI(e);return t=i.call(this,r,o.NAME),yz(wI)&&hh(Oh("exception").panzoom_method),t}return e=o,(r=[{key:"createView",value:function(t){return Bh(dI.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&SI(e.prototype,r),n&&SI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ch);II.NAME="panzoom";var kI=II,RI=r(212),LI=r.n(RI),CI=(r(229),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),AI=function(t){function e(e){var r=this,n=void 0!==e.requestEncoding?e.requestEncoding:Lg,i=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=Fm(e.url)),(r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:jm,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",r.format_=void 0!==e.format?e.format:"image/jpeg",r.dimensions_=void 0!==e.dimensions?e.dimensions:{},r.layer_=e.layer,r.matrixSet_=e.matrixSet,r.style_=e.style,r.requestEncoding_=n,r.setKey(r.getKeyForDimensions_()),o&&o.length>0&&(r.tileUrlFunction=Nm(o.map(jI.bind(r)))),r}return CI(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Nm(t.map(jI.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var r in this.dimensions_)e[t++]=r+"-"+this.dimensions_[r];return e.join("/")},e.prototype.updateDimensions=function(t){Ln(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(ny);function NI(t,e){var r=xi(t.Contents.Layer,(function(t,r,n){return t.Identifier==e.layer}));if(null===r)return null;var n,i=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?Si(r.TileMatrixSetLink,"projection"in e?function(t,r,n){var o=xi(i,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=Un(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Un(o),s=Un(e.projection);return a&&s?Xn(a,s):o==e.projection}:function(t,r,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=r.TileMatrixSetLink[n].TileMatrixSet,a=r.TileMatrixSetLink[n].TileMatrixSetLimits,s=r.Format[0];"format"in e&&(s=e.format),(n=Si(r.Style,(function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(n=0);var u=r.Style[n].Identifier,l={};"Dimension"in r&&r.Dimension.forEach((function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),l[n]=i}));var c,h=xi(t.Contents.TileMatrixSet,(function(t,e,r){return t.Identifier==o})),f=h.SupportedCRS;if(f&&(c=Un(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Un(f)),"projection"in e){var p=Un(e.projection);p&&(c&&!Xn(p,c)||(c=p))}var d=h.TileMatrix[0],m=28e-5*d.ScaleDenominator,y=c===Un("EPSG:4326")?[d.TopLeftCorner[1],d.TopLeftCorner[0]]:d.TopLeftCorner,g=d.TileWidth*m,v=d.TileHeight*m,_=[y[0],y[1]-v*d.MatrixHeight,y[0]+g*d.MatrixWidth,y[1]];null===c.getExtent()&&c.setExtent(_);var b=Rg(h,_,a),w=[],x=e.requestEncoding;if(x=void 0!==x?x:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var M=t.OperationsMetadata.GetTile.DCP.HTTP.Get,S=0,E=M.length;S<E;++S)if(M[S].Constraint){var O=xi(M[S].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===x&&(x=O[0]),x!==Lg)break;vi(O,Lg)&&w.push(M[S].href)}else M[S].href&&(x=Lg,w.push(M[S].href));return 0===w.length&&(x=Cg,r.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,w.push(t.template))}))),{urls:w,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:x,tileGrid:b,style:u,dimensions:l,wrapX:!1,crossOrigin:e.crossOrigin}}function jI(t){var e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==Lg&&Ln(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==Lg?uy(t,r):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t}));var n=this.tileGrid,i=this.dimensions_;return function(r,o,a){if(r){var s={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};Ln(s,i);var u=t;return u=e==Lg?uy(u,s):u.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]}))}}}var FI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),DI=[null,"http://www.opengis.net/ows/1.1"],BI=hd(DI,{ServiceIdentification:od((function(t,e){return pd({},$I,t,e)})),ServiceProvider:od((function(t,e){return pd({},QI,t,e)})),OperationsMetadata:od((function(t,e){return pd({},HI,t,e)}))}),zI=function(t){function e(){return t.call(this)||this}return FI(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=pd({},BI,t,[]);return e||null},e}(_d),GI=hd(DI,{DeliveryPoint:od(Td),City:od(Td),AdministrativeArea:od(Td),PostalCode:od(Td),Country:od(Td),ElectronicMailAddress:od(Td)}),qI=hd(DI,{Value:id((function(t,e){return Td(t)}))}),UI=hd(DI,{AllowedValues:od((function(t,e){return pd({},qI,t,e)}))}),VI=hd(DI,{Phone:od((function(t,e){return pd({},XI,t,e)})),Address:od((function(t,e){return pd({},GI,t,e)}))}),WI=hd(DI,{HTTP:od((function(t,e){return pd({},YI,t,e)}))}),YI=hd(DI,{Get:id((function(t,e){var r=Xp(t);if(!r)return;return pd({href:r},KI,t,e)})),Post:void 0}),ZI=hd(DI,{DCP:od((function(t,e){return pd({},WI,t,e)}))}),HI=hd(DI,{Operation:function(t,e){var r=t.getAttribute("name"),n=pd({},ZI,t,e);if(!n)return;e[e.length-1][r]=n}}),XI=hd(DI,{Voice:od(Td),Facsimile:od(Td)}),KI=hd(DI,{Constraint:id((function(t,e){var r=t.getAttribute("name");if(!r)return;return pd({name:r},UI,t,e)}))}),JI=hd(DI,{IndividualName:od(Td),PositionName:od(Td),ContactInfo:od((function(t,e){return pd({},VI,t,e)}))}),$I=hd(DI,{Abstract:od(Td),AccessConstraints:od(Td),Fees:od(Td),Title:od(Td),ServiceTypeVersion:od(Td),ServiceType:od(Td)}),QI=hd(DI,{ProviderName:od(Td),ProviderSite:od(Xp),ServiceContact:od((function(t,e){return pd({},JI,t,e)}))});var tk=zI,ek=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rk=[null,"http://www.opengis.net/wmts/1.0"],nk=[null,"http://www.opengis.net/ows/1.1"],ik=hd(rk,{Contents:od((function(t,e){return pd({},ak,t,e)}))}),ok=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new tk,e}return ek(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var r=this.owsParser_.readFromNode(t);return r?(r.version=e,(r=pd(r,ik,t,[]))||null):null},e}(_d),ak=hd(rk,{Layer:id((function(t,e){return pd({},sk,t,e)})),TileMatrixSet:id((function(t,e){return pd({},dk,t,e)}))}),sk=hd(rk,{Style:id((function(t,e){var r=pd({},uk,t,e);if(!r)return;var n="true"===t.getAttribute("isDefault");return r.isDefault=n,r})),Format:id(Td),TileMatrixSetLink:id((function(t,e){return pd({},lk,t,e)})),Dimension:id((function(t,e){return pd({},fk,t,e)})),ResourceURL:id((function(t,e){var r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};r&&(o.format=r);n&&(o.template=n);i&&(o.resourceType=i);return o}))},hd(nk,{Title:od(Td),Abstract:od(Td),WGS84BoundingBox:od((function(t,e){var r=pd([],pk,t,e);if(2!=r.length)return;return jr(r)})),Identifier:od(Td)})),uk=hd(rk,{LegendURL:id((function(t,e){var r={};return r.format=t.getAttribute("format"),r.href=Xp(t),r}))},hd(nk,{Title:od(Td),Identifier:od(Td)})),lk=hd(rk,{TileMatrixSet:od(Td),TileMatrixSetLimits:od((function(t,e){return pd([],ck,t,e)}))}),ck=hd(rk,{TileMatrixLimits:rd((function(t,e){return pd({},hk,t,e)}))}),hk=hd(rk,{TileMatrix:od(Td),MinTileRow:od(Ed),MaxTileRow:od(Ed),MinTileCol:od(Ed),MaxTileCol:od(Ed)}),fk=hd(rk,{Default:od(Td),Value:id(Td)},hd(nk,{Identifier:od(Td)})),pk=hd(nk,{LowerCorner:rd(yk),UpperCorner:rd(yk)}),dk=hd(rk,{WellKnownScaleSet:od(Td),TileMatrix:id((function(t,e){return pd({},mk,t,e)}))},hd(nk,{SupportedCRS:od(Td),Identifier:od(Td)})),mk=hd(rk,{TopLeftCorner:od(yk),ScaleDenominator:od(Md),TileWidth:od(Ed),TileHeight:od(Ed),MatrixWidth:od(Ed),MatrixHeight:od(Ed)},hd(nk,{Identifier:od(Td)}));function yk(t,e){var r=Td(t).split(/\s+/);if(r&&2==r.length){var n=+r[0],i=+r[1];if(!isNaN(n)&&!isNaN(i))return[n,i]}}var gk=ok;function vk(t){return(vk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wk(t,e){return(wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Sk(t);if(e){var i=Sk(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Mk(this,r)}}function Mk(t,e){if(e&&("object"===vk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sk(t){return(Sk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ek=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wk(t,e)}(o,t);var e,r,n,i=xk(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return _k(this,o),(t=i.call(this,e,r)).facadeLayer_=null,t.capabilitiesOptionsPromise=null,t.getCapabilitiesPromise_=null,t.minZoom=e.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=e.maxZoom||Number.POSITIVE_INFINITY,t.options=e,t}return e=o,(r=[{key:"addTo",value:function(t){var e=this;if(this.map=t,this.fire("added:map"),!vz(this.options)&&!vz(this.options.minScale)&&!vz(this.options.maxScale)){var r=this.map.getMapImpl().getView().getProjection().getUnits();this.options.minResolution=Lz(this.options.minScale,r),this.options.maxResolution=Lz(this.options.maxScale,r)}this.getCapabilitiesOptions_().then((function(t){return e.addLayer_(t)}))}},{key:"setResolutions",value:function(t){var e=this;if(bz(this.vendorOptions_.source)){var r=this.facadeLayer_.getMaxExtent(),n=Un(this.map.getProjection().code);this.getCapabilities().then((function(i){var o=i.getMatrixSet(e.name),a=i.getMatrixIds(e.name),s=i.getFormat(e.name),u=new AI({url:e.url,layer:e.name,matrixSet:o,format:s,projection:n,tileGrid:new kg({origin:nn(r),resolutions:t,matrixIds:a}),extent:r});e.ol3Layer.setSource(u)}))}}},{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().filter((function(t){return!t.equals(e)&&t.isVisible()})).forEach((function(t){return t.setVisible(!1)})),bz(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),bz(r)||this.map.setBbox(r)}else bz(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addLayer_",value:function(t){var e=this;if(!bz(this.map)){var r=this.facadeLayer_.getMaxExtent(),n=t,i=this.options.minResolution,o=this.options.maxResolution;n.format=this.options.format||t.format;var a=new AI(Bz(n,{extent:r},!0));this.facadeLayer_.setFormat(n.format),this.ol3Layer=new Hf(Bz({visible:this.visibility,source:a,minResolution:i,maxResolution:o},this.vendorOptions_,!0));var s=this.zIndex_;this.map.getMapImpl().addLayer(this.ol3Layer),setTimeout((function(){e.ol3Layer.setMaxZoom(e.maxZoom),e.ol3Layer.setMinZoom(e.minZoom)}),500),null!==s&&this.setZIndex(s),this.ol3Layer.set("animated",!0),this.fire("added:map",this)}}},{key:"setMaxExtent",value:function(t){this.getOL3Layer().setExtent(t)}},{key:"getCapabilitiesOptions_",value:function(){var t=this;return bz(this.capabilitiesOptionsPromise)&&(this.capabilitiesOptionsPromise=this.getCapabilities().then((function(e){var r=t.name,n=t.matrixSet;bz(n)&&(n=t.map.getProjection().code);var i=e.Contents.Layer;_z(i)&&(i=i.filter((function(e){return e.Identifier===t.facadeLayer_.name}))[0]),i.Style.length>0&&void 0!==i.Style[0].LegendURL&&(t.legendUrl_=i.Style[0].LegendURL.replaceAll("&amp;","&"));var o=bz(i.Abstract)?"":i.Abstract,a=bz(i.Style)?"":i.Style,s=t.facadeLayer_.getMaxExtent(),u=bz(e.ServiceProvider)?"":e.ServiceProvider,l=function(t,e){var r=xi(t.Contents.Layer,(function(t,r,n){return t.Identifier==e.layer}));if(null===r)return null;var n,i=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?Si(r.TileMatrixSetLink,"projection"in e?function(t,r,n){var o=xi(i,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=Un(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Un(o),s=Un(e.projection);return a&&s?equivalent(a,s):o==e.projection}:function(t,r,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=r.TileMatrixSetLink[n].TileMatrixSet,a=r.TileMatrixSetLink[n].TileMatrixSetLimits,s=r.Format[0];"format"in e&&(s=e.format),(n=Si(r.Style,(function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(n=0);var u=r.Style[n].Identifier,l={};"Dimension"in r&&r.Dimension.forEach((function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),l[n]=i}));var c,h=xi(t.Contents.TileMatrixSet,(function(t,e,r){return t.Identifier==o})),f=h.SupportedCRS;if(f&&(c=Un(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Un(f)),"projection"in e){var p=Un(e.projection);p&&(c&&!equivalent(p,c)||(c=p))}var d,m,y=r.WGS84BoundingBox;if(e.extent)d=e.extent;else if(void 0!==y){var g=Un("EPSG:4326").getExtent();m=y[0]==g[0]&&y[2]==g[2],d=transformExtent(y,"EPSG:4326",c);var v=c.getExtent();v&&(containsExtent(v,d)||(d=void 0))}var _=Rg(h,d,a),b=[],w=e.requestEncoding;if(w=void 0!==w?w:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var x=t.OperationsMetadata.GetTile.DCP.HTTP.Get,M=0,S=x.length;M<S;++M)if(x[M].Constraint){var E=xi(x[M].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===w&&(w=E[0]),w!==Lg)break;vi(E,Lg)&&b.push(x[M].href)}else x[M].href&&(w=Lg,b.push(x[M].href));return 0===b.length&&(w=Cg,r.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,b.push(t.template))}))),{urls:b,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:w,tileGrid:_,style:u,dimensions:l,wrapX:m,crossOrigin:e.crossOrigin}}(e,{layer:r,matrixSet:n,extent:s}),c={abstract:o,attribution:u,style:a};return l.tileGrid.extent=s,void 0===t.facadeLayer_.capabilitiesMetadata&&(t.facadeLayer_.capabilitiesMetadata=c),l}))),this.capabilitiesOptionsPromise}},{key:"getCapabilities",value:function(){var t=this;return bz(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=new Promise((function(e,r){var n=kz(t.url),i=new gk;lz(n).then((function(r){var n=r.xml,o=i.read(n);try{o.Contents.Layer.forEach((function(t){var e=t.Identifier;t.Style.forEach((function(t){var n=r.text.split("Layer>").filter((function(t){return t.indexOf("Identifier>".concat(e,"<"))>-1}))[0];t.LegendURL=n.split("LegendURL")[1].split('xlink:href="')[1].split('"')[0]}))}))}catch(t){}e.call(t,o)}))}))),this.getCapabilitiesPromise_}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"destroy",value:function(){var t=this.map.getMapImpl();bz(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.matrixSet===t.matrixSet),e}},{key:"getFeatureInfoUrl",value:function(t,e,r){var n=this.getTileColTileRow(t,e),i=this.getRelativeTileCoordInPixel_(t,e),o=this.name,a=this.matrixSet,s=r,u=n[0],l=n[1],c=i[0],h=i[1],f=e;return this.matrixSet.indexOf(":4326")>-1&&(f="".concat(this.matrixSet,":").concat(f)),Tz(this.url,{service:"WMTS",request:"GetFeatureInfo",version:"1.0.0",layer:o,tilematrixset:a,tilematrix:f,tilerow:l,tilecol:u,J:h,I:c,infoFormat:s})}},{key:"getTileColTileRow",value:function(t,e){var r=null;if(!bz(this.ol3Layer)){var n=this.ol3Layer.getSource();bz(n)||(r=n.tileGrid.getTileCoordForCoordAndZ(t,e))}return r.slice(1)}},{key:"getRelativeTileCoordInPixel_",value:function(t,e){var r;if(!bz(this.ol3Layer)){var n=this.ol3Layer.getSource();if(!bz(n)){var i=n.tileGrid,o=i.getTileCoordForCoordAndZ(t,e),a=i.getTileCoordExtent(o,[]),s=i.getResolution(o[0]);r=[Math.floor((t[0]-a[0])/s),Math.floor((a[3]-t[1])/s)]}}return r}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}}])&&bk(e.prototype,r),n&&bk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Yp);function Ok(t){return(Ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pk(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tk(Object(r),!0).forEach((function(e){Ik(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ik(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lk(t,e){return(Lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ck(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Nk(t);if(e){var i=Nk(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ak(this,r)}}function Ak(t,e){if(e&&("object"===Ok(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Nk(t){return(Nk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lk(t,e)}(o,t);var e,r,n,i=Ck(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kk(this,o);var a=Sf(t,"WMTS"),s=Pk(Pk({},r),a);void 0!==t.minZoom&&(s.minZoom=t.minZoom),void 0!==t.maxZoom&&(s.maxZoom=t.maxZoom);var u=new Ek(s,n);return e=i.call(this,a,u),yz(Ek)&&hh(Oh("exception").wmts_method),bz(t)&&hh(Oh("exception").no_param),e.matrixSet=a.matrixSet,e.legend=a.legend,e.transparent=a.transparent,e.options=s,bz(n.capabilitiesMetadata)||(e.capabilitiesMetadata=n.capabilitiesMetadata),e}return e=o,(r=[{key:"type",get:function(){return"WMTS"},set:function(t){yz(t)||bz(t)||"WMTS"===t||hh("El tipo de capa debe ser '".concat("WMTS").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"matrixSet",get:function(){return this.getImpl().matrixSet},set:function(t){this.getImpl().matrixSet=t}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){bz(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}},{key:"getCapabilities",value:function(){return bz(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.matrixSet===t.matrixSet),e}},{key:"getFeatureInfoUrl",value:function(t,e,r){return this.getImpl().getFeatureInfoUrl(t,e,r)}},{key:"getTileColTileRow",value:function(t,e){return this.getImpl().getTileColTileRow(t,e)}},{key:"setFormat",value:function(t){this.options.format=t}}])&&Rk(e.prototype,r),n&&Rk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Lf),Fk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dk=function(t){function e(e){var r=e||{},n=void 0!==r.projection?r.projection:"EPSG:3857",i=void 0!==r.tileGrid?r.tileGrid:qm({extent:Wm(n),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:r.opaque,projection:n,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return Fk(e,t),e}(ny);function Bk(t){return(Bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qk(t,e){return(qk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Uk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Wk(t);if(e){var i=Wk(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Vk(this,r)}}function Vk(t,e){if(e&&("object"===Bk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Wk(t){return(Wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qk(t,e)}(o,t);var e,r,n,i=Uk(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return zk(this,o),(e=i.call(this,r,n)).url=t.url,e.tileSize_="number"==typeof t.tileSize?t.tileSize:256,e.opacity_="number"==typeof r.opacity?r.opacity:1,e.zIndex_=$g.Z_INDEX.XYZ,e.visibility=!1!==t.visibility||t.visibility,e.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,e.tileGridMaxZoom=t.tileGridMaxZoom,e}return e=o,(r=[{key:"setVisible",value:function(t){if(this.visibility=t,!0===t&&!0!==this.transparent){bz(this.ol3Layer)||this.ol3Layer.setVisible(t);var e=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),bz(e)||this.map.setZoom(e)}else bz(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){this.map=t;var e=Un("EPSG:3857").getExtent();this.ol3Layer=new Hf({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:e}),this.map.getMapImpl().addLayer(this.ol3Layer);var r=new Dk({projection:this.map.getProjection().code,url:this.url,tileSize:this.getTileSize()});this.ol3Layer.setSource(r),void 0!==this.tileGridMaxZoom&&this.tileGridMaxZoom>0?this.ol3Layer.getSource().tileGrid.maxZoom=this.tileGridMaxZoom:(this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom))}},{key:"setTileUrlFunction",value:function(t){this.ol3Layer.getSource().setTileUrlFunction(t)}},{key:"getTileUrlFunction",value:function(){this.ol3Layer.getSource().getTileUrlFunction()}},{key:"getTileSize",value:function(){return this.tileSize_}},{key:"destroy",value:function(){var t=this.map.getMapImpl();bz(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}}])&&Gk(e.prototype,r),n&&Gk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Yp);function Zk(t){return(Zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kk(t,e){return(Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qk(t);if(e){var i=Qk(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $k(this,r)}}function $k(t,e){if(e&&("object"===Zk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qk(t){return(Qk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kk(t,e)}(o,t);var e,r,n,i=Jk(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Hk(this,o),(e=i.call(this,t,r,n)).zIndex_=$g.Z_INDEX.TMS,e}return e=o,(r=[{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}}])&&Xk(e.prototype,r),n&&Xk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Yk);function eR(t){return(eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iR(t,e){return(iR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=sR(t);if(e){var i=sR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return aR(this,r)}}function aR(t,e){if(e&&("object"===eR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sR(t){return(sR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iR(t,e)}(o,t);var e,r,n,i=oR(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rR(this,o),yz(tR)&&hh(Oh("exception").tms_method);var a=Sf(t,"TMS"),s=new tR(a,r,n);return(e=i.call(this,a,s)).url=a.url,e.name=a.name,e.legend=a.legend,e.minZoom=a.minZoom,e.maxZoom=a.maxZoom,e.tileGridMaxZoom=a.tileGridMaxZoom,e.options=r,e}return e=o,(r=[{key:"type",get:function(){return"TMS"},set:function(t){yz(t)||bz(t)||"TMS"===t||hh("El tipo de capa debe ser '".concat("TMS").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}}])&&nR(e.prototype,r),n&&nR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Lf);function lR(t){return(lR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hR(t,e){return(hR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=dR(t);if(e){var i=dR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pR(this,r)}}function pR(t,e){if(e&&("object"===lR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dR(t){return(dR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hR(t,e)}(o,t);var e,r,n,i=fR(o);function o(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var a=new ZO;return n=i.call(this,a,o.NAME),t.getBaseLayers().forEach((function(e){e.on(bh,t.removeLayers(e))})),n.layers=M.config.backgroundlayers.slice(0,5).map((function(t){return{id:t.id,title:t.title,layers:t.layers.map((function(t){return/WMTS.*/.test(t)?new jk(t):/TMS.*/.test(t)?new uR(t):new lg(t)}))}})),n.flattedLayers=n.layers.reduce((function(t,e){return t.concat(e.layers)}),[]),n.activeLayer=-1,n.idLayer=null==e?0:e,n.visible=null==r||r,n}return e=o,(r=[{key:"createView",value:function(t){var e=this;return this.map=t,new Promise((function(t,r){var n=Bh(LI.a,{vars:{layers:e.layers}});e.html=n,e.listen(n),e.uniqueButton=e.html.querySelector("#m-baselayerselector-unique-btn"),e.uniqueButton.innerHTML=e.layers[0].title,e.on("added:map",(function(){var t=e.visible;e.idLayer>-1&&(window.innerWidth>M.config.MOBILE_WIDTH&&(e.activeLayer=e.idLayer),e.showBaseLayer({target:{parentElement:n}},e.layers[e.activeLayer],e.activeLayer)),!1===t&&e.map_.removeLayers(e.map_.getBaseLayers())})),t(n)}))}},{key:"equals",value:function(t){return t instanceof o}},{key:"showBaseLayer",value:function(t,e,r){var n=this.handlerClickDesktop.bind(this);window.innerWidth<=M.config.MOBILE_WIDTH&&(n=this.handlerClickMobile.bind(this)),n(t,e,r)}},{key:"handlerClickDesktop",value:function(t,e,r){this.removeLayers(),this.visible=!1;var n=e.layers,i=e.title,o=t.target.parentElement.querySelector("#m-baselayerselector-".concat(e.id)).classList.contains("activeBaseLayerButton");n.forEach((function(t,e,r){return t.setZIndex(e-r.length)})),t.target.parentElement.querySelectorAll('button[id^="m-baselayerselector-"]').forEach((function(t){t.classList.contains("activeBaseLayerButton")&&t.classList.remove("activeBaseLayerButton")})),o||(this.visible=!0,this.activeLayer=r,t.target.parentElement.querySelector("#m-baselayerselector-unique-btn").innerText=i,t.target.parentElement.querySelector("#m-baselayerselector-".concat(e.id)).classList.add("activeBaseLayerButton"),this.map.addLayers(n))}},{key:"handlerClickMobile",value:function(t){this.removeLayers(),this.activeLayer+=1,this.activeLayer=this.activeLayer%this.layers.length;var e=this.layers[this.activeLayer],r=e.layers,n=e.id,i=e.title;r.forEach((function(t,e,r){return t.setZIndex(e-r.length)})),t.target.parentElement.querySelectorAll('button[id^="m-baselayerselector-"]').forEach((function(t){t.classList.contains("activeBaseLayerButton")&&t.classList.remove("activeBaseLayerButton")})),t.target.innerHTML=i,t.target.parentElement.querySelector("#m-baselayerselector-".concat(n)).classList.add("activeBaseLayerButton"),this.map.addLayers(r)}},{key:"removeLayers",value:function(){this.map.removeLayers(this.flattedLayers),this.map.removeLayers(this.map.getBaseLayers())}},{key:"listen",value:function(t){var e=this;t.querySelectorAll("button.m-background-group-btn").forEach((function(t,r){return t.addEventListener("click",(function(t){return e.showBaseLayer(t,e.layers[r],r)}))})),t.querySelector("#m-baselayerselector-unique-btn").addEventListener("click",(function(t){return e.showBaseLayer(t)}))}}])&&cR(e.prototype,r),n&&cR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ch);mR.NAME="backgroundlayers";var yR=mR,gR=r(213),vR=r.n(gR);function _R(t){return(_R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wR(t,e){return(wR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=SR(t);if(e){var i=SR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return MR(this,r)}}function MR(t,e){if(e&&("object"===_R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function SR(t){return(SR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ER=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wR(t,e)}(o,t);var e,r,n,i=xR(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.url_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){e.loadInternal_(i).then((function(e){t(e)}))}}},{key:"loadInternal_",value:function(t){var e=this;return new Promise((function(t,r){lz(e.url_).then((function(r){var n=e.map_.getProjection().code;if(bz(r.text))hh(Oh("exception").no_kml_response);else{var i=e.format_.readCustomFeatures(r.text,{featureProjection:n}),o=e.format_.getScreenOverlay(),a=i.map((function(t){var e=new yG(t.getId(),{geometry:{coordinates:t.getGeometry().getCoordinates(),type:t.getGeometry().getType()},properties:t.getProperties()});return e.getImpl().getOLFeature().setStyle(t.getStyle()),e}));t({features:a,screenOverlay:o})}}))}))}}])&&bR(e.prototype,r),n&&bR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Kc);function OR(t){return(OR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var TR,PR,IR,kR,RR,LR,CR,AR=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NR=["http://www.google.com/kml/ext/2.2"],jR=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],FR={fraction:hb,pixels:fb,insetPixels:fb},DR=hd(jR,{ExtendedData:RL,Region:LL,MultiGeometry:od(xL,"geometry"),LineString:od(_L,"geometry"),LinearRing:od(bL,"geometry"),Point:od(ML,"geometry"),Polygon:od(EL,"geometry"),Style:od(TL),StyleMap:function(t,e){var r=oL.call(this,t,e);if(!r)return;var n=e[e.length-1];Array.isArray(r)?n.Style=r:"string"==typeof r?n.styleUrl=r:Er(!1,38)},address:od(Td),description:od(Td),name:od(Td),open:od(bd),phoneNumber:od(Td),styleUrl:od(rL),visibility:od(bd)},hd(NR,{MultiTrack:od((function(t,e){var r=pd([],fL,t,e);if(!r)return;return new xp(r)}),"geometry"),Track:od(dL,"geometry")})),BR=hd(jR,{ExtendedData:RL,Region:LL,Link:function(t,e){fd(zR,t,e)},address:od(Td),description:od(Td),name:od(Td),open:od(bd),phoneNumber:od(Td),visibility:od(bd)}),zR=hd(jR,{href:od(rL)}),GR=hd(jR,{LatLonAltBox:function(t,e){var r=pd({},NL,t,e);if(!r)return;var n=e[e.length-1],i=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];n.extent=i,n.altitudeMode=r.altitudeMode,n.minAltitude=parseFloat(r.minAltitude),n.maxAltitude=parseFloat(r.maxAltitude)},Lod:function(t,e){var r=pd({},jL,t,e);if(!r)return;var n=e[e.length-1];n.minLodPixels=parseFloat(r.minLodPixels),n.maxLodPixels=parseFloat(r.maxLodPixels),n.minFadeExtent=parseFloat(r.minFadeExtent),n.maxFadeExtent=parseFloat(r.maxFadeExtent)}}),qR=hd(jR,["Document","Placemark"]),UR=hd(jR,{Document:ad((function(t,e,r){md({node:t},GL,qL,e,r,void 0,this)})),Placemark:ad(fC)}),VR=null;var WR,YR=null;var ZR,HR=null;var XR=null;var KR=null;var JR,$R=null;var QR=function(t){function e(e){var r=t.call(this)||this,n=e||{};return $R||(VR=new y_({color:TR=[255,255,255,1]}),YR=new bb({anchor:PR=[20,2],anchorOrigin:mb,anchorXUnits:IR=fb,anchorYUnits:kR=fb,crossOrigin:"anonymous",rotation:0,scale:CR=.5,size:RR=[64,64],src:LR="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),WR="NO_IMAGE",HR=new g_({color:TR,width:1}),ZR=new g_({color:[51,51,51,1],width:2}),XR=new Cw({font:"bold 16px Helvetica",fill:VR,stroke:ZR,scale:.8}),KR=new S_({fill:VR,image:YR,text:XR,stroke:HR,zIndex:0}),$R=[KR]),r.dataProjection=Un("EPSG:4326"),r.defaultStyle_=n.defaultStyle?n.defaultStyle:$R,r.extractStyles_=void 0===n.extractStyles||n.extractStyles,r.writeStyles_=void 0===n.writeStyles||n.writeStyles,r.sharedStyles_={},r.showPointNames_=void 0===n.showPointNames||n.showPointNames,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r}return AR(e,t),e.prototype.readDocumentOrFolder_=function(t,e){var r=pd([],hd(jR,{Document:ed(this.readDocumentOrFolder_,this),Folder:ed(this.readDocumentOrFolder_,this),Placemark:rd(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this);return r||void 0},e.prototype.readPlacemark_=function(t,e){var r=pd({geometry:null},DR,t,e,this);if(r){var n=new lp,i=t.getAttribute("id");null!==i&&n.setId(i);var o=e[0],a=r.geometry;if(a&&hg(a,!1,o),n.setGeometry(a),delete r.geometry,this.extractStyles_){var s=function(t,e,r,n,i){return function(o,a){var s=i,u="",l=[];if(s){var c=o.getGeometry();if(c){var h=c.getType();s=h===dr.GEOMETRY_COLLECTION?(l=c.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===dr.POINT||e===dr.MULTI_POINT}))).length>0:h===dr.POINT||h===dr.MULTI_POINT}}s&&(u=o.get("name"),(s=s&&!!u)&&u.search(/&[^&]+;/)>-1&&(JR||(JR=document.createElement("textarea")),JR.innerHTML=u,u=JR.value));var f=r;if(t?f=t:e&&(f=function t(e,r,n){return Array.isArray(e)?e:"string"==typeof e?(!(e in n)&&"#"+e in n&&(e="#"+e),t(n[e],r,n)):r}(e,r,n)),s){var p=function(t,e){var r=[0,0],n="start",i=t.getImage();if(i){var o=i.getImageSize();if(null===o&&(o=RR),2==o.length){var a=i.getScale();r[0]=a*o[0]/2,r[1]=-a*o[1]/2,n="left"}}var s=t.getText();s?((s=s.clone()).setFont(s.getFont()||XR.getFont()),s.setScale(s.getScale()||XR.getScale()),s.setFill(s.getFill()||XR.getFill()),s.setStroke(s.getStroke()||ZR)):s=XR.clone();return s.setText(e),s.setOffsetX(r[0]),s.setOffsetY(r[1]),s.setTextAlign(n),new S_({image:i,text:s})}(f[0],u);return l.length>0?(p.setGeometry(new Tp(l)),[p,new S_({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null})].concat(f.slice(1))):p}return f}}(r.Style,r.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(s)}return delete r.Style,n.setProperties(r,!0),n}},e.prototype.readSharedStyle_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=TL.call(this,t,e);if(n){var i=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readSharedStyleMap_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=oL.call(this,t,e);if(n){var i,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readFeatureFromNode=function(t,e){if(!vi(jR,t.namespaceURI))return null;var r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){if(!vi(jR,t.namespaceURI))return[];var r,n=t.localName;if("Document"==n||"Folder"==n)return(r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){var i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==n){r=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&wi(r,a)}return r}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=td(t);return this.readNameFromDocument(e)}return Qp(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(e);if(r)return r}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(vi(jR,e.namespaceURI)&&"name"==e.localName)return Td(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var r=e.localName;if(vi(jR,e.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(e);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var r=td(t);wi(e,this.readNetworkLinksFromDocument(r))}else Qp(t)?wi(e,this.readNetworkLinksFromDocument(t)):wi(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&wi(e,this.readNetworkLinksFromNode(r));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(vi(jR,r.namespaceURI)&&"NetworkLink"==r.localName){var n=pd({},BR,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!vi(jR,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||wi(e,this.readNetworkLinksFromNode(r))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var r=td(t);wi(e,this.readRegionFromDocument(r))}else Qp(t)?wi(e,this.readRegionFromDocument(t)):wi(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&wi(e,this.readRegionFromNode(r));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(vi(jR,r.namespaceURI)&&"Region"==r.localName){var n=pd({},GR,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!vi(jR,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||wi(e,this.readRegionFromNode(r))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Jp(jR[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",NR[0]),r.setAttributeNS(n,"xmlns:xsi",Kp),r.setAttributeNS(Kp,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:r},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=qR[r.namespaceURI],s=cd(o,a);return md(i,UR,ld,s,[e],a,this),r},e}(vg);function tL(t){var e=$p(t,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(r){var n=r[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function eL(t){for(var e,r=$p(t,!1),n=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=i.exec(r);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;n.push(o,a,s),r=r.substr(e[0].length)}if(""===r)return n}function rL(t){var e=$p(t,!1).trim(),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(e,r).href:e}function nL(t){return Md(t)}var iL=hd(jR,{Pair:function(t,e){var r=pd({},CL,t,e,this);if(!r)return;var n=r.key;if(n&&"normal"==n){var i=r.styleUrl;i&&(e[e.length-1]=i);var o=r.Style;o&&(e[e.length-1]=o)}}});function oL(t,e){return pd(void 0,iL,t,e,this)}var aL=hd(jR,{Icon:od((function(t,e){var r=pd({},mL,t,e);return r||null})),color:od(tL),heading:od(Md),hotSpot:od((function(t){var e,r=t.getAttribute("xunits"),n=t.getAttribute("yunits");return e="insetPixels"!==r?"insetPixels"!==n?mb:gb:"insetPixels"!==n?yb:vb,{x:parseFloat(t.getAttribute("x")),xunits:FR[r],y:parseFloat(t.getAttribute("y")),yunits:FR[n],origin:e}})),scale:od(nL)});var sL=hd(jR,{color:od(tL),scale:od(nL)});var uL=hd(jR,{color:od(tL),width:od(Md)});var lL=hd(jR,{color:od(tL),fill:od(bd),outline:od(bd)});var cL=hd(jR,{coordinates:nd(eL)});function hL(t,e){return pd(null,cL,t,e)}var fL=hd(NR,{Track:rd(dL)});var pL=hd(jR,{when:function(t,e){var r=e[e.length-1].whens,n=$p(t,!1),i=Date.parse(n);r.push(isNaN(i)?0:i)}},hd(NR,{coord:function(t,e){var r=e[e.length-1].flatCoordinates,n=$p(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);r.push(o,a,s,0)}else r.push(0,0,0,0)}}));function dL(t,e){var r=pd({flatCoordinates:[],whens:[]},pL,t,e);if(r){for(var n=r.flatCoordinates,i=r.whens,o=0,a=Math.min(n.length,i.length);o<a;++o)n[4*o+3]=i[o];return new vp(n,Pa)}}var mL=hd(jR,{href:od(rL)},hd(NR,{x:od(Md),y:od(Md),w:od(Md),h:od(Md)}));var yL=hd(jR,{coordinates:nd(eL)});function gL(t,e){return pd(null,yL,t,e)}var vL=hd(jR,{extrude:od(bd),tessellate:od(bd),altitudeMode:od(Td)});function _L(t,e){var r=pd({},vL,t,e),n=gL(t,e);if(n){var i=new vp(n,Oa);return i.setProperties(r,!0),i}}function bL(t,e){var r=pd({},vL,t,e),n=gL(t,e);if(n){var i=new ks(n,Oa,[n.length]);return i.setProperties(r,!0),i}}var wL=hd(jR,{LineString:rd(_L),LinearRing:rd(bL),MultiGeometry:rd(xL),Point:rd(ML),Polygon:rd(EL)});function xL(t,e){var r,n=pd([],wL,t,e);if(!n)return null;if(0===n.length)return new Tp(n);for(var i=!0,o=n[0].getType(),a=1,s=n.length;a<s;++a)if(n[a].getType()!=o){i=!1;break}if(i){var u=void 0,l=void 0;if(o==dr.POINT){var c=n[0];u=c.getLayout(),l=c.getFlatCoordinates();for(a=1,s=n.length;a<s;++a)wi(l,n[a].getFlatCoordinates());PL(r=new bp(l,u),n)}else o==dr.LINE_STRING?PL(r=new xp(n),n):o==dr.POLYGON?PL(r=new Sp(n),n):o==dr.GEOMETRY_COLLECTION?r=new Tp(n):Er(!1,37)}else r=new Tp(n);return r}function ML(t,e){var r=pd({},vL,t,e),n=gL(t,e);if(n){var i=new ds(n,Oa);return i.setProperties(r,!0),i}}var SL=hd(jR,{innerBoundaryIs:function(t,e){var r=pd(void 0,FL,t,e);if(r){e[e.length-1].push(r)}},outerBoundaryIs:function(t,e){var r=pd(void 0,DL,t,e);if(r){e[e.length-1][0]=r}}});function EL(t,e){var r=pd({},vL,t,e),n=pd([null],SL,t,e);if(n&&n[0]){for(var i=n[0],o=[i.length],a=1,s=n.length;a<s;++a)wi(i,n[a]),o.push(i.length);var u=new ks(i,Oa,o);return u.setProperties(r,!0),u}}var OL=hd(jR,{IconStyle:function(t,e){var r=pd({},aL,t,e);if(r){var n,i,o,a,s=e[e.length-1],u="Icon"in r?r.Icon:{},l=!("Icon"in r)||Object.keys(u).length>0,c=u.href;c?n=c:l&&(n=LR);var h,f=mb,p=r.hotSpot;p?(i=[p.x,p.y],o=p.xunits,a=p.yunits,f=p.origin):n===LR?(i=PR,o=IR,a=kR):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(i=[.5,0],o=hb,a=hb);var d,m=u.x,y=u.y;void 0!==m&&void 0!==y&&(h=[m,y]);var g,v=u.w,_=u.h;void 0!==v&&void 0!==_&&(d=[v,_]);var b=r.heading;void 0!==b&&(g=hr(b));var w=r.scale,x=r.color;if(l){n==LR&&(d=RR,void 0===w&&(w=CR));var M=new bb({anchor:i,anchorOrigin:f,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.crossOrigin_,offset:h,offsetOrigin:mb,rotation:g,scale:w,size:d,src:n,color:x});s.imageStyle=M}else s.imageStyle=WR}},LabelStyle:function(t,e){var r=pd({},sL,t,e);if(r){var n=e[e.length-1],i=new Cw({fill:new y_({color:"color"in r?r.color:TR}),scale:r.scale});n.textStyle=i}},LineStyle:function(t,e){var r=pd({},uL,t,e);if(r){var n=e[e.length-1],i=new g_({color:"color"in r?r.color:TR,width:"width"in r?r.width:1});n.strokeStyle=i}},PolyStyle:function(t,e){var r=pd({},lL,t,e);if(r){var n=e[e.length-1],i=new y_({color:"color"in r?r.color:TR});n.fillStyle=i;var o=r.fill;void 0!==o&&(n.fill=o);var a=r.outline;void 0!==a&&(n.outline=a)}}});function TL(t,e){var r=pd({},OL,t,e,this);if(!r)return null;var n,i="fillStyle"in r?r.fillStyle:VR,o=r.fill;void 0===o||o||(i=null),"imageStyle"in r?r.imageStyle!=WR&&(n=r.imageStyle):n=YR;var a="textStyle"in r?r.textStyle:XR,s="strokeStyle"in r?r.strokeStyle:HR,u=r.outline;return void 0===u||u?[new S_({fill:i,image:n,stroke:s,text:a,zIndex:void 0})]:[new S_({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===dr.GEOMETRY_COLLECTION?new Tp(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e!==dr.POLYGON&&e!==dr.MULTI_POLYGON}))):r!==dr.POLYGON&&r!==dr.MULTI_POLYGON?e:void 0},fill:i,image:n,stroke:s,text:a,zIndex:void 0}),new S_({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===dr.GEOMETRY_COLLECTION?new Tp(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===dr.POLYGON||e===dr.MULTI_POLYGON}))):r===dr.POLYGON||r===dr.MULTI_POLYGON?e:void 0},fill:i,stroke:null,zIndex:void 0})]}function PL(t,e){var r,n,i,o=e.length,a=new Array(e.length),s=new Array(e.length),u=new Array(e.length);r=!1,n=!1,i=!1;for(var l=0;l<o;++l){var c=e[l];a[l]=c.get("extrude"),s[l]=c.get("tessellate"),u[l]=c.get("altitudeMode"),r=r||void 0!==a[l],n=n||void 0!==s[l],i=i||u[l]}r&&t.set("extrude",a),n&&t.set("tessellate",s),i&&t.set("altitudeMode",u)}var IL=hd(jR,{displayName:od(Td),value:od(Td)});var kL=hd(jR,{Data:function(t,e){var r=t.getAttribute("name");fd(IL,t,e);var n=e[e.length-1];r&&n.displayName?n[r]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==r?n[r]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){fd(AL,t,e)}});function RL(t,e){fd(kL,t,e)}function LL(t,e){fd(GR,t,e)}var CL=hd(jR,{Style:od(TL),key:od(Td),styleUrl:od(rL)});var AL=hd(jR,{SimpleData:function(t,e){var r=t.getAttribute("name");if(null!==r){var n=Td(t);e[e.length-1][r]=n}}});var NL=hd(jR,{altitudeMode:od(Td),minAltitude:od(Md),maxAltitude:od(Md),north:od(Md),south:od(Md),east:od(Md),west:od(Md)});var jL=hd(jR,{minLodPixels:od(Md),maxLodPixels:od(Md),minFadeExtent:od(Md),maxFadeExtent:od(Md)});var FL=hd(jR,{LinearRing:nd(hL)});var DL=hd(jR,{LinearRing:nd(hL)});function BL(t,e){for(var r=Vl(e),n=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],i=0;i<4;++i){var o=Math.floor(n[i]).toString(16);n[i]=1==o.length?"0"+o:o}Rd(t,n.join(""))}var zL=hd(jR,{Data:ad((function(t,e,r){t.setAttribute("name",e.name);var n={node:t},i=e.value;"object"==OR(i)?(null!==i&&i.displayName&&md(n,zL,ld,[i.displayName],r,["displayName"]),null!==i&&i.value&&md(n,zL,ld,[i.value],r,["value"])):md(n,zL,ld,[i],r,["value"])})),value:ad((function(t,e){Rd(t,e)})),displayName:ad((function(t,e){!function(t,e){t.appendChild(vd().createCDATASection(e))}(t,e)}))});var GL=hd(jR,{Placemark:ad(fC)}),qL=function(t,e,r){return Jp(e[e.length-1].node.namespaceURI,"Placemark")};var UL=ud("Data");var VL=hd(jR,["href"],hd(NR,["x","y","w","h"])),WL=hd(jR,{href:ad(Rd)},hd(NR,{x:ad(Id),y:ad(Id),w:ad(Id),h:ad(Id)})),YL=function(t,e,r){return Jp(NR[0],"gx:"+r)};var ZL=hd(jR,["scale","heading","Icon","color","hotSpot"]),HL=hd(jR,{Icon:ad((function(t,e,r){var n={node:t},i=r[r.length-1].node,o=VL[i.namespaceURI],a=cd(e,o);md(n,WL,ld,a,r,o),a=cd(e,o=VL[NR[0]]),md(n,WL,YL,a,r,o)})),color:ad(BL),heading:ad(Id),hotSpot:ad((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:ad(xC)});var XL=hd(jR,["color","scale"]),KL=hd(jR,{color:ad(BL),scale:ad(xC)});var JL=hd(jR,["color","width"]),$L=hd(jR,{color:ad(BL),width:ad(Id)});var QL={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},tC=function(t,e,r){if(t)return Jp(e[e.length-1].node.namespaceURI,QL[t.getType()])},eC=ud("Point"),rC=ud("LineString"),nC=ud("LinearRing"),iC=ud("Polygon"),oC=hd(jR,{LineString:ad(mC),Point:ad(mC),Polygon:ad(bC),GeometryCollection:ad(aC)});function aC(t,e,r){var n,i={node:t},o=e.getType(),a=[];o===dr.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach((function(t){var e=t.getType();e===dr.MULTI_POINT?a=a.concat(t.getPoints()):e===dr.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===dr.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===dr.POINT||e===dr.LINE_STRING||e===dr.POLYGON?a.push(t):Er(!1,39)})),n=tC):o===dr.MULTI_POINT?(a=e.getPoints(),n=eC):o===dr.MULTI_LINE_STRING?(a=e.getLineStrings(),n=rC):o===dr.MULTI_POLYGON?(a=e.getPolygons(),n=iC):Er(!1,39),md(i,oC,n,a,r)}var sC=hd(jR,{LinearRing:ad(mC)});function uC(t,e,r){md({node:t},sC,nC,[e],r)}var lC=hd(jR,{ExtendedData:ad((function(t,e,r){for(var n={node:t},i=e.names,o=e.values,a=i.length,s=0;s<a;s++)md(n,zL,UL,[{name:i[s],value:o[s]}],r)})),MultiGeometry:ad(aC),LineString:ad(mC),LinearRing:ad(mC),Point:ad(mC),Polygon:ad(bC),Style:ad((function(t,e,r){var n={node:t},i={};if(e.pointStyles.length){var o=e.pointStyles[0].getText();o&&(i.LabelStyle=o);var a=e.pointStyles[0].getImage();a&&"function"==typeof a.getSrc&&(i.IconStyle=a)}if(e.lineStyles.length){(s=e.lineStyles[0].getStroke())&&(i.LineStyle=s)}if(e.polyStyles.length){var s;(s=e.polyStyles[0].getStroke())&&!i.LineStyle&&(i.LineStyle=s),i.PolyStyle=e.polyStyles[0]}var u=r[r.length-1].node,l=MC[u.namespaceURI],c=cd(i,l);md(n,SC,ld,c,r,l)})),address:ad(Rd),description:ad(Rd),name:ad(Rd),open:ad(Pd),phoneNumber:ad(Rd),styleUrl:ad(Rd),visibility:ad(Pd)}),cC=hd(jR,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),hC=ud("ExtendedData");function fC(t,e,r){var n={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter((function(t){return!o[t]})),s=e.getStyleFunction();if(s){var u=s(e,0);if(u){var l=Array.isArray(u)?u:[u],c=l;if(e.getGeometry()&&(c=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===dr.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===dr.POINT||e===dr.MULTI_POINT})).length:n===dr.POINT||n===dr.MULTI_POINT}}))),this.writeStyles_){var h=l,f=l;e.getGeometry()&&(h=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===dr.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===dr.LINE_STRING||e===dr.MULTI_LINE_STRING})).length:n===dr.LINE_STRING||n===dr.MULTI_LINE_STRING}})),f=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===dr.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===dr.POLYGON||e===dr.MULTI_POLYGON})).length:n===dr.POLYGON||n===dr.MULTI_POLYGON}}))),i.Style={pointStyles:c,lineStyles:h,polyStyles:f}}if(c.length&&void 0===i.name){var p=c[0].getText();p&&(i.name=p.getText())}}}var d=r[r.length-1].node,m=cC[d.namespaceURI],y=cd(i,m);if(md(n,lC,ld,y,r,m),a.length>0){var g=cd(i,a);md(n,lC,hC,[{names:a,values:g}],r)}var v=r[0],_=e.getGeometry();_&&(_=hg(_,!0,v)),md(n,lC,tC,[_],r)}var pC=hd(jR,["extrude","tessellate","altitudeMode","coordinates"]),dC=hd(jR,{extrude:ad(Pd),tessellate:ad(Pd),altitudeMode:ad(Rd),coordinates:ad((function(t,e,r){var n,i=r[r.length-1],o=i.layout,a=i.stride;o==Ea||o==Ta?n=2:o==Oa||o==Pa?n=3:Er(!1,34);var s=e.length,u="";if(s>0){u+=e[0];for(var l=1;l<n;++l)u+=","+e[l];for(var c=a;c<s;c+=a){u+=" "+e[c];for(l=1;l<n;++l)u+=","+e[c+l]}}Rd(t,u)}))});function mC(t,e,r){var n=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=n;var a=r[r.length-1].node,s=pC[a.namespaceURI],u=cd(o,s);md(i,dC,ld,u,r,s)}var yC=hd(jR,["color","fill","outline"]),gC=hd(jR,{outerBoundaryIs:ad(uC),innerBoundaryIs:ad(uC)}),vC=ud("innerBoundaryIs"),_C=ud("outerBoundaryIs");function bC(t,e,r){var n=e.getLinearRings(),i=n.shift(),o={node:t};md(o,gC,vC,n,r),md(o,gC,_C,[i],r)}var wC=hd(jR,{color:ad(BL),fill:ad(Pd),outline:ad(Pd)});function xC(t,e){Id(t,Math.round(1e6*e)/1e6)}var MC=hd(jR,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),SC=hd(jR,{IconStyle:ad((function(t,e,r){var n={node:t},i={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),u={href:o};if(a){u.w=a[0],u.h=a[1];var l=e.getAnchor(),c=e.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(u.x=c[0],u.y=s[1]-(c[1]+a[1])),l&&(l[0]!==a[0]/2||l[1]!==a[1]/2)){var h={x:l[0],xunits:fb,y:a[1]-l[1],yunits:fb};i.hotSpot=h}}i.Icon=u;var f=e.getScale();1!==f&&(i.scale=f);var p=e.getRotation();0!==p&&(i.heading=p);var d=e.getColor();d&&(i.color=d);var m=r[r.length-1].node,y=ZL[m.namespaceURI],g=cd(i,y);md(n,HL,ld,g,r,y)})),LabelStyle:ad((function(t,e,r){var n={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var a=e.getScale();a&&1!==a&&(i.scale=a);var s=r[r.length-1].node,u=XL[s.namespaceURI],l=cd(i,u);md(n,KL,ld,l,r,u)})),LineStyle:ad((function(t,e,r){var n={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},o=r[r.length-1].node,a=JL[o.namespaceURI],s=cd(i,a);md(n,$L,ld,s,r,a)})),PolyStyle:ad((function(t,e,r){var n={node:t},i=e.getFill(),o=e.getStroke(),a={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},s=r[r.length-1].node,u=yC[s.namespaceURI],l=cd(a,u);md(n,wC,ld,l,r,u)}))});var EC=QR;function OC(t){return(OC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IC(t,e){return(IC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=LC(t);if(e){var i=LC(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return RC(this,r)}}function RC(t,e){if(e&&("object"===OC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function LC(t){return(LC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IC(t,e)}(o,t);var e,r,n,i=kC(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return TC(this,o),(t=i.call(this)).screenOverlay_=null,t.label_=void 0===e.label||e.label,t}return e=o,(r=[{key:"readCustomFeatures",value:function(t,e){var r=this,n=this.readFeatures(t,e).map((function(t){var e=t.getStyle()(t);if(!1===r.label_){var n=[e[0]];t.setStyle(n)}return Array.isArray(e)||(e=[e]),e.forEach((function(t){if(t.getImage()instanceof bb){var e=t.getImage();e.getImage().removeAttribute("crossorigin"),t.setImage(e)}})),t.set("name",Vz(t.get("name"))),t}));return this.readScreenOverlay(t),n}},{key:"readScreenOverlay",value:function(t){var e=td(t).querySelector("ScreenOverlay");if(null!==e){var r,n,i,a,s,u,l=e.querySelector("Icon"),c=null!==l?l.querySelector("href").innerHTML:o.DEFAULT_NO_IMAGE_STYLE,h=e.querySelector("overlayXY");null!==h&&(r=[parseFloat(h.getAttribute("x")),parseFloat(h.getAttribute("y"))],n=h.getAttribute("xunits"),i=h.getAttribute("yunits"));var f,p,d,m=e.querySelector("screenXY");null!==m?(a=[parseFloat(m.getAttribute("x")),parseFloat(m.getAttribute("y"))],s=m.getAttribute("xunits"),u=m.getAttribute("yunits")):c===o.DEFAULT_IMAGE_STYLE_SRC?(a=o.DEFAULT_IMAGE_STYLE_ANCHOR,s=o.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,u=o.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(c)&&(a=[.5,0],s=hb,u=hb);var y,g,v,_=e.querySelector("rotationXY");if(null!==_){var b=parseFloat(_.getAttribute("x"));f=Math.PI/180*b,p=_.getAttribute("xunits"),d=_.getAttribute("yunits")}var w=e.querySelector("size");null!==w&&(y=[parseFloat(w.getAttribute("x")),parseFloat(w.getAttribute("y"))],g=w.getAttribute("xunits"),v=w.getAttribute("yunits")),this.screenOverlay_={screenXY:a,screenXUnits:s,screenYUnits:u,overlayXY:r,overlayXUnits:n,overlayYUnits:i,rotationXY:f,rotationXUnits:p,rotationYUnits:d,size:y,sizeXUnits:g,sizeYUnits:v,src:c}}}},{key:"getScreenOverlay",value:function(){return this.screenOverlay_}}])&&PC(e.prototype,r),n&&PC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(EC);CC.DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",CC.DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",CC.DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],CC.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",CC.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels";var AC=CC;function NC(t){return(NC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function FC(t,e){return(FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function DC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=zC(t);if(e){var i=zC(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return BC(this,r)}}function BC(t,e){if(e&&("object"===NC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zC(t){return(zC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FC(t,e)}(o,t);var e,r,n,i=DC(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).popup_=null,r.tabPopup_=null,r.loadFeaturesPromise_=null,r.screenOverlayImg_=null,r.label_=t.label,r.visibility=null==t.visibility||t.visibility,r}return e=o,(r=[{key:"setVisible",value:function(t){if(this.visibility=t,bz(this.ol3Layer)||this.ol3Layer.setVisible(t),!bz(this.screenOverlayImg_)){var e="none";!0===t&&(e="inherit"),this.screenOverlayImg_.style[e]=e}}},{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),t.on("change:proj",this.setProjection_.bind(this),this),this.formater_=new AC({label:this.label_}),this.loader_=new ER(this.map,this.url,this.formater_),this.ol3Layer=new Ob(Bz({},this.vendorOptions_,!0)),this.updateSource_(),this.setVisible(this.visibility),null!==this.zIndex_&&this.setZIndex(this.zIndex_),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&!bz(n)){var i=n.getAttribute("name"),o=n.getAttribute("description"),a=n.getImpl().getOLFeature().getGeometry().getFirstCoordinate(),s=Bh(vR.a,{vars:{name:i,desc:o},parseToHtml:!1});this.tabPopup_={icon:"g-cartografia-comentarios",title:i,content:s};var u=this.map.getPopup();bz(u)?(this.popup_=new Bv,this.popup_.addTab(this.tabPopup_),this.map.addPopup(this.popup_,a)):u.addTab(this.tabPopup_)}}},{key:"unselectFeatures",value:function(){bz(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"updateSource_",value:function(){var t=this;bz(this.vendorOptions_.source)&&this.requestFeatures_().then((function(e){t.ol3Layer.setSource(new Db({loader:function(){var r=e.screenOverlay;if(t.facadeVector_.clear(),t.facadeVector_.addFeatures(e.features),t.fire(bh,[e.features]),!bz(r)){var n=Dp.addOverlayImage(r,t.map);t.setScreenOverlayImg(n)}}})),t.facadeVector_.addFeatures(e.features)}))}},{key:"setScreenOverlayImg",value:function(t){this.screenOverlayImg_=t}},{key:"destroy",value:function(){var t=this.map.getMapImpl();bz(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.removePopup(),this.options=null,this.map=null}},{key:"removePopup",value:function(){bz(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return Dp.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=Dp.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=Dp.getFeaturesExtent(t.features,i);n(e)}))}))}},{key:"requestFeatures_",value:function(){var t=this;return bz(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise((function(e){t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Un(t.map.getProjection().code))}))),this.loadFeaturesPromise_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&jC(e.prototype,r),n&&jC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Zb);function qC(t){return(qC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function WC(t,e){return(WC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function YC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=HC(t);if(e){var i=HC(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ZC(this,r)}}function ZC(t,e){if(e&&("object"===qC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function HC(t){return(HC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WC(t,e)}(o,t);var e,r,n,i=YC(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};UC(this,o);var a=Sf(t,"KML"),s=r;s.label=a.label,s.visibility=a.visibility;var u=new GC(s,n);return e=i.call(this,a,r,void 0,u),yz(GC)&&hh(Oh("exception").kmllayer_method),bz(t)&&hh(Oh("exception").no_param),e.extract=a.extract,e.options=r,e.label=a.label,e}return e=o,(r=[{key:"type",get:function(){return"KML"},set:function(t){yz(t)||bz(t)||"KML"===t||hh("El tipo de capa debe ser '".concat("KML").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){bz(t)?this.getImpl().extract=!1:Mz(t)?this.getImpl().extract="true"===Ez(t):this.getImpl().extract=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&VC(e.prototype,r),n&&VC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NM),KC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function JC(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var $C=function(t){function e(){return t.call(this)||this}return KC(e,t),e.prototype.getType=function(){return dg},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(JC(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(JC(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return _r()},e.prototype.readFeaturesFromObject=function(t,e){return _r()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(JC(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return _r()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(JC(t))},e.prototype.readProjectionFromObject=function(t){return _r()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return _r()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return _r()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return _r()},e}(cg),QC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function tA(t,e){if(!t)return null;var r;switch(t.type){case dr.POINT:r=function(t){return new ds(t.coordinates)}(t);break;case dr.LINE_STRING:r=function(t){return new vp(t.coordinates)}(t);break;case dr.POLYGON:r=function(t){return new ks(t.coordinates)}(t);break;case dr.MULTI_POINT:r=function(t){return new bp(t.coordinates)}(t);break;case dr.MULTI_LINE_STRING:r=function(t){return new xp(t.coordinates)}(t);break;case dr.MULTI_POLYGON:r=function(t){return new Sp(t.coordinates)}(t);break;case dr.GEOMETRY_COLLECTION:r=function(t,e){var r=t.geometries.map((function(t){return tA(t,e)}));return new Tp(r)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return hg(r,!1,e)}function eA(t,e){var r,n=(t=hg(t,!0,e)).getType();switch(n){case dr.POINT:r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case dr.LINE_STRING:r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case dr.POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case dr.MULTI_POINT:r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case dr.MULTI_LINE_STRING:r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case dr.MULTI_POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case dr.GEOMETRY_COLLECTION:r=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var r=Ln({},e);return delete r.featureProjection,eA(t,r)}))}}(t,e);break;case dr.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}var rA=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).dataProjection=Un(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(r.defaultFeatureProjection=Un(n.featureProjection)),r.geometryName_=n.geometryName,r.extractGeometryName_=n.extractGeometryName,r}return QC(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=null,n=tA((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new lp;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(n),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var n=t.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],e))}else r=[this.readFeatureFromObject(t,e)];return r},e.prototype.readGeometryFromObject=function(t,e){return tA(t,e)},e.prototype.readProjectionFromObject=function(t){var e,r=t.crs;return r?"name"==r.type?e=Un(r.properties.name):"EPSG"===r.type?e=Un("EPSG:"+r.properties.code):Er(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(r.id=n);var i=t.getGeometry();i&&(r.geometry=eA(i,e));var o=t.getProperties();return delete o[t.getGeometryName()],Nn(o)||(r.properties=o),r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,e){return eA(t,this.adaptOptions(e))},e}($C);function nA(t){return(nA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aA(){return(aA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=sA(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function sA(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hA(t)););return t}function uA(t,e){return(uA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hA(t);if(e){var i=hA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cA(this,r)}}function cA(t,e){if(e&&("object"===nA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hA(t){return(hA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uA(t,e)}(o,t);var e,r,n,i=lA(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return iA(this,o),i.call(this,t)}return e=o,n=[{key:"readProjectionFromObject",value:function(t){var e,r=t.crs;if(r)if("name"===r.type)e=Un(r.properties.name);else{if("EPSG"!==r.type)throw e=null,new Error("Unknown crs.type: ".concat(r.type));e=Un("EPSG:".concat(r.properties.code))}else e="EPSG:4326";return e}},{key:"applyIcon",value:function(t,e){var r,n=document.createElement("IMG");n.src=e.url,n.width=e.width,n.height=e.height,n.crossOrigin="anonymous",e.anchor&&e.anchor.x&&e.anchor.y&&(r=[e.anchor.x,e.anchor.y]),t.setStyle(new S_({image:new bb({img:n,imgSize:[e.width,e.height],anchor:r})}))}}],(r=[{key:"readFeatureFromObject",value:function(t,e){var r=t,n=aA(hA(o.prototype),"readFeatureFromObject",this).call(this,r,e);return this.geometryName_&&n.setGeometryName(this.geometryName_),bz(r.id)?n.setId(Pz("geojson_")):n.setId(r.id),r.properties&&n.setProperties(r.properties),r.click&&(n.click=r.click),r.properties&&r.properties.vendor&&r.properties.vendor.mapea&&r.properties.vendor.mapea.icon&&o.applyIcon(n,r.properties.vendor.mapea.icon),n}},{key:"writeFeatureObject",value:function(t,e){var r=e,n={type:"Feature"},i=t.getId();i&&(n.id=i);var a=t.getGeometry();n.geometry=a?aA(hA(o.prototype),"writeGeometryObject",this).call(this,a,r):null;var s=t.getProperties();return delete s[t.getGeometryName()],bz(s)?n.properties=null:n.properties=s,bz(t.click)||(n.click=t.click),n}},{key:"write",value:function(t){var e=this;return t.map((function(t){return e.writeFeatureObject(t.getImpl().getOLFeature())}))}},{key:"read",value:function(t,e,r){var n=r.code;bz(n)&&(n=bz(r.featureProjection)?Un(r.getCode()):Un(r.featureProjection.getCode()));var i=o.readProjectionFromObject(t);return e.map((function(t){var e=t.id,r=new yG(e,t),o=r.getImpl().getOLFeature();if(null!==o.getGeometry()){var a=o.getGeometry().transform(i,n);o.setGeometry(a)}return r}))}}])&&oA(e.prototype,r),n&&oA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(rA);function pA(t){return(pA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yA(t,e){return(yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_A(t);if(e){var i=_A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vA(this,r)}}function vA(t,e){if(e&&("object"===pA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _A(t){return(_A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yA(t,e)}(o,t);var e,r,n,i=gA(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dA(this,o);var r=new fA(e);return t=i.call(this,r),yz(fA)&&hh(Oh("exception").geojson_method),t}return e=o,(r=[{key:"write",value:function(t){var e=t;return _z(e)||(e=[e]),this.getImpl().write(e)}},{key:"read",value:function(t,e){var r=t,n=[];if(!bz(r)){Mz(r)&&(r=JSON.parse(r));var i=[];"FeatureCollection"===r.type?i=r.features:"Feature"===r.type&&(i=[r]),n=this.getImpl().read(r,i,e)}return n}}])&&mA(e.prototype,r),n&&mA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h);function wA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var MA=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wA(this,t),this.rootPrefix=null,this.namespaces={ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema",ogc:"http://www.opengis.net/ogc"},this.options=e}var e,r,n;return e=t,n=[{key:"getChildValue",value:function(t,e){var r=e||"";if(t)for(var n=t.firstChild;n;n=n.nextSibling)switch(n.nodeType){case 3:case 4:r+=n.nodeValue}return r}}],(r=[{key:"read",value:function(t){var e=t;Mz(t)&&(e=td(t)),9!==e.nodeType&&hh(Oh("exception").must_be_document);var r={};return this.readRoot(r,e),r}},{key:"readRoot",value:function(t,e){var r=t,n=e.documentElement;this.rootPrefix=n.prefix,r.version=n.getAttribute("version"),this.runChildNodes(r,n)}},{key:"runChildNodes",value:function(t,e){for(var r,n,i,o,a=e.childNodes,s=0,u=a.length;s<u;s+=1)1===(r=a[s]).nodeType&&(i=this.getNamespacePrefix(r.namespaceURI),o=r.nodeName.split(":").pop(),(n=this["read".concat(i).concat(o)])&&n.apply(this,[t,r]))}},{key:"getNamespacePrefix",value:function(t){var e=null;if(null===t)e=this.namespaces[this.defaultPrefix];else for(var r=Object.keys(this.namespaces),n=0;n<r.length&&(e=r[n],this.namespaces[e]!==t);n+=1);return e}},{key:"getAttributeNS",value:function(t,e,r){var n="";if(t.getAttributeNS)n=t.getAttributeNS(e,r)||"";else{var i=this.getAttributeNodeNS(t,e,r);i&&(n=i.nodeValue)}return n}}])&&xA(e.prototype,r),n&&xA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SA(t){return(SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function OA(t,e){return(OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function TA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=IA(t);if(e){var i=IA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PA(this,r)}}function PA(t,e){if(e&&("object"===SA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function IA(t){return(IA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OA(t,e)}(o,t);var e,r,n,i=TA(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).featureTypeIdx_=0,e.readingFeatureType=!1,e.serviceException_=!1,e}return e=o,(r=[{key:"readRoot",value:function(t,e){var r=e.documentElement;if(/ServiceExceptionReport/i.test(r.localName))this.serviceException_=!0;else{this.rootPrefix=r.prefix;var n=t;n.elementFormDefault=r.getAttribute("elementFormDefault"),n.targetNamespace=r.getAttribute("targetNamespace"),n.targetPrefix=r.getAttribute("targetPrefix"),n.featureTypes=[]}this.runChildNodes(t,r)}},{key:"readogcServiceException",value:function(t,e){$b("Error en el DescribeFeatureType: ".concat(e.textContent.trim()," "))}},{key:"readxsdschema",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdimport",value:function(t,e){}},{key:"readxsdcomplexType",value:function(t,e){this.readingFeatureType=!0,t.featureTypes.push({properties:[]}),this.runChildNodes(t,e),this.readingFeatureType=!1}},{key:"readxsdcomplexContent",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdextension",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdsequence",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdelement",value:function(t,e){!0===this.readingFeatureType?t.featureTypes[this.featureTypeIdx_].properties.push({name:e.getAttribute("name"),maxOccurs:e.getAttribute("maxOccurs"),minOccurs:e.getAttribute("minOccurs"),nillable:e.getAttribute("nillable"),type:e.getAttribute("type"),localType:e.getAttribute("type").replace(/^\w+:/g,"")}):(t.featureTypes[this.featureTypeIdx_].typeName=e.getAttribute("name"),this.featureTypeIdx_+=1)}}])&&EA(e.prototype,r),n&&EA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(MA);function RA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var LA=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.typeName_=e,this.outputFormat_=r,this.projection_=n,this.gmlFormatter_=new kA({outputFormat:r,featureType:e,srsName:this.projection_.code})}var e,r,n;return e=t,(r=[{key:"read",value:function(t){var e,r=this,n={};if(/json/gi.test(this.outputFormat_))try{e=JSON.parse(t.text)}catch(t){throw t}return e||(e=this.gmlFormatter_.read(t.text)),n.featureNS=e.targetNamespace,n.featurePrefix=e.targetPrefix,e.featureTypes.some((function(t){return t.typeName===r.typeName_&&(n.properties=t.properties,n.properties.some((function(t){return Uz(t.localType)&&(n.geometryName=t.name),Uz(t.localType)}))),t.typeName===r.typeName_})),n}}])&&RA(e.prototype,r),n&&RA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function CA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var AA=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url_=e.url,this.namespace_=e.namespace,this.name_=e.name,this.typeName_=this.name_,bz(this.namespace_)||(this.typeName_=this.namespace_.concat(":").concat(this.name_)),this.version_=e.version,this.ids_=e.ids,this.cql_=e.cql,this.projection_=e.projection,this.getFeatureOutputFormat_=e.getFeatureOutputFormat,bz(this.getFeatureOutputFormat_)&&(this.getFeatureOutputFormat_="application/json"),this.describeFeatureTypeOutputFormat_=e.describeFeatureTypeOutputFormat,this.getFeatureVendor_={},bz(r)||bz(r.getFeature)||(this.getFeatureVendor_=r.getFeature),this.describeFeatureTypeVendor_={},bz(r)||bz(r.describeFeatureType)||(this.describeFeatureTypeVendor_=r.describeFeatureType)}var e,r,n;return e=t,(r=[{key:"getDescribeFeatureType",value:function(){var t={service:"WFS",version:this.version_,request:"DescribeFeatureType",typename:this.typeName_};bz(this.describeFeatureTypeOutputFormat_)||(t.outputFormat=this.describeFeatureTypeOutputFormat_);var e=Tz(this.url_,t),r=Tz(e,this.describeFeatureTypeVendor_),n=this.describeFeatureTypeOutputFormat_,i=new LA(this.name_,n,this.projection_);return new Promise((function(t,e){lz(r).then((function(e){t(i.read(e))}))}))}},{key:"getFeatureUrl",value:function(t,e){var r=this,n={service:"WFS",version:this.version_,request:"GetFeature",typename:this.typeName_,outputFormat:this.getFeatureOutputFormat_,srsname:e.getCode()};return bz(this.ids_)||(n.featureId=this.ids_.map((function(t){return r.name_.concat(".").concat(t)}))),bz(this.cql_)?bz(t)||(n.bbox="".concat(t.join(","),",").concat(e.getCode())):n.CQL_FILTER=this.cql_,Tz(Tz(this.url_,n),this.getFeatureVendor_)}}])&&CA(e.prototype,r),n&&CA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),NA=Tg;NA.prototype.writeFeatures,NA.prototype.writeFeaturesNode;var jA=NA;function FA(t){return(FA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function BA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zA(t,e){return(zA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function GA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=UA(t);if(e){var i=UA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qA(this,r)}}function qA(t,e){if(e&&("object"===FA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function UA(t){return(UA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var VA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zA(t,e)}(o,t);var e,r,n,i=GA(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return BA(this,o),i.call(this,t)}return e=o,r&&DA(e.prototype,r),n&&DA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(jA);function WA(t){return(WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZA(t,e){return(ZA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=KA(t);if(e){var i=KA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return XA(this,r)}}function XA(t,e){if(e&&("object"===WA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function KA(t){return(KA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZA(t,e)}(o,t);var e,r,n,i=HA(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.service_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){var o=e.getRequestUrl_(r,i);e.loadInternal_(o,i).then(t.bind(e))}}},{key:"loadInternal_",value:function(t,e){var r=this;return new Promise((function(n,i){lz(t).then((function(t){if(!bz(t.text)&&t.text.indexOf("ServiceExceptionReport")<0){var i=r.format_.read(t.text,e);n(i)}else 401===t.code?$b(Oh("dialog").unauthorized_user):t.text.indexOf("featureId and cql_filter")>=0?$b(Oh("dialog").only_one_filter):hh(Oh("exception").no_getfeature_response)}))}))}},{key:"getRequestUrl_",value:function(t,e){return this.service_.getFeatureUrl(null,e)}}])&&YA(e.prototype,r),n&&YA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Kc);function $A(t){return($A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eN(){return(eN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=rN(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function rN(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aN(t)););return t}function nN(t,e){return(nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=aN(t);if(e){var i=aN(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return oN(this,r)}}function oN(t,e){if(e&&("object"===$A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function aN(t){return(aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nN(t,e)}(o,t);var e,r,n,i=iN(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return QA(this,o),(t=i.call(this,e,r)).describeFeatureType_=null,t.formater_=null,t.loader_=null,t.service_=null,t.loaded_=!1,bz(t.options.getFeatureOutputFormat)&&(t.options.getFeatureOutputFormat="application/json"),t}return e=o,(r=[{key:"addTo",value:function(t){var e=this;eN(aN(o.prototype),"addTo",this).call(this,t),this.updateSource_(),t.getImpl().on("change",(function(){return e.refresh()}))}},{key:"refresh",value:function(t){t&&this.facadeVector_.removeFeatures(this.facadeVector_.getFeatures(!0)),this.updateSource_(t)}},{key:"updateSource_",value:function(t){var e=this;if(bz(this.vendorOptions_.source)){this.service_=new AA({url:this.url,namespace:this.namespace,name:this.name,version:this.version,ids:this.ids,cql:this.cql,projection:this.map.getProjection(),getFeatureOutputFormat:this.options.getFeatureOutputFormat,describeFeatureTypeOutputFormat:this.options.describeFeatureTypeOutputFormat},this.options.vendor),/json/gi.test(this.options.getFeatureOutputFormat)?this.formater_=new bA({defaultDataProjection:Un(this.map.getProjection().code)}):this.formater_=new VA(this.name,this.version,this.map.getProjection()),this.loader_=new JA(this.map,this.service_,this.formater_);var r=this.ol3Layer.getSource();this.requestFeatures_().then((function(n){if(!0===t||bz(r)){var i=new Db({loader:function(){e.loaded_=!0,e.facadeVector_.addFeatures(n),e.fire(bh,[n]),e.facadeVector_.redraw()}});e.ol3Layer.setSource(i)}else r.set("format",e.formater_),r.set("loader",e.loader_.getLoaderFn((function(t){e.loaded_=!0,e.facadeVector_.addFeatures(t),e.fire(bh,[t]),e.facadeVector_.redraw()}))),r.set("strategy",kb),r.changed()}))}}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return Dp.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=Dp.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=Dp.getFeaturesExtent(t,i);n(e)}))}))}},{key:"setCQL",value:function(t){this.cql=t,this.refresh(!0)}},{key:"getDescribeFeatureType",value:function(){var t=this;return bz(this.describeFeatureType_)&&(this.describeFeatureType_=this.service_.getDescribeFeatureType().then((function(e){return bz(e)||(t.formater_=new fA({geometryName:e.geometryName,defaultDataProjection:Un(t.map.getProjection().code)})),e}))),this.describeFeatureType_}},{key:"getDefaultValue",value:function(t){return"dateTime"===t?"0000-00-00T00:00:00":"date"===t?"0000-00-00":"time"===t?"00:00:00":"duration"===t?"P0Y":"int"===t||"number"===t||"float"===t||"double"===t||"decimal"===t||"short"===t||"byte"===t||"integer"===t||"long"===t||"negativeInteger"===t||"nonNegativeInteger"===t||"nonPositiveInteger"===t||"positiveInteger"===t||"unsignedLong"===t||"unsignedInt"===t||"unsignedShort"===t||"unsignedByte"===t?0:"hexBinary"===t?null:"-"}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"requestFeatures_",value:function(){var t=this;return new Promise((function(e){t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Un(t.map.getProjection().code))}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.namespace===t.namespace,e=e&&this.name===t.name,e=e&&this.ids===t.ids,e=e&&this.cql===t.cql,e=e&&this.version===t.version),e}}])&&tN(e.prototype,r),n&&tN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Zb),uN="POINT",lN="LINE",cN="POLYGON",hN="MPOINT",fN="MLINE",pN="MPOLYGON",dN=function(t){var e=Ez(t,!0);return s[e]};function mN(t){return(mN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yN(Object(r),!0).forEach((function(e){vN(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yN(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vN(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wN(){return(wN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=xN(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function xN(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ON(t)););return t}function MN(t,e){return(MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function SN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ON(t);if(e){var i=ON(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return EN(this,r)}}function EN(t,e){if(e&&("object"===mN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ON(t){return(ON=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MN(t,e)}(o,t);var e,r,n,i=SN(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new sN(r,n);_N(this,o);var s=Sf(t,"WFS");return e=i.call(this,s,r,void 0,a),yz(sN)&&hh(Oh("exception").wfslayer_method),bz(t)&&hh(Oh("exception").no_param),e.namespace=s.namespace,e.legend=s.legend,e.cql=s.cql,e.geometry=s.geometry,e.ids=s.ids,e.version=s.version,e.options=r,e}return e=o,(r=[{key:"type",get:function(){return"WFS"},set:function(t){yz(t)||bz(t)||"WFS"===t||hh("El tipo de capa debe ser '".concat("WFS").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"namespace",get:function(){return this.getImpl().namespace},set:function(t){this.getImpl().namespace=t}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){bz(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"cql",get:function(){return this.getImpl().cql},set:function(t){this.getImpl().cql=t}},{key:"geometry",get:function(){return this.getImpl().geometry},set:function(t){if(!bz(t)){var e=dN(t);bz(e)&&hh("El tipo de capa WFS <b>".concat(t,"</b> no se reconoce. Los tipos disponibles son: POINT, LINE, POLYGON, MPOINT, MLINE, MPOLYGON")),this.getImpl().geometry=e}}},{key:"ids",get:function(){return this.getImpl().ids},set:function(t){bz(t)?this.getImpl().ids=this.ids:this.getImpl().ids=t}},{key:"version",get:function(){return this.getImpl().version},set:function(t){bz(t)?this.getImpl().version="1.0.0":this.getImpl().version=t}},{key:"setCQL",value:function(t){var e=this,r=t;this.getImpl().getDescribeFeatureType().then((function(t){if(!bz(r)){var n=t.geometryName;r=r.replace(/{{geometryName}}/g,n)}e.getImpl().cql!==r&&e.getImpl().setCQL(r)}))}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;wN(ON(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.namespace===t.namespace,e=e&&this.name===t.name,e=e&&this.ids===t.ids,e=e&&this.cql===t.cql,e=e&&this.version===t.version),e}}])&&bN(e.prototype,r),n&&bN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NM);TN.DEFAULT_PARAMS={fill:{color:"rgba(103, 175, 19, 0.2)",opacity:.4},stroke:{color:"#67af13",width:1}},TN.DEFAULT_OPTIONS_STYLE={point:gN(gN({},TN.DEFAULT_PARAMS),{},{radius:5}),line:gN({},TN.DEFAULT_PARAMS),polygon:gN({},TN.DEFAULT_PARAMS)};var PN=TN,IN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kN=[],RN=function(t){function e(e,r,n,i){var o=t.call(this,e,r,{transition:0})||this;return o.context_={},o.executorGroups={},o.loadingSourceTiles=0,o.errorSourceTileKeys={},o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=null,o.wantedResolution,o.getSourceTiles=i.bind(void 0,o),o.sourceZ=-1,o.hifi=!1,o.wrappedTileCoord=n,o}return IN(e,t),e.prototype.getContext=function(t){var e=wr(t);return e in this.context_||(this.context_[e]=Bs(1,1,kN)),this.context_[e]},e.prototype.hasContext=function(t){return wr(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=wr(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)kN.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(_m),LN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CN=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.extent=null,s.format_=i,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=o,s.url_=n,s}return LN(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==zo&&(this.setState(Go),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(Uo)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(qo)},e.prototype.setLoader=function(t){this.loader_=t},e}(_m),AN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NN=function(t){function e(e){var r=this,n=e.projection||"EPSG:3857",i=e.extent||Wm(n),o=e.tileGrid||qm({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:jN,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.loadingTiles_={},r.sourceTileCache=new Im(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:CN,r.tileGrids_={},r}return AN(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],r=this.tileCache;if(0===r.getCount())return e;var n=ip(r.peekFirstKey())[0],i=this.tileGrid;return r.forEach((function(r){if(r.tileCoord[0]===n&&r.getState()===qo)for(var o=r.getSourceTiles(),a=0,s=o.length;a<s;++a){var u=o[a],l=u.tileCoord;if(dn(t,i.getTileCoordExtent(l))){var c=u.getFeatures();if(c)for(var h=0,f=c.length;h<f;++h){var p=c[h],d=p.getGeometry();dn(t,d.getExtent())&&e.push(p)}}}})),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,r){t.prototype.expireCache.call(this,e,r),this.sourceTileCache.expireCache({})},e.prototype.getSourceTiles=function(t,e,r){var n=r.wrappedTileCoord,i=this.getTileGridForProjection(e),o=i.getTileCoordExtent(n),a=n[0],s=i.getResolution(a);Fr(o,-s,o);var u=this.tileGrid,l=u.getExtent();l&&cn(o,l,o);var c,h,f,p=u.getZForResolution(s,1),d=u.getMinZoom(),m=r.sourceTiles;if(m&&m.length>0&&m[0].tileCoord[0]===p)c=m,h=!0,f=p;else{c=[],f=p+1;do{--f,h=!0,u.forEachTileCoord(o,f,function(n){var i,o=this.tileUrlFunction(n,t,e);if(void 0!==o)if(this.sourceTileCache.containsKey(o)){var a=(i=this.sourceTileCache.get(o)).getState();if(a===qo||a===Uo||a===Vo)return void c.push(i)}else f===p&&((i=new this.tileClass(n,zo,o,this.format_,this.tileLoadFunction)).extent=u.getTileCoordExtent(n),i.projection=e,i.resolution=u.getResolution(n[0]),this.sourceTileCache.set(o,i),i.addEventListener(Li,this.handleTileChange.bind(this)),i.load());h=h&&i&&i.getState()===qo,i&&i.getState()!==Vo&&r.getState()===zo&&(r.loadingSourceTiles++,i.addEventListener(Li,(function t(){var e=i.getState(),n=i.getKey();if(e===qo||e===Uo){e===qo?(i.removeEventListener(Li,t),r.loadingSourceTiles--,delete r.errorSourceTileKeys[n]):e===Uo&&(r.errorSourceTileKeys[n]=!0);var o=Object.keys(r.errorSourceTileKeys).length;r.loadingSourceTiles-o==0&&(r.hifi=0===o,r.sourceZ=p,r.setState(qo))}})))}.bind(this)),h||(c.length=0)}while(!h&&f>d)}return r.getState()===zo&&r.setState(Go),h&&(r.hifi=p===f,r.sourceZ=f,r.getState()<qo?r.setState(qo):m&&Mi(c,m)||(r.sourceTiles=c)),c},e.prototype.getTile=function(t,e,r,n,i){var o,a=rp(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var u=[t,e,r],l=this.getTileCoordForTileUrlFunction(u,i),c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(i);if(l&&c){var f=h.getTileCoordExtent(l);Fr(f,-h.getResolution(t),f),dn(c,f)||(l=null)}var p=!0;if(null!==l){var d=this.tileGrid,m=h.getResolution(t),y=d.getZForResolution(m,1),g=h.getTileCoordExtent(l);Fr(g,-m,g),d.forEachTileCoord(g,y,function(t){p=p&&!this.tileUrlFunction(t,n,i)}.bind(this))}var v=new RN(u,p?Vo:zo,l,this.getSourceTiles.bind(this,n,i));return v.key=s,o?(v.interimTile=o,v.refreshInterimChain(),this.tileCache.replace(a,v)):this.tileCache.set(a,v),v},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){var n=this.tileGrid;r=Vm(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=r}return r},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,r){var n=hu(this.getTileGridForProjection(r).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(ty);function jN(t,e){var r=Pb(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(r)}var FN="image",DN="hybrid",BN="vector",zN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GN={image:[Tc,Mc,Oc,Ec,Pc],hybrid:[Tc,Oc],vector:[]},qN={image:[Sc],hybrid:[Ec,Pc,Sc],vector:[Tc,Mc,Oc,Ec,Pc,Sc]},UN=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=[1,0,0,1,0,0],r}return zN(e,t),e.prototype.prepareTile=function(t,e,r,n){var i,o=wr(t),a=t.getState();return(a===qo&&t.hifi||a===Uo)&&o in this.tileListenerKeys_&&(mi(this.tileListenerKeys_[o]),delete this.tileListenerKeys_[o]),a!==qo&&a!==Uo||(this.updateExecutorGroup_(t,e,r),this.tileImageNeedsRender_(t,e,r)&&(i=!0,n&&(this.renderTileImageQueue_[o]=t))),i},e.prototype.getTile=function(e,r,n,i){var o=i.pixelRatio,a=i.viewState,s=a.resolution,u=a.projection,l=this.getLayer(),c=l.getSource().getTile(e,r,n,o,u);if(c.getState()<qo){c.wantedResolution=s;var h=wr(c);if(!(h in this.tileListenerKeys_)){var f=pi(c,Li,this.prepareTile.bind(this,c,o,u,!0));this.tileListenerKeys_[h]=f}}else{var p=i.viewHints;!!(p[ea]||p[ra])&&c.wantedResolution||(c.wantedResolution=s),this.prepareTile(c,o,u,!1)&&l.getRenderMode()!==BN&&this.renderTileImage_(c,i)}return t.prototype.getTile.call(this,e,r,n,i)},e.prototype.isDrawableTile=function(e){var r=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&r.getRenderMode()===BN||e.hasContext(r)},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,r){var n=this.getLayer(),i=n.getRevision(),o=n.getRenderOrder()||null,a=t.wantedResolution,s=t.getReplayState(n);if(s.dirty||s.renderedResolution!==a||s.renderedRevision!=i||s.renderedRenderOrder!=o||s.renderedZ!==t.sourceZ){var u=n.getSource(),l=u.getTileGrid(),c=u.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),h=u.getSourceTiles(e,r,t),f=wr(n);delete t.hitDetectionImageData[f],t.executorGroups[f]=[];for(var p=function(r,i){var p=h[r];if(p.getState()!=qo)return"continue";var m=p.tileCoord,y=l.getTileCoordExtent(m),g=cn(c,y),v=Xr(y,g)?null:Fr(g,n.getRenderBuffer()*a,d.tmpExtent);s.dirty=!1;var _=new H_(0,g,a,e,n.getDeclutter()),b=Rc(a,e),w=function(t){var e,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(e=r(t,a)),e){var i=this.renderFeature(t,b,e,_);this.dirty_=this.dirty_||i,s.dirty=s.dirty||i}},x=p.getFeatures();o&&o!==s.renderedRenderOrder&&x.sort(o);for(var M=0,S=x.length;M<S;++M){var E=x[M];v&&!dn(v,E.getGeometry().getExtent())||w.call(d,E)}var O=_.finish(),T=n.getRenderMode()!==BN&&n.getDeclutter()&&1===h.length?null:g,P=new cb(T,a,e,u.getOverlaps(),O,n.getRenderBuffer());t.executorGroups[f].push(P)},d=this,m=0,y=h.length;m<y;++m)p(m);s.renderedRevision=i,s.renderedZ=t.sourceZ,s.renderedRenderOrder=o,s.renderedResolution=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){var o=e.viewState.resolution,a=e.viewState.rotation;r=null==r?0:r;var s,u,l,c=this.getLayer(),h=c.getDeclutter(),f=c.getSource().getTileGridForProjection(e.viewState.projection),p={},d=this.renderedTiles,m=function(){var e=d[u],l=zr(f.getTileCoordExtent(e.wrappedTileCoord),t);if(!h&&!l)return"continue";for(var m=e.executorGroups[wr(c)],y=0,g=m.length;y<g;++y){var v=m[y];s=s||v.forEachFeatureAtCoordinate(t,o,a,r,(function(t){if(l||i&&-1!==i.indexOf(t)){var e=t.getId();if(void 0===e&&(e=wr(t)),!(e in p))return p[e]=!0,n(t,c)}}),c.getDeclutter()?i:null)}};for(u=0,l=d.length;u<l;++u)m();return s},e.prototype.getFeatures=function(t){return new Promise(function(e,r){for(var n,i=this.getLayer(),o=wr(i),a=i.getSource(),s=this.renderedProjection,u=s.getExtent(),l=this.renderedResolution,c=a.getTileGridForProjection(s),h=ja(this.renderedPixelToCoordinateTransform_,t.slice()),f=c.getTileCoordForCoordAndResolution(h,l),p=0,d=this.renderedTiles.length;p<d;++p)if(f.toString()===this.renderedTiles[p].tileCoord.toString()){if((n=this.renderedTiles[p]).getState()===qo&&n.hifi){var m=c.getTileCoordExtent(n.tileCoord);a.getWrapX()&&s.canWrapX()&&!Gr(u,m)&&_a(h,s);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var y=hn(c.getTileCoordExtent(n.wrappedTileCoord)),g=[(h[0]-y[0])/l,(y[1]-h[1])/l],v=n.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),_=n.hitDetectionImageData[o];if(!_&&!this.animatingOrInteracting_){var b=hu(c.getTileSize(c.getZForResolution(l))),w=[b[0]/2,b[1]/2],x=this.renderedRotation_;_=wb(b,[this.getRenderTransform(c.getTileCoordCenter(n.wrappedTileCoord),l,0,.5,w[0],w[1],0)],v,i.getStyleFunction(),c.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(i).renderedResolution,x),n.hitDetectionImageData[o]=_}e(xb(g,v,_))}}.bind(this))},e.prototype.handleFontsChanged=function(){Cn(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,r){var n=e.viewHints,i=!(n[ea]||n[ra]);this.renderQueuedTileImages_(i,e),t.prototype.renderFrame.call(this,e,r),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var o=this.getLayer(),a=o.getRenderMode();if(a===FN)return this.container;var s=o.getSource(),u=e.usedTiles[wr(s)];for(var l in this.renderTileImageQueue_)u&&l in u||delete this.renderTileImageQueue_[l];for(var c=this.context,h=o.getDeclutter()?{}:null,f=qN[a],p=e.pixelRatio,d=e.viewState,m=d.center,y=d.resolution,g=d.rotation,v=e.size,_=Math.round(v[0]*p),b=Math.round(v[1]*p),w=this.renderedTiles,x=s.getTileGridForProjection(e.viewState.projection),M=[],S=[],E=w.length-1;E>=0;--E)for(var O=w[E],T=O.tileCoord,P=x.getTileCoordExtent(O.wrappedTileCoord),I=x.getTileCoordExtent(T,this.tmpExtent)[0]-P[0],k=Aa(Fa(this.inversePixelTransform.slice(),1/p,1/p),this.getRenderTransform(m,y,g,p,_,b,I)),R=O.executorGroups[wr(o)],L=!1,C=0,A=R.length;C<A;++C){var N=R[C];if(N.hasExecutors(f)){var j=O.tileCoord[0],F=void 0;if(!h&&!L){F=N.getClipCoords(k),c.save();for(var D=0,B=M.length;D<B;++D){var z=M[D];j<S[D]&&(c.beginPath(),c.moveTo(F[0],F[1]),c.lineTo(F[2],F[3]),c.lineTo(F[4],F[5]),c.lineTo(F[6],F[7]),c.moveTo(z[6],z[7]),c.lineTo(z[4],z[5]),c.lineTo(z[2],z[3]),c.lineTo(z[0],z[1]),c.clip())}}N.execute(c,k,g,i,f,h),h||L||(c.restore(),M.push(F),S.push(j),L=!0)}}h&&lb(h,c,g,e.layerStatesArray[e.layerIndex].opacity,i,e.declutterItems);return this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var r in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,r,n){if(!r)return!1;var i=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)i=Cc(n,t,r[o],e,this.boundHandleStyleImageChange_)||i;else i=Cc(n,t,r,e,this.boundHandleStyleImageChange_);return i},e.prototype.tileImageNeedsRender_=function(t,e,r){var n=this.getLayer(),i=t.getReplayState(n),o=n.getRevision(),a=t.sourceZ,s=t.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==o||i.renderedTileZ!==a},e.prototype.renderTileImage_=function(t,e){var r=this.getLayer(),n=t.getReplayState(r),i=r.getRevision(),o=t.executorGroups[wr(r)];n.renderedTileRevision=i,n.renderedTileZ=t.sourceZ;var a=t.wrappedTileCoord,s=a[0],u=r.getSource(),l=e.pixelRatio,c=e.viewState.projection,h=u.getTileGridForProjection(c),f=h.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*f,d=h.getResolution(s),m=t.getContext(r);l=Math.max(l,p/l);var y=u.getTilePixelSize(s,l,c);m.canvas.width=y[0],m.canvas.height=y[1];var g=l/p;if(1!==g){var v=Ca(this.tmpTransform_);Fa(v,g,g),m.setTransform.apply(m,v)}var _=h.getTileCoordExtent(a,this.tmpExtent),b=p/d,w=Ca(this.tmpTransform_);Fa(w,b,-b),function(t,e,r){Aa(t,Na(La,1,0,0,1,e,r))}(w,-_[0],-_[3]);for(var x=0,M=o.length;x<M;++x){o[x].execute(m,w,0,!0,GN[r.getRenderMode()])}n.renderedTileResolution=t.wantedResolution},e}(Yf),VN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),WN=function(t){function e(e){var r=this,n=e||{},i=Ln({},n);delete i.preload,delete i.useInterimTilesOnError,r=t.call(this,i)||this;var o=n.renderMode||DN;return Er(null==o||o==FN||o==DN||o==BN,28),r.renderMode_=o,r.setPreload(n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return VN(e,t),e.prototype.createRenderer=function(){return new UN(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(Cf)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Af)},e.prototype.setPreload=function(t){this.set(Cf,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Af,t)},e}(T_),YN=r(33),ZN=r.n(YN),HN=r(214),XN=r.n(HN),KN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function JN(t,e,r){if(3===t){var n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields($N,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function $N(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1===(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(n)}}function QN(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[i]=o}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function tj(t,e,r){t.pos=e.features[r];var n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(QN,i,n),i}var ej=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=new or({code:"",units:ir.TILE_PIXELS}),r.featureClass_=n.featureClass?n.featureClass:mp,r.geometryName_=n.geometryName,r.layerName_=n.layerName?n.layerName:"layer",r.layers_=n.layers?n.layers:null,r.idProperty_=n.idProperty,r}return KN(e,t),e.prototype.readRawGeometry_=function(t,e,r,n){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,u=0,l=0,c=0;t.pos<i;){if(!a){var h=t.readVarint();o=7&h,a=h>>3}a--,1===o||2===o?(s+=t.readSVarint(),u+=t.readSVarint(),1===o&&l>c&&(n.push(l),c=l),r.push(s,u),l+=2):7===o?l>c&&(r.push(r[c],r[c+1]),l+=2):Er(!1,59)}l>c&&(n.push(l),c=l)},e.prototype.createFeature_=function(t,e,r){var n,i=e.type;if(0===i)return null;var o,a=e.properties;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=e.id,a[this.layerName_]=e.layer.name;var s=[],u=[];this.readRawGeometry_(t,e,s,u);var l=function(t,e){var r;1===t?r=1===e?dr.POINT:dr.MULTI_POINT:2===t?r=1===e?dr.LINE_STRING:dr.MULTI_LINE_STRING:3===t&&(r=dr.POLYGON);return r}(i,u.length);if(this.featureClass_===mp)(n=new this.featureClass_(l,s,u,a,o)).transform(r.dataProjection,r.featureProjection);else{var c=void 0;if(l==dr.POLYGON){for(var h=[],f=0,p=0,d=0,m=u.length;d<m;++d){var y=u[d];Ss(s,f,y,2)||(h.push(u.slice(p,d)),p=d),f=y}c=h.length>1?new Sp(s,Ea,h):new ks(s,Ea,u)}else c=l===dr.POINT?new ds(s,Ea):l===dr.LINE_STRING?new vp(s,Ea):l===dr.POLYGON?new ks(s,Ea,u):l===dr.MULTI_POINT?new bp(s,Ea):l===dr.MULTI_LINE_STRING?new xp(s,Ea,u):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var g=hg(c,!1,r);n.setGeometry(g),n.setId(o),n.setProperties(a,!0)}return n},e.prototype.getType=function(){return pg},e.prototype.readFeatures=function(t,e){var r=this.layers_,n=this.adaptOptions(e),i=Un(n.dataProjection);i.setWorldExtent(n.extent),n.dataProjection=i;var o=new XN.a(t),a=o.readFields(JN,{}),s=[];for(var u in a)if(!r||-1!=r.indexOf(u)){var l=a[u],c=l?[0,0,l.extent,l.extent]:null;i.setExtent(c);for(var h=0,f=l.length;h<f;++h){var p=tj(o,l,h);s.push(this.createFeature_(o,p,n))}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(cg);function rj(t){return(rj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ij(t,e){return(ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=sj(t);if(e){var i=sj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return aj(this,r)}}function aj(t,e){if(e&&("object"===rj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sj(t){return(sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ij(t,e)}(o,t);var e,r,n,i=oj(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,r)).formater_=null,n.popup_=null,n.lastZoom_=-1,n.projection_=t.projection||"EPSG:3857",n.features_=[],n.mode_=t.mode,n.loaded_=!1,n.opacity_=t.opacity||1,n.visibility_=!1!==t.visibility,n.layers_=t.layers,n.extract=t.extract,n}return e=o,(r=[{key:"addTo",value:function(t){var e=this;this.map=t,this.fire("added:map"),void 0!==this.layers_?this.formater_=new ej({layers:this.layers_,featureClass:this.mode_===wj.FEATURE?lp:mp}):this.formater_=new ej({featureClass:this.mode_===wj.FEATURE?lp:mp});var r=this.facadeVector_.getMaxExtent(),n=new NN({format:this.formater_,url:this.url,projection:this.projection_});n.on($m,(function(t){return e.checkAllTilesLoaded_(t)})),this.ol3Layer=new WN(Bz({source:n,extent:r},this.vendorOptions_,!0)),this.setOpacity(this.opacity_),this.setVisible(this.visibility_),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.on("change:zoom",(function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}})),this.map.on("move",(function(t){if(e.map){var r=e.map.getContainer().parentElement.parentElement.id;document.getElementById(r).style.cursor="inherit",e.map.getMapImpl().forEachFeatureAtPixel(t.pixel,(function(t){t&&(document.getElementById(r).style.cursor="pointer")}))}})),setTimeout((function(){var t=e.map.getLayers().filter((function(t){var r=void 0===t.getImpl().layers_||t.getImpl().layers_===e.layers_;return t.url===e.url&&r}));t.length>0&&null!==t[0].getStyle()&&t[0].setStyle(t[0].getStyle())}),10)}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&(this.unselectFeatures(),!bz(n))){var i=Bh(ZN.a,{vars:this.parseFeaturesForTemplate_(t),parseToHtml:!1}),o={icon:"g-cartografia-pin",title:this.name,content:i},a=this.map.getPopup();bz(a)?((a=new Bv).addTab(o),this.map.addPopup(a,e)):a.addTab(o)}}},{key:"parseFeaturesForTemplate_",value:function(t){var e={features:[]};return t.forEach((function(t){var r=t.getAttributes(),n=Object.keys(r),i=[];n.forEach((function(t){i.push({key:t,value:r[t]})}));var o={id:t.getId(),attributes:i};e.features.push(o)})),e}},{key:"unselectFeatures",value:function(){bz(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"removePopup",value:function(){bz(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeatures",value:function(t,e){var r=[];if(this.ol3Layer){var n=this.ol3Layer.getSource().tileCache;if(0===n.getCount())return r;var i=ip(n.peekFirstKey())[0];n.forEach((function(t){if(t.tileCoord[0]===i&&t.getState()===qo)for(var e=t.getSourceTiles(),n=0,o=e.length;n<o;n+=1){var a=e[n].getFeatures();a&&(r=r.concat(a))}}))}return r}},{key:"checkAllTilesLoaded_",value:function(t){var e=t.tile.getTileCoord(),r=Un(this.projection_);this.ol3Layer.getSource().getTileCacheForProjection(r).getValues().every((function(t){var r=t.getTileCoord(),n=t.getState();return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]||n!==Go}))&&!this.loaded_&&(this.loaded_=!0,this.facadeVector_.fire(bh))}},{key:"isLoaded",value:function(){return!0}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&nj(e.prototype,r),n&&nj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Zb);function lj(t){return(lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hj(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cj(Object(r),!0).forEach((function(e){fj(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cj(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fj(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mj(){return(mj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=yj(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function yj(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bj(t)););return t}function gj(t,e){return(gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bj(t);if(e){var i=bj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _j(this,r)}}function _j(t,e){if(e&&("object"===lj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bj(t){return(bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wj={RENDER:"render",FEATURE:"feature"},xj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gj(t,e)}(o,t);var e,r,n,i=vj(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;pj(this,o);var s=a||new uj(e,r,n);return t=i.call(this,e,r,n,s),yz(uj)&&hh("La implementación usada no puede crear capas Vector"),t.extract=e.extract,t}return e=o,(r=[{key:"type",get:function(){return"MVT"},set:function(t){yz(t)||bz(t)||"MVT"===t||hh("El tipo de capa debe ser '".concat("MVT").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){bz(t)?this.getImpl().extract=!1:Mz(t)?this.getImpl().extract="true"===Ez(t):this.getImpl().extract=t}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return bz(t)&&(t=this.map_.userMaxExtent,bz(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return e(t.getMaxExtent())}))}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;mj(bj(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var t=null,e=this.getFeatures();if(!bz(e)){var r=e[0];bz(r)||(t=r.getType())}return t}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures().map((function(t){return nE.olFeature2Facade(t)}))}},{key:"setFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}}])&&dj(e.prototype,r),n&&dj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NM);xj.DEFAULT_PARAMS_STYLE={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2}},xj.DEFAULT_OPTIONS_STYLE={point:hj(hj({},xj.DEFAULT_PARAMS_STYLE),{},{radius:5}),line:hj({},xj.DEFAULT_PARAMS_STYLE),polygon:hj({},xj.DEFAULT_PARAMS_STYLE)};var Mj=xj,Sj=(r(230),r(215)),Ej=r.n(Sj),Oj=".m-top.m-left",Tj=".m-top.m-right",Pj=".m-bottom.m-left",Ij=".m-bottom.m-right";function kj(t){return(kj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cj(t,e){return(Cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Aj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jj(t);if(e){var i=jj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nj(this,r)}}function Nj(t,e){if(e&&("object"===kj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jj(t){return(jj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cj(t,e)}(o,t);var e,r,n,i=Aj(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Rj(this,o),(e=i.call(this)).name=t,e._map=null,e._controls=[],e._buttonPanel=null,e._collapsible=!1,bz(r.collapsible)||(e._collapsible=r.collapsible),e.position=Oj,bz(r.position)||(e.position=r.position),e._collapsed=e._collapsible,bz(r.collapsed)||(e._collapsed=r.collapsed&&!0===e._collapsible),e._multiActivation=!1,bz(r.multiActivation)||(e._multiActivation=r.multiActivation),e._className=null,bz(r.className)||(e._className=r.className),e._collapsedButtonClass=null,bz(r.collapsedButtonClass)?e.position===Oj||e.position===Pj?e._collapsedButtonClass="g-cartografia-flecha-derecha":e.position!==Tj&&e.position!==Ij||(e._collapsedButtonClass="g-cartografia-flecha-izquierda"):e._collapsedButtonClass=r.collapsedButtonClass,e._openedButtonClass=null,bz(r.openedButtonClass)?e.position===Oj||e.position===Pj?e._openedButtonClass="g-cartografia-flecha-izquierda":e.position!==Tj&&e.position!==Ij||(e._openedButtonClass="g-cartografia-flecha-derecha"):e._openedButtonClass=r.openedButtonClass,e._element=null,e._areaContainer=null,e._controlsContainer=null,e._tooltip=null,bz(r.tooltip)||(e._tooltip=r.tooltip),e}return e=o,(r=[{key:"destroy",value:function(){null!=this._element&&this._areaContainer.removeChild(this._element),this._controlsContainer=null}},{key:"addTo",value:function(t,e){var r=this;this._map=t,this._areaContainer=e;var n=Bh(Ej.a);this._element=n,bz(this._tooltip)||this._element.setAttribute("title",this._tooltip),this._buttonPanel=n.querySelector("button.m-panel-btn"),bz(this._className)||this._className.split(/\s+/).forEach((function(t){n.classList.add(t)})),!0===this._collapsed?this.collapse():this.open(),!0!==this._collapsible&&n.classList.add("no-collapsible"),this._controlsContainer=n.querySelector("div.m-panel-controls"),e.appendChild(n),this._buttonPanel.addEventListener("click",(function(t){t.preventDefault(),!1===r._collapsed?r.collapse():r.open()})),this.addControls(this._controls),this.fire("added:map",n)}},{key:"_collapse",value:function(t){t.classList.remove("opened"),this._buttonPanel.classList.remove(this._openedButtonClass),t.classList.add("collapsed"),this._buttonPanel.classList.add(this._collapsedButtonClass),this._collapsed=!0,this.fire("hide")}},{key:"_open",value:function(t){t.classList.remove("collapsed"),this._buttonPanel.classList.remove(this._collapsedButtonClass),t.classList.add("opened"),this._buttonPanel.classList.add(this._openedButtonClass),this._collapsed=!1,this.fire("show")}},{key:"open",value:function(){this._open(this._element)}},{key:"collapse",value:function(){this._collapse(this._element)}},{key:"getControls",value:function(){return this._controls}},{key:"addControls",value:function(t){var e=this,r=t;bz(r)||(_z(r)||(r=[r]),r.forEach((function(t){t instanceof Ch&&(e.hasControl(t)||(e._controls.push(t),t.setPanel(e),t.on("destroy",e._removeControl.bind(e),e)),bz(e._controlsContainer)||(t.on("added:map",e._moveControlView.bind(e),e),e._map.addControls(t)),t.on("activated",e._manageActivation.bind(e),e))})))}},{key:"hasControl",value:function(t){var e=!1;return bz(t)||(Mz(t)?e=null!=this._controls.filter((function(e){return e.name===t}))[0]:t instanceof Ch&&(e=Dz(this._controls,t))),e}},{key:"removeControls",value:function(t){var e=this,r=t;bz(r)||(_z(r)||(r=[r]),r.forEach((function(t){var r=t;r instanceof Ch&&e.hasControl(r)&&(e._controls=e._controls.filter((function(t){return!r.equals(t)})),r.setPanel(null))}),this),0===this._controls.length&&this._map.removePanel(this))}},{key:"_removeControl",value:function(t){var e=this;this._map.controls(t).forEach((function(t){var r=e._controls.indexOf(t);-1!==r&&e._controls.splice(r,1)}))}},{key:"removeClassName",value:function(t){bz(this._element)?this._className=this._className.replace(new RegExp("s* ".concat(t," s*")),""):this._element.classList.remove(t)}},{key:"addClassName",value:function(t){bz(this._element)?this._className=this._className.concat(" ").concat(t):this._element.classList.add(t)}},{key:"_moveControlView",value:function(t){var e=t.getElement();bz(this._controlsContainer)||this._controlsContainer.appendChild(e),t.fire("added:panel")}},{key:"_manageActivation",value:function(t){!0!==this._multiActivation&&this._controls.forEach((function(e){!e.equals(t)&&e.activated&&e.deactivate()}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=t.name===this.name),e}},{key:"getTemplatePanel",value:function(){return this._element}},{key:"getButtonPanel",value:function(){return this._buttonPanel}},{key:"isCollapsed",value:function(){return this._collapsed}},{key:"getControlsContainer",value:function(){return this._controlsContainer}}])&&Lj(e.prototype,r),n&&Lj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Kc);function Dj(t){return(Dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zj(t,e){return(zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Gj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Uj(t);if(e){var i=Uj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qj(this,r)}}function qj(t,e){if(e&&("object"===Dj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Uj(t){return(Uj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zj(t,e)}(o,t);var e,r,n,i=Gj(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.url_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){e.loadInternal_(i).then((function(r){t.apply(e,r)}))}}},{key:"loadInternal_",value:function(t){var e=this;return new Promise((function(r){lz(e.url_).then((function(n){if(bz(n.text))hh(Oh("exception").no_service_response);else{var i=n.text.replace("urn:ogc:def:crs:OGC:1.3:CRS84","urn:ogc:def:crs:EPSG::4326"),o=e.format_.read(i,{featureProjection:t});r.call(e,[o])}}))}))}}])&&Bj(e.prototype,r),n&&Bj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Kc);function Wj(t){return(Wj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zj(){return(Zj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Hj(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Hj(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$j(t)););return t}function Xj(t,e){return(Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Kj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$j(t);if(e){var i=$j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Jj(this,r)}}function Jj(t,e){if(e&&("object"===Wj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $j(t){return($j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xj(t,e)}(o,t);var e,r,n,i=Kj(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,r)).popup_=null,n.formater_=null,n.loader_=null,n.loadFeaturesPromise_=null,n.loaded_=!1,n.hiddenAttributes_=[],bz(e.hide)||(n.hiddenAttributes_=e.hide),n.showAttributes_=[],bz(e.show)||(n.showAttributes_=e.show),n}return e=o,(r=[{key:"addTo",value:function(t){this.formater_=new bA({defaultDataProjection:Un(t.getProjection().code)}),bz(this.url)||(this.loader_=new Vj(t,this.url,this.formater_)),Zj($j(o.prototype),"addTo",this).call(this,t)}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.formater_.write(this.facadeVector_.getFeatures()),r=this.map.getProjection().code.split(":")[1],n={type:"FeatureCollection",features:e,crs:{properties:{code:r},type:"EPSG"}};xz(t)&&(n=t),this.source=n,this.updateSource_()}},{key:"setSource",value:function(t){this.source=t,bz(this.map)||this.updateSource_()}},{key:"requestFeatures_",value:function(){var t=this;return bz(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise((function(e){if(t.source){var r=t.formater_.read(t.source,t.map.getProjection());e(r)}else t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Un(t.map.getProjection().code))}))),this.loadFeaturesPromise_}},{key:"updateSource_",value:function(){var t=this;bz(this.vendorOptions_.source)&&this.requestFeatures_().then((function(e){t.ol3Layer&&t.ol3Layer.setSource(new Db({loader:function(r,n,i){t.loaded_=!0,t.facadeVector_.clear(),t.facadeVector_.addFeatures(e),t.fire(bh,[e])}})),t.facadeVector_.addFeatures(e)}))}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return Dp.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=Dp.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=Dp.getFeaturesExtent(t,i);n(e)}))}))}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&(this.unselectFeatures(),!bz(n))){var i=n.getAttribute("vendor.mapea.click");if(wz(i))i(r,n);else{var o=Bh(ZN.a,{vars:this.parseFeaturesForTemplate_(t),parseToHtml:!1}),a={icon:"g-cartografia-pin",title:this.name,content:o},s=this.map.getPopup();bz(s)?((s=new Bv).addTab(a),this.map.addPopup(s,e)):s.addTab(a)}}}},{key:"parseFeaturesForTemplate_",value:function(t){var e=this,r={features:[]};return t.forEach((function(t){var n=t.getAttributes(),i=Object.keys(n),o=[];i.forEach((function(t){var r=!0;bz(e.showAttributes_)?bz(e.hiddenAttributes_)||(r=!Dz(e.hiddenAttributes_,t)):r=Dz(e.showAttributes_,t),r&&o.push({key:t,value:n[t]})}));var a={id:t.getId(),attributes:o};r.features.push(a)})),r}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&Yj(e.prototype,r),n&&Yj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Zb);function tF(t){return(tF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rF(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eF(Object(r),!0).forEach((function(e){nF(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eF(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aF(){return(aF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=sF(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function sF(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hF(t)););return t}function uF(t,e){return(uF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hF(t);if(e){var i=hF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cF(this,r)}}function cF(t,e){if(e&&("object"===tF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hF(t){return(hF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uF(t,e)}(o,t);var e,r,n,i=lF(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;iF(this,o);var a=new Qj(t,r,n);return e=i.call(this,t,r,void 0,a),yz(Qj)&&hh(Oh("exception").geojsonlayer_method),bz(t)&&hh(Oh("exception").no_param),Mz(t)?e.url=t:_z(t)?e.source=t:(e.url=t.url,e.name=t.name,e.source=t.source,e.extract=t.extract||!1,bz(t.crs)||(bz(e.source)&&(e.source={type:"FeatureCollection",features:[]}),e.source.crs={type:"EPSG",properties:{code:t.crs}})),e.options=r,e}return e=o,(r=[{key:"type",get:function(){return"GeoJSON"},set:function(t){yz(t)||bz(t)||"GeoJSON"===t||hh("El tipo de capa debe ser '".concat("GeoJSON").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"source",get:function(){return this.getImpl().source},set:function(t){this.getImpl().source=t}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){bz(t)?this.getImpl().extract=!1:Mz(t)?this.getImpl().extract="true"===Ez(t):this.getImpl().extract=t}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name,e=e&&this.extract===t.extract),e}},{key:"setSource",value:function(t){this.source=t,this.getImpl().refresh(t)}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;aF(hF(o.prototype),"setStyle",this).call(this,t,e,r)}}])&&oF(e.prototype,r),n&&oF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NM);fF.DEFAULT_PARAMS={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},fF.DEFAULT_OPTIONS_STYLE={point:rF(rF({},fF.DEFAULT_PARAMS),{},{radius:5}),line:rF({},fF.DEFAULT_PARAMS),polygon:rF({},fF.DEFAULT_PARAMS)};var pF=fF;function dF(t){return(dF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gF(t,e){return(gF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bF(t);if(e){var i=bF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _F(this,r)}}function _F(t,e){if(e&&("object"===dF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bF(t){return(bF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gF(t,e)}(s,t);var e,r,n,i=vF(s);function s(){return mF(this,s),i.apply(this,arguments)}return e=s,(r=[{key:"toImage",value:function(t){var e=null,r={fill:this.options_.fill,stroke:this.options_.stroke,icon:this.options_.icon};if(!0===Qz(r))e=eG(t);else{if(bz(this.olStyleFn_))return null;var n=this.olStyleFn_()[1];if(n.getImage&&null!=n.getImage()&&n.getImage()instanceof h_){if(n.getImage()instanceof nx){var i=n.getImage().getImage();null!=i&&i&&(e=i.toDataURL())}else if(n.getImage()instanceof Xw){var o=n.getImage();if(!bz(o)&&!(e=o.getSrc()).startsWith(window.location.origin)){var a=Fz([M.config.PROXY_URL,"/image"]);e=Tz(a,{url:e})}}}else{null!=(n=this.olStyleFn_()[0]).getImage()&&null!=n.getImage().getStroke()&&(n.getImage().getStroke().getWidth()>s.DEFAULT_WIDTH_POINT&&n.getImage().getStroke().setWidth(s.DEFAULT_WIDTH_POINT),n.getImage().render());var u=n.getImage().getImage();null!=u&&(e=u.toDataURL())}}return e}},{key:"updateFacadeOptions",value:function(t){var e=this;this.olStyleFn_=function(r){var n=r;n instanceof lp||(n=e);var i,s,u=new gS({zIndex:bw.getValue(t.zindex,n,e.layer_),geometry:function(t){var e=Dp.getCentroid(t.getGeometry()),r=new ds(e);return"MultiPoint"===t.getGeometry().getType()&&(r=new bp(t.getGeometry().getCoordinates())),r}}),l=new gS({zIndex:bw.getValue(t.zindex,n,e.layer_),geometry:function(t){var e=Dp.getCentroid(t.getGeometry()),r=new ds(e);return"MultiPoint"===t.getGeometry().getType()&&(r=new bp(t.getGeometry().getCoordinates())),r}});if(!bz(t.fill)){var c=bw.getValue(t.fill.color,n,e.layer_),h=bw.getValue(t.fill.opacity,n,e.layer_);h||0===h||(h=1),bz(c)||(i=new y_({color:xw()(c).alpha(h).css()}))}if(!bz(t.stroke)){var f=bw.getValue(t.stroke.color,n,e.layer_);if(!bz(f)){var p=t.stroke.linedashoffset;s=new g_({color:f,width:bw.getValue(t.stroke.width,n,e.layer_),lineDash:bw.getValue(t.stroke.linedash,n,e.layer_),lineDashOffset:bw.getValue(p,n,e.layer_),lineCap:bw.getValue(t.stroke.linecap,n,e.layer_),lineJoin:bw.getValue(t.stroke.linejoin,n,e.layer_),miterLimit:bw.getValue(t.stroke.miterlimit,n,e.layer_)})}}if(!bz(t.label)){var d=bw.getValue(t.label.text,n,e.layer_),m=bw.getValue(t.label.align,n,e.layer_),y=bw.getValue(t.label.baseline,n,e.layer_),g=new Cw({font:bw.getValue(t.label.font,n,e.layer_),rotateWithView:bw.getValue(t.label.rotate,n,e.layer_),scale:bw.getValue(t.label.scale,n,e.layer_),offsetX:bw.getValue(t.label.offset?t.label.offset[0]:void 0,n,e.layer_),offsetY:bw.getValue(t.label.offset?t.label.offset[1]:void 0,n,e.layer_),fill:new y_({color:bw.getValue(t.label.color||"#000000",n,e.layer_)}),textAlign:Object.values(o).includes(m)?m:"center",textBaseline:Object.values(a).includes(y)?y:"top",text:void 0===d?void 0:String(d),rotation:bw.getValue(t.label.rotation,n,e.layer_)});if(!bz(t.label.stroke)){var v=t.label.stroke,_=v.miterlimit,b=v.linedashoffset;g.setStroke(new g_({color:bw.getValue(t.label.stroke.color,n,e.layer_),width:bw.getValue(t.label.stroke.width,n,e.layer_),lineCap:bw.getValue(t.label.stroke.linecap,n,e.layer_),lineJoin:bw.getValue(t.label.stroke.linejoin,n,e.layer_),lineDash:bw.getValue(t.label.stroke.linedash,n,e.layer_),lineDashOffset:bw.getValue(b,n,e.layer_),miterLimit:bw.getValue(_,n,e.layer_)}))}u.setText(g)}var w=bw.getValue(t.radius,n,e.layer_);return _z(t.radius)&&(w=bw.getValue((function(e,r){var n=t.radius.find((function(t){return t.zoom===r.getZoom()}));return yz(n)&&(n=t.radius.find((function(t){return"default"===t.zoom}))),n?n.value:5}),n,e.layer_)),u.setImage(new _x({fill:i,stroke:s,radius:w,snapToPixel:bw.getValue(t.snapToPixel,n,e.layer_)})),bz(t.icon)||(bz(t.icon.src)?bz(t.icon.form)||l.setImage(new nx({form:bz(bw.getValue(t.icon.form,n,e.layer_))?"":bw.getValue(t.icon.form,n,e.layer_).toLowerCase(),gradient:bw.getValue(t.icon.gradient,n,e.layer_),glyph:bw.getValue(t.icon.class,n,e.layer_),fontSize:bw.getValue(t.icon.fontsize,n,e.layer_),radius:bw.getValue(t.icon.radius,n,e.layer_),rotation:bw.getValue(t.icon.rotation,n,e.layer_),rotateWithView:bw.getValue(t.icon.rotate,n,e.layer_),offsetX:bw.getValue(t.icon.offset?t.icon.offset[0]:void 0,n,e.layer_),offsetY:bw.getValue(t.icon.offset?t.icon.offset[1]:void 0,n,e.layer_),fill:new y_({color:bw.getValue(void 0!==t.icon.fill?t.icon.fill:"#FFFFFF",n,e.layer_)}),stroke:t.icon.color?new g_({color:bw.getValue(t.icon.color,n,e.layer_),width:1}):void 0,anchor:bw.getValue(t.icon.anchor,n,e.layer_),anchorXUnits:bw.getValue(t.icon.anchorxunits,n,e.layer_),anchorYUnits:bw.getValue(t.icon.anchoryunits,n,e.layer_),src:bw.getValue(t.icon.src,n,e.layer_),opacity:bw.getValue(t.icon.opacity,n,e.layer_),scale:bw.getValue(t.icon.scale,n,e.layer_),snapToPixel:bw.getValue(t.icon.snaptopixel,n,e.layer_),offsetOrigin:bw.getValue(t.icon.offsetorigin,n,e.layer_),offset:bw.getValue(t.icon.offset,n,e.layer_),crossOrigin:bw.getValue(t.icon.crossorigin,n,e.layer_),anchorOrigin:bw.getValue(t.icon.anchororigin,n,e.layer_),size:bw.getValue(t.icon.size,n,e.layer_)})):l.setImage(new Xw({anchor:bw.getValue(t.icon.anchor,n,e.layer_),anchorXUnits:bw.getValue(t.icon.anchorxunits,n,e.layer_),anchorYUnits:bw.getValue(t.icon.anchoryunits,n,e.layer_),src:bw.getValue(t.icon.src,n,e.layer_),opacity:bw.getValue(t.icon.opacity,n,e.layer_),scale:bw.getValue(t.icon.scale,n,e.layer_),rotation:bw.getValue(t.icon.rotation,n,e.layer_),rotateWithView:bw.getValue(t.icon.rotate,n,e.layer_),snapToPixel:bw.getValue(t.icon.snaptopixel,n,e.layer_),offsetOrigin:bw.getValue(t.icon.offsetorigin,n,e.layer_),offset:bw.getValue(t.icon.offset,n,e.layer_),crossOrigin:bw.getValue(t.icon.crossorigin,n,e.layer_),anchorOrigin:bw.getValue(t.icon.anchororigin,n,e.layer_),size:bw.getValue(t.icon.size,n,e.layer_)}))),[u,l]}}},{key:"drawGeometryToCanvas",value:function(t){this.olStyleFn_()[1].getImage()instanceof lw?t.drawGeometry(new ds([10,10])):t.drawCircle(new kp([this.getCanvasSize()[0]/2,this.getCanvasSize()[1]/2],this.getRadius_()))}},{key:"updateCanvas",value:function(t){var e=this,r=this.options_;if(r.point&&(r=r.point),r.icon&&r.icon.src&&"string"==typeof r.icon.src&&r.icon.src.endsWith(".svg")&&(r.icon.fill||r.icon.stroke))sG(r.icon.src,r).then((function(){e.updateCanvas(t)}));else if(this.updateFacadeOptions(r),!Qz(r)){var n=this.getCanvasSize(),i=Ac(t.getContext("2d"),{size:n}),o=this.olStyleFn_()[0];bz(o.getText())||o.setText(null),!bz(this.olStyleFn_()[1])&&this.olStyleFn_()[1].getImage()instanceof lw&&(o=this.olStyleFn_()[1]);var a=o.getImage().getStroke();bz(a)||bz(a.getWidth())||a.setWidth(3),i.setStyle(o),this.drawGeometryToCanvas(i)}}},{key:"getCanvasSize",value:function(){var t,e=this.olStyleFn_()[1].getImage();if(e instanceof lw)t=[90,90];else{var r=this.getRadius_(e);t=[2*r+4,2*r+4]}return t}},{key:"getRadius_",value:function(t){return t instanceof bb?25:t instanceof lw?t.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&yF(e.prototype,r),n&&yF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(bw);wF.DEFAULT_WIDTH_POINT=3,wF.getFonts=function(){var t=[],e=lw.defs.fonts;return Object.keys(e).forEach((function(e){t.push(e)})),t},wF.getFontsIcons=function(t){var e=[],r=lw.defs.glyphs;return Object.entries(r).forEach((function(r){r[1].font===t&&e.push(r[0])})),e};var xF=wF;function MF(t){return(MF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function EF(t,e){return(EF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=PF(t);if(e){var i=PF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return TF(this,r)}}function TF(t,e){if(e&&("object"===MF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function PF(t){return(PF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EF(t,e)}(o,t);var e,r,n,i=OF(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;e=bz(e)?o.DEFAULT_NULL:Zz(e,o.DEFAULT),e=Zz({},e);var r=new xF(e);return i.call(this,e,r)}return e=o,(r=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Point'))"}}])&&SF(e.prototype,r),n&&SF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(fM);IF.DEFAULT={radius:5},IF.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5},radius:5},IF.getFonts=function(){return xF.getFonts()},IF.getFontsIcons=function(t){return xF.getFontsIcons(t)};var kF=IF;function RF(t){return(RF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function CF(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?LF(Object(r),!0).forEach((function(e){AF(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LF(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function AF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jF(t,e){return(jF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=BF(t);if(e){var i=BF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return DF(this,r)}}function DF(t,e){if(e&&("object"===RF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function BF(t){return(BF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jF(t,e)}(o,t);var e,r,n,i=FF(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=CF(CF({},t),{},{tileUrlFunction:o.tileUrlFunction});return i.call(this,e)}return e=o,n=[{key:"tileUrlFunction",value:function(t){return""}}],(r=null)&&NF(e.prototype,r),n&&NF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Dk),GF=r(216),qF=r.n(GF),UF=r(34);function VF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var WF=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tiles_={},this.db_=null,this.init(e)}var e,r,n;return e=t,(r=[{key:"init",value:function(t){var e=this;this.initPromise_=new Promise((function(r,n){qF()({locateFile:function(t){return"".concat(M.config.SQL_WASM_URL).concat(t)}}).then((function(n){iG(t).then((function(t){e.db_=new n.Database(t),r(e.db_)}))})).catch((function(t){n(t)}))}))}},{key:"executeQuery",value:function(t){return this.initPromise_.then((function(e){return e.exec(t)[0]}))}},{key:"getTile",value:function(t){var e="select tile_data from tiles where zoom_level={z} and tile_column={x} and tile_row={y}".replace("{z}",t[0]).replace("{x}",t[1]).replace("{y}",t[2]),r=this.tiles_[t]||null,n=null;if(this.db_&&!r){var i=this.db_.exec(e)[0];bz(i)||(r=i.values[0][0],n=nG(r))}return this.setTile(t,n),n}},{key:"getVectorTile",value:function(t){var e,r=this,n="select tile_data from tiles where zoom_level={z} and tile_column={x} and tile_row={y}".replace("{z}",t[0]).replace("{x}",t[1]).replace("{y}",t[2]),i=this.tiles_[t]||null;return i=i?new Promise((function(t){return t(i)})):this.executeQuery(n).then((function(n){return bz(n)||(e=n.values[0][0],e=Object(UF.inflate)(e)),r.setTile(t,e),e}))}},{key:"setTile",value:function(t,e){this.tiles_[t]=e}},{key:"getExtent",value:function(){var t=null;return this.executeQuery('select value from metadata where name="bounds"').then((function(e){if(e){var r=e.values[0][0];t=r.split(",").map(Number.parseFloat)}return t}))}},{key:"getFormat",value:function(){var t="png";return this.executeQuery('select value from metadata where name="format"').then((function(e){return e&&(t=e.values[0][0]),t}))}}])&&VF(e.prototype,r),n&&VF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function YF(t){return(YF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function XF(t,e){return(XF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function KF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$F(t);if(e){var i=$F(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return JF(this,r)}}function JF(t,e){if(e&&("object"===YF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $F(t){return($F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XF(t,e)}(o,t);var e,r,n,i=KF(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return ZF(this,o),(e=i.call(this,r,n)).tileLoadFunction_=t.tileLoadFunction||null,e.url_=t.url,e.source_=t.source,e.tileSize_="number"==typeof t.tileSize?t.tileSize:256,e.maxExtent_=t.maxExtent||null,e.minZoomLevel_="number"==typeof t.minZoomLevel?t.minZoomLevel:0,e.maxZoomLevel_="number"==typeof t.maxZoomLevel?t.maxZoomLevel:0,e.opacity_="number"==typeof r.opacity?r.opacity:1,e.zIndex_=$g.Z_INDEX.MBTiles,e.visibility=!1!==t.visibility||t.visibility,e}return e=o,(r=[{key:"setVisible",value:function(t){this.visibility=t}},{key:"addTo",value:function(t){var e=this;this.map=t;var r=Un("EPSG:3857"),n=r.getExtent(),i=function(t,e,r){for(var n=pn(t)/e,i=new Array(r),o=0;o<r;o+=1)i[o]=n/Math.pow(2,o);return i}(n,this.tileSize_,16);if(this.ol3Layer=new Hf({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:n}),this.map.getMapImpl().addLayer(this.ol3Layer),this.tileLoadFunction_){var o=new zF({projection:r,tileLoadFunction:function(t){return e.loadTile(t)},tileGrid:new sp({extent:n,origin:nn(n),resolutions:i})});this.ol3Layer.setSource(o)}else this.fetchSource().then((function(t){e.tileProvider_=t;var o=new zF({projection:r,tileLoadFunction:function(r){return e.loadTileWithProvider(r,t)},tileGrid:new sp({extent:n,origin:nn(n),resolutions:i})});e.ol3Layer.setSource(o)}))}},{key:"loadTile",value:function(t){var e=t,r=t.getTileCoord();this.tileLoadFunction_(r[0],r[1],-r[2]-1).then((function(t){e.getImage().src=t||e.getImage().src}))}},{key:"loadTileWithProvider",value:function(t,e){var r=t,n=t.getTileCoord(),i=e.getTile([n[0],n[1],-n[2]-1]);r.getImage().src=i||r.getImage().src}},{key:"fetchSource",value:function(){var t=this;return new Promise((function(e,r){if(t.tileProvider_)e(t.tileProvider_);else if(t.source_)e(new WF(t.source_));else{if(t.url_)throw new Error("");r(new Error("No url or source was specified."))}}))}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this.map.getMapImpl();bz(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new Hf(e)}return t}}])&&HF(e.prototype,r),n&&HF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Yp);function tD(t){return(tD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var eD=/MBTiles\*.*/,rD=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(Mz(e)&&t.test(e)){var l=e.split("*")[o];bz(l)||(s=u[n](l))}else xz(e)?s=e[r]:hh("El parámetro no es de un tipo soportado: ".concat(tD(e)));return Mz(s)&&(s=s.trim()),!0===a&&(s=Ez(s)),s}},nD=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e,r=rD({parameter:t,type:"string",attr:"name"}),n=rD({parameter:t,type:"string",attr:"url"}),i=rD({parameter:t,type:"string",attr:"legend"});return(eD.test(t)||xz(t))&&(e={type:"MBTiles",name:r(eD,3),url:n(eD,2),legend:i(eD,1)}),e})),_z(t)||(e=e[0]),e};function iD(t){return(iD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function aD(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oD(Object(r),!0).forEach((function(e){sD(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oD(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function sD(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cD(t,e){return(cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=pD(t);if(e){var i=pD(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fD(this,r)}}function fD(t,e){if(e&&("object"===iD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pD(t){return(pD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cD(t,e)}(o,t);var e,r,n,i=hD(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uD(this,o),yz(QF)&&hh(Oh("exception").mbtiles_method);var a=aD(aD({},nD(t)),{},{source:t.source}),s=new QF(t,r,n);return(e=i.call(this,a,s)).url=a.url,e.name=a.name,e.legend=a.legend,e.options=r,e}return e=o,(r=[{key:"type",get:function(){return"MBTiles"},set:function(t){yz(t)||bz(t)||"MBTiles"===t||hh("El tipo de capa debe ser '".concat("MBTiles").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}}])&&lD(e.prototype,r),n&&lD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Lf),mD=r(217),yD=r.n(mD),gD=r(11);"function"==typeof Object.assign&&Object.assign;function vD(t){return t*Math.PI/180}var _D=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function bD(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var r=document.createElement("canvas");return r.width=t,r.height=e,r}var wD,xD=Array(256).join(" ");function MD(t,e){if(e>=.05){for(var r="",n=t.split("\n"),i=xD.slice(0,Math.round(e/.1)),o=0,a=n.length;o<a;++o)o>0&&(r+="\n"),r+=n[o].split("").join(i);return r}return t}function SD(){return wD||(wD=bD(1,1).getContext("2d")),wD}function ED(t,e){return SD().measureText(t).width+(t.length-1)*e}var OD={};ec&&pi(ec,Ai,(function(){OD={}}));var TD,PD,ID=gD.e.isFunction,kD=gD.e.convertFunction,RD=gD.c.isExpression,LD=gD.c.createPropertyExpression,CD={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},AD={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},ND={},jD={zoom:0};function FD(t,e,r,n,i,o){var a=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[a]||(o[a]={});var s=o[a];if(!s[r]){var u=(t[e]||ND)[r],l=gD.f["".concat(e,"_").concat(t.type)][r];void 0===u&&(u=l.default);var c=RD(u);if(!c&&ID(u)&&(u=kD(u,l),c=!0),c){var h=function(t,e){var r=LD(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return r.value}(u,l);s[r]=h.evaluate.bind(h)}else"color"==l.type&&(u=gD.a.parse(u)),s[r]=function(){return u}}return jD.zoom=n,s[r](jD,i)}var DD=!1;function BD(t,e){if(t){if(!DD&&(0===t.a||0===e))return;var r=t.a;return e=void 0===e?1:e,0===r?"transparent":"rgba("+Math.round(255*t.r/r)+","+Math.round(255*t.g/r)+","+Math.round(255*t.b/r)+","+r*e+")"}return t}var zD=/^([^]*)\{(.*)\}([^]*)$/;function GD(t,e){var r;do{if(r=t.match(zD)){var n=e[r[2]]||"";t=r[1]+n+r[3]}}while(r);return t}var qD=!1;var UD=function(t,e,r,n,i,o,a){if(void 0===n&&(n=_D),"string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");var s,u;if(o)if("undefined"!=typeof Image){var l=new Image;l.crossOrigin="anonymous",l.onload=function(){s=l,u=[l.width,l.height],t.changed(),l.onload=null},l.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var c=self;c.postMessage({action:"loadImage",src:o}),c.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(s=t.data.image,u=[s.width,s.height])}))}for(var h,f=Object(gD.b)(e.layers),p={},d=[],m={},y={},g={},v={},_=0,b=f.length;_<b;++_){var w=f[_],x=w.id;if("string"==typeof r&&w.source==r||-1!==r.indexOf(x)){var M=w["source-layer"];if(!h){h=w.source;var S=e.sources[h];if(!S)throw new Error('Source "'.concat(h,'" is not defined'));var E=S.type;if("vector"!==E&&"geojson"!==E)throw new Error('Source "'.concat(h,'" is not of type "vector" or "geojson", but "').concat(E,'"'))}var O=p[M];O||(O=[],p[M]=O),O.push({layer:w,index:_}),d.push(x)}}var T=new g_,P=new y_,I=[],k=function(t,e){var r=t.getProperties(),o=p[r.layer];if(o){var l=n.indexOf(e);-1==l&&(l=function(t,e){for(var r=0,n=e.length;r<n;++r){if(e[r]<t&&r+1<n){var i=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(i)}}return n-1}(e,n));for(var c,h=CD[t.getGeometry().getType()],f={properties:r,type:h},d=-1,_=function(n,p){var _=o[n],b=_.layer,w=b.id,x=b.layout||ND,M=b.paint||ND;if("none"===x.visibility||"minzoom"in b&&l<b.minzoom||"maxzoom"in b&&l>=b.maxzoom)return"continue";var S=b.filter;if(!S||function(t,e,r,n,i){return i||console.warn("No filterCache provided to evaluateFilter()"),t in i||(i[t]=Object(gD.d)(e).filter),jD.zoom=n,i[t](jD,r)}(w,S,f,l,v)){c=b;var E=void 0,O=void 0,k=void 0,R=void 0,L=void 0,C=void 0,A=_.index;if(3==h&&("fill"==b.type||"fill-extrusion"==b.type))if(O=FD(b,"paint",b.type+"-opacity",l,f,g),b.type+"-pattern"in M){var N=FD(b,"paint",b.type+"-pattern",l,f,g);if(N){var j="string"==typeof N?GD(N,r):N.toString();if(s&&i&&i[j]){++d,(C=I[d])&&C.getFill()&&!C.getStroke()&&!C.getText()||(C=new S_({fill:new y_}),I[d]=C),k=C.getFill(),C.setZIndex(A);var F=y[dt=j+"."+O];if(!F){var D=i[j],B=bD(D.width,D.height),z=B.getContext("2d");z.globalAlpha=O,z.drawImage(s,D.x,D.y,D.width,D.height,0,0,D.width,D.height),F=z.createPattern(B,"repeat"),y[dt]=F}k.setColor(F)}}}else E=BD(FD(b,"paint",b.type+"-color",l,f,g),O),b.type+"-outline-color"in M&&(L=BD(FD(b,"paint",b.type+"-outline-color",l,f,g),O)),L||(L=E),(E||L)&&(++d,(!(C=I[d])||E&&!C.getFill()||!E&&C.getFill()||L&&!C.getStroke()||!L&&C.getStroke()||C.getText())&&(C=new S_({fill:E?new y_:void 0,stroke:L?new g_:void 0}),I[d]=C),E&&(k=C.getFill()).setColor(E),L&&((R=C.getStroke()).setColor(L),R.setWidth(.5)),C.setZIndex(A));if(1!=h&&"line"==b.type){E=!("line-pattern"in M)&&"line-color"in M?BD(FD(b,"paint","line-color",l,f,g),FD(b,"paint","line-opacity",l,f,g)):void 0;var G=FD(b,"paint","line-width",l,f,g);E&&G>0&&(++d,(C=I[d])&&C.getStroke()&&!C.getFill()&&!C.getText()||(C=new S_({stroke:new g_}),I[d]=C),(R=C.getStroke()).setLineCap(FD(b,"layout","line-cap",l,f,g)),R.setLineJoin(FD(b,"layout","line-join",l,f,g)),R.setMiterLimit(FD(b,"layout","line-miter-limit",l,f,g)),R.setColor(E),R.setWidth(G),R.setLineDash(M["line-dasharray"]?FD(b,"paint","line-dasharray",l,f,g).map((function(t){return t*G})):null),C.setZIndex(A))}var q=!1,U=null,V=0,W=void 0,Y=void 0,Z=void 0;if((1==h||2==h)&&"icon-image"in x){var H=FD(b,"layout","icon-image",l,f,g);if(H){W="string"==typeof H?GD(H,r):H.toString();var X=void 0;if(s&&i&&i[W]){var K=FD(b,"layout","icon-rotation-alignment",l,f,g);if(2==h){var J=t.getGeometry();if(J.getFlatMidpoint||J.getFlatMidpoints){var $=J.getExtent();if(Math.sqrt(Math.max(Math.pow(($[2]-$[0])/e,2),Math.pow(($[3]-$[1])/e,2)))>150){var Q="MultiLineString"===J.getType()?J.getFlatMidpoints():J.getFlatMidpoint();if(PD||(PD=new mp("Point",TD=[NaN,NaN],[],{},null)),X=PD,TD[0]=Q[0],TD[1]=Q[1],"line"===(Rt=FD(b,"layout","symbol-placement",l,f,g))&&"map"===K)for(var tt=J.getStride(),et=J.getFlatCoordinates(),rt=0,nt=et.length-tt;rt<nt;rt+=tt){var it=et[rt],ot=et[rt+1],at=et[rt+tt],st=et[rt+tt+1],ut=Math.min(it,at),lt=Math.min(ot,st),ct=Math.max(it,at),ht=Math.max(ot,st);if(Q[0]>=ut&&Q[0]<=ct&&Q[1]>=lt&&Q[1]<=ht){V=Math.atan2(ot-st,at-it);break}}}}}if(2!==h||X){var ft=FD(b,"layout","icon-size",l,f,g),pt=void 0!==M["icon-color"]?FD(b,"paint","icon-color",l,f,g):null;if(!pt||0!==pt.a){var dt=W+"."+ft;if(null!==pt&&(dt+="."+pt),!(Y=m[dt])){var mt=i[W];Y=new bb({color:pt?[255*pt.r,255*pt.g,255*pt.b,pt.a]:void 0,img:s,imgSize:u,size:[mt.width,mt.height],offset:[mt.x,mt.y],rotateWithView:"map"===K,scale:ft/mt.pixelRatio,displacement:"icon-offset"in x?FD(b,"layout","icon-offset",l,f,g).map((function(t){return-t*mt.pixelRatio})):void 0}),m[dt]=Y}}Y&&(++d,(C=I[d])&&C.getImage()&&!C.getFill()&&!C.getStroke()||(C=new S_,I[d]=C),C.setGeometry(X),Y.setRotation(V+vD(FD(b,"layout","icon-rotate",l,f,g))),Y.setOpacity(FD(b,"paint","icon-opacity",l,f,g)),Y.setAnchor(AD[FD(b,"layout","icon-anchor",l,f,g)]),C.setImage(Y),U=C.getText(),C.setText(void 0),C.setZIndex(A),q=!0,Z=!1)}else Z=!0}}}if(1==h&&"circle"===b.type){++d,(C=I[d])&&C.getImage()&&!C.getFill()&&!C.getStroke()||(C=new S_,I[d]=C);var yt="circle-radius"in M?FD(b,"paint","circle-radius",l,f,g):5,gt=BD(FD(b,"paint","circle-stroke-color",l,f,g),FD(b,"paint","circle-stroke-opacity",l,f,g)),vt=BD(FD(b,"paint","circle-color",l,f,g),FD(b,"paint","circle-opacity",l,f,g)),_t=FD(b,"paint","circle-stroke-width",l,f,g),bt=yt+"."+gt+"."+vt+"."+_t;(Y=m[bt])||(Y=new m_({radius:yt,stroke:gt&&_t>0?new g_({width:_t,color:gt}):void 0,fill:vt?new y_({color:vt}):void 0}),m[bt]=Y),C.setImage(Y),U=C.getText(),C.setText(void 0),C.setGeometry(void 0),C.setZIndex(A),q=!0}var wt=void 0;if("text-field"in x)wt=GD(FD(b,"layout","text-field",l,f,g).toString(),r).trim(),O=FD(b,"paint","text-opacity",l,f,g);if(wt&&O&&!Z){q||(++d,(C=I[d])&&C.getText()&&!C.getFill()&&!C.getStroke()||(C=new S_,I[d]=C),C.setImage(void 0),C.setGeometry(void 0)),C.getText()||C.setText(U||new Cw({padding:[2,2,2,2]})),U=C.getText();var xt=Math.round(FD(b,"layout","text-size",l,f,g)),Mt=FD(b,"layout","text-font",l,f,g),St=FD(b,"layout","text-line-height",l,f,g),Et=yD()(a?a(Mt):Mt,xt,St),Ot=x["text-transform"];"uppercase"==Ot?wt=wt.toUpperCase():"lowercase"==Ot&&(wt=wt.toLowerCase());var Tt=FD(b,"layout","text-max-width",l,f,g),Pt=FD(b,"layout","text-letter-spacing",l,f,g),It=2==h?MD(wt,Pt):function t(e,r,n,i){if(-1!==e.indexOf("\n")){for(var o=e.split("\n"),a=[],s=0,u=o.length;s<u;++s)a.push(t(o[s],r,n,i));return a.join("\n")}var l=n+","+r+","+e+","+i,c=OD[l];if(!c){var h=e.split(" ");if(h.length>1){var f=SD();f.font=r;var p=f.measureText("M").width*n,d="";for(a=[],s=0,u=h.length;s<u;++s){var m=h[s],y=d+(d?" ":"")+m;ED(y,i)<=p?d=y:(d&&a.push(d),d=m)}d&&a.push(d);for(s=0,u=a.length;s<u&&u>1;++s){var g=a[s];if(ED(g,i)<.35*p){var v=s>0?ED(a[s-1],i):1/0,_=s<u-1?ED(a[s+1],i):1/0;a.splice(s,1),u-=1,v<_?(a[s-1]+=" "+g,s-=1):a[s]=g+" "+a[s]}}for(s=0,u=a.length-1;s<u;++s){var b=a[s],w=a[s+1];if(ED(b,i)>.7*p&&ED(w,i)<.6*p){var x=b.split(" "),M=x.pop();ED(M,i)<.2*p&&(a[s]=x.join(" "),a[s+1]=M+" "+w),u-=1}}c=a.join("\n")}else c=e;c=MD(c,i),OD[l]=c}return c}(wt,Et,Tt,Pt);U.setText(It),U.setFont(Et),U.setRotation(vD(FD(b,"layout","text-rotate",l,f,g)));var kt=FD(b,"layout","text-anchor",l,f,g),Rt=q||1==h?"point":FD(b,"layout","symbol-placement",l,f,g);U.setPlacement(Rt);var Lt=FD(b,"paint","text-halo-width",l,f,g),Ct=FD(b,"layout","text-offset",l,f,g),At=FD(b,"paint","text-translate",l,f,g),Nt=0,jt=0;if("point"==Rt){var Ft="center";-1!==kt.indexOf("left")?(Ft="left",jt=Lt):-1!==kt.indexOf("right")&&(Ft="right",jt=-Lt),U.setTextAlign(Ft);var Dt=FD(b,"layout","text-rotation-alignment",l,f,g);U.setRotateWithView("map"==Dt)}else U.setMaxAngle(vD(FD(b,"layout","text-max-angle",l,f,g))*wt.length/It.length),U.setTextAlign(),U.setRotateWithView(!1);var Bt="middle";0==kt.indexOf("bottom")?(Bt="bottom",Nt=-Lt-.5*(St-1)*xt):0==kt.indexOf("top")&&(Bt="top",Nt=Lt+.5*(St-1)*xt),U.setTextBaseline(Bt),U.setOffsetX(Ct[0]*xt+jt+At[0]),U.setOffsetY(Ct[1]*xt+Nt+At[1]),P.setColor(BD(FD(b,"paint","text-color",l,f,g),O)),U.setFill(P);var zt=BD(FD(b,"paint","text-halo-color",l,f,g),O);if(zt){T.setColor(zt),Lt*=2;var Gt=.5*xt;T.setWidth(Lt<=Gt?Lt:Gt),U.setStroke(T)}else U.setStroke(void 0);var qt=FD(b,"layout","text-padding",l,f,g),Ut=U.getPadding();qt!==Ut[0]&&(Ut[0]=qt,Ut[1]=qt,Ut[2]=qt,Ut[3]=qt),C.setZIndex(A)}}},b=0,w=o.length;b<w;++b)_(b);return d>-1?(I.length=d+1,qD&&("function"==typeof t.set?t.set("mapbox-layer",c):t.getProperties()["mapbox-layer"]=c),I):void 0}};return t.setStyle(k),t.set("mapbox-source",h),t.set("mapbox-layers",d),k};function VD(t){return(VD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZD(t,e){return(ZD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=KD(t);if(e){var i=KD(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return XD(this,r)}}function XD(t,e){if(e&&("object"===VD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function KD(t){return(KD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZD(t,e)}(o,t);var e,r,n,i=HD(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return WD(this,o),(e=i.call(this,r,n)).tileLoadFunction_=t.tileLoadFunction||null,e.url_=t.url,e.source_=t.source,e.style_=t.style,e.tileSize_="number"==typeof t.tileSize?t.tileSize:256,e.maxExtent_=t.maxExtent||null,e.minZoomLevel_="number"==typeof t.minZoomLevel?t.minZoomLevel:0,e.maxZoomLevel_="number"==typeof t.maxZoomLevel?t.maxZoomLevel:0,e.opacity_="number"==typeof r.opacity?r.opacity:1,e.zIndex_=$g.Z_INDEX.MBTilesVector,e.visibility=!1!==t.visibility||t.visibility,e}return e=o,(r=[{key:"setVisible",value:function(t){this.visibility=t}},{key:"addTo",value:function(t){var e=this;this.map=t;var r=this.map.getProjection().code,n=Un(r),i=n.getExtent(),o=function(t,e,r){for(var n=pn(t)/e,i=new Array(r),o=0;o<r;o+=1)i[o]=n/Math.pow(2,o);return i}(i,this.tileSize_,10);oG(this.style_).then((function(t){e.glStyle_=t,e.tileLoadFunction_?(e.ol3Layer=e.createLayer({resolutions:o,sourceExtent:i,projection:n}),e.ol3Layer.getSource().on($m,(function(t){return e.checkAllTilesLoaded_(t)})),e.ol3Layer.getSource().on(Jm,(function(t){return e.checkAllTilesLoaded_(t)})),e.map.on("change:zoom",(function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}})),e.map.getMapImpl().addLayer(e.ol3Layer)):e.fetchSource().then((function(t){e.tileProvider_=t,e.tileProvider_.getExtent().then((function(a){var s=a;s&&(s=Qn(a,"EPSG:4326",r)),e.ol3Layer=e.createLayer({tileProvider:t,resolutions:o,extent:s,sourceExtent:i,projection:n}),e.ol3Layer.getSource().on($m,(function(t){return e.checkAllTilesLoaded_(t)})),e.ol3Layer.getSource().on(Jm,(function(t){return e.checkAllTilesLoaded_(t)})),e.map.on("change:zoom",(function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}})),UD(e.ol3Layer,e.glStyle_,""),e.map.getMapImpl().addLayer(e.ol3Layer)}))}))}))}},{key:"createLayer",value:function(t){var e=this,r=new ej({layers:["0502p_ent_pob_ine"]}),n=new WN({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:this.maxExtent_||t.extent});if(this.tileLoadFunction_){var i=new NN({projection:t.projection,url:"{z},{x},{y}",tileLoadFunction:function(t){return e.loadVectorTile(t,r)},tileGrid:new sp({extent:t.sourceExtent,origin:nn(t.sourceExtent),resolutions:t.resolutions})});n.setSource(i)}else{var o=new NN({projection:t.projection,url:"{z},{x},{y}",format:r,tileLoadFunction:function(r){return e.loadVectorTileWithProvider(r,t)},tileGrid:new sp({extent:t.sourceExtent,origin:nn(t.sourceExtent),resolutions:t.resolutions})});n.setSource(o)}return n}},{key:"loadVectorTile",value:function(t,e){var r=this;t.setState(Go),t.setLoader((function(n,i,o){var a=t.getTileCoord();r.tileLoadFunction_(a[0],a[1],-a[2]-1).then((function(r){if(r){var i=Object(UF.inflate)(r),a=e.readFeatures(i,{extent:n,featureProjection:o});t.setFeatures(a),t.setState(qo)}else t.setState(Uo)}))}))}},{key:"loadVectorTileWithProvider",value:function(t,e){t.setState(Go),t.setLoader((function(r,n,i){var o=t.getTileCoord(),a=t.getFormat();e.tileProvider.getVectorTile([o[0],o[1],-o[2]-1],r).then((function(e){if(e){var n=a.readFeatures(e,{extent:r,featureProjection:i});t.setFeatures(n),t.setState(qo)}else t.setState(Uo)}))}))}},{key:"fetchSource",value:function(){var t=this;return new Promise((function(e,r){if(t.tileProvider_)e(t.tileProvider_);else if(t.source_)e(new WF(t.source_));else{if(t.url_)throw new Error("");r(new Error("No url or source was specified."))}}))}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this.map.getMapImpl();bz(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"getFeatures",value:function(t,e){var r=[];if(this.ol3Layer){var n=this.ol3Layer.getSource().tileCache;if(0===n.getCount())return r;var i=ip(n.peekFirstKey())[0];n.forEach((function(t){if(t.tileCoord[0]===i&&t.getState()===qo)for(var e=t.getSourceTiles(),n=0,o=e.length;n<o;n+=1){var a=e[n].getFeatures();a&&(r=r.concat(a))}}))}return r}},{key:"checkAllTilesLoaded_",value:function(t){var e=this.map.getProjection().code,r=t.tile.getTileCoord(),n=Un(e);this.ol3Layer.getSource().getTileCacheForProjection(n).getValues().some((function(t){var e=t.getTileCoord(),n=t.getState();return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]||n!==Go}))&&!this.loaded_&&(this.loaded_=!0,this.facadeLayer_.fire(bh))}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new Hf(e)}return t}}])&&YD(e.prototype,r),n&&YD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Zb);function $D(t){return($D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var QD=/MBTiles\*.*/,tB=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(Mz(e)&&t.test(e)){var l=e.split("*")[o];bz(l)||(s=u[n](l))}else xz(e)?s=e[r]:hh("El parámetro no es de un tipo soportado: ".concat($D(e)));return Mz(s)&&(s=s.trim()),!0===a&&(s=Ez(s)),s}},eB=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e,r=tB({parameter:t,type:"string",attr:"name"}),n=tB({parameter:t,type:"string",attr:"url"}),i=tB({parameter:t,type:"string",attr:"legend"});return(QD.test(t)||xz(t))&&(e={type:"MBTilesVector",name:r(QD,3),url:n(QD,2),legend:i(QD,1)}),e})),_z(t)||(e=e[0]),e};function rB(t){return(rB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function iB(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nB(Object(r),!0).forEach((function(e){oB(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oB(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uB(){return(uB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=lB(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function lB(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pB(t)););return t}function cB(t,e){return(cB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=pB(t);if(e){var i=pB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fB(this,r)}}function fB(t,e){if(e&&("object"===rB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pB(t){return(pB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cB(t,e)}(o,t);var e,r,n,i=hB(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};aB(this,o);var a=iB(iB({},eB(e)),{},{source:e.source,style:e.style,tileLoadFunction:e.tileLoadFunction}),s=new JD(a,r,n);return t=i.call(this,a,r,n,s),yz(JD)&&hh("La implementación usada no puede crear capas Vector"),t}return e=o,(r=[{key:"type",get:function(){return"MBTilesVector"},set:function(t){yz(t)||bz(t)||"MBTilesVector"===t||hh("El tipo de capa debe ser '".concat("MBTilesVector").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return bz(t)&&(t=this.map_.userMaxExtent,bz(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return e(t.getMaxExtent())}))}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;uB(pB(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var t=null,e=this.getFeatures();if(!bz(e)){var r=e[0];bz(r)||(t=r.getType())}return t}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures().map((function(t){return nE.olFeature2Facade(t)}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"setFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}}])&&sB(e.prototype,r),n&&sB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NM);dB.DEFAULT_OPTIONS_STYLE={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2},radius:5};var mB=dB;function yB(t){return(yB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _B(t,e){return(_B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xB(t);if(e){var i=xB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wB(this,r)}}function wB(t,e){if(e&&("object"===yB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xB(t){return(xB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_B(t,e)}(o,t);var e,r,n,i=bB(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gB(this,o),yz(Yk)&&hh(Oh("exception").xyz_method);var a=Sf(t,"XYZ"),s=new Yk(t,r,n);return(e=i.call(this,a,s)).url=a.url,e.name=a.name,e.legend=a.legend,e.minZoom=a.minZoom,e.maxZoom=a.maxZoom,e.tileGridMaxZoom=a.tileGridMaxZoom,e.options=r,e}return e=o,(r=[{key:"type",get:function(){return"XYZ"},set:function(t){yz(t)||bz(t)||"XYZ"===t||hh("El tipo de capa debe ser '".concat("XYZ").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}}])&&vB(e.prototype,r),n&&vB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Lf),SB=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),EB='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',OB=function(t){function e(e){var r,n=e||{};r=void 0!==n.attributions?n.attributions:[EB];var i=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",o=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,cacheSize:n.cacheSize,crossOrigin:i,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:o,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return SB(e,t),e}(Dk);function TB(t){return(TB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kB(t,e){return(kB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function RB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=CB(t);if(e){var i=CB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return LB(this,r)}}function LB(t,e){if(e&&("object"===TB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function CB(t){return(CB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kB(t,e)}(o,t);var e,r,n,i=RB(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return PB(this,o),(e=i.call(this,r,n)).resolutions_=null,e.facadeLayer_=null,e.hasAttributtion=!1,e.haveOSMorMapboxLayer=!1,!1===r.visibility&&(e.visibility=!1),e.zIndex_=$g.Z_INDEX.OSM,e}return e=o,(r=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().forEach((function(t){!t.equals(e)&&t.isVisible()&&t.setVisible(!1)})),bz(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),bz(r)||this.map.setBbox(r)}else bz(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){var e=this;this.map=t,this.fire("added:map"),this.ol3Layer=new Hf(Bz({},this.vendorOptions_,!0)),this.updateSource_(),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(t){t instanceof Su&&(e.hasAttributtion=!0)}),this),this.hasAttributtion||(this.map.getMapImpl().addControl(new Su({className:"ol-attribution ol-unselectable ol-control ol-collapsed m-attribution",collapsible:!0})),this.hasAttributtion=!1),this.map.getMapImpl().updateSize();var r=this.map.getMapImpl().getSize(),n=this.map.getProjection().units;this.resolutions_=Cz(this.facadeLayer_.getMaxExtent(),r,16,n),this.isVisible()&&!this.inRange()&&this.setVisible(!1),null!==this.zIndex_&&this.setZIndex(this.zIndex_),null!==this.resolutions_&&this.setResolutions(this.resolutions_);var i=!1===this.transparent||!0===this.options.animated;this.ol3Layer.set("animated",i),this.map.on("change:proj",(function(){return e.updateSource_()}))}},{key:"setResolutions",value:function(t){this.resolutions_=t,this.updateSource_(t)}},{key:"updateSource_",value:function(t){if(bz(t)&&!bz(this.map)){this.map.getMapImpl().updateSize();var e=this.map.getMapImpl().getSize(),r=this.map.getProjection().units;this.resolutions_=Cz(this.facadeLayer_.getMaxExtent(),e,16,r)}if(!bz(this.ol3Layer)&&bz(this.vendorOptions_.source)){var n=this.facadeLayer_.getMaxExtent(),i=new OB({});this.ol3Layer.setSource(i),this.ol3Layer.setExtent(n)}}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this,e=this.map.getMapImpl();bz(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map.getLayers().forEach((function(e){e instanceof qB&&(t.haveOSMorMapboxLayer=!0)})),this.haveOSMorMapboxLayer||this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(e){e instanceof Su&&t.map.getImpl().getMapImpl().removeControl(e)})),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name),e}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new Hf(e)}return t}}])&&IB(e.prototype,r),n&&IB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Yp);function NB(t){return(NB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function DB(t,e){return(DB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function BB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=GB(t);if(e){var i=GB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return zB(this,r)}}function zB(t,e){if(e&&("object"===NB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function GB(t){return(GB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DB(t,e)}(o,t);var e,r,n,i=BB(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jB(this,o);var a=t;yz(AB)&&hh(Oh("exception").osm_method),bz(a)&&(a="OSM");var s=new AB(a,r,n),u=Sf(a,"OSM");return bz(u.name)&&(u.name="osm"),(e=i.call(this,u,s)).name=u.name,e.legend=u.legend,bz(u.legend)&&(e.legend="OpenStreetMap"),e.transparent=u.transparent,e.options=r,e}return e=o,(r=[{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){bz(t)?this.getImpl().transparent=!1:this.getImpl().transparent=t}},{key:"type",get:function(){return"OSM"},set:function(t){yz(t)||bz(t)||"OSM"===t||hh("El tipo de capa debe ser '".concat("OSM").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}}])&&FB(e.prototype,r),n&&FB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Lf);function UB(t){return(UB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function YB(){return(YB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=ZB(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function ZB(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$B(t)););return t}function HB(t,e){return(HB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$B(t);if(e){var i=$B(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return KB(this,r)}}function KB(t,e){if(e&&("object"===UB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return JB(t)}function JB(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $B(t){return($B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HB(t,e)}(o,t);var e,r,n,i=XB(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};VB(this,o);var n=new e_(t);e=i.call(this);var a=new $g(n.container,JB(e),r);if(e.setImpl(a),bz(t)&&hh(Oh("exception").no_param),yz($g)&&hh(Oh("exception").constructor_impl),e._panels=[],e._plugins=[],e._areasContainer=null,e.popup_=null,e._defaultProj=!0,e.panel={LEFT:null,RIGHT:"null"},e._userZoom=null,e.userCenter_=null,e._finishedInitCenter=!0,e._finishedMaxExtent=!0,e._finishedMapImpl=!1,e._finishedMap=!1,e.centerFeature_=null,e.drawLayer_=null,e.userMaxExtent=null,n.container.classList.add("m-mapea-container"),a.on("completed",(function(){e._finishedMapImpl=!0,e._checkCompleted()})),e.createMainPanels_(),e.featuresHandler_=new gE,e.featuresHandler_.addTo(JB(e)),e.featuresHandler_.activate(),e.drawLayer_=new NM({name:"__draw__"},{displayInLayerSwitcher:!1}),e.drawLayer_.setStyle(new kF(o.DRAWLAYER_STYLE)),e.drawLayer_.setZIndex($g.Z_INDEX.WFS+999),e.addLayers(e.drawLayer_),bz(n.projection)?e.setProjection(M.config.DEFAULT_PROJ,!0):e.setProjection(n.projection),bz(n.bbox)||e.setBbox(n.bbox),bz(n.resolutions)||e.setResolutions(n.resolutions),!bz(n.maxExtent)){var s=bz(n.zoom)&&bz(n.bbox);e.setMaxExtent(n.maxExtent,s)}return bz(n.layers)||e.addLayers(n.layers),bz(n.wms)||e.addWMS(n.wms),bz(n.wmts)||e.addWMTS(n.wmts),bz(n.kml)||e.addKML(n.kml),bz(n.controls)||e.addControls(n.controls),bz(n.layers)&&!_z(n.layers)&&e.addTMS(M.config.tms.base),bz(n.center)||e.setCenter(n.center),bz(n.zoom)?bz(n.bbox)&&e.setZoom(0):e.setZoom(n.zoom),bz(n.minZoom)||e.setMinZoom(n.minZoom),bz(n.maxZoom)||e.setMaxZoom(n.maxZoom),bz(n.label)||e.addLabel(n.label),bz(n.ticket)||e.setTicket(n.ticket),bz(n.bbox)&&bz(n.zoom)&&bz(n.center)&&e.zoomToMaxExtent(!0),bz(n.center)&&bz(n.bbox)&&(e._finishedInitCenter=!1,e.getInitCenter_().then((function(t){bz(e.userCenter_)&&e.setCenter(t),e._finishedInitCenter=!0,e._checkCompleted()}))),e}return e=o,n=[{key:"LAYER_SORT",value:function(t,e){return bz(t)||bz(e)?0:t.getZIndex()-e.getZIndex()}}],(r=[{key:"getLayers",value:function(t){var e=t;yz($g.prototype.getLayers)&&hh(Oh("exception").getlayers_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Sf)),this.getImpl().getLayers(r).sort(o.LAYER_SORT)}},{key:"getRootLayers",value:function(t){return this.getLayers(t).filter((function(t){return bz(t.group)}))}},{key:"getBaseLayers",value:function(){return yz($g.prototype.getBaseLayers)&&hh(Oh("exception").getbaselayers_method),this.getImpl().getBaseLayers().sort(o.LAYER_SORT)}},{key:"getFeatureHandler",value:function(){return this.featuresHandler_}},{key:"addLayers",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addLayers)&&hh(Oh("exception").addlayers_method),_z(r)||(r=[r]);var n=r.map((function(t){var r;if(t instanceof Lf)r=t;else{var n=Sf(t);if(bz(n.type))$b(Oh("dialog").invalid_type_layer);else switch(n.type){case"WFS":r=new PN(t,{style:n.style});break;case"WMS":r=new lg(t);break;case"GeoJSON":r=new pF(n,{style:n.style});break;case"KML":r=new XC(t);break;case"Vector":r=new NM(t);break;case"WMTS":r=new jk(t);break;case"MVT":r=new Mj(t);break;case"MBTiles":r=new dD(n);break;case"XYZ":r=new MB(n);break;case"TMS":r=new uR(n);break;case"OSM":r=new qB(t);break;default:$b(Oh("dialog").invalid_type_layer)}}return r instanceof NM&&!(r instanceof PN)&&e.featuresHandler_.addLayer(r),r.setMap(e),r}));this.getImpl().addLayers(n),this.fire("added:layer",[n])}return this}},{key:"removeLayers",value:function(t){var e=this;if(!bz(t)){yz($g.prototype.removeLayers)&&hh(Oh("exception").removelayers_method);var r=this.getLayers(t);r.forEach((function(t){t instanceof NM&&e.featuresHandler_.removeLayer(t)})),this.getImpl().removeLayers(r)}return this}},{key:"getKML",value:function(t){var e=t;yz($g.prototype.getKML)&&hh(Oh("exception").getkml_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Sf(t,"KML")}))),this.getImpl().getKML(r).sort(o.LAYER_SORT)}},{key:"addKML",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addKML)&&hh(Oh("exception").addkml_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){var r;xz(t)&&t instanceof XC?r=t:t instanceof Lf||(r=new XC(t,t.options)),!0===r.extract&&e.featuresHandler_.addLayer(r),n.push(r)})),this.getImpl().addKML(n),this.fire("added:layer",[n]),this.fire("added:kml",[n])}return this}},{key:"removeKML",value:function(t){var e=this;if(!bz(t)){yz($g.prototype.removeKML)&&hh(Oh("exception").removekml_method);var r=this.getKML(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeKML(r))}return this}},{key:"getWMS",value:function(t){var e=t;yz($g.prototype.getWMS)&&hh(Oh("exception").getwms_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Sf(t,"WMS")}))),this.getImpl().getWMS(r).sort(o.LAYER_SORT)}},{key:"addWMS",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addWMS)&&hh(Oh("exception").addwms_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){var r=t;t instanceof lg||(r=new lg(t,t.options)),r.setMap(e),n.push(r)})),this.getImpl().addWMS(n),this.fire("added:layer",[n]),this.fire("added:wms",[n])}return this}},{key:"removeWMS",value:function(t){if(!bz(t)){yz($g.prototype.removeWMS)&&hh(Oh("exception").removewms_method);var e=this.getWMS(t);e.length>0&&this.getImpl().removeWMS(e)}return this}},{key:"getWFS",value:function(t){var e=t;yz($g.prototype.getWFS)&&hh(Oh("exception").getwfs_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Sf(t,"WFS")}))),this.getImpl().getWFS(r).sort(o.LAYER_SORT)}},{key:"getGeoJSON",value:function(t){var e=t;return yz($g.prototype.getGeoJSON)&&hh(Oh("exception").getgeojson_method),vz(e)?e=[]:_z(e)||(e=[e]),this.getImpl().getGeoJSON(e).sort(o.LAYER_SORT)}},{key:"addWFS",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addWFS)&&hh(Oh("exception").addwfs_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){var r;if(xz(t)&&t instanceof PN)r=t;else if(!(t instanceof Lf))try{r=new PN(t,t.options)}catch(t){throw $b(t.toString()),t}e.featuresHandler_.addLayer(r),n.push(r)})),this.getImpl().addWFS(n),this.fire("added:layer",[n]),this.fire("added:wfs",[n])}return this}},{key:"removeWFS",value:function(t){var e=this;if(!bz(t)){yz($g.prototype.removeWFS)&&hh(Oh("exception").removewfs_method);var r=this.getWFS(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeWFS(r))}return this}},{key:"getWMTS",value:function(t){var e=t;yz($g.prototype.getWMTS)&&hh(Oh("exception").getwmts_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Sf(t,"WMTS")}))),this.getImpl().getWMTS(r).sort(o.LAYER_SORT)}},{key:"addWMTS",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addWMTS)&&hh(Oh("exception").addwmts_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){if(xz(t)&&t instanceof jk)t.setMap(e),n.push(t);else if(!(t instanceof Lf)){var r=new jk(t,t.options);r.setMap(e),n.push(r)}})),this.getImpl().addWMTS(n),this.fire("added:layer",[n]),this.fire("added:wmts",[n])}return this}},{key:"removeWMTS",value:function(t){if(!bz(t)){yz($g.prototype.removeWMTS)&&hh(Oh("exception").removewmts_method);var e=this.getWMTS(t);e.length>0&&this.getImpl().removeWMTS(e)}return this}},{key:"getMVT",value:function(t){var e=t;yz($g.prototype.getMVT)&&hh("La implementación usada no posee el método getWFS"),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Sf(t,"MVT")}))),this.getImpl().getMVT(r).sort(o.LAYER_SORT)}},{key:"removeMVT",value:function(t){var e=this;if(!bz(t)){yz($g.prototype.removeMVT)&&hh("La implementación usada no posee el método removeWFS");var r=this.getMVT(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeMVT(r))}return this}},{key:"addMVT",value:function(t){var e=t;if(!bz(e)){yz($g.prototype.addMVT)&&hh("La implementación usada no posee el método addWFS"),_z(e)||(e=[e]);var r=[];e.forEach((function(t){var e;if(xz(t)&&t instanceof Mj)e=t;else if(!(t instanceof Lf))try{e=new Mj(t,t.options)}catch(t){throw $b(t.toString()),t}r.push(e)})),this.getImpl().addMVT(r),this.fire("added:layer",[r]),this.fire("added:vectortile",[r])}return this}},{key:"getMBTiles",value:function(t){var e=t;yz($g.prototype.getMBTiles)&&hh(Oh("exception").getmbtiles_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Sf)),this.getImpl().getMBTiles(r).sort(o.LAYER_SORT)}},{key:"addMBTiles",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addMBTiles)&&hh(Oh("exception").addmbtiles_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){if(xz(t)&&t instanceof dD)t.setMap(e),n.push(t);else if(!(t instanceof Lf)){var r=new dD(t,t.options);r.setMap(e),n.push(r)}})),this.getImpl().addMBTiles(n),this.fire("added:layer",[n]),this.fire("added:mbtiles",[n])}return this}},{key:"removeMBTiles",value:function(t){if(!bz(t)){yz($g.prototype.removeMBTiles)&&hh(Oh("exception").removembtiles_method);var e=this.getMBTiles(t);e.length>0&&this.getImpl().removeMBTiles(e)}return this}},{key:"getMBTilesVector",value:function(t){var e=t;yz($g.prototype.getMBTilesVector)&&hh(Oh("exception").getmbtiles_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Sf)),this.getImpl().getMBTilesVector(r).sort(o.LAYER_SORT)}},{key:"addMBTilesVector",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addMBTilesVector)&&hh(Oh("exception").addmbtiles_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){xz(t)&&t instanceof mB&&(t.setMap(e),n.push(t))})),this.getImpl().addMBTilesVector(n),this.fire("added:layer",[n]),this.fire("added:mbtilesvector",[n])}return this}},{key:"removeMBTilesVector",value:function(t){if(!bz(t)){yz($g.prototype.removeMBTilesVector)&&hh(Oh("exception").removembtiles_method);var e=this.getMBTilesVector(t);e.length>0&&this.getImpl().removeMBTilesVector(e)}return this}},{key:"getXYZs",value:function(t){var e=t;yz($g.prototype.getXYZs)&&hh(Oh("exception").getxyzs_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Sf)),this.getImpl().getXYZs(r).sort(o.LAYER_SORT)}},{key:"addXYZ",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addXYZ)&&hh(Oh("exception").addxyz_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){if(xz(t)&&t instanceof MB)t.setMap(e),n.push(t);else if(!(t instanceof Lf)){var r=new MB(t,t.options);r.setMap(e),n.push(r)}})),this.getImpl().addXYZ(n),this.fire("added:layer",[n]),this.fire("added:xyz",[n])}return this}},{key:"removeXYZ",value:function(t){if(!bz(t)){yz($g.prototype.removeXYZ)&&hh(Oh("exception").removexyz_method);var e=this.getXYZs(t);e.length>0&&this.getImpl().removeXYZ(e)}return this}},{key:"getTMS",value:function(t){var e=t;yz($g.prototype.getTMS)&&hh(Oh("exception").gettms_method),vz(e)?e=[]:_z(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Sf)),this.getImpl().getTMS(r).sort(o.LAYER_SORT)}},{key:"addTMS",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addTMS)&&hh(Oh("exception").addtms_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){if(xz(t)&&t instanceof uR)t.setMap(e),n.push(t);else if(!(t instanceof Lf)){var r=new uR(t,t.options);r.setMap(e),n.push(r)}})),this.getImpl().addTMS(n),this.fire("added:layer",[n]),this.fire("added:tms",[n])}return this}},{key:"removeTMS",value:function(t){if(!bz(t)){yz($g.prototype.removeTMS)&&hh(Oh("exception").removetms_method);var e=this.getTMS(t);e.length>0&&this.getImpl().removeTMS(e)}return this}},{key:"getControls",value:function(t){var e=t;return yz($g.prototype.getControls)&&hh(Oh("exception").getcontrols_method),vz(e)?e=[]:_z(e)||(e=[e]),this.getImpl().getControls(e)}},{key:"addControls",value:function(t){var e=this,r=t;if(!bz(r)){yz($g.prototype.addControls)&&hh(Oh("exception").addcontrols_method),_z(r)||(r=[r]);var n=[];r.forEach((function(t){var r,i,o=t;if(Mz(o))switch(o=Ez(o)){case pP.NAME:r=new pP,i=e.getPanels("map-info")[0],bz(i)&&(i=new Fj("map-info",{collapsible:!1,className:"m-map-info",position:Ij})).on("added:map",(function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")})),i.addClassName("m-with-scale");break;case"".concat(pP.NAME,"*true"):r=new pP({exactScale:!0}),i=e.getPanels("map-info")[0],bz(i)&&(i=new Fj("map-info",{collapsible:!1,className:"m-map-info",position:Ij})).on("added:map",(function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")})),i.addClassName("m-with-scale");break;case fI.NAME:r=new fI,(i=new Fj(fI.NAME,{collapsible:!1,className:"m-scaleline",position:Pj,tooltip:"Línea de escala"})).on("added:map",(function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")}));break;case Xh.NAME:r=new Xh,i=new Fj(Xh.NAME,{collapsible:!1,className:"m-panzoombar",position:Oj,tooltip:"Nivel de zoom"});break;case kI.NAME:r=new kI,i=new Fj(kI.NAME,{collapsible:!1,className:"m-panzoom",position:Oj});break;case YT.NAME:r=new YT,i=new Fj(YT.NAME,{collapsible:!1,className:"m-location",position:Ij});break;case fT.NAME:r=new fT(!0);break;case CP.NAME:r=new CP,i=new Fj(CP.name,{collapsible:!1,className:"m-rotate",position:Tj});break;case yR.NAME:r=new yR(e),i=new Fj(yR.NAME,{collapsible:!1,position:Tj,className:"m-plugin-baselayer"});break;default:if(/backgroundlayers\*([0-9])+\*(true|false)/.test(o)){var a=o.match(/backgroundlayers\*([0-9])+\*(true|false)/)[1],s="true"===o.match(/backgroundlayers\*([0-9])+\*(true|false)/)[2];r=new yR(e,Number.parseInt(a,10),s),i=new Fj(yR.NAME,{collapsible:!1,position:Tj,className:"m-plugin-baselayer"})}else{var u=Fz([M.config.MAPEA_URL,"/api/actions/controls"]);$b("El control ".concat(o," no está definido. Consulte los controles disponibles <a href='").concat(u,'\' target="_blank">aquí</a>'))}}else o instanceof Ch?r=o:hh('El control "'.concat(o).concat('" no es un control válido.'));bz(i)||i.hasControl(r)?(r.addTo(e),n.push(r)):(i.addControls(r),e.addPanels(i))})),this.getImpl().addControls(n)}return this}},{key:"removeControls",value:function(t){bz(t)&&hh(Oh("exception").remove_control),yz($g.prototype.removeControls)&&hh(Oh("exception").removecontrol_method);var e=this.getControls(t);return(e=[].concat(e)).length>0&&(e.forEach((function(t){bz(t.getPanel())||t.getPanel().removeControls(t)})),this.getImpl().removeControls(e)),this}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return bz(t)&&(t=this.getProjection().getExtent()),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){var r=t.userMaxExtent;if(bz(r)){var n=t.getLayers().filter((function(t){return"__draw__"!==t.name})).map((function(t){return t.calculateMaxExtent()}));Promise.all(n).then((function(n){r=rG(n),bz(r)&&(r=t.getProjection().getExtent()),bz(t.userMaxExtent)||(r=t.userMaxExtent),e(r)}))}else e(r)}))}},{key:"setMaxExtent",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];bz(t)&&this.resetMaxExtent(),yz($g.prototype.setMaxExtent)&&hh(Oh("exception").setmaxextent_method);try{var r=af(t);!_z(r)&&xz(r)&&(r=[r.x.min,r.y.min,r.x.max,r.y.max]),this.userMaxExtent=r,this.getImpl().setMaxExtent(r,e)}catch(t){throw $b(t.toString()),t}return this}},{key:"resetMaxExtent",value:function(){var t=this;return this.userMaxExtent=null,this.calculateMaxExtent().then((function(e){var r=af(e);t.getImpl().setMaxExtent(r,!0)})),this}},{key:"getBbox",value:function(){return yz($g.prototype.getBbox)&&hh(Oh("exception").getbbox_method),this.getImpl().getBbox()}},{key:"setBbox",value:function(t,e){bz(t)&&hh(Oh("exception").no_bbox),yz($g.prototype.setBbox)&&hh(Oh("exception").setbbox_method);try{var r=af(t);this.getImpl().setBbox(r,e)}catch(t){throw $b(Oh("exception").incorrect_format_bbox),t}return this}},{key:"getZoom",value:function(){return yz($g.prototype.getZoom)&&hh(Oh("exception").getzoom_method),this.getImpl().getZoom()}},{key:"getMinZoom",value:function(){return yz($g.prototype.getMinZoom)&&hh(Oh("exception").getzoom_method),this.getImpl().getMinZoom()}},{key:"getMaxZoom",value:function(){return yz($g.prototype.getMaxZoom)&&hh(Oh("exception").getzoom_method),this.getImpl().getMaxZoom()}},{key:"setZoom",value:function(t){bz(t)&&hh(Oh("exception").no_zoom),yz($g.prototype.setZoom)&&hh(Oh("exception").setzoom_method);try{var e=lf(t);this._userZoom=e,this.getImpl().setZoom(e)}catch(t){throw $b(t.toString()),t}return this}},{key:"setMinZoom",value:function(t){bz(t)&&hh(Oh("exception").no_zoom),yz($g.prototype.setMinZoom)&&hh(Oh("exception").setzoom_method);var e=cf(t);return this.minZoom=e,this.getImpl().setMinZoom(e),this}},{key:"setMaxZoom",value:function(t){bz(t)&&hh(Oh("exception").no_zoom),yz($g.prototype.setMaxZoom)&&hh(Oh("exception").setzoom_method);var e=hf(t);return this.userMaxZoom_=e,this.getImpl().setMaxZoom(e),this}},{key:"getCenter",value:function(){return yz($g.prototype.getCenter)&&hh(Oh("exception").getcenter_method),this.getImpl().getCenter()}},{key:"setCenter",value:function(t){var e=this;bz(t)&&hh(Oh("exception").no_center),yz($g.prototype.setCenter)&&hh(Oh("exception").setcenter_method);var r=of(t);return this.getImpl().setCenter(r),this.userCenter_=r,!0===r.draw&&(this.drawLayer_.clear(),this.centerFeature_=new yG("__mapeacenter__",{type:"Feature",geometry:{type:"Point",coordinates:[r.x,r.y]},properties:{vendor:{mapea:{click:function(t){var r=e.getLabel();bz(r)||r.show(e)}}}}}),this.drawFeatures([this.centerFeature_])),this}},{key:"getFeatureCenter",value:function(){return this.centerFeature_}},{key:"removeCenter",value:function(){this.removeFeatures(this.centerFeature_),this.centerFeature_=null,this.zoomToMaxExtent()}},{key:"getResolutions",value:function(){return yz($g.prototype.getResolutions)&&hh(Oh("exception").getresolutions_method),this.getImpl().getResolutions()}},{key:"setResolutions",value:function(t){bz(t)&&hh(Oh("exception").no_resolutions),yz($g.prototype.setResolutions)&&hh(Oh("exception").setresolutions_method);var e=uf(t);return this.getImpl().setResolutions(e),this}},{key:"getScale",value:function(){return yz($g.prototype.getScale)&&hh(Oh("exception").getscale_method),this.getImpl().getScale()}},{key:"getExactScale",value:function(){return yz($g.prototype.getExactScale)&&hh("La implementación usada no posee el método getScale"),this.getImpl().getExactScale()}},{key:"getProjection",value:function(){return yz($g.prototype.getProjection)&&hh(Oh("exception").getprojection_method),this.getImpl().getProjection()}},{key:"setProjection",value:function(t,e){var r=t;bz(r)&&hh(Oh("exception").no_projection),yz($g.prototype.setProjection)&&hh(Oh("exception").setprojection_method);try{var n=this.getProjection();r=sf(r),this.getImpl().setProjection(r),this._defaultProj=this._defaultProj&&!0===e,this.fire("change:proj",[n,r])}catch(t){$b(t.toString()),String(t).indexOf("El formato del parámetro projection no es correcto")>=0&&this.setProjection(M.config.DEFAULT_PROJ,!0)}return this}},{key:"getPlugins",value:function(t){var e=this,r=t;vz(r)?r=[]:_z(r)||(r=[r]);var n=[];return 0===r.length?n=this._plugins:r.forEach((function(t){n=n.concat(e._plugins.filter((function(e){return t===e.name})))})),n}},{key:"addPlugin",value:function(t){return bz(t)&&hh(Oh("exception").no_plugins),yz(t.addTo)&&hh(Oh("exception").no_add_plugin_to_map),this._plugins.push(t),t.addTo(this),this}},{key:"removePlugins",value:function(t){var e=this,r=t;return bz(r)&&hh(Oh("exception").no_plugin_to_remove),_z(r)||(r=[r]),(r=[].concat(r)).length>0&&r.forEach((function(t){t.destroy(),e._plugins=e._plugins.filter((function(e){return t.name!==e.name}))})),this}},{key:"getEnvolvedExtent",value:function(){var t=this;return new Promise((function(e){var r=t.getBaseLayers().find((function(t){return t.isVisible()}));if(bz(r)){var n=t.getLayers().filter((function(t){return"__draw__"!==t.name}));Promise.all(n.map((function(t){return t.calculateMaxExtent()}))).then((function(r){var n=bz(r)?[t.getProjection().getExtent()]:r,i=rG(n);e(i)}))}else r.getMaxExtent(e)}))}},{key:"zoomToMaxExtent",value:function(t){var e=this;return this.calculateMaxExtent().then((function(r){(!0!==t||bz(e._userZoom))&&e.setBbox(r),e._finishedMaxExtent=!0,e._checkCompleted()})),this}},{key:"setTicket",value:function(t){return bz(t)||(-1===M.config.PROXY_POST_URL.indexOf("ticket=")&&M.config("PROXY_POST_URL",Tz(M.config.PROXY_POST_URL,{ticket:t})),-1===M.config.PROXY_URL.indexOf("ticket=")&&M.config("PROXY_URL",Tz(M.config.PROXY_URL,{ticket:t}))),this}},{key:"getInitCenter_",value:function(){var t=this;return new Promise((function(e,r){t.calculateMaxExtent().then((function(t){var r;r=_z(t)?{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}:{x:(t.x.max+t.x.min)/2,y:(t.y.max+t.y.min)/2},e(r)}))}))}},{key:"destroy",value:function(){return yz($g.prototype.destroy)&&hh(Oh("exception").destroy_method),this.getImpl().destroy(),this}},{key:"addLabel",value:function(t,e){var r=this,n=void 0===t.panMapIfOutOfView||t.panMapIfOutOfView;bz(t)&&hh(Oh("exception").no_projection),yz($g.prototype.addLabel)&&hh(Oh("exception").addlabel_method);var i=null,o=null;if(xz(t)?(i=zz(t.text),o=t.coord):(i=zz(t),o=e),o=bz(o)?this.getCenter():of(o),bz(o))this.getInitCenter_().then((function(t){var e=new Jv(i,t,n);r.getImpl().addLabel(e)}));else{var a=new Jv(i,o,n);this.getImpl().addLabel(a)}return this}},{key:"getLabel",value:function(){return this.getImpl().getLabel()}},{key:"removeLabel",value:function(){return this.getImpl().removeLabel()}},{key:"drawPoints",value:function(t){var e=t;bz(e)&&hh(Oh("exception").no_point),_z(e)||(e=[e]);var r=e.map((function(t){var e={type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},properties:{}};return wz(t.click)&&(e.properties.vendor={mapea:{click:t.click}}),new yG(null,e)}));this.drawLayer_.addFeatures(r)}},{key:"drawFeatures",value:function(t){return this.drawLayer_.addFeatures(t),this}},{key:"removeFeatures",value:function(t){return this.drawLayer_.removeFeatures(t),this}},{key:"addPanels",value:function(t){var e=this,r=t;return bz(r)||(_z(r)||(r=[r]),r.forEach((function(t){var r=e._panels.some((function(e){return e.equals(t)}));if(t instanceof Fj&&!r){e._panels.push(t);var n="div.m-area".concat(t.position),i=e._areasContainer.querySelector(n);t.addTo(e,i)}}))),this}},{key:"removePanel",value:function(t){return t.getControls().length>0&&hh(Oh("exception").remove_control_from_panel),t instanceof Fj&&(t.destroy(),this._panels=this._panels.filter((function(e){return!e.equals(t)}))),this}},{key:"getPanels",value:function(t){var e=this,r=t,n=[];return bz(r)?n=this._panels:(_z(r)||(r=[r]),r.forEach((function(t){e._panels.filter((function(e){return e.name===t})).forEach((function(t){bz(t)||n.push(t)}))}))),n}},{key:"createMainPanels_",value:function(){this._areasContainer=document.createElement("div"),this._areasContainer.classList.add("m-areas");var t=document.createElement("div");t.classList.add("m-area"),t.classList.add("m-top"),t.classList.add("m-left");var e=document.createElement("div");e.classList.add("m-area"),e.classList.add("m-top"),e.classList.add("m-right");var r=document.createElement("div");r.classList.add("m-area"),r.classList.add("m-bottom"),r.classList.add("m-left");var n=document.createElement("div");n.classList.add("m-area"),n.classList.add("m-bottom"),n.classList.add("m-right"),this._areasContainer.appendChild(t),this._areasContainer.appendChild(e),this._areasContainer.appendChild(r),this._areasContainer.appendChild(n),this.getContainer().appendChild(this._areasContainer)}},{key:"getContainer",value:function(){return yz($g.prototype.getContainer)&&hh(Oh("exception").getcontainer_method),this.getImpl().getContainer()}},{key:"getMapImpl",value:function(){return yz($g.prototype.getMapImpl)&&hh(Oh("exception").getmapimpl_method),this.getImpl().getMapImpl()}},{key:"getPopup",value:function(){return this.popup_}},{key:"removePopup",value:function(){return yz($g.prototype.removePopup)&&hh(Oh("exception").removepopup_method),bz(this.popup_)||(this.getImpl().removePopup(this.popup_),this.popup_.destroy(),this.popup_=null),this}},{key:"addPopup",value:function(t,e){return bz(t)&&hh(Oh("exception").no_popup),t instanceof Bv||hh(Oh("exception").invalid_popup),bz(this.popup_)||this.removePopup(),this.popup_=t,this.popup_.addTo(this,e),this}},{key:"_checkCompleted",value:function(){this._finishedInitCenter&&this._finishedMaxExtent&&this._finishedMapImpl&&(this._finishedMap=!0,this.fire("completed"))}},{key:"on",value:function(t,e,r){YB($B(o.prototype),"on",this).call(this,t,e,r),"completed"===t&&!0===this._finishedMap&&this.fire("completed")}},{key:"refresh",value:function(){return!yz(this.getImpl().refresh)&&wz(this.getImpl().refresh)&&this.getImpl().refresh(),this.getLayers().forEach((function(t){return t.refresh()})),this}},{key:"defaultProj",get:function(){return this._defaultProj}},{key:"isFinished",value:function(){return this._finishedMap}},{key:"areasContainer",get:function(){return this._areasContainer}}])&&WB(e.prototype,r),n&&WB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h);QB.DRAWLAYER_STYLE={fill:{color:"#009e00"},stroke:{color:"#fcfcfc",width:2},radius:7};var tz=QB,ez=(r(330),r(331),!0);function rz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=null,this.xml=null,this.headers={},this.error=!1,this.code=0}var e,r,n;return e=t,(r=[{key:"parseXmlHttp",value:function(t){var e=this;this.text=t.responseText,this.xml=t.responseXML,this.code=t.status,this.error="OK"!==t.statusText;var r=t.getAllResponseHeaders();(r=r.split("\n")).forEach((function(t){var r=t,n=(r=r.trim()).replace(/^([^:]+):(.+)$/,"$1").trim(),i=r.replace(/^([^:]+):(.+)$/,"$2").trim();""!==n&&(e.headers[n]=i)}))}},{key:"parseProxy",value:function(t){var e=this;if(this.code=t.code,this.error=t.error,200===this.code&&!0!==this.error){this.text=t.content.trim();try{var r=t.headers["Content-Type"];"undefined"!=typeof DOMParser&&/text\/html/i.test(r)?this.xml=(new DOMParser).parseFromString(this.text,"text/html"):/xml/i.test(r)&&(this.xml=(new DOMParser).parseFromString(this.text,"text/xml"))}catch(t){this.xml=null,this.error=!0}}Object.keys(t.headers).forEach((function(r){e.headers[r]=t.headers[r]}))}}])&&rz(e.prototype,r),n&&rz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),iz="GET",oz="POST",az=function(t,e){var r=M.config.PROXY_URL;return e===oz&&(r=M.config.PROXY_POST_URL),r=Tz(r,{url:t})},sz=function(t,e,r){var n=t;bz(e)||(n=Tz(n,e)),ez&&(n=az(n,iz));var i=Pz("mapea_jsonphandler_");n=Tz(n,{callback:i});var o=new Promise((function(t,e){var r=t;new Promise((function(t){window[i]=t})).then((function(t){delete window[i],function(t){var e=document.getElementById(t);e.parentNode.removeChild(e)}(i);var e=new nz;e.parseProxy(t),r(e)}))}));return function(t,e){var r=document.createElement("script");r.type="text/javascript",r.id=e,r.src=t,r.setAttribute("async",""),window.document.body.appendChild(r)}(n,i),o},uz=function(t,e,r,n){var i=t,o=e;return!1!==n&&!0===ez&&(i=az(i,r)),xz(o)&&(o=JSON.stringify(o)),new Promise((function(t,e){var n;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){if(4===n.readyState){var e=new nz;e.parseXmlHttp(n),t(e)}},n.open(r,i,!0),n.send(o)}))},lz=function(t,e,r){return!0===((bz(r)||!1!==r.jsonp)&&!1!==ez)?sz(t,e):uz(t,e,iz,!1)},cz=r(218),hz=.0254000508001016,fz={inches:1,in:1,Inch:1,ft:12,mi:63360,m:39.3701,dd:4374754,yd:36,d:4374754,degrees:4374754,nmi:72913.4252,Meter:1/hz,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.0254/hz,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:.91439523/hz,IndianYd62:.9143988/hz,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:.3047996/hz,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:1852/hz,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:.1/hz,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:1.0000135965/hz,CaGrid:.999738/hz,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:3.778266898/hz,CapeFoot:.3047972615/hz,Brealey:375/hz,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500,mm:1/hz/1e3,cm:.3937,dm:1/hz*100,km:39370,kmi:72913.4252,fath:71.999856,ch:791.998416,link:7.91998416,"us-in":1,"us-ft":12,"us-yd":36,"us-ch":792.0000000000001,"us-mi":63360,"ind-yd":.91439523/hz,"ind-ft":11.9999134017,"ind-ch":791.9942845122};function pz(t){return function(t){if(Array.isArray(t))return dz(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return dz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dz(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mz(t){return(mz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var yz=function(t){return void 0===t},gz=function(t){var e=!1;return null===t||yz(t)||(e="boolean"==typeof t),e},vz=function(t){var e=!1;return gz(t)||"number"==typeof t||(yz(t)?e=!0:t?null===t&&(e=!0):e=!0),e},_z=function(t){var e=!1;return vz(t)||(e=Object.prototype.toString.call(t)===Object.prototype.toString.call([])),e},bz=function t(e){var r=!1;return vz(e)?r=!0:_z(e)?(r=!0,e.length>0&&(r=!e.some((function(e){return!t(e)})))):"string"==typeof e&&0===e.trim().length&&(r=!0),r},wz=function(t){var e=!1;return vz(t)||(e="function"==typeof t&&!yz(t.call)),e},xz=function(t){var e=!1;return vz(t)||(e="object"===mz(t)&&!yz(t.toString)),e},Mz=function(t){var e=!1;return vz(t)||(e="string"==typeof t),e},Sz=function(t){var e=!1;return!vz(t)&&Mz(t)&&(e=/(https?:\/\/[^*]+)/.test(t)),e},Ez=function(t,e){var r=t;return!bz(r)&&Mz(r)&&(r=r.trim(),r=e?r.toUpperCase():r.toLowerCase()),r},Oz=function(t,e){var r=null,n=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=e,o=i.indexOf("?");-1!==o&&(i=i.substring(o),null!==(r=new RegExp("[\\?&]".concat(n,"=([^&#]*)")).exec(i))&&(r=decodeURIComponent(r[1].replace(/\+/g," "))));return r},Tz=function(t,e){var r=t;-1===r.indexOf("?")?r+="?":"?"!==r.charAt(r.length-1)&&(r+="&");var n="";xz(e)?(Object.keys(e).forEach((function(t){var r=e[t];n+=t,n+="=",n+=encodeURIComponent(r),n+="&"})),n=n.substring(0,n.length-1)):Mz(e)&&(n=e);return r+=n},Pz=function(t,e){var r="";return bz(t)||(r=t),r=r.concat(Math.random()).replace(/0\./,""),bz(e)||(r=r.concat(e)),r},Iz=function(t,e){var r=t;return r=Tz(r,"request=GetCapabilities"),r=Tz(r,"service=WMS"),r=Tz(r,{version:e})},kz=function(t,e){var r=t;return r=Tz(r,"request=GetCapabilities"),r=Tz(r,"service=WMTS"),bz(e)||(r=Tz(r,{version:e})),r},Rz=function(t,e,r){var n=t,i=e,o=new Array(r);n=Number.parseFloat(n),i=Number.parseFloat(i);var a=2;Number.isNaN(n)||(a=Math.pow(i/n,1/(r-1)));for(var s=0;s<r;s+=1)o[s]=i/Math.pow(a,s);return o.sort((function(t,e){return e-t})),o},Lz=function(t,e){var r,n=e;bz(t)||(vz(n)&&(n="degrees"),r=1/((t>1?1/t:t)*fz[n]*72));return r},Cz=function(t,e,r,n){var i=t,o=null,a=null;_z(i)?(o=i[2]-i[0],a=i[3]-i[1]):xz(i)?(o=i.x.max-i.x.min,a=i.y.max-i.y.min):Mz(i)&&(o=(i=i.split(","))[2]-i[0],a=i[3]-i[1]);var s=o/e[0],u=a/e[1],l=Math.max(s,u);return Rz(null,l,r)},Az=function(t,e){var r=e;return bz(r)&&(r="degrees"),t*fz[r]*72},Nz=function(t){var e;if(!bz(t)){var r=document.createElement("div");r.innerHTML=t,e=r.children[0]}return e},jz=function(t){var e=t;if(e&&(e=e.trim()).length>0){var r=e.indexOf(":");-1!==r&&(r+=1,e=e.substring(r,e.length))}return e},Fz=function(t){var e=null;if(!bz(t)){e=(e=t[0]).replace(/\/+\s*$/,"");for(var r=1,n=t.length;r<n;r+=1){var i=t[r];0!==i.indexOf("/")&&(e=e.concat("/")),e=e.concat(i)}}return e},Dz=function(t,e,r){var n=Object(t),i=parseInt(n.length,10)||0;if(0===i)return!1;var o,a,s=parseInt(r,10)||0;for(s>=0?o=s:(o=i+s)<0&&(o=0);o<i;){if(e===(a=n[o])||Object.equals(e,a))return!0;o+=1}return!1},Bz=function t(e,r,n){var i=e;return Object.keys(r).forEach((function(e){yz(i[e])?i[e]=r[e]:Object.getPrototypeOf(i[e])===Object.prototype?t(i[e],r[e],n):!0===n&&(i[e]=r[e])})),i},zz=function(t){return t.replace(/(<\s*script[^>]*>)+[^<]*(<\s*\/\s*script[^>]*>)+/gi,"").replace(/(('|')\s*\+\s*)?\s*eval\s*\(.*\)\s*(\+\s*('|'))?/gi,"")},Gz=function(t){var e=t;if("ontouchstart"in document){var r=0;e.addEventListener("touchstart",(function(t){r=e.scrollTop+t.touches[0].pageY})),e.addEventListener("touchmove",(function(t){e.scrollTop=r-t.touches[0].pageY}))}},qz=function(t,e){var r=t.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1"),n=e.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1");return r.toLowerCase()===n.toLowerCase()},Uz=function(t){var e=["Geometry".toLowerCase(),"GeometryPropertyType".toLowerCase(),"Point".toLowerCase(),"LineString".toLowerCase(),"LinearRing".toLowerCase(),"Polygon".toLowerCase(),"MultiPoint".toLowerCase(),"MultiLineString".toLowerCase(),"MultiPolygon".toLowerCase(),"GeometryCollection".toLowerCase(),"Circle".toLowerCase(),"pointpropertytype","polygonpropertytype","linestringpropertytype","geometrypropertytype","multisurfacepropertytype","multilinestringpropertytype","surfacepropertytype","geometrypropertytype","geometryarraypropertytype","multigeometrypropertytype","multipolygonpropertytype","multipointpropertytype","abstractgeometricaggregatetype","pointarraypropertytype","curvearraypropertytype","solidpropertytype","solidarraypropertytype"],r=t.toLowerCase();return-1!==e.indexOf(r)},Vz=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},Wz=function(t){var e=t;!Mz(t)&&t.outerHTML&&(e=t.outerHTML);var r=document.createElement("DIV");return r.innerHTML=e,r.textContent||r.innerText||""},Yz=function(t){var e;if(Mz(t)){var r=xw()(t).hex();r=r.replace(/^#/,"0x"),e=xw()(16777215-r).hex()}return e},Zz=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;return bz(r)||Object.keys(r).forEach((function(e){var i=r[e];_z(i)?i=pz(i):xz(i)&&(i=t({},i)),bz(n[e])?n[e]=i:xz(n[e])&&t(n[e],i)})),n},Hz=function(t,e){var r=pz(t);if(t.length<e){for(var n=(t[0]+t[1])/(e-1),i=1;i<e-1;i+=1)r[i]=n*i;r=[].concat(pz(r),[t[1]])}return r},Xz=function(t,e){return t.ORDER-e.ORDER},Kz=function(t){var e=new Image;return new Promise((function(r,n){e.onload=function(){return r(e)},e.src=t}))},Jz=function t(e){var r;return _z(e)?r=(r=pz(e)).map(t):xz(e)?(r=Zz({},e),Object.keys(r).forEach((function(e){var n=r[e];wz(n)?r[e]="{{f}}".concat(n.toString()):xz(n)&&(r[e]=t(n))}))):r=wz(e)?"{{f}}".concat(e.toString()):e,r},$z=function t(e){var r=e;if(/^\{\{f\}\}/.test(e)){var n=e.replace(/^\{\{f\}\}(.+)/,"$1");r=new Function("f","return ".concat(n))()}else Object.keys(r).forEach((function(e){var n=r[e];if(/^\{\{f\}\}/.test(n)){var i=n.replace(/^\{\{f\}\}(.+)/,"$1");r[e]=new Function("f","return ".concat(i))()}else xz(n)&&t(n)}));return r},Qz=function t(e){var r=!1;return Array.isArray(e)||"object"!==mz(e)||bz(e)?("function"==typeof e||"string"==typeof e&&/\{\{.*\}\}/.test(e))&&(r=!0):r=Object.values(e).some((function(e){return t(e)})),r},tG=cz,eG=function(t){return tG},rG=function(t){var e=null;return bz(t)||(e=[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],t.forEach((function(t){bz(t)||(e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[2]),e[3]=Math.max(e[3],t[3]))}))),e},nG=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i="",o=t.length;for(e=2;e<o;e+=3)i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4|t[e-1]>>4],i+=n[(15&t[e-1])<<2|t[e]>>6],i+=n[63&t[e]];return e===o+1&&(i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4],i+="=="),e===o&&(i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4|t[e-1]>>4],i+=n[(15&t[e-1])<<2],i+="="),"data:".concat(r,";base64,").concat(i)},iG=function t(e){return new Promise((function(r,n){var i=new Uint8Array;e instanceof ArrayBuffer?(i=new Uint8Array(e),r(i)):e instanceof File?e.arrayBuffer().then((function(t){i=new Uint8Array(t),r(i)})):e instanceof Response?r(e.arrayBuffer().then(t)):e instanceof Uint8Array?r(e):r(i)}))},oG=function(t){return new Promise((function(e,r){var n=new window.FileReader;n.onload=function(){var t=JSON.parse(n.result);e(t)};try{n.readAsText(t)}catch(t){e(null)}}))},aG=function(t,e){return xw.a.scale(t).colors(e)},sG=function(t,e){return lz(t).then((function(t){var r="";try{var n=e.icon.tag?e.icon.tag:["path","circle","ellipse","line","polygon","polyline","rect","foreignObject"],i=Array.from(t.xml.getElementsByTagName("svg"))[0],o=e.icon.stroke.width||1,a=i.getAttribute("width").replace(/[^0-9.]/g,""),s=i.getAttribute("height").replace(/[^0-9.]/g,"");e.icon.stroke&&o&&i.setAttribute("viewBox","".concat(-o," ").concat(-o," \n          ").concat(Math.ceil(Number(a))+2*o," ").concat(Number(s)+2*o)),n.forEach((function(r){Array.from(t.xml.getElementsByTagName(r)).forEach((function(t){var r;(r=t.classList).remove.apply(r,pz(t.classList)),e.icon.fill&&e.icon.fill.color&&t.setAttribute("fill",e.icon.fill.color),e.icon.fill&&e.icon.fill.opacity&&t.setAttribute("fill-opacity",e.icon.fill.opacity),e.icon.stroke&&e.icon.stroke.color&&t.setAttribute("stroke",e.icon.stroke.color),e.icon.stroke&&o&&t.setAttribute("stroke-width",o)}))})),Array.from(t.xml.getElementsByTagName("g")).forEach((function(t){e.icon.stroke&&o&&t.removeAttribute("clip-path")})),r="data:image/svg+xml,".concat(encodeURIComponent((new XMLSerializer).serializeToString(t.xml,"text/xml")))}catch(t){}return r}))};function uG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var lG=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=r;this.facadeFeature_=null,this.formatter_=new fA,bz(r)?this.olFeature_=new lp:(bz(r.type)&&(i.type="Feature"),this.olFeature_=this.formatter_.readFeature(i)),bz(e)?bz(this.olFeature_.getId())&&this.olFeature_.setId(Pz("mapea_feature_")):this.olFeature_.setId(e)}var e,r,n;return e=t,n=[{key:"olFeature2Facade",value:function(t,e){var r=null;return bz(t)||(r=new yG).getImpl().setOLFeature(t,e),r}},{key:"olRenderFeature2Facade",value:function(e,r,n){var i=Dp.olRenderFeature2olFeature(e,r,n);return t.olFeature2Facade(i)}},{key:"facade2OLFeature",value:function(t){return t.getImpl().getOLFeature()}},{key:"getGeometry",value:function(t){var e,r=t.geometry.type;return"circle"===r?e=new kp(t.geometry.coordinates):"geometry"===r?e=new Ua(t.geometry.coordinates):"linestring"===r?e=new vp(t.geometry.coordinates):"multilinestring"===r?e=new xp(t.geometry.coordinates):"multipoint"===r?e=new bp(t.geometry.coordinates):"multipolygon"===r?e=new Sp(t.geometry.coordinates):"point"===r?e=new ds(t.geometry.coordinates):"polygon"===r&&(e=new ks(t.geometry.coordinates)),e}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"setOLFeature",value:function(t,e){bz(t)||(this.olFeature_=t,!1!==e&&bz(this.olFeature_.getId())&&this.olFeature_.setId(Pz("mapea_feature_")))}},{key:"getAttributes",value:function(){var t=this.olFeature_.getProperties(),e=t.geometry;return!bz(e)&&e instanceof Ua&&delete t.geometry,t}},{key:"getId",value:function(){return this.olFeature_.getId()}},{key:"setId",value:function(t){this.olFeature_.setId(t)}},{key:"setAttributes",value:function(t){this.olFeature_.setProperties(t)}},{key:"getAttribute",value:function(t){return this.olFeature_.get(t)}},{key:"setAttribute",value:function(t,e){return this.olFeature_.set(t,e)}},{key:"setGeometry",value:function(t){var e=t.type.toLowerCase();"circle"===e?this.olFeature_.setGeometry(new kp(t.coordinates)):"geometry"===e?this.olFeature_.setGeometry(new Ua(t.coordinates)):"linestring"===e?this.olFeature_.setGeometry(new vp(t.coordinates)):"multilinestring"===e?this.olFeature_.setGeometry(new xp(t.coordinates)):"multipoint"===e?this.olFeature_.setGeometry(new bp(t.coordinates)):"multipolygon"===e?this.olFeature_.setGeometry(new Sp(t.coordinates)):"point"===e?this.olFeature_.setGeometry(new ds(t.coordinates)):"polygon"===e&&this.olFeature_.setGeometry(new ks(t.coordinates))}},{key:"setFacadeObj",value:function(t){this.facadeFeature_=t}},{key:"getCentroid",value:function(){var e,r=this.getOLFeature().getGeometry(),n=Dp.getCentroid(r);if(!bz(n)){var i=new ds;i.setCoordinates(n),e=new lp({geometry:i,name:"centroid"})}return e=e||t.olFeature2Facade(e)}},{key:"clearStyle",value:function(){this.olFeature_.setStyle(null)}}])&&uG(e.prototype,r),n&&uG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function cG(t){return(cG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fG(t,e){return(fG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mG(t);if(e){var i=mG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return dG(this,r)}}function dG(t,e){if(e&&("object"===cG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mG(t){return(mG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fG(t,e)}(o,t);var e,r,n,i=pG(o);function o(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var a=new lG(t,e,r);return(n=i.call(this,a)).style_=null,n.formatGeoJSON_=new bA,n.setStyle(r),n}return e=o,(r=[{key:"setId",value:function(t){this.getImpl().setId(t)}},{key:"getId",value:function(){return this.getImpl().getId()}},{key:"getGeometry",value:function(){return this.getGeoJSON().geometry}},{key:"setGeometry",value:function(t){this.getImpl().setGeometry(t)}},{key:"getGeoJSON",value:function(){return this.formatGeoJSON_.write(this)[0]}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"setAttributes",value:function(t){"object"===cG(t)?this.getImpl().setAttributes(t):Jb(Oh("feature").incorrect_attributes)}},{key:"getAttribute",value:function(t){var e;if(e=this.getImpl().getAttribute(t),bz(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return bz(t)||(r=t instanceof o?t.getAttribute(e):t[e]),r}),this))}return e}},{key:"setAttribute",value:function(t,e){return this.getImpl().setAttribute(t,e)}},{key:"setStyle",value:function(t){!bz(t)&&t instanceof tM?(this.style_=t,this.style_.applyToFeature(this)):bz(t)&&(this.style_=null,this.getImpl().clearStyle()),this.fire("change:style",[t,this])}},{key:"equals",value:function(t){return this.getId()===t.getId()}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null)}},{key:"getCentroid",value:function(){var t=this.getId(),e=this.getAttributes(),r=new kF({stroke:{color:"#67af13",width:2},radius:8,fill:{color:"#67af13",opacity:.2}}),n=this.getImpl().getCentroid();return bz(n)||(n.id("".concat(t," centroid}")),n.attributes(e),n.style=r),n}}])&&hG(e.prototype,r),n&&hG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h);function gG(t){return(gG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _G(t,e){return(_G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xG(t);if(e){var i=xG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wG(this,r)}}function wG(t,e){if(e&&("object"===gG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xG(t){return(xG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_G(t,e)}(o,t);var e,r,n,i=bG(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,Pz("_mapea_cluster_"))).setAttributes(e),r.setAttribute("features",t),r}return e=o,r&&vG(e.prototype,r),n&&vG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(yG);function SG(t){return(SG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function TG(t,e){return(TG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function PG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=kG(t);if(e){var i=kG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return IG(this,r)}}function IG(t,e){if(e&&("object"===SG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function kG(t){return(kG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var RG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TG(t,e)}(o,t);var e,r,n,i=PG(o);function o(){return EG(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"addTo",value:function(t){var e=this;bz(t)&&hh(Oh("exception").no_map);var r=this.getImpl();yz(r.addTo)&&hh(Oh("exception").addto_method);var n=this.createView(t);n instanceof Promise?n.then((function(n){r.addTo(t,n),e.fire("added:map")})):(r.addTo(t,n),this.fire("added:map"))}},{key:"createView",value:function(t){}},{key:"getControls",value:function(){}}])&&OG(e.prototype,r),n&&OG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h);function LG(t){return(LG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NG(t,e){return(NG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=DG(t);if(e){var i=DG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return FG(this,r)}}function FG(t,e){if(e&&("object"===LG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function DG(t){return(DG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var BG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NG(t,e)}(o,t);var e,r,n,i=jG(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return CG(this,o),(e=i.call(this)).filterFunction_=t,e.cqlFilter_="",bz(r.cqlFilter)||(e.cqlFilter_=r.cqlFilter),e}return e=o,(r=[{key:"setFunction",value:function(t){this.filterFunction_=t}},{key:"getFunctionFilter",value:function(){return this.filterFunction_}},{key:"execute",value:function(t){return t.filter(this.filterFunction_)}},{key:"toCQL",value:function(){return this.cqlFilter_}}])&&AG(e.prototype,r),n&&AG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ew);function zG(t){return(zG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qG(t,e){return(qG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function UG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=WG(t);if(e){var i=WG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return VG(this,r)}}function VG(t,e){if(e&&("object"===zG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function WG(t){return(WG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qG(t,e)}(o,t);var e,r,n,i=UG(o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);return i.call(this,(function(e,r){var n=null;return bz(e)||(n=e.getGeometry()),t(n,r)}),e)}return e=o,r&&GG(e.prototype,r),n&&GG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(BG),ZG=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function HG(t){return"string"==typeof t?t:""}var XG=function(t){function e(){return t.call(this)||this}return ZG(e,t),e.prototype.getType=function(){return mg},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(HG(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return _r()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(HG(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return _r()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(HG(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return _r()},e.prototype.readProjection=function(t){return this.readProjectionFromText(HG(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return _r()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return _r()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return _r()},e}(cg),KG=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),JG={POINT:ds,LINESTRING:vp,POLYGON:ks,MULTIPOINT:bp,MULTILINESTRING:xp,MULTIPOLYGON:Sp},$G=1,QG=2,tq=3,eq=4,rq=5,nq=6,iq={};for(var oq in dr)iq[oq]=dr[oq].toUpperCase();var aq=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),r=this.index_,n=e;if("("==e)t=QG;else if(","==e)t=rq;else if(")"==e)t=tq;else if(this.isNumeric_(e)||"-"==e)t=eq,n=this.readNumber_();else if(this.isAlpha_(e))t=$G,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=nq}return{position:r,value:n,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,r=!1,n=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),sq=function(){function t(t){this.lexer_=t,this.token_,this.layout_=Ea}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=Ea,e=this.token_;if(this.isTokenType($G)){var r=e.value;"Z"===r?t=Oa:"M"===r?t=Ta:"ZM"===r&&(t=Pa),t!==Ea&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(QG)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(rq));if(this.match(tq))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(QG)){var t=this.parsePoint_();if(this.match(tq))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(QG)){var t=this.parsePointList_();if(this.match(tq))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(QG)){var t=this.parseLineStringTextList_();if(this.match(tq))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){if(this.match(QG)){var t=void 0;if(t=this.token_.type==QG?this.parsePointTextList_():this.parsePointList_(),this.match(tq))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(QG)){var t=this.parseLineStringTextList_();if(this.match(tq))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(QG)){var t=this.parsePolygonTextList_();if(this.match(tq))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,r=0;r<e;++r){var n=this.token_;if(!this.match(eq))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(rq);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(rq);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(rq);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(rq);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType($G)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match($G)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var r=this.parseGeometryCollectionText_();return new Tp(r)}var n=JG[e];if(!n)throw new Error("Invalid geometry type: "+e);var i=void 0;switch(e){case"POINT":i=this.parsePointText_();break;case"LINESTRING":i=this.parseLineStringText_();break;case"POLYGON":i=this.parsePolygonText_();break;case"MULTIPOINT":i=this.parseMultiPointText_();break;case"MULTILINESTRING":i=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":i=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return i||(i=n===JG.POINT?[NaN,NaN]:[]),new n(i,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),uq=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,r}return KG(e,t),e.prototype.parse_=function(t){var e=new aq(t);return new sq(e).parse()},e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);if(r){var n=new lp;return n.setGeometry(r),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var r=[],n=this.readGeometryFromText(t,e),i=[],o=0,a=(r=this.splitCollection_&&n.getType()==dr.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;o<a;++o){var s=new lp;s.setGeometry(r[o]),i.push(s)}return i},e.prototype.readGeometryFromText=function(t,e){var r=this.parse_(t);return r?hg(r,!1,e):null},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(t[n].getGeometry());var o=new Tp(r);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return pq(hg(t,!0,e))},e}(XG);function lq(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function cq(t){for(var e=t.getCoordinates(),r=[],n=0,i=e.length;n<i;++n)r.push(e[n].join(" "));return r.join(",")}function hq(t){for(var e=[],r=t.getLinearRings(),n=0,i=r.length;n<i;++n)e.push("("+cq(r[n])+")");return e.join(",")}var fq={Point:lq,LineString:cq,Polygon:hq,MultiPoint:function(t){for(var e=[],r=t.getPoints(),n=0,i=r.length;n<i;++n)e.push("("+lq(r[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],r=t.getLineStrings(),n=0,i=r.length;n<i;++n)e.push("("+cq(r[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],r=t.getPolygons(),n=0,i=r.length;n<i;++n)e.push("("+hq(r[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],r=t.getGeometries(),n=0,i=r.length;n<i;++n)e.push(pq(r[n]));return e.join(",")}};function pq(t){var e=t.getType(),r=(0,fq[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(t){var e=t.getLayout(),r="";return e!==Oa&&e!==Pa||(r+="Z"),e!==Ta&&e!==Pa||(r+="M"),r}(t);n.length>0&&(e+=" "+n)}return 0===r.length?e+" EMPTY":e+"("+r+")"}var dq=uq;function mq(t){return(mq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gq(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yq(Object(r),!0).forEach((function(e){vq(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vq(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wq(t,e){return(wq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Sq(t);if(e){var i=Sq(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Mq(this,r)}}function Mq(t,e){if(e&&("object"===mq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sq(t){return(Sq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Eq=function(t){return{dataProjection:Un(t.dataProjection),featureProjection:Un(t.featureProjection)}},Oq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wq(t,e)}(o,t);var e,r,n,i=xq(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _q(this,o),(t=i.call(this,e)).gjFormat_=new fA,t.formatter_=new dq(gq({splitCollection:!0},e)),t}return e=o,(r=[{key:"getFormatter",value:function(){return this.formatter_}},{key:"read",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Eq(e),n=e.id,i=this.formatter_.readFeatureFromText(t,r),o=lG.olFeature2Facade(i);return null!=n&&o.setId(n),o}},{key:"readCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Eq(e),n=e.ids,i=this.formatter_.readFeaturesFromText(t,r),o=i.map((function(t){return lG.olFeature2Facade(t)}));return null!=n&&n.length===o.length&&o.forEach((function(t,e){return t.setId(n[e])})),o}},{key:"write",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Eq(e),n=lG.facade2OLFeature(t),i=this.formatter_.writeFeatureText(n,r);return i}},{key:"writeFeature",value:function(t){var e=this.gjFormat_.readGeometryFromObject(t);if("point"===e.getType().toLowerCase()){var r=e.getCoordinates();e.setCoordinates([r[0],r[1]])}return this.formatter_.writeGeometryText(e)}},{key:"writeCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Eq(e),n=t.map((function(t){return lG.facade2OLFeature(t)})),i=this.formatter_.writeFeaturesText(n,r);return i}}])&&bq(e.prototype,r),n&&bq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Kc);function Tq(t){return(Tq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Iq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kq(t,e){return(kq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Cq(t);if(e){var i=Cq(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Lq(this,r)}}function Lq(t,e){if(e&&("object"===Tq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Cq(t){return(Cq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Aq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kq(t,e)}(o,t);var e,r,n,i=Rq(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pq(this,o);var r=new Oq(e);return t=i.call(this,r),yz(Oq)&&hh(Oh("exception").wkt_method),t}return e=o,(r=[{key:"read",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getImpl().read(t,e);return r}},{key:"readCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getImpl().readCollection(t,e);return r}},{key:"write",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getImpl().write(t,e);return r}},{key:"writeFeature",value:function(t){return this.getImpl().writeFeature(t)}},{key:"writeCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getImpl().writeCollection(t,e);return r}}])&&Iq(e.prototype,r),n&&Iq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_h);function Nq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fq=function(){function t(){Nq(this,t),this.parser=new gk,this.capabilities=null}var e,r,n;return e=t,(r=[{key:"read",value:function(t){return this.capabilities=this.parser.read(t),this}},{key:"getMatrixSet",value:function(t,e){for(var r,n=0;n<this.capabilities.Contents.Layer.length&&void 0===r;n+=1){var i=this.capabilities.Contents.Layer[n];i.Identifier===t&&(bz(e)||(r=i.TileMatrixSetLink.filter((function(t){return t.contains(e)}))[0]),void 0===r&&(r=i.TileMatrixSetLink[0].TileMatrixSet))}return r}},{key:"getMatrixIds",value:function(t,e){var r=[],n=this.getMatrixSet(t,e),i=this.capabilities.Contents.TileMatrixSet.filter((function(t){return t.Identifier===n}))[0];return null!=i&&i.length>0&&(r=i.TileMatrix.map((function(t){return t.Identifier}))),r}},{key:"getFormat",value:function(t){var e,r=this.capabilities.Contents.Layer.filter((function(e){return e.Identifier===t}))[0];return null!=r&&(e=r.Format[0]),e}},{key:"getOptionsFromCapabilities",value:function(t,e){return NI(this.capabilities,{layer:t,matrixSet:e})}}])&&jq(e.prototype,r),n&&jq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dq(t){return(Dq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zq(t,e){return(zq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Gq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Uq(t);if(e){var i=Uq(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qq(this,r)}}function qq(t,e){if(e&&("object"===Dq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Uq(t){return(Uq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vq,Wq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zq(t,e)}(o,t);var e,r,n,i=Gq(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).geojsonFormatter_=new fA,t.name="drawLayer",t.selectedFeatures_=[],t}return e=o,(r=[{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),this.ol3Layer=new Ob({source:new Db({}),style:new S_({fill:new y_({color:"rgba(0, 158, 0, 0.1)"}),stroke:new g_({color:"#fcfcfc",width:2}),image:new m_({radius:7,fill:new y_({color:"#009E00"}),stroke:new g_({color:"#fcfcfc",width:2})})}),zIndex:$g.Z_INDEX.WFS+999}),!1!==this.options.visibility&&this.setVisible(this.inRange()),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(t){this.selectedFeatures_=t,wz(this.selectedFeatures_[0].click)&&this.selectedFeatures_[0].click()}},{key:"unselectFeatures",value:function(){this.selectedFeatures_.length>0&&(this.selectedFeatures_.length=0,this.map.removePopup())}},{key:"drawPoints",value:function(t){var e=t;bz(e)&&hh(Oh("exception").no_point),_z(e)||(e=[e]);var r=this.pointsToGeoJSON_(e);this.drawGeoJSON(r)}},{key:"drawGeoJSON",value:function(t){var e=this,r=t;bz(r)&&hh(Oh("exception").no_geojson),_z(r)||(r=[r]);var n=Un(this.map.getProjection().code),i=[];r.forEach((function(t){var r=e.geojsonFormatter_.readFeatures(t,{dataProjection:n});i=i.concat(r)})),this.ol3Layer.getSource().addFeatures(i)}},{key:"drawFeatures",value:function(t){var e=t;bz(e)||(_z(e)||(e=[e]),this.ol3Layer.getSource().addFeatures(e))}},{key:"removeFeatures",value:function(t){var e=t;if(!bz(e)){_z(e)||(e=[e]);var r=this.ol3Layer.getSource();e.forEach((function(t){try{r.removeFeature(t)}catch(t){throw t}}))}}},{key:"getPoints",value:function(t){var e=[],r=this.ol3Layer.getSource();return e=bz(t)?r.getFeatures():r.getFeaturesAtCoordinate(t),this.featuresToPoints_(e)}},{key:"destroy",value:function(){var t=this.map.getMapImpl();bz(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.options=null,this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=e&&this.name===t.name),e}},{key:"pointsToGeoJSON_",value:function(t){var e=this,r=Un(this.map.getProjection().code);return t.map((function(t){var n=t.data,i=new ds([t.x,t.y]);return{type:"Feature",geometry:e.geojsonFormatter_.writeGeometryObject(i,{dataProjection:r}),properties:n,click:t.click,showPopup:t.showPopup}}))}},{key:"featuresToPoints_",value:function(t){return[]}}])&&Bq(e.prototype,r),n&&Bq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Yp),Yq=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Zq(t,e){for(var r=Yq.length,n=0;n<r;++n)try{var i=t.getContext(Yq[n],e);if(i)return i}catch(t){}return null}var Hq=35044;function Xq(t){switch(t){case 34962:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}var Kq=function(){function t(t,e){this.array=null,this.type=t,Er(34962===t||34963===t,62),this.usage=void 0!==e?e:Hq}return t.prototype.ofSize=function(t){this.array=new(Xq(this.type))(t)},t.prototype.fromArray=function(t){this.array=Xq(this.type).from(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(Xq(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),Jq="webglcontextlost",$q="webglcontextrestored";function Qq(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var tU=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,n,r[0],r[1],0,i,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e){var r=this.getGL(),n=t.size;r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,n[0],n[1]),r.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(t),r.drawArrays(r.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(i.location,e)}))},t}(),eU=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rU="u_projectionMatrix",nU="u_offsetScaleMatrix",iU="u_offsetRotateMatrix",oU="u_time",aU="u_zoom",sU="u_resolution",uU={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function lU(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*cU(n.type)}return e}function cU(t){switch(t){case uU.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case uU.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case uU.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case uU.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var hU=function(t){function e(e){var r=t.call(this)||this,n=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvas_=document.createElement("canvas"),r.canvas_.style.position="absolute",r.canvas_.style.left="0",r.gl_=Zq(r.canvas_);var i=r.getGL();if(r.bufferCache_={},r.currentProgram_=null,Er(vi(function(){if(!Vq){var t=Zq(document.createElement("canvas"));t&&(Vq=t.getSupportedExtensions())}return Vq}(),"OES_element_index_uint"),63),i.getExtension("OES_element_index_uint"),r.canvas_.addEventListener(Jq,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener($q,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=[1,0,0,1,0,0],r.offsetScaleMatrix_=[1,0,0,1,0,0],r.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],n.uniforms)for(var o in n.uniforms)r.uniforms_.push({name:o,value:n.uniforms[o]});return r.postProcessPasses_=n.postProcesses?n.postProcesses.map((function(t){return new tU({webGlContext:i,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new tU({webGlContext:i})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return eU(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),r=wr(t),n=this.bufferCache_[r];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[r]=n);e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=wr(t),n=this.bufferCache_[r];e.isContextLost()||e.deleteBuffer(n.buffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(Jq,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener($q,this.boundHandleWebGLContextRestored_)},e.prototype.prepareDraw=function(t){var e=this.getGL(),r=this.getCanvas(),n=t.size,i=t.pixelRatio;r.width=n[0]*i,r.height=n[1]*i,r.style.width=n[0]+"px",r.style.height=n[1]+"px",e.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);e.bindTexture(e.TEXTURE_2D,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),i=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL(),n=r.UNSIGNED_INT,i=e-t,o=4*t;r.drawElements(r.TRIANGLES,i,n,o)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.postProcessPasses_.length;e++)this.postProcessPasses_[e].apply(t,this.postProcessPasses_[e+1]||null)},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=Ca(this.offsetScaleMatrix_);Fa(n,2/e[0],2/e[1]);var i,o,a,s,u=Ca(this.offsetRotateMatrix_);0!==r&&(i=u,o=-r,a=Math.cos(o),s=Math.sin(o),Aa(i,Na(La,a,s,-s,a,0,0))),this.setUniformMatrixValue(nU,Qq(this.tmpMat4_,n)),this.setUniformMatrixValue(iU,Qq(this.tmpMat4_,u)),this.setUniformFloatValue(oU,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(aU,t.viewState.zoom),this.setUniformFloatValue(sU,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&i.prevValue!==e&&(i.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(i.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,Qq(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(n)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n"+r.getShaderInfoLog(n)),r.getShaderInfoLog(i)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n"+r.getShaderInfoLog(i));var o=r.createProgram();return r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),o},e.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return Ca(e),Da(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,r,!1,n,i))},e.prototype.enableAttributes=function(t){for(var e=lU(t),r=0,n=0;n<t.length;n++){var i=t[n];this.enableAttributeArray_(i.name,i.size,i.type||5126,e,r),r+=i.size*cU(i.type)}},e.prototype.handleWebGLContextLost=function(){Cn(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(yi),fU=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pU="GENERATE_BUFFERS",dU=function(t){function e(e,r){var n=t.call(this,e)||this,i=r||{};return n.helper=new hU({postProcesses:i.postProcesses,uniforms:i.uniforms}),n}return fU(e,t),e.prototype.disposeInternal=function(){this.helper.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getShaderCompileErrors=function(){return this.helper.getShaderCompileErrors()},e}(Gf);var mU=dU,yU=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),gU=URL.createObjectURL(yU);var vU=new Uint8Array(4),_U=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){Mi(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return vU[0]=0,vU[1]=0,vU[2]=0,vU[3]=0,vU;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return vU[0]=this.data_[4*r],vU[1]=this.data_[4*r+1],vU[2]=this.data_[4*r+2],vU[3]=this.data_[4*r+3],vU},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}(),bU=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wU=function(t){function e(e,r){var n=this,i=r.uniforms||{},o=[1,0,0,1,0,0];i[rU]=o,(n=t.call(this,e,{uniforms:i,postProcesses:r.postProcesses})||this).sourceRevision_=-1,n.verticesBuffer_=new Kq(34962,35048),n.hitVerticesBuffer_=new Kq(34962,35048),n.indicesBuffer_=new Kq(34963,35048),n.program_=n.helper.getProgram(r.fragmentShader,r.vertexShader),n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(r.hitFragmentShader,r.hitVertexShader);var a=r.attributes?r.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:uU.FLOAT}})):[];n.attributes=[{name:"a_position",size:2,type:uU.FLOAT},{name:"a_index",size:1,type:uU.FLOAT}].concat(a),n.hitDetectionAttributes=[{name:"a_position",size:2,type:uU.FLOAT},{name:"a_index",size:1,type:uU.FLOAT},{name:"a_hitColor",size:4,type:uU.FLOAT},{name:"a_featureUid",size:1,type:uU.FLOAT}].concat(a),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=[1/0,1/0,-1/0,-1/0],n.currentTransform_=o,n.renderTransform_=[1,0,0,1,0,0],n.invertRenderTransform_=[1,0,0,1,0,0],n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new _U(n.helper),n.worker_=new Worker(gU),n.worker_.addEventListener("message",function(t){var e=t.data;if(e.type===pU){var r=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,Ba(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):this.renderInstructions_=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var s=n.getLayer().getSource();return n.sourceListenKeys_=[pi(s,Rb,n.handleSourceFeatureAdded_,n),pi(s,Lb,n.handleSourceFeatureChanged_,n),pi(s,Ab,n.handleSourceFeatureDelete_,n),pi(s,Cb,n.handleSourceFeatureClear_,n)],s.forEachFeature(function(t){this.featureCache_[wr(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}.bind(n)),n}return bU(e,t),e.prototype.handleSourceFeatureAdded_=function(t){var e=t.feature;this.featureCache_[wr(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++},e.prototype.handleSourceFeatureChanged_=function(t){var e=t.feature;this.featureCache_[wr(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.handleSourceFeatureDelete_=function(t){var e=t.feature;delete this.featureCache_[wr(e)],this.featureCount_--},e.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},e.prototype.renderFrame=function(t){var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e),this.helper.finalizeDraw(t);var r=this.helper.getCanvas(),n=t.layerStatesArray[t.layerIndex].opacity;return n!==parseFloat(r.style.opacity)&&(r.style.opacity=n),this.hitDetectionEnabled_&&(this.renderHitDetection(t),this.hitRenderTarget_.clearCachedData()),r},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource(),n=t.viewState,i=!t.viewHints[ea]&&!t.viewHints[ra],o=!Xr(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),i&&(o||a)){var s=n.projection,u=n.resolution,l=e instanceof T_?e.getRenderBuffer():0,c=Fr(t.extent,l*u);r.loadFeatures(c,u,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),Aa(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},e.prototype.rebuildBuffers_=function(t){var e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);var r,n,i=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o))}var a,s,u,l=[],c=[],h=0,f=0;for(var p in this.featureCache_)if((n=(r=this.featureCache_[p]).geometry)&&n.getType()===dr.POINT){l[0]=n.getFlatCoordinates()[0],l[1]=n.getFlatCoordinates()[1],ja(e,l),s=f+6,u=void 0,(u=c||[])[0]=Math.floor(s/256/256/256)/255,u[1]=Math.floor(s/256/256)%256/255,u[2]=Math.floor(s/256)%256/255,u[3]=s%256/255,a=u,this.renderInstructions_[h++]=l[0],this.renderInstructions_[h++]=l[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=l[0],this.hitRenderInstructions_[f++]=l[1],this.hitRenderInstructions_[f++]=a[0],this.hitRenderInstructions_[f++]=a[1],this.hitRenderInstructions_[f++]=a[2],this.hitRenderInstructions_[f++]=a[3],this.hitRenderInstructions_[f++]=Number(p));for(var d=void 0,m=0;m<this.customAttributes.length;m++)d=this.customAttributes[m].callback(r.feature,r.properties),this.renderInstructions_[h++]=d,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=d)}var y={type:pU,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(y.projectionTransform=e,this.worker_.postMessage(y,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var g={type:pU,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};g.projectionTransform=e,g.hitDetection=!0,this.worker_.postMessage(g,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(Er(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=ja(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=function(t){var e=0;return e+=Math.round(256*t[0]*256*256*255),e+=Math.round(256*t[1]*256*255),e+=Math.round(256*t[2]*255),e+=Math.round(255*t[3])}([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),u=this.hitRenderInstructions_[s],l=Math.floor(u).toString(),c=this.getLayer().getSource().getFeatureByUid(l);return c?n(c,this.getLayer()):void 0}},e.prototype.renderHitDetection=function(t){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){mi(t)})),this.sourceListenKeys_=null,t.prototype.disposeInternal.call(this)},e}(mU),xU=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MU="blur",SU="gradient",EU="radius",OU=["#00f","#0ff","#0f0","#ff0","#f00"];var TU=function(t){function e(e){var r=this,n=e||{},i=Ln({},n);delete i.gradient,delete i.radius,delete i.blur,delete i.weight,(r=t.call(this,i)||this).gradient_=null,r.addEventListener(to(SU),r.handleGradientChanged_),r.setGradient(n.gradient?n.gradient:OU),r.setBlur(void 0!==n.blur?n.blur:15),r.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";return r.weightFunction_="string"==typeof o?function(t){return t.get(o)}:o,r.setRenderOrder(null),r}return xU(e,t),e.prototype.getBlur=function(){return this.get(MU)},e.prototype.getGradient=function(){return this.get(SU)},e.prototype.getRadius=function(){return this.get(EU)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Bs(1,256),r=e.createLinearGradient(0,0,1,256),n=1/(t.length-1),i=0,o=t.length;i<o;++i)r.addColorStop(i*n,t[i]);return e.fillStyle=r,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(MU,t)},e.prototype.setGradient=function(t){this.set(SU,t)},e.prototype.setRadius=function(t){this.set(EU,t)},e.prototype.createRenderer=function(){return new wU(this,{attributes:[{name:"weight",callback:function(t){var e=this.weightFunction_(t);return void 0!==e?ar(e,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(EU)+this.get(MU))}.bind(this),u_blurSlope:function(){return this.get(EU)/Math.max(1,this.get(MU))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},e}(Ob);function PU(t){return(PU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function RU(t,e){return(RU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=AU(t);if(e){var i=AU(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return CU(this,r)}}function CU(t,e){if(e&&("object"===PU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function AU(t){return(AU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var NU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RU(t,e)}(o,t);var e,r,n,i=LU(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};IU(this,o),t=i.call(this,e);var r,n=e.weight?e.weight:"weight";if("string"==typeof n){var a=1,s=t.getWeights(e);s.length>0?(a=s.reduce((function(t,e){return Math.max(t,e)})),t.maxWeight_=a,t.minWeight_=s.reduce((function(t,e){return Math.min(t,e)})),r=function(t){var e;return t instanceof lp?e=t.get(n):t instanceof yG&&(e=t.getAttribute(n)),parseFloat(e/a)}):Jb(Oh("heatmap").features,Oh("heatmap").name)}else r=n;return t.setStyle((function(e,n){var i=bw.getValue(r,e),o=void 0!==i?ar(i,0,1):1,a=255*o||0,s=t.styleCache_[a];return s||(s=[new S_({image:new bb({opacity:o,src:t.circleImage_})})],t.styleCache_[a]=s),s})),t}return e=o,(r=[{key:"getMinWeight",value:function(){return this.minWeight_}},{key:"getMaxWeight",value:function(){return this.maxWeight_}},{key:"getWeights",value:function(t){var e=[],r=this.getSource();if(null!==r){var n=r.getFeatures();n.length>0&&(e=n.map((function(e){return e.get(t.weight)})).filter((function(t){return null!=t})))}return e}}])&&kU(e.prototype,r),n&&kU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(TU);function jU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var DU=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};jU(this,t),this.attributeName_=e.attribute||null,this.label_=e.label||null,this.fillColor_=e.fill||null,this.legend_=e.legend||null}var e,r,n;return e=t,(r=[{key:"attribute",get:function(){return this.attributeName_},set:function(t){this.attributeName_=t}},{key:"label",get:function(){return this.label_},set:function(t){this.label_=t}},{key:"fillColor",get:function(){return this.fillColor_},set:function(t){this.fillColor_=t}},{key:"legend",get:function(){return this.legend_},set:function(t){this.legend_=t}}])&&FU(e.prototype,r),n&&FU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),BU={DONUT:"donut",PIE_3D:"pie3D",PIE:"pie",BAR:"bar"},zU={Custom:"m.style.chart.types.custom_scheme",Classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],Dark:["#960","#003","#900","#060","#099","#909","#990","#090"],Pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],Pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],Neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]};function GU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||UU(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qU(t){return function(t){if(Array.isArray(t))return VU(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||UU(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UU(t,e){if(t){if("string"==typeof t)return VU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VU(t,e):void 0}}function VU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function WU(t){return(WU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HU(t,e){return(HU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=JU(t);if(e){var i=JU(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return KU(this,r)}}function KU(t,e){if(e&&("object"===WU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function JU(t){return(JU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HU(t,e)}(o,t);var e,r,n,i=XU(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};YU(this,o);var e=t,r=e.variables||null;if(Object.values(BU).includes(e.type)||(e.type=o.DEFAULT.type),bz(r)||(r instanceof Array?e.variables=r.filter((function(t){return null!=t})).map((function(t){return o.formatVariable(t)})):"string"==typeof r||"object"===WU(r)?e.variables=[o.formatVariable(r)]:e.variables=[]),bz(e.scheme))e.scheme=o.DEFAULT.scheme;else if("string"==typeof e.scheme){var n=e.variables.some((function(t){return null!=t.fillColor}));e.scheme===zU.Custom&&n?e.scheme=e.variables.map((function(t){return t.fillColor?t.fillColor:""})):e.scheme=zU[e.scheme]||o.DEFAULT.scheme}else e.scheme instanceof Array&&e.scheme.every((function(t){return"string"==typeof t}))||(e.scheme=o.DEFAULT.scheme);var a=new TV(e);return i.call(this,e,a)}return e=o,n=[{key:"formatVariable",value:function(t){return null==t?null:t instanceof DU?t:new DU("string"==typeof t?{attribute:t}:t)}},{key:"deserialize",value:function(t){var e=GU(t,1)[0],r=e;return r.variables=e.variables.map((function(t){return new DU($z(t))})),new Function(["options"],"return new M.style.Chart(options)")(r)}}],(r=[{key:"updateCanvas",value:function(){bz(this.getImpl())&&bz(this.canvas_)||this.getImpl().updateCanvas(this.canvas_)}},{key:"apply",value:function(t){var e=this;this.layer_=t,t.getFeatures().forEach((function(t){return t.setStyle(e.clone())})),this.updateCanvas()}},{key:"ORDER",get:function(){return 1}},{key:"toJSON",value:function(){var t=this.getOptions();return{parameters:[{type:t.type,radius:t.radius,donutRadio:t.donutRadio,offsetX:t.offsetX,offsetY:t.offsetY,stroke:bz(t.stroke)?void 0:Zz({},t.stroke),fill3DColor:t.fill3DColor,scheme:_z(t.scheme)?qU(t.scheme):t.scheme,label:bz(t.label)?void 0:Zz({},t.label),rotateWithView:t.rotateWithView,variables:t.variables.map((function(t){var e;return bz(t.label)||(e=Zz({},t.label),e=Jz(e)),{attribute:t.attribute,legend:t.legend,fill:t.fillColor,label:e}}))}],deserializedMethod:"M.style.Chart.deserialize"}}}])&&ZU(e.prototype,r),n&&ZU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(tM);$U.DEFAULT={shadow3dColor:"#369",type:BU.PIE,scheme:zU.Classic,radius:20,donutRatio:.5,offsetX:0,offsetY:0,animationStep:1};var QU=$U;function tV(t){return(tV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nV(t,e){return(nV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=aV(t);if(e){var i=aV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return oV(this,r)}}function oV(t,e){if(e&&("object"===tV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function aV(t){return(aV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nV(t,e)}(o,t);var e,r,n,i=iV(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eV(this,o);var r=bz(e.stroke)?0:e.stroke.getWidth();return t=i.call(this,{radius:("number"==typeof e.radius?e.radius:0)+r,fill:new y_({color:[0,0,0]}),rotation:"number"==typeof e.rotation?e.rotation:0,snapToPixel:"boolean"==typeof e.snapToPixel&&e.snapToPixel}),e.scale&&t.setScale(e.scale),t.variables_=e.variables||[],t.stroke_=e.stroke||null,t.radius_=e.radius||0,t.donutRatio_=e.donutRatio||0,t.type_=e.type||null,t.offset_=[e.offsetX?e.offsetX:0,e.offsetY?e.offsetY:0],t.animation_={animate:"number"==typeof e.animation,step:"number"==typeof e.animation?e.animation:QU.DEFAULT.animationStep},t.data_=e.data||null,t.colors_=e.scheme instanceof Array?e.scheme:[],t.fill3DColor_=e.fill3DColor||"#000",t.rotateWithView_=e.rotateWithView||!1,t.renderChart_(),t}return e=o,(r=[{key:"clone",value:function(){var t=new o({type:this.type_,radius:this.radius_,colors:this.colors_,rotation:this.getRotation(),scale:this.getScale(),donutRatio:this.donutRatio_,data:this.data_,stroke:this.stroke_,scheme:this.colors_,offsetX:this.offset_[0],offsetY:this.offset_[1],animation:this.animation_,fill3DColor:this.fill3DColor_,rotateWithView:this.rotateWithView_});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t}},{key:"data",get:function(){return this.data_},set:function(t){this.data_=t,this.renderChart_()}},{key:"radius",get:function(){return this.radius_},set:function(t){this.radius_=t,this.renderChart_()}},{key:"setRadius",value:function(t,e){this.donutRatio_=e||this.donutRatio_,this.radius=t}},{key:"setAnimation",value:function(t){if(!1===t){if(!1===this.animation_.animate)return;this.animation_.animate=!1}else{if(this.animation_.step===t)return;this.animation_.animate=!0,this.animation_.step=t}this.renderChart_()}},{key:"getChecksum",value:function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-";if(null===this.checksums_||t!==this.checksums_[1]||void 0!==this.checksums_[2]||this.radius_!==this.checksums_[3]||this.data_.join("|")!==this.checksums_[4]){var e=this.radius_?this.radius_.toString():"-",r="c".concat(t).concat(void 0).concat(e).concat(this.data_.join("|"));this.checksums_=[r,t,void 0,this.radius_,this.data_.join("|")]}return this.checksums_[0]}},{key:"renderChart_",value:function(t){switch(this.type_){case BU.DONUT:case BU.PIE_3D:case BU.PIE:this.renderCircleChart();break;default:this.renderBarChart()}}},{key:"renderBarChart",value:function(){var t,e=this,r=this.getImage(1),n=r.getContext("2d"),i=0,o=this.animation_.animate?this.animation_.step:1;this.stroke_&&(t=Bl(this.stroke_.getColor()),i=this.stroke_.getWidth());var a,s=Math.max.apply(null,this.data_)||0,u=Math.min(5,2*this.radius_/this.data_.length),l=r.width-(i||0),c=r.width/2,h=c-this.data_.length*u/2;t&&(n.strokeStyle=t,n.lineWidth=i),this.data_.sort((function(t,e){return t-e})).forEach((function(r,i){n.beginPath(),n.fillStyle=e.colors_[i%e.colors_.length],a=h+u;var c=r/s*2*e.radius_*o;n.rect(h,l-c,u,c),n.closePath(),n.fill(),t&&n.stroke(),h=a}));var f=this.getAnchor();f[0]=c-this.offset_[0],f[1]=c-this.offset_[1]}},{key:"renderCircleChart",value:function(){var t,e=0;this.stroke_&&(t=Bl(this.stroke_.getColor()),e=this.stroke_.getWidth());var r=this.getImage(1),n=r.getContext("2d");n.clearRect(0,0,r.width,r.height),n.lineJoin="round";var i=0;!bz(this.data_)&&this.data_.length>0&&(i=this.data_.reduce((function(t,e){return t+e}))),n.setTransform(1,0,0,1,0,0),n.translate(0,0);var o=this.animation_.animate?this.animation_.step:1,a=Math.PI*(o-1.5),s=r.width/2;t&&(n.strokeStyle=t,n.lineWidth=e),n.save(),this.type_===BU.PIE_3D?this.drawPie3D(n,a,s,o,t,i):this.type_===BU.DONUT?this.drawDonut(n,a,s,o,t,e,i):this.drawPie(n,a,s,o,t,i),n.restore();var u=this.getAnchor();u[0]=s-this.offset_[0],u[1]=s-this.offset_[1]}},{key:"drawDonut",value:function(t,e,r,n,i,o,a){var s=t;s.save(),s.beginPath(),s.rect(0,0,2*r,2*r),s.arc(r,r,this.radius_*n*this.donutRatio_,0,2*Math.PI),s.clip("evenodd");var u=this.drawPie(s,e,r,n,i,a);s.restore(),s.beginPath(),s.strokeStyle=i,s.lineWidth=o;var l=this.radius_;s.arc(r,r,l*n*this.donutRatio_,Math.PI*(n-1.5),u),i&&s.stroke()}},{key:"drawPie3D",value:function(t,e,r,n,i,o){var a=t;a.translate(0,.3*r),a.scale(1,.7),a.beginPath(),a.fillStyle=this.fill3DColor_,a.arc(r,1.4*r,this.radius_*n,0,2*Math.PI),a.fill(),i&&a.stroke(),this.drawPie(t,e,r,n,i,o)}},{key:"drawPie",value:function(t,e,r,n,i,o){var a,s=this,u=e,l=t;return this.data_.forEach((function(t,e){l.beginPath(),l.moveTo(r,r),l.fillStyle=s.colors_[e%s.colors_.length],a=u+2*Math.PI*t/(o*n),l.arc(r,r,s.radius_*n,u,a),l.closePath(),l.fill(),i&&l.stroke(),u=a})),u}}])&&rV(e.prototype,r),n&&rV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(p_);function uV(t){return(uV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hV(t,e){return(hV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=dV(t);if(e){var i=dV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pV(this,r)}}function pV(t,e){if(e&&("object"===uV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dV(t){return(dV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mV(t){return(mV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bV(t,e){return(bV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=MV(t);if(e){var i=MV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xV(this,r)}}function xV(t,e){if(e&&("object"===mV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function MV(t){return(MV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var SV=function(t){var e=t;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.filter((function(t){return null!=t})).forEach((function(t){return Object.keys(t).forEach((function(r){Object.prototype.hasOwnProperty.call(t,r)&&!Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=t[r])}))})),r},EV=function(t,e,r,n){var i;return i="0"===(i="function"==typeof t.text?t.text(n,r.data,e):"".concat(bw.getValue(t.text,e))||"")?"":i},OV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bV(t,e)}(s,t);var e,r,n,i=wV(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return vV(this,s),SV(e,QU.DEFAULT),(t=i.call(this,e)).variables_=e.variables||[],t.colorsScheme_=e.scheme||[],t}return e=s,(r=[{key:"updateCanvas",value:function(t){if(!bz(t)){var e=t.getContext("2d");this.drawGeometryToCanvas(e)}}},{key:"drawGeometryToCanvas",value:function(t){var e=this,r=t;if(!bz(r)&&!bz(r.canvas)){var n=s.CANVAS_PROPS.fixedProps,i=s.CANVAS_PROPS.width;r.canvas.setAttribute("width",i),r.width=i;var o=[],a={};Object.keys(s.CANVAS_PROPS.percentages).forEach((function(t){a[t]=i*(s.CANVAS_PROPS.percentages[t]/100)}));var u=[a.left_right_content,n.top_content],l=u[0],c=u[1],h=function(t,i,s){var u=yV(t,2),l=u[0],c=u[1];c+=n.item_top_margin,o.push(function(t){var e=t.context;e.beginPath(),e.strokeStyle=t.strokeColor,e.lineWidth=t.width,e.fillStyle=t.color,e.rect(t.x,t.y,t.rectSize,t.rectSize),e.closePath(),e.stroke(),e.fill()}.bind(e,{context:r,strokeColor:"#000",width:n.rect_border_width,color:s,x:l,y:c,rectSize:n.rect_size})),l+=a.item_side_margin+n.rect_size;var h=(c+=n.rect_size/1.5)+n.item_top_margin,f=function(t,i,a,s,u){var l=a.split(" "),c="",h=i[0],f=i[1];return o.push(function(t){var e=t.context;e.font="".concat(t.fontSize,"px ").concat(t.fontFamily),e.strokeStyle=t.strokeColor,e.strokeWidth=t.strokeWidth,e.fillStyle=t.textColor}.bind(e,{context:r,fontSize:n.font_size,fontFamily:n.font_family,strokeColor:n.text_stroke_color,strokeWidth:n.text_stroke_width,textColor:n.text_color})),l.forEach((function(t,n){r.measureText("".concat(c+t)).width>s&&n>0?(o.push(function(t,e,r,n){t.strokeText(e,r,n),t.fillText(e,r,n)}.bind(e,r,c,h,f)),c="".concat(t," "),f+=u):c="".concat(c+t," ")})),o.push(function(t,e,r,n){t.strokeText(e,r,n),t.fillText(e,r,n)}.bind(e,r,c,h,f)),[h,f]}(0,[l,c],i,a.max_text_width,a.max_text_line_height);return[f[0],f[1]>h?f[1]:h]};this.variables_.forEach((function(t,r){var n=bz(t.legend)?t.attribute:t.legend,i=bz(t.fillColor)?e.colorsScheme_[r%e.colorsScheme_.length]||e.colorsScheme_[0]:t.fillColor,o=yV(h([l,c],n,i),2);l=o[0],c=o[1],l=a.left_right_content})),c+=n.top_content,r.canvas.setAttribute("height",c),r.save(),o.forEach((function(t){return t()})),r.restore()}}},{key:"updateFacadeOptions",value:function(t){var e=this,r=t;r.rotateWithView=!1,this.olStyleFn_=function(t,n){var i=t;i instanceof lp||(i=e);var s=e.formatDataRecursively_(r,i),u=[];if(e.variables_.forEach((function(t){var e=i.get(t.attribute);e=parseFloat(e),u=u.concat(e instanceof Array?e:[e]).filter((function(t){return null!=t}))})),0===u.length)throw new Error("cannot draw an empty data chart");s.data=u,bz(r.stroke)||(s.stroke=new g_(r.stroke));var l=[new gS({geometry:function(t){var e=Dp.getCentroid(t.getGeometry());return new ds(e)},image:new sV(s)})];return"bar"!==s.type?1!==r.variables.length&&r.variables.length!==u.length||(l=l.concat(function(t,e,r){var n=0,i=e.data.reduce((function(t,e){return t+e})),o=e.variables,a=e.data;return t.concat(e.data.map((function(t,s){var u=o.length===a.length?o[s]:o[0],l=u.label||{},c=l.radius?l.radius:e.radius,h=(2*n+t)/i*Math.PI-Math.PI/2;if(n+=t,!u.label)return null;var f="number"==typeof l.radiusIncrement?l.radiusIncrement:3,p="function"==typeof l.textAlign?l.textAlign(h):null;bz(p)&&(p=l.textAlign||(h<Math.PI/2?"left":"right"));var d=EV(l,r,e,t),m=bw.getValue(l.font,r),y=new y_({color:bw.getValue(l.fill,r)||"#000"}),g=new g_({color:bw.getValue(l.stroke.color,r)||"#000",width:bw.getValue(l.stroke.width,r)||1}),v=Math.cos(h)*(c+f+e.offsetX)||0,_=Math.sin(h)*(c+f+e.offsetY)||0,b=new Cw({text:"string"==typeof d?"".concat(d):"",offsetX:"number"==typeof l.offsetX?bw.getValue(l.offsetX,r):v,offsetY:"number"==typeof l.offsetY?bw.getValue(l.offsetY,r):_,textAlign:bw.getValue(p,r),textBaseline:bw.getValue(l.textBaseline,r)||"middle",stroke:l.stroke?g:void 0,font:/^([1-9])[0-9]*px ./.test(m)?m:"12px ".concat(m),scale:"number"==typeof l.scale?bw.getValue(l.scale,r):void 0,fill:y});return new gS({text:b})}))).filter((function(t){return null!=t}))}(l,s,i))):"bar"===s.type&&(l=l.concat(function(t,e,r){var n=0,i=null,o=e.variables,a=e.data,s=t.concat(e.data.map((function(s,u){var l=o.length===a.length?o[u]:o[0],c=l.label||{};if(!l.label)return null;var h=EV(c,r,e,s),f=bw.getValue(c.font,r);bz(i)?i=t[0].getImage().getImage().height/2-6:i-=15,n=n+9+6;var p=-t[0].getImage().getImage().width/2-(1+e.offsetX)||0;return new gS({text:new Cw({text:"string"==typeof h?"".concat(h):"",offsetY:i+e.offsetY||0,offsetX:p,textBaseline:"middle",rotateWithView:!1,textAlign:"center",stroke:c.stroke?new g_({}):void 0,font:"9px ".concat(f),scale:"number"==typeof c.scale?bw.getValue(c.scale,r):void 0,fill:new y_({color:e.scheme[u%e.scheme.length]})})})}))),u=s.filter((function(t){return null!=t}));n=Math.max(n,1);var l=-t[0].getImage().getImage().width/2+10+e.offsetX,c=t[0].getImage().getImage().height/2+e.offsetY,h=new bb({anchor:[l,c],anchorOrigin:"bottom-right",offsetOrigin:"bottom-left",anchorXUnits:"pixels",anchorYUnits:"pixels",rotateWithView:!1,src:"data:image/svg+xml;base64,".concat(window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(t[0].getImage().getImage().width/2,'" height="').concat(n,'"><rect width="').concat(s[0].getImage().getImage().width/2,'" height="').concat(n,'" fill="rgba(255, 255, 255, 0.75)" stroke-width="0" stroke="rgba(0, 0, 0, 0.34)"/></svg>'))),size:[s[0].getImage().getImage().width/2,n]});return u.push(new S_({image:h})),u}(l,s,i))),function(t,e,r){if(!bz(t.label)){var n=new S_,i=bw.getValue(t.label.text,r),s=bw.getValue(t.label.align,r),u=bw.getValue(t.label.baseline,r),l=t.label.offset?t.label.offset[0]:void 0,c=t.label.offset?t.label.offset[1]:void 0,h=new y_({color:bw.getValue(t.label.color||"#000000",r)}),f=new Cw({font:bw.getValue(t.label.font,r),rotateWithView:bw.getValue(t.label.rotate,r),scale:bw.getValue(t.label.scale,r),offsetX:bw.getValue(l,r),offsetY:bw.getValue(c,r),fill:h,textAlign:Object.values(o).includes(s)?s:"center",textBaseline:Object.values(a).includes(u)?u:"top",text:void 0===i?void 0:String(i),rotation:bw.getValue(t.label.rotation,r)});bz(t.label.stroke)||f.setStroke(new g_({color:bw.getValue(t.label.stroke.color,r),width:bw.getValue(t.label.stroke.width,r),lineCap:bw.getValue(t.label.stroke.linecap,r),lineJoin:bw.getValue(t.label.stroke.linejoin,r),lineDash:bw.getValue(t.label.stroke.linedash,r),lineDashOffset:bw.getValue(t.label.stroke.linedashoffset,r),miterLimit:bw.getValue(t.label.stroke.miterlimit,r)})),n.setText(f),e.push(n)}}(s,l,i),l}}},{key:"applyToLayer",value:function(t){t.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"formatDataRecursively_",value:function(t,e){var r=this;return Object.keys(t).reduce((function(n,i,o){var a=n;return"object"!==mV(n)&&(a={},"object"!==mV(t[n])&&r.setVal(a,t,n,e)),r.setVal(a,t,i),a}))}},{key:"setVal",value:function(t,e,r,n){var i=t;i[r]=bw.getValue(e[r],n),!xz(e[r])||e[r]instanceof Array||(i[r]=this.formatDataRecursively_(e[r],n))}}])&&_V(e.prototype,r),n&&_V(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hV(t,e)}(o,t);var e,r,n,i=fV(o);function o(){return cV(this,o),i.apply(this,arguments)}return e=o,r&&lV(e.prototype,r),n&&lV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(fw));OV.CANVAS_PROPS={width:200,percentages:{left_right_content:5,item_side_margin:5,max_text_width:70},fixedProps:{rect_border_width:2,font_size:10,font_family:"sans-serif",text_stroke_color:"#fff",text_stroke_width:1,text_color:"#000",top_content:10,item_top_margin:10,text_line_height:15,rect_size:15}};var TV=OV;Ua.prototype.cspline=function(t){var e;return this.calcCSpline?this.csplineGeometryRevision===this.getRevision()&&this.csplineOption===JSON.stringify(t)||(this.csplineGeometry_=this.calcCSpline(t),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(t),e=this.csplineGeometry_):e=this,e},Tp.prototype.calcCSpline=function(t){var e=[];return this.getGeometries().forEach((function(t){return e.push(t.cspline())})),new Tp(e)},xp.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new xp(e)},ks.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new ks(e)},Sp.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new Sp(e)};var PV=function(t,e,r,n){var i=r-t,o=n-e;return Math.sqrt(i*i+o*o)};function IV(t){return(IV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function RV(){return(RV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=LV(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function LV(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jV(t)););return t}function CV(t,e){return(CV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function AV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jV(t);if(e){var i=jV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return NV(this,r)}}function NV(t,e){if(e&&("object"===IV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jV(t){return(jV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}vp.prototype.calcCSpline=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=this.getCoordinates(),m="number"==typeof p.tension?p.tension:.5,y=p.resolution||this.getLength()/d.length/(p.pointsPerSeg||10),g=[],v=d.slice(0);for(d.length>2&&d[0][0]===d[d.length-1][0]&&d[0][1]===d[d.length-1][1]?(v.unshift(d[d.length-2]),v.push(d[1])):(v.unshift(d[0]),v.push(d[d.length-1])),f=1;f<v.length-2;f+=1){var _=PV(v[f][0],v[f][1],v[f+1][0],v[f+1][1]),b=Math.round(_/y),w=1;if(p.normalize){var x=PV(v[f+1][0],v[f+1][1],v[f-1][0],v[f-1][1]),M=PV(v[f+2][0],v[f+2][1],v[f][0],v[f][1]);w=x<M?x/M:M/x}for(r=(v[f+1][0]-v[f-1][0])*m*w,n=(v[f+2][0]-v[f][0])*m*w,i=(v[f+1][1]-v[f-1][1])*m*w,o=(v[f+2][1]-v[f][1])*m*w,h=0;h<=b;h+=1)c=h/b,a=2*Math.pow(c,3)-3*Math.pow(c,2)+1,s=-2*Math.pow(c,3)+3*Math.pow(c,2),u=Math.pow(c,3)-2*Math.pow(c,2)+c,l=Math.pow(c,3)-Math.pow(c,2),t=a*v[f][0]+s*v[f+1][0]+u*r+l*n,e=a*v[f][1]+s*v[f+1][1]+u*i+l*o,g.push([t,e])}return new vp(g)};var FV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CV(t,e)}(o,t);var e,r,n,i=AV(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).olStyleFn_=e.updateFacadeOptions(t),e}return e=o,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof lp||(n=e);var i,o=t.stroke,a=t.label,s=new gS,u=new gS,l=bw.getValue;if(bz(o)||s.setStroke(new g_({color:l(o.color,n),width:l(o.width,n),lineDash:l(o.linedash,n),lineDashOffset:l(o.linedashoffset,n),lineCap:l(o.linecap,n),lineJoin:l(o.linejoin,n),miterLimit:l(o.miterlimit,n)})),!bz(a)){var c={text:void 0===l(a.text,n)?void 0:String(l(a.text,n)),font:l(a.font,n),fill:new y_({color:l(a.color||"#000000",n)}),textBaseline:(l(a.baseline,n)||"").toLowerCase(),textAlign:l(a.align,n),scale:l(a.scale,n),rotateWithView:l(a.rotate,n)||!1,overflow:l(a.textoverflow,n)||!1,minWidth:l(a.minwidth,n)||0,geometry:l(a.geometry,n),offsetX:l(t.label.offset?t.label.offset[0]:void 0,n),offsetY:l(t.label.offset?t.label.offset[1]:void 0,n)},h=new Gw(c);bz(a.stroke)||h.setStroke(new g_({color:l(a.stroke.color,n),width:l(a.stroke.width,n),lineCap:l(a.stroke.linecap,n),lineJoin:l(a.stroke.linejoin,n),lineDash:l(a.stroke.linedash,n),lineDashOffset:l(a.stroke.linedashoffset,n),miterLimit:l(a.stroke.miterlimit,n)}));var f=l(a.path,n);"boolean"==typeof f&&f&&(s.textPath=h,!bz(a.smooth)&&!0===a.smooth&&wz(n.getGeometry)&&s.setGeometry(n.getGeometry().cspline()),h.setPlacement("line")),s.setText(h)}if(!bz(t.fill)){var p=bw.getValue(t.fill.color,n,e.layer_),d=bw.getValue(t.fill.opacity,n,e.layer_);d||0===d||(d=1);var m=bw.getValue(t.fill.width,n,e.layer_);if(bz(p)||(i=new g_({color:xw()(p).alpha(d).css(),width:m})),!bz(t.fill.pattern)){var y="rgba(0,0,0,1)";bz(t.fill.pattern.color)||(y=bw.getValue(t.fill.pattern.color,n,e.layer_)),i=new kx({pattern:(bw.getValue(t.fill.pattern.name,n,e.layer_)||"").toLowerCase(),image:"Image"===bw.getValue(t.fill.pattern.name,n,e.layer_)?new bb({src:bw.getValue(t.fill.pattern.src,n,e.layer_),crossOrigin:"anonymous"}):void 0,color:y,width:m,size:bw.getValue(t.fill.pattern.size,n,e.layer_),spacing:bw.getValue(t.fill.pattern.spacing,n,e.layer_),angle:bw.getValue(t.fill.pattern.rotation,n,e.layer_),scale:bw.getValue(t.fill.pattern.scale,n,e.layer_),offset:bw.getValue(t.fill.pattern.offset,n,e.layer_),fill:i,layer:e.layer_})}}return u.setStroke(i),[s,u]}}},{key:"applyToLayer",value:function(t){RV(jV(o.prototype),"applyToLayer",this).call(this,t);var e=t.getImpl().getOL3Layer();bz(e)||(this.postComposeEvtKey_=e.on("postcompose",KV,e))}},{key:"unapply",value:function(){Hi(this.postComposeEvtKey_)}},{key:"drawGeometryToCanvas",value:function(t,e,r,n){var i=o.getCanvasSize()[0],a=o.getCanvasSize()[1];if(t.drawGeometry(new vp([[0+n/2,0+n/2],[i/3,a/2-n/2],[2*i/3,0+n/2],[i-n/2,a/2-n/2]])),!bz(r)){var s=r.width,u=e.getContext("2d");u.lineWidth=r.width,i=e.width,a=e.height,u.strokeStyle=r.color,u.beginPath(),u.lineTo(0+s,0+s),u.lineTo(i/3,a/2-s),u.lineTo(2*i/3,0+s),u.lineTo(i-s,a/2-s),u.stroke()}}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var e,r=o.getCanvasSize(),n=Ac(t.getContext("2d"),{size:r}),i=this.olStyleFn_()[1];bz(i)||bz(i.getStroke())||(e={color:i.getStroke().getColor(),width:1});var a=this.olStyleFn_()[0];bz(a.getText())||a.setText(null);var s,u=a.getStroke();bz(u)||(bz(u.getWidth())?s=1:(s=u.getWidth(),u.getWidth()>o.DEFAULT_WIDTH_LINE&&(s=o.DEFAULT_WIDTH_LINE)),e={color:a.getStroke().getColor(),width:s},a.getStroke().setWidth(s),n.setStyle(a)),this.drawGeometryToCanvas(n,t,e,s)}}])&&kV(e.prototype,r),n&&kV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(bw);FV.DEFAULT_WIDTH_LINE=3;var DV=FV;function BV(t){return(BV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GV(t,e){return(GV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=VV(t);if(e){var i=VV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return UV(this,r)}}function UV(t,e){if(e&&("object"===BV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function VV(t){return(VV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GV(t,e)}(o,t);var e,r,n,i=qV(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;bz(e)&&(e=o.DEFAULT_NULL),e=Zz({},e);var r=new DV(e);return i.call(this,e,r)}return e=o,(r=[{key:"unapply",value:function(t){this.getImpl().unapply(t)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Line'))"}}])&&zV(e.prototype,r),n&&zV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(fM);WV.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};var YV=WV;function ZV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var HV=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"render",value:function(t,e){for(var r=t,n=this,i=0,o=0,a=2,s=function(t,e,r,n){var i=r-t,o=n-e;return Math.sqrt(i*i+o*o)},u=function(t,e){if(!i||o+i<e)for(;a<t.length&&(i=s(t[a-2],t[a-1],t[a],t[a+1]),!(o+i>e))&&!((a+=2)>=t.length);)o+=i;var r=e-o;return a>=t.length&&(a=t.length-2),[r?t[a-2]+(t[a]-t[a-2])*r/i:t[a-2],r?t[a-1]+(t[a+1]-t[a-1])*r/i:t[a-1],Math.atan2(t[a+1]-t[a-1],t[a]-t[a-2])]},l=.25*n.measureText(" ").width,c=0,h=0,f=2;f<e.length;f+=2)h+=s(e[f-2],e[f-1],e[f],e[f+1]);if(!(h<n.minWidth)){var p=r.split(" ").length-1;if("visible"!==n.textOverflow&&h<n.measureText(r).width+(r.length-(1+p))*l){var d="ellipsis"===n.textOverflow?"…":n.textOverflow;do{p=r.split(" ").length-1,r=r.slice(0,r.length-1)}while(r&&h<n.measureText(r+d).width+(r.length+(d.length-1)+p)*l);r+=d}switch(n.textJustify||n.textAlign){case!0:case"center":case"end":case"right":n.textJustify?(c=0,l=(h-n.measureText(r).width)/(t.length-(1+p))):(c=h-n.measureText(r).width-(r.length+p)*l,"center"===n.textAlign&&(c/=2))}for(var m=0;m<r.length;m+=1){var y=r[m],g=n.measureText(y).width,v=u(e,c+g/2);n.save(),n.textAlign="center",n.translate(v[0],v[1]),n.rotate(v[2]),n.lineWidth&&n.strokeText(y,0,0),n.fillText(y,0,0),n.restore(),c+=g+l*(" "===y?2:1)}}}},{key:"getPath_",value:function(t,e,r){var n=[];if(e.forEach((function(e){n.push(t[0]*e[0]+t[1]*e[1]+t[4]),n.push(t[2]*e[0]+t[3]*e[1]+t[5])})),r&&n[0]>n[n.length-2]){for(var i=[],o=n.length-2;o>=0;o-=2)i.push(n[o]),i.push(n[o+1]);return i}return n}},{key:"formatStyle",value:function(t){var e=t;return null==e?null:(void 0===e&&(e=[new S_({text:new Cw})]),"function"==typeof e?e:function(){return[e]})}},{key:"draw",value:function(e,r,n,i){var o=this.getPath_(r,i,n.getRotateWithView());e.font=n.getFont(),e.textBaseline=n.getTextBaseline(),e.textAlign=n.getTextAlign(),e.lineWidth=n.getStroke()&&n.getStroke().getWidth()||t.DEFAULT.lineWidth,e.strokeStyle=n.getStroke()&&n.getStroke().getColor()||t.DEFAULT.lineColor,e.fillStyle=n.getFill()&&n.getFill().getColor()||t.DEFAULT.fillColor,e.textJustify="justify"===n.getTextAlign(),e.textOverflow=n.getTextOverflow?n.getTextOverflow():t.DEFAULT.textOverflow,e.minWidth=n.getMinWidth?n.getMinWidth():t.DEFAULT.minWidth,"function"==typeof e.textPath&&e.textPath(n.getText(),o),e.restore()}}],(r=null)&&ZV(e.prototype,r),n&&ZV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();HV.DEFAULT={lineWidth:0,lineColor:"#fff",fillColor:"#000",textOverflow:"",minWidth:0};var XV,KV=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(yz(window.CanvasRenderingContext2D.prototype.textPath)&&(window.CanvasRenderingContext2D.prototype.textPath=HV.render),!(e.frameState.viewState.resolution>this.textPathMaxResolution_)){var r=e.frameState.extent,n=e.context;n.save(),n.scale(e.frameState.pixelRatio,e.frameState.pixelRatio);var i=null!=this.getSource()&&0===this.getSource().getFeatures().length;i||(this.getSource().getFeaturesInExtent(r).forEach((function(r){var i=null!=r.getStyle()?r.getStyle():t.getStyle(),o="function"==typeof i?i(r,e.frameState.viewState.resolution):i;o instanceof Array||(o=[o]),o.forEach((function(t){var i,o=(t instanceof YV?t.getOptions().geometry:t.getGeometry())||r.getGeometry();switch("function"==typeof o&&(o=o(r)),o.getType()){case"MultiLineString":i=o.getLineString(0).getCoordinates();break;default:i=o.getCoordinates()}var a=t instanceof YV?t.getOptions().text:t.textPath;null!=a&&a instanceof Gw&&HV.draw(n,e.frameState.coordinateToPixelTransform,a,i)}))})),n.restore())}},JV=void 0,$V=function(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)},QV=function(t,e){return t[0]===e[0]&&t[1]===e[1]};!function(){function t(t,e){for(var r,n=t.length-1;n>0;n-=1)(t[n][0]>e&&t[n-1][0]<e||t[n][0]<e&&t[n-1][0]>e)&&(r=[e,(e-t[n][0])/(t[n-1][0]-t[n][0])*(t[n-1][1]-t[n][1])+t[n][1]],t.splice(n,0,r))}function e(t,e){for(var r,n=t.length-1;n>0;n-=1)(t[n][1]>e&&t[n-1][1]<e||t[n][1]<e&&t[n-1][1]>e)&&(r=[(e-t[n][1])/(t[n-1][1]-t[n][1])*(t[n-1][0]-t[n][0])+t[n][0],e],t.splice(n,0,r))}XV=function(r,n){var i="Polygon"===n.getType();if(!i&&"MultiPolygon"!==n.getType())return null;var o=n.getCoordinates();return i&&(o=[o]),o.forEach((function(n){n.forEach((function(n){t(n,r[0]),t(n,r[2]),e(n,r[1]),e(n,r[3])}))})),o.forEach((function(t){t.forEach((function(t){t.forEach((function(t){var e=t;e[0]<r[0]?e[0]=r[0]:e[0]>r[2]&&(e[0]=r[2]),e[1]<r[1]?e[1]=r[1]:e[1]>r[3]&&(e[1]=r[3])}))}))})),i?new ks(o[0]):new Sp(o)}}();var tW=function(t,e,r,n){var i=[];!1!==n&&i.push(t);var o=$V(t,e);if(o){var a=Math.round(o/r);if(a>1)for(var s=(e[0]-t[0])/a,u=(e[1]-t[1])/a,l=1;l<a;l+=1)i.push([t[0]+s*l,t[1]+u*l])}return i.push(e),i};vp.prototype.sampleAt=function(t){for(var e=JV.getCoordinates(),r=[],n=1;n<e.length;n+=1)r=r.concat(tW(e[n-1],e[n],t,1===n));return new vp(r)},xp.prototype.sampleAt=function(t){var e=JV.getCoordinates(),r=[];return e.forEach((function(e){for(var n=[],i=1;i<e.length;i+=1)n=n.concat(tW(e[i-1],e[i],t,1===i));r.push(n)})),new xp(r)},ks.prototype.sampleAt=function(t){var e=JV.getCoordinates(),r=[];return e.forEach((function(e){for(var n=[],i=1;i<e.length;i+=1)n=n.concat(tW(e[i-1],e[i],t,1===i));r.push(n)})),new ks(r)},Sp.prototype.sampleAt=function(t){var e=JV.getCoordinates(),r=[];return e.forEach((function(e){var n=[];r.push(n),e.forEach((function(e){for(var r=[],i=1;i<e.length;i+=1)r=r.concat(tW(e[i-1],e[i],t,1===i));n.push(r)}))})),new Sp(r)},kp.prototype.intersection=function(t,e){if(t.sampleAt){var r=Fr(JV.getCenter().concat(JV.getCenter()),JV.getRadius());t=XV(r,t).simplify(e);var n=JV.getCenter(),i=JV.getRadius(),o=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":o=[o];case"MultiPolygon":var a=!1,s=[];return o.forEach((function(t){var e=[];s.push(e),t.forEach((function(t){var r=[];e.push(r),t.forEach((function(t){var e=$V(n,t);e>i?(a=!0,r.push([n[0]+i/e*(t[0]-n[0]),n[1]+i/e*(t[1]-n[1])])):r.push(t)}))}))})),a?"Polygon"===t.getType()?new ks(s[0]):new Sp(s):t}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: ".concat(t.getType()));return t};var eW=void 0;function rW(t){return(rW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oW(t,e){return(oW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=lW(t);if(e){var i=lW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return sW(this,r)}}function sW(t,e){if(e&&("object"===rW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uW(t)}function uW(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lW(t){return(lW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}vp.prototype.splitAt=function(t,e){var r,n=e;if(!t)return[eW];if(e||(n=1e-10),t.length&&t[0].length){var i=[eW];for(r=0;r<t.length;r+=1){for(var o=[],a=0;a<i.length;a+=1){var s=i[a].splitAt(t[r],n);o=o.concat(s)}i=o}return i}if(QV(t,eW.getFirstCoordinate())||QV(t,eW.getLastCoordinate()))return[eW];var u=eW.getCoordinates(),l=[u[0]],c=[];for(r=0;r<u.length-1;r+=1){if(QV(t,u[r+1]))l.push(u[r+1]),c.push(new vp(l)),l=[];else if(!QV(t,u[r])){var h=void 0,f=void 0,p=!1;u[r][0]===u[r+1][0]?(h=(u[r][1]-t[1])/(u[r][1]-u[r+1][1]),p=u[r][0]===t[0]&&h>0&&h<=1):u[r][1]===u[r+1][1]?(h=(u[r][0]-t[0])/(u[r][0]-u[r+1][0]),p=u[r][1]===t[1]&&h>0&&h<=1):(h=(u[r][0]-t[0])/(u[r][0]-u[r+1][0]),f=(u[r][1]-t[1])/(u[r][1]-u[r+1][1]),p=Math.abs(h-f)<=n&&h>0&&h<=1),p&&(l.push(t),c.push(new vp(l)),l=[t])}QV(u[r],u[r+1])||l.push(u[r+1])}return l.length>1&&c.push(new vp(l)),c.length?c:[eW]};var cW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oW(t,e)}(o,t);var e,r,n,i=aW(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nW(this,o),(t=i.call(this,{stroke:e.stroke,text:e.text,zIndex:e.zIndex,geometry:e.geometry})).setRenderer(t._render.bind(uW(t))),t._visible=!1!==e.visible,"function"==typeof e.width?t._widthFn=e.width:t.setWidth(e.width),t.setWidth2(e.width2),"function"==typeof e.color?t._colorFn=e.color:t.setColor(e.color),t.setColor2(e.color2),t.setLineCap(e.lineCap),t.setArrow(e.arrow),t.setArrowSize(e.arrowSize),t.setArrowColor(e.arrowColor),t._offset=[0,0],t.setOffset(e.offset0,0),t.setOffset(e.offset1,1),t._noOverlap=e.noOverlap,t}return e=o,(r=[{key:"setWidth",value:function(t){this._width=t||0}},{key:"setWidth2",value:function(t){this._width2=t}},{key:"getOffset",value:function(t){return this._offset[t]}},{key:"setOffset",value:function(t,e){var r=Math.max(0,parseFloat(t));switch(e){case 0:this._offset[0]=r;break;case 1:this._offset[1]=r}}},{key:"setLineCap",value:function(t){this._lineCap="round"===t?"round":"butt"}},{key:"getWidth",value:function(t,e){if(this._widthFn)return this._widthFn(t,e);var r="number"==typeof this._width2?this._width2:this._width;return this._width+(r-this._width)*e}},{key:"setColor",value:function(t){try{this._color=Vl(t)}catch(t){this._color=[0,0,0,1]}}},{key:"setColor2",value:function(t){try{this._color2=Vl(t)}catch(t){this._color2=null}}},{key:"setArrowColor",value:function(t){try{this._acolor=Bl(t)}catch(t){this._acolor=null}}},{key:"getColor",value:function(t,e){if(this._colorFn)return Bl(this._colorFn(t,e));var r=this._color,n=this._color2||this._color;return"rgba(".concat(+Math.round(r[0]+(n[0]-r[0])*e),",\n      ").concat(Math.round(r[1]+(n[1]-r[1])*e),",\n      ").concat(Math.round(r[2]+(n[2]-r[2])*e),",\n      ").concat(r[3]+(n[3]-r[3])*e,"\n      )")}},{key:"getArrow",value:function(){return this._arrow}},{key:"setArrow",value:function(t){this._arrow=parseInt(t,0),(this._arrow<-1||this._arrow>2)&&(this._arrow=0)}},{key:"getArrowSize",value:function(){return this._arrowSize||[16,16]}},{key:"setArrowSize",value:function(t){Array.isArray(t)?this._arrowSize=t:"number"==typeof t&&(this._arrowSize=[t,t])}},{key:"drawArrow",value:function(t,e,r,n,i){var o=this.getArrowSize()[0]*i,a=$V(e,r),s=(e[0]-r[0])/a,u=(e[1]-r[1])/a,l=Math.max(this.getArrowSize()[1]/2,n/2)*i;t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[0]-o*s+l*u,e[1]-o*u-l*s),t.lineTo(e[0]-o*s-l*u,e[1]-o*u+l*s),t.lineTo(e[0],e[1]),t.fill()}},{key:"_render",value:function(t,e){if("LineString"===e.geometry.getType()){var r,n,i,o=e.context;if(!this._visible){var a=e.pixelRatio/e.resolution,s=Math.cos(e.rotation),u=Math.sin(e.rotation);n=e.geometry.getCoordinates();var l=t[0][0]-n[0][0]*a*s-n[0][1]*a*u,c=t[0][1]-n[0][0]*a*u+n[0][1]*a*s;for(t=[],r=0;i=n[r];r+=1)t[r]=[l+i[0]*a*s+i[1]*a*u,c+i[0]*a*u-i[1]*a*s,i[2]]}var h=this.getArrowSize()[0]*e.pixelRatio;o.save(),this.getOffset(0)&&this._splitAsize(t,this.getOffset(0)*e.pixelRatio),this.getOffset(1)&&this._splitAsize(t,this.getOffset(1)*e.pixelRatio,!0),t.length>1&&(-1===this.getArrow()||2===this.getArrow())&&(i=this._splitAsize(t,h),this._acolor?o.fillStyle=this._acolor:o.fillStyle=this.getColor(e.feature,0),this.drawArrow(o,i[0],i[1],this.getWidth(e.feature,0),e.pixelRatio)),t.length>1&&this.getArrow()>0&&(i=this._splitAsize(t,h,!0),this._acolor?o.fillStyle=this._acolor:o.fillStyle=this.getColor(e.feature,1),this.drawArrow(o,i[0],i[1],this.getWidth(e.feature,1),e.pixelRatio));var f=this._splitInto(t,255,2),p=0,d=f.length;if(o.lineJoin="round",o.lineCap=this._lineCap||"butt",f.length>1)for(p=0;p<f.length;p+=1){var m=p/d;for(n=f[p],o.lineWidth=this.getWidth(e.feature,m)*e.pixelRatio,o.strokeStyle=this.getColor(e.feature,m),o.beginPath(),o.moveTo(n[0][0],n[0][1]),r=1;i=n[r];r+=1)o.lineTo(i[0],i[1]);o.stroke()}o.restore()}}},{key:"_splitAsize",value:function(t,e,r){var n,i,o,a,s=0;for(n=o=r?t.pop():t.shift();t.length;){if(i=r?t.pop():t.shift(),s+(a=$V(n,i))>e){n=[n[0]+(i[0]-n[0])*(e-s)/a,n[1]+(i[1]-n[1])*(e-s)/a],a=$V(n,o),r?(t.push(i),t.push(n),t.push([n[0]+(o[0]-n[0])/a,n[1]+(o[1]-n[1])/a])):(t.unshift(i),t.unshift(n),t.unshift([n[0]+(o[0]-n[0])/a,n[1]+(o[1]-n[1])/a]));break}s+=a,n=i}return[o,n]}},{key:"_splitInto",value:function(t,e,r){var n,i,o,a=this._noOverlap?1:.9,s=[],u=0;for(n=1;i=t[n];n+=1)u+=$V(t[n-1],i);var l=Math.max(r||2,u/(e||255)),c=t[0];u=0;var h=[c];for(n=1,i=t[1];n<t.length;){var f=i[0]-c[0],p=i[1]-c[1];if(u+(o=Math.sqrt(f*f+p*p))>l){var d=(l-u)/o;h.push([c[0]+f*d,c[1]+p*d]),s.push(h),h=[c=[c[0]+f*d*a,c[1]+p*d*a]],u=0}else u+=o,c=i,h.push(c),i=t[n+=1]}return s.push(h),s}}])&&iW(e.prototype,r),n&&iW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(S_);function hW(t){return(hW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pW(){return(pW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=dW(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function dW(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vW(t)););return t}function mW(t,e){return(mW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=vW(t);if(e){var i=vW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gW(this,r)}}function gW(t,e){if(e&&("object"===hW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vW(t){return(vW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mW(t,e)}(o,t);var e,r,n,i=yW(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).olStyleFn_=e.updateFacadeOptions(t),e}return e=o,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof lp||(n=e);var i=t,o=new cW,a=bw.getValue;return bz(i)||(o.setColor(a(i.color,n)),o.setColor2(a(i.color2,n)),o.setArrowColor(a(i.arrowColor,n)),o.setWidth(a(i.width,n)),o.setWidth2(a(i.width2,n)),o.setArrow(a(i.arrow,n)),o.setLineCap(a(i.lineCap,n)),o.setOffset(a(i.offset0,n),0),o.setOffset(a(i.offset1,n),1)),[o]}}},{key:"applyToLayer",value:function(t){pW(vW(o.prototype),"applyToLayer",this).call(this,t);var e=t.getImpl().getOL3Layer();bz(e)||(this.postComposeEvtKey_=e.on("postcompose",KV,e))}},{key:"unapply",value:function(){Hi(this.postComposeEvtKey_)}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var e=o.getCanvasSize(),r=Ac(t.getContext("2d"),{size:e}),n=this.olStyleFn_()[0];r.setStyle(n)}}])&&fW(e.prototype,r),n&&fW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(bw);function bW(t){return(bW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xW(t,e){return(xW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function MW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=EW(t);if(e){var i=EW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return SW(this,r)}}function SW(t,e){if(e&&("object"===bW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function EW(t){return(EW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xW(t,e)}(o,t);var e,r,n,i=MW(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,{})).heatmapLayer_=null,n.attribute_=t,n.opt_options_=Zz(e,r),n.opt_options_.zIndex=999999,n.oldOLLayer_=null,n}return e=o,(r=[{key:"applyToLayer",value:function(t){if(this.layer_=t,!bz(t)){var e=this.layer_.getImpl().getOL3Layer();e instanceof TU||(this.oldOLLayer_=e);var r=this.layer_.getFeatures().map((function(t){return t.getImpl().getOLFeature()}));r.forEach((function(t){return t.setStyle(null)})),this.createHeatmapLayer_(r),this.layer_.getImpl().setOL3Layer(this.heatmapLayer_)}}},{key:"unapply",value:function(t){bz(this.oldOLLayer_)||(this.layer_.getImpl().setOL3Layer(this.oldOLLayer_),this.layer_.redraw(),this.layer_=null,this.oldOLLayer_=null,this.heatmapLayer_=null)}},{key:"createHeatmapLayer_",value:function(t){this.opt_options_.source=new Db({features:t}),this.opt_options_.name=this.layer_.name,this.heatmapLayer_=new NU(this.opt_options_)}},{key:"setOptions",value:function(t,e){this.opt_options_=Zz(t,e)}},{key:"getMinWeight",value:function(){return this.heatmapLayer_.getMinWeight()}},{key:"getMaxWeight",value:function(){return this.heatmapLayer_.getMaxWeight()}}])&&wW(e.prototype,r),n&&wW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(fw);function TW(t){return(TW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kW(t,e){return(kW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function RW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=CW(t);if(e){var i=CW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return LW(this,r)}}function LW(t,e){if(e&&("object"===TW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function CW(t){return(CW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kW(t,e)}(o,t);var e,r,n,i=RW(o);function o(){return PW(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"getImageSize",value:function(){return this.iconImage_.getSize()}}])&&IW(e.prototype,r),n&&IW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(bb);function NW(t){return(NW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function FW(t,e){return(FW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function DW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=zW(t);if(e){var i=zW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return BW(this,r)}}function BW(t,e){if(e&&("object"===NW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zW(t){return(zW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FW(t,e)}(s,t);var e,r,n,i=DW(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this,t)).olStyleFn_=e.updateFacadeOptions(t),e}return e=s,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof lp||(n=e);var i=new gS;if(bz(t.stroke)||bz(t.stroke.pattern))bz(t.stroke)||i.setStroke(new g_({color:bw.getValue(t.stroke.color,n,e.layer_),width:bw.getValue(t.stroke.width,n,e.layer_),lineDash:bw.getValue(t.stroke.linedash,n,e.layer_),lineDashOffset:bw.getValue(t.stroke.linedashoffset,n,e.layer_),lineCap:bw.getValue(t.stroke.linecap,n,e.layer_),lineJoin:bw.getValue(t.stroke.linejoin,n,e.layer_),miterLimit:bw.getValue(t.stroke.miterlimit,n,e.layer_)}));else{var s;if(!bz(t.stroke.color)){var u=bw.getValue(t.stroke.color,n,e.layer_),l=bw.getValue(t.stroke.opacity,n,e.layer_);l||0===l||(l=1),bz(u)||(s=new y_({color:xw()(u).alpha(l).css()}))}i.setStroke(new kx({width:bw.getValue(t.stroke.width,n,e.layer_),pattern:(bw.getValue(t.stroke.pattern.name,n,e.layer_)||"").toLowerCase(),image:"Image"===bw.getValue(t.stroke.pattern.name,n,e.layer_)?new bb({src:bw.getValue(t.stroke.pattern.src,n,e.layer_),crossOrigin:"anonymous"}):void 0,color:bz(t.stroke.pattern.color)?"rgba(0,0,0,1)":bw.getValue(t.stroke.pattern.color,n,e.layer_),size:bw.getValue(t.stroke.pattern.size,n,e.layer_),spacing:bw.getValue(t.stroke.pattern.spacing,n,e.layer_),angle:bw.getValue(t.stroke.pattern.rotation,n,e.layer_),scale:bw.getValue(t.stroke.pattern.scale,n,e.layer_),offset:bw.getValue(t.stroke.pattern.offset,n,e.layer_),fill:s,layer:e.layer_}))}if(!bz(t.label)){var c=bw.getValue(t.label.text,n,e.layer_),h=bw.getValue(t.label.align,n,e.layer_),f=bw.getValue(t.label.baseline,n,e.layer_),p=!!bz(t.label.overflow,e.layer_)||t.label.overflow;i.setText(new Cw({font:bw.getValue(t.label.font,n,e.layer_),rotateWithView:bw.getValue(t.label.rotate,n,e.layer_),scale:bw.getValue(t.label.scale,n,e.layer_),offsetX:bw.getValue(t.label.offset?t.label.offset[0]:void 0,n,e.layer_),offsetY:bw.getValue(t.label.ofsset?t.label.offset[1]:void 0,n,e.layer_),fill:new y_({color:bw.getValue(t.label.color||"#000000",n,e.layer_)}),textAlign:Object.values(o).includes(h)?h:"center",textBaseline:Object.values(a).includes(f)?f:"top",text:void 0===c?void 0:String(c),rotation:bw.getValue(t.label.rotation,n,e.layer_),overflow:bw.getValue(p,n,e.layer_)})),bz(t.label.stroke)||i.getText().setStroke(new g_({color:bw.getValue(t.label.stroke.color,n,e.layer_),width:bw.getValue(t.label.stroke.width,n,e.layer_),lineCap:bw.getValue(t.label.stroke.linecap,n,e.layer_),lineJoin:bw.getValue(t.label.stroke.linejoin,n,e.layer_),lineDash:bw.getValue(t.label.stroke.linedash,n,e.layer_),lineDashOffset:bw.getValue(t.label.stroke.linedashoffset,n,e.layer_),miterLimit:bw.getValue(t.label.stroke.miterlimit,n,e.layer_)}))}if(!bz(t.fill)){var d,m=bw.getValue(t.fill.color,n,e.layer_),y=bw.getValue(t.fill.opacity,n,e.layer_);if(y||0===y||(y=1),bz(m)||(d=new y_({color:xw()(m).alpha(y).css()})),bz(t.fill.pattern))i.setFill(d);else{var g="rgba(0,0,0,1)";if(!bz(t.fill.pattern.color)){var v=bw.getValue(t.fill.pattern.opacity,n,e.layer_)||1;v||0===v||(v=1),g=xw()(t.fill.pattern.color).alpha(v).css()}i.setFill(new hx({pattern:(bw.getValue(t.fill.pattern.name,n,e.layer_)||"").toLowerCase(),color:g,size:bw.getValue(t.fill.pattern.size,n,e.layer_),spacing:bw.getValue(t.fill.pattern.spacing,n,e.layer_),image:"Image"===bw.getValue(t.fill.pattern.name,n,e.layer_)?new bb({src:bw.getValue(t.fill.pattern.src,n,e.layer_)}):void 0,angle:bw.getValue(t.fill.pattern.rotation,n,e.layer_),scale:bw.getValue(t.fill.pattern.scale,n,e.layer_),offset:bw.getValue(t.fill.pattern.offset,n,e.layer_),fill:d,layer:e.layer_}))}}if(t.renderer){var _=new y_,b=new g_({color:bw.getValue(t.renderer.stroke.color,n,e.layer_),width:bw.getValue(t.renderer.stroke.width,n,e.layer_)});i.setRenderer((function(r,i,o){var a=new Image,s=bw.getValue(t.renderer.property,n,e.layer_),u=n.get(s).src?n.get(s).src:n.get(s);a.onload=function(){n.set(s,a)},a.src=u;var l=i.context,c=i.geometry.clone();c.setCoordinates(r);var h=c.getExtent(),f=pn(h),p=ln(h),d=i.feature.get(s).src?i.feature.get(s):void 0;if(!(!d||p<1||f<1)){l.save();var m=Ac(l,{pixelRatio:1});m.setFillStrokeStyle(_,b),m.drawGeometry(c),l.clip();var y=nn(h),g=y[0],v=y[1];l.drawImage(d,g,v,f,p),l.restore()}}))}return[i]}}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var e=s.getCanvasSize(),r=Ac(t.getContext("2d"),{size:e}),n=this.olStyleFn_()[0];bz(n.getText())||n.setText(null);var i=n.getStroke();bz(i)||bz(i.getWidth())||i.getWidth()>s.DEFAULT_WIDTH_POLYGON&&n.getStroke().setWidth(s.DEFAULT_WIDTH_POLYGON),r.setStyle(n),this.drawGeometryToCanvas(r)}},{key:"drawGeometryToCanvas",value:function(t){var e=s.getCanvasSize(),r=Math.floor(e[0]),n=Math.floor(e[1]),i=e[0]-r,o=e[1]-n;t.drawGeometry(new ks([[[i+3,o+3],[r-3,o+3],[r-3,n-3],[i+3,n-3],[i+3,o+3]]]))}}])&&jW(e.prototype,r),n&&jW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(bw);GW.DEFAULT_WIDTH_POLYGON=3;var qW=GW,UW=function(t,e,r){return function t(e,r,n){var i=null;if(!bz(e))if(_z(e))for(var o=0;o<e.length&&null===i;o+=1)i=t(e[o],r,n);else if(xz(e)&&(bz(r)||e.Identifier===r)){i=e.WGS84BoundingBox;var a=Un("EPSG:4326"),s=Un(n);i=Dp.transformExtent(i,a,s)}return i}(t.Layer,e,r)};function VW(t){return(VW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var WW=/TMS\*.*/,YW=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(Mz(e)&&t.test(e)){var l=e.split("*")[o];bz(l)||(s=u[n](l))}else xz(e)?s=e[r]:hh("El parámetro no es de un tipo soportado: ".concat(VW(e)));return Mz(s)&&(s=s.trim()),!0===a&&(s=Ez(s)),s}},ZW=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e,r=YW({parameter:t,type:"string",attr:"name"}),n=YW({parameter:t,type:"string",attr:"url"}),i=YW({parameter:t,type:"string",attr:"legend"}),o=YW({parameter:t,type:"boolean",attr:"displayInLayerSwitcher"});return(WW.test(t)||xz(t))&&(e={type:"TMS",name:r(WW,3),url:n(WW,2),legend:i(WW,1),displayInLayerSwitcher:o(WW,4)}),e})),_z(t)||(e=e[0]),e};function HW(t){return(HW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var XW=/XYZ\*.*/,KW=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(Mz(e)&&t.test(e)){var l=e.split("*")[o];bz(l)||(s=u[n](l))}else xz(e)?s=e[r]:hh("El parámetro no es de un tipo soportado: ".concat(HW(e)));return Mz(s)&&(s=s.trim()),!0===a&&(s=Ez(s)),s}},JW=function(t){var e=[];bz(t)&&hh(Oh("exception").no_param);var r=t;return _z(r)||(r=[r]),e=r.map((function(t){var e,r=KW({parameter:t,type:"string",attr:"name"}),n=KW({parameter:t,type:"string",attr:"url"}),i=KW({parameter:t,type:"string",attr:"legend"}),o=KW({parameter:t,type:"boolean",attr:"displayInLayerSwitcher"});return(XW.test(t)||xz(t))&&(e={type:"XYZ",name:r(XW,3),url:n(XW,2),legend:i(XW,1),displayInLayerSwitcher:o(XW,4)}),e})),_z(t)||(e=e[0]),e},$W=function(t){var e=[];return t.forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),e},QW=function(t){for(var e=0;e<t.length;e+=1)if(t[e]<0)return!0;return!1},tY=function(t){for(var e=0;e<t.length;e+=1)if(0===parseFloat(t[e]))return!0;return!1},eY=function(t){for(var e=0,r=0;r<t.length;r+=1)e+=parseFloat(t[r]);return parseFloat(e/t.length)},rY=function(t){for(var e=0,r=eY(t),n=0;n<t.length;n+=1)e+=Math.pow(t[n]-r,2);return Math.sqrt(e/t.length)},nY=function(t,e){for(var r=[],n=[],i=0,o=0;o<t.length+1;o+=1){for(var a=[],s=[],u=0;u<e+1;u+=1)a.push(0),s.push(0);r.push(a),n.push(s)}for(var l=1;l<e+1;l+=1){r[1][l]=1,n[1][l]=0;for(var c=2;c<t.length+1;c+=1)n[c][l]=1/0}for(var h=2;h<t.length+1;h+=1){for(var f=0,p=0,d=0,m=0,y=1;y<h+1;y+=1){var g=h-y+1,v=t[g-1];if(d+=1,f+=v,i=(p+=v*v)-Math.pow(f,2)/d,0!==(m=g-1))for(var _=2;_<e+1;_+=1)n[h][_]>=i+n[m][_-1]&&(r[h][_]=g,n[h][_]=i+n[m][_-1])}r[h][1]=1,n[h][1]=i}return{lowerClassLimits:r,varianceCombinations:n}},iY=function(t,e,r){var n=t.length-1,i=[],o=r;for(i[r]=t[t.length-1],i[0]=t[0];o>1;)i[o-1]=t[e[n][o]-2],n=e[n][o]-1,o-=1;return i},oY=function(t){var e=t;e=e||5;var r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=$W(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));var o=nY(t,i),a=o.lowerClassLimits,s=iY(t,a,i),u=s.slice(1,s.length);return u};return Object.defineProperty(r,"name",{value:"jenks"}),r},aY=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=$W(t),i=n.length<=r?n.length-1:r,o=t.length;t.sort((function(t,e){return t-e}));for(var a=o/i,s=[],u=0;u<i;u+=1){var l=t.slice(u*a,(u+1)*a);u===i-1&&(l=t.slice(u*a));var c=a%1==0?l.slice(-1)[0]:l.slice(0)[0];0===u&&a%1!=0||s.push(c)}return a%1!=0&&s.push(t[t.length-1]),s};return Object.defineProperty(r,"name",{value:"quantile"}),r},sY=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=$W(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));for(var o=t[0],a=t[t.length-1],s=(a-o)/i,u=[],l=o,c=0;c<i;c+=1)l+=s,c===i-1&&(l=a),u.push(l);return u};return Object.defineProperty(r,"name",{value:"equal_interval"}),r},uY=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=$W(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));var o=t[t.length-1],a=t[0],s=rY(t),u=eY(t),l=[];if(i%2==1){var c=Math.floor(i/2),h=c+1;l[c]=u-s,l[h]=u+s;for(var f=c-1;f>0;f-=1)l[f]=l[f+1]-s;for(var p=h+1;p<i;p+=1)l[p]=l[p-1]+s}else{var d=i/2;l[d]=u;for(var m=d-1;m>0;m-=1)l[m]=l[m+1]-s;for(var y=d+1;y<i;y+=1)l[y]=l[y-1]+s}l[0]=a,l[i]=o;var g=l.slice(1,l.length+1);return g};return Object.defineProperty(r,"name",{value:"media_sigma"}),r},lY=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=$W(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));for(var o=0,a=1;a<=i;a+=1)o+=a;for(var s=t[0],u=t[t.length-1],l=(u-s)/o,c=[],h=s,f=1;f<=i;f+=1)h+=f*l,f===i&&(h=u),c.push(h);return c};return Object.defineProperty(r,"name",{value:"arithmetic_progression"}),r},cY=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=$W(t);if(QW(n)||tY(n))return[];var i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));for(var o=t[0],a=t[t.length-1],s=Math.log(o)/Math.LN10,u=Math.log(a)/Math.LN10,l=(u-s)/i,c=[],h=s,f=1;f<i;f+=1)h+=l,c.push(Math.pow(10,h));return c.push(a),c};return Object.defineProperty(r,"name",{value:"geometric_progression"}),r},hY=function(t,e){return new BG((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)<=e}),{cqlFilter:"".concat(t," <= '").concat(e,"'")})};function fY(t){return(fY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pY(t){return function(t){if(Array.isArray(t))return yY(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mY(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||mY(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mY(t,e){if(t){if("string"==typeof t)return yY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yY(t,e):void 0}}function yY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _Y(){return(_Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=bY(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function bY(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=SY(t)););return t}function wY(t,e){return(wY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xY(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=SY(t);if(e){var i=SY(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return MY(this,r)}}function MY(t,e){if(e&&("object"===fY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function SY(t){return(SY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var EY=function(t){var e=Math.pow(10,2);return Math.round(t*e)/e},OY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wY(t,e)}(o,t);var e,r,n,i=xY(o);function o(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oY(),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return gY(this,o),r=i.call(this,a,{}),bz(t)&&hh(Oh("exception").no_attr_name),r.attributeName_=t,r.choroplethStyles_=e,r.quantification_=n,r.breakPoints_=[],r.borderColor=a.borderColor,r}return e=o,n=[{key:"DEFAULT_STYLE",value:function(t,e){return new MM({point:{fill:{color:t,opacity:1},stroke:{color:e||"black",width:1},radius:5},line:{fill:{color:t,opacity:1},stroke:{color:e||"black",width:1}},polygon:{fill:{color:t,opacity:1},stroke:{color:e||"black",width:1}}})}},{key:"deserialize",value:function(t){var e,r=dY(t,5),n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=n,l=i.map((function(t){return c_.deserialize(t)}));e="jenks"===o?oY():"quantile"===o?aY():"equal_interval"===o?sY():"geometric_progression"===o?cY():"arithmetic_progression"===o?lY():"media_sigma"===o?uY():$z(o);var c=$z(a),h=new Function(["attributeName","styles","quantification","options"],"return new M.style.Choropleth(attributeName, styles, quantification, options)")(u,l,e,c),f=s.map((function(t){return c_.deserialize(t)}));return h.add(f),h}}],(r=[{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this.refresh(),this}},{key:"getQuantification",value:function(){return this.quantification_}},{key:"setQuantification",value:function(t){if(this.quantification_=t,!this.choroplethStyles_.some((function(t){return Mz(t)}))){if(this.choroplethStyles_.length<this.quantification_().length){var e=dY(this.choroplethStyles_,2),r=e[0],n=e[1],i=r.get("fill.color"),o=n.get("fill.color");bz(i)&&(i=r.get("stroke.color")),bz(o)&&(o=n.get("stroke.color")),this.choroplethStyles_=[i,o]}else this.choroplethStyles_=this.choroplethStyles_.slice(0,this.quantification_().length);this.update_(),this.refresh()}return this}},{key:"getChoroplethStyles",value:function(){return this.choroplethStyles_}},{key:"setStyles",value:function(t){var e=t;return _z(e)||(e=[e]),this.choroplethStyles_=e,this.update_(),this.refresh(),this}},{key:"updateCanvas",value:function(){var t=this;if(!bz(this.choroplethStyles_)&&this.breakPoints_.length>0){var e=[];this.updateCanvasPromise_=new Promise((function(r,n){return t.loadCanvasImages_(0,e,r)}))}}},{key:"loadCanvasImages_",value:function(t,e,r){var n=this;if(t===this.choroplethStyles_.length)this.drawGeometryToCanvas(e,r);else{var i=-1;t>0&&(i=Number(this.breakPoints_[t-1].toFixed(1)));var o=Number(this.breakPoints_[t].toFixed(1)),a=new Image;a.crossOrigin="Anonymous",a.onload=function(){e.push({image:a,startLimit:EY(i),endLimit:EY(o)}),n.loadCanvasImages_(t+1,e,r)},a.onerror=function(){e.push({startLimit:EY(i),endLimit:EY(o)}),n.loadCanvasImages_(t+1,e,r)},this.choroplethStyles_[t].updateCanvas();var s=this.choroplethStyles_[t].toImage();Mz(s)?a.src=s:s.then((function(t){a.src=t}))}}},{key:"drawGeometryToCanvas",value:function(t,e){var r=this,n=t.map((function(t){return t.image.height})),i=t.map((function(t){return t.image.width})),o=this.canvas_.getContext("2d");o.canvas.height=n.reduce((function(t,e){return t+e+5})),o.textBaseline="middle";var a=Math.max.apply(i,i);t.forEach((function(t,e){var i=t.image,s=t.startLimit,u=t.endLimit,l=0,c=n.slice(0,e);bz(c)||(l=c.reduce((function(t,e){return t+e+5})),l+=5);var h=0;bz(i)||(h=i.height,o.drawImage(i,0,l)),s<0?o.fillText(" x  <=  ".concat(u),a+5,l+h/2):"media_sigma"===r.quantification_.name&&u===Number(Math.max.apply(Math,pY(r.getValues())).toFixed(1))?o.fillText("".concat(s," <= x"),a+5,l+h/2):o.fillText("".concat(s," <  x  <=  ").concat(u),a+5,l+h/2)}),this),e()}},{key:"getValues",value:function(){var t=this,e=[];return bz(this.layer_)||this.layer_.getFeatures().forEach((function(r){try{var n=parseFloat(r.getAttribute(t.attributeName_));Number.isNaN(n)||e.push(n)}catch(t){}}),this),e}},{key:"update_",value:function(){var t,e,r=this;if(!bz(this.layer_)){var n=this.layer_.getFeatures();if(!bz(n)){var i=this.getValues();if(bz(this.choroplethStyles_)||!bz(this.choroplethStyles_)&&(Mz(this.choroplethStyles_[0])||Mz(this.choroplethStyles_[1]))){this.breakPoints_=this.quantification_(i);var a=this.choroplethStyles_||[];yz(a[0])&&a.push(o.START_COLOR_DEFAULT),yz(a[1])&&a.push(o.END_COLOR_DEFAULT);var s=this.breakPoints_.length,u=aG(a,s);_z(u)||(u=[u]),this.choroplethStyles_=(t=u,e=o.DEFAULT_STYLE,t.map((function(t){return e(t,r.borderColor)})))}else this.breakPoints_=this.quantification_(i,this.choroplethStyles_.length)}for(var l=function(t){new hY(r.attributeName_,r.breakPoints_[t]).execute(n).forEach((function(e){return e.setStyle(r.choroplethStyles_[t])}))},c=this.breakPoints_.length-1;c>-1;c-=1)l(c);this.updateCanvas()}}},{key:"add",value:function(t){var e=t;return _z(e)||(e=[e]),e=e.filter((function(t){return t instanceof HS||t instanceof GY})),_Y(SY(o.prototype),"add",this).call(this,e)}},{key:"ORDER",get:function(){return 2}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getChoroplethStyles().map((function(t){return t.serialize()})),r=this.getQuantification();r=bz(r.name)?Jz(r):r.name;var n=Zz({},this.getOptions());return{parameters:[t,e,r,n=Jz(n),this.getStyles().map((function(t){return t.serialize()}))],deserializedMethod:"M.style.Choropleth.deserialize"}}}])&&vY(e.prototype,r),n&&vY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NS);OY.START_COLOR_DEFAULT="red",OY.END_COLOR_DEFAULT="brown";var TY=OY;function PY(t){return(PY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return kY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kY(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function CY(t,e){return(CY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function AY(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jY(t);if(e){var i=jY(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return NY(this,r)}}function NY(t,e){if(e&&("object"===PY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jY(t){return(jY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var FY=function(t,e){var r=void 0,n=void 0,i=t.filter((function(t){return![NaN,void 0,null].includes(t.getAttribute(e))})).map((function(t){return parseInt(t.getAttribute(e),10)})),o=1;if(!bz(i))for(r=i[0],n=i[0];o<i.length-1;){var a=i[o+1];r=r<a?r:a,n=n<a?a:n,o+=1}return[r,n]},DY=function(t,e,r,n,i){var o=.57*Math.log(t);return Math.exp(o)/(Math.exp(.57*Math.log(r))/i)},BY=function(t,e,r,n,i){return(t-e)*(i-n)/(r-e)+n},zY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CY(t,e)}(o,t);var e,r,n,i=AY(o);function o(t,e,r,n,a){var s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return RY(this,o),s=i.call(this,u,{}),bz(t)&&hh(Oh("exception").no_attr_name),s.attributeName_=t,s.minRadius_=parseInt(e,10)||5,s.maxRadius_=parseInt(r,10)||15,s.style_=n,s.proportionalFunction_=a||(!0===s.options_.flannery?DY:BY),s.maxRadius_<s.minRadius_&&(s.minRadius_=r,s.maxRadius_=e),bz(s.style_)||s.styles_.push(s.style_),s}return e=o,n=[{key:"getSizeAttribute",value:function(t){var e="radius";return bz(t.get("icon"))||(e=bz(t.get("icon.src"))?"icon.radius":"icon.scale"),e}},{key:"deserialize",value:function(t){var e=IY(t,6),r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=r,l=n,c=i,h=$z(a),f=$z(s),p=new Function(["attributeName","minRadius","maxRadius","style","proportionalFunction","options"],"return new M.style.Proportional(attributeName,\n    minRadius, maxRadius, style, proportionalFunction, options)")(u,l,c,void 0,h,f),d=o.map((function(t){return c_.deserialize(t)}));return p.add(d),p}}],(r=[{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"applyToFeature",value:function(t,e){var r=this.style_;if(bz(r)&&(r=t.getStyle()?t.getStyle():this.layer_.getStyle()),!bz(r)){r instanceof MM?r=new kF(r.getOptions().point):!(r instanceof kF)&&r instanceof fM||r instanceof TY?r=new kF(r.getOptions()):r instanceof NS&&(r=new kF(r.getOldStyle().getOptions()));var n=this.calculateStyle_(t,{minRadius:this.minRadius_,maxRadius:this.maxRadius_,minValue:this.minValue_,maxValue:this.maxValue_},r);t.setStyle(n)}}},{key:"update_",value:function(){var t=this;if(!bz(this.layer_)){bz(this.style_)||this.layer_.setStyle(this.style_,!0),this.layer_.getStyle()instanceof TY?this.oldStyle_=this.layer_.getStyle():this.layer_.getStyle()instanceof NS?this.oldStyle_=this.layer_.getStyle().getOldStyle():this.oldStyle_=this.layer_.getStyle();var e=IY(FY(this.layer_.getFeatures(),this.attributeName_),2);this.minValue_=e[0],this.maxValue_=e[1],this.layer_.getFeatures().forEach((function(e){return t.applyToFeature(e,1)}));var r=this.oldStyle_.clone();r instanceof fM&&(r.set("zindex",(function(e){return t.maxValue_-parseFloat(e.getAttribute(t.attributeName_))})),r.set(o.getSizeAttribute(r),(function(e){var r=o.SCALE_PROPORTION,n=e.getAttribute(t.attributeName_),i=[n,t.minValue_,t.maxValue_,t.minRadius_,t.maxRadius_],a=t.proportionalFunction_.apply(t,i);if("icon.scale"===o.getSizeAttribute(t.oldStyle_)){var s=t.minRadius_/r,u=t.maxRadius_/r,l=[n,t.minValue_,t.maxValue_,s,u];a=t.proportionalFunction_.apply(t,l)}return a})),this.updateCanvas())}}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this}},{key:"getStyle",value:function(){return console.warn("Deprecated function: Use getStyles instead."),this.style_}},{key:"setStyle",value:function(t){return this.style_=t,this.update_(),this}},{key:"getMinRadius",value:function(){return this.minRadius_}},{key:"setProportionalFunction",value:function(t){this.proportionalFunction_=t,this.update_()}},{key:"getProportionalFunction",value:function(){return this.proportionalFunction_}},{key:"setMinRadius",value:function(t){return this.minRadius_=parseInt(t,10),t>=this.maxRadius_&&hh(Oh("exception").min_gt_max),this.update_(),this}},{key:"getMaxRadius",value:function(){return this.maxRadius_}},{key:"setMaxRadius",value:function(t){return this.maxRadius_=parseInt(t,10),t<=this.minRadius_&&hh(Oh("exception").max_lt_min),this.update_(),this}},{key:"updateCanvas",value:function(){var t=this;this.updateCanvasPromise_=new Promise((function(e,r){if(!bz(t.layer_)){var n=t.styles_.filter((function(t){return t instanceof fM}))[0],i=bz(n)?t.layer_.getStyle():n;if((i=bz(i)?t.style_:i)instanceof fM){var a=i.clone();a instanceof MM?a=new kF(a.getOptions().point):a instanceof kF||(a=new kF(a.getOptions()));var s=o.getSizeAttribute(a),u=a.clone(),l=a.clone(),c=t.getMaxRadius(),h=t.getMinRadius();u.set(s,c),l.set(s,h),t.loadCanvasImage(c,u.toImage(),(function(r){t.loadCanvasImage(h,l.toImage(),(function(n){t.drawGeometryToCanvas(r,n,e)}))}))}else bz(i)||(t.canvas_=i.canvas,e())}}))}},{key:"loadCanvasImage",value:function(t,e,r){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){r({image:n,value:t})},n.onerror=function(){r({value:t})},n.src=e}},{key:"drawGeometryToCanvas",value:function(t,e,r){var n=t.image,i=e.image;this.canvas_.height=n.height+5+i.height+5;var o=this.canvas_.getContext("2d");o.textBaseline="middle";var a=0,s=0;if(bz(n)||(a=n.width+5,s=n.height/2,/^https?:\/\//i.test(n.src)?(this.canvas_.height=130,o.fillText("  max: ".concat(this.maxValue_),85,40),o.drawImage(n,0,0,80,80)):(o.fillText("  max: ".concat(this.maxValue_),a,s),o.drawImage(n,0,0))),!bz(i)){var u=0;bz(n)||(u=n.width/2-i.width/2);var l=n.height+5;s=l+i.height/2,/^https?:\/\//i.test(i.src)?(o.fillText("  min: ".concat(this.minValue_),85,105),o.drawImage(i,20,85,40,40)):(o.fillText("  min: ".concat(this.minValue_),a,s),o.drawImage(i,u,l))}r()}},{key:"calculateStyle_",value:function(t,e,r){var n=this.proportionalFunction_,i=r;if(!bz(i)){i=i.clone();var a=[e.minRadius,e.maxRadius],s=a[0],u=a[1];bz(i.get("icon.src"))||(s=e.minRadius/o.SCALE_PROPORTION,u=e.maxRadius/o.SCALE_PROPORTION);var l=t.getAttribute(this.attributeName_);null==l&&console.warn("Warning: ".concat(this.attributeName_," value is null or empty."));var c=n(l,e.minValue,e.maxValue,s,u),h=e.maxValue-parseFloat(t.getAttribute(this.attributeName_));i.set("".concat(o.getSizeAttribute(i)),c),i.set("zindex",h)}return i}},{key:"ORDER",get:function(){return 3}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getMinRadius(),r=this.getMaxRadius(),n=this.getStyles().map((function(t){return t.serialize()})),i=Jz(this.getProportionalFunction()),o=Zz({},this.getOptions());return{parameters:[t,e,r,n,i,o=Jz(o)],deserializedMethod:"M.style.Proportional.deserialize"}}}])&&LY(e.prototype,r),n&&LY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NS);zY.SCALE_PROPORTION=20;var GY=zY;function qY(t){return(qY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function WY(t,e){return(WY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function YY(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=HY(t);if(e){var i=HY(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ZY(this,r)}}function ZY(t,e){if(e&&("object"===qY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function HY(t){return(HY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WY(t,e)}(o,t);var e,r,n,i=YY(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};UY(this,o);var r=e,n=new qW(r);return t=i.call(this,r,n),bz(r)&&(r=o.DEFAULT_NULL),r=Zz({},r),t}return e=o,(r=[{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Polygon'))"}}])&&VY(e.prototype,r),n&&VY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(fM);XY.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};var KY=XY,JY={generateStyleLayer:function(t,e){var r;switch(e.getGeometryType()){case"Point":case"MultiPoint":r=new kF(t);break;case"LineString":case"MultiLineString":r=new YV(t);break;case"Polygon":case"MultiPolygon":r=new KY(t);break;default:return null}return r},generateRandomGenericStyle:function(t){var e=t.radius,r=xw.a.random().hex(),n=t.strokeColor,i=t.strokeWidth;return new MM({point:{radius:e,fill:{color:r},stroke:{color:n,width:i}},line:{fill:{color:r},stroke:{color:n,width:i}},polygon:{fill:{color:r},stroke:{color:n,width:i}}})}};function $Y(t){return($Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return tZ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tZ(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tZ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nZ(){return(nZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=iZ(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function iZ(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uZ(t)););return t}function oZ(t,e){return(oZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aZ(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uZ(t);if(e){var i=uZ(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return sZ(this,r)}}function sZ(t,e){if(e&&("object"===$Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function uZ(t){return(uZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oZ(t,e)}(o,t);var e,r,n,i=aZ(o);function o(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return eZ(this,o),r=i.call(this,n,{}),bz(t)&&hh(Oh("exception").no_attr_name),r.attributeName_=t,r.categoryStyles_=e,r}return e=o,n=[{key:"deserialize",value:function(t){var e=QY(t,4),r=e[0],n=e[1],i=e[2],o=e[3],a=r,s=n;Object.keys(n).forEach((function(t){s[t]=c_.deserialize(n[t])}));var u=$z(i),l=new Function(["attributeName","categoryStyles","options"],"return new M.style.Category(attributeName, categoryStyles, options)")(a,s,u),c=o.map((function(t){return c_.deserialize(t)}));return l.add(c),l}}],(r=[{key:"ORDER",get:function(){return 2}},{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this.refresh(),this}},{key:"getCategories",value:function(){return this.categoryStyles_}},{key:"setCategories",value:function(t){return this.categoryStyles_=t,this.update_(),this.refresh(),this}},{key:"getStyleForCategory",value:function(t){return this.categoryStyles_[t]}},{key:"setStyleForCategory",value:function(t,e){return this.categoryStyles_[t]=e,this.update_(),this.refresh(),this}},{key:"updateCanvas",value:function(){var t=this,e=[];this.updateCanvasPromise_=new Promise((function(r,n){return t.loadCanvasImages_(0,e,r)}))}},{key:"loadCanvasImages_",value:function(t,e,r){var n=this,i=this.getCategories(),o=Object.keys(i);if(t===o.length)this.drawGeometryToCanvas(e,r);else{var a=o[t],s=this.getStyleForCategory(a),u=new Image;if(u.crossOrigin="Anonymous",u.onload=function(){e.push({image:u,categoryName:a}),n.loadCanvasImages_(t+1,e,r)},u.onerror=function(){e.push({categoryName:a}),n.loadCanvasImages_(t+1,e,r)},s.updateCanvas(),s.get("icon.src"))Kz(s.get("icon.src")).then((function(t){u.width=s.get("icon.scale")?t.width*s.get("icon.scale"):t.width,u.height=s.get("icon.scale")?t.height*s.get("icon.scale"):t.height,s.toImage().then((function(t){u.src=t}))}));else{var l=s.toImage();l instanceof Promise?l.then((function(t){u.src=t})):u.src=l}}}},{key:"drawGeometryToCanvas",value:function(t,e){var r=t.map((function(t){return t.image.height})),n=t.map((function(t){return t.image.width})),i=this.canvas_.getContext("2d");i.canvas.height=r.reduce((function(t,e){return t+e+5})),i.textBaseline="middle";var o=Math.max.apply(n,n);t.forEach((function(t,e){var n=t.image,a=t.categoryName,s=0,u=r.slice(0,e);bz(u)||(s=u.reduce((function(t,e){return t+e+5})),s+=5);var l=0;if(!bz(n)){l=n.height;var c=(o-n.width)/2;i.drawImage(n,c,s,n.width,n.height)}i.fillText(a,o+5,s+l/2)})),e()}},{key:"update_",value:function(){var t=this;if(!bz(this.layer_)){(bz(this.categoryStyles_)||0===Object.keys(this.categoryStyles_).length)&&(this.categoryStyles_=this.generateRandomCategories_());var e=this.categoryStyles_.other;this.layer_.getFeatures().forEach((function(r){var n=r.getAttribute(t.attributeName_),i=t.categoryStyles_[n];bz(i)?bz(e)||r.setStyle(e):r.setStyle(i)})),this.updateCanvas()}}},{key:"add",value:function(t){var e=t;return _z(e)||(e=[e]),e=e.filter((function(t){return t instanceof HS||t instanceof GY})),nZ(uZ(o.prototype),"add",this).call(this,e)}},{key:"generateRandomCategories_",value:function(){var t=this,e={};return bz(this.layer_)||this.layer_.getFeatures().forEach((function(r){var n=r.getAttribute(t.attributeName_);Object.prototype.hasOwnProperty.call(e,n)||(e[n]=JY.generateRandomGenericStyle({radius:o.RANDOM_RADIUS_OPTION,strokeColor:o.RANDOM_STROKE_COLOR_OPTION,strokeWidth:o.RANDOM_STROKE_WIDTH_OPTION}))})),e}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getCategories(),r={};Object.keys(e).forEach((function(t){r[t]=e[t].serialize()}));var n=Zz({},this.getOptions());n=Jz(n);var i=this.getStyles().map((function(t){return t.serialize()}));return{parameters:[t,r,n,i],deserializedMethod:"M.style.Category.deserialize"}}}])&&rZ(e.prototype,r),n&&rZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(NS);lZ.RANDOM_RADIUS_OPTION=10,lZ.RANDOM_STROKE_WIDTH_OPTION=1,lZ.RANDOM_STROKE_COLOR_OPTION="black";var cZ=lZ;function hZ(t){return(hZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pZ(t,e){return(pZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dZ(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yZ(t);if(e){var i=yZ(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mZ(this,r)}}function mZ(t,e){if(e&&("object"===hZ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yZ(t){return(yZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pZ(t,e)}(o,t);var e,r,n,i=dZ(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;bz(e)&&(e=o.DEFAULT_NULL),e=Zz({},e);var r=new _W(e);return i.call(this,e,r)}return e=o,(r=[{key:"unapply",value:function(t){this.getImpl().unapply(t)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.FlowLine'))"}}])&&fZ(e.prototype,r),n&&fZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(fM);gZ.DEFAULT_NULL={color:"red",color2:"yellow",arrowColor:"",width:2,width2:25,arrow:0,lineCap:"butt"};var vZ=gZ;function _Z(t){return(_Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bZ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(t,e)||xZ(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wZ(t){return function(t){if(Array.isArray(t))return MZ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||xZ(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xZ(t,e){if(t){if("string"==typeof t)return MZ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?MZ(t,e):void 0}}function MZ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function SZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function OZ(t,e){return(OZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function TZ(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=IZ(t);if(e){var i=IZ(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PZ(this,r)}}function PZ(t,e){if(e&&("object"===_Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function IZ(t){return(IZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OZ(t,e)}(o,t);var e,r,n,i=TZ(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};SZ(this,o);var a=r,s=n;if(Mz(t)||wz(t)||hh(Oh("exception").no_empty),Zz(a,o.DEFAULT_OPTIONS),bz(a.gradient)||_z(a.gradient)||(a.gradient=[a.gradient]),a.gradient=a.gradient||o.DEFAULT_OPTIONS.gradient,a.gradient.length<2){var u=Yz(a.gradient[0]);a.gradient.push(u)}a.blur=bz(a.blur)?o.DEFAULT_OPTIONS.blur:parseFloat(a.blur),a.radius=bz(a.radius)?o.DEFAULT_OPTIONS.radius:parseFloat(a.radius),a.weight=t,s.opacity=Number.isNaN(parseFloat(s.opacity))?1:parseFloat(s.opacity);var l=new OW(t,a,s);return(e=i.call(this,a,l)).attribute_=t,e.options_=a,e.vendorOptions_=s,e}return e=o,n=[{key:"deserialize",value:function(t){var e=bZ(t,3),r=e[0],n=e[1],i=e[2],o=r,a=$z(n),s=$z(i);return new Function(["attribute","options","vendorOptions"],"return new M.style.Heatmap(attribute, options, vendorOptions)")(o,a,s)}}],(r=[{key:"unapply",value:function(t){this.layer_=null,this.getImpl().unapply(t)}},{key:"getAttributeName",value:function(){return this.attribute_}},{key:"setAttributeName",value:function(t){this.attribute_=t,this.options_.weight=this.attribute_,this.update_()}},{key:"getGradient",value:function(){return this.options_.gradient}},{key:"setGradient",value:function(t){var e=t;if(_z(e)||(e=[e]),e.length<2){var r=Yz(e[0]);e.push(r)}this.options_.gradient=e,this.update_()}},{key:"getRadius",value:function(){return this.options_.radius}},{key:"setRadius",value:function(t){this.options_.radius=t,this.update_()}},{key:"getBlurSize",value:function(){return this.options_.blur}},{key:"setBlurSize",value:function(t){this.options_.blur=t,this.update_()}},{key:"update_",value:function(){var t=this.getImpl();t.unapply(this.layer_),t.setOptions(this.options_,this.vendorOptions_),t.applyToLayer(this.layer_)}},{key:"drawGeometryToCanvas",value:function(){var t=[this.getImpl().getMinWeight(),this.getImpl().getMaxWeight()],e=t[0],r=t[1],n=this.canvas_.getContext("2d"),i=n.createLinearGradient(0,150,200,150),o=Hz([0,1],this.options_.gradient.length);this.options_.gradient.forEach((function(t,e){return i.addColorStop(o[e],t)})),n.fillStyle=i,n.fillRect(0,20,200,30),n.fillStyle="#000",n.font="10px sans-serif",n.fillText(e,0,60),n.fillText(r,199,60)}},{key:"updateCanvas",value:function(){this.drawGeometryToCanvas()}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getOptions();return{parameters:[t,{gradient:wZ(e.gradient),blur:e.blur,radius:e.radius,weight:e.weight},this.vendorOptions_],deserializedMethod:"M.style.Heatmap.deserialize"}}}])&&EZ(e.prototype,r),n&&EZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(c_);kZ.DEFAULT_OPTIONS={gradient:["#00f","#0ff","#0f0","#ff0","#f00"],blur:15,radius:10};var RZ=kZ,LZ=function(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1};class CZ{constructor(t,e){this.low=e||0,this.high=t||0}static toBinaryString(t){let e,r="";for(e=2147483648;e>0;e>>>=1)r+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)r+=(t.low&e)===e?"1":"0";return r}}function AZ(){}function NZ(){}AZ.NaN=NaN,AZ.isNaN=t=>Number.isNaN(t),AZ.isInfinite=t=>!Number.isFinite(t),AZ.MAX_VALUE=Number.MAX_VALUE,AZ.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,AZ.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){const t=new Float64Array(1),e=new Int32Array(t.buffer);AZ.doubleToLongBits=function(r){t[0]=r;let n=0|e[0],i=0|e[1];return 2146435072==(2146435072&i)&&0!=(1048575&i)&&0!==n&&(n=0,i=2146959360),new CZ(i,n)},AZ.longBitsToDouble=function(r){return e[0]=r.low,e[1]=r.high,t[0]}}():function(){const t=Math.log2,e=Math.floor,r=Math.pow,n=function(){for(let n=53;n>0;n--){const i=r(2,n)-1;if(e(t(i))+1===n)return i}return 0}();AZ.doubleToLongBits=function(i){let o,a,s,u,l,c,h,f,p;if(i<0||1/i===Number.NEGATIVE_INFINITY?(c=1<<31,i=-i):c=0,0===i)return p=0,f=c,new CZ(f,p);if(i===1/0)return p=0,f=2146435072|c,new CZ(f,p);if(i!=i)return p=0,f=2146959360,new CZ(f,p);if(u=0,p=0,o=e(i),o>1)if(o<=n)u=e(t(o)),u<=20?(p=0,f=o<<20-u&1048575):(s=u-20,a=r(2,s),p=o%a<<32-s,f=o/a&1048575);else for(s=o,p=0;a=s/2,s=e(a),0!==s;)u++,p>>>=1,p|=(1&f)<<31,f>>>=1,a!==s&&(f|=524288);if(h=u+1023,l=0===o,o=i-o,u<52&&0!==o)for(s=0;;){if(a=2*o,a>=1?(o=a-1,l?(h--,l=!1):(s<<=1,s|=1,u++)):(o=a,l?0==--h&&(u++,l=!1):(s<<=1,u++)),20===u)f|=s,s=0;else if(52===u){p|=s;break}if(1===a){u<20?f|=s<<20-u:u<52&&(p|=s<<52-u);break}}return f|=h<<20,f|=c,new CZ(f,p)},AZ.longBitsToDouble=function(t){let e,n,i,o;const a=t.high,s=t.low,u=a&1<<31?-1:1;for(i=((2146435072&a)>>20)-1023,o=0,n=1<<19,e=1;e<=20;e++)a&n&&(o+=r(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)s&n&&(o+=r(2,-e)),n>>>=1;if(-1023===i){if(0===o)return 0*u;i=-1022}else{if(1024===i)return 0===o?u/0:NaN;o+=1}return u*o*r(2,i)}}();class jZ{getM(t){if(this.hasM()){const e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return AZ.NaN}setOrdinate(t,e,r){}getZ(t){return this.hasZ()?this.getOrdinate(t,2):AZ.NaN}size(){}getOrdinate(t,e){}getCoordinate(){if(1===arguments.length){}else if(2===arguments.length){}}getCoordinateCopy(t){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(t){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}get interfaces_(){return[NZ]}}jZ.X=0,jZ.Y=1,jZ.Z=2,jZ.M=3;class FZ{create(){if(1===arguments.length){if(arguments[0]instanceof Array){}else if(LZ(arguments[0],jZ)){}}else if(2===arguments.length){}else if(3===arguments.length){const t=arguments[0],e=arguments[1];return this.create(t,e)}}}class DZ extends Error{constructor(t){super(t),this.name=Object.keys({Exception:DZ})[0]}toString(){return this.message}}class BZ extends DZ{constructor(t){super(t),this.name=Object.keys({IllegalArgumentException:BZ})[0]}}class zZ{filter(t){}}function GZ(){}function qZ(){}class UZ{static equalsWithTolerance(t,e,r){return Math.abs(t-e)<=r}}function VZ(){}class WZ extends DZ{constructor(t){super(t),this.name=Object.keys({RuntimeException:WZ})[0]}}class YZ extends WZ{constructor(){super(),YZ.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)WZ.constructor_.call(this);else if(1===arguments.length){const t=arguments[0];WZ.constructor_.call(this,t)}}}class ZZ{static shouldNeverReachHere(){if(0===arguments.length)ZZ.shouldNeverReachHere(null);else if(1===arguments.length){const t=arguments[0];throw new YZ("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length){const t=arguments[0];ZZ.isTrue(t,null)}else if(2===arguments.length){const t=arguments[1];if(!arguments[0])throw null===t?new YZ:new YZ(t)}}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];ZZ.equals(t,e,null)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];if(!e.equals(t))throw new YZ("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))}}}const HZ=new ArrayBuffer(8),XZ=new Float64Array(HZ),KZ=new Int32Array(HZ);class JZ{constructor(){JZ.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)JZ.constructor_.call(this,0,0);else if(1===arguments.length){const t=arguments[0];JZ.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];JZ.constructor_.call(this,t,e,JZ.NULL_ORDINATE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this.x=t,this.y=e,this.z=r}}static hashCode(t){return XZ[0]=t,KZ[0]^KZ[1]}getM(){return AZ.NaN}setOrdinate(t,e){switch(t){case JZ.X:this.x=e;break;case JZ.Y:this.y=e;break;case JZ.Z:this.setZ(e);break;default:throw new BZ("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){const t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){const t=arguments[0],e=arguments[1];return!!UZ.equalsWithTolerance(this.x,t.x,e)&&!!UZ.equalsWithTolerance(this.y,t.y,e)}}setM(t){throw new BZ("Invalid ordinate index: "+JZ.M)}getZ(){return this.z}getOrdinate(t){switch(t){case JZ.X:return this.x;case JZ.Y:return this.y;case JZ.Z:return this.getZ()}throw new BZ("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||AZ.isNaN(this.getZ())&&AZ.isNaN(t.getZ()))}equals(t){return t instanceof JZ&&this.equals2D(t)}equalInZ(t,e){return UZ.equalsWithTolerance(this.getZ(),t.getZ(),e)}setX(t){this.x=t}compareTo(t){const e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}getX(){return this.x}setZ(t){this.z=t}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return ZZ.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new JZ(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(t){const e=this.x-t.x,r=this.y-t.y,n=this.getZ()-t.getZ();return Math.sqrt(e*e+r*r+n*n)}getY(){return this.y}setY(t){this.y=t}distance(t){const e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}hashCode(){let t=17;return t=37*t+JZ.hashCode(this.x),t=37*t+JZ.hashCode(this.y),t}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}get interfaces_(){return[GZ,NZ,qZ]}}class $Z{constructor(){$Z.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0===arguments.length)$Z.constructor_.call(this,2);else if(1===arguments.length){const t=arguments[0];if(2!==t&&3!==t)throw new BZ("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}static compare(t,e){return t<e?-1:t>e?1:AZ.isNaN(t)?AZ.isNaN(e)?0:-1:AZ.isNaN(e)?1:0}compare(t,e){const r=$Z.compare(t.x,e.x);if(0!==r)return r;const n=$Z.compare(t.y,e.y);if(0!==n)return n;if(this._dimensionsToTest<=2)return 0;return $Z.compare(t.getZ(),e.getZ())}get interfaces_(){return[VZ]}}JZ.DimensionalComparator=$Z,JZ.NULL_ORDINATE=AZ.NaN,JZ.X=0,JZ.Y=1,JZ.Z=2,JZ.M=3;class QZ{constructor(){QZ.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof JZ){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof QZ){const t=arguments[0];this.init(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.init(t,e,r,n)}}static intersects(){if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];let i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),a=Math.min(t.x,e.x),s=Math.max(t.x,e.x);return!(a>o)&&(!(s<i)&&(i=Math.min(r.y,n.y),o=Math.max(r.y,n.y),a=Math.min(t.y,e.y),s=Math.max(t.y,e.y),!(a>o)&&!(s<i)))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof QZ))return!1;const e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new QZ;const e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new QZ(e,n,r,i)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof JZ){const t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof QZ){const t=arguments[0];return!this.isNull()&&!t.isNull()&&(t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return!this.isNull()&&(t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy)}}intersects(){if(1===arguments.length){if(arguments[0]instanceof QZ){const t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof JZ){const t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof JZ&&arguments[1]instanceof JZ){const t=arguments[0],e=arguments[1];if(this.isNull())return!1;if((t.x<e.x?t.x:e.x)>this._maxx)return!1;if((t.x>e.x?t.x:e.x)<this._minx)return!1;if((t.y<e.y?t.y:e.y)>this._maxy)return!1;return!((t.y>e.y?t.y:e.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof JZ){const t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof QZ){const t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){const e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}copy(){return new QZ(this)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(t){return!(!this.isNull()&&!t.isNull())||(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){const t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof QZ){const t=arguments[0];return this.covers(t)}if(arguments[0]instanceof JZ){const t=arguments[0];return this.covers(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.covers(t,e)}}centre(){return this.isNull()?null:new JZ((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof JZ){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof QZ){const t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),r<n?(this._miny=r,this._maxy=n):(this._miny=n,this._maxy=r)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;let e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);let r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)}hashCode(){let t=17;return t=37*t+JZ.hashCode(this._minx),t=37*t+JZ.hashCode(this._maxx),t=37*t+JZ.hashCode(this._miny),t=37*t+JZ.hashCode(this._maxy),t}get interfaces_(){return[GZ,qZ]}}class tH{constructor(){tH.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===tH.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(tH.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let t;if(1===arguments.length){const e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){const e=arguments[0],r=arguments[1];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,r)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}static checkNotGeometryCollection(t){if(t.getTypeCode()===tH.TYPECODE_GEOMETRYCOLLECTION)throw new BZ("This method does not support GeometryCollection arguments")}equal(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r}norm(){const t=this.copy();return t.normalize(),t}reverse(){const t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}copy(){const t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new QZ(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){const r=t.iterator(),n=e.iterator();for(;r.hasNext()&&n.hasNext();){const t=r.next(),e=n.next(),i=t.compareTo(e);if(0!==i)return i}return r.hasNext()?1:n.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(t){return this.getClass()===t.getClass()}isGeometryCollectionOrDerived(){return this.getTypeCode()===tH.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===tH.TYPECODE_MULTIPOINT||this.getTypeCode()===tH.TYPECODE_MULTILINESTRING||this.getTypeCode()===tH.TYPECODE_MULTIPOLYGON}get interfaces_(){return[NZ,GZ,qZ]}getClass(){return tH}static hasNonEmptyElements(t){for(let e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(let e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}tH.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},tH.TYPECODE_POINT=0,tH.TYPECODE_MULTIPOINT=1,tH.TYPECODE_LINESTRING=2,tH.TYPECODE_LINEARRING=3,tH.TYPECODE_MULTILINESTRING=4,tH.TYPECODE_POLYGON=5,tH.TYPECODE_MULTIPOLYGON=6,tH.TYPECODE_GEOMETRYCOLLECTION=7,tH.TYPENAME_POINT="Point",tH.TYPENAME_MULTIPOINT="MultiPoint",tH.TYPENAME_LINESTRING="LineString",tH.TYPENAME_LINEARRING="LinearRing",tH.TYPENAME_MULTILINESTRING="MultiLineString",tH.TYPENAME_POLYGON="Polygon",tH.TYPENAME_MULTIPOLYGON="MultiPolygon",tH.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",tH.geometryChangedFilter={get interfaces_(){return[zZ]},filter(t){t.geometryChangedAction()}};class eH{filter(t){}}class rH{}class nH{static copyCoord(t,e,r,n){const i=Math.min(t.getDimension(),r.getDimension());for(let o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))}static isRing(t){const e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,jZ.X)===t.getOrdinate(e-1,jZ.X)&&t.getOrdinate(0,jZ.Y)===t.getOrdinate(e-1,jZ.Y))}static scroll(){if(2===arguments.length){if(LZ(arguments[0],jZ)&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];nH.scroll(t,e,nH.isRing(t))}else if(LZ(arguments[0],jZ)&&arguments[1]instanceof JZ){const t=arguments[0],e=arguments[1],r=nH.indexOf(e,t);if(r<=0)return null;nH.scroll(t,r)}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];if(e<=0)return null;const n=t.copy(),i=r?t.size()-1:t.size();for(let r=0;r<i;r++)for(let o=0;o<t.getDimension();o++)t.setOrdinate(r,o,n.getOrdinate((e+r)%i,o));if(r)for(let e=0;e<t.getDimension();e++)t.setOrdinate(i,e,t.getOrdinate(0,e))}}static isEqual(t,e){const r=t.size();if(r!==e.size())return!1;const n=Math.min(t.getDimension(),e.getDimension());for(let i=0;i<r;i++)for(let r=0;r<n;r++){const n=t.getOrdinate(i,r),o=e.getOrdinate(i,r);if(t.getOrdinate(i,r)!==e.getOrdinate(i,r)&&(!AZ.isNaN(n)||!AZ.isNaN(o)))return!1}return!0}static minCoordinateIndex(){if(1===arguments.length){const t=arguments[0];return nH.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let r=-1,n=null;for(let i=arguments[1];i<=e;i++){const e=t.getCoordinate(i);(null===n||n.compareTo(e)>0)&&(n=e,r=i)}return r}}static extend(t,e,r){const n=t.create(r,e.getDimension()),i=e.size();if(nH.copy(e,0,n,0,i),i>0)for(let t=i;t<r;t++)nH.copy(e,i-1,n,t,1);return n}static reverse(t){const e=t.size()-1,r=Math.trunc(e/2);for(let n=0;n<=r;n++)nH.swap(t,n,e-n)}static swap(t,e,r){if(e===r)return null;for(let n=0;n<t.getDimension();n++){const i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}}static copy(t,e,r,n,i){for(let o=0;o<i;o++)nH.copyCoord(t,e+o,r,n+o)}static ensureValidRing(t,e){const r=e.size();if(0===r)return e;if(r<=3)return nH.createClosedRing(t,e,4);return e.getOrdinate(0,jZ.X)===e.getOrdinate(r-1,jZ.X)&&e.getOrdinate(0,jZ.Y)===e.getOrdinate(r-1,jZ.Y)?e:nH.createClosedRing(t,e,r+1)}static indexOf(t,e){for(let r=0;r<e.size();r++)if(t.x===e.getOrdinate(r,jZ.X)&&t.y===e.getOrdinate(r,jZ.Y))return r;return-1}static createClosedRing(t,e,r){const n=t.create(r,e.getDimension()),i=e.size();nH.copy(e,0,n,0,i);for(let t=i;t<r;t++)nH.copy(e,0,n,t,1);return n}static minCoordinate(t){let e=null;for(let r=0;r<t.size();r++){const n=t.getCoordinate(r);(null===e||e.compareTo(n)>0)&&(e=n)}return e}}class iH extends DZ{constructor(t){super(t),this.name=Object.keys({UnsupportedOperationException:iH})[0]}}class oH{static isWhitespace(t){return t<=32&&t>=0||127===t}static toUpperCase(t){return t.toUpperCase()}}class aH{static toDimensionSymbol(t){switch(t){case aH.FALSE:return aH.SYM_FALSE;case aH.TRUE:return aH.SYM_TRUE;case aH.DONTCARE:return aH.SYM_DONTCARE;case aH.P:return aH.SYM_P;case aH.L:return aH.SYM_L;case aH.A:return aH.SYM_A}throw new BZ("Unknown dimension value: "+t)}static toDimensionValue(t){switch(oH.toUpperCase(t)){case aH.SYM_FALSE:return aH.FALSE;case aH.SYM_TRUE:return aH.TRUE;case aH.SYM_DONTCARE:return aH.DONTCARE;case aH.SYM_P:return aH.P;case aH.SYM_L:return aH.L;case aH.SYM_A:return aH.A}throw new BZ("Unknown dimension symbol: "+t)}}aH.P=0,aH.L=1,aH.A=2,aH.FALSE=-1,aH.TRUE=-2,aH.DONTCARE=-3,aH.SYM_FALSE="F",aH.SYM_TRUE="T",aH.SYM_DONTCARE="*",aH.SYM_P="0",aH.SYM_L="1",aH.SYM_A="2";class sH{filter(t){}}class uH{filter(t,e){}isDone(){}isGeometryChanged(){}}class lH extends tH{constructor(){super(),lH.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];tH.constructor_.call(this,e),this.init(t)}}computeEnvelopeInternal(){return this.isEmpty()?new QZ:this._points.expandEnvelope(new QZ)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new lH(this._points.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof tH){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const r=t;if(this._points.size()!==r._points.size())return!1;for(let t=0;t<this._points.size();t++)if(!this.equal(this._points.getCoordinate(t),r._points.getCoordinate(t),e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<Math.trunc(this._points.size()/2);t++){const e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){const t=this._points.copy();nH.reverse(t),this._points=t}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?aH.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){const t=this._points.copy();return nH.reverse(t),this.getFactory().createLineString(t)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return tH.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return class{static ofLine(t){const e=t.size();if(e<=1)return 0;let r=0;const n=new JZ;t.getCoordinate(0,n);let i=n.x,o=n.y;for(let a=1;a<e;a++){t.getCoordinate(a,n);const e=n.x,s=n.y,u=e-i,l=s-o;r+=Math.sqrt(u*u+l*l),i=e,o=s}return r}}.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1===arguments.length){const t=arguments[0];let e=0,r=0;for(;e<this._points.size()&&r<t._points.size();){const n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==n)return n;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(LZ(arguments[0],eH)){const t=arguments[0];for(let e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))}else if(LZ(arguments[0],uH)){const t=arguments[0];if(0===this._points.size())return null;for(let e=0;e<this._points.size()&&(t.filter(this._points,e),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(LZ(arguments[0],sH)){arguments[0].filter(this)}else if(LZ(arguments[0],zZ)){arguments[0].filter(this)}}getBoundary(){throw new iH}isEquivalentClass(t){return t instanceof lH}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return tH.TYPENAME_LINESTRING}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new BZ("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(let e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}get interfaces_(){return[rH]}}class cH{}class hH extends DZ{constructor(t){super(t),this.name=Object.keys({IllegalStateException:hH})[0]}}class fH extends tH{constructor(){super(),fH.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;const t=arguments[0],e=arguments[1];tH.constructor_.call(this,e),this.init(t)}computeEnvelopeInternal(){if(this.isEmpty())return new QZ;const t=new QZ;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new fH(this._coordinates.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof tH){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return aH.FALSE}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return tH.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}getX(){if(null===this.getCoordinate())throw new hH("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){const t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(LZ(arguments[0],eH)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(LZ(arguments[0],uH)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else if(LZ(arguments[0],sH)){arguments[0].filter(this)}else if(LZ(arguments[0],zZ)){arguments[0].filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return tH.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new hH("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),ZZ.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}get interfaces_(){return[cH]}}class pH{static ofRing(){if(arguments[0]instanceof Array){const t=arguments[0];return Math.abs(pH.ofRingSigned(t))}if(LZ(arguments[0],jZ)){const t=arguments[0];return Math.abs(pH.ofRingSigned(t))}}static ofRingSigned(){if(arguments[0]instanceof Array){const t=arguments[0];if(t.length<3)return 0;let e=0;const r=t[0].x;for(let n=1;n<t.length-1;n++){const i=t[n].x-r,o=t[n+1].y;e+=i*(t[n-1].y-o)}return e/2}if(LZ(arguments[0],jZ)){const t=arguments[0],e=t.size();if(e<3)return 0;const r=new JZ,n=new JZ,i=new JZ;t.getCoordinate(0,n),t.getCoordinate(1,i);const o=n.x;i.x-=o;let a=0;for(let s=1;s<e-1;s++)r.y=n.y,n.x=i.x,n.y=i.y,t.getCoordinate(s+1,i),i.x-=o,a+=n.x*(r.y-i.y);return a/2}}}class dH{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class mH extends DZ{constructor(t){super(t),this.name=Object.keys({IndexOutOfBoundsException:mH})[0]}}class yH extends dH{get(){}set(){}isEmpty(){}}class gH extends DZ{constructor(t){super(t),this.name=Object.keys({NoSuchElementException:gH})[0]}}class vH extends yH{constructor(t){super(),this.array=[],t instanceof dH&&this.addAll(t)}get interfaces_(){return[yH,dH]}ensureCapacity(){}add(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(t){for(const e of t)this.array.push(e)}set(t,e){const r=this.array[t];return this.array[t]=e,r}iterator(){return new _H(this)}get(t){if(t<0||t>=this.size())throw new mH;return this.array[t]}isEmpty(){return 0===this.array.length}sort(t){t?this.array.sort((e,r)=>t.compare(e,r)):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(t){for(let e=0,r=this.array.length;e<r;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}[Symbol.iterator](){return this.array.values()}}class _H{constructor(t){this.arrayList=t,this.position=0}next(){if(this.position===this.arrayList.size())throw new gH;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(t){return this.arrayList.set(this.position-1,t)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}}class bH{static sort(){const t=arguments[0];if(1===arguments.length)t.sort((t,e)=>t.compareTo(e));else if(2===arguments.length)t.sort((t,e)=>arguments[1].compare(t,e));else if(3===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort();const r=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of r)t.push(e)}else if(4===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort((t,e)=>arguments[3].compare(t,e));const r=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of r)t.push(e)}}static asList(t){const e=new vH;for(const r of t)e.add(r);return e}static copyOf(t,e){return t.slice(0,e)}}class wH{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class xH{constructor(t){this.value=t}intValue(){return this.value}compareTo(t){return this.value<t?-1:this.value>t?1:0}static compare(t,e){return t<e?-1:t>e?1:0}static isNan(t){return Number.isNaN(t)}static valueOf(t){return new xH(t)}}class MH{constructor(){MH.constructor_.apply(this,arguments)}static constructor_(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this.init(t)}else if(arguments[0]instanceof MH){const t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){const t=arguments[0];MH.constructor_.call(this,MH.parse(t))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t,e)}}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];return MH.determinant(MH.valueOf(t),MH.valueOf(e),MH.valueOf(r),MH.valueOf(n))}if(arguments[3]instanceof MH&&arguments[2]instanceof MH&&arguments[0]instanceof MH&&arguments[1]instanceof MH){const t=arguments[1],e=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(t.multiply(e))}}static sqr(t){return MH.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){const t=arguments[0];return MH.parse(t)}if("number"==typeof arguments[0]){return new MH(arguments[0])}}static sqrt(t){return MH.valueOf(t).sqrt()}static parse(t){let e=0;const r=t.length;for(;oH.isWhitespace(t.charAt(e));)e++;let n=!1;if(e<r){const r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(n=!0))}const i=new MH;let o=0,a=0,s=0,u=!1;for(;!(e>=r);){const r=t.charAt(e);if(e++,oH.isDigit(r)){const t=r-"0";i.selfMultiply(MH.TEN),i.selfAdd(t),o++}else{if("."!==r){if("e"===r||"E"===r){const r=t.substring(e);try{s=xH.parseInt(r)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+r+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+r+"' at position "+e+" in string "+t)}a=o,u=!0}}let l=i;u||(a=o);const c=o-a-s;if(0===c)l=i;else if(c>0){const t=MH.TEN.pow(c);l=i.divide(t)}else if(c<0){const t=MH.TEN.pow(-c);l=i.multiply(t)}return n?l.negate():l}static createNaN(){return new MH(AZ.NaN,AZ.NaN)}static copy(t){return new MH(t)}static magnitude(t){const e=Math.abs(t),r=Math.log(e)/Math.log(10);let n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n}static stringOfChar(t,e){const r=new wH;for(let n=0;n<e;n++)r.append(t);return r.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){let r=this.abs(),n=MH.magnitude(r._hi);const i=MH.TEN.pow(n);r=r.divide(i),r.gt(MH.TEN)?(r=r.divide(MH.TEN),n+=1):r.lt(MH.ONE)&&(r=r.multiply(MH.TEN),n-=1);const o=n+1,a=new wH,s=MH.MAX_PRINT_DIGITS-1;for(let e=0;e<=s;e++){t&&e===o&&a.append(".");const n=Math.trunc(r._hi);if(n<0)break;let i=!1,u=0;n>9?(i=!0,u="9"):u="0"+n,a.append(u),r=r.subtract(MH.valueOf(n)).multiply(MH.TEN),i&&r.selfAdd(MH.TEN);let l=!0;const c=MH.magnitude(r._hi);if(c<0&&Math.abs(c)>=s-e&&(l=!1),!l)break}return e[0]=n,a.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof MH){const t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){const t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof MH){const t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof MH){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof MH){const t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null,u=null,l=null;return a=this._hi/t,s=MH.SPLIT*a,r=s-a,l=MH.SPLIT*t,r=s-r,n=a-r,i=l-t,u=a*t,i=l-i,o=t-i,l=r*i-u+r*o+n*i+n*o,s=(this._hi-u-l+this._lo-a*e)/t,l=a+s,this._hi=l,this._lo=a-l+s,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof MH){const t=arguments[0];let e=null,r=null,n=null,i=null,o=null,a=null,s=null,u=null;o=this._hi/t._hi,a=MH.SPLIT*o,e=a-o,u=MH.SPLIT*t._hi,e=a-e,r=o-e,n=u-t._hi,s=o*t._hi,n=u-n,i=t._hi-n,u=e*n-s+e*i+r*n+r*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,u=o+a;return new MH(u,o-u+a)}if("number"==typeof arguments[0]){const t=arguments[0];return AZ.isNaN(t)?MH.createNaN():MH.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return MH.valueOf(1);let e=new MH(this),r=MH.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),n/=2,n>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r}ceil(){if(this.isNaN())return MH.NaN;const t=Math.ceil(this._hi);let e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new MH(t,e)}compareTo(t){const e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){if(this.isNaN())return this;return this.add(.5).floor()}setValue(){if(arguments[0]instanceof MH){const t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){const t=arguments[0];return this.init(t),this}}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return MH.valueOf(0);if(this.isNegative())return MH.NaN;const t=1/Math.sqrt(this._hi),e=this._hi*t,r=MH.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof MH){const t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];let e=null,r=null,n=null,i=null,o=null,a=null;return n=this._hi+t,o=n-this._hi,i=n-o,i=t-o+(this._hi-i),a=i+this._lo,e=n+a,r=a+(n-e),this._hi=e+r,this._lo=r+(e-this._hi),this}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null,u=null,l=null;a=this._hi+t,i=this._lo+e,u=a-this._hi,l=i-this._lo,s=a-u,o=i-l,s=t-u+(this._hi-s),o=e-l+(this._lo-o),u=s+i,r=a+u,n=u+(a-r),u=o+n;const c=r+u,h=u+(r-c);return this._hi=c,this._lo=h,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof MH){const t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null;a=MH.SPLIT*this._hi,r=a-this._hi,s=MH.SPLIT*t,r=a-r,n=this._hi-r,i=s-t,a=this._hi*t,i=s-i,o=t-i,s=r*i-a+r*o+n*i+n*o+(this._hi*e+this._lo*t);const u=a+s;r=a-u;const l=s+r;return this._hi=u,this._lo=l,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return MH.NaN;const t=Math.floor(this._hi);let e=0;return t===this._hi&&(e=Math.floor(this._lo)),new MH(t,e)}negate(){return this.isNaN()?this:new MH(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof MH){const t=arguments[0];return t.isNaN()?MH.createNaN():MH.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){const t=arguments[0];return AZ.isNaN(t)?MH.createNaN():MH.copy(this).selfMultiply(t,0)}}isNaN(){return AZ.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){const t=MH.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1;let i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+MH.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){const t=n-r.length;i=r+MH.stringOfChar("0",t)+".0"}return this.isNegative()?"-"+i:i}reciprocal(){let t=null,e=null,r=null,n=null,i=null,o=null,a=null,s=null;i=1/this._hi,o=MH.SPLIT*i,t=o-i,s=MH.SPLIT*this._hi,t=o-t,e=i-t,r=s-this._hi,a=i*this._hi,r=s-r,n=this._hi-r,s=t*r-a+t*n+e*r+e*n,o=(1-a-s-i*this._lo)/this._hi;const u=i+o;return new MH(u,i-u+o)}toSciNotation(){if(this.isZero())return MH.SCI_NOT_ZERO;const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=MH.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new hH("Found leading zero: "+r);let i="";r.length>1&&(i=r.substring(1));const o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n}abs(){return this.isNaN()?MH.NaN:this.isNegative()?this.negate():new MH(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof MH){const t=arguments[0];return MH.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){const t=arguments[0];return MH.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof MH){const t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?MH.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[qZ,GZ,NZ]}}MH.PI=new MH(3.141592653589793,12246467991473532e-32),MH.TWO_PI=new MH(6.283185307179586,24492935982947064e-32),MH.PI_2=new MH(1.5707963267948966,6123233995736766e-32),MH.E=new MH(2.718281828459045,14456468917292502e-32),MH.NaN=new MH(AZ.NaN,AZ.NaN),MH.EPS=123259516440783e-46,MH.SPLIT=134217729,MH.MAX_PRINT_DIGITS=32,MH.TEN=MH.valueOf(10),MH.ONE=MH.valueOf(1),MH.SCI_NOT_EXPONENT_CHAR="E",MH.SCI_NOT_ZERO="0.0E0";class SH{static orientationIndex(t,e,r){const n=SH.orientationIndexFilter(t,e,r);if(n<=1)return n;const i=MH.valueOf(e.x).selfAdd(-t.x),o=MH.valueOf(e.y).selfAdd(-t.y),a=MH.valueOf(r.x).selfAdd(-e.x),s=MH.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()}static signOfDet2x2(){if(arguments[3]instanceof MH&&arguments[2]instanceof MH&&arguments[0]instanceof MH&&arguments[1]instanceof MH){const t=arguments[1],e=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],i=MH.valueOf(t),o=MH.valueOf(e),a=MH.valueOf(r),s=MH.valueOf(n);return i.multiply(s).selfSubtract(o.multiply(a)).signum()}}static intersection(t,e,r,n){const i=new MH(t.y).selfSubtract(e.y),o=new MH(e.x).selfSubtract(t.x),a=new MH(t.x).selfMultiply(e.y).selfSubtract(new MH(e.x).selfMultiply(t.y)),s=new MH(r.y).selfSubtract(n.y),u=new MH(n.x).selfSubtract(r.x),l=new MH(r.x).selfMultiply(n.y).selfSubtract(new MH(n.x).selfMultiply(r.y)),c=o.multiply(l).selfSubtract(u.multiply(a)),h=s.multiply(a).selfSubtract(i.multiply(l)),f=i.multiply(u).selfSubtract(s.multiply(o)),p=c.selfDivide(f).doubleValue(),d=h.selfDivide(f).doubleValue();return AZ.isNaN(p)||AZ.isInfinite(p)||AZ.isNaN(d)||AZ.isInfinite(d)?null:new JZ(p,d)}static orientationIndexFilter(t,e,r){let n=null;const i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),a=i-o;if(i>0){if(o<=0)return SH.signum(a);n=i+o}else{if(!(i<0))return SH.signum(a);if(o>=0)return SH.signum(a);n=-i-o}const s=SH.DP_SAFE_EPSILON*n;return a>=s||-a>=s?SH.signum(a):2}static signum(t){return t>0?1:t<0?-1:0}}SH.DP_SAFE_EPSILON=1e-15;class EH{static index(t,e,r){return SH.orientationIndex(t,e,r)}static isCCW(){if(arguments[0]instanceof Array){const t=arguments[0],e=t.length-1;if(e<3)throw new BZ("Ring has fewer than 4 points, so orientation cannot be determined");let r=t[0],n=0;for(let i=1;i<=e;i++){const e=t[i];e.y>r.y&&(r=e,n=i)}let i=n;do{i-=1,i<0&&(i=e)}while(t[i].equals2D(r)&&i!==n);let o=n;do{o=(o+1)%e}while(t[o].equals2D(r)&&o!==n);const a=t[i],s=t[o];if(a.equals2D(r)||s.equals2D(r)||a.equals2D(s))return!1;const u=EH.index(a,r,s);let l=null;return l=0===u?a.x>s.x:u>0,l}if(LZ(arguments[0],jZ)){const t=arguments[0],e=t.size()-1;if(e<3)throw new BZ("Ring has fewer than 4 points, so orientation cannot be determined");let r=t.getCoordinate(0),n=0;for(let i=1;i<=e;i++){const e=t.getCoordinate(i);e.y>r.y&&(r=e,n=i)}let i=null,o=n;do{o-=1,o<0&&(o=e),i=t.getCoordinate(o)}while(i.equals2D(r)&&o!==n);let a=null,s=n;do{s=(s+1)%e,a=t.getCoordinate(s)}while(a.equals2D(r)&&s!==n);if(i.equals2D(r)||a.equals2D(r)||i.equals2D(a))return!1;const u=EH.index(i,r,a);let l=null;return l=0===u?i.x>a.x:u>0,l}}}EH.CLOCKWISE=-1,EH.RIGHT=EH.CLOCKWISE,EH.COUNTERCLOCKWISE=1,EH.LEFT=EH.COUNTERCLOCKWISE,EH.COLLINEAR=0,EH.STRAIGHT=EH.COLLINEAR;class OH{}class TH extends tH{constructor(){super(),TH.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],r=arguments[2];if(tH.constructor_.call(this,r),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),tH.hasNullElements(e))throw new BZ("holes must not contain null elements");if(t.isEmpty()&&tH.hasNonEmptyElements(e))throw new BZ("shell is empty but holes are not");this._shell=t,this._holes=e}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];const t=new Array(this.getNumPoints()).fill(null);let e=-1;const r=this._shell.getCoordinates();for(let n=0;n<r.length;n++)e++,t[e]=r[n];for(let r=0;r<this._holes.length;r++){const n=this._holes[r].getCoordinates();for(let r=0;r<n.length;r++)e++,t[e]=n[r]}return t}getArea(){let t=0;t+=pH.ofRing(this._shell.getCoordinateSequence());for(let e=0;e<this._holes.length;e++)t-=pH.ofRing(this._holes[e].getCoordinateSequence());return t}copyInternal(){const t=this._shell.copy(),e=new Array(this._holes.length).fill(null);for(let t=0;t<this._holes.length;t++)e[t]=this._holes[t].copy();return new TH(t,e,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;const t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal();for(let r=0;r<5;r++){const n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;const i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}let r=t.getX(0),n=t.getY(0);for(let e=1;e<=4;e++){const i=t.getX(e),o=t.getY(e);if(i!==r===(o!==n))return!1;r=i,n=o}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof tH){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const r=t,n=this._shell,i=r._shell;if(!n.equalsExact(i,e))return!1;if(this._holes.length!==r._holes.length)return!1;for(let t=0;t<this._holes.length;t++)if(!this._holes[t].equalsExact(r._holes[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(let t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);bH.sort(this._holes)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t.isEmpty())return null;const r=t.getCoordinateSequence(),n=nH.minCoordinateIndex(r,0,r.size()-2);nH.scroll(r,n,!0),EH.isCCW(r)===e&&nH.reverse(r)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}reverseInternal(){const t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null);for(let t=0;t<e.length;t++)e[t]=this.getInteriorRingN(t).reverse();return this.getFactory().createPolygon(t,e)}getTypeCode(){return tH.TYPECODE_POLYGON}getDimension(){return 2}getLength(){let t=0;t+=this._shell.getLength();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){let t=this._shell.getNumPoints();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}convexHull(){return this.getExteriorRing().convexHull()}normalized(t,e){const r=t.copy();return this.normalize(r,e),r}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=this._shell,r=t._shell;return e.compareToSameClass(r)}if(2===arguments.length){const t=arguments[1],e=arguments[0],r=this._shell,n=e._shell,i=r.compareToSameClass(n,t);if(0!==i)return i;const o=this.getNumInteriorRing(),a=e.getNumInteriorRing();let s=0;for(;s<o&&s<a;){const r=this.getInteriorRingN(s),n=e.getInteriorRingN(s),i=r.compareToSameClass(n,t);if(0!==i)return i;s++}return s<o?1:s<a?-1:0}}apply(){if(LZ(arguments[0],eH)){const t=arguments[0];this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(LZ(arguments[0],uH)){const t=arguments[0];if(this._shell.apply(t),!t.isDone())for(let e=0;e<this._holes.length&&(this._holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(LZ(arguments[0],sH)){arguments[0].filter(this)}else if(LZ(arguments[0],zZ)){const t=arguments[0];t.filter(this),this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(let e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return tH.TYPENAME_POLYGON}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}get interfaces_(){return[OH]}}class PH extends dH{contains(){}}class IH extends PH{}class kH extends IH{constructor(t){super(),this.array=[],t instanceof dH&&this.addAll(t)}contains(t){for(const e of this.array)if(0===e.compareTo(t))return!0;return!1}add(t){if(this.contains(t))return!1;for(let e=0,r=this.array.length;e<r;e++){if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t)}return this.array.push(t),!0}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new iH}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new RH(this.array)}}class RH{constructor(t){this.array=t,this.position=0}next(){if(this.position===this.array.length)throw new gH;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new iH}}class LH extends tH{constructor(){super(),LH.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(tH.constructor_.call(this,e),null===t&&(t=[]),tH.hasNullElements(t))throw new BZ("geometries must not contain null elements");this._geometries=t}}computeEnvelopeInternal(){const t=new QZ;for(let e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){const t=new Array(this.getNumPoints()).fill(null);let e=-1;for(let r=0;r<this._geometries.length;r++){const n=this._geometries[r].getCoordinates();for(let r=0;r<n.length;r++)e++,t[e]=n[r]}return t}getArea(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new LH(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof tH){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const r=t;if(this._geometries.length!==r._geometries.length)return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].equalsExact(r._geometries[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<this._geometries.length;t++)this._geometries[t].normalize();bH.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let t=aH.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}reverseInternal(){const t=this._geometries.length,e=new vH(t);for(let r=0;r<t;r++)e.add(this._geometries[r].reverse());return this.getFactory().buildGeometry(e)}getTypeCode(){return tH.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let t=aH.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=new kH(bH.asList(this._geometries)),r=new kH(bH.asList(t._geometries));return this.compare(e,r)}if(2===arguments.length){const t=arguments[1],e=arguments[0],r=this.getNumGeometries(),n=e.getNumGeometries();let i=0;for(;i<r&&i<n;){const r=this.getGeometryN(i),n=e.getGeometryN(i),o=r.compareToSameClass(n,t);if(0!==o)return o;i++}return i<r?1:i<n?-1:0}}apply(){if(LZ(arguments[0],eH)){const t=arguments[0];for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(LZ(arguments[0],uH)){const t=arguments[0];if(0===this._geometries.length)return null;for(let e=0;e<this._geometries.length&&(this._geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(LZ(arguments[0],sH)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(LZ(arguments[0],zZ)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}}getBoundary(){return tH.checkNotGeometryCollection(this),ZZ.shouldNeverReachHere(),null}getGeometryType(){return tH.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}class CH extends LH{constructor(){super(),CH.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];LH.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new CH(t,this._factory)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof tH){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){const t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return aH.FALSE}getTypeCode(){return tH.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return tH.TYPENAME_MULTIPOINT}get interfaces_(){return[cH]}}class AH extends lH{constructor(){super(),AH.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];lH.constructor_.call(this,t,e),this.validateConstruction()}copyInternal(){return new AH(this._points.copy(),this._factory)}getBoundaryDimension(){return aH.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){const t=this._points.copy();return nH.reverse(t),this.getFactory().createLinearRing(t)}getTypeCode(){return tH.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new BZ("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<AH.MINIMUM_VALID_SIZE)throw new BZ("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return tH.TYPENAME_LINEARRING}}AH.MINIMUM_VALID_SIZE=4;class NH extends JZ{constructor(){super(),NH.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)JZ.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof NH){const t=arguments[0];JZ.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof JZ){const t=arguments[0];JZ.constructor_.call(this,t.x,t.y)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];JZ.constructor_.call(this,t,e,JZ.NULL_ORDINATE)}}setOrdinate(t,e){switch(t){case NH.X:this.x=e;break;case NH.Y:this.y=e;break;default:throw new BZ("Invalid ordinate index: "+t)}}getZ(){return JZ.NULL_ORDINATE}getOrdinate(t){switch(t){case NH.X:return this.x;case NH.Y:return this.y}throw new BZ("Invalid ordinate index: "+t)}setZ(t){throw new BZ("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new NH(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}NH.X=0,NH.Y=1,NH.Z=-1,NH.M=-1;class jH extends JZ{constructor(){super(),jH.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)JZ.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof jH){const t=arguments[0];JZ.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof JZ){const t=arguments[0];JZ.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];JZ.constructor_.call(this,t,e,JZ.NULL_ORDINATE),this._m=r}}getM(){return this._m}setOrdinate(t,e){switch(t){case jH.X:this.x=e;break;case jH.Y:this.y=e;break;case jH.M:this._m=e;break;default:throw new BZ("Invalid ordinate index: "+t)}}setM(t){this._m=t}getZ(){return JZ.NULL_ORDINATE}getOrdinate(t){switch(t){case jH.X:return this.x;case jH.Y:return this.y;case jH.M:return this._m}throw new BZ("Invalid ordinate index: "+t)}setZ(t){throw new BZ("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new jH(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}jH.X=0,jH.Y=1,jH.Z=-1,jH.M=2;class FH extends JZ{constructor(){super(),FH.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)JZ.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof FH){const t=arguments[0];JZ.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof JZ){const t=arguments[0];JZ.constructor_.call(this,t),this._m=this.getM()}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];JZ.constructor_.call(this,t,e,r),this._m=n}}getM(){return this._m}setOrdinate(t,e){switch(t){case JZ.X:this.x=e;break;case JZ.Y:this.y=e;break;case JZ.Z:this.z=e;break;case JZ.M:this._m=e;break;default:throw new BZ("Invalid ordinate index: "+t)}}setM(t){this._m=t}getOrdinate(t){switch(t){case JZ.X:return this.x;case JZ.Y:return this.y;case JZ.Z:return this.getZ();case JZ.M:return this.getM()}throw new BZ("Invalid ordinate index: "+t)}copy(){return new FH(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}class DH{static measures(t){return t instanceof NH?0:t instanceof jH||t instanceof FH?1:0}static dimension(t){return t instanceof NH?2:t instanceof jH?3:t instanceof FH?4:3}static create(){if(1===arguments.length){const t=arguments[0];return DH.create(t,0)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return 2===t?new NH:3===t&&0===e?new JZ:3===t&&1===e?new jH:4===t&&1===e?new FH:new JZ}}}class BH extends vH{constructor(){super(),BH.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&LZ(arguments[0],dH)){const t=arguments[1];let e=!1;for(let r=arguments[0].iterator();r.hasNext();)this.add(r.next(),t),e=!0;return e}return super.addAll.apply(this,arguments)}clone(){const t=super.clone.call(this);for(let e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){if(0===arguments.length)return this.toArray(BH.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(BH.coordArrayType);const t=this.size(),e=new Array(t).fill(null);for(let r=0;r<t;r++)e[r]=this.get(t-r-1);return e}}add(){if(1===arguments.length){const t=arguments[0];return super.add.call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof JZ&&"boolean"==typeof arguments[1]){const t=arguments[0];if(!arguments[1]&&this.size()>=1){if(this.get(this.size()-1).equals2D(t))return null}super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(arguments[2])for(let r=0;r<t.length;r++)this.add(t[r],e);else for(let r=t.length-1;r>=0;r--)this.add(t[r],e);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof JZ){const t=arguments[0],e=arguments[1];if(!arguments[2]){const r=this.size();if(r>0){if(t>0){if(this.get(t-1).equals2D(e))return null}if(t<r){if(this.get(t).equals2D(e))return null}}}super.add.call(this,t,e)}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];let i=1;r>n&&(i=-1);for(let o=r;o!==n;o+=i)this.add(t[o],e);return!0}}closeRing(){if(this.size()>0){const t=this.get(0).copy();this.add(t,!1)}}}BH.coordArrayType=new Array(0).fill(null);class zH{static log10(t){const e=Math.log(t);return AZ.isInfinite(e)||AZ.isNaN(e)?e:e/zH.LOG_10}static min(t,e,r,n){let i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){const t=arguments[1],e=arguments[2];let r=arguments[0];return t>r&&(r=t),e>r&&(r=e),r}if(4===arguments.length){const t=arguments[1],e=arguments[2],r=arguments[3];let n=arguments[0];return t>n&&(n=t),e>n&&(n=e),r>n&&(n=r),n}}static average(t,e){return(t+e)/2}}zH.LOG_10=Math.log(10);class GH{static arraycopy(t,e,r,n,i){let o=0;for(let a=e;a<e+i;a++)r[n+o]=t[a],o++}static getProperty(t){return{"line.separator":"\n"}[t]}}class qH{static isRing(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}static ptNotInList(t,e){for(let r=0;r<t.length;r++){const n=t[r];if(qH.indexOf(n,e)<0)return n}return null}static scroll(t,e){const r=qH.indexOf(e,t);if(r<0)return null;const n=new Array(t.length).fill(null);GH.arraycopy(t,r,n,0,t.length-r),GH.arraycopy(t,0,n,t.length-r,r),GH.arraycopy(n,0,t,0,t.length)}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(0!==r.compare(t[n],e[n]))return!1;return!0}}static intersection(t,e){const r=new BH;for(let n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()}static measures(t){if(null===t||0===t.length)return 0;let e=0;for(const r of t)e=Math.max(e,DH.measures(r));return e}static hasRepeatedPoints(t){for(let e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){if(!qH.hasRepeatedPoints(t))return t;return new BH(t,!1).toCoordinateArray()}static reverse(t){const e=t.length-1,r=Math.trunc(e/2);for(let n=0;n<=r;n++){const r=t[n];t[n]=t[e-n],t[e-n]=r}}static removeNull(t){let e=0;for(let r=0;r<t.length;r++)null!==t[r]&&e++;const r=new Array(e).fill(null);if(0===e)return r;let n=0;for(let e=0;e<t.length;e++)null!==t[e]&&(r[n++]=t[e]);return r}static copyDeep(){if(1===arguments.length){const t=arguments[0],e=new Array(t.length).fill(null);for(let r=0;r<t.length;r++)e[r]=t[r].copy();return e}if(5===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4];for(let o=0;o<i;o++)r[n+o]=t[e+o].copy()}}static isEqualReversed(t,e){for(let r=0;r<t.length;r++){const n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0}static envelope(t){const e=new QZ;for(let r=0;r<t.length;r++)e.expandToInclude(t[r]);return e}static toCoordinateArray(t){return t.toArray(qH.coordArrayType)}static dimension(t){if(null===t||0===t.length)return 3;let e=0;for(const r of t)e=Math.max(e,DH.dimension(r));return e}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(let r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1}static increasingDirection(t){for(let e=0;e<Math.trunc(t.length/2);e++){const r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1}static compare(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0}static minCoordinate(t){let e=null;for(let r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e}static extract(t,e,r){e=zH.clamp(e,0,t.length);let n=(r=zH.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);const i=new Array(n).fill(null);if(0===n)return i;let o=0;for(let n=e;n<=r;n++)i[o++]=t[n];return i}}qH.ForwardComparator=class{compare(t,e){const r=t,n=e;return qH.compare(r,n)}get interfaces_(){return[VZ]}},qH.BidirectionalComparator=class{compare(t,e){const r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;const i=qH.compare(r,n);return qH.isEqualReversed(r,n)?0:i}OLDcompare(t,e){const r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;const i=qH.increasingDirection(r),o=qH.increasingDirection(n);let a=i>0?0:r.length-1,s=o>0?0:r.length-1;for(let t=0;t<r.length;t++){const t=r[a].compareTo(n[s]);if(0!==t)return t;a+=i,s+=o}return 0}get interfaces_(){return[VZ]}},qH.coordArrayType=new Array(0).fill(null);class UH{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class VH{constructor(){VH.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];VH.constructor_.call(this,t,qH.dimension(t),qH.measures(t))}else if(Number.isInteger(arguments[0])){const t=arguments[0];this._coordinates=new Array(t).fill(null);for(let e=0;e<t;e++)this._coordinates[e]=new JZ}else if(LZ(arguments[0],jZ)){const t=arguments[0];if(null===t)return this._coordinates=new Array(0).fill(null),null;this._dimension=t.getDimension(),this._measures=t.getMeasures(),this._coordinates=new Array(t.size()).fill(null);for(let e=0;e<this._coordinates.length;e++)this._coordinates[e]=t.getCoordinateCopy(e)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];VH.constructor_.call(this,t,e,qH.measures(t))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];this._coordinates=new Array(t).fill(null),this._dimension=e;for(let r=0;r<t;r++)this._coordinates[r]=DH.create(e)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],r=arguments[2];this._dimension=e,this._measures=r,this._coordinates=null===t?new Array(0).fill(null):t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],r=arguments[2];this._coordinates=new Array(t).fill(null),this._dimension=e,this._measures=r;for(let e=0;e<t;e++)this._coordinates[e]=this.createCoordinate()}}getM(t){return this.hasM()?this._coordinates[t].getM():AZ.NaN}setOrdinate(t,e,r){switch(e){case jZ.X:this._coordinates[t].x=r;break;case jZ.Y:this._coordinates[t].y=r;break;default:this._coordinates[t].setOrdinate(e,r)}}getZ(t){return this.hasZ()?this._coordinates[t].getZ():AZ.NaN}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case jZ.X:return this._coordinates[t].x;case jZ.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}getCoordinate(){if(1===arguments.length){const t=arguments[0];return this._coordinates[t]}if(2===arguments.length){const t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}getCoordinateCopy(t){const e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}createCoordinate(){return DH.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}getMeasures(){return this._measures}expandEnvelope(t){for(let e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){const t=new Array(this.size()).fill(null);for(let e=0;e<this._coordinates.length;e++){const r=this.createCoordinate();r.setCoordinate(this._coordinates[e]),t[e]=r}return new VH(t,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){const t=new UH(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(let e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}get interfaces_(){return[jZ,qZ]}}class WH{static instance(){return WH.instanceObject}readResolve(){return WH.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){return new VH(arguments[0])}if(LZ(arguments[0],jZ)){return new VH(arguments[0])}}else{if(2===arguments.length){let t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new VH(arguments[0],t)}if(3===arguments.length){let t=arguments[2],e=arguments[1]-t;return t>1&&(t=1),e>3&&(e=3),e<2&&(e=2),new VH(arguments[0],e+t,t)}}}get interfaces_(){return[FZ,qZ]}}WH.instanceObject=new WH;class YH extends LH{constructor(){super(),YH.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];LH.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new YH(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof tH){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return tH.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new vH;for(let e=0;e<this._geometries.length;e++){const r=this._geometries[e].getBoundary();for(let e=0;e<r.getNumGeometries();e++)t.add(r.getGeometryN(e))}const e=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(e))}getGeometryType(){return tH.TYPENAME_MULTIPOLYGON}get interfaces_(){return[OH]}}class ZH{get(){}put(){}size(){}values(){}entrySet(){}}class HH extends PH{constructor(t){super(),this.map=new Map,t instanceof dH&&this.addAll(t)}contains(t){const e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}add(t){const e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new iH}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new XH(this.map)}[Symbol.iterator](){return this.map}}class XH{constructor(t){this.iterator=t.values();const{done:e,value:r}=this.iterator.next();this.done=e,this.value=r}next(){if(this.done)throw new gH;const t=this.value,{done:e,value:r}=this.iterator.next();return this.done=e,this.value=r,t}hasNext(){return!this.done}remove(){throw new iH}}class KH extends ZH{constructor(){super(),this.map=new Map}get(t){return this.map.get(t)||null}put(t,e){return this.map.set(t,e),e}values(){const t=new vH,e=this.map.values();let r=e.next();for(;!r.done;)t.add(r.value),r=e.next();return t}entrySet(){const t=new HH;return this.map.entries().forEach(e=>t.add(e)),t}size(){return this.map.size()}}class JH{constructor(){JH.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=JH.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof $H){const t=arguments[0];this._modelType=t,t===JH.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){const t=arguments[0];this._modelType=JH.FIXED,this.setScale(t)}else if(arguments[0]instanceof JH){const t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof JH))return!1;const e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){const e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return xH.compare(r,n)}getScale(){return this._scale}isFloating(){return this._modelType===JH.FLOATING||this._modelType===JH.FLOATING_SINGLE}getType(){return this._modelType}toString(){let t="UNKNOWN";return this._modelType===JH.FLOATING?t="Floating":this._modelType===JH.FLOATING_SINGLE?t="Floating-Single":this._modelType===JH.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){const t=arguments[0];if(AZ.isNaN(t))return t;if(this._modelType===JH.FLOATING_SINGLE){return t}return this._modelType===JH.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof JZ){const t=arguments[0];if(this._modelType===JH.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){let t=16;return this._modelType===JH.FLOATING?t=16:this._modelType===JH.FLOATING_SINGLE?t=6:this._modelType===JH.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}get interfaces_(){return[qZ,GZ]}}class $H{constructor(){$H.constructor_.apply(this,arguments)}static constructor_(){this._name=null;const t=arguments[0];this._name=t,$H.nameToTypeMap.put(t,this)}readResolve(){return $H.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[qZ]}}$H.nameToTypeMap=new KH,JH.Type=$H,JH.FIXED=new $H("FIXED"),JH.FLOATING=new $H("FLOATING"),JH.FLOATING_SINGLE=new $H("FLOATING SINGLE"),JH.maximumPreciseValue=9007199254740992;class QH extends LH{constructor(){super(),QH.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];LH.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new QH(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof tH){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?aH.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return tH.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new iH}getGeometryType(){return tH.TYPENAME_MULTILINESTRING}get interfaces_(){return[rH]}}class tX{constructor(){tX.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)tX.constructor_.call(this,new JH,0);else if(1===arguments.length){if(LZ(arguments[0],FZ)){const t=arguments[0];tX.constructor_.call(this,new JH,0,t)}else if(arguments[0]instanceof JH){const t=arguments[0];tX.constructor_.call(this,t,0,tX.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];tX.constructor_.call(this,t,e,tX.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=r,this._SRID=e}}static toMultiPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;const e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return WH.instance()}static toMultiLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}createEmpty(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new BZ("Invalid dimension: "+t)}}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new JZ(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new JZ(t.getMinX(),t.getMinY()),new JZ(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new JZ(t.getMinX(),t.getMinY()),new JZ(t.getMinX(),t.getMaxY()),new JZ(t.getMaxX(),t.getMaxY()),new JZ(t.getMaxX(),t.getMinY()),new JZ(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(LZ(arguments[0],jZ)){return new lH(arguments[0],this)}}}createMultiLineString(){if(0===arguments.length)return new QH(null,this);if(1===arguments.length){return new QH(arguments[0],this)}}buildGeometry(t){let e=null,r=!1,n=!1;for(let i=t.iterator();i.hasNext();){const t=i.next(),o=t.getTypeCode();null===e&&(e=o),o!==e&&(r=!0),t instanceof LH&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(tX.toGeometryArray(t));const i=t.iterator().next();if(t.size()>1){if(i instanceof TH)return this.createMultiPolygon(tX.toPolygonArray(t));if(i instanceof lH)return this.createMultiLineString(tX.toLineStringArray(t));if(i instanceof fH)return this.createMultiPoint(tX.toPointArray(t));ZZ.shouldNeverReachHere("Unhandled geometry type: "+i.getGeometryType())}return i}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof JZ){const t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(LZ(arguments[0],jZ)){return new fH(arguments[0],this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(LZ(arguments[0],jZ)){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof AH){const t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length){return new TH(arguments[0],arguments[1],this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new LH(null,this);if(1===arguments.length){return new LH(arguments[0],this)}}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(LZ(arguments[0],jZ)){return new AH(arguments[0],this)}}}createMultiPolygon(){if(0===arguments.length)return new YH(null,this);if(1===arguments.length){return new YH(arguments[0],this)}}createMultiPoint(){if(0===arguments.length)return new CH(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){return new CH(arguments[0],this)}if(LZ(arguments[0],jZ)){const t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));const e=new Array(t.size()).fill(null);for(let r=0;r<t.size();r++){const n=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());nH.copy(t,r,n,0,1),e[r]=this.createPoint(n)}return this.createMultiPoint(e)}}}get interfaces_(){return[qZ]}}const eX=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class rX{constructor(t){this.geometryFactory=t||new tX}read(t){let e;e="string"==typeof t?JSON.parse(t):t;const r=e.type;if(!nX[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==eX.indexOf(r)?nX[r].call(this,e.coordinates):"GeometryCollection"===r?nX[r].call(this,e.geometries):nX[r].call(this,e)}write(t){const e=t.getGeometryType();if(!iX[e])throw new Error("Geometry is not supported");return iX[e].call(this,t)}}const nX={Feature:function(t){const e={};for(const r in t)e[r]=t[r];if(t.geometry){const r=t.geometry.type;if(!nX[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=nX.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){const e={};if(t.features){e.features=[];for(let r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(new JZ(...n))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new JZ(t[0],t[1]),new JZ(t[2],t[1]),new JZ(t[2],t[3]),new JZ(t[0],t[3]),new JZ(t[0],t[1])])},Point:function(t){const e=new JZ(...t);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(nX.Point.call(this,t[r]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){const e=nX.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(nX.LineString.call(this,t[r]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){const e=nX.coordinates.call(this,t[0]),r=this.geometryFactory.createLinearRing(e),n=[];for(let e=1;e<t.length;++e){const r=t[e],i=nX.coordinates.call(this,r),o=this.geometryFactory.createLinearRing(i);n.push(o)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(nX.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},iX={coordinate:function(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:iX.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=iX.Point.call(this,n);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){const e=[],r=t.getCoordinates();for(let t=0;t<r.length;++t){const n=r[t];e.push(iX.coordinate.call(this,n))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=iX.LineString.call(this,n);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){const e=[],r=iX.LineString.call(this,t._shell);e.push(r.coordinates);for(let r=0;r<t._holes.length;++r){const n=t._holes[r],i=iX.LineString.call(this,n);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=iX.Polygon.call(this,n);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=n.getGeometryType();e.push(iX[i].call(this,n))}return{type:"GeometryCollection",geometries:e}}};class oX{constructor(t){this.parser=new rX(t||new tX)}read(t){return this.parser.read(t)}}const aX="XY",sX="XYZ",uX="XYM",lX="XYZM",cX={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},hX=1,fX=2,pX=3,dX=4,mX=5,yX=6,gX={};for(const t in cX)gX[t]=cX[t].toUpperCase();class vX{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}isWhiteSpace_(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let r,n=t;if("("==t)r=fX;else if(","==t)r=mX;else if(")"==t)r=pX;else if(this.isNumeric_(t)||"-"==t)r=dX,n=this.readNumber_();else if(this.isAlpha_(t))r=hX,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);r=yX}return{position:e,value:n,type:r}}readNumber_(){let t;const e=this.index_;let r=!1,n=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class _X{constructor(t,e){this.lexer_=t,this.token_,this.layout_=aX,this.factory=e}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){this.consume_();return this.parseGeometry_()}parseGeometryLayout_(){let t=aX;const e=this.token_;if(this.isTokenType(hX)){const r=e.value;"Z"===r?t=sX:"M"===r?t=uX:"ZM"===r&&(t=lX),t!==aX&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(fX)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(mX));if(this.match(pX))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(fX)){const t=this.parsePoint_();if(this.match(pX))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(fX)){const t=this.parsePointList_();if(this.match(pX))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(fX)){const t=this.parseLineStringTextList_();if(this.match(pX))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(fX)){let t;if(t=this.token_.type==fX?this.parsePointTextList_():this.parsePointList_(),this.match(pX))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(fX)){const t=this.parseLineStringTextList_();if(this.match(pX))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(fX)){const t=this.parsePolygonTextList_();if(this.match(pX))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let r=0;r<e;++r){const e=this.token_;if(!this.match(dX))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(mX);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(mX);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(mX);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(mX);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(hX)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.factory,e=t=>new JZ(...t),r=r=>{const n=r.map(r=>t.createLinearRing(r.map(e)));return n.length>1?t.createPolygon(n[0],n.slice(1)):t.createPolygon(n[0])},n=this.token_;if(this.match(hX)){const i=n.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==i){const e=this.parseGeometryCollectionText_();return t.createGeometryCollection(e)}switch(i){case"POINT":{const e=this.parsePointText_();return e?t.createPoint(new JZ(...e)):t.createPoint()}case"LINESTRING":{const r=this.parseLineStringText_().map(e);return t.createLineString(r)}case"LINEARRING":{const r=this.parseLineStringText_().map(e);return t.createLinearRing(r)}case"POLYGON":{const e=this.parsePolygonText_();return e&&0!==e.length?r(e):t.createPolygon()}case"MULTIPOINT":{const r=this.parseMultiPointText_();if(!r||0===r.length)return t.createMultiPoint();const n=r.map(e).map(e=>t.createPoint(e));return t.createMultiPoint(n)}case"MULTILINESTRING":{const r=this.parseMultiLineStringText_().map(r=>t.createLineString(r.map(e)));return t.createMultiLineString(r)}case"MULTIPOLYGON":{const e=this.parseMultiPolygonText_();if(!e||0===e.length)return t.createMultiPolygon();const n=e.map(r);return t.createMultiPolygon(n)}default:throw new Error("Invalid geometry type: "+i)}}throw new Error(this.formatErrorMessage_())}}function bX(t){if(t.isEmpty())return"";const e=t.getCoordinate(),r=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||r.push(e.z),void 0===e.m||Number.isNaN(e.m)||r.push(e.m),r.join(" ")}function wX(t){const e=t.getCoordinates().map(t=>{const e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e}),r=[];for(let t=0,n=e.length;t<n;++t)r.push(e[t].join(" "));return r.join(", ")}function xX(t){const e=[];e.push("("+wX(t.getExteriorRing())+")");for(let r=0,n=t.getNumInteriorRing();r<n;++r)e.push("("+wX(t.getInteriorRingN(r))+")");return e.join(", ")}const MX={Point:bX,LineString:wX,LinearRing:wX,Polygon:xX,MultiPoint:function(t){const e=[];for(let r=0,n=t.getNumGeometries();r<n;++r)e.push("("+bX(t.getGeometryN(r))+")");return e.join(", ")},MultiLineString:function(t){const e=[];for(let r=0,n=t.getNumGeometries();r<n;++r)e.push("("+wX(t.getGeometryN(r))+")");return e.join(", ")},MultiPolygon:function(t){const e=[];for(let r=0,n=t.getNumGeometries();r<n;++r)e.push("("+xX(t.getGeometryN(r))+")");return e.join(", ")},GeometryCollection:function(t){const e=[];for(let r=0,n=t.getNumGeometries();r<n;++r)e.push(SX(t.getGeometryN(r)));return e.join(", ")}};function SX(t){let e=t.getGeometryType();const r=MX[e];e=e.toUpperCase();const n=function(t){let e="";if(t.isEmpty())return e;const r=t.getCoordinate();return void 0===r.z||Number.isNaN(r.z)||(e+="Z"),void 0===r.m||Number.isNaN(r.m)||(e+="M"),e}(t);if(n.length>0&&(e+=" "+n),t.isEmpty())return e+" EMPTY";return e+" ("+r(t)+")"}class EX{constructor(t){this.geometryFactory=t||new tX,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){const e=new vX(t);return new _X(e,this.geometryFactory).parse()}write(t){return SX(t)}}class OX{constructor(t){this.parser=new EX(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class TX{static toLocationSymbol(t){switch(t){case TX.EXTERIOR:return"e";case TX.BOUNDARY:return"b";case TX.INTERIOR:return"i";case TX.NONE:return"-"}throw new BZ("Unknown location value: "+t)}}TX.INTERIOR=0,TX.BOUNDARY=1,TX.EXTERIOR=2,TX.NONE=-1;class PX{static intersection(t,e,r,n){const i=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,s=t.y>e.y?t.y:e.y,u=r.x<n.x?r.x:n.x,l=r.y<n.y?r.y:n.y,c=r.x>n.x?r.x:n.x,h=r.y>n.y?r.y:n.y,f=((i>u?i:u)+(a<c?a:c))/2,p=((o>l?o:l)+(s<h?s:h))/2,d=t.x-f,m=t.y-p,y=e.x-f,g=e.y-p,v=r.x-f,_=r.y-p,b=n.x-f,w=n.y-p,x=m-g,M=y-d,S=d*g-y*m,E=_-w,O=b-v,T=v*w-b*_,P=x*O-E*M,I=(M*T-O*S)/P,k=(E*S-x*T)/P;return AZ.isNaN(I)||AZ.isInfinite(I)||AZ.isNaN(k)||AZ.isInfinite(k)?null:new JZ(I+f,k+p)}}class IX{static segmentToSegment(t,e,r,n){if(t.equals(e))return IX.pointToSegment(t,r,n);if(r.equals(n))return IX.pointToSegment(n,t,e);let i=!1;if(QZ.intersects(t,e,r,n)){const o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{const a=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),s=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?zH.min(IX.pointToSegment(t,r,n),IX.pointToSegment(e,r,n),IX.pointToSegment(r,t,e),IX.pointToSegment(n,t,e)):0}static pointToSegment(t,e,r){if(e.x===r.x&&e.y===r.y)return t.distance(e);const n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;if(i<=0)return t.distance(e);if(i>=1)return t.distance(r);const o=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(o)*Math.sqrt(n)}static pointToLinePerpendicular(t,e,r){const n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)}static pointToSegmentString(t,e){if(0===e.length)throw new BZ("Line array must contain at least one vertex");let r=t.distance(e[0]);for(let n=0;n<e.length-1;n++){const i=IX.pointToSegment(t,e[n],e[n+1]);i<r&&(r=i)}return r}}class kX{constructor(){kX.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=Array(2).fill().map(()=>Array(2)),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new JZ,this._intPt[1]=new JZ,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static computeEdgeDistance(t,e,r){const n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y);let o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{const r=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);o=n>i?r:a,0!==o||t.equals(e)||(o=Math.max(r,a))}return ZZ.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}static nonRobustComputeEdgeDistance(t,e,r){const n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return ZZ.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){const t=new UH;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(()=>Array(2)),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){const t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){const t=arguments[0];for(let e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==kX.NO_INTERSECTION}getEdgeDistance(t,e){return kX.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===kX.COLLINEAR_INTERSECTION}toString(){return OX.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+OX.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(let e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}kX.DONT_INTERSECT=0,kX.DO_INTERSECT=1,kX.COLLINEAR=2,kX.NO_INTERSECTION=0,kX.POINT_INTERSECTION=1,kX.COLLINEAR_INTERSECTION=2;class RX extends kX{constructor(){super()}static nearestEndpoint(t,e,r,n){let i=t,o=IX.pointToSegment(t,r,n),a=IX.pointToSegment(e,r,n);return a<o&&(o=a,i=e),a=IX.pointToSegment(r,t,e),a<o&&(o=a,i=r),a=IX.pointToSegment(n,t,e),a<o&&(o=a,i=n),i}isInSegmentEnvelopes(t){const e=new QZ(this._inputLines[0][0],this._inputLines[0][1]),r=new QZ(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{const t=arguments[0],e=arguments[1],r=arguments[2];if(this._isProper=!1,QZ.intersects(e,r,t)&&0===EH.index(e,r,t)&&0===EH.index(r,e,t))return this._isProper=!0,(t.equals(e)||t.equals(r))&&(this._isProper=!1),this._result=kX.POINT_INTERSECTION,null;this._result=kX.NO_INTERSECTION}}intersection(t,e,r,n){let i=this.intersectionSafe(t,e,r,n);return this.isInSegmentEnvelopes(i)||(i=new JZ(RX.nearestEndpoint(t,e,r,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}checkDD(t,e,r,n,i){const o=SH.intersection(t,e,r,n),a=this.isInSegmentEnvelopes(o);GH.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&GH.out.println("Distance = "+i.distance(o))}intersectionSafe(t,e,r,n){let i=PX.intersection(t,e,r,n);return null===i&&(i=RX.nearestEndpoint(t,e,r,n)),i}computeCollinearIntersection(t,e,r,n){const i=QZ.intersects(t,e,r),o=QZ.intersects(t,e,n),a=QZ.intersects(r,n,t),s=QZ.intersects(r,n,e);return i&&o?(this._intPt[0]=r,this._intPt[1]=n,kX.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=t,this._intPt[1]=e,kX.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||o||s?kX.COLLINEAR_INTERSECTION:kX.POINT_INTERSECTION):i&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||a?kX.COLLINEAR_INTERSECTION:kX.POINT_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||i||s?kX.COLLINEAR_INTERSECTION:kX.POINT_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||i||a?kX.COLLINEAR_INTERSECTION:kX.POINT_INTERSECTION):kX.NO_INTERSECTION}computeIntersect(t,e,r,n){if(this._isProper=!1,!QZ.intersects(t,e,r,n))return kX.NO_INTERSECTION;const i=EH.index(t,e,r),o=EH.index(t,e,n);if(i>0&&o>0||i<0&&o<0)return kX.NO_INTERSECTION;const a=EH.index(r,n,t),s=EH.index(r,n,e);if(a>0&&s>0||a<0&&s<0)return kX.NO_INTERSECTION;return 0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,r,n):(0===i||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(r)||t.equals2D(n)?this._intPt[0]=t:e.equals2D(r)||e.equals2D(n)?this._intPt[0]=e:0===i?this._intPt[0]=new JZ(r):0===o?this._intPt[0]=new JZ(n):0===a?this._intPt[0]=new JZ(t):0===s&&(this._intPt[0]=new JZ(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,r,n)),kX.POINT_INTERSECTION)}}class LX{constructor(){LX.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;const t=arguments[0];this._p=t}static locatePointInRing(){if(arguments[0]instanceof JZ&&LZ(arguments[1],jZ)){const t=arguments[1],e=new LX(arguments[0]),r=new JZ,n=new JZ;for(let i=1;i<t.size();i++)if(t.getCoordinate(i,r),t.getCoordinate(i-1,n),e.countSegment(r,n),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof JZ&&arguments[1]instanceof Array){const t=arguments[1],e=new LX(arguments[0]);for(let r=1;r<t.length;r++){const n=t[r],i=t[r-1];if(e.countSegment(n,i),e.isOnSegment())return e.getLocation()}return e.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){let r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){let r=EH.index(t,e,this._p);if(r===EH.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===EH.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==TX.EXTERIOR}getLocation(){return this._isPointOnSegment?TX.BOUNDARY:this._crossingCount%2==1?TX.INTERIOR:TX.EXTERIOR}isOnSegment(){return this._isPointOnSegment}}class CX{static isOnLine(){if(arguments[0]instanceof JZ&&LZ(arguments[1],jZ)){const t=arguments[0],e=arguments[1],r=new RX,n=new JZ,i=new JZ,o=e.size();for(let a=1;a<o;a++)if(e.getCoordinate(a-1,n),e.getCoordinate(a,i),r.computeIntersection(t,n,i),r.hasIntersection())return!0;return!1}if(arguments[0]instanceof JZ&&arguments[1]instanceof Array){const t=arguments[0],e=arguments[1],r=new RX;for(let n=1;n<e.length;n++){const i=e[n-1],o=e[n];if(r.computeIntersection(t,i,o),r.hasIntersection())return!0}return!1}}static locateInRing(t,e){return LX.locatePointInRing(t,e)}static isInRing(t,e){return CX.locateInRing(t,e)!==TX.EXTERIOR}}class AX{isInBoundary(t){}}class NX{isInBoundary(t){return t%2==1}get interfaces_(){return[AX]}}class jX{isInBoundary(t){return t>0}get interfaces_(){return[AX]}}class FX{isInBoundary(t){return t>1}get interfaces_(){return[AX]}}class DX{isInBoundary(t){return 1===t}get interfaces_(){return[AX]}}AX.Mod2BoundaryNodeRule=NX,AX.EndPointBoundaryNodeRule=jX,AX.MultiValentEndPointBoundaryNodeRule=FX,AX.MonoValentEndPointBoundaryNodeRule=DX,AX.MOD2_BOUNDARY_RULE=new NX,AX.ENDPOINT_BOUNDARY_RULE=new jX,AX.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new FX,AX.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new DX,AX.OGC_SFS_BOUNDARY_RULE=AX.MOD2_BOUNDARY_RULE;class BX{hasNext(){}next(){}remove(){}}class zX{constructor(){zX.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;const t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}static isAtomic(t){return!(t instanceof LH)}next(){if(this._atStart)return this._atStart=!1,zX.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new gH;const t=this._parent.getGeometryN(this._index++);return t instanceof LH?(this._subcollectionIterator=new zX(t),this._subcollectionIterator.next()):t}remove(){throw new iH(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}get interfaces_(){return[BX]}}class GX{constructor(){GX.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=AX.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];if(null===t)throw new BZ("Rule must be non-null");this._boundaryRule=t}}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?CX.locateInRing(t,e.getCoordinates()):TX.EXTERIOR}intersects(t,e){return this.locate(t,e)!==TX.EXTERIOR}updateLocationInfo(t){t===TX.INTERIOR&&(this._isIn=!0),t===TX.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof fH&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof lH)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof TH)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof QH){const r=e;for(let e=0;e<r.getNumGeometries();e++){const n=r.getGeometryN(e);this.updateLocationInfo(this.locateOnLineString(t,n))}}else if(e instanceof YH){const r=e;for(let e=0;e<r.getNumGeometries();e++){const n=r.getGeometryN(e);this.updateLocationInfo(this.locateInPolygon(t,n))}}else if(e instanceof LH){const r=new zX(e);for(;r.hasNext();){const n=r.next();n!==e&&this.computeLocation(t,n)}}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?TX.INTERIOR:TX.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return TX.EXTERIOR;const r=e.getCoordinateSequence();return e.isClosed()||!t.equals(r.getCoordinate(0))&&!t.equals(r.getCoordinate(r.size()-1))?CX.isOnLine(t,r)?TX.INTERIOR:TX.EXTERIOR:TX.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return TX.EXTERIOR;const r=e.getExteriorRing(),n=this.locateInPolygonRing(t,r);if(n===TX.EXTERIOR)return TX.EXTERIOR;if(n===TX.BOUNDARY)return TX.BOUNDARY;for(let r=0;r<e.getNumInteriorRing();r++){const n=e.getInteriorRingN(r),i=this.locateInPolygonRing(t,n);if(i===TX.INTERIOR)return TX.EXTERIOR;if(i===TX.BOUNDARY)return TX.BOUNDARY}return TX.INTERIOR}locate(t,e){return e.isEmpty()?TX.EXTERIOR:e instanceof lH?this.locateOnLineString(t,e):e instanceof TH?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?TX.BOUNDARY:this._numBoundaries>0||this._isIn?TX.INTERIOR:TX.EXTERIOR)}}class qX{constructor(){qX.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(()=>Array(3)),this.setAll(aH.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){const t=arguments[0];qX.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof qX){const t=arguments[0];qX.constructor_.call(this),this._matrix[TX.INTERIOR][TX.INTERIOR]=t._matrix[TX.INTERIOR][TX.INTERIOR],this._matrix[TX.INTERIOR][TX.BOUNDARY]=t._matrix[TX.INTERIOR][TX.BOUNDARY],this._matrix[TX.INTERIOR][TX.EXTERIOR]=t._matrix[TX.INTERIOR][TX.EXTERIOR],this._matrix[TX.BOUNDARY][TX.INTERIOR]=t._matrix[TX.BOUNDARY][TX.INTERIOR],this._matrix[TX.BOUNDARY][TX.BOUNDARY]=t._matrix[TX.BOUNDARY][TX.BOUNDARY],this._matrix[TX.BOUNDARY][TX.EXTERIOR]=t._matrix[TX.BOUNDARY][TX.EXTERIOR],this._matrix[TX.EXTERIOR][TX.INTERIOR]=t._matrix[TX.EXTERIOR][TX.INTERIOR],this._matrix[TX.EXTERIOR][TX.BOUNDARY]=t._matrix[TX.EXTERIOR][TX.BOUNDARY],this._matrix[TX.EXTERIOR][TX.EXTERIOR]=t._matrix[TX.EXTERIOR][TX.EXTERIOR]}}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return e===aH.SYM_DONTCARE||(e===aH.SYM_TRUE&&(t>=0||t===aH.TRUE)||(e===aH.SYM_FALSE&&t===aH.FALSE||(e===aH.SYM_P&&t===aH.P||(e===aH.SYM_L&&t===aH.L||e===aH.SYM_A&&t===aH.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){const t=arguments[1];return new qX(arguments[0]).matches(t)}}static isTrue(t){return t>=0||t===aH.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(qX.isTrue(this._matrix[TX.INTERIOR][TX.INTERIOR])||qX.isTrue(this._matrix[TX.INTERIOR][TX.BOUNDARY])||qX.isTrue(this._matrix[TX.BOUNDARY][TX.INTERIOR])||qX.isTrue(this._matrix[TX.BOUNDARY][TX.BOUNDARY]))&&this._matrix[TX.EXTERIOR][TX.INTERIOR]===aH.FALSE&&this._matrix[TX.EXTERIOR][TX.BOUNDARY]===aH.FALSE}isCoveredBy(){return(qX.isTrue(this._matrix[TX.INTERIOR][TX.INTERIOR])||qX.isTrue(this._matrix[TX.INTERIOR][TX.BOUNDARY])||qX.isTrue(this._matrix[TX.BOUNDARY][TX.INTERIOR])||qX.isTrue(this._matrix[TX.BOUNDARY][TX.BOUNDARY]))&&this._matrix[TX.INTERIOR][TX.EXTERIOR]===aH.FALSE&&this._matrix[TX.BOUNDARY][TX.EXTERIOR]===aH.FALSE}set(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const r=Math.trunc(e/3),n=e%3;this._matrix[r][n]=aH.toDimensionValue(t.charAt(e))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]=r}}isContains(){return qX.isTrue(this._matrix[TX.INTERIOR][TX.INTERIOR])&&this._matrix[TX.EXTERIOR][TX.INTERIOR]===aH.FALSE&&this._matrix[TX.EXTERIOR][TX.BOUNDARY]===aH.FALSE}setAtLeast(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const r=Math.trunc(e/3),n=e%3;this.setAtLeast(r,n,aH.toDimensionValue(t.charAt(e)))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]<r&&(this._matrix[t][e]=r)}}setAtLeastIfValid(t,e,r){t>=0&&e>=0&&this.setAtLeast(t,e,r)}isWithin(){return qX.isTrue(this._matrix[TX.INTERIOR][TX.INTERIOR])&&this._matrix[TX.INTERIOR][TX.EXTERIOR]===aH.FALSE&&this._matrix[TX.BOUNDARY][TX.EXTERIOR]===aH.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===aH.A&&e===aH.A||t===aH.L&&e===aH.L||t===aH.L&&e===aH.A||t===aH.P&&e===aH.A||t===aH.P&&e===aH.L)&&(this._matrix[TX.INTERIOR][TX.INTERIOR]===aH.FALSE&&(qX.isTrue(this._matrix[TX.INTERIOR][TX.BOUNDARY])||qX.isTrue(this._matrix[TX.BOUNDARY][TX.INTERIOR])||qX.isTrue(this._matrix[TX.BOUNDARY][TX.BOUNDARY])))}isOverlaps(t,e){return t===aH.P&&e===aH.P||t===aH.A&&e===aH.A?qX.isTrue(this._matrix[TX.INTERIOR][TX.INTERIOR])&&qX.isTrue(this._matrix[TX.INTERIOR][TX.EXTERIOR])&&qX.isTrue(this._matrix[TX.EXTERIOR][TX.INTERIOR]):t===aH.L&&e===aH.L&&(1===this._matrix[TX.INTERIOR][TX.INTERIOR]&&qX.isTrue(this._matrix[TX.INTERIOR][TX.EXTERIOR])&&qX.isTrue(this._matrix[TX.EXTERIOR][TX.INTERIOR]))}isEquals(t,e){return t===e&&(qX.isTrue(this._matrix[TX.INTERIOR][TX.INTERIOR])&&this._matrix[TX.INTERIOR][TX.EXTERIOR]===aH.FALSE&&this._matrix[TX.BOUNDARY][TX.EXTERIOR]===aH.FALSE&&this._matrix[TX.EXTERIOR][TX.INTERIOR]===aH.FALSE&&this._matrix[TX.EXTERIOR][TX.BOUNDARY]===aH.FALSE)}toString(){const t=new UH("123456789");for(let e=0;e<3;e++)for(let r=0;r<3;r++)t.setCharAt(3*e+r,aH.toDimensionSymbol(this._matrix[e][r]));return t.toString()}setAll(t){for(let e=0;e<3;e++)for(let r=0;r<3;r++)this._matrix[e][r]=t}get(t,e){return this._matrix[t][e]}transpose(){let t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new BZ("Should be length 9: "+t);for(let e=0;e<3;e++)for(let r=0;r<3;r++)if(!qX.matches(this._matrix[e][r],t.charAt(3*e+r)))return!1;return!0}add(t){for(let e=0;e<3;e++)for(let r=0;r<3;r++)this.setAtLeast(e,r,t.get(e,r))}isDisjoint(){return this._matrix[TX.INTERIOR][TX.INTERIOR]===aH.FALSE&&this._matrix[TX.INTERIOR][TX.BOUNDARY]===aH.FALSE&&this._matrix[TX.BOUNDARY][TX.INTERIOR]===aH.FALSE&&this._matrix[TX.BOUNDARY][TX.BOUNDARY]===aH.FALSE}isCrosses(t,e){return t===aH.P&&e===aH.L||t===aH.P&&e===aH.A||t===aH.L&&e===aH.A?qX.isTrue(this._matrix[TX.INTERIOR][TX.INTERIOR])&&qX.isTrue(this._matrix[TX.INTERIOR][TX.EXTERIOR]):t===aH.L&&e===aH.P||t===aH.A&&e===aH.P||t===aH.A&&e===aH.L?qX.isTrue(this._matrix[TX.INTERIOR][TX.INTERIOR])&&qX.isTrue(this._matrix[TX.EXTERIOR][TX.INTERIOR]):t===aH.L&&e===aH.L&&0===this._matrix[TX.INTERIOR][TX.INTERIOR]}get interfaces_(){return[NZ]}}class UX{static isNorthern(t){return t===UX.NE||t===UX.NW}static isOpposite(t,e){if(t===e)return!1;return 2===(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;const r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r}static isInHalfPlane(t,e){return e===UX.SE?t===UX.SE||t===UX.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new BZ("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?UX.NE:UX.SE:e>=0?UX.NW:UX.SW}if(arguments[0]instanceof JZ&&arguments[1]instanceof JZ){const t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new BZ("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?UX.NE:UX.SE:e.y>=t.y?UX.NW:UX.SW}}}UX.NE=0,UX.NW=1,UX.SW=2,UX.SE=3;class VX{constructor(){VX.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){const t=arguments[0];this._edge=t}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];VX.constructor_.call(this,t,e,r,null)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];VX.constructor_.call(this,t),this.init(e,r),this._label=n}}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:EH.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){const e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){const e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){const t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=UX.quadrant(this._dx,this._dy),ZZ.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}get interfaces_(){return[GZ]}}class WX{static opposite(t){return t===WX.LEFT?WX.RIGHT:t===WX.RIGHT?WX.LEFT:t}}WX.ON=0,WX.LEFT=1,WX.RIGHT=2;class YX{constructor(){YX.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){const t=arguments[0];this.init(1),this.location[WX.ON]=t}else if(arguments[0]instanceof YX){const t=arguments[0];if(this.init(t.location.length),null!==t)for(let e=0;e<this.location.length;e++)this.location[e]=t.location[e]}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this.init(3),this.location[WX.ON]=t,this.location[WX.LEFT]=e,this.location[WX.RIGHT]=r}}setAllLocations(t){for(let e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]!==TX.NONE)return!1;return!0}setAllLocationsIfNull(t){for(let e=0;e<this.location.length;e++)this.location[e]===TX.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){const t=new Array(3).fill(null);t[WX.ON]=this.location[WX.ON],t[WX.LEFT]=TX.NONE,t[WX.RIGHT]=TX.NONE,this.location=t}for(let e=0;e<this.location.length;e++)this.location[e]===TX.NONE&&e<t.location.length&&(this.location[e]=t.location[e])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;const t=this.location[WX.LEFT];this.location[WX.LEFT]=this.location[WX.RIGHT],this.location[WX.RIGHT]=t}toString(){const t=new wH;return this.location.length>1&&t.append(TX.toLocationSymbol(this.location[WX.LEFT])),t.append(TX.toLocationSymbol(this.location[WX.ON])),this.location.length>1&&t.append(TX.toLocationSymbol(this.location[WX.RIGHT])),t.toString()}setLocations(t,e,r){this.location[WX.ON]=t,this.location[WX.LEFT]=e,this.location[WX.RIGHT]=r}get(t){return t<this.location.length?this.location[t]:TX.NONE}isArea(){return this.location.length>1}isAnyNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]===TX.NONE)return!0;return!1}setLocation(){if(1===arguments.length){const t=arguments[0];this.setLocation(WX.ON,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(TX.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(let e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}class ZX{constructor(){ZX.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){const t=arguments[0];this.elt[0]=new YX(t),this.elt[1]=new YX(t)}else if(arguments[0]instanceof ZX){const t=arguments[0];this.elt[0]=new YX(t.elt[0]),this.elt[1]=new YX(t.elt[1])}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[0]=new YX(TX.NONE),this.elt[1]=new YX(TX.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this.elt[0]=new YX(t,e,r),this.elt[1]=new YX(t,e,r)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.elt[0]=new YX(TX.NONE,TX.NONE,TX.NONE),this.elt[1]=new YX(TX.NONE,TX.NONE,TX.NONE),this.elt[t].setLocations(e,r,n)}}static toLineLabel(t){const e=new ZX(TX.NONE);for(let r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e}getGeometryCount(){let t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){const t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(let e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new YX(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){const t=arguments[0];return this.elt[t].get(WX.ON)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){const t=new wH;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){const t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setLocation(WX.ON,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this.elt[t].setLocation(e,r)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new YX(this.elt[t].location[0]))}}class HX{createEdgeEndForNext(t,e,r,n){const i=r.segmentIndex+1;if(i>=t.getNumPoints()&&null===n)return null;let o=t.getCoordinate(i);null!==n&&n.segmentIndex===r.segmentIndex&&(o=n.coord);const a=new VX(t,r.coord,o,new ZX(t.getLabel()));e.add(a)}createEdgeEndForPrev(t,e,r,n){let i=r.segmentIndex;if(0===r.dist){if(0===i)return null;i--}let o=t.getCoordinate(i);null!==n&&n.segmentIndex>=i&&(o=n.coord);const a=new ZX(t.getLabel());a.flip();const s=new VX(t,r.coord,o,a);e.add(s)}computeEdgeEnds(){if(1===arguments.length){const t=arguments[0],e=new vH;for(let r=t;r.hasNext();){const t=r.next();this.computeEdgeEnds(t,e)}return e}if(2===arguments.length){const t=arguments[0],e=arguments[1],r=t.getEdgeIntersectionList();r.addEndpoints();const n=r.iterator();let i=null,o=null;if(!n.hasNext())return null;let a=n.next();do{i=o,o=a,a=null,n.hasNext()&&(a=n.next()),null!==o&&(this.createEdgeEndForPrev(t,e,o,i),this.createEdgeEndForNext(t,e,o,a))}while(null!==o)}}}class XX{constructor(){XX.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._label=t}}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){ZZ.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}}class KX extends XX{constructor(){super(),KX.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;const t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new ZX(0,TX.NONE)}isIncidentEdgeInResult(){for(let t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){let r=TX.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){const n=t.getLocation(e);r!==TX.BOUNDARY&&(r=n)}return r}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{const t=arguments[0],e=arguments[1];null===this._label?this._label=new ZX(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof KX){const t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof ZX){const t=arguments[0];for(let e=0;e<2;e++){const r=this.computeMergedLocation(t,e);this._label.getLocation(e)===TX.NONE&&this._label.setLocation(e,r)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;let e=TX.NONE;null!==this._label&&(e=this._label.getLocation(t));let r=null;switch(e){case TX.BOUNDARY:r=TX.INTERIOR;break;case TX.INTERIOR:default:r=TX.BOUNDARY}this._label.setLocation(t,r)}}class JX extends ZH{}function $X(t){return null==t?0:t.color}function QX(t){return null==t?null:t.parent}function tK(t,e){null!==t&&(t.color=e)}function eK(t){return null==t?null:t.left}function rK(t){return null==t?null:t.right}class nK extends JX{constructor(){super(),this.root_=null,this.size_=0}get(t){let e=this.root_;for(;null!==e;){const r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null}put(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let r,n,i=this.root_;do{if(r=i,n=t.compareTo(i.key),n<0)i=i.left;else{if(!(n>0)){const t=i.value;return i.value=e,t}i=i.right}}while(null!==i);const o={key:t,left:null,right:null,value:e,parent:r,color:0,getValue(){return this.value},getKey(){return this.key}};return n<0?r.left=o:r.right=o,this.fixAfterInsertion(o),this.size_++,null}fixAfterInsertion(t){let e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)QX(t)===eK(QX(QX(t)))?(e=rK(QX(QX(t))),1===$X(e)?(tK(QX(t),0),tK(e,0),tK(QX(QX(t)),1),t=QX(QX(t))):(t===rK(QX(t))&&(t=QX(t),this.rotateLeft(t)),tK(QX(t),0),tK(QX(QX(t)),1),this.rotateRight(QX(QX(t))))):(e=eK(QX(QX(t))),1===$X(e)?(tK(QX(t),0),tK(e,0),tK(QX(QX(t)),1),t=QX(QX(t))):(t===eK(QX(t))&&(t=QX(t),this.rotateRight(t)),tK(QX(t),0),tK(QX(QX(t)),1),this.rotateLeft(QX(QX(t)))));this.root_.color=0}values(){const t=new vH;let e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=nK.successor(e));)t.add(e.value);return t}entrySet(){const t=new HH;let e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=nK.successor(e));)t.add(e);return t}rotateLeft(t){if(null!=t){const e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}rotateRight(t){if(null!=t){const e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}getFirstEntry(){let t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}static successor(t){let e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}{e=t.parent;let r=t;for(;null!==e&&r===e.right;)r=e,e=e.parent;return e}}size(){return this.size_}containsKey(t){let e=this.root_;for(;null!==e;){const r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return!0;e=e.right}}return!1}}class iK{constructor(){iK.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new nK,this.nodeFact=null;const t=arguments[0];this.nodeFact=t}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof JZ){const t=arguments[0];let e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof KX){const t=arguments[0],e=this.nodeMap.get(t.getCoordinate());return null===e?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}}print(t){for(let e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){const e=new vH;for(let r=this.iterator();r.hasNext();){const n=r.next();n.getLabel().getLocation(t)===TX.BOUNDARY&&e.add(n)}return e}add(t){const e=t.getCoordinate();this.addNode(e).add(t)}}class oK extends WZ{constructor(t,e){super(e?t+" [ "+e+" ]":t),this.pt=e?new JZ(e):void 0,this.name=Object.keys({TopologyException:oK})[0]}getCoordinate(){return this.pt}}class aK{locate(t){}}class sK{constructor(){sK.constructor_.apply(this,arguments)}static constructor_(){this._geom=null;const t=arguments[0];this._geom=t}static locatePointInPolygon(t,e){if(e.isEmpty())return TX.EXTERIOR;const r=e.getExteriorRing(),n=sK.locatePointInRing(t,r);if(n!==TX.INTERIOR)return n;for(let r=0;r<e.getNumInteriorRing();r++){const n=e.getInteriorRingN(r),i=sK.locatePointInRing(t,n);if(i===TX.BOUNDARY)return TX.BOUNDARY;if(i===TX.INTERIOR)return TX.EXTERIOR}return TX.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?CX.locateInRing(t,e.getCoordinates()):TX.EXTERIOR}static containsPointInPolygon(t,e){return TX.EXTERIOR!==sK.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof TH)return sK.locatePointInPolygon(t,e);if(e instanceof LH){const r=new zX(e);for(;r.hasNext();){const n=r.next();if(n!==e){const e=sK.locateInGeometry(t,n);if(e!==TX.EXTERIOR)return e}}}return TX.EXTERIOR}static isContained(t,e){return TX.EXTERIOR!==sK.locate(t,e)}static locate(t,e){return e.isEmpty()?TX.EXTERIOR:e.getEnvelopeInternal().intersects(t)?sK.locateInGeometry(t,e):TX.EXTERIOR}locate(t){return sK.locate(t,this._geom)}get interfaces_(){return[aK]}}class uK{constructor(){uK.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new nK,this._edgeList=null,this._ptInAreaLocation=[TX.NONE,TX.NONE]}getNextCW(t){this.getEdges();const e=this._edgeList.indexOf(t);let r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)}propagateSideLabels(t){let e=TX.NONE;for(let r=this.iterator();r.hasNext();){const n=r.next().getLabel();n.isArea(t)&&n.getLocation(t,WX.LEFT)!==TX.NONE&&(e=n.getLocation(t,WX.LEFT))}if(e===TX.NONE)return null;let r=e;for(let e=this.iterator();e.hasNext();){const n=e.next(),i=n.getLabel();if(i.getLocation(t,WX.ON)===TX.NONE&&i.setLocation(t,WX.ON,r),i.isArea(t)){const e=i.getLocation(t,WX.LEFT),o=i.getLocation(t,WX.RIGHT);if(o!==TX.NONE){if(o!==r)throw new oK("side location conflict",n.getCoordinate());e===TX.NONE&&ZZ.shouldNeverReachHere("found single null side (at "+n.getCoordinate()+")"),r=e}else ZZ.isTrue(i.getLocation(t,WX.LEFT)===TX.NONE,"found single null side"),i.setLocation(t,WX.RIGHT,r),i.setLocation(t,WX.LEFT,r)}}}getCoordinate(){const t=this.iterator();if(!t.hasNext())return null;return t.next().getCoordinate()}print(t){GH.out.println("EdgeEndStar:   "+this.getCoordinate());for(let e=this.iterator();e.hasNext();){e.next().print(t)}}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){const e=this.getEdges();if(e.size()<=0)return!0;const r=e.size()-1,n=e.get(r).getLabel().getLocation(t,WX.LEFT);ZZ.isTrue(n!==TX.NONE,"Found unlabelled area edge");let i=n;for(let e=this.iterator();e.hasNext();){const r=e.next().getLabel();ZZ.isTrue(r.isArea(t),"Found non-area edge");const n=r.getLocation(t,WX.LEFT),o=r.getLocation(t,WX.RIGHT);if(n===o)return!1;if(o!==i)return!1;i=n}return!0}findIndex(t){this.iterator();for(let e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new vH(this._edgeMap.values())),this._edgeList}getLocation(t,e,r){return this._ptInAreaLocation[t]===TX.NONE&&(this._ptInAreaLocation[t]=sK.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]}toString(){const t=new wH;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(let e=this.iterator();e.hasNext();){const r=e.next();t.append(r),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(let e=this.iterator();e.hasNext();){e.next().computeLabel(t)}}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);const e=[!1,!1];for(let t=this.iterator();t.hasNext();){const r=t.next().getLabel();for(let t=0;t<2;t++)r.isLine(t)&&r.getLocation(t)===TX.BOUNDARY&&(e[t]=!0)}for(let r=this.iterator();r.hasNext();){const n=r.next(),i=n.getLabel();for(let r=0;r<2;r++)if(i.isAnyNull(r)){let o=TX.NONE;if(e[r])o=TX.EXTERIOR;else{const e=n.getCoordinate();o=this.getLocation(r,e,t)}i.setAllLocationsIfNull(r,o)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}}class lK{constructor(){lK.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;const t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}}class cK{constructor(){cK.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._eventType=cK.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._eventType=cK.INSERT,this._label=t,this._xValue=e,this._obj=r}}isDelete(){return this._eventType===cK.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){const e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===cK.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}get interfaces_(){return[GZ]}}cK.INSERT=1,cK.DELETE=2;const hK={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return hK.sort(t),t.get(0)},sort:function(t,e){const r=t.toArray();e?bH.sort(r,e):bH.sort(r);const n=t.iterator();for(let t=0,e=r.length;t<e;t++)n.next(),n.set(r[t])},singletonList:function(t){const e=new vH;return e.add(t),e}};var fK=hK;class pK{constructor(){pK.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;const t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(pK.isAdjacentSegments(e,n))return!0;if(t.isClosed()){const r=t.getNumPoints()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(let r=e.iterator();r.hasNext();){const e=r.next().getCoordinate();if(t.isIntersection(e))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;const i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}}class dK extends class{}{constructor(){super(),dK.constructor_.apply(this,arguments)}static constructor_(){this.events=new vH,this.nOverlaps=null}prepareEvents(){fK.sort(this.events);for(let t=0;t<this.events.size();t++){const e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){const t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let e=0;e<this.events.size();e++){const r=this.events.get(e);if(r.isInsert()&&this.processOverlaps(e,r.getDeleteEventIndex(),r,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof pK&&LZ(arguments[0],yH)&&LZ(arguments[1],yH)){const t=arguments[0],e=arguments[1],r=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(r)}else if("boolean"==typeof arguments[2]&&LZ(arguments[0],yH)&&arguments[1]instanceof pK){const t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){const r=t.getMonotoneChainEdge(),n=r.getStartIndexes();for(let t=0;t<n.length-1;t++){const n=new lK(r,t),i=new cK(e,r.getMinX(t),n);this.events.add(i),this.events.add(new cK(r.getMaxX(t),i))}}processOverlaps(t,e,r,n){const i=r.getObject();for(let o=t;o<e;o++){const t=this.events.get(o);if(t.isInsert()){const e=t.getObject();r.isSameLabel(t)||(i.computeIntersections(e,n),this.nOverlaps++)}}}addEdges(){if(1===arguments.length){for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.addEdge(e,e)}}else if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const r=e.next();this.addEdge(r,t)}}}}class mK{visitItem(t){}}class yK{constructor(){yK.constructor_.apply(this,arguments)}static constructor_(){this._min=AZ.POSITIVE_INFINITY,this._max=AZ.NEGATIVE_INFINITY}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return OX.toLineString(new JZ(this._min,0),new JZ(this._max,0))}}yK.NodeComparator=class{compare(t,e){const r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0}get interfaces_(){return[VZ]}};class gK extends yK{constructor(){super(),gK.constructor_.apply(this,arguments)}static constructor_(){this._item=null;const t=arguments[0],e=arguments[1],r=arguments[2];this._min=t,this._max=e,this._item=r}query(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)}}class vK extends yK{constructor(){super(),vK.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;const t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)}}class _K{constructor(){_K.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new vH,this._root=null,this._level=0}buildTree(){fK.sort(this._leaves,new yK.NodeComparator);let t=this._leaves,e=null,r=new vH;for(;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}}insert(t,e,r){if(null!==this._root)throw new hH("Index cannot be added to once it has been queried");this._leaves.add(new gK(t,e,r))}query(t,e,r){if(this.init(),null===this._root)return null;this._root.query(t,e,r)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){GH.out.println(OX.toLineString(new JZ(t._min,this._level),new JZ(t._max,this._level)))}init(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(let r=0;r<t.size();r+=2){const n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{const n=new vK(t.get(r),t.get(r+1));e.add(n)}}}}class bK{constructor(){bK.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0===arguments.length)bK.constructor_.call(this,new JZ,new JZ);else if(1===arguments.length){const t=arguments[0];bK.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];bK.constructor_.call(this,new JZ(t,e),new JZ(r,n))}}static midPoint(t,e){return new JZ((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof bK){const t=arguments[0],e=EH.index(this.p0,this.p1,t.p0),r=EH.index(this.p0,this.p1,t.p1);return e>=0&&r>=0||e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof JZ){const t=arguments[0];return EH.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof bK))return!1;const e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){const e=new RX;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof JZ){const t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new JZ(t);const e=this.projectionFactor(t),r=new JZ;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof bK){const t=arguments[0],e=this.projectionFactor(t.p0),r=this.projectionFactor(t.p1);if(e>=1&&r>=1)return null;if(e<=0&&r<=0)return null;let n=this.project(t.p0);e<0&&(n=this.p0),e>1&&(n=this.p1);let i=this.project(t.p1);return r<0&&(i=this.p0),r>1&&(i=this.p1),new bK(n,i)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return IX.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return bK.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;const e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;if(n<=0)return AZ.NaN;return((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n}closestPoints(t){const e=this.intersection(t);if(null!==e)return[e,e];const r=new Array(2).fill(null);let n=AZ.MAX_VALUE,i=null;const o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;const a=this.closestPoint(t.p1);i=a.distance(t.p1),i<n&&(n=i,r[0]=a,r[1]=t.p1);const s=t.closestPoint(this.p0);i=s.distance(this.p0),i<n&&(n=i,r[0]=this.p0,r[1]=s);const u=t.closestPoint(this.p1);return i=u.distance(this.p1),i<n&&(n=i,r[0]=this.p1,r[1]=u),r}closestPoint(t){const e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);return this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){const e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)}reverse(){const t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){return PX.intersection(this.p0,this.p1,t.p0,t.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){const r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o);let s=0,u=0;if(0!==e){if(a<=0)throw new hH("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new JZ(r-u,n+s)}setCoordinates(){if(1===arguments.length){const t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){let e=this.projectionFactor(t);return e<0?e=0:(e>1||AZ.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}reflect(t){const e=this.p1.getY()-this.p0.getY(),r=this.p0.getX()-this.p1.getX(),n=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),i=e*e+r*r,o=e*e-r*r,a=t.getX(),s=t.getY();return new JZ((-o*a-2*e*r*s-2*e*n)/i,(o*s-2*e*r*a-2*r*n)/i)}distance(){if(arguments[0]instanceof bK){const t=arguments[0];return IX.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof JZ){const t=arguments[0];return IX.pointToSegment(t,this.p0,this.p1)}}pointAlong(t){const e=new JZ;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){let t=AZ.doubleToLongBits(this.p0.x);t^=31*AZ.doubleToLongBits(this.p0.y);const e=Math.trunc(t)^Math.trunc(t>>32);let r=AZ.doubleToLongBits(this.p1.x);r^=31*AZ.doubleToLongBits(this.p1.y);return e^(Math.trunc(r)^Math.trunc(r>>32))}get interfaces_(){return[GZ,qZ]}}class wK{constructor(){wK.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){const t=arguments[0];this._lines=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}}static getGeometry(){if(1===arguments.length){const t=arguments[0];return t.getFactory().buildGeometry(wK.getLines(t))}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(wK.getLines(t,e))}}static getLines(){if(1===arguments.length){const t=arguments[0];return wK.getLines(t,!1)}if(2===arguments.length){if(LZ(arguments[0],dH)&&LZ(arguments[1],dH)){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const r=e.next();wK.getLines(r,t)}return t}if(arguments[0]instanceof tH&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1],r=new vH;return t.apply(new wK(r,e)),r}if(arguments[0]instanceof tH&&LZ(arguments[1],dH)){const t=arguments[0],e=arguments[1];return t instanceof lH?e.add(t):t.apply(new wK(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&LZ(arguments[0],dH)&&LZ(arguments[1],dH)){const t=arguments[1],e=arguments[2];for(let r=arguments[0].iterator();r.hasNext();){const n=r.next();wK.getLines(n,t,e)}return t}if("boolean"==typeof arguments[2]&&arguments[0]instanceof tH&&LZ(arguments[1],dH)){const t=arguments[1],e=arguments[2];return arguments[0].apply(new wK(t,e)),t}}}filter(t){if(this._isForcedToLineString&&t instanceof AH){const e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof lH&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}get interfaces_(){return[zZ]}}class xK{constructor(){xK.constructor_.apply(this,arguments)}static constructor_(){this._items=new vH}visitItem(t){this._items.add(t)}getItems(){return this._items}get interfaces_(){return[mK]}}class MK{constructor(){MK.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;const t=arguments[0];if(!(LZ(t,OH)||t instanceof AH))throw new BZ("Argument must be Polygonal or LinearRing");this._geom=t}locate(t){null===this._index&&(this._index=new EK(this._geom),this._geom=null);const e=new LX(t),r=new SK(e);return this._index.query(t.y,t.y,r),e.getLocation()}get interfaces_(){return[aK]}}class SK{constructor(){SK.constructor_.apply(this,arguments)}static constructor_(){this._counter=null;const t=arguments[0];this._counter=t}visitItem(t){const e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}get interfaces_(){return[mK]}}class EK{constructor(){EK.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new _K;const t=arguments[0];t.isEmpty()?this._isEmpty=!0:this.init(t)}init(t){for(let e=wK.getLines(t).iterator();e.hasNext();){const t=e.next().getCoordinates();this.addLine(t)}}addLine(t){for(let e=1;e<t.length;e++){const r=new bK(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}}query(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this._isEmpty)return new vH;const r=new xK;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];if(this._isEmpty)return null;this._index.query(t,e,r)}}}MK.SegmentVisitor=SK,MK.IntervalIndexedGeometry=EK;class OK{constructor(){OK.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;const t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new JZ(t),this.segmentIndex=e,this.dist=r}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){const e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}get interfaces_(){return[GZ]}}class TK{constructor(){TK.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new nK,this.edge=null;const t=arguments[0];this.edge=t}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();const e=this.iterator();let r=e.next();for(;e.hasNext();){const n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}}addEndpoints(){const t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){let r=e.segmentIndex-t.segmentIndex+2;const n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;const o=new Array(r).fill(null);let a=0;o[a++]=new JZ(t.coord);for(let r=t.segmentIndex+1;r<=e.segmentIndex;r++)o[a++]=this.edge.pts[r];return i&&(o[a]=e.coord),new LK(o,new ZX(this.edge._label))}add(t,e,r){const n=new OK(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)}isIntersection(t){for(let e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1}}class PK{constructor(){PK.constructor_.apply(this,arguments)}static constructor_(){if(this._data=null,this._size=0,0===arguments.length)PK.constructor_.call(this,10);else if(1===arguments.length){const t=arguments[0];this._data=new Array(t).fill(null)}}size(){return this._size}addAll(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),GH.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}ensureCapacity(t){if(t<=this._data.length)return null;const e=Math.max(t,2*this._data.length);this._data=bH.copyOf(this._data,e)}toArray(){const t=new Array(this._size).fill(null);return GH.arraycopy(this._data,0,t,0,this._size),t}add(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}class IK{static toIntArray(t){const e=new Array(t.size()).fill(null);for(let r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e}getChainStartIndices(t){let e=0;const r=new PK(Math.trunc(t.length/2));r.add(e);do{const n=this.findChainEnd(t,e);r.add(n),e=n}while(e<t.length-1);return r.toArray()}findChainEnd(t,e){const r=UX.quadrant(t[e],t[e+1]);let n=e+1;for(;n<t.length;){if(UX.quadrant(t[n-1],t[n])!==r)break;n++}return n-1}OLDgetChainStartIndices(t){let e=0;const r=new vH;r.add(e);do{const n=this.findChainEnd(t,e);r.add(n),e=n}while(e<t.length-1);return IK.toIntArray(r)}}class kK{constructor(){kK.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;const t=arguments[0];this.e=t,this.pts=t.getCoordinates();const e=new IK;this.startIndex=e.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(t){const e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r}getMinX(t){const e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r}computeIntersectsForChain(){if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4],o=arguments[5];if(e-t==1&&i-n==1)return o.addIntersections(this.e,t,r.e,n),null;if(!this.overlaps(t,e,r,n,i))return null;const a=Math.trunc((t+e)/2),s=Math.trunc((n+i)/2);t<a&&(n<s&&this.computeIntersectsForChain(t,a,r,n,s,o),s<i&&this.computeIntersectsForChain(t,a,r,s,i,o)),a<e&&(n<s&&this.computeIntersectsForChain(a,e,r,n,s,o),s<i&&this.computeIntersectsForChain(a,e,r,s,i,o))}}overlaps(t,e,r,n,i){return QZ.intersects(this.pts[t],this.pts[e],r.pts[n],r.pts[i])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(let r=0;r<this.startIndex.length-1;r++)for(let n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)}}class RK{constructor(){RK.constructor_.apply(this,arguments)}static constructor_(){this._depth=Array(2).fill().map(()=>Array(3));for(let t=0;t<2;t++)for(let e=0;e<3;e++)this._depth[t][e]=RK.NULL_VALUE}static depthAtLocation(t){return t===TX.EXTERIOR?0:t===TX.INTERIOR?1:RK.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,r){this._depth[t][e]=r}isNull(){if(0===arguments.length){for(let t=0;t<2;t++)for(let e=0;e<3;e++)if(this._depth[t][e]!==RK.NULL_VALUE)return!1;return!0}if(1===arguments.length){const t=arguments[0];return this._depth[t][1]===RK.NULL_VALUE}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this._depth[t][e]===RK.NULL_VALUE}}normalize(){for(let t=0;t<2;t++)if(!this.isNull(t)){let e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(let r=1;r<3;r++){let n=0;this._depth[t][r]>e&&(n=1),this._depth[t][r]=n}}}getDelta(t){return this._depth[t][WX.RIGHT]-this._depth[t][WX.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?TX.EXTERIOR:TX.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<2;e++)for(let r=1;r<3;r++){const n=t.getLocation(e,r);n!==TX.EXTERIOR&&n!==TX.INTERIOR||(this.isNull(e,r)?this._depth[e][r]=RK.depthAtLocation(n):this._depth[e][r]+=RK.depthAtLocation(n))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1];arguments[2]===TX.INTERIOR&&this._depth[t][e]++}}}RK.NULL_VALUE=-1;class LK extends XX{constructor(){super(),LK.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new TK(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new RK,this._depthDelta=0,1===arguments.length){const t=arguments[0];LK.constructor_.call(this,t,null)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.pts=t,this._label=e}}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof qX&&arguments[0]instanceof ZX))return super.updateIM.apply(this,arguments);{const t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,WX.ON),t.getLocation(1,WX.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,WX.LEFT),t.getLocation(1,WX.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,WX.RIGHT),t.getLocation(1,WX.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){const t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];return new LK(t,ZX.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof LK))return!1;const e=t;if(this.pts.length!==e.pts.length)return!1;let r=!0,n=!0,i=this.pts.length;for(let t=0;t<this.pts.length;t++)if(this.pts[t].equals2D(e.pts[t])||(r=!1),this.pts[t].equals2D(e.pts[--i])||(n=!1),!r&&!n)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){const t=arguments[0];return this.pts[t]}}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){LK.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(let e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new kK(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new QZ;for(let t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,r,n){const i=new JZ(t.getIntersection(n));let o=e,a=t.getEdgeDistance(r,n);const s=o+1;if(s<this.pts.length){const t=this.pts[s];i.equals2D(t)&&(o=s,a=0)}this.eiList.add(i,o,a)}toString(){const t=new UH;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(let e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,r){for(let n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)}}class CK extends VX{constructor(){super(),CK.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];const t=arguments[0],e=arguments[1];if(VX.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{const e=t.getNumPoints()-1;this.init(t.getCoordinate(e),t.getCoordinate(e-1))}this.computeDirectedLabel()}static depthFactor(t,e){return t===TX.EXTERIOR&&e===TX.INTERIOR?1:t===TX.INTERIOR&&e===TX.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new ZX(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new oK("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){let t=!0;for(let e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,WX.LEFT)===TX.INTERIOR&&this._label.getLocation(e,WX.RIGHT)===TX.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[WX.LEFT]+"/"+this._depth[WX.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){const t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,TX.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,TX.EXTERIOR);return t&&e&&r}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){let r=this.getEdge().getDepthDelta();this._isForward||(r=-r);let n=1;t===WX.LEFT&&(n=-1);const i=WX.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}}class AK{createNode(t){return new KX(t,null)}}class NK{constructor(){NK.constructor_.apply(this,arguments)}static constructor_(){if(this._edges=new vH,this._nodes=null,this._edgeEndList=new vH,0===arguments.length)this._nodes=new iK(new AK);else if(1===arguments.length){const t=arguments[0];this._nodes=new iK(t)}}static linkResultDirectedEdges(t){for(let e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}printEdges(t){t.println("Edges:");for(let e=0;e<this._edges.size();e++){t.println("edge "+e+":");const r=this._edges.get(e);r.print(t),r.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof KX){const t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof JZ){const t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}debugPrintln(t){GH.out.println(t)}isBoundaryNode(t,e){const r=this._nodes.find(e);if(null===r)return!1;const n=r.getLabel();return null!==n&&n.getLocation(t)===TX.BOUNDARY}linkAllDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}}matchInSameDirection(t,e,r,n){return!!t.equals(r)&&(EH.index(t,e,n)===EH.COLLINEAR&&UX.quadrant(t,e)===UX.quadrant(r,n))}getEdgeEnds(){return this._edgeEndList}debugPrint(t){GH.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(let r=0;r<this._edges.size();r++){const n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return n;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return n}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(let e=this.getEdgeEnds().iterator();e.hasNext();){const r=e.next();if(r.getEdge()===t)return r}return null}addEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._edges.add(t);const r=new CK(t,!0),n=new CK(t,!1);r.setSym(n),n.setSym(r),this.add(r),this.add(n)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(let r=0;r<this._edges.size();r++){const n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null}}class jK extends NK{constructor(){super(),jK.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new KH,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new GX,2===arguments.length){const t=arguments[0],e=arguments[1];jK.constructor_.call(this,t,e,AX.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=r,null!==e&&this.add(e)}}static determineBoundary(t,e){return t.isInBoundary(e)?TX.BOUNDARY:TX.INTERIOR}insertBoundaryPoint(t,e){const r=this._nodes.addNode(e).getLabel();let n=1,i=TX.NONE;i=r.getLocation(t,WX.ON),i===TX.BOUNDARY&&n++;const o=jK.determineBoundary(this._boundaryNodeRule,n);r.setLocation(t,o)}computeSelfNodes(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){const t=arguments[1],e=arguments[2],r=new pK(arguments[0],!0,!1);r.setIsDoneIfProperInt(e);const n=this.createEdgeSetIntersector(),i=this._parentGeom instanceof AH||this._parentGeom instanceof TH||this._parentGeom instanceof YH,o=t||!i;return n.computeIntersections(this._edges,r,o),this.addSelfIntersectionNodes(this._argIndex),r}}computeSplitEdges(t){for(let e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}}computeEdgeIntersections(t,e,r){const n=new pK(e,r,!0);n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());return this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof fH){const t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,TX.INTERIOR)}else if(arguments[0]instanceof JZ){const t=arguments[0];this.insertPoint(this._argIndex,t,TX.INTERIOR)}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),TX.EXTERIOR,TX.INTERIOR);for(let e=0;e<t.getNumInteriorRing();e++){const r=t.getInteriorRingN(e);this.addPolygonRing(r,TX.INTERIOR,TX.EXTERIOR)}}addEdge(t){this.insertEdge(t);const e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],TX.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],TX.BOUNDARY)}addLineString(t){const e=qH.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;const r=new LK(e,new ZX(this._argIndex,TX.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),ZZ.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){const t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null);let r=0;for(let n=t.iterator();n.hasNext();){const t=n.next();e[r++]=t.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,r){if(this.isBoundaryNode(t,e))return null;r===TX.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)}addPolygonRing(t,e,r){if(t.isEmpty())return null;const n=qH.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;let i=e,o=r;EH.isCCW(n)&&(i=r,o=e);const a=new LK(n,new ZX(this._argIndex,TX.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],TX.BOUNDARY)}insertPoint(t,e,r){const n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new ZX(t,r):i.setLocation(t,r)}createEdgeSetIntersector(){return new dK}addSelfIntersectionNodes(t){for(let e=this._edges.iterator();e.hasNext();){const r=e.next(),n=r.getLabel().getLocation(t);for(let e=r.eiList.iterator();e.hasNext();){const r=e.next();this.addSelfIntersectionNode(t,r.coord,n)}}}add(){if(!(1===arguments.length&&arguments[0]instanceof tH))return super.add.apply(this,arguments);{const t=arguments[0];if(t.isEmpty())return null;if(t instanceof YH&&(this._useBoundaryDeterminationRule=!1),t instanceof TH)this.addPolygon(t);else if(t instanceof lH)this.addLineString(t);else if(t instanceof fH)this.addPoint(t);else if(t instanceof CH)this.addCollection(t);else if(t instanceof QH)this.addCollection(t);else if(t instanceof YH)this.addCollection(t);else{if(!(t instanceof LH))throw new iH(t.getGeometryType());this.addCollection(t)}}}addCollection(t){for(let e=0;e<t.getNumGeometries();e++){const r=t.getGeometryN(e);this.add(r)}}locate(t){return LZ(this._parentGeom,OH)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new MK(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof lH){const t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}}class FK extends VX{constructor(){super(),FK.constructor_.apply(this,arguments)}static constructor_(){if(this._edgeEnds=new vH,1===arguments.length){const t=arguments[0];FK.constructor_.call(this,null,t)}else if(2===arguments.length){const t=arguments[1];VX.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new ZX(t.getLabel())),this.insert(t)}}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(let e=this.iterator();e.hasNext();){e.next().print(t),t.println()}}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,e){let r=0,n=!1;for(let e=this.iterator();e.hasNext();){const i=e.next().getLabel().getLocation(t);i===TX.BOUNDARY&&r++,i===TX.INTERIOR&&(n=!0)}let i=TX.NONE;n&&(i=TX.INTERIOR),r>0&&(i=jK.determineBoundary(e,r)),this._label.setLocation(t,i)}computeLabelSide(t,e){for(let r=this.iterator();r.hasNext();){const n=r.next();if(n.getLabel().isArea()){const r=n.getLabel().getLocation(t,e);if(r===TX.INTERIOR)return this._label.setLocation(t,e,TX.INTERIOR),null;r===TX.EXTERIOR&&this._label.setLocation(t,e,TX.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,WX.LEFT),this.computeLabelSide(t,WX.RIGHT)}updateIM(t){LK.updateIM(this._label,t)}computeLabel(t){let e=!1;for(let t=this.iterator();t.hasNext();){t.next().getLabel().isArea()&&(e=!0)}this._label=e?new ZX(TX.NONE,TX.NONE,TX.NONE):new ZX(TX.NONE);for(let r=0;r<2;r++)this.computeLabelOn(r,t),e&&this.computeLabelSides(r)}}class DK extends uK{constructor(){super()}updateIM(t){for(let e=this.iterator();e.hasNext();){e.next().updateIM(t)}}insert(t){let e=this._edgeMap.get(t);null===e?(e=new FK(t),this.insertEdgeEnd(t,e)):e.insert(t)}}class BK extends KX{constructor(){super(),BK.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];KX.constructor_.call(this,t,e)}updateIMFromEdges(t){this._edges.updateIM(t)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}}class zK extends AK{constructor(){super()}createNode(t){return new BK(t,new DK)}}class GK{constructor(){GK.constructor_.apply(this,arguments)}static constructor_(){this._li=new RX,this._ptLocator=new GX,this._arg=null,this._nodes=new iK(new zK),this._im=null,this._isolatedEdges=new vH,this._invalidPoint=null;const t=arguments[0];this._arg=t}insertEdgeEnds(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._nodes.add(t)}}computeProperIntersectionIM(t,e){const r=this._arg[0].getGeometry().getDimension(),n=this._arg[1].getGeometry().getDimension(),i=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===r&&2===n?i&&e.setAtLeast("212101212"):2===r&&1===n?(i&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===r&&2===n?(i&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===r&&1===n&&o&&e.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,e){for(let r=this._arg[t].getEdgeIterator();r.hasNext();){const t=r.next();t.isIsolated()&&(this.labelIsolatedEdge(t,e,this._arg[e].getGeometry()),this._isolatedEdges.add(t))}}labelIsolatedEdge(t,e,r){if(r.getDimension()>0){const n=this._ptLocator.locate(t.getCoordinate(),r);t.getLabel().setAllLocations(e,n)}else t.getLabel().setAllLocations(e,TX.EXTERIOR)}computeIM(){const t=new qX;if(t.set(TX.EXTERIOR,TX.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);const e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);const r=new HX,n=r.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(n);const i=r.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}labelNodeEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}}copyNodesAndLabels(t){for(let e=this._arg[t].getNodeIterator();e.hasNext();){const r=e.next();this._nodes.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}}labelIntersectionNodes(t){for(let e=this._arg[t].getEdgeIterator();e.hasNext();){const r=e.next(),n=r.getLabel().getLocation(t);for(let e=r.getEdgeIntersectionList().iterator();e.hasNext();){const r=e.next(),i=this._nodes.find(r.coord);i.getLabel().isNull(t)&&(n===TX.BOUNDARY?i.setLabelBoundary(t):i.setLabel(t,TX.INTERIOR))}}}labelIsolatedNode(t,e){const r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,r)}computeIntersectionNodes(t){for(let e=this._arg[t].getEdgeIterator();e.hasNext();){const r=e.next(),n=r.getLabel().getLocation(t);for(let e=r.getEdgeIntersectionList().iterator();e.hasNext();){const r=e.next(),i=this._nodes.addNode(r.coord);n===TX.BOUNDARY?i.setLabelBoundary(t):i.getLabel().isNull(t)&&i.setLabel(t,TX.INTERIOR)}}}labelIsolatedNodes(){for(let t=this._nodes.iterator();t.hasNext();){const e=t.next(),r=e.getLabel();ZZ.isTrue(r.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}}updateIM(t){for(let e=this._isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(let e=this._nodes.iterator();e.hasNext();){const r=e.next();r.updateIM(t),r.updateIMFromEdges(t)}}computeDisjointIM(t){const e=this._arg[0].getGeometry();e.isEmpty()||(t.set(TX.INTERIOR,TX.EXTERIOR,e.getDimension()),t.set(TX.BOUNDARY,TX.EXTERIOR,e.getBoundaryDimension()));const r=this._arg[1].getGeometry();r.isEmpty()||(t.set(TX.EXTERIOR,TX.INTERIOR,r.getDimension()),t.set(TX.EXTERIOR,TX.BOUNDARY,r.getBoundaryDimension()))}}class qK{constructor(){qK.constructor_.apply(this,arguments)}static constructor_(){if(this._li=new RX,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){const t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new jK(0,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];qK.constructor_.call(this,t,e,AX.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new jK(0,t,r),this._arg[1]=new jK(1,e,r)}}getArgGeometry(t){return this._arg[t].getGeometry()}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}}class UK{constructor(){UK.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null;const t=arguments[0];this._rectEnv=t.getEnvelopeInternal()}static contains(t,e){return new UK(t).contains(e)}isContainedInBoundary(t){if(t instanceof TH)return!1;if(t instanceof fH)return this.isPointContainedInBoundary(t);if(t instanceof lH)return this.isLineStringContainedInBoundary(t);for(let e=0;e<t.getNumGeometries();e++){const r=t.getGeometryN(e);if(!this.isContainedInBoundary(r))return!1}return!0}isLineSegmentContainedInBoundary(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(t){const e=t.getCoordinateSequence(),r=new JZ,n=new JZ;for(let t=0;t<e.size()-1;t++)if(e.getCoordinate(t,r),e.getCoordinate(t+1,n),!this.isLineSegmentContainedInBoundary(r,n))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof fH){const t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof JZ){const t=arguments[0];return t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX()||t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()}}contains(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}}class VK{constructor(){VK.constructor_.apply(this,arguments)}static constructor_(){this._li=new RX,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;const t=arguments[0];this._rectEnv=t,this._diagUp0=new JZ(t.getMinX(),t.getMinY()),this._diagUp1=new JZ(t.getMaxX(),t.getMaxY()),this._diagDown0=new JZ(t.getMinX(),t.getMaxY()),this._diagDown1=new JZ(t.getMaxX(),t.getMinY())}intersects(t,e){const r=new QZ(t,e);if(!this._rectEnv.intersects(r))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){const r=t;t=e,e=r}let n=!1;return e.y>t.y&&(n=!0),n?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}}class WK{constructor(){WK.constructor_.apply(this,arguments)}static constructor_(){this._isDone=!1}applyTo(t){for(let e=0;e<t.getNumGeometries()&&!this._isDone;e++){const r=t.getGeometryN(e);if(r instanceof LH)this.applyTo(r);else if(this.visit(r),this.isDone())return this._isDone=!0,null}}}class YK{constructor(){YK.constructor_.apply(this,arguments)}static constructor_(){this._rectangle=null,this._rectEnv=null;const t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()}static intersects(t,e){return new YK(t).intersects(e)}intersects(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;const e=new ZK(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;const r=new HK(this._rectangle);if(r.applyTo(t),r.containsPoint())return!0;const n=new XK(this._rectangle);return n.applyTo(t),!!n.intersects()}}class ZK extends WK{constructor(){super(),ZK.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._intersects=!1;const t=arguments[0];this._rectEnv=t}isDone(){return!0===this._intersects}visit(t){const e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)||e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()||e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}intersects(){return this._intersects}}class HK extends WK{constructor(){super(),HK.constructor_.apply(this,arguments)}static constructor_(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;const t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()}isDone(){return!0===this._containsPoint}visit(t){if(!(t instanceof TH))return null;const e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;const r=new JZ;for(let n=0;n<4;n++)if(this._rectSeq.getCoordinate(n,r),e.contains(r)&&sK.containsPointInPolygon(r,t))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}}class XK extends WK{constructor(){super(),XK.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new JZ,this._p1=new JZ;const t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new VK(this._rectEnv)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(t){const e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;const r=wK.getLines(t);this.checkIntersectionWithLineStrings(r)}checkIntersectionWithLineStrings(t){for(let e=t.iterator();e.hasNext();){const t=e.next();if(this.checkIntersectionWithSegments(t),this._hasIntersection)return null}}checkIntersectionWithSegments(t){const e=t.getCoordinateSequence();for(let t=1;t<e.size();t++)if(e.getCoordinate(t-1,this._p0),e.getCoordinate(t,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}}class KK extends qK{constructor(){super(),KK.constructor_.apply(this,arguments)}static constructor_(){if(this._relate=null,2===arguments.length){const t=arguments[0],e=arguments[1];qK.constructor_.call(this,t,e),this._relate=new GK(this._arg)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];qK.constructor_.call(this,t,e,r),this._relate=new GK(this._arg)}}static covers(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new KK(t,e).getIntersectionMatrix().isCovers())))}static intersects(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return YK.intersects(t,e);if(e.isRectangle())return YK.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(let r=0;r<t.getNumGeometries();r++)for(let n=0;n<e.getNumGeometries();n++)if(t.getGeometryN(r).intersects(e.getGeometryN(n)))return!0;return!1}return new KK(t,e).getIntersectionMatrix().isIntersects()}static touches(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new KK(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())}static equalsTopo(t,e){return!!t.getEnvelopeInternal().equals(e.getEnvelopeInternal())&&KK.relate(t,e).isEquals(t.getDimension(),e.getDimension())}static relate(){if(2===arguments.length){return new KK(arguments[0],arguments[1]).getIntersectionMatrix()}if(3===arguments.length){return new KK(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix()}}static overlaps(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new KK(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())}static crosses(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new KK(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())}static contains(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?UK.contains(t,e):new KK(t,e).getIntersectionMatrix().isContains())))}getIntersectionMatrix(){return this._relate.computeIM()}}function JK(t){return function(t){if(Array.isArray(t))return $K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return $K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $K(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var QK=function(t){var e=t,r=[];return e instanceof NM?r=JK(e.getFeatures().map((function(t){return t.getGeometry()}))):(_z(e)||(e=[e]),r=e.map((function(t){var e;return t instanceof yG?e=t.getGeometry():xz(t)&&(e=t),e}))),r},tJ=function(t,e){var r="",n=new Aq;return e.forEach((function(e,i){0!==i&&(r+=" OR ");var o=e;"point"===o.type.toLowerCase()&&(o.coordinates.length=2);var a=n.writeFeature(o);r+="".concat(t,"({{geometryName}}, ").concat(a,")")})),r},eJ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rJ=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],nJ="enterfullscreen",iJ="leavefullscreen";function oJ(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function aJ(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function sJ(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var uJ=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).cssClassName_=void 0!==n.className?n.className:"ol-full-screen";var i=void 0!==n.label?n.label:"⤢";r.labelNode_="string"==typeof i?document.createTextNode(i):i;var o=void 0!==n.labelActive?n.labelActive:"×";r.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,r.button_=document.createElement("button");var a=n.tipLabel?n.tipLabel:"Toggle full-screen";r.setClassName_(r.button_,aJ()),r.button_.setAttribute("type","button"),r.button_.title=a,r.button_.appendChild(r.labelNode_),r.button_.addEventListener(ji,r.handleClick_.bind(r),!1);var s=r.cssClassName_+" ol-unselectable ol-control "+(oJ()?"":"ol-unsupported"),u=r.element;return u.className=s,u.appendChild(r.button_),r.keys_=void 0!==n.keys&&n.keys,r.source_=n.source,r}return eJ(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(oJ()){var t=this.getMap();if(t)if(aJ())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=void 0;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():sJ(t)}(e):sJ(e)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();aJ()?(this.setClassName_(this.button_,!0),qs(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(nJ)):(this.setClassName_(this.button_,!1),qs(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(iJ)),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var r=this.cssClassName_+"-true",n=this.cssClassName_+"-false",i=e?r:n;t.classList.remove(r),t.classList.remove(n),t.classList.add(i)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var r=0,n=rJ.length;r<n;++r)this.listenerKeys.push(pi(document,rJ[r],this.handleFullScreenChange_,this))},e}(mu),lJ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function cJ(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var hJ=function(t){function e(e){var r=this,n=e||{},i=document.createElement("div");return i.className=void 0!==n.className?n.className:"ol-mouse-position",(r=t.call(this,{element:i,render:n.render||cJ,target:n.target})||this).addEventListener(to("projection"),r.handleProjectionChanged_),n.coordinateFormat&&r.setCoordinateFormat(n.coordinateFormat),n.projection&&r.setProjection(n.projection),r.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=i.innerHTML,r.mapProjection_=null,r.transform_=null,r}return lJ(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get("projection")},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(pi(r,xo,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(pi(r,Eo,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set("projection",Un(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?Kn(this.mapProjection_,r):Gn}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var i=ii();i&&(this.transform_=Kn(this.mapProjection_,i)),this.transform_(n,n);var o=this.getCoordinateFormat();e=o?o(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(mu),fJ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fJ(e,t),e.prototype.createRenderer=function(){return new Gc(this)},e}(pu);function dJ(t){this.validateExtent_(),this.updateBox_()}var mJ=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||dJ,target:n.target})||this).boundHandleRotationChanged_=r.handleRotationChanged_.bind(r),r.collapsed_=void 0===n.collapsed||n.collapsed,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1),r.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,r.viewExtent_=void 0;var i=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"«";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"»";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(ji,r.handleClick_.bind(r),!1),r.ovmapDiv_=document.createElement("div"),r.ovmapDiv_.className="ol-overviewmap-map",r.view_=n.view,r.ovmap_=new pJ({view:n.view});var c=r.ovmap_;n.layers&&n.layers.forEach((function(t){c.addLayer(t)}));var h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",r.boxOverlay_=new mv({position:[0,0],positioning:nv,element:h}),r.ovmap_.addOverlay(r.boxOverlay_);var f=i+" ol-unselectable ol-control"+(r.collapsed_&&r.collapsible_?" ol-collapsed":"")+(r.collapsible_?"":" ol-uncollapsible"),p=r.element;p.className=f,p.appendChild(r.ovmapDiv_),p.appendChild(l);var d=r,m=r.boxOverlay_,y=r.boxOverlay_.getElement(),g=function(t){var e,r={clientX:(e=t).clientX,clientY:e.clientY},n=c.getEventCoordinateInternal(r);m.setPosition(n)},v=function t(e){var r=c.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(r),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",t)};return y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)})),r}return fJ(e,t),e.prototype.setMap=function(e){var r=this.getMap();if(e!==r){if(r){var n=r.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(pi(e,fi,this.handleMapPropertyChange_,this));var i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===Ao){var e=t.oldValue;e&&this.unbindView_(e);var r=this.getMap().getView();this.bindView_(r)}},e.prototype.bindView_=function(t){if(!this.view_){var e=new Ds({projection:t.getProjection()});this.ovmap_.setView(e)}t.addEventListener(to(oa),this.boundHandleRotationChanged_),this.handleRotationChanged_()},e.prototype.unbindView_=function(t){t.removeEventListener(to(oa),this.boundHandleRotationChanged_)},e.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView().calculateExtentInternal(r);if(!this.viewExtent_||!Xr(n,this.viewExtent_)){this.viewExtent_=n;var i=e.getSize(),o=e.getView().calculateExtentInternal(i),a=e.getPixelFromCoordinateInternal(hn(n)),s=e.getPixelFromCoordinateInternal(on(n)),u=Math.abs(a[0]-s[0]),l=Math.abs(a[1]-s[1]),c=i[0],h=i[1];u<.1*c||l<.1*h||u>.75*c||l>.75*h?this.resetExtent_():Gr(o,n)||this.recenter_()}}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getSize(),n=t.getView().calculateExtentInternal(r),i=e.getView(),o=Math.log(7.5)/Math.LN2;yn(n,1/(.1*Math.pow(2,o/2))),i.fitInternal(Ls(n))},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenterInternal(r.getCenterInternal())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView(),i=e.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),u=n.getCenterInternal(),l=n.getResolution(),c=i.getResolution(),h=r[0]*l/c,f=r[1]*l/c;if(a.setPosition(u),s){s.style.width=h+"px",s.style.height=f+"px";var p="rotate("+o+"rad)";s.style.transform=p}}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?qs(this.collapseLabel_,this.label_):qs(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),di(t,Po,(function(t){this.updateBox_()}),this)}},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.setRotateWithView=function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(mu),yJ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gJ=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var i=void 0!==n.className?n.className:"ol-zoom-extent",o=void 0!==n.label?n.label:"E",a=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(ji,r.handleClick_.bind(r),!1);var u=i+" ol-unselectable ol-control",l=r.element;return l.className=u,l.appendChild(s),r}return yJ(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Ls(e))},e}(mu),vJ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_J={};_J[dr.POINT]=function(t){var e;e=void 0!==t.m&&void 0!==t.z?new ds([t.x,t.y,t.z,t.m],Pa):void 0!==t.z?new ds([t.x,t.y,t.z],Oa):void 0!==t.m?new ds([t.x,t.y,t.m],Ta):new ds([t.x,t.y]);return e},_J[dr.LINE_STRING]=function(t){var e=xJ(t);return new vp(t.paths[0],e)},_J[dr.POLYGON]=function(t){var e=xJ(t);return new ks(t.rings,e)},_J[dr.MULTI_POINT]=function(t){var e=xJ(t);return new bp(t.points,e)},_J[dr.MULTI_LINE_STRING]=function(t){var e=xJ(t);return new xp(t.paths,e)},_J[dr.MULTI_POLYGON]=function(t){var e=xJ(t);return new Sp(t.rings,e)};var bJ={};function wJ(t,e){var r,n,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=dr.POINT;else if(t.points)i=dr.MULTI_POINT;else if(t.paths){i=1===t.paths.length?dr.LINE_STRING:dr.MULTI_LINE_STRING}else if(t.rings){var o=t,a=xJ(o),s=function(t,e){var r,n,i=[],o=[],a=[];for(r=0,n=t.length;r<n;++r){i.length=0,es(i,0,t[r],e.length),Ss(i,0,i.length,e.length)?o.push([t[r]]):a.push(t[r])}for(;a.length;){var s=a.shift(),u=!1;for(r=o.length-1;r>=0;r--){var l=o[r][0];if(Gr(new fs(l).getExtent(),new fs(s).getExtent())){o[r].push(s),u=!0;break}}u||o.push([s.reverse()])}return o}(o.rings,a);1===s.length?(i=dr.POLYGON,t=Object.assign({},t,((r={}).rings=s[0],r))):(i=dr.MULTI_POLYGON,t=Object.assign({},t,((n={}).rings=s,n)))}return hg((0,_J[i])(t),!1,e)}function xJ(t){var e=Ea;return!0===t.hasZ&&!0===t.hasM?e=Pa:!0===t.hasZ?e=Oa:!0===t.hasM&&(e=Ta),e}function MJ(t){var e=t.getLayout();return{hasZ:e===Oa||e===Pa,hasM:e===Ta||e===Pa}}function SJ(t,e){return(0,bJ[t.getType()])(hg(t,!0,e),e)}bJ[dr.POINT]=function(t,e){var r,n=t.getCoordinates(),i=t.getLayout();i===Oa?r={x:n[0],y:n[1],z:n[2]}:i===Ta?r={x:n[0],y:n[1],m:n[2]}:i===Pa?r={x:n[0],y:n[1],z:n[2],m:n[3]}:i===Ea?r={x:n[0],y:n[1]}:Er(!1,34);return r},bJ[dr.LINE_STRING]=function(t,e){var r=MJ(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:[t.getCoordinates()]}},bJ[dr.POLYGON]=function(t,e){var r=MJ(t);return{hasZ:r.hasZ,hasM:r.hasM,rings:t.getCoordinates(!1)}},bJ[dr.MULTI_POINT]=function(t,e){var r=MJ(t);return{hasZ:r.hasZ,hasM:r.hasM,points:t.getCoordinates()}},bJ[dr.MULTI_LINE_STRING]=function(t,e){var r=MJ(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:t.getCoordinates()}},bJ[dr.MULTI_POLYGON]=function(t,e){for(var r=MJ(t),n=t.getCoordinates(!1),i=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)i.push(n[o][a]);return{hasZ:r.hasZ,hasM:r.hasM,rings:i}};var EJ=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).geometryName_=n.geometryName,r}return vJ(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=t,n=wJ(r.geometry,e),i=new lp;return this.geometryName_&&i.setGeometryName(this.geometryName_),i.setGeometry(n),e&&e.idField&&r.attributes[e.idField]&&i.setId(r.attributes[e.idField]),r.attributes&&i.setProperties(r.attributes,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=e||{};if(t.features){var n=[],i=t.features;r.idField=t.objectIdFieldName;for(var o=0,a=i.length;o<a;++o)n.push(this.readFeatureFromObject(i[o],r));return n}return[this.readFeatureFromObject(t,r)]},e.prototype.readGeometryFromObject=function(t,e){return wJ(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?Un("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return SJ(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={},n=t.getGeometry();n&&(r.geometry=SJ(n,e),e&&e.featureProjection&&(r.geometry.spatialReference={wkid:Number(Un(e.featureProjection).getCode().split(":").pop())}));var i=t.getProperties();return delete i[t.getGeometryName()],Nn(i)?r.attributes={}:r.attributes=i,r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{features:r}},e}($C),OJ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TJ=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).schemaLocation=n.schemaLocation?n.schemaLocation:r.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",r}return OJ(e,t),e}(Tg);TJ.prototype.namespace="http://www.opengis.net/gml/3.2",TJ.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:nd(Tg.prototype.readFlatPos_),posList:nd(Tg.prototype.readFlatPosList_)}},TJ.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Tg.prototype.interiorParser_,exterior:Tg.prototype.exteriorParser_}},TJ.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:nd(Mg.prototype.readPoint),MultiPoint:nd(Mg.prototype.readMultiPoint),LineString:nd(Mg.prototype.readLineString),MultiLineString:nd(Mg.prototype.readMultiLineString),LinearRing:nd(Mg.prototype.readLinearRing),Polygon:nd(Mg.prototype.readPolygon),MultiPolygon:nd(Mg.prototype.readMultiPolygon),Surface:nd(TJ.prototype.readSurface_),MultiSurface:nd(Tg.prototype.readMultiSurface_),Curve:nd(TJ.prototype.readCurve_),MultiCurve:nd(Tg.prototype.readMultiCurve_),Envelope:nd(TJ.prototype.readEnvelope_)}},TJ.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{curveMember:rd(Tg.prototype.curveMemberParser_),curveMembers:rd(Tg.prototype.curveMemberParser_)}},TJ.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:rd(Tg.prototype.surfaceMemberParser_),surfaceMembers:rd(Tg.prototype.surfaceMemberParser_)}},TJ.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:rd(Mg.prototype.readLineString),Curve:rd(Tg.prototype.readCurve_)}},TJ.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:rd(Mg.prototype.readPolygon),Surface:rd(Tg.prototype.readSurface_)}},TJ.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{patches:nd(Tg.prototype.readPatch_)}},TJ.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{segments:nd(Tg.prototype.readSegment_)}},TJ.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:rd(Tg.prototype.readFlatPosList_),upperCorner:rd(Tg.prototype.readFlatPosList_)}},TJ.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml/3.2":{PolygonPatch:nd(Tg.prototype.readPolygonPatch_)}},TJ.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml/3.2":{LineStringSegment:nd(Tg.prototype.readLineStringSegment_)}},TJ.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml/3.2":{pointMember:rd(Mg.prototype.pointMemberParser_),pointMembers:rd(Mg.prototype.pointMemberParser_)}},TJ.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:rd(Mg.prototype.lineStringMemberParser_),lineStringMembers:rd(Mg.prototype.lineStringMemberParser_)}},TJ.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml/3.2":{polygonMember:rd(Mg.prototype.polygonMemberParser_),polygonMembers:rd(Mg.prototype.polygonMemberParser_)}},TJ.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Point:rd(Mg.prototype.readFlatCoordinatesFromNode_)}},TJ.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:rd(Mg.prototype.readLineString)}},TJ.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:rd(Mg.prototype.readPolygon)}},TJ.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:nd(Mg.prototype.readFlatLinearRing_)}},TJ.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{exterior:ad(Tg.prototype.writeRing_),interior:ad(Tg.prototype.writeRing_)}},TJ.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:ad(Rd),upperCorner:ad(Rd)}},TJ.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:ad(Tg.prototype.writeSurfaceOrPolygonMember_),polygonMember:ad(Tg.prototype.writeSurfaceOrPolygonMember_)}},TJ.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{pointMember:ad(Tg.prototype.writePointMember_)}},TJ.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:ad(Tg.prototype.writeLineStringOrCurveMember_),curveMember:ad(Tg.prototype.writeLineStringOrCurveMember_)}},TJ.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{Curve:ad(Tg.prototype.writeCurveOrLineString_),MultiCurve:ad(Tg.prototype.writeMultiCurveOrLineString_),Point:ad(TJ.prototype.writePoint_),MultiPoint:ad(Tg.prototype.writeMultiPoint_),LineString:ad(Tg.prototype.writeCurveOrLineString_),MultiLineString:ad(Tg.prototype.writeMultiCurveOrLineString_),LinearRing:ad(Tg.prototype.writeLinearRing_),Polygon:ad(Tg.prototype.writeSurfaceOrPolygon_),MultiPolygon:ad(Tg.prototype.writeMultiSurfaceOrPolygon_),Surface:ad(Tg.prototype.writeSurfaceOrPolygon_),MultiSurface:ad(Tg.prototype.writeMultiSurfaceOrPolygon_),Envelope:ad(Tg.prototype.writeEnvelope)}};var PJ=TJ,IJ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kJ=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],RJ={rte:o$,trk:a$,wpt:s$},LJ=hd(kJ,{rte:rd(o$),trk:rd(a$),wpt:rd(s$)}),CJ=hd(kJ,{text:od(Td,"linkText"),type:od(Td,"linkType")}),AJ=hd(kJ,{rte:ad((function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==dr.LINE_STRING){var s=hg(a,!0,n);o.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates()}var u=r[r.length-1].node,l=VJ[u.namespaceURI],c=cd(i,l);md(o,WJ,ld,c,r,l)})),trk:ad((function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==dr.MULTI_LINE_STRING){var s=hg(a,!0,n);i.trkseg=s.getLineStrings()}var u=r[r.length-1].node,l=ZJ[u.namespaceURI],c=cd(i,l);md(o,HJ,ld,c,r,l)})),wpt:ad((function(t,e,r){var n=r[0],i=r[r.length-1];i.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==dr.POINT){var a=hg(o,!0,n);i.geometryLayout=a.getLayout(),l$(t,a.getCoordinates(),r)}}))}),NJ=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Un("EPSG:4326"),r.readExtensions_=n.readExtensions,r}return IJ(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,r=t.length;e<r;++e){var n=t[e];if(this.readExtensions_){var i=n.get("extensionsNode_")||null;this.readExtensions_(n,i)}n.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!vi(kJ,t.namespaceURI))return null;var r=RJ[t.localName];if(!r)return null;var n=r(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},e.prototype.readFeaturesFromNode=function(t,e){if(!vi(kJ,t.namespaceURI))return[];if("gpx"==t.localName){var r=pd([],LJ,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Jp("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Kp),r.setAttributeNS(Kp,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),md({node:r},AJ,t$,t,[e]),r},e}(vg),jJ=hd(kJ,{name:od(Td),cmt:od(Td),desc:od(Td),src:od(Td),link:n$,number:od(Ed),extensions:i$,type:od(Td),rtept:function(t,e){var r=pd({},FJ,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;e$(i,o,t,r)}}}),FJ=hd(kJ,{ele:od(Md),time:od(xd)}),DJ=hd(kJ,{name:od(Td),cmt:od(Td),desc:od(Td),src:od(Td),link:n$,number:od(Ed),type:od(Td),extensions:i$,trkseg:function(t,e){var r=e[e.length-1];fd(BJ,t,e);var n=r.flatCoordinates;r.ends.push(n.length)}}),BJ=hd(kJ,{trkpt:function(t,e){var r=pd({},zJ,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;e$(i,o,t,r)}}}),zJ=hd(kJ,{ele:od(Md),time:od(xd)}),GJ=hd(kJ,{ele:od(Md),time:od(xd),magvar:od(Md),geoidheight:od(Md),name:od(Td),cmt:od(Td),desc:od(Td),src:od(Td),link:n$,sym:od(Td),type:od(Td),fix:od(Td),sat:od(Ed),hdop:od(Md),vdop:od(Md),pdop:od(Md),ageofdgpsdata:od(Md),dgpsid:od(Ed),extensions:i$}),qJ=["text","type"],UJ=hd(kJ,{text:ad(Rd),type:ad(Rd)}),VJ=hd(kJ,["name","cmt","desc","src","link","number","type","rtept"]),WJ=hd(kJ,{name:ad(Rd),cmt:ad(Rd),desc:ad(Rd),src:ad(Rd),link:ad(u$),number:ad(kd),type:ad(Rd),rtept:sd(ad(l$))}),YJ=hd(kJ,["ele","time"]),ZJ=hd(kJ,["name","cmt","desc","src","link","number","type","trkseg"]),HJ=hd(kJ,{name:ad(Rd),cmt:ad(Rd),desc:ad(Rd),src:ad(Rd),link:ad(u$),number:ad(kd),type:ad(Rd),trkseg:sd(ad((function(t,e,r){var n={node:t};n.geometryLayout=e.getLayout(),n.properties={},md(n,KJ,XJ,e.getCoordinates(),r)})))}),XJ=ud("trkpt"),KJ=hd(kJ,{trkpt:ad(l$)}),JJ=hd(kJ,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),$J=hd(kJ,{ele:ad(Id),time:ad((function(t,e){var r=new Date(1e3*e),n=r.getUTCFullYear()+"-"+aa(r.getUTCMonth()+1,2)+"-"+aa(r.getUTCDate(),2)+"T"+aa(r.getUTCHours(),2)+":"+aa(r.getUTCMinutes(),2)+":"+aa(r.getUTCSeconds(),2)+"Z";t.appendChild(vd().createTextNode(n))})),magvar:ad(Id),geoidheight:ad(Id),name:ad(Rd),cmt:ad(Rd),desc:ad(Rd),src:ad(Rd),link:ad(u$),sym:ad(Rd),type:ad(Rd),fix:ad(Rd),sat:ad(kd),hdop:ad(Id),vdop:ad(Id),pdop:ad(Id),ageofdgpsdata:ad(Id),dgpsid:ad(kd)}),QJ={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function t$(t,e,r){var n=t.getGeometry();if(n){var i=QJ[n.getType()];if(i)return Jp(e[e.length-1].node.namespaceURI,i)}}function e$(t,e,r,n){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function r$(t,e,r){var n=Ea,i=2;if(t.hasZ&&t.hasM?(n=Pa,i=4):t.hasZ?(n=Oa,i=3):t.hasM&&(n=Ta,i=3),4!==i){for(var o=0,a=e.length/4;o<a;o++)e[o*i]=e[4*o],e[o*i+1]=e[4*o+1],t.hasZ&&(e[o*i+2]=e[4*o+2]),t.hasM&&(e[o*i+2]=e[4*o+3]);if(e.length=e.length/4*i,r)for(o=0,a=r.length;o<a;o++)r[o]=r[o]/4*i}return n}function n$(t,e){var r=e[e.length-1],n=t.getAttribute("href");null!==n&&(r.link=n),fd(CJ,t,e)}function i$(t,e){e[e.length-1].extensionsNode_=t}function o$(t,e){var r=e[0],n=pd({flatCoordinates:[],layoutOptions:{}},jJ,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var a=r$(o,i),s=new vp(i,a);hg(s,!1,r);var u=new lp(s);return u.setProperties(n,!0),u}}function a$(t,e){var r=e[0],n=pd({flatCoordinates:[],ends:[],layoutOptions:{}},DJ,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var s=r$(a,i,o),u=new xp(i,s,o);hg(u,!1,r);var l=new lp(u);return l.setProperties(n,!0),l}}function s$(t,e){var r=e[0],n=pd({},GJ,t,e);if(n){var i={},o=e$([],i,t,n),a=r$(i,o),s=new ds(o,a);hg(s,!1,r);var u=new lp(s);return u.setProperties(n,!0),u}}function u$(t,e,r){t.setAttribute("href",e);var n=r[r.length-1].properties,i=[n.linkText,n.linkType];md({node:t},UJ,ld,i,r,qJ)}function l$(t,e,r){var n=r[r.length-1],i=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case Pa:0!==e[3]&&(o.time=e[3]);case Oa:0!==e[2]&&(o.ele=e[2]);break;case Ta:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?YJ[i]:JJ[i],s=cd(o,a);md({node:t,properties:o},$J,ld,s,r,a)}var c$=NJ,h$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f$="barometric",p$="gps",d$="none",m$=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,y$=/^H.([A-Z]{3}).*?:(.*)/,g$=/^HFDTE(\d{2})(\d{2})(\d{2})/,v$=/\r\n|\r|\n/,_$=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Un("EPSG:4326"),r.altitudeMode_=n.altitudeMode?n.altitudeMode:d$,r}return h$(e,t),e.prototype.readFeatureFromText=function(t,e){var r,n,i=this.altitudeMode_,o=t.split(v$),a={},s=[],u=2e3,l=0,c=1,h=-1;for(r=0,n=o.length;r<n;++r){var f=o[r],p=void 0;if("B"==f.charAt(0)){if(p=m$.exec(f)){var d=parseInt(p[1],10),m=parseInt(p[2],10),y=parseInt(p[3],10),g=parseInt(p[4],10)+parseInt(p[5],10)/6e4;"S"==p[6]&&(g=-g);var v=parseInt(p[7],10)+parseInt(p[8],10)/6e4;if("W"==p[9]&&(v=-v),s.push(v,g),i!=d$){var _=void 0;_=i==p$?parseInt(p[11],10):i==f$?parseInt(p[12],10):0,s.push(_)}var b=Date.UTC(u,l,c,d,m,y);b<h&&(b=Date.UTC(u,l,c+1,d,m,y)),s.push(b/1e3),h=b}}else"H"==f.charAt(0)&&((p=g$.exec(f))?(c=parseInt(p[1],10),l=parseInt(p[2],10)-1,u=2e3+parseInt(p[3],10)):(p=y$.exec(f))&&(a[p[1]]=p[2].trim()))}if(0===s.length)return null;var w=new vp(s,i==d$?Ta:Pa),x=new lp(hg(w,!1,e));return x.setProperties(a,!0),x},e.prototype.readFeaturesFromText=function(t,e){var r=this.readFeatureFromText(t,e);return r?[r]:[]},e}(XG),b$="version1",w$="version2",x$="version3",M$={};M$[b$]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},M$[w$]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},M$[x$]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},M$.none={none:{supports:[],formats:[],qualities:[]}};var S$=new RegExp("^https?://library.stanford.edu/iiif/image-api/(1.1/)?compliance.html#level[0-2]$"),E$=new RegExp("^https?://iiif.io/api/image/2/level[0-2](.json)?$"),O$=new RegExp("(^https?://iiif.io/api/image/3/level[0-2](.json)?$)|(^level[0-2]$)");var T$={};T$[b$]=function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=M$[b$].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),supports:e.supports,formats:e.formats.concat([void 0===t.imageInfo.formats?[]:t.imageInfo.formats]),qualities:e.qualities.concat([void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},T$[w$]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=r&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=r&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=r&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:e.supports.concat(n),formats:e.formats.concat(i),qualities:e.qualities.concat(o)}},T$[x$]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=void 0===t.imageInfo.extraFormats?e.formats:e.formats.concat(t.imageInfo.extraFormats),n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return["jpg","png","gif"].includes(t)})).reduce((function(t,e){return void 0===t&&r.includes(e)?e:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:e.supports.concat(t.imageInfo.extraFeatures),formats:r,qualities:void 0===t.imageInfo.extraQualities?e.qualities:e.qualities.concat(t.imageInfo.extraQualities),preferredFormat:n}};var P$=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return b$;case"http://iiif.io/api/image/2/context.json":return w$;case"http://iiif.io/api/image/3/context.json":return x$;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(b$)&&this.imageInfo.identifier)return b$}Er(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case b$:if(S$.test(this.imageInfo.profile))return this.imageInfo.profile;break;case x$:if(O$.test(this.imageInfo.profile))return this.imageInfo.profile;break;case w$:if("string"==typeof this.imageInfo.profile&&E$.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&E$.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var r=e.match(/level[0-2](\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?M$.none.none:M$[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},r=this.getImageApiVersion();if(void 0!==r){var n=void 0===r?void 0:T$[r](this);if(void 0!==n)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==e.format&&n.formats.includes(e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort((function(t,e){return e-t})):void 0,tileSize:n.tileSize}}},t}(),I$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k$=[null],R$=hd(k$,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:N$}),L$=hd(k$,{node:function(t,e){var r=e[0],n=e[e.length-1],i=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.nodes[i]=o;var a=pd({tags:{}},A$,t,e);if(!Nn(a.tags)){var s=new ds(o);hg(s,!1,r);var u=new lp(s);u.setId(i),u.setProperties(a.tags,!0),n.features.push(u)}},way:function(t,e){var r=pd({id:t.getAttribute("id"),ndrefs:[],tags:{}},R$,t,e);e[e.length-1].ways.push(r)}}),C$=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=Un("EPSG:4326"),e}return I$(e,t),e.prototype.readFeaturesFromNode=function(t,e){var r=this.getReadOptions(t,e);if("osm"==t.localName){for(var n=pd({nodes:{},ways:[],features:[]},L$,t,[r]),i=0;i<n.ways.length;i++){for(var o=n.ways[i],a=[],s=0,u=o.ndrefs.length;s<u;s++){wi(a,n.nodes[o.ndrefs[s]])}var l=void 0;hg(l=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new ks(a,Ea,[a.length]):new vp(a,Ea),!1,r);var c=new lp(l);c.setId(o.id),c.setProperties(o.tags,!0),n.features.push(c)}if(n.features)return n.features}return[]},e}(vg),A$=hd(k$,{tag:N$});function N$(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var j$=C$;function F$(t,e,r,n,i,o){var a,s;void 0!==i?(a=i,s=void 0!==o?o:0):(a=[],s=0);for(var u=e;u<r;){var l=t[u++];a[s++]=t[u++],a[s++]=l;for(var c=2;c<n;++c)a[s++]=t[u++]}return a.length=s,a}var D$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function B$(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=0,s=t.length;a<s;)for(n=0;n<e;++n,++a){var u=t[a],l=u-o[n];o[n]=u,t[a]=l}return G$(t,i)}function z$(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=q$(t,i),s=0,u=a.length;s<u;)for(n=0;n<e;++n,++s)o[n]+=a[s],a[s]=o[n];return a}function G$(t,e){for(var r=e||1e5,n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*r);return function(t){for(var e=0,r=t.length;e<r;++e){var n=t[e];t[e]=n<0?~(n<<1):n<<1}return function(t){for(var e="",r=0,n=t.length;r<n;++r)e+=U$(t[r]);return e}(t)}(t)}function q$(t,e){for(var r=e||1e5,n=function(t){for(var e=function(t){for(var e=[],r=0,n=0,i=0,o=t.length;i<o;++i){var a=t.charCodeAt(i)-63;r|=(31&a)<<n,a<32?(e.push(r),r=0,n=0):n+=5}return e}(t),r=0,n=e.length;r<n;++r){var i=e[r];e[r]=1&i?~(i>>1):i>>1}return e}(t),i=0,o=n.length;i<o;++i)n[i]/=r;return n}function U$(t){for(var e,r="";t>=32;)e=63+(32|31&t),r+=String.fromCharCode(e),t>>=5;return e=t+63,r+=String.fromCharCode(e)}var V$=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Un("EPSG:4326"),r.factor_=n.factor?n.factor:1e5,r.geometryLayout_=n.geometryLayout?n.geometryLayout:Ea,r}return D$(e,t),e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);return new lp(r)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var r=Wa(this.geometryLayout_),n=z$(t,r,this.factor_);F$(n,0,n.length,r,n);var i=ns(n,0,n.length,r);return hg(new vp(i,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):(Er(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var r=(t=hg(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return F$(r,0,r.length,n,r),B$(r,n,this.factor_)},e}(XG),W$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y$=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.layerName_=n.layerName,r.layers_=n.layers?n.layers:null,r.dataProjection=Un(n.dataProjection?n.dataProjection:"EPSG:4326"),r}return W$(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var r=t,n=void 0,i=null,o=null;r.transform&&(i=(n=r.transform).scale,o=n.translate);var a=r.arcs;n&&function(t,e,r){for(var n=0,i=t.length;n<i;++n)J$(t[n],e,r)}(a,i,o);var s=[],u=r.objects,l=this.layerName_,c=void 0;for(var h in u)this.layers_&&-1==this.layers_.indexOf(h)||("GeometryCollection"===u[h].type?(c=u[h],s.push.apply(s,X$(c,a,i,o,l,h,e))):(c=u[h],s.push(K$(c,a,i,o,l,h,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}($C),Z$={Point:function(t,e,r){var n=t.coordinates;e&&r&&$$(n,e,r);return new ds(n)},LineString:function(t,e){var r=H$(t.arcs,e);return new vp(r)},Polygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=H$(t.arcs[n],e);return new ks(r)},MultiPoint:function(t,e,r){var n=t.coordinates;if(e&&r)for(var i=0,o=n.length;i<o;++i)$$(n[i],e,r);return new bp(n)},MultiLineString:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=H$(t.arcs[n],e);return new xp(r)},MultiPolygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n){for(var o=t.arcs[n],a=[],s=0,u=o.length;s<u;++s)a[s]=H$(o[s],e);r[n]=a}return new Sp(r)}};function H$(t,e){for(var r,n,i=[],o=0,a=t.length;o<a;++o)r=t[o],o>0&&i.pop(),n=r>=0?e[r]:e[~r].slice().reverse(),i.push.apply(i,n);for(var s=0,u=i.length;s<u;++s)i[s]=i[s].slice();return i}function X$(t,e,r,n,i,o,a){for(var s=t.geometries,u=[],l=0,c=s.length;l<c;++l)u[l]=K$(s[l],e,r,n,i,o,a);return u}function K$(t,e,r,n,i,o,a){var s,u=t.type,l=Z$[u];s="Point"===u||"MultiPoint"===u?l(t,r,n):l(t,e);var c=new lp;c.setGeometry(hg(s,!1,a)),void 0!==t.id&&c.setId(t.id);var h=t.properties;return i&&(h||(h={}),h[i]=o),h&&c.setProperties(h,!0),c}function J$(t,e,r){for(var n=0,i=0,o=0,a=t.length;o<a;++o){var s=t[o];n+=s[0],i+=s[1],s[0]=n,s[1]=i,$$(s,e,r)}}function $$(t,e,r){t[0]=t[0]*e[0]+r[0],t[1]=t[1]*e[1]+r[1]}var Q$=Y$,tQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eQ=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureNS_="http://mapserver.gis.umn.edu/mapserver",r.gmlFormat_=new wE,r.layers_=n.layers?n.layers:null,r}return tQ(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var r=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==r)for(var i=0,o=t.childNodes.length;i<o;i++){var a=t.childNodes[i];if(a.nodeType===Node.ELEMENT_NODE){var s=a,u=e[0],l=s.localName.replace("_layer","");if(!this.layers_||vi(this.layers_,l)){var c=l+"_feature";u.featureType=c,u.featureNS=this.featureNS_;var h={};h[c]=rd(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var f=hd([u.featureNS,null],h);s.setAttribute("namespaceURI",this.featureNS_);var p=pd([],f,s,e,this.gmlFormat_);p&&wi(n,p)}}}if("FeatureCollection"==r){var d=pd([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);d&&(n=d)}return n},e.prototype.readFeaturesFromNode=function(t,e){var r={};return e&&Ln(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])},e}(vg),rQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nQ="addfeatures",iQ=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.features=n,o.file=r,o.projection=i,o}return rQ(e,t),e}(Ii);function oQ(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var i=e.item(r),o=new FileReader;o.addEventListener(Ui,this.handleResult_.bind(this,i)),o.readAsText(i)}}function aQ(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var sQ=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{handleEvent:Ei})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],r.projection_=n.projection?Un(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return rQ(e,t),e.prototype.handleResult_=function(t,e){var r=e.target.result,n=this.getMap(),i=this.projection_;i||(i=n.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,u=o.length;s<u;++s){var l=new o[s];if((a=this.tryReadFeatures_(l,r,{featureProjection:i}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new iQ(nQ,t,a,i))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[pi(e,zi,oQ,this),pi(e,Di,aQ,this),pi(e,Bi,aQ,this),pi(e,zi,aQ,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(mi),this.dropListenKeys_=null)},e}(Nu),uQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lQ=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).condition_=n.condition?n.condition:Zu,r.lastAngle_=void 0,r.lastMagnitude_=void 0,r.lastScaleDelta_=0,r.duration_=void 0!==n.duration?n.duration:400,r}return uQ(e,t),e.prototype.handleDragEvent=function(t){if(Xu(t)){var e=t.map,r=e.getSize(),n=t.pixel,i=n[0]-r[0]/2,o=r[1]/2-n[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),u=e.getView();if(void 0!==this.lastAngle_){var l=this.lastAngle_-a;u.adjustRotationInternal(l)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&u.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!Xu(t))return!0;var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!Xu(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}(Qu),cQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hQ="Point",fQ="LineString",pQ="Polygon",dQ="Circle",mQ="drawstart",yQ="drawend",gQ="drawabort",vQ=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return cQ(e,t),e}(Ii);var _Q=function(t){function e(e){var r=this,n=e;n.stopDown||(n.stopDown=Oi),(r=t.call(this,n)||this).shouldHandle_=!1,r.downPx_=null,r.downTimeout_,r.lastDragTime_,r.freehand_=!1,r.source_=e.source?e.source:null,r.features_=e.features?e.features:null,r.snapTolerance_=e.snapTolerance?e.snapTolerance:12,r.type_=e.type,r.mode_=function(t){var e;t===dr.POINT||t===dr.MULTI_POINT?e=hQ:t===dr.LINE_STRING||t===dr.MULTI_LINE_STRING?e=fQ:t===dr.POLYGON||t===dr.MULTI_POLYGON?e=pQ:t===dr.CIRCLE&&(e=dQ);return e}(r.type_),r.stopClick_=!!e.stopClick,r.minPoints_=e.minPoints?e.minPoints:r.mode_===pQ?3:2,r.maxPoints_=e.maxPoints?e.maxPoints:1/0,r.finishCondition_=e.finishCondition?e.finishCondition:Ei;var i,o=e.geometryFunction;if(!o)if(r.type_===dr.CIRCLE)o=function(t,e,r){var n=e||new kp([NaN,NaN]),i=ai(t[0],r),o=ma(i,ai(t[1],r));n.setCenterAndRadius(i,Math.sqrt(o));var a=ii();return a&&n.transform(r,a),n};else{var a,s=r.mode_;s===hQ?a=ds:s===fQ?a=vp:s===pQ&&(a=ks),o=function(t,e,r){var n=e;return n?s===pQ?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new a(t),n}}return r.geometryFunction_=o,r.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,r.overlay_=new Ob({source:new Db({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=x_(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=e.geometryName,r.condition_=e.condition?e.condition:Yu,r.freehandCondition_,e.freehand?r.freehandCondition_=qu:r.freehandCondition_=e.freehandCondition?e.freehandCondition:Zu,r.addEventListener(to(Lu),r.updateState_),r}return cQ(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===Ni&&e.preventDefault(),this.freehand_=this.mode_!==hQ&&this.freehandCondition_(e);var r=e.type===_o.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&e.type===_o.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===_o.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===_o.POINTERDOWN?n=!1:r?(n=e.type===_o.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===_o.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===_o.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new wo(_o.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var r=this.mode_===dQ;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||r?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===hQ&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],i=e[1]-r[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var r=!1,n=[this.finishCoordinate_];if(this.mode_===fQ)r=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===pQ){var i=this.sketchCoords_;r=i[0].length>this.minPoints_,n=[i[0][0],i[0][i[0].length-2]]}if(r)for(var o=t.map,a=0,s=n.length;a<s;a++){var u=n[a],l=o.getPixelFromCoordinate(u),c=t.pixel,h=c[0]-l[0],f=c[1]-l[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+f*f)<=p){this.finishCoordinate_=u;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new lp(new ds(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,r=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===hQ?this.sketchCoords_=e.slice():this.mode_===pQ?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new lp(new vp(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,r);this.sketchFeature_=new lp,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new vQ(mQ,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,r,n,i=t.coordinate,o=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();(this.mode_===hQ?r=this.sketchCoords_:this.mode_===pQ?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(i=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=i[0],r[1]=i[1],this.geometryFunction_(this.sketchCoords_,o,a),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(i);if(o.getType()==dr.POLYGON&&this.mode_!==pQ){this.sketchLine_||(this.sketchLine_=new lp);var s=o.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new vp(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,r,n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===fQ?(this.finishCoordinate_=t.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),this.geometryFunction_(r,n,i)):this.mode_===pQ&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===fQ?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,r),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===pQ&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,r)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===fQ?(e.pop(),this.geometryFunction_(e,r,n)):this.mode_===pQ&&(e[0].pop(),this.geometryFunction_(e,r,n),e=r.getCoordinates()),this.type_===dr.MULTI_POINT?t.setGeometry(new bp([e])):this.type_===dr.MULTI_LINE_STRING?t.setGeometry(new xp([e])):this.type_===dr.MULTI_POLYGON&&t.setGeometry(new Sp([e])),this.dispatchEvent(new vQ(yQ,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new vQ(gQ,t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,r=[];e===fQ?r=this.sketchCoords_:e===pQ&&(r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var n=r.pop(),i=0;i<t.length;i++)this.addToDrawing_(t[i]);this.addToDrawing_(n)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new vQ(mQ,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(Qu),bQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wQ="extentchanged",xQ=function(t){function e(e){var r=t.call(this,wQ)||this;return r.extent=e,r}return bQ(e,t),e}(Ii);function MQ(){var t=x_();return function(e,r){return t[dr.POINT]}}function SQ(t){return function(e){return jr([t,e])}}function EQ(t,e){return t[0]==e[0]?function(r){return jr([t,[r[0],e[1]]])}:t[1]==e[1]?function(r){return jr([t,[e[0],r[1]]])}:null}var OQ=function(t){function e(e){var r,n=this,i=e||{};return(n=t.call(this,i)||this).extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new Ob({source:new Db({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(r=x_(),function(t,e){return r[dr.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new Ob({source:new Db({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:MQ(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return bQ(e,t),e.prototype.snapToVertex_=function(t,e){var r=e.getCoordinateFromPixelInternal(t),n=this.getExtentInternal();if(n){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);i.sort((function(t,e){return ga(r,t)-ga(r,e)}));var o=i[0],a=la(r,o),s=e.getPixelFromCoordinateInternal(a);if(ya(t,s)<=this.pixelTolerance_){var u=e.getPixelFromCoordinateInternal(o[0]),l=e.getPixelFromCoordinateInternal(o[1]),c=ma(s,u),h=ma(s,l),f=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(a=c>h?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,r=t.map,n=this.snapToVertex_(e,r);n||(n=r.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Ls(t)):e.setGeometry(void 0):(e=new lp(t?Ls(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new lp(new ds(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=_o.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,r=t.map,n=this.getExtentInternal(),i=this.snapToVertex_(e,r),o=function(t){var e=null,r=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?r=n[3]:t[1]==n[3]&&(r=n[1]),null!==e&&null!==r?[e,r]:null};if(i&&n){var a=i[0]==n[0]||i[0]==n[2]?i[0]:null,s=i[1]==n[1]||i[1]==n[3]?i[1]:null;null!==a&&null!==s?this.pointerHandler_=SQ(o(i)):null!==a?this.pointerHandler_=EQ(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=EQ(o([n[0],s]),o([n[2],s])))}else i=r.getCoordinateFromPixelInternal(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=SQ(i);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtentInternal();return e&&0!==rn(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return si(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new xQ(this.extent_))},e}(Qu),TQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),PQ=[0,0,0,0],IQ=[],kQ="modifystart",RQ="modifyend",LQ=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.features=r,i.mapBrowserEvent=n,i}return TQ(e,t),e}(Ii);function CQ(t,e){return t.index-e.index}function AQ(t,e,r){var n=e.geometry;if(n.getType()===dr.CIRCLE){var i=n;if(1===e.index){var o=ii();o&&(i=i.clone().transform(o,r));var a=ma(i.getCenter(),ai(t,r)),s=Math.sqrt(a)-i.getRadius();return s*s}}var u=ai(t,r);return IQ[0]=ai(e.segment[0],r),IQ[1]=ai(e.segment[1],r),ga(u,IQ)}function NQ(t,e,r){var n=e.geometry;if(n.getType()===dr.CIRCLE&&1===e.index){var i=n,o=ii();return o&&(i=i.clone().transform(o,r)),oi(i.getClosestPoint(ai(t,r)),r)}var a=ai(t,r);return IQ[0]=ai(e.segment[0],r),IQ[1]=ai(e.segment[1],r),oi(la(a,IQ),r)}var jQ=function(t){function e(e){var r,n,i=t.call(this,e)||this;if(i.boundHandleFeatureChange_=i.handleFeatureChange_.bind(i),i.condition_=e.condition?e.condition:Ku,i.defaultDeleteCondition_=function(t){return Bu(t)&&Wu(t)},i.deleteCondition_=e.deleteCondition?e.deleteCondition:i.defaultDeleteCondition_,i.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:qu,i.vertexFeature_=null,i.vertexSegments_=null,i.lastPixel_=[0,0],i.ignoreNextSingleClick_=!1,i.modified_=!1,i.rBush_=new Nb,i.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.snappedToVertex_=!1,i.changingFeature_=!1,i.dragSegments_=[],i.overlay_=new Ob({source:new Db({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(r=x_(),function(t,e){return r[dr.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i)},i.source_=null,e.source?(i.source_=e.source,n=new oo(i.source_.getFeatures()),i.source_.addEventListener(Rb,i.handleSourceAdd_.bind(i)),i.source_.addEventListener(Ab,i.handleSourceRemove_.bind(i))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return i.features_=n,i.features_.forEach(i.addFeature_.bind(i)),i.features_.addEventListener(ci,i.handleFeatureAdd_.bind(i)),i.features_.addEventListener(hi,i.handleFeatureRemove_.bind(i)),i.lastPointerEvent_=null,i}return TQ(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var r=this.SEGMENT_WRITERS_[e.getType()];r&&r(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(Li,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new LQ(kQ,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Li,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,r=[];e.forEach((function(e){t===e.feature&&r.push(e)}));for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(jr(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert(jr(u),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert(jr(u),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,geometry:e,depth:[a,n],index:l,segment:h};this.rBush_.insert(jr(h),f)}},e.prototype.writeCircleGeometry_=function(t,e){var r=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[r,r]},i={feature:t,geometry:e,index:1,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert(Zr(r),n);var a=e,s=ii();if(s&&this.getMap()){var u=this.getMap().getView().getProjection();a=Cs(a=a.clone().transform(s,u)).transform(u,s)}this.rBush_.insert(a.getExtent(),i)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(t,i)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new lp(new ds(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=_o.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(r=!(e.type!=_o.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==_o.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!r);var r},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){for(var i=this.dragSegments_[r],o=i[0],a=o.depth,s=o.geometry,u=void 0,l=o.segment,c=i[1];e.length<s.getStride();)e.push(l[c][e.length]);switch(s.getType()){case dr.POINT:u=e,l[0]=e,l[1]=e;break;case dr.MULTI_POINT:(u=s.getCoordinates())[o.index]=e,l[0]=e,l[1]=e;break;case dr.LINE_STRING:(u=s.getCoordinates())[o.index+c]=e,l[c]=e;break;case dr.MULTI_LINE_STRING:case dr.POLYGON:(u=s.getCoordinates())[a[0]][o.index+c]=e,l[c]=e;break;case dr.MULTI_POLYGON:(u=s.getCoordinates())[a[1]][a[0]][o.index+c]=e,l[c]=e;break;case dr.CIRCLE:if(l[0]=e,l[1]=e,0===o.index)this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var h=t.map.getView().getProjection(),f=ya(ai(s.getCenter(),h),ai(e,h)),p=ii();if(p){var d=s.clone().transform(p,h);d.setRadius(f),f=d.transform(h,p).getRadius()}s.setRadius(f),this.changingFeature_=!1}}u&&this.setGeometryCoordinates_(s,u)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var n=t.map.getView().getProjection(),i=[],o=r.getGeometry().getCoordinates(),a=jr([o]),s=this.rBush_.getInExtent(a),u={};s.sort(CQ);for(var l=0,c=s.length;l<c;++l){var h=s[l],f=h.segment,p=wr(h.feature),d=h.depth;if(d&&(p+="-"+d.join("-")),u[p]||(u[p]=new Array(2)),h.geometry.getType()!==dr.CIRCLE||1!==h.index)if(!fa(f[0],o)||u[p][0])if(!fa(f[1],o)||u[p][1])wr(f)in this.vertexSegments_&&!u[p][0]&&!u[p][1]&&this.insertVertexCondition_(t)&&i.push([h,o]);else{if((h.geometry.getType()===dr.LINE_STRING||h.geometry.getType()===dr.MULTI_LINE_STRING)&&u[p][0]&&0===u[p][0].index)continue;this.dragSegments_.push([h,1]),u[p][1]=h}else this.dragSegments_.push([h,0]),u[p][0]=h;else fa(NQ(e,h,n),o)&&!u[p][0]&&(this.dragSegments_.push([h,0]),u[p][0]=h)}i.length&&this.willModifyFeatures_(t);for(var m=i.length-1;m>=0;--m)this.insertVertex_.apply(this,i[m])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var r=this.dragSegments_[e][0],n=r.geometry;if(n.getType()===dr.CIRCLE){var i=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update(Zr(i),o);var s=n,u=ii();if(u){var l=t.map.getView().getProjection();s=Cs(s=s.clone().transform(u,l)).transform(l,u)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(jr(r.segment),r)}return this.modified_&&(this.dispatchEvent(new LQ(RQ,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,r){var n=r||e.getCoordinateFromPixel(t),i=e.getView().getProjection(),o=si(Fr(ui(Zr(n,PQ),i),e.getView().getResolution()*this.pixelTolerance_,PQ),i),a=this.rBush_.getInExtent(o);if(a.length>0){a.sort((function(t,e){return AQ(n,t,i)-AQ(n,e,i)}));var s=a[0],u=s.segment,l=NQ(n,s,i),c=e.getPixelFromCoordinate(l),h=ya(t,c);if(h<=this.pixelTolerance_){var f={};if(s.geometry.getType()===dr.CIRCLE&&1===s.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{var p=e.getPixelFromCoordinate(u[0]),d=e.getPixelFromCoordinate(u[1]),m=ma(c,p),y=ma(c,d);h=Math.sqrt(Math.min(m,y)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(l=m>y?u[1]:u[0]),this.createOrUpdateVertexFeature_(l);for(var g=1,v=a.length;g<v;++g){var _=a[g].segment;if(!(fa(u[0],_[0])&&fa(u[1],_[1])||fa(u[0],_[1])&&fa(u[1],_[0])))break;f[wr(_)]=!0}}return f[wr(u)]=!0,void(this.vertexSegments_=f)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var r,n=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case dr.MULTI_LINE_STRING:case dr.POLYGON:(r=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case dr.MULTI_POLYGON:(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case dr.LINE_STRING:(r=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,s,a,1);var l={segment:[n[0],e],feature:i,geometry:o,depth:a,index:s};u.insert(jr(l.segment),l),this.dragSegments_.push([l,1]);var c={segment:[e,n[1]],feature:i,geometry:o,depth:a,index:s+1};u.insert(jr(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=_o.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new LQ(RQ,this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,r,n,i,o,a,s,u,l,c,h=this.dragSegments_,f={},p=!1;for(i=h.length-1;i>=0;--i)c=wr((l=(r=h[i])[0]).feature),l.depth&&(c+="-"+l.depth.join("-")),c in f||(f[c]={}),0===r[1]?(f[c].right=l,f[c].index=l.index):1==r[1]&&(f[c].left=l,f[c].index=l.index+1);for(c in f){switch(u=f[c].right,a=f[c].left,(s=(o=f[c].index)-1)<0&&(s=0),t=e=(n=(l=void 0!==a?a:u).geometry).getCoordinates(),p=!1,n.getType()){case dr.MULTI_LINE_STRING:e[l.depth[0]].length>2&&(e[l.depth[0]].splice(o,1),p=!0);break;case dr.LINE_STRING:e.length>2&&(e.splice(o,1),p=!0);break;case dr.MULTI_POLYGON:t=t[l.depth[1]];case dr.POLYGON:(t=t[l.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),s=t.length-1))}if(p){this.setGeometryCoordinates_(n,e);var d=[];if(void 0!==a&&(this.rBush_.remove(a),d.push(a.segment[0])),void 0!==u&&(this.rBush_.remove(u),d.push(u.segment[1])),void 0!==a&&void 0!==u){var m={depth:l.depth,feature:l.feature,geometry:l.geometry,index:s,segment:d};this.rBush_.insert(jr(m.segment),m)}this.updateSegmentIndices_(n,o,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return p},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,r,n){this.rBush_.forEachInExtent(t.getExtent(),(function(i){i.geometry===t&&(void 0===r||void 0===i.depth||Mi(i.depth,r))&&i.index>e&&(i.index+=n)}))},e}(Qu),FQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function DQ(t){return t.feature?t.feature:t.element?t.element:void 0}var BQ=[],zQ=function(t){function e(e){var r=this,n=e||{},i=n;return i.handleDownEvent||(i.handleDownEvent=Ei),i.stopDown||(i.stopDown=Oi),(r=t.call(this,i)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new Nb,r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r)},r}return FQ(e,t),e.prototype.addFeature=function(t,e){var r=void 0===e||e,n=wr(t),i=t.getGeometry();if(i){var o=this.SEGMENT_WRITERS_[i.getType()];o&&(this.indexedFeaturesExtents_[n]=i.getExtent([1/0,1/0,-1/0,-1/0]),o(t,i))}r&&(this.featureChangeListenerKeys_[n]=pi(t,Li,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var r=this.snapTo(e.pixel,e.coordinate,e.map);return r.snapped&&(e.coordinate=r.vertex.slice(0,2),e.pixel=r.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=DQ(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=DQ(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var r=wr(e);r in this.pendingFeatures_||(this.pendingFeatures_[r]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=An(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var r=void 0===e||e,n=wr(t),i=this.indexedFeaturesExtents_[n];if(i){var o=this.rBush_,a=[];o.forEachInExtent(i,(function(e){t===e.feature&&a.push(e)}));for(var s=a.length-1;s>=0;--s)o.remove(a[s])}r&&(mi(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var r=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();r&&(n.forEach(mi),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(pi(this.features_,ci,this.handleFeatureAdd_,this),pi(this.features_,hi,this.handleFeatureRemove_,this)):this.source_&&n.push(pi(this.source_,Rb,this.handleFeatureAdd_,this),pi(this.source_,Ab,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,r){var n=jr([r.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),i=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(i=i.filter((function(t){return t.feature.getGeometry().getType()!==dr.CIRCLE})));var o=!1,a=null,s=null;if(0===i.length)return{snapped:o,vertex:a,vertexPixel:s};for(var u,l=r.getView().getProjection(),c=ai(e,l),h=1/0,f=0;f<i.length;++f){var p=i[f];BQ[0]=ai(p.segment[0],l),BQ[1]=ai(p.segment[1],l);var d=ga(c,BQ);d<h&&(u=p,h=d)}var m=u.segment;if(this.vertex_&&!this.edge_){var y=r.getPixelFromCoordinate(m[0]),g=r.getPixelFromCoordinate(m[1]),v=ma(t,y),_=ma(t,g);Math.sqrt(Math.min(v,_))<=this.pixelTolerance_&&(o=!0,a=v>_?m[1]:m[0],s=r.getPixelFromCoordinate(a))}else if(this.edge_){var b=u.feature.getGeometry().getType()===dr.CIRCLE;if(b){var w=u.feature.getGeometry(),x=ii();x&&(w=w.clone().transform(x,l)),a=oi(function(t,e){var r=e.getRadius(),n=e.getCenter(),i=n[0],o=n[1],a=t[0]-i,s=t[1]-o;0===a&&0===s&&(a=1);var u=Math.sqrt(a*a+s*s);return[i+r*a/u,o+r*s/u]}(c,w),l)}else BQ[0]=ai(m[0],l),BQ[1]=ai(m[1],l),a=oi(la(c,BQ),l);if(ya(t,s=r.getPixelFromCoordinate(a))<=this.pixelTolerance_&&(o=!0,this.vertex_&&!b)){y=r.getPixelFromCoordinate(m[0]),g=r.getPixelFromCoordinate(m[1]),v=ma(s,y),_=ma(s,g);Math.sqrt(Math.min(v,_))<=this.pixelTolerance_&&(a=v>_?m[1]:m[0],s=r.getPixelFromCoordinate(a))}}return o&&(s=[Math.round(s[0]),Math.round(s[1])]),{snapped:o,vertex:a,vertexPixel:s}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var r=this.getMap().getView().getProjection(),n=e,i=ii();i&&(n=n.clone().transform(i,r));var o=Cs(n);i&&o.transform(r,i);for(var a=o.getCoordinates()[0],s=0,u=a.length-1;s<u;++s){var l=a.slice(s,s+2),c={feature:t,segment:l};this.rBush_.insert(jr(l),c)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i(t,r[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert(jr(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(jr(u),l)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,segment:h};this.rBush_.insert(jr(h),f)}},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(jr(u),l)}},e}(Qu),GQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qQ="translatestart",UQ="translating",VQ="translateend",WQ=function(t){function e(e,r,n,i,o){var a=t.call(this,e)||this;return a.features=r,a.coordinate=n,a.startCoordinate=i,a.mapBrowserEvent=o,a}return GQ(e,t),e}(Ii),YQ=function(t){function e(e){var r,n=this,i=e||{};if((n=t.call(this,i)||this).lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==i.features?i.features:null,i.layers)if("function"==typeof i.layers)r=i.layers;else{var o=i.layers;r=function(t){return vi(o,t)}}else r=Ei;return n.layerFilter_=r,n.filter_=i.filter?i.filter:Ei,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.lastFeature_=null,n.addEventListener(to(Lu),n.handleActiveChanged_),n}return GQ(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new oo([this.lastFeature_]);return this.dispatchEvent(new WQ(qQ,e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new oo([this.lastFeature_]);return this.dispatchEvent(new WQ(VQ,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],i=this.features_||new oo([this.lastFeature_]);i.forEach((function(t){var e=t.getGeometry();e.translate(r,n),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new WQ(UQ,i,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||vi(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(Qu);function ZQ(t,e,r){for(var n,i,o,a,s,u,l=[],c=t(0),h=t(1),f=e(c),p=e(h),d=[h,c],m=[p,f],y=[1,0],g={},v=1e5;--v>0&&y.length>0;)o=y.pop(),c=d.pop(),f=m.pop(),(u=o.toString())in g||(l.push(f[0],f[1]),g[u]=!0),a=y.pop(),h=d.pop(),p=m.pop(),ur((i=e(n=t(s=(o+a)/2)))[0],i[1],f[0],f[1],p[0],p[1])<r?(l.push(p[0],p[1]),g[u=a.toString()]=!0):(y.push(a,s,s,o),m.push(p,i,i,f),d.push(h,n,n,c));return l}var HQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),XQ=new g_({color:"rgba(0,0,0,0.2)"}),KQ=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],JQ=function(t){function e(e){var r=this,n=e||{},i=Ln({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete i.maxLines,delete i.strokeStyle,delete i.targetSize,delete i.showLabels,delete i.lonLabelFormatter,delete i.latLabelFormatter,delete i.lonLabelPosition,delete i.latLabelPosition,delete i.lonLabelStyle,delete i.latLabelStyle,delete i.intervals,(r=t.call(this,i)||this).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxX_=1/0,r.maxY_=1/0,r.minX_=-1/0,r.minY_=-1/0,r.targetSize_=void 0!==n.targetSize?n.targetSize:100,r.maxLines_=void 0!==n.maxLines?n.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:XQ,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.bottomLeft_=null,r.bottomRight_=null,r.topLeft_=null,r.topRight_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,n.showLabels&&(r.lonLabelFormatter_=null==n.lonLabelFormatter?ca.bind(r,"EW"):n.lonLabelFormatter,r.latLabelFormatter_=null==n.latLabelFormatter?ca.bind(r,"NS"):n.latLabelFormatter,r.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,r.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,r.lonLabelStyleBase_=new S_({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new Cw({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new y_({color:"rgba(0,0,0,1)"}),stroke:new g_({color:"rgba(255,255,255,1)",width:3})})}),r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(r),r.latLabelStyleBase_=new S_({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new Cw({font:"12px Calibri,sans-serif",textAlign:"right",fill:new y_({color:"rgba(0,0,0,1)"}),stroke:new g_({color:"rgba(255,255,255,1)",width:3})})}),r.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(r),r.meridiansLabels_=[],r.parallelsLabels_=[],r.addEventListener(jo,r.drawLabels_.bind(r))),r.intervals_=void 0!==n.intervals?n.intervals:KQ,r.setSource(new Db({loader:r.loaderFunction.bind(r),strategy:r.strategyFunction.bind(r),features:new oo,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),r.featurePool_=[],r.lineStyle_=new S_({stroke:r.strokeStyle_}),r.loadedExtent_=null,r.renderedExtent_=null,r.setRenderOrder(null),r}return HQ(e,t),e.prototype.strategyFunction=function(t,e){var r,n,i,o=t.slice();return this.projection_&&this.getSource().getWrapX()&&vn(o,this.projection_),this.loadedExtent_&&(r=this.loadedExtent_,n=o,i=e,Math.abs(r[0]-n[0])<i&&Math.abs(r[2]-n[2])<i&&Math.abs(r[1]-n[1])<i&&Math.abs(r[3]-n[3])<i?o=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[o]},e.prototype.loaderFunction=function(t,e,r){this.loadedExtent_=t;var n=this.getSource(),i=cn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.renderedExtent_&&Xr(this.renderedExtent_,i)||(this.renderedExtent_=i,mn(i)))){var o=an(i),a=e*e/4;(!this.projection_||!Xn(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(i,o,e,a);var s,u=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);u>this.featurePool_.length;)s=new lp,this.featurePool_.push(s);var l=n.getFeaturesCollection();l.clear();var c,h,f=0;for(c=0,h=this.meridians_.length;c<h;++c)(s=this.featurePool_[f++]).setGeometry(this.meridians_[c]),s.setStyle(this.lineStyle_),l.push(s);for(c=0,h=this.parallels_.length;c<h;++c)(s=this.featurePool_[f++]).setGeometry(this.parallels_[c]),s.setStyle(this.lineStyle_),l.push(s)}},e.prototype.addMeridian_=function(t,e,r,n,i,o){var a=this.getMeridian_(t,e,r,n,o);if(dn(a.getExtent(),i)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=s:this.meridiansLabels_[o]={geom:new ds([]),text:s}}this.meridians_[o++]=a}return o},e.prototype.addParallel_=function(t,e,r,n,i,o){var a=this.getParallel_(t,e,r,n,o);if(dn(a.getExtent(),i)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=s:this.parallelsLabels_[o]={geom:new ds([]),text:s}}this.parallels_[o++]=a}return o},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,r=t.frameState.extent,n=an(r),i=r;if(e){var o=pn(r),a=ln(r),s=Math.abs(Math.cos(e)),u=Math.abs(Math.sin(e)),l=(u*a-s*o)/(u*u-s*s),c=(u*o-s*a)/(u*u-s*s);i=[n[0]-l/2,n[1]-c/2,n[0]+l/2,n[1]+c/2]}var h=0,f=0,p=this.latLabelPosition_<.5,d=this.projection_.getExtent(),m=pn(d);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Gr(d,r)&&(h=Math.floor((r[0]-d[0])/m),f=Math.ceil((r[2]-d[2])/m),p=p!==Math.abs(e)>Math.PI/2);for(var y=Nc(t),g=h;g<=f;++g){var v=this.meridians_.length+this.parallels_.length,_=void 0,b=void 0,w=void 0,x=void 0;if(this.meridiansLabels_)for(b=0,w=this.meridiansLabels_.length;b<w;++b){var M=this.meridians_[b];if(e||0!==g)(S=M.clone()).translate(g*m,0),S.rotate(-e,n),(x=this.getMeridianPoint_(S,i,b)).rotate(e,n);else x=this.getMeridianPoint_(M,r,b);(_=this.featurePool_[v++]).setGeometry(x),_.set("graticule_label",this.meridiansLabels_[b].text),y.drawFeature(_,this.lonLabelStyle_(_))}if(this.parallelsLabels_&&(g===h&&p||g===f&&!p))for(b=0,w=this.parallels_.length;b<w;++b){var S;M=this.parallels_[b];if(e||0!==g)(S=M.clone()).translate(g*m,0),S.rotate(-e,n),(x=this.getParallelPoint_(S,i,b)).rotate(e,n);else x=this.getParallelPoint_(M,r,b);(_=this.featurePool_[v++]).setGeometry(x),_.set("graticule_label",this.parallelsLabels_[b].text),y.drawFeature(_,this.latLabelStyle_(_))}}},e.prototype.createGraticule_=function(t,e,r,n){var i=this.getInterval_(r);if(-1==i)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o=!1,a=this.projection_.getExtent(),s=pn(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Gr(a,t)&&(pn(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var u=[ar(e[0],this.minX_,this.maxX_),ar(e[1],this.minY_,this.maxY_)],l=this.toLonLatTransform_(u);isNaN(l[1])&&(l[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var c,h,f,p,d=ar(l[0],this.minLon_,this.maxLon_),m=ar(l[1],this.minLat_,this.maxLat_),y=this.maxLines_,g=t;o||(g=[ar(t[0],this.minX_,this.maxX_),ar(t[1],this.minY_,this.maxY_),ar(t[2],this.minX_,this.maxX_),ar(t[3],this.minY_,this.maxY_)]);var v=gn(g,this.toLonLatTransform_,void 0,8),_=v[3],b=v[2],w=v[1],x=v[0];if(o||(zr(g,this.bottomLeft_)&&(x=this.minLon_,w=this.minLat_),zr(g,this.bottomRight_)&&(b=this.maxLon_,w=this.minLat_),zr(g,this.topLeft_)&&(x=this.minLon_,_=this.maxLat_),zr(g,this.topRight_)&&(b=this.maxLon_,_=this.maxLat_),_=ar(_,m,this.maxLat_),b=ar(b,d,this.maxLon_),w=ar(w,this.minLat_,m),x=ar(x,this.minLon_,d)),p=ar(d=Math.floor(d/i)*i,this.minLon_,this.maxLon_),h=this.addMeridian_(p,w,_,n,t,0),c=0,o)for(;(p-=i)>=x&&c++<y;)h=this.addMeridian_(p,w,_,n,t,h);else for(;p!=this.minLon_&&c++<y;)p=Math.max(p-i,this.minLon_),h=this.addMeridian_(p,w,_,n,t,h);if(p=ar(d,this.minLon_,this.maxLon_),c=0,o)for(;(p+=i)<=b&&c++<y;)h=this.addMeridian_(p,w,_,n,t,h);else for(;p!=this.maxLon_&&c++<y;)p=Math.min(p+i,this.maxLon_),h=this.addMeridian_(p,w,_,n,t,h);for(this.meridians_.length=h,this.meridiansLabels_&&(this.meridiansLabels_.length=h),f=ar(m=Math.floor(m/i)*i,this.minLat_,this.maxLat_),h=this.addParallel_(f,x,b,n,t,0),c=0;f!=this.minLat_&&c++<y;)f=Math.max(f-i,this.minLat_),h=this.addParallel_(f,x,b,n,t,h);for(f=ar(m,this.minLat_,this.maxLat_),c=0;f!=this.maxLat_&&c++<y;)f=Math.min(f+i,this.maxLat_),h=this.addParallel_(f,x,b,n,t,h);this.parallels_.length=h,this.parallelsLabels_&&(this.parallelsLabels_.length=h)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],n=-1,i=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,u=this.intervals_.length;s<u;++s){var l=ar(this.intervals_[s]/2,0,90),c=ar(r,-90+l,90-l);if(o[0]=e-l,o[1]=c-l,a[0]=e+l,a[1]=c+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;n=this.intervals_[s]}return n},e.prototype.getMeridian_=function(t,e,r,n,i){var o=function(t,e,r,n,i){return ZQ((function(n){return[t,e+(r-e)*n]}),Jn(Un("EPSG:4326"),n),i)}(t,e,r,this.projection_,n),a=this.meridians_[i];return a?(a.setFlatCoordinates(Ea,o),a.changed()):(a=new vp(o,Ea),this.meridians_[i]=a),a},e.prototype.getMeridianPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=1,o=n.length-1;n[i]>n[o]&&(i=o,o=1);var a=Math.max(e[1],n[i]),s=Math.min(e[3],n[o]),u=ar(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,s),l=[n[i-1]+(n[o-1]-n[i-1])*(u-n[i])/(n[o]-n[i]),u],c=this.meridiansLabels_[r].geom;return c.setCoordinates(l),c},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,r,n,i){var o=function(t,e,r,n,i){return ZQ((function(n){return[e+(r-e)*n,t]}),Jn(Un("EPSG:4326"),n),i)}(t,e,r,this.projection_,n),a=this.parallels_[i];return a?(a.setFlatCoordinates(Ea,o),a.changed()):a=new vp(o,Ea),a},e.prototype.getParallelPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=0,o=n.length-2;n[i]>n[o]&&(i=o,o=0);var a=Math.max(e[0],n[i]),s=Math.min(e[2],n[o]),u=ar(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,s),l=[u,n[i+1]+(n[o+1]-n[i+1])*(u-n[i])/(n[o]-n[i])],c=this.parallelsLabels_[r].geom;return c.setCoordinates(l),c},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=Un("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];var n=Jn(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var i=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,r){for(var o=r||2,a=n(t,e,o),s=0,u=a.length;s<u;s+=o)a[s]<i&&(a[s]+=360);return a}}this.fromLonLatTransform_=Jn(e,t);var o=gn([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(an(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(Ob),$Q=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QQ=function(t){function e(e,r,n,i,o){var a=this,s=void 0!==o?vc:bc;return(a=t.call(this,e,r,n,s)||this).loader_=void 0!==o?o:null,a.canvas_=i,a.error_=null,a}return $Q(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=wc):this.state=bc,this.changed()},e.prototype.load=function(){this.state==vc&&(this.state=_c,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(wm),t0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e0=function(t){function e(e){var r=t.call(this,e)||this;return r.vectorRenderer_=new Sb(e),r.layerImageRatio_=e.getImageRatio(),r.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],r.renderedPixelToCoordinateTransform_=null,r}return t0(e,t),e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(this.vectorRenderer_){var e=ja(this.coordinateToVectorPixelTransform_,ja(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}return new Promise((function(t,e){t([])}))},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,r=t.viewState,n=r.resolution,i=t.viewHints,o=this.vectorRenderer_,a=t.extent;1!==this.layerImageRatio_&&yn(a=a.slice(0),this.layerImageRatio_);var s=pn(a)/n,u=ln(a)/n;if(!i[ea]&&!i[ra]&&!mn(a)){o.useContainer(null,null,1);var l=o.context,c=Ln({},t,{declutterItems:[],extent:a,size:[s,u],viewState:Ln({},t.viewState,{rotation:0})}),h=new QQ(a,n,e,l.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.renderFrame(c,null),jc(c,null),t())}));h.addEventListener(Li,function(){h.getState()===bc&&(this.image_=h)}.bind(this)),h.load()}if(this.image_){var f=this.image_,p=f.getResolution()*e/f.getPixelRatio();this.renderedResolution=p,this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.coordinateToVectorPixelTransform_=Da(this.coordinateToVectorPixelTransform_,s/2,u/2,1/p,-1/p,0,-r.center[0],-r.center[1])}return!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,r,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,r,n,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,r,n,i,o)},e}($f),r0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n0=function(t){function e(e){var r=this,n=e||{},i=Ln({},n);return delete i.imageRatio,(r=t.call(this,i)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,r}return r0(e,t),e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new e0(this)},e}(T_);function i0(t,e,r,n){var i=document.createElement("script"),o="olc_"+wr(e);function a(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+o;var s=setTimeout((function(){a(),r&&r()}),1e4);window[o]=function(t){clearTimeout(s),a(),e(t)},document.getElementsByTagName("head")[0].appendChild(i)}var o0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var a0=function(t){function e(e){var r=this,n=void 0!==e.hidpi&&e.hidpi;return(r=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Un("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:nu,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this).hidpi_=n,r.culture_=void 0!==e.culture?e.culture:"en-us",r.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,r.apiKey_=e.key,r.imagerySet_=e.imagerySet,i0("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+r.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+r.apiKey_+"&c="+r.culture_,r.handleImageryMetadataResponse.bind(r),void 0,"jsonp"),r}return o0(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],r=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=Wm(this.getProjection()),i=this.hidpi_?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/i:[e.imageWidth/i,e.imageHeight/i],a=qm({extent:n,minZoom:e.zoomMin,maxZoom:r,tileSize:o});this.tileGrid=a;var s=this.culture_,u=this.hidpi_;if(this.tileUrlFunction=Nm(e.imageUrlSubdomains.map((function(t){var r=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,e,i){if(t){ep(t[0],t[1],t[2],r);var o=n;return u&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,r,n=t[0],i=new Array(n),o=1<<n-1;for(e=0;e<n;++e)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),i[e]=String.fromCharCode(r),o>>=1;return i.join("")}(r))}}}))),e.imageryProviders){var l=Kn(Un("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var r=[],n=t.viewState,i=this.getTileGrid(),o=i.getZForResolution(n.resolution,this.zDirection),a=i.getTileCoordForCoordAndZ(n.center,o)[0];return e.imageryProviders.map((function(e){for(var n=!1,i=e.coverageAreas,o=0,s=i.length;o<s;++o){var u=i[o];if(a>=u.zoomMin&&a<=u.zoomMax){var c=u.bbox;if(dn(gn([c[1],c[0],c[3],c[2]],l),t.extent)){n=!0;break}}}n&&r.push(e.attribution)})),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),r}.bind(this))}this.setState(iu)}else this.setState(ou)},e}(ny),s0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u0=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX})||this;return r.account_=e.account,r.mapId_=e.map||"",r.config_=e.config||{},r.templateCache_={},r.initializeMap_(),r}return s0(e,t),e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){Ln(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",e),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var r=e.target;if(!r.status||r.status>=200&&r.status<300){var n=void 0;try{n=JSON.parse(r.responseText)}catch(t){return void this.setState(ou)}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState(iu)}else this.setState(ou)},e.prototype.handleInitError_=function(t){this.setState(ou)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(Dk),l0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c0="default",h0="truncated",f0=function(t){function e(e,r,n,i,o,a,s){var u=t.call(this,r,n,i,o,a,s)||this;return u.zoomifyImage_=null,u.tileSize_=e,u}return l0(e,t),e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==qo){var r=this.tileSize_;if(e.width==r[0]&&e.height==r[1])return this.zoomifyImage_=e,e;var n=Bs(r[0],r[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e},e}(Om),p0=function(t){function e(e){var r=this,n=e,i=n.size,o=void 0!==n.tierSizeCalculation?n.tierSizeCalculation:c0,a=n.tilePixelRatio||1,s=i[0],u=i[1],l=[],c=n.tileSize||256,h=c*a;switch(o){case c0:for(;s>h||u>h;)l.push([Math.ceil(s/h),Math.ceil(u/h)]),h+=h;break;case h0:for(var f=s,p=u;f>h||p>h;)l.push([Math.ceil(f/h),Math.ceil(p/h)]),f>>=1,p>>=1;break;default:Er(!1,53)}l.push([1,1]),l.reverse();for(var d=[a],m=[0],y=1,g=l.length;y<g;y++)d.push(a<<y),m.push(l[y-1][0]*l[y-1][1]+m[y-1]);d.reverse();var v=new sp({tileSize:c,extent:n.extent||[0,-u,s,0],resolutions:d}),_=n.url;_&&-1==_.indexOf("{TileGroup}")&&-1==_.indexOf("{tileIndex}")&&(_+="{TileGroup}/{z}-{x}-{y}.jpg");var b=Fm(_),w=c*a;var x=Nm(b.map((function(t){return function(e,r,n){if(e){var i=e[0],o=e[1],a=e[2],s=o+a*l[i][0],u={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+m[i])/w|0)};return t.replace(/\{(\w+?)\}/g,(function(t,e){return u[e]}))}}}))),M=f0.bind(null,hu(c*a));(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,tilePixelRatio:a,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:M,tileGrid:v,tileUrlFunction:x,transition:n.transition})||this).zDirection=n.zDirection;var S=x(v.getTileCoordForCoordAndResolution(an(v.getExtent()),d[d.length-1]),1,null),E=new Image;return E.addEventListener("error",function(){w=c,this.changed()}.bind(r)),E.src=S,r}return l0(e,t),e}(ny),d0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function m0(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var y0=function(t){function e(e){var r=this,n=e||{},i=n.url||"";i+=i.lastIndexOf("/")===i.length-1||""===i?"":"/";var o=n.version||w$,a=n.sizes||[],s=n.size;Er(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,60);var u,l,c,h=s[0],f=s[1],p=n.tileSize,d=n.tilePixelRatio||1,m=n.format||"jpg",y=n.quality||(n.version==b$?"native":"default"),g=n.resolutions||[],v=n.supports||[],_=n.extent||[0,-f,h,0],b=null!=a&&Array.isArray(a)&&a.length>0,w=void 0!==p&&("number"==typeof p&&Number.isInteger(p)&&p>0||Array.isArray(p)&&p.length>0),x=null!=v&&Array.isArray(v)&&(v.includes("regionByPx")||v.includes("regionByPct"))&&(v.includes("sizeByWh")||v.includes("sizeByH")||v.includes("sizeByW")||v.includes("sizeByPct"));if(g.sort((function(t,e){return e-t})),w||x)if(null!=p&&("number"==typeof p&&Number.isInteger(p)&&p>0?(u=p,l=p):Array.isArray(p)&&p.length>0&&((1==p.length||null==p[1]&&Number.isInteger(p[0]))&&(u=p[0],l=p[0]),2==p.length&&(Number.isInteger(p[0])&&Number.isInteger(p[1])?(u=p[0],l=p[1]):null==p[0]&&Number.isInteger(p[1])&&(u=p[1],l=p[1])))),void 0!==u&&void 0!==l||(u=256,l=256),0==g.length)for(var M=c=Math.max(Math.ceil(Math.log(h/u)/Math.LN2),Math.ceil(Math.log(f/l)/Math.LN2));M>=0;M--)g.push(Math.pow(2,M));else{var S=Math.max.apply(Math,g);c=Math.round(Math.log(S)/Math.LN2)}else if(u=h,l=f,g=[],b){a.sort((function(t,e){return t[0]-e[0]})),c=-1;var E=[];for(M=0;M<a.length;M++){var O=h/a[M][0];g.length>0&&g[g.length-1]==O?E.push(M):(g.push(O),c++)}if(E.length>0)for(M=0;M<E.length;M++)a.splice(E[M]-M,1)}else g.push(1),a.push([h,f]),c=0;var T=new sp({tileSize:[u,l],extent:_,origin:hn(_),resolutions:g}),P=f0.bind(null,hu(p||256).map((function(t){return t*d})));return(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:P,tileGrid:T,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:function(t,e,r){var n,s,p=t[0];if(!(p>c)){var d=t[1],_=t[2],M=g[p];if(!(void 0===d||void 0===_||void 0===M||d<0||Math.ceil(h/M/u)<=d||_<0||Math.ceil(f/M/l)<=_)){if(x||w){var S=d*u*M,E=_*l*M,O=u*M,T=l*M,P=u,I=l;if(S+O>h&&(O=h-S),E+T>f&&(T=f-E),S+u*M>h&&(P=Math.floor((h-S+M-1)/M)),E+l*M>f&&(I=Math.floor((f-E+M-1)/M)),0==S&&O==h&&0==E&&T==f)n="full";else if(!x||v.includes("regionByPx"))n=S+","+E+","+O+","+T;else if(v.includes("regionByPct")){n="pct:"+m0(S/h*100)+","+m0(E/f*100)+","+m0(O/h*100)+","+m0(T/f*100)}o!=x$||x&&!v.includes("sizeByWh")?!x||v.includes("sizeByW")?s=P+",":v.includes("sizeByH")?s=","+I:v.includes("sizeByWh")?s=P+","+I:v.includes("sizeByPct")&&(s="pct:"+m0(100/M)):s=P+","+I}else if(n="full",b){var k=a[p][0],R=a[p][1];s=o==x$?k==h&&R==f?"max":k+","+R:k==h?"full":k+","}else s=o==x$?"max":"full";return i+n+"/"+s+"/0/"+y+"."+m}}},transition:n.transition})||this).zDirection=n.zDirection,r}return d0(e,t),e}(ny),g0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),v0=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.hidpi_=void 0===n.hidpi||n.hidpi,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Iy,r.params_=n.params||{},r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return g0(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Gr(i.getExtent(),t))return i;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Ln(o,this.params_);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.ratio_){var u=this.ratio_*pn(t)/2,l=this.ratio_*ln(t)/2;t[0]=a-u,t[1]=s-l,t[2]=a+u,t[3]=s+l}var c=e/r,h=Math.ceil(pn(t)/c),f=Math.ceil(ln(t)/c);t[0]=a-c*h/2,t[2]=a+c*h/2,t[1]=s-c*f/2,t[3]=s+c*f/2,this.imageSize_[0]=h,this.imageSize_[1]=f;var p=this.getRequestUrl_(t,this.imageSize_,r,n,o);return this.image_=new Sm(t,e,r,p,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Li,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){var o=n.getCode().split(":").pop();i.SIZE=e[0]+","+e[1],i.BBOX=t.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(90*r);var a=this.url_,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&Er(!1,50),uy(s,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Ln(this.params_,t),this.image_=null,this.changed()},e}(ky),_0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),b0=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,r.canvas_=null,r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return _0(e,t),e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Gr(i.getExtent(),t))return i;yn(t=t.slice(),this.ratio_);var o=[pn(t)/e*r,ln(t)/e*r],a=this.canvasFunction_.call(this,t,e,r,o,n);return a&&(i=new QQ(t,e,r,a)),this.canvas_=i,this.renderedRevision_=this.getRevision(),i},e}(ky),w0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var x0=function(t){function e(e){var r=t.call(this,{projection:e.projection,resolutions:e.resolutions})||this;return r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,r.params_=e.params||{},r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:Iy,r.hidpi_=void 0===e.hidpi||e.hidpi,r.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,r.ratio_=void 0!==e.ratio?e.ratio:1,r.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,r.image_=null,r.renderedRevision_=0,r}return w0(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Gr(i.getExtent(),t))return i;1!=this.ratio_&&yn(t=t.slice(),this.ratio_);var o=[pn(t)/e*r,ln(t)/e*r];if(void 0!==this.url_){var a=this.getUrl(this.url_,this.params_,t,o,n);(i=new Sm(t,e,r,a,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(Li,this.handleImageChange.bind(this))}else i=null;return this.image_=i,this.renderedRevision_=this.getRevision(),i},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){Ln(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,r,n,i){var o=function(t,e,r,n){var i=pn(t),o=ln(t),a=e[0],s=e[1],u=.0254/n;return s*i>a*o?i*r/(a*u):o*r/(s*u)}(r,n,this.metersPerUnit_,this.displayDpi_),a=an(r),s={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return Ln(s,e),uy(t,s)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(ky),M0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),S0=function(t){function e(e){var r=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,i=void 0!==e.imageLoadFunction?e.imageLoadFunction:Iy;return(r=t.call(this,{attributions:e.attributions,projection:Un(e.projection)})||this).url_=e.url,r.imageExtent_=e.imageExtent,r.image_=new Sm(r.imageExtent_,void 0,1,r.url_,n,i),r.imageSize_=e.imageSize?e.imageSize:null,r.image_.addEventListener(Li,r.handleImageChange.bind(r)),r}return M0(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,r,n){return dn(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==bc){var r=this.image_.getExtent(),n=this.image_.getImage(),i=void 0,o=void 0;this.imageSize_?(i=this.imageSize_[0],o=this.imageSize_[1]):(i=n.width,o=n.height);var a=ln(r)/o,s=Math.ceil(pn(r)/a);if(s!=i){var u=Bs(s,o),l=u.canvas;u.drawImage(n,0,0,i,o,0,0,l.width,l.height),this.image_.setImage(l)}}t.prototype.handleImageChange.call(this,e)},e}(ky),E0=r(219),O0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T0="beforeoperations",P0="afteroperations",I0="pixel",k0="image",R0=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=n,i}return O0(e,t),e}(Ii),L0=function(t){function e(e){var r=t.call(this,{projection:null})||this;r.worker_=null,r.operationType_=void 0!==e.operationType?e.operationType:I0,r.threads_=void 0!==e.threads?e.threads:1,r.layers_=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=N0(t[n]);return r}(e.sources);for(var n,i=r.changed.bind(r),o=0,a=r.layers_.length;o<a;++o)r.layers_[o].addEventListener(Li,i);return r.tileQueue_=new Zo((function(){return 1}),r.changed.bind(r)),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,index:0,layerIndex:0,layerStatesArray:(n=r.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},r.setAttributions((function(t){for(var r=[],n=0,i=e.sources.length;n<i;++n){var o=e.sources[n],a=(o instanceof zm?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);r.push.apply(r,s)}}return 0!==r.length?r:null})),void 0!==e.operation&&r.setOperation(e.operation,e.lib),r}return O0(e,t),e.prototype.setOperation=function(t,e){this.worker_=new E0.Processor({operation:t,imageOps:this.operationType_===k0,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,r){var n=Ln({},this.frameState_);n.viewState=Ln({},n.viewState);var i=an(t);n.extent=t.slice(),n.size[0]=Math.round(pn(t)/e),n.size[1]=Math.round(ln(t)/e),n.time=1/0;var o=n.viewState;return o.center=i,o.projection=r,o.resolution=e,n},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,r=this.layers_.length;e<r;++e)if(this.layers_[e].getSource().getState()!==iu){t=!1;break}return t},e.prototype.getImage=function(t,e,r,n){if(!this.allSourcesReady_())return null;var i=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&Xr(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e),n=0;n<e;++n){t.layerIndex=n;var i=A0(this.layers_[n],t);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new R0(T0,t,o)),this.worker_.process(r,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,r,n){if(!e&&r){var i=t.extent,o=t.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&Xr(i,this.requestedFrameState_.extent)){var a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else a=Bs(Math.round(pn(i)/o),Math.round(ln(i)/o)),this.renderedImageCanvas_=new QQ(i,o,1,a.canvas);a.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new R0(P0,t,n))}}},e.prototype.getImageInternal=function(){return null},e}(ky),C0=null;function A0(t,e){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;var n,i=e.size[0],o=e.size[1],a=r.renderFrame(e,null);if(a&&(n=a.firstElementChild),!(n instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+n);if(n.width===i&&n.height===o)return n.getContext("2d").getImageData(0,0,i,o);if(C0){var s=C0.canvas;s.width!==i||s.height!==o?C0=Bs(i,o):C0.clearRect(0,0,i,o)}else C0=Bs(i,o);return C0.drawImage(n,0,0,i,o),C0.getImageData(0,0,i,o)}function N0(t){var e;return t instanceof zm?t instanceof Xm?e=new Hf({source:t}):t instanceof ky&&(e=new tp({source:t})):e=t,e}var j0=L0,F0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),D0=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',EB],B0={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},z0={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},G0=function(t){function e(e){var r=e.layer.indexOf("-"),n=-1==r?e.layer:e.layer.slice(0,r),i=z0[n],o=B0[e.layer],a=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;return t.call(this,{attributions:D0,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:i.maxZoom,minZoom:null!=e.minZoom?e.minZoom:i.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:a,wrapX:e.wrapX})||this}return F0(e,t),e}(Dk),q0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function U0(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var i=n.getTileCoordExtent(t,this.tmpExtent_),o=hu(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=cu(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Ln(a,this.params_),this.getRequestUrl_(t,o,i,e,r,a)}}var V0=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:U0,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).params_=n.params||{},r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.setKey(r.getKeyForParams_()),r}return q0(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){var s,u=i.getCode().split(":").pop();if(o.SIZE=e[0]+","+e[1],o.BBOX=r.join(","),o.BBOXSR=u,o.IMAGESR=u,o.DPI=Math.round(o.DPI?o.DPI*n:90*n),1==a.length)s=a[0];else s=a[fr(op(t),a.length)];return uy(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){Ln(this.params_,t),this.setKey(this.getKeyForParams_())},e}(ny),W0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y0=function(t){function e(e,r,n){var i=t.call(this,e,qo)||this;return i.tileSize_=r,i.text_=n,i.canvas_=null,i}return W0(e,t),e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Bs(t[0],t[1]);return e.strokeStyle="grey",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="grey",e.strokeStyle="white",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.lineWidth=4,e.strokeText(this.text_,t[0]/2,t[1]/2,t[0]),e.fillText(this.text_,t[0]/2,t[1]/2,t[0]),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(_m),Z0=function(t){function e(e){var r=e||{};return t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection})||this}return W0(e,t),e.prototype.getTile=function(t,e,r){var n=rp(t,e,r);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var i=hu(this.tileGrid.getTileSize(t)),o=[t,e,r],a=this.getTileCoordForTileUrlFunction(o),s=void 0;s=a?"z:"+a[0]+" x:"+a[1]+" y:"+a[2]:"none";var u=new Y0(o,i,s);return this.tileCache.set(n,u),u},e}(Dk),H0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X0=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:Un("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:nu,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;if(r.tileJSON_=null,r.tileSize_=e.tileSize,e.url)if(e.jsonp)i0(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):Er(!1,51);return r}return H0(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,r=Un("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=Kn(r,n);e=gn(t.bounds,i)}var o=t.minzoom||0,a=t.maxzoom||22,s=qm({extent:Wm(n),maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=Am(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var u=void 0!==e?e:r.getExtent();this.setAttributions((function(e){return dn(u,e.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState(iu)},e.prototype.handleTileJSONError=function(){this.setState(ou)},e}(ny),K0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),J0=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r)||this;return s.src_=n,s.extent_=i,s.preemptive_=o,s.grid_=null,s.keys_=null,s.data_=null,s.jsonp_=a,s}return K0(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof n)return null;var i=n.charCodeAt(Math.floor(e*n.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.keys_){var a=this.keys_[i];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,r){this.state==Vo&&!0===r?(this.state=zo,di(this,Li,(function(r){e(this.getData(t))}),this),this.loadInternal_()):!0===r?setTimeout(function(){e(this.getData(t))}.bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=Uo,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=qo,this.changed()},e.prototype.loadInternal_=function(){if(this.state==zo)if(this.state=Go,this.jsonp_)i0(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(Vo)},e}(_m),$0=function(t){function e(e){var r=t.call(this,{projection:Un("EPSG:3857"),state:nu})||this;if(r.preemptive_=void 0===e.preemptive||e.preemptive,r.tileUrlFunction_=jm,r.template_=void 0,r.jsonp_=e.jsonp||!1,e.url)if(r.jsonp_)i0(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):Er(!1,51);return r}return K0(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,r,n){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,n)}else!0===n?setTimeout((function(){r(null)}),0):r(null)},e.prototype.handleTileJSONError=function(){this.setState(ou)},e.prototype.handleTileJSONResponse=function(t){var e,r=Un("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=Kn(r,n);e=gn(t.bounds,i)}var o=t.minzoom||0,a=t.maxzoom||22,s=qm({extent:Wm(n),maxZoom:a,minZoom:o});this.tileGrid=s,this.template_=t.template;var u=t.grids;if(u){if(this.tileUrlFunction_=Am(u,s),void 0!==t.attribution){var l=void 0!==e?e:r.getExtent();this.setAttributions((function(e){return dn(l,e.extent)?[t.attribution]:null}))}this.setState(iu)}else this.setState(ou)},e.prototype.getTile=function(t,e,r,n,i){var o=rp(t,e,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=this.tileUrlFunction_(s,n,i),l=new J0(a,void 0!==u?zo:Vo,void 0!==u?u:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,l),l},e.prototype.useTile=function(t,e,r){var n=rp(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Xm),Q0=window.M={},t1=window.ol={};Q0.ClusteredFeature=MG,Q0.Control=Ch,Q0.Feature=yG,Q0.Filter=ew,Q0.Label=Jv,Q0.Layer=Lf,Q0.Map=tz,Q0.Object=Kc,Q0.Parameters=e_,Q0.Plugin=RG,Q0.Popup=Bv,Q0.RenderFeature=eE,Q0.Style=c_,Q0.config=function t(e,r){t[e]=r},Q0.control={},Q0.control.BackgroundLayers=yR,Q0.control.GetFeatureInfo=fT,Q0.control.Location=YT,Q0.control.Panzoom=kI,Q0.control.Panzoombar=Xh,Q0.control.Rotate=CP,Q0.control.Scale=pP,Q0.control.ScaleLine=fI,Q0.dialog={},Q0.dialog.error=$b,Q0.dialog.info=Jb,Q0.dialog.show=Kb,Q0.dialog.success=Qb,Q0.evt={},Q0.evt.ACTIVATED="activated",Q0.evt.ADDED_KML="added:kml",Q0.evt.ADDED_LAYER="added:layer",Q0.evt.ADDED_MBTILES="added:mbtiles",Q0.evt.ADDED_MBTILES_VECTOR="added:mbtilesvector",Q0.evt.ADDED_TMS="added:tms",Q0.evt.ADDED_TO_MAP="added:map",Q0.evt.ADDED_TO_PANEL="added:panel",Q0.evt.ADDED_VECTOR_TILE="added:vectortile",Q0.evt.ADDED_WFS="added:wfs",Q0.evt.ADDED_WMC="added:wmc",Q0.evt.ADDED_WMS="added:wms",Q0.evt.ADDED_WMTS="added:wmts",Q0.evt.ADDED_XYZ="added:xyz",Q0.evt.CHANGE="change",Q0.evt.CHANGE_PROJ="change:proj",Q0.evt.CHANGE_ROTATION="change:rotation",Q0.evt.CHANGE_STYLE="change:style",Q0.evt.CHANGE_WMC="change:wmc",Q0.evt.CHANGE_ZOOM="change:zoom",Q0.evt.CLICK="click",Q0.evt.COMPLETED="completed",Q0.evt.DEACTIVATED="deactivated",Q0.evt.DESTROY="destroy",Q0.evt.DOUBLE_CLICK="doubleclick",Q0.evt.EventsManager=Hc,Q0.evt.HIDE="hide",Q0.evt.HOVER_FEATURES="hover:features",Q0.evt.LEAVE_FEATURES="leave:features",Q0.evt.LOAD=bh,Q0.evt.Listener=Yc,Q0.evt.MOVE="move",Q0.evt.REMOVED_FROM_MAP="removed:map",Q0.evt.REMOVED_LAYER="removed:layer",Q0.evt.SELECT_FEATURES="select:features",Q0.evt.SHOW="show",Q0.evt.UNSELECT_FEATURES="unselect:features",Q0.exception=hh,Q0.facade={},Q0.facade.Base=_h,Q0.filter=YG,Q0.filter.AND=function(t){var e="",r=t.length;return t.forEach((function(t,n){e+="(".concat(t.toCQL(),")"),n<r-1&&(e+=" AND ")})),new BG((function(e){return t.every((function(t){return t.getFunctionFilter()(e)}))}),{cqlFilter:e})},Q0.filter.EQUAL=function(t,e){return new BG((function(r){return Object.is(r.getAttribute(t),e)}),{cqlFilter:"".concat(t,"='").concat(e,"'")})},Q0.filter.Function=BG,Q0.filter.GT=function(t,e){return new BG((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)>e}),{cqlFilter:"".concat(t," > '").concat(e,"'")})},Q0.filter.GTE=function(t,e){return new BG((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)>=e}),{cqlFilter:"".concat(t," >= '").concat(e,"'")})},Q0.filter.LIKE=function(t,e){return new BG((function(r){return r.getAttribute(t).toString().match(new RegExp(e))}),{cqlFilter:"".concat(t," LIKE '%").concat(e,"%'")})},Q0.filter.LT=function(t,e){return new BG((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)<e}),{cqlFilter:"".concat(t," < '").concat(e,"'")})},Q0.filter.LTE=hY,Q0.filter.NOT=function(t){return new BG((function(e){return!t.getFunctionFilter()(e)}),{cqlFilter:"NOT ".concat(t.toCQL())})},Q0.filter.OR=function(t){var e=t.length,r="";return t.forEach((function(t,n){r+="(".concat(t.toCQL(),")"),n<e-1&&(r+=" OR ")})),new BG((function(e){return t.some((function(t){return t.getFunctionFilter()(e)}))}),{cqlFilter:r})},Q0.filter.spatial={},Q0.filter.spatial.CONTAIN=function(t){var e=QK(t);return new YG((function(t,r){var n=new oX,i=n.read(t);return e.some((function(t){var e=n.read(t);return KK.contains(e,i)}))}),{cqlFilter:tJ("CONTAINS",e)})},Q0.filter.spatial.DISJOINT=function(t){var e=QK(t);return new YG((function(t,r){var n=new oX,i=n.read(t);return e.some((function(t){var e=n.read(t);return!KK.intersects(i,e)}))}),{cqlFilter:tJ("DISJOINT",e)})},Q0.filter.spatial.INTERSECT=function(t){var e=QK(t);return new YG((function(t,r){var n=new oX,i=n.read(t);return e.some((function(t){var e=n.read(t);return KK.intersects(i,e)}))}),{cqlFilter:tJ("INTERSECTS",e)})},Q0.filter.spatial.WITHIN=function(t){var e=QK(t);return new YG((function(t,r){var n=new oX,i=n.read(t);return e.some((function(t){var e=n.read(t);return KK.contains(e,i)}))}),{cqlFilter:tJ("WITHIN",e)})},Q0.filter.spatial.parseParamToGeometries=QK,Q0.format={},Q0.format.GeoJSON=bA,Q0.format.WKT=Aq,Q0.geom={},Q0.geom.geojson={},Q0.geom.geojson.type={},Q0.geom.geojson.type.GEOMETRY_COLLECTION="GeometryCollection",Q0.geom.geojson.type.LINE_STRING="LineString",Q0.geom.geojson.type.MULTI_LINE_STRING="MultiLineString",Q0.geom.geojson.type.MULTI_POINT="MultiPoint",Q0.geom.geojson.type.MULTI_POLYGON="MultiPolygon",Q0.geom.geojson.type.POINT="Point",Q0.geom.geojson.type.POLYGON="Polygon",Q0.geom.parse=dN,Q0.geom.parseWFS=function(t){var e;return t===uN?e="Point":t===lN?e="LineString":t===cN?e="Polygon":t===hN?e="MultiPoint":t===fN?e="MultiLineString":t===pN&&(e="MultiPolygon"),e},Q0.geom.wfs={},Q0.geom.wfs.type={},Q0.geom.wfs.type.LINE=lN,Q0.geom.wfs.type.MLINE=fN,Q0.geom.wfs.type.MPOINT=hN,Q0.geom.wfs.type.MPOLYGON=pN,Q0.geom.wfs.type.POINT=uN,Q0.geom.wfs.type.POLYGON=cN,Q0.geom.wkt={},Q0.geom.wkt.type={},Q0.geom.wkt.type.CIRCLE="Circle",Q0.geom.wkt.type.GEOMETRY="Geometry",Q0.geom.wkt.type.GEOMETRY_COLLECTION="GeometryCollection",Q0.geom.wkt.type.LINEAR_RING="LinearRing",Q0.geom.wkt.type.LINE_STRING="LineString",Q0.geom.wkt.type.MULTI_LINE_STRING="MultiLineString",Q0.geom.wkt.type.MULTI_POINT="MultiPoint",Q0.geom.wkt.type.MULTI_POLYGON="MultiPolygon",Q0.geom.wkt.type.POINT="Point",Q0.geom.wkt.type.POLYGON="Polygon",Q0.handler={},Q0.handler.Feature=gE,Q0.impl={},Q0.impl.Control=ZO,Q0.impl.Feature=lG,Q0.impl.GetCapabilities=Hp,Q0.impl.Label=Uv,Q0.impl.Layer=Yp,Q0.impl.Map=$g,Q0.impl.Popup=Ov,Q0.impl.RenderFeature=nE,Q0.impl.Style=fw,Q0.impl.View=zg,Q0.impl.control={},Q0.impl.control.GetFeatureInfo=nT,Q0.impl.control.Location=NT,Q0.impl.control.Panzoom=wI,Q0.impl.control.Panzoombar=ch,Q0.impl.control.Rotate=MP,Q0.impl.control.Scale=iP,Q0.impl.control.ScaleLine=eI,Q0.impl.format={},Q0.impl.format.DescribeFeatureType=LA,Q0.impl.format.DescribeFeatureTypeXML=kA,Q0.impl.format.GML=VA,Q0.impl.format.GeoJSON=fA,Q0.impl.format.KML=AC,Q0.impl.format.WKT=Oq,Q0.impl.format.WMSCapabilities=dm,Q0.impl.format.WMTSCapabilities=Fq,Q0.impl.format.XML=MA,Q0.impl.handler={},Q0.impl.handler.Feature=sE,Q0.impl.interaction={},Q0.impl.interaction.SelectCluster=lS,Q0.impl.layer={},Q0.impl.layer.AnimatedCluster=HM,Q0.impl.layer.Draw=Wq,Q0.impl.layer.GeoJSON=Qj,Q0.impl.layer.Heatmap=NU,Q0.impl.layer.KML=GC,Q0.impl.layer.MBTiles=QF,Q0.impl.layer.MBTilesVector=JD,Q0.impl.layer.MVT=uj,Q0.impl.layer.OSM=AB,Q0.impl.layer.TMS=tR,Q0.impl.layer.Vector=Zb,Q0.impl.layer.WFS=sN,Q0.impl.layer.WMS=$y,Q0.impl.layer.WMTS=Ek,Q0.impl.layer.XYZ=Yk,Q0.impl.loader={},Q0.impl.loader.JSONP=Vj,Q0.impl.loader.KML=ER,Q0.impl.loader.WFS=JA,Q0.impl.service={},Q0.impl.service.WFS=AA,Q0.impl.source={},Q0.impl.source.ImageWMS=Uy,Q0.impl.source.TileWMS=wy,Q0.impl.style={},Q0.impl.style.Centroid=gS,Q0.impl.style.Chart=TV,Q0.impl.style.Cluster=PS,Q0.impl.style.FlowLine=_W,Q0.impl.style.Generic=Zx,Q0.impl.style.Heatmap=OW,Q0.impl.style.Icon=AW,Q0.impl.style.Line=DV,Q0.impl.style.Path=Gw,Q0.impl.style.Point=xF,Q0.impl.style.Polygon=qW,Q0.impl.style.Simple=bw,Q0.impl.util={},Q0.impl.util.wmtscapabilities=UW,Q0.impl.util.wmtscapabilities.getLayers=function(t,e,r){return function t(e,r,n,i){var o=[];if(bz(e.Layer))if(_z(e))e.forEach((function(e){o=o.concat(t(e,r,n,i))}));else{var a=e.TileMatrixSetLink,s=n;"EPSG:3857"===n&&(a.includes("EPSG:3857")||(s="GoogleMapsCompatible")),o.push(new jk({url:r,name:e.Identifier,matrixSet:s,legend:bz(e.Title)?"":e.Title},{},{capabilitiesMetadata:{abstract:bz(e.Abstract)?"":e.Abstract,attribution:bz(i.ServiceProvider)?"":i.ServiceProvider,style:bz(e.Style)?"":e.Style}}))}else o=t(e.Layer);return o}(t.Contents.Layer,e,r,t)},Q0.impl.utils=Dp,Q0.language={},Q0.language.addTranslation=function(t,e){Sh.translations[t]=e},Q0.language.getLang=function(){return Sh.lang},Q0.language.getTranslation=Eh,Q0.language.getValue=Oh,Q0.language.setLang=function(t){Object.keys(Sh.translations).includes(t)||hh(Oh("exception").unsupported_lang),Sh.lang=t},Q0.layer={},Q0.layer.GeoJSON=pF,Q0.layer.KML=XC,Q0.layer.MBTiles=dD,Q0.layer.MBTilesVector=mB,Q0.layer.MBTilesVector.mode={RENDER:"render",FEATURE:"feature"},Q0.layer.MVT=Mj,Q0.layer.MVT.mode=wj,Q0.layer.OSM=qB,Q0.layer.TMS=uR,Q0.layer.Vector=NM,Q0.layer.WFS=PN,Q0.layer.WMS=lg,Q0.layer.WMTS=jk,Q0.layer.XYZ=MB,Q0.layer.type={},Q0.layer.type.GeoJSON="GeoJSON",Q0.layer.type.KML="KML",Q0.layer.type.MVT="MVT",Q0.layer.type.OSM="OSM",Q0.layer.type.TMS="TMS",Q0.layer.type.Vector="Vector",Q0.layer.type.WFS="WFS",Q0.layer.type.WMC="WMC",Q0.layer.type.WMS="WMS",Q0.layer.type.WMTS="WMTS",Q0.layer.type.XYZ="XYZ",Q0.map=function(t,e){return bz($g)&&hh(Oh("exception").no_impl),new tz(t,e)},Q0.parameter={},Q0.parameter.center=of,Q0.parameter.geojson=df,Q0.parameter.kml=ff,Q0.parameter.layer=Sf,Q0.parameter.maxExtent=af,Q0.parameter.maxZoom=hf,Q0.parameter.mbtiles=nD,Q0.parameter.mbtilesvector=eB,Q0.parameter.minZoom=cf,Q0.parameter.mvt=mf,Q0.parameter.osm=rf,Q0.parameter.projection=sf,Q0.parameter.resolutions=uf,Q0.parameter.tms=ZW,Q0.parameter.tms=wf,Q0.parameter.wfs=pf,Q0.parameter.wmc=yf,Q0.parameter.wms=gf,Q0.parameter.wmts=xf,Q0.parameter.xyz=JW,Q0.parameter.xyz=bf,Q0.parameter.zoom=lf,Q0.proxy=function(t){"boolean"==typeof t&&(ez=t)},Q0.remote={},Q0.remote.Response=nz,Q0.remote.get=lz,Q0.remote.post=function(t,e,r){return uz(t,e,oz)},Q0.style={},Q0.style.Category=cZ,Q0.style.Chart=QU,Q0.style.Choropleth=TY,Q0.style.Cluster=HS,Q0.style.Composite=NS,Q0.style.Feature=tM,Q0.style.FlowLine=vZ,Q0.style.Generic=MM,Q0.style.Heatmap=RZ,Q0.style.Line=YV,Q0.style.Point=kF,Q0.style.Polygon=KY,Q0.style.Proportional=GY,Q0.style.Proportional.getMinMaxValues=FY,Q0.style.Simple=fM,Q0.style.align={},Q0.style.align.CENTER=Sw,Q0.style.align.JUSTIFY=Ow,Q0.style.align.LEFT=Mw,Q0.style.align.RIGHT=Ew,Q0.style.baseline={},Q0.style.baseline.ALPHABETIC=kw,Q0.style.baseline.BOTTOM=Iw,Q0.style.baseline.HANGING=Rw,Q0.style.baseline.IDEOGRAPHIC=Lw,Q0.style.baseline.MIDDLE=Pw,Q0.style.baseline.TOP=Tw,Q0.style.chart={},Q0.style.chart.Variable=DU,Q0.style.chart.schemes=zU,Q0.style.chart.types=BU,Q0.style.form={},Q0.style.form.BAN="BAN",Q0.style.form.BLAZON="BLAZON",Q0.style.form.BUBBLE="BUBBLE",Q0.style.form.CIRCLE="CIRCLE",Q0.style.form.LOZENGE="LOZENGE",Q0.style.form.MARKER="MARKER",Q0.style.form.NONE="none",Q0.style.form.SHIELD="SHIELD",Q0.style.form.SIGN="SIGN",Q0.style.form.SQUARE="SQUARE",Q0.style.form.TRIANGLE="TRIANGLE",Q0.style.pattern={},Q0.style.pattern.BRECCIA="BRECCIA",Q0.style.pattern.BRICK="BRICK",Q0.style.pattern.CAPS="CAPS",Q0.style.pattern.CEMETRY="CEMETRY",Q0.style.pattern.CHAOS="CHAOS",Q0.style.pattern.CHARACTER="CHARACTER",Q0.style.pattern.CIRCLE="CIRCLE",Q0.style.pattern.CLAY="CLAY",Q0.style.pattern.COAL="COAL",Q0.style.pattern.CONGLOMERATE="CONGLOMERATE",Q0.style.pattern.CROSS="CROSS",Q0.style.pattern.CROSSES="CROSSES",Q0.style.pattern.DOLOMITE="DOLOMITE",Q0.style.pattern.DOT="DOT",Q0.style.pattern.FLOODED="FLOODED",Q0.style.pattern.FOREST="FOREST",Q0.style.pattern.GRASS="GRASS",Q0.style.pattern.GRAVEL="GRAVEL",Q0.style.pattern.HATCH="HATCH",Q0.style.pattern.HEXAGON="HEXAGON",Q0.style.pattern.ICON="ICON",Q0.style.pattern.IMAGE="IMAGE",Q0.style.pattern.NYLON="NYLON",Q0.style.pattern.PINE="PINE",Q0.style.pattern.PINES="PINES",Q0.style.pattern.ROCK="ROCK",Q0.style.pattern.ROCKS="ROCKS",Q0.style.pattern.SAND="SAND",Q0.style.pattern.SCRUB="SCRUB",Q0.style.pattern.SQUARE="SQUARE",Q0.style.pattern.SWAMP="SWAMP",Q0.style.pattern.TILE="TILE",Q0.style.pattern.TREE="TREE",Q0.style.pattern.VINE="VINE",Q0.style.pattern.WAVE="WAVE",Q0.style.pattern.WOVEN="WOVEN",Q0.style.quantification={},Q0.style.quantification.ARITHMETIC_PROGRESSION=lY,Q0.style.quantification.EQUAL_INTERVAL=sY,Q0.style.quantification.GEOMETRIC_PROGRESSION=cY,Q0.style.quantification.JENKS=oY,Q0.style.quantification.MEDIA_SIGMA=uY,Q0.style.quantification.QUANTILE=aY,Q0.style.state={},Q0.style.state.DEFAULT="default",Q0.style.state.NEW="new",Q0.style.state.SELECTED="selected",Q0.style.textoverflow={},Q0.style.textoverflow.ELLIPSIS="ellipsis",Q0.style.textoverflow.HIDDEN="",Q0.style.textoverflow.VISIBLE="visible",Q0.template={},Q0.template.add=function(t,e){yz(Dh[t])&&(Dh[t]=e)},Q0.template.compile=function(t,e){var r,n,i={};return yz(e)||(i=Zz(i,e.vars),r=e.parseToHtml,n=e.scope),new Promise((function(o,a){zh(t,e).then((function(t){var e=t.call(null,i);!1!==r?o.call(n,Nz(e)):o.call(n,e)}))}))},Q0.template.compileSync=Bh,Q0.template.get=zh,Q0.ui={},Q0.ui.Panel=Fj,Q0.ui.position={},Q0.ui.position.BL=Pj,Q0.ui.position.BR=Ij,Q0.ui.position.TL=Oj,Q0.ui.position.TR=Tj,Q0.units={},Q0.units.DOTS_PER_INCH=72,Q0.units.INCHES_PER_UNIT=fz,Q0.utils={},Q0.utils.addParameters=Tz,Q0.utils.beautifyAttribute=jz,Q0.utils.beautifyAttributeName=function(t){var e=Ez(t);return e=(e=e.replace(/_(\w)/g,(function(t,e){return" ".concat(e.toUpperCase())}))).replace(/^\w/,(function(t){return t.toUpperCase()}))},Q0.utils.beautifyString=function(t){var e;return e=(e=(e=(e=(e=(e=(e=t.toLowerCase()).trim(e)).charAt(0).toUpperCase()+e.slice(1)).replace(/_/g," ")).replace(/\s+/," ")).replace(/(\s\w)+/g,(function(t){return t.toUpperCase()}))).replace(/\s+(de|del|las?|el|los?|un|unas?|unos?|y|a|al|en)\s+/gi,(function(t){return t.toLowerCase()}))},Q0.utils.concatUrlPaths=Fz,Q0.utils.decodeHtml=Vz,Q0.utils.defineFunctionFromString=$z,Q0.utils.drawDynamicStyle=eG,Q0.utils.enableTouchScroll=Gz,Q0.utils.escapeJSCode=zz,Q0.utils.escapeXSS=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},Q0.utils.extend=Bz,Q0.utils.extendsObj=Zz,Q0.utils.fillResolutions=Rz,Q0.utils.generateColorScale=aG,Q0.utils.generateIntervals=Hz,Q0.utils.generateRandom=Pz,Q0.utils.generateResolutionsFromExtent=Cz,Q0.utils.generateResolutionsFromScales=function(t,e,r,n){var i=Lz(t,n),o=Lz(e,n);return Rz(i,o,r)},Q0.utils.getEnvolvedExtent=rG,Q0.utils.getImageSize=Kz,Q0.utils.getOpacityFromRgba=function(t){var e,r=/^rgba\s*\((\s*\d+\s*,){3}\s*([\d.]+)\s*\)$/;if(r.test(t)){e=t.replace(r,"$2");try{e=parseFloat(e)}catch(t){throw t}}return e},Q0.utils.getParameterValue=Oz,Q0.utils.getResolutionFromScale=Lz,Q0.utils.getRgba=function(t,e){return xw()(t).alpha(e).css()},Q0.utils.getScaleFromResolution=Az,Q0.utils.getTextFromHtml=Wz,Q0.utils.getWMSGetCapabilitiesUrl=Iz,Q0.utils.getWMTSGetCapabilitiesUrl=kz,Q0.utils.htmlToString=function(t){var e;if(!bz(t)){var r=document.createElement("div");r.appendChild(t),e=r.innerHTML}return e},Q0.utils.includes=Dz,Q0.utils.inverseColor=Yz,Q0.utils.isArray=_z,Q0.utils.isBoolean=gz,Q0.utils.isDynamic=Qz,Q0.utils.isFunction=wz,Q0.utils.isGeometryType=Uz,Q0.utils.isNull=vz,Q0.utils.isNullOrEmpty=bz,Q0.utils.isObject=xz,Q0.utils.isString=Mz,Q0.utils.isUndefined=yz,Q0.utils.isUrl=Sz,Q0.utils.modifySVG=sG,Q0.utils.normalize=Ez,Q0.utils.rgbToHex=function(t){var e;try{e=xw()(t).hex()}catch(t){throw t}return e},Q0.utils.rgbaToHex=function(t){var e;try{e=xw()(t).hex()}catch(t){throw t}return e},Q0.utils.sameUrl=qz,Q0.utils.setDynamicLegend=function(t){tG=t},Q0.utils.stringToHtml=Nz,Q0.utils.stringifyFunctions=Jz,Q0.utils.styleComparator=Xz,Q0.window=vv,t1.AssertionError=Sr,t1.Collection=oo,t1.Feature=lp,t1.Geolocation=ET,t1.Kinetic=Ru,t1.Map=Uc,t1.MapBrowserEvent=lo,t1.Object=eo,t1.Observable=Xi,t1.Observable.unByKey=Hi,t1.Overlay=mv,t1.PluggableMap=pu,t1.View=Ds,t1.array={},t1.array.stableSort=function(t,e){var r,n=t.length,i=Array(t.length);for(r=0;r<n;r++)i[r]={index:r,value:t[r]};for(i.sort((function(t,r){return e(t.value,r.value)||t.index-r.index})),r=0;r<t.length;r++)t[r]=i[r].value},t1.color={},t1.color.asArray=Vl,t1.color.asString=Bl,t1.colorlike={},t1.colorlike.asColorLike=Kl,t1.control={},t1.control.Attribution=Su,t1.control.Control=mu,t1.control.FullScreen=uJ,t1.control.MousePosition=hJ,t1.control.OverviewMap=mJ,t1.control.Rotate=Tu,t1.control.ScaleLine=qP,t1.control.Zoom=Iu,t1.control.ZoomSlider=nh,t1.control.ZoomToExtent=gJ,t1.control.defaults=ku,t1.coordinate={},t1.coordinate.add=ua,t1.coordinate.createStringXY=function(t){return function(e){return va(e,t)}},t1.coordinate.format=ha,t1.coordinate.rotate=pa,t1.coordinate.toStringHDMS=function(t,e){return t?ca("NS",t[1],e)+" "+ca("EW",t[0],e):""},t1.coordinate.toStringXY=va,t1.easing={},t1.easing.easeIn=ba,t1.easing.easeOut=wa,t1.easing.inAndOut=xa,t1.easing.linear=Ma,t1.easing.upAndDown=Sa,t1.events={},t1.events.condition={},t1.events.condition.altKeyOnly=Bu,t1.events.condition.altShiftKeysOnly=zu,t1.events.condition.always=qu,t1.events.condition.click=function(t){return t.type==_o.CLICK},t1.events.condition.doubleClick=function(t){return t.type==_o.DBLCLICK},t1.events.condition.focus=Gu,t1.events.condition.mouseOnly=Xu,t1.events.condition.never=Vu,t1.events.condition.noModifierKeys=Yu,t1.events.condition.penOnly=function(t){var e=t.pointerEvent;return Er(void 0!==e,56),"pen"===e.pointerType},t1.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(po?e.metaKey:e.ctrlKey)&&!e.shiftKey},t1.events.condition.pointerMove=function(t){return"pointermove"==t.type},t1.events.condition.primaryAction=Ku,t1.events.condition.shiftKeyOnly=Zu,t1.events.condition.singleClick=Wu,t1.events.condition.targetNotEditable=Hu,t1.events.condition.touchOnly=function(t){var e=t.pointerEvent;return Er(void 0!==e,56),"touch"===e.pointerType},t1.extent={},t1.extent.applyTransform=gn,t1.extent.boundingExtent=jr,t1.extent.buffer=Fr,t1.extent.containsCoordinate=zr,t1.extent.containsExtent=Gr,t1.extent.containsXY=qr,t1.extent.createEmpty=Vr,t1.extent.equals=Xr,t1.extent.extend=Kr,t1.extent.getArea=rn,t1.extent.getBottomLeft=nn,t1.extent.getBottomRight=on,t1.extent.getCenter=an,t1.extent.getHeight=ln,t1.extent.getIntersection=cn,t1.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},t1.extent.getTopLeft=hn,t1.extent.getTopRight=fn,t1.extent.getWidth=pn,t1.extent.intersects=dn,t1.extent.isEmpty=mn,t1.featureloader={},t1.featureloader.setWithCredentials=function(t){Tb=t},t1.featureloader.xhr=Ib,t1.format={},t1.format.EsriJSON=EJ,t1.format.Feature=cg,t1.format.GML=jA,t1.format.GML2=wE,t1.format.GML3=Tg,t1.format.GML32=PJ,t1.format.GPX=c$,t1.format.GeoJSON=rA,t1.format.IGC=_$,t1.format.IIIFInfo=P$,t1.format.KML=EC,t1.format.MVT=ej,t1.format.OSMXML=j$,t1.format.Polyline=V$,t1.format.Polyline.decodeDeltas=z$,t1.format.Polyline.decodeFloats=q$,t1.format.Polyline.encodeDeltas=B$,t1.format.Polyline.encodeFloats=G$,t1.format.TopoJSON=Q$,t1.format.WFS=jO,t1.format.WFS.writeFilter=function(t){var e=Jp(bO,"Filter");return IO(e,t,[]),e},t1.format.WKT=dq,t1.format.WMSCapabilities=rm,t1.format.WMSGetFeatureInfo=eQ,t1.format.WMTSCapabilities=gk,t1.format.filter={},t1.format.filter.Bbox=PE,t1.format.filter.Contains=LE,t1.format.filter.During=jE,t1.format.filter.EqualTo=zE,t1.format.filter.GreaterThan=qE,t1.format.filter.GreaterThanOrEqualTo=VE,t1.format.filter.Intersects=YE,t1.format.filter.IsBetween=HE,t1.format.filter.IsLike=KE,t1.format.filter.IsNull=$E,t1.format.filter.LessThan=tO,t1.format.filter.LessThanOrEqualTo=rO,t1.format.filter.Not=iO,t1.format.filter.NotEqualTo=aO,t1.format.filter.Or=uO,t1.format.filter.Within=cO,t1.format.filter.and=hO,t1.format.filter.bbox=fO,t1.format.filter.between=function(t,e,r){return new HE(t,e,r)},t1.format.filter.contains=function(t,e,r){return new LE(t,e,r)},t1.format.filter.during=function(t,e,r){return new jE(t,e,r)},t1.format.filter.equalTo=function(t,e,r){return new zE(t,e,r)},t1.format.filter.greaterThan=function(t,e){return new qE(t,e)},t1.format.filter.greaterThanOrEqualTo=function(t,e){return new VE(t,e)},t1.format.filter.intersects=function(t,e,r){return new YE(t,e,r)},t1.format.filter.isNull=function(t){return new $E(t)},t1.format.filter.lessThan=function(t,e){return new tO(t,e)},t1.format.filter.lessThanOrEqualTo=function(t,e){return new rO(t,e)},t1.format.filter.like=function(t,e,r,n,i,o){return new KE(t,e,r,n,i,o)},t1.format.filter.not=function(t){return new iO(t)},t1.format.filter.notEqualTo=function(t,e,r){return new aO(t,e,r)},t1.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(uO,e))},t1.format.filter.within=function(t,e,r){return new cO(t,e,r)},t1.geom={},t1.geom.Circle=kp,t1.geom.Geometry=Ua,t1.geom.GeometryCollection=Tp,t1.geom.LineString=vp,t1.geom.LinearRing=fs,t1.geom.MultiLineString=xp,t1.geom.MultiPoint=bp,t1.geom.MultiPolygon=Sp,t1.geom.Point=ds,t1.geom.Polygon=ks,t1.geom.Polygon.circular=Rs,t1.geom.Polygon.fromCircle=Cs,t1.geom.Polygon.fromExtent=Ls,t1.geom.SimpleGeometry=Ya,t1.has={},t1.has.DEVICE_PIXEL_RATIO=mo,t1.interaction={},t1.interaction.DoubleClickZoom=Du,t1.interaction.DragAndDrop=sQ,t1.interaction.DragBox=fl,t1.interaction.DragPan=rl,t1.interaction.DragRotate=il,t1.interaction.DragRotateAndZoom=lQ,t1.interaction.DragZoom=ml,t1.interaction.Draw=_Q,t1.interaction.Draw.createBox=function(){return function(t,e,r){var n=jr(t.map((function(t){return ai(t,r)}))),i=[[nn(n),on(n),fn(n),hn(n),nn(n)]],o=e;o?o.setCoordinates(i):o=new ks(i);var a=ii();return a&&o.transform(r,a),o}},t1.interaction.Draw.createRegularPolygon=function(t,e){return function(r,n,i){var o=ai(r[0],i),a=ai(r[1],i),s=Math.sqrt(ma(o,a)),u=n||Cs(new kp(o),t),l=e;if(!e){var c=a[0]-o[0],h=a[1]-o[1];l=Math.atan(h/c)-(c<0?Math.PI:0)}As(u,o,s,l);var f=ii();return f&&u.transform(i,f),u}},t1.interaction.Extent=OQ,t1.interaction.Interaction=Nu,t1.interaction.KeyboardPan=xl,t1.interaction.KeyboardZoom=El,t1.interaction.Modify=jQ,t1.interaction.MouseWheelZoom=Il,t1.interaction.PinchRotate=Rl,t1.interaction.PinchZoom=Cl,t1.interaction.Pointer=Qu,t1.interaction.Select=tS,t1.interaction.Snap=zQ,t1.interaction.Translate=YQ,t1.interaction.defaults=Al,t1.layer={},t1.layer.Base=eu,t1.layer.BaseImage=Kf,t1.layer.BaseTile=jf,t1.layer.BaseVector=T_,t1.layer.Graticule=JQ,t1.layer.Group=uu,t1.layer.Heatmap=TU,t1.layer.Image=tp,t1.layer.Layer=wu,t1.layer.Tile=Hf,t1.layer.Vector=Ob,t1.layer.VectorImage=n0,t1.layer.VectorTile=WN,t1.loadingstrategy={},t1.loadingstrategy.all=kb,t1.loadingstrategy.bbox=function(t,e){return[t]},t1.loadingstrategy.tile=function(t){return function(e,r){var n=t.getZForResolution(r),i=t.getTileRangeForExtentAndZ(e,n),o=[],a=[n,0,0];for(a[1]=i.minX;a[1]<=i.maxX;++a[1])for(a[2]=i.minY;a[2]<=i.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}},t1.proj={},t1.proj.Projection=or,t1.proj.Units={},t1.proj.Units.METERS_PER_UNIT=nr,t1.proj.addCoordinateTransforms=Hn,t1.proj.addEquivalentProjections=Wn,t1.proj.addProjection=qn,t1.proj.equivalent=Xn,t1.proj.fromLonLat=function(t,e){return $n(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},t1.proj.get=Un,t1.proj.getPointResolution=Vn,t1.proj.getTransform=Jn,t1.proj.proj4={},t1.proj.proj4.register=li,t1.proj.toLonLat=function(t,e){var r=$n(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=fr(n+180,360)-180),r},t1.proj.transform=$n,t1.proj.transformExtent=Qn,t1.render={},t1.render.VectorContext=Jl,t1.render.canvas={},t1.render.canvas.labelCache=ec,t1.render.getRenderPixel=function(t,e){var r=e.slice(0);return ja(t.inversePixelTransform.slice(),r),r},t1.render.getVectorContext=Nc,t1.render.toContext=Ac,t1.renderer={},t1.renderer.Composite=Gc,t1.renderer.canvas={},t1.renderer.canvas.ImageLayer=$f,t1.renderer.canvas.TileLayer=Yf,t1.renderer.canvas.VectorImageLayer=e0,t1.renderer.canvas.VectorLayer=Sb,t1.renderer.canvas.VectorTileLayer=UN,t1.renderer.webgl={},t1.renderer.webgl.PointsLayer=wU,t1.size={},t1.size.toSize=hu,t1.source={},t1.source.BingMaps=a0,t1.source.CartoDB=u0,t1.source.Cluster=FM,t1.source.IIIF=y0,t1.source.Image=ky,t1.source.ImageArcGISRest=v0,t1.source.ImageCanvas=b0,t1.source.ImageMapGuide=x0,t1.source.ImageStatic=S0,t1.source.ImageWMS=Cy,t1.source.OSM=OB,t1.source.OSM.ATTRIBUTION=EB,t1.source.Raster=j0,t1.source.Source=zm,t1.source.Stamen=G0,t1.source.Tile=Xm,t1.source.TileArcGISRest=V0,t1.source.TileDebug=Z0,t1.source.TileImage=ny,t1.source.TileJSON=X0,t1.source.TileWMS=hy,t1.source.UTFGrid=$0,t1.source.Vector=Db,t1.source.VectorTile=NN,t1.source.WMSServerType={},t1.source.WMSServerType.CARMENTA_SERVER=void 0,t1.source.WMSServerType.GEOSERVER=void 0,t1.source.WMSServerType.MAPSERVER=void 0,t1.source.WMSServerType.QGIS=void 0,t1.source.WMTS=AI,t1.source.WMTS.optionsFromCapabilities=NI,t1.source.XYZ=Dk,t1.source.Zoomify=p0,t1.sphere={},t1.sphere.getArea=function t(e,r){var n=r||{},i=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==dr.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,u,l,c,h,f,p=0;switch(a){case dr.POINT:case dr.MULTI_POINT:case dr.LINE_STRING:case dr.MULTI_LINE_STRING:case dr.LINEAR_RING:break;case dr.POLYGON:for(s=e.getCoordinates(),p=Math.abs(gr(s[0],i)),l=1,c=s.length;l<c;++l)p-=Math.abs(gr(s[l],i));break;case dr.MULTI_POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)for(u=s[l],p+=Math.abs(gr(u[0],i)),h=1,f=u.length;h<f;++h)p-=Math.abs(gr(u[h],i));break;case dr.GEOMETRY_COLLECTION:var d=e.getGeometries();for(l=0,c=d.length;l<c;++l)p+=t(d[l],r);break;default:throw new Error("Unsupported geometry type: "+a)}return p},t1.sphere.getDistance=mr,t1.sphere.getLength=function t(e,r){var n=r||{},i=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==dr.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,u,l,c,h,f,p=0;switch(a){case dr.POINT:case dr.MULTI_POINT:break;case dr.LINE_STRING:case dr.LINEAR_RING:p=yr(s=e.getCoordinates(),i);break;case dr.MULTI_LINE_STRING:case dr.POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)p+=yr(s[l],i);break;case dr.MULTI_POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)for(h=0,f=(u=s[l]).length;h<f;++h)p+=yr(u[h],i);break;case dr.GEOMETRY_COLLECTION:var d=e.getGeometries();for(l=0,c=d.length;l<c;++l)p+=t(d[l],r);break;default:throw new Error("Unsupported geometry type: "+a)}return p},t1.style={},t1.style.Circle=m_,t1.style.Fill=y_,t1.style.Icon=bb,t1.style.IconAnchorUnits={},t1.style.IconAnchorUnits.FRACTION=void 0,t1.style.IconAnchorUnits.PIXELS=void 0,t1.style.IconImageCache={},t1.style.IconImageCache.shared=Xl,t1.style.IconOrigin={},t1.style.IconOrigin.BOTTOM_LEFT=void 0,t1.style.IconOrigin.BOTTOM_RIGHT=void 0,t1.style.IconOrigin.TOP_LEFT=void 0,t1.style.IconOrigin.TOP_RIGHT=void 0,t1.style.Image=h_,t1.style.RegularShape=p_,t1.style.Stroke=g_,t1.style.Style=S_,t1.style.Text=Cw,t1.tilegrid={},t1.tilegrid.TileGrid=sp,t1.tilegrid.WMTS=kg,t1.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Rg,t1.tilegrid.createXYZ=qm,t1.transform={},t1.transform.composeCssTransform=function(t,e,r,n,i,o,a){return za(Da([1,0,0,1,0,0],t,e,r,n,i,o,a))},t1.util={},t1.util.getUid=wr,t1.webgl={},t1.webgl.ARRAY_BUFFER=34962,t1.webgl.Buffer=Kq,t1.webgl.DYNAMIC_DRAW=35048,t1.webgl.ELEMENT_ARRAY_BUFFER=34963,t1.webgl.Helper=hU,t1.webgl.Helper.computeAttributesStride=lU,t1.webgl.PostProcessingPass=tU,t1.webgl.RenderTarget=_U,t1.webgl.STATIC_DRAW=35044,t1.webgl.STREAM_DRAW=35040,t1.xml={},t1.xml.getAllTextContent=$p,t1.xml.parse=td,t1.xml.registerDocument=function(t){gd=t},t1.xml.registerXMLSerializer=function(t){yd=t},window.Handlebars=r(31),Q0.plugin={}}]);
//# sourceMappingURL=apiign.ol.min.js.map