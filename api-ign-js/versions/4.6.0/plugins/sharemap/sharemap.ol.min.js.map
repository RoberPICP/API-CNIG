{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/sharemap.html","webpack:///./src/templates/modal.html","webpack:///./src/facade/js/sharemapcontrol.js","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/facade/js/sharemap.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","beginShade","element","classList","contains","remove","add","setTimeout","copyURL","input","inputVar","disabled","select","document","execCommand","getSelection","removeAllRanges","ShareMapControl","_M$Control","_inherits","M","Control","_super","_createSuper","options","_this","_classCallCheck","impl","baseUrl_","baseUrl","title_","title","text_","text","btn_","btn","copyBtn_","copyBtn","copyBtnHtml_","copyBtnHtml","primaryColor_","primaryColor","secondaryColor_","secondaryColor","styles_","id","styles","backgroundColor","concat","color","border","boxShadow","borderBottom","overwriteStyles_","overwriteStyles","minimize_","minimize","tooltip_","tooltip","urlAPI_","urlAPI","order","filterLayers","shareLayer","map","_this2","this","map_","Promise","success","fail","html","template","compileSync","button","querySelector","setAttribute","mButtonStyle","_slicedToArray","filter","_ref","style","accessibilityTab","addEvents","_this3","addEventListener","activateModal","dialog","modal","vars","forEach","querySelectorAll","elm","changeElementStyle","keys","message","mapeaContainer","parentElement","removeChild","click","focus","copyButton","copyButtonHtml","buildURL","then","appendChild","buildHtml","_this4","twitter","facebook","pinterest","getControls","controls","shareURL","_this4$map_$getCenter","getCenter","x","y","_this4$map_$getProjec","getProjection","code","units","getZoom","newControls","undefined","indexOf","join","endsWith","slice","getPlugins","getLayers","length","_this4$map_$getCenter2","urlBaseVisor","window","location","search","href","replace","layers","getLayersInLayerswitcher","getLayersInfilterLayers","utils","isNullOrEmpty","config","MAP_VIEWER_LAYERS","includes","encodeURI","remote","response","_this5","_this5$map_$getCenter","_this5$map_$getProjec","_this5$map_$getCenter2","embeddedHtml","_this6","url","match","control","resolve","allowedControls","JSON","parse","resolvedControls","showProj","find","getImpl","index","exactScale","backgroundlayersAPI","backgroundlayers","visible","activeLayer","push","_this7","layer","res","type","displayInLayerSwitcher","transparent","layerToParam","param","_this8","_this9","test","getWMS","getWMTS","getKML","getWFS","getGeoJSON","getVector","extract","label","isVisible","source","isUndefined","encodeURIComponent","serialize","getStyle","assign","toGeoJSON","crs","properties","btoa","unescape","stringify","normalizeString","legend","tiled","userMaxExtent","version","isQueryable","namespace","geometry","ids","cql","getLegend","err","matrixSet","format","plugin","newCurrent","isFunction","getAPIRest","newText","_this10","el","translations","en","es","getLang","language","getTranslation","lang","sharemap","getValue","keyPath","arguments","translation","console","warn","split","reduce","prev","current","ShareMap","_M$Plugin","Plugin","_ref$filterLayers","_objectWithoutProperties","_excluded","controls_","isString","Error","position_","position","panel_","ui","Panel","collapsible","className","addControls","addPanels","removeControls","_ref2","encodeBase64","M$plugin$ShareMap","M$control$ShareMapControl"],"mappings":"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","file":"sharemap.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-control m-container m-sharemap-container\\\">\\n    <button id=\\\"m-sharemap-geturl\\\">\\n        <i class=\\\"icon-share-2\\\"></i>\\n    </button>\\n</div>\";","module.exports = \"<div id=\\\"m-plugin-sharemap-dialog\\\" class=\\\"m-plugin-sharemap-dialog\\\">\\n    <div aria-modal=\\\"true\\\" id=\\\"m-plugin-sharemap-modal\\\" class=\\\"m-plugin-sharemap-modal\\\">\\n        <div id=\\\"m-plugin-sharemap-content\\\" class=\\\"m-plugin-sharemap-content\\\">\\n            <div id=\\\"m-plugin-sharemap-title\\\" role=\\\"heading\\\" class=\\\"m-plugin-sharemap-title\\\" aria-label=\\\"Modal Plugin Sharemap\\\">\\n                <span role=\\\"text\\\" tabindex=\\\"0\\\">{{{title}}}</span>\\n                <div id=\\\"m-plugin-sharemap-tooltip\\\" class=\\\"m-plugin-sharemap-tooltip\\\">\\n                    <span class=\\\"m-plugin-sharemap-tooltiptext\\\">\\n                        {{tooltip}}\\n                    </span>\\n                </div>\\n            </div>\\n            <div role=\\\"menu\\\" tabindex=\\\"0\\\" aria-label=\\\"Menu {{{title}}}\\\" id=\\\"m-plugin-sharemap-message\\\" class=\\\"m-plugin-sharemap-message\\\">\\n                <input tabindex=\\\"0\\\" aria-label=\\\"{{title}}\\\" type=\\\"text\\\" />\\n                <button tabindex=\\\"0\\\" type=\\\"button\\\" aria-label=\\\"{{copyBtn}} {{title}}\\\" id=\\\"m-plugin-sharemap-copybutton\\\">{{copyBtn}}</button>\\n            </div>\\n            <div id=\\\"m-plugin-sharemap-social\\\" class=\\\"m-plugin-sharemap-social\\\">\\n                <a role=\\\"link\\\" aria-label=\\\"link facebook\\\" tabindex=\\\"0\\\" id=\\\"facebook\\\" target=\\\"_blank\\\">\\n                    <svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" data-prefix=\\\"fab\\\" data-icon=\\\"facebook-square\\\" class=\\\"svg-inline--fa fa-facebook-square fa-w-14\\\" role=\\\"img\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 448 512\\\"><path fill=\\\"currentColor\\\" d=\\\"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z\\\"></path></svg>\\n                </a>\\n                <a role=\\\"link\\\" aria-label=\\\"link twitter\\\" tabindex=\\\"0\\\" id=\\\"twitter\\\" target=\\\"_blank\\\">\\n                    <svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" data-prefix=\\\"fab\\\" data-icon=\\\"twitter-square\\\" class=\\\"svg-inline--fa fa-twitter-square fa-w-14\\\" role=\\\"img\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 448 512\\\"><path fill=\\\"currentColor\\\" d=\\\"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z\\\"></path></svg>\\n                </a>\\n                <a role=\\\"link\\\" aria-label=\\\"link pinterest\\\" tabindex=\\\"0\\\" id=\\\"pinterest\\\" target=\\\"_blank\\\">\\n                    <svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" data-prefix=\\\"fab\\\" data-icon=\\\"pinterest-square\\\" class=\\\"svg-inline--fa fa-pinterest-square fa-w-14\\\" role=\\\"img\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 448 512\\\"><path fill=\\\"currentColor\\\" d=\\\"M448 80v352c0 26.5-21.5 48-48 48H154.4c9.8-16.4 22.4-40 27.4-59.3 3-11.5 15.3-58.4 15.3-58.4 8 15.3 31.4 28.2 56.3 28.2 74.1 0 127.4-68.1 127.4-152.7 0-81.1-66.2-141.8-151.4-141.8-106 0-162.2 71.1-162.2 148.6 0 36 19.2 80.8 49.8 95.1 4.7 2.2 7.1 1.2 8.2-3.3.8-3.4 5-20.1 6.8-27.8.6-2.5.3-4.6-1.7-7-10.1-12.3-18.3-34.9-18.3-56 0-54.2 41-106.6 110.9-106.6 60.3 0 102.6 41.1 102.6 99.9 0 66.4-33.5 112.4-77.2 112.4-24.1 0-42.1-19.9-36.4-44.4 6.9-29.2 20.3-60.7 20.3-81.8 0-53-75.5-45.7-75.5 25 0 21.7 7.3 36.5 7.3 36.5-31.4 132.8-36.1 134.5-29.6 192.6l2.2.8H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48z\\\"></path></svg>\\n                </a>\\n            </div>\\n            <div role=\\\"heading\\\" id=\\\"m-plugin-sharemap-text\\\" class=\\\"m-plugin-sharemap-text\\\">\\n                <span role=\\\"text\\\" tabindex=\\\"0\\\">{{{text}}}</span>\\n            </div>\\n            <div role=\\\"menu\\\" tabindex=\\\"0\\\" aria-label=\\\"Menu {{{text}}}\\\" id=\\\"m-plugin-sharemap-html\\\" class=\\\"m-plugin-sharemap-html\\\">\\n                <input tabindex=\\\"0\\\" aria-label=\\\"{{{text}}}\\\" type=\\\"text\\\" />\\n                <button tabindex=\\\"0\\\" type=\\\"button\\\" aria-label=\\\"{{copyBtnHtml}} {{{text}}}\\\" id=\\\"m-plugin-sharemap-copybuttonhtml\\\">{{copyBtnHtml}}</button>\\n            </div>\\n            <div id=\\\"m-plugin-sharemap-button\\\" class=\\\"m-plugin-sharemap-button\\\">\\n                <button type=\\\"button\\\" tabindex=\\\"0\\\">{{btn}}</button>\\n            </div>\\n        </div>\\n\\n    </div>\\n</div>\\n</div>\";","/**\n * @module M/control/ShareMapControl\n */\nimport template from '../../templates/sharemap';\nimport modal from '../../templates/modal';\n/**\n * This function adds the animation shade class.\n *\n * @function\n * @private\n */\nconst beginShade = (element) => {\n  if (element.classList.contains('m-plugin-sharemap-shade')) {\n    element.classList.remove('m-plugin-sharemap-shade');\n  } else {\n    element.classList.add('m-plugin-sharemap-shade');\n    setTimeout(() => {\n      element.classList.remove('m-plugin-sharemap-shade');\n    }, 2000); // animationDuration 2s\n  }\n};\n\n/**\n * This function removes the html element from DOM.\n *\n * @function\n * @private\n */\nconst removeElement = (element) => {\n  const parent = element.parentElement;\n  parent.removeChild(element);\n};\n\n/**\n * This function copies the textr input in clipboard\n *\n * @function\n * @private\n */\nconst copyURL = (input) => {\n  const inputVar = input;\n  inputVar.disabled = false;\n  inputVar.select();\n  document.execCommand('copy');\n  inputVar.disabled = true;\n  document.getSelection().removeAllRanges();\n};\n\n/**\n * @classdesc\n * ShareMap mapea control.\n * This control allows current map state sharing via URL.\n */\nexport default class ShareMapControl extends M.Control {\n  /**\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(options) {\n    const impl = new M.impl.Control();\n    super(impl, 'sharemap');\n    /**\n     * Base url of the shared map\n     *\n     * @private\n     * @type {URLLike}\n     */\n    this.baseUrl_ = options.baseUrl;\n\n    /**\n     * Title of the modal\n     *\n     * @private\n     * @type {string}\n     */\n    this.title_ = options.title;\n\n    /**\n     * Text\n     *\n     * @private\n     * @type {string}\n     */\n    this.text_ = options.text;\n\n    /**\n     * Text of the button\n     *\n     * @private\n     * @type {string}\n     */\n    this.btn_ = options.btn;\n\n    /**\n     * Text of the copy button\n     *\n     * @private\n     * @type {string}\n     */\n    this.copyBtn_ = options.copyBtn;\n\n    /**\n     * Text of the copy html button\n     *\n     * @private\n     * @type {string}\n     */\n    this.copyBtnHtml_ = options.copyBtnHtml;\n\n    /**\n     * Primary color of the html view  (hexadecimal format).\n     *\n     * @private\n     * @type {string}\n     */\n    this.primaryColor_ = options.primaryColor || '#71a7d3';\n\n    /**\n     * Secondary color of the html view  (hexadecimal format).\n     *\n     * @private\n     * @type {string}\n     */\n    this.secondaryColor_ = options.secondaryColor || '#fff';\n\n    /**\n     * Classes jss\n     *\n     * @private\n     * @type {object}\n     */\n    this.styles_ = [\n      {\n        id: '.m-plugin-sharemap-content button',\n        styles: {\n          backgroundColor: `${this.primaryColor_} `,\n          color: `${this.secondaryColor_} `,\n        },\n      },\n      {\n        id: '#m-plugin-sharemap-content',\n        styles: {\n          backgroundColor: `${this.secondaryColor_} `,\n          border: `1px solid ${this.primaryColor_} `,\n          boxShadow: `0 2px 4px ${this.primaryColor_}, 0 -1px 0px ${this.primaryColor_} `,\n        },\n      },\n      {\n        id: '.m-plugin-sharemap-content span',\n        styles: {\n          color: `${this.primaryColor_} `,\n        },\n      },\n      {\n        id: '.m-plugin-sharemap-dialog div.m-plugin-sharemap-social',\n        styles: {\n          borderBottom: `${this.primaryColor_} 1px solid `,\n        },\n      },\n      {\n        id: '#m-plugin-sharemap-social a svg',\n        styles: {\n          color: `${this.primaryColor_} `,\n        },\n      },\n      {\n        id: 'm-sharemap-geturl',\n        styles: {\n          backgroundColor: this.primaryColor_,\n          color: this.secondaryColor_,\n        },\n      },\n    ];\n\n    /**\n     * Styles in js will be overwritten\n     *\n     * @private\n     * @type {bool}\n     */\n    this.overwriteStyles_ = options.overwriteStyles || false;\n\n    /**\n     * Generate minimized url\n     *\n     * @private\n     * @type {bool}\n     */\n    this.minimize_ = options.minimize || false;\n\n    /**\n     * Tooltip information for copy action\n     *\n     * @private\n     * @type {string}\n     */\n    this.tooltip_ = options.tooltip || '¡Copiado!';\n\n    /**\n     * URL API or URL Visor (false visor (default), true API)\n     *\n     * @private\n     * @type {bool}\n     */\n    this.urlAPI_ = options.urlAPI || false;\n\n    this.order = options.order;\n    /**\n     * Layers to show in popup\n     *\n     * @private\n     * @type {Array}\n     */\n    this.filterLayers = options.filterLayers;\n\n\n    /** Select all layers or not\n      * @private\n      * @type {Boolean}\n      */\n    this.shareLayer = options.shareLayer;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api\n   */\n  createView(map) {\n    this.map_ = map;\n    return new Promise((success, fail) => {\n      const html = M.template.compileSync(template);\n      const button = html.querySelector('button');\n      button.setAttribute('tabindex', this.order);\n      button.setAttribute('aria-label', 'Plugin Sharemap');\n\n      if (this.overwriteStyles_ === true) {\n        const [mButtonStyle] = this.styles_.filter(({ id }) => id === button.id);\n        button.style.backgroundColor = mButtonStyle.styles.backgroundColor;\n        button.style.color = mButtonStyle.styles.color;\n        button.style.border = mButtonStyle.styles.border;\n      }\n      this.accessibilityTab(html);\n      this.addEvents(html);\n      success(html);\n    });\n  }\n\n  /**\n   * This function adds the event to the view html\n   *\n   * @public\n   * @param html - HTML template of the view\n   * @api\n   */\n  addEvents(html) {\n    html.querySelector('#m-sharemap-geturl').addEventListener('click', () => {\n      if (!document.querySelector('#m-plugin-sharemap-title')) {\n        this.activateModal();\n      }\n    });\n  }\n\n  /**\n   * This function adds modal view to html\n   *\n   * @public\n   * @param html - HTML template of the view\n   * @api\n   */\n  activateModal() {\n    const dialog = M.template.compileSync(modal, {\n      vars: {\n        title: this.title_,\n        text: this.text_,\n        btn: this.btn_,\n        copyBtn: this.copyBtn_,\n        copyBtnHtml: this.copyBtnHtml_,\n        tooltip: this.tooltip_,\n      },\n    });\n\n    this.accessibilityTab(dialog);\n\n    if (this.overwriteStyles_ === true) {\n      this.styles_.forEach((style) => {\n        const element = dialog.querySelectorAll(style.id);\n        element.forEach((elm) => {\n          const changeElementStyle = elm;\n          Object.keys(style.styles).forEach((key) => {\n            changeElementStyle.style[key] = style.styles[key];\n          });\n        });\n      });\n    }\n\n    const message = dialog.querySelector('#m-plugin-sharemap-message input');\n    const html = dialog.querySelector('#m-plugin-sharemap-html input');\n\n    const mapeaContainer = document.querySelector('div.m-mapea-container');\n    const okButton = dialog.querySelector('#m-plugin-sharemap-button > button');\n    okButton.addEventListener('click', () => {\n      removeElement(dialog);\n      document.querySelector('.m-sharemap-container').click();\n      document.querySelector('#m-sharemap-geturl').focus();\n    });\n\n    const copyButton = dialog.querySelector('#m-plugin-sharemap-copybutton');\n    const copyButtonHtml = dialog.querySelector('#m-plugin-sharemap-copybuttonhtml');\n\n    const title = dialog.querySelector('#m-plugin-sharemap-title');\n    copyButton.addEventListener('click', () => {\n      copyURL(message);\n      beginShade(title.querySelector('#m-plugin-sharemap-tooltip'));\n    });\n\n    copyButtonHtml.addEventListener('click', () => {\n      copyURL(html);\n      beginShade(title.querySelector('#m-plugin-sharemap-tooltip'));\n    });\n\n    this.buildURL(dialog).then(() => mapeaContainer.appendChild(dialog));\n    this.buildHtml(dialog)\n      .then(() => mapeaContainer.appendChild(dialog))\n      .then(() => { title.focus(); title.click(); });\n  }\n\n  /**\n   * This method builds the url to sharing.\n   *\n   * @public\n   * @function\n   */\n  buildURL(html) {\n    const input = html.querySelector('input');\n    const twitter = html.querySelector('#twitter');\n    const facebook = html.querySelector('#facebook');\n    const pinterest = html.querySelector('#pinterest');\n    return this.getControls().then((controls) => {\n      let shareURL;\n      if (this.urlAPI_) {\n        const { x, y } = this.map_.getCenter();\n        const { code, units } = this.map_.getProjection();\n        shareURL = `${this.baseUrl_}?center=${x},${y}&zoom=${this.map_.getZoom()}`;\n        if (!this.minimize_) {\n          shareURL = shareURL.concat(`&controls=${controls}`).concat(`&${this.getPlugins()}`);\n        } else {\n          let newControls = controls.filter((c) => {\n            return c !== undefined && c.indexOf('backgroundlayers') === -1;\n          }).join(',');\n\n          if (newControls.endsWith(',')) {\n            newControls = newControls.slice(0, -1);\n          }\n\n          if (newControls.indexOf('scale') === -1 || (newControls.indexOf('scale') === newControls.indexOf('scaleline'))) {\n            newControls = newControls.concat(',scale*true');\n          }\n          shareURL = shareURL.concat(`&controls=${newControls}`).concat('&plugins=toc,zoompanel,measurebar,mousesrs');\n        }\n\n        shareURL = this.getLayers().length > 0 ? shareURL.concat(`&layers=${this.getLayers()}`) : shareURL.concat('');\n        shareURL = shareURL.concat(`&projection=${code}*${units}`);\n        input.value = shareURL;\n      } else {\n        const { x, y } = this.map_.getCenter();\n        const urlBaseVisor = (window.location.search) ? window.location.href.replace(window.location.search, '') : window.location.href;\n        shareURL = `${urlBaseVisor}?center=${x},${y}&zoom=${this.map_.getZoom()}&srs=${this.map_.getProjection().code}`;\n        let layers = [];\n\n        if (this.shareLayer === true) {\n          layers = this.getLayersInLayerswitcher();\n        } else if (this.shareLayer === false) {\n          layers = this.getLayersInfilterLayers();\n        }\n\n        shareURL = layers.length > 0 ? shareURL.concat(`&layers=${layers}`) : shareURL.concat('');\n        if (!M.utils.isNullOrEmpty(M.config.MAP_VIEWER_LAYERS)) {\n          if (layers.length > 0) {\n            let includes = '';\n            M.config.MAP_VIEWER_LAYERS.forEach((elm) => {\n              if (layers.indexOf(elm) === -1) {\n                includes = includes.concat(`,${elm}`);\n              }\n            });\n            if (M.utils.isNullOrEmpty(includes)) {\n              shareURL = `${shareURL},${M.config.MAP_VIEWER_LAYERS}`;\n            }\n          } else {\n            shareURL = `${shareURL}&layers=${M.config.MAP_VIEWER_LAYERS}`;\n          }\n        }\n        input.value = shareURL;\n      }\n      shareURL = encodeURI(shareURL);\n      M.remote.get(`http://tinyurl.com/api-create.php?url=${shareURL}`).then((response) => {\n        facebook.href = `http://www.facebook.com/sharer.php?u=${response.text}`;\n        twitter.href = `https://twitter.com/intent/tweet?url=${response.text}`;\n        pinterest.href = `https://www.pinterest.es/pin/create/button/?url=${response.text}`;\n      });\n    });\n  }\n\n  /**\n   * This method builds the html.\n   *\n   * @public\n   * @function\n   */\n  buildHtml(dialog) {\n    const html = dialog.querySelector('#m-plugin-sharemap-html');\n    const input = html.querySelector('input');\n    return this.getControls().then((controls) => {\n      let shareURL;\n      if (this.urlAPI_) {\n        const { x, y } = this.map_.getCenter();\n        const { code, units } = this.map_.getProjection();\n        shareURL = `${this.baseUrl_}?center=${x},${y}&zoom=${this.map_.getZoom()}`;\n        if (!this.minimize_) {\n          shareURL = shareURL.concat(`&controls=${controls}`).concat(`&${this.getPlugins()}`);\n        } else {\n          let newControls = controls.filter((c) => {\n            return c !== undefined && c.indexOf('backgroundlayers') === -1;\n          }).join(',');\n\n          if (newControls.endsWith(',')) {\n            newControls = newControls.slice(0, -1);\n          }\n\n          if (newControls.indexOf('scale') === -1 || (newControls.indexOf('scale') === newControls.indexOf('scaleline'))) {\n            newControls = newControls.concat(',scale*true');\n          }\n\n          shareURL = shareURL.concat(`&controls=${newControls}`).concat('&plugins=toc,zoompanel,measurebar,mousesrs');\n        }\n\n        shareURL = this.getLayers().length > 0 ? shareURL.concat(`&layers=${this.getLayers()}`) : shareURL.concat('');\n        shareURL = shareURL.concat(`&projection=${code}*${units}`);\n      } else {\n        const { x, y } = this.map_.getCenter();\n        const urlBaseVisor = (window.location.search) ? window.location.href.replace(window.location.search, '') : window.location.href;\n        shareURL = `${urlBaseVisor}?center=${x},${y}&zoom=${this.map_.getZoom()}`;\n        let layers = [];\n\n        if (this.shareLayer === true) {\n          layers = this.getLayersInLayerswitcher();\n        } else if (this.shareLayer === false) {\n          layers = this.getLayersInfilterLayers();\n        }\n\n        shareURL = layers.length > 0 ? shareURL.concat(`&layers=${layers}`) : shareURL.concat('');\n        if (!M.utils.isNullOrEmpty(M.config.MAP_VIEWER_LAYERS)) {\n          if (layers.length > 0) {\n            let includes = '';\n            M.config.MAP_VIEWER_LAYERS.forEach((elm) => {\n              if (layers.indexOf(elm) === -1) {\n                includes = includes.concat(`,${elm}`);\n              }\n            });\n            if (M.utils.isNullOrEmpty(includes)) {\n              shareURL = `${shareURL},${M.config.MAP_VIEWER_LAYERS}`;\n            }\n          } else {\n            shareURL = `${shareURL}&layers=${M.config.MAP_VIEWER_LAYERS}`;\n          }\n        }\n        input.value = shareURL;\n      }\n      const embeddedHtml = `<iframe width=\"800\" height=\"600\" frameborder=\"0\" style=\"border:0\" src=\"${shareURL}\"></iframe>`;\n      input.value = embeddedHtml;\n    });\n  }\n\n\n  /**\n   * This methods gets the controls url parameters\n   *\n   * @public\n   * @function\n   */\n  getControls() {\n    const url = this.baseUrl_.match(/(.*[A-Za-z-0-9])/)[0];\n    const controls = this.map_.getControls().map(control => control.name);\n    return new Promise((resolve) => {\n      M.remote.get(`${url}/api/actions/controls`).then((response) => {\n        const allowedControls = JSON.parse(response.text);\n        const resolvedControls = controls.filter(control => allowedControls.includes(control))\n          .filter(c => c !== 'backgroundlayers');\n        if (resolvedControls.includes('mouse')) {\n          const mouseControl = this.map_.getControls().find(c => c.name === 'mouse');\n          const { showProj } = mouseControl.getImpl();\n          const index = resolvedControls.indexOf('mouse');\n          resolvedControls[index] = showProj === true ? 'mouse*true' : 'mouse';\n        }\n        if (resolvedControls.includes('scale')) {\n          const scaleControl = this.map_.getControls().find(c => c.name === 'scale');\n          const { exactScale } = scaleControl.getImpl();\n          const index = resolvedControls.indexOf('scale');\n          resolvedControls[index] = exactScale === true ? 'scale*true' : 'scale';\n        }\n        const backgroundlayers = this.map_.getControls().filter(c => c.name === 'backgroundlayers')[0];\n        let backgroundlayersAPI;\n        if (!M.utils.isNullOrEmpty(backgroundlayers)) {\n          const { visible, activeLayer } = backgroundlayers;\n          if (typeof visible === 'boolean' && typeof activeLayer === 'number') {\n            backgroundlayersAPI = `backgroundlayers*${activeLayer}*${visible}`;\n          } else {\n            backgroundlayersAPI = 'backgroundlayers';\n          }\n        }\n        resolvedControls.push(backgroundlayersAPI);\n        resolve(resolvedControls);\n      });\n    });\n  }\n\n  /**\n   * This method gets the layers parameters\n   *\n   * @public\n   * @function\n   */\n  getLayers() {\n    const layers = this.map_.getLayers().filter((layer) => {\n      let res = layer.name !== '__draw__' && layer.name !== 'selectionLayer';\n      if (layer.name === 'attributions' && layer.type === 'KML') {\n        res = res && false;\n      }\n\n      if (layer.displayInLayerSwitcher === false && layer.transparent === true) {\n        res = res && false;\n      }\n\n      return res;\n    });\n\n    return layers.map(layer => this.layerToParam(layer)).filter(param => param != null);\n  }\n\n  /**\n   * This method gets the externs layers parameters\n   *\n   * @public\n   * @function\n   */\n  getLayersInLayerswitcher() {\n    const layers = this.map_.getLayers().filter((layer) => {\n      return layer.displayInLayerSwitcher === true && layer.transparent === true;\n    });\n\n    return layers.map(layer => this.layerToParam(layer)).filter(param => param != null);\n  }\n\n  /**\n   * @public\n   * @function\n   */\n  getLayersInfilterLayers() {\n    const layers = this.map_.getLayers().filter(layer => this.filterLayers.includes(layer.name));\n    return layers.map(layer => this.layerToParam(layer)).filter(param => param != null);\n  }\n\n  /**\n   * This function gets the url param from layer\n   *\n   * @public\n   * @function\n   */\n  layerToParam(layer) {\n    let param;\n    if (layer.name === 'osm') {\n      param = layer.name;\n    } else if (/mapbox/.test(layer.name)) {\n      param = `MAPBOX.${layer.name}`;\n    } else if (layer.type === 'WMS') {\n      param = this.getWMS(layer);\n    } else if (layer.type === 'WMTS') {\n      param = this.getWMTS(layer);\n    } else if (layer.type === 'KML') {\n      param = this.getKML(layer);\n    } else if (layer.type === 'WFS') {\n      param = this.getWFS(layer);\n    } else if (layer.type === 'GeoJSON') {\n      param = this.getGeoJSON(layer);\n    } else if (layer.type === 'Vector') {\n      param = this.getVector(layer);\n    }\n    return param;\n  }\n\n  /**\n   * This methods gets the kml url parameters\n   *\n   * @public\n   * @function\n   */\n  getKML(layer) {\n    return `KML*${layer.name}*${layer.url}*${layer.extract}*${layer.label}*${layer.isVisible()}`;\n  }\n\n  /**\n   * This method gets the geojson url parameter\n   *\n   * @public\n   * @function\n   */\n  getGeoJSON(layer) {\n    const source = !M.utils.isUndefined(layer.source) ?\n      layer.serialize() : encodeURIComponent(layer.url);\n    const style = (layer.getStyle()) ? layer.getStyle().serialize() : '';\n    return `GeoJSON*${layer.name}*${source}*${layer.extract}*${style}`;\n  }\n\n  /**\n   * This method gets the geojson url parameter\n   *\n   * @public\n   * @function\n   */\n  getVector(layer) {\n    let source = Object.assign(layer.toGeoJSON());\n    source.crs = {\n      properties: {\n        name: 'EPSG:4326',\n      },\n      type: 'name',\n    };\n    source = window.btoa(unescape(encodeURIComponent(JSON.stringify(source))));\n    const style = (layer.getStyle()) ? layer.getStyle().serialize() : '';\n    return `GeoJSON*${layer.name}*${source}**${style}`;\n  }\n\n  /**\n   * This method gets the wms url parameter\n   *\n   * @public\n   * @function\n   */\n  getWMS(layer) {\n    return `WMS*${this.normalizeString(layer.legend || layer.name)}*${layer.url}*${layer.name}*${layer.transparent}*${layer.tiled}*${layer.userMaxExtent || ''}*${layer.version}*${layer.displayInLayerSwitcher}*${layer.isQueryable()}*${layer.isVisible()}`;\n  }\n\n  /**\n   * This method gets the wfs url parameter\n   *\n   * @public\n   * @function\n   */\n  getWFS(layer) {\n    const style = layer.getStyle().serialize();\n    return `WFS*${this.normalizeString(layer.legend || layer.name)}*${layer.url}*${layer.namespace}:${layer.name}:*${layer.geometry || ''}*${layer.ids || ''}*${layer.cql || ''}*${style || ''}`;\n  }\n\n  /**\n   * This method gets the wmts url parameter\n   *\n   * @public\n   * @function\n   */\n  getWMTS(layer) {\n    const { code } = this.map_.getProjection();\n    let legend = null;\n    try {\n      legend = layer.getLegend();\n    } catch (err) {\n      legend = layer.legend;\n    }\n    return `WMTS*${layer.url}*${layer.name}*${layer.matrixSet || code}*${this.normalizeString(legend)}*${layer.transparent}*${layer.options.format || 'image/png'}*${layer.displayInLayerSwitcher}*${layer.isQueryable()}*${layer.isVisible()}`;\n  }\n\n  /**\n   * This method gets the plugins url parameter\n   */\n  getPlugins() {\n    return this.map_.getPlugins().map((plugin) => {\n      let newCurrent = '';\n      if (M.utils.isFunction(plugin.getAPIRest)) {\n        newCurrent = plugin.getAPIRest();\n      }\n      return newCurrent;\n    }).join('&');\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   */\n  equals(control) {\n    return control instanceof ShareMapControl;\n  }\n\n  normalizeString(text) {\n    let newText = text.replace(/,/g, '');\n    newText = newText.replace(/\\*/g, '');\n    return newText;\n  }\n\n  accessibilityTab(html) {\n    html.querySelectorAll('[tabindex=\"0\"]').forEach(el => el.setAttribute('tabindex', this.order));\n  }\n}\n","import en from './en';\nimport es from './es';\n\n/**\n * Default object with es and en translate.\n *\n * @const\n * @type {object}\n */\nconst translations = {\n  en,\n  es,\n};\n\nconst getLang = () => {\n  let res = 'es';\n  if (typeof M.language.getLang === 'function') {\n    res = M.language.getLang();\n  }\n\n  return res;\n};\n\n/**\n * This function sets a new language translate.\n * @param {string} lang\n * @param {JSON} json\n * @public\n * @api\n */\nexport const addTranslation = (lang, json) => {\n  translations[lang] = json;\n};\n\n/**\n * This function gets a language translate.\n *\n * @param {string} lang\n * @return {JSON}\n * @public\n * @api\n */\nexport const getTranslation = (lang) => {\n  if (lang === 'es' || lang === 'en') {\n    return translations[lang];\n  }\n  return M.language.getTranslation(lang).sharemap;\n};\n\n/**\n * This function gets a language value from key\n *\n * @public\n * @param {string}\n * @param {string}\n * @return {string}\n * @public\n * @api\n */\n\nexport const getValue = (keyPath, lang = getLang()) => {\n  const translation = getTranslation(lang);\n  let value = '';\n  if (M.utils.isNullOrEmpty(translation)) {\n    /* eslint-disable no-console */\n    console.warn(`The translation '${lang}' has not been defined.`);\n  } else {\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\n  }\n\n  return value;\n};\n","/**\n * @module M/plugin/ShareMap\n */\nimport '../assets/css/sharemap';\nimport ShareMapControl from './sharemapcontrol';\nimport { getValue } from './i18n/language';\n\nimport es from './i18n/es';\nimport en from './i18n/en';\n\n/**\n * @typedef {Object} ShareMapOptions\n * @property {number} [baseUrl] Base url of the shared map.\n * @property {enum<string>} [position='BR']? Position of the view plugin.\n * Allowed values: 'BR' | 'TR' | 'BL' | 'TL'.\n * @property {string} [title='Compartir URL']? The title of the plugin modal.\n * @property {string} [btn='OK']? The button text which close the modal plugin.\n * @property {string} [copyBtn='Copiar']? The button text which copy the url of shared map.\n * @property {StyleOptions} [styles={}]? The object with the information about primary color\n * and secondary color.\n * @property {bool} [overwriteStyles=false]? This flag allows to overwrite the colors of the plugin\n * with a custom css.\n * @property {string} [tooltip='¡Copiado!']? The text what is shown when the shared map url\n * is copied.\n *\n * Note: The character '?' indicates that the parameter is optional.\n */\n\n/**\n * @typedef {Object} StyleOptions\n * @property {string} [primaryColor='#71a7d3']? Primary color of the plugin view in format CSS color\n * @property {string} [secondaryColor = '#fff']? Secondary color of the plugin view\n * in format CSS color.\n *\n * Note: The character '?' indicates that the parameter is optional.\n */\n\n/**\n * Complete example of ShareMapPlugin options\n * @example\n *\n * {\n * 'baseUrl': 'https://cnigvisores_pub.desarrollo.guadaltel.es/mapea/'\n * 'position': 'BL',\n * 'title': 'Compartir Mapa',\n * 'btn': 'Aceptar',\n * 'copyBtn': 'Copiar url',\n * 'styles': {\n *  'primaryColor': 'yellow',\n *  'secondaryColor': 'green'\n *  },\n *  'overwriteStyles': 'false',\n *  'tooltip': 'Copiado'\n * }\n */\n\n/**\n * Minimum example of ShareMapPlugin options\n * @example\n *\n * {\n * 'baseUrl': 'https://cnigvisores_pub.desarrollo.guadaltel.es/mapea/'\n * }\n */\n\n/**\n * ShareMap plugin\n * @classdesc\n */\nexport default class ShareMap extends M.Plugin {\n  /**\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {ShareMapOptions} options\n   * @api\n   */\n  constructor({ filterLayers = [], ...options }) {\n    super();\n\n    if (M.utils.isNullOrEmpty(options.baseUrl)) {\n      console.warn('options.baseUrl is null or undefined.');\n    }\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Base url of the shared map\n     *\n     * @private\n     * @type {URLLike}\n     */\n    this.baseUrl_ = options.baseUrl || 'https://componentes.cnig.es/api-core/';\n\n    if (!M.utils.isString(this.baseUrl_)) {\n      throw new Error('options.baseUrl is not string type.');\n    }\n\n    /**\n     * Position of the plugin\n     *\n     * @private\n     * @type {Enum} TL | TR | BL | BR\n     */\n    this.position_ = options.position || 'BR';\n\n    /**\n     * Title of the modal\n     *\n     * @private\n     * @type {string}\n     */\n    this.title_ = options.title || getValue('title');\n\n    /**\n     * Title of the modal\n     *\n     * @private\n     * @type {string}\n     */\n    this.text_ = options.text || getValue('text');\n\n    /**\n     * Text of the button\n     *\n     * @private\n     * @type {string}\n     */\n    this.btn_ = options.btn || 'OK';\n\n    /**\n     * Text of the button\n     *\n     * @private\n     * @type {string}\n     */\n    this.copyBtn_ = options.copyBtn || getValue('copy');\n\n    /**\n     * Text of the button\n     *\n     * @private\n     * @type {string}\n     */\n    this.copyBtnHtml_ = options.copyBtnHtml || getValue('copy');\n\n    /**\n     * Styles options\n     * @private\n     * @type {object}\n     */\n    this.styles_ = options.styles || {};\n\n    /**\n     * Overwritten styles\n     *\n     * @private\n     * @type {bool}\n     */\n    this.overwriteStyles_ = options.overwriteStyles || false;\n\n    /**\n     * Generate minimized url\n     *\n     * @private\n     * @type {bool}\n     */\n    this.minimize_ = options.minimize || false;\n\n    /**\n     * Tooltip information for copy action\n     *\n     * @private\n     * @type {string}\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n      * URL API or URL Visor (true o fdefault API, false visor)\n      *\n      * @private\n      * @type @type {bool}\n      */\n    this.urlAPI_ = options.urlAPI || false;\n\n    /**\n     *@private\n     *@type { Number }\n     */\n    this.order = options.order >= -1 ? options.order : null;\n\n    /** Select layers share by the name\n      * @private\n      * @type @type {Array}\n      */\n    this.filterLayers = (options.shareLayer === undefined || options.shareLayer\n      === false)\n      ? filterLayers\n      : [];\n\n    /** Select all layers or not\n      * @private\n      * @type {Boolean}\n      */\n    this.shareLayer = options.shareLayer || false;\n\n    /**\n     * Plugin parameters\n     * @public\n     * @type {object}\n     */\n    this.options = options;\n  }\n\n  /**\n   * Return plugin language\n   *\n   * @public\n   * @function\n   * @param {string} lang type language\n   * @api stable\n   */\n  static getJSONTranslations(lang) {\n    if (lang === 'en' || lang === 'es') {\n      return (lang === 'en') ? en : es;\n    }\n    return M.language.getTranslation(lang).sharemap;\n  }\n\n  /**\n   * This function adds this plugin into the map.\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api\n   */\n  addTo(map) {\n    this.control = new ShareMapControl({\n      baseUrl: this.baseUrl_,\n      title: this.title_,\n      text: this.text_,\n      btn: this.btn_,\n      copyBtn: this.copyBtn_,\n      copyBtnHtml: this.copyBtnHtml_,\n      primaryColor: this.styles_.primaryColor,\n      secondaryColor: this.styles_.secondaryColor,\n      tooltip: this.tooltip_,\n      overwriteStyles: this.overwriteStyles_,\n      minimize: this.minimize_,\n      urlAPI: this.urlAPI_,\n      order: this.order,\n      filterLayers: this.filterLayers,\n      shareLayer: this.shareLayer,\n    });\n\n    this.controls_.push(this.control);\n\n    this.map_ = map;\n\n    this.panel_ = new M.ui.Panel('ShareMap', {\n      collapsible: false,\n      position: M.ui.position[this.position_],\n      className: 'm-plugin-sharemap',\n      tooltip: getValue('tooltipPanel'),\n      order: this.order,\n    });\n\n    this.panel_.addControls(this.controls_);\n\n    map.addPanels(this.panel_);\n  }\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    this.map_.removeControls([this.control]);\n    [this.map_, this.control, this.controls_, this.panel_, this.baseUrl_,\n      this.position_, this.title_, this.text_, this.btn_, this.copyBtn_,\n      this.copyBtnHtml_, this.styles_, this.overwriteStyles_, this.tooltip_,\n    ] = [null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n  }\n\n  /**\n   * This functions returns the controls of the plugin.\n   *\n   * @public\n   * @return {M.Control}\n   * @api\n   */\n  getControls() {\n    return this.controls_;\n  }\n\n  /**\n   * Name of the plugin\n   *\n   * @getter\n   * @function\n   */\n  get name() {\n    return 'sharemap';\n  }\n\n  /**\n   * This function returns the base url option\n   *\n   * @public\n   * @function\n   * @api\n   */\n  get baseUrl() {\n    return this.baseUrl_;\n  }\n\n  /**\n   * This function returns the facade map.\n   *\n   * @public\n   * @return {M.Map}\n   * @api\n   */\n  get map() {\n    return this.map_;\n  }\n\n  /**\n   * This function returns the position\n   *\n   * @public\n   * @return {string}\n   * @api\n   */\n  get position() {\n    return this.position_;\n  }\n\n  /**\n   * This function returns the position\n   *\n   * @public\n   * @return {string}\n   * @api\n   */\n  get tooltip() {\n    return this.tooltip_;\n  }\n\n  /**\n   * This function returns the title\n   *\n   * @public\n   * @return {string}\n   * @api\n   */\n  get title() {\n    return this.title_;\n  }\n\n  /**\n   * This function returns the text\n   *\n   * @public\n   * @return {string}\n   * @api\n   */\n  get text() {\n    return this.text_;\n  }\n\n  /**\n   * This function returns the accept button\n   *\n   * @public\n   * @return {string}\n   * @api\n   */\n  get btn() {\n    return this.btn_;\n  }\n\n  /**\n   * This function returns the copy button\n   *\n   * @public\n   * @return {string}\n   * @api\n   */\n  get copyBtn() {\n    return this.copyBtn_;\n  }\n\n  /**\n   * This function returns the copy button html\n   *\n   * @public\n   * @return {string}\n   * @api\n   */\n  get copyBtnHtml() {\n    return this.copyBtnHtml_;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    return `${this.name}=${this.position}*${this.tooltip_}*${this.baseUrl}*${this.minimize_}*${this.title_}*${this.btn_}*${this.copyBtn_}*${this.text_}*${this.copyBtnHtml_}*${this.urlAPI_}*${this.shareLayer}`;\n  }\n\n  /**\n   * Gets the API REST Parameters in base64 of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRestBase64() {\n    return `${this.name}=base64=${M.utils.encodeBase64(this.options)}`;\n  }\n}\n","import M$plugin$ShareMap from './/facade/js/sharemap';\nimport M$control$ShareMapControl from './/facade/js/sharemapcontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nwindow.M.plugin.ShareMap = M$plugin$ShareMap;\nwindow.M.control.ShareMapControl = M$control$ShareMapControl;\n"],"sourceRoot":""}