!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e){e.exports=JSON.parse('{"tooltip":"Search by geometry","exception_selectiondrawcontrol":"The implementation used cannot create SelectionDrawImplControl controls"}')},function(e){e.exports=JSON.parse('{"tooltip":"Búsqueda por geometría","exception_selectiondrawcontrol":"La implementación usada no puede crear controles SelectionDrawImplControl"}')},function(e,t){e.exports='<div id="div-contenedor" class="m-control m-container m-selectiondraw">\r\n    <button id="point" class="g-plugin-selectordraw-pin-seleccionado" title="Buscar punto"></button>\r\n    <button id="polygon" class="g-plugin-selectordraw-poligono" title="Buscar polígono"></button>\r\n    <button id="clear" class="g-plugin-selectordraw-papelera" title="Eliminar búsqueda"></button>\r\n</div>'},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),radius:6})}),s=new M.impl.format.GeoJSON,f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,c(t).call(this))).facadeControl=null,n.destProj=e,n}var n,o,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,M.impl.Control),n=t,(o=[{key:"addTo",value:function(e,n){l(c(t.prototype),"addTo",this).call(this,e,n),this.map=e,this.olMap=e.getMapImpl()}},{key:"activate",value:function(e,t){var n=this;t.classList.add("activated");var o=this.map.getProjection().code,r=this.map.getLayers().find((function(e){return"__draw__"===e.name}));if(null!=r){var i=r.getImpl().getOL3Layer();if(i.setStyle(u),null!=i){var l=i.getSource();this.interaction_=new ol.interaction.Draw({source:l,type:e}),this.interaction_.on("drawend",(function(e){var t=e.feature.clone(),r=ol.sphere.getArea(t.getGeometry());t.getGeometry().transform(o,n.destProj);var i=s.writeFeatureObject(t);i.properties={area:{km:r/Math.pow(10,6),m:r}},n.facadeControl.fire("finished:draw",[i])})),this.olMap.addInteraction(this.interaction_)}}}},{key:"deactivate",value:function(e){e.forEach((function(e){return e.classList.remove("activated")})),this.olMap.removeInteraction(this.interaction_)}}])&&r(n.prototype,o),f&&r(n,f),t}(),p=n(2),y=n.n(p),d=n(0),b=n(1),w={en:d,es:b},g=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},m=function(e){return"es"===e||"en"===e?w[e]:M.language.getTranslation(e).selectiondraw},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),n=m(t),o="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(t,"' has not been defined.")):o=e.split(".").reduce((function(e,t){return e[t]}),n),o};function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(f)&&M.exception(v("exception_selectiondrawcontrol"));var o,r,i=new f(e.projection);return o=this,n=!(r=_(t).call(this,i,"SelectionDraw"))||"object"!==h(r)&&"function"!=typeof r?S(o):r,i.facadeControl=S(n),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,M.Control),n=t,(o=[{key:"createView",value:function(e){var t=this;return new Promise((function(n){var o=M.template.compileSync(y.a),r=o.querySelector("button#polygon"),i=o.querySelector("button#point"),l=o.querySelector("button#clear"),c=e.getLayers().find((function(e){return"__draw__"===e.name}));l.addEventListener("click",(function(){c.clear()})),i.addEventListener("click",(function(){"Point"===t.activeGeometry?t.deactivate([i,r]):(t.deactivate([i,r]),t.activate("Point",i))})),r.addEventListener("click",(function(){"Polygon"===t.activeGeometry?t.deactivate([i,r]):(t.deactivate([i,r]),t.activate("Polygon",r))})),document.onkeydown=function(e){var t=window.event?event:e;if(90===t.keyCode&&t.ctrlKey){var n=c.getImpl().getOL3Layer().getSource().getFeatures().length;c.getImpl().getOL3Layer().getSource().removeFeature(c.getImpl().getOL3Layer().getSource().getFeatures()[n-1])}},n(o)}))}},{key:"activate",value:function(e,t){this.activeGeometry=e,this.getImpl().activate(e,t)}},{key:"deactivate",value:function(e){this.activeGeometry="",this.getImpl().deactivate(e)}},{key:"equals",value:function(e){return e instanceof t}}])&&O(n.prototype,o),r&&O(n,r),t}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=T(this,x(t).call(this));var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({collapsed:!1,collapsible:!0,position:"TL",projection:"EPSG:3857"},n);return e.map_=null,e.controls_=[],e.collapsed=o.collapsed||!1,e.collapsible=o.collapsible||!0,e.position=o.position||"TL",e.control_=new P(o),e.name=t.NAME,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,M.Plugin),n=t,r=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?d:b:M.language.getTranslation(e).selectiondraw}}],(o=[{key:"addTo",value:function(e){var t=this;this.map_=e,this.panel_=new M.ui.Panel("panel_selection_raw",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position],collapsedButtonClass:"g-plugin-selectordraw-editar",className:"m-selectiondraw",tooltip:v("tooltip")}),this.panel_.addControls(this.control_),e.addPanels(this.panel_),this.control_.on("finished:draw",(function(e){t.fire("finished:draw",[e])}))}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]),this.map_=null,this.control_=null,this.panel_=null}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.collapsed,"*").concat(this.collapsible)}}])&&L(n.prototype,o),r&&L(n,r),t}();I.NAME="selectiondraw",window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.SelectionDraw=I,window.M.control.SelectionDrawControl=P,window.M.impl.control.SelectionDrawControl=f}]);
//# sourceMappingURL=selectiondraw.ol.min.js.map