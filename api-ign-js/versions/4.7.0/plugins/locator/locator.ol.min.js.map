{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/ignsearchlocator-results.html","webpack:///./src/templates/ignsearchlocator.html","webpack:///./src/templates/infocatastro.html","webpack:///./src/templates/locator.html","webpack:///./src/templates/xylocator.html","webpack:///./src/impl/ol/js/ignsearchlocatorcontrol.js","webpack:///./src/facade/js/ignsearchlocatorcontrol.js","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/impl/ol/js/infocatastrocontrol.js","webpack:///./src/facade/js/infocatastrocontrol.js","webpack:///./src/impl/ol/js/locator.js","webpack:///./src/impl/ol/js/xylocatorcontrol.js","webpack:///./src/facade/js/xylocatorcontrol.js","webpack:///./src/facade/js/locatorcontrol.js","webpack:///./src/facade/js/locator.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typingTimer","IGNSearchLocatorControl","_M$impl$Control","_inherits","M","impl","Control","_super","_createSuper","map","_this","_classCallCheck","facadeMap_","wkt","propertiesString","feature","ol","format","WKT","readFeature","dataProjection","featureProjection","this","getProjection","code","properties","JSON","parse","geom","setId","concat","Date","getTime","setProperties","wrapComplexFeature","featureGeom","getGeometry","getType","type","POLYGON","MULTI_POLYGON","centroid","getInteriorPoint","getInteriorPoints","geometryCollection","GeometryCollection","setGeometry","coordinates","source","destiny","proj","getTransform","transformFunc","origin","originProj","destProj","coordinatesTransform","transform","normalizeNumber","calculated","res","parseFloat","toFixed","translations","en","es","getLang","language","getTranslation","lang","locator","getValue","keyPath","arguments","length","undefined","translation","utils","isNullOrEmpty","console","warn","split","reduce","prev","current","IGNSEARCH_TYPES_CONFIGURATION","_M$Control","zoom","pointStyle","options","useProxy","statusProxy","positionPlugin","isUndefined","IGNSearchLocatorImpl","exception","servicesToSearch","maxResults","noProcess","countryCode","reverse","resultVisibility","urlCandidates","urlFind","urlReverse","urlPrefix","urlAssistant","urlDispatcher","searchPosition","locationID","replace","requestStreet","geocoderCoords","isString","Number","nomenclatorSearchType","Array","isArray","reverseActivated","html","_this2","active","createGeometryStyles","drawNomenclatorResult","proxy","remote","then","geoJsonData","text","substring","drawGeocoderResult","reprojCoords","getImpl","reproject","showReversePopUp","coord","fake","html_","ignsearchactive","querySelector","classList","contains","deactive","document","remove","add","panel","template","compileSync","vars","placeholder","search_direction","get_direction","clean","appendChild","resultsBox","searchInput","addEvents","clearResults","removeChild","_this3","addEventListener","e","createTimeout","openRecentsResults","style","width","activateDeactivateReverse","clickReverseEvent","on","evt","CLICK","color","removeEventListener","checkEscKey","getElementsByTagName","cursor","invokeEscKey","concatUrlPaths","config","THEME_URL","dispatchEvent","window","KeyboardEvent","keyCode","which","shiftKey","ctrlKey","metaKey","err","error","_this4","isGeocoderCoords","etrs89pointCoordinates","reprojectReverse","params","urlToGet","mapCoordinates","dataCoordinates","fullAddress","returnData","createFullAddress","showPopUp","jsonResult","via","tip_via","address","portal","portalNumber","muni","province","extension","trim","street","toUpperCase","_this5","clearTimeout","setTimeout","searchInputValue","_this6","recents","localStorage","getItem","compiledResult","results","noresults","places","querySelectorAll","forEach","listElement","goToLocation","_this7","target","searchValue","innerHTML","nomenclatorCandidates","geocoderCandidates","nomenclatorFinished","candidatesFinished","getNomenclatorData","showCandidatesResults","getCandidatesData","inputValue","resultsArray","_this8","newInputVal","encodeURIComponent","Promise","resolve","indexOf","push","thisElement","splice","elem","cps","_this9","dialog","_this10","allCandidates","j","_this11","isRecentElement","currentElement","candidates","selectedObject","filter","element","id","getAttribute","setRecents","getFindData","includes","removePopup","checkDuplicateRecent","pop","unshift","setItem","stringify","found","point","Point","radius","icon","src","scale","fill","stroke","anchor","simple","Polygon","opacity","locationId","_this12","zoomIn","requestPlace","addParameters","request","query","sourcename","outputformat","latLngString","location","resultTitle","title","latLngArray","latitude","longitude","removeLayers","clickedElementLayer","newGeojson","features","geometry","layer","GeoJSON","displayInLayerSwitcher","setStyle","setZIndex","addLayers","zoomInLocation","service","_this13","resultsList","Vector","calculateMaxExtent","extent","setBbox","setZoom","fire","getOL3Layer","getSource","getExtent","_this14","parenthesisIndex","urlParse","_this15","urlSinJSON","json","olFeature","readFromWKT","mFeature","Feature","olFeature2Facade","lat","lng","LOAD","addFeatures","MOVE_MAP_EXTRACT","perfectResult","state","showSearchPopUp","popup","exactResult","exitState","destinyProj","destinySource","newCoordinates","mapcoords","featureCoordinates","hasOffset","featureTabOpts","content","myPopUp","Popup","panMapIfOutOfView","addTab","addPopup","setOffset","control","getPopup","InfoCatastroControl","apply","InfoCatastroImpl","CMC_url","DNPPP_url","CPMRC_url","cadastreWMS","provincecode","selectProvincias","selectMunicipios","inputPoligono","inputParcela","inputRefCatastral","tabs","tabpanels","activeTab","infocatastroactive","plot","searchplot","searchcadastre","selectprov","municipality","selectmuni","estate","search","refCastatro","insertCadastre","notaRef","consultReference","_step","_iterator","_createForOfIteratorHelper","_loop","tab","preventDefault","setActiveTab","done","f","initParams","onParamsSearch","onRCSearch","onRCConsult","_step2","_iterator2","setAttribute","focus","_step3","_iterator3","tabpanel","onProvinciaSelect","clearParcela","clearCatastro","clearMunicipiosSelect","getLayers","find","idprov","mun","provinceCode","CodigoProvincia","CodigoMunicipio","CodigoMunicipioIne","loadMunicipiosSelect","firstChild","option","createElement","response","muniNodes","xml","locat","childNodes","nodeValue","municipalityvalue","info","searchUrl","CodigoMunicipioINE","Poligono","Parcela","acceptOVCSW","parseParamsResultsForTemplate_","success","rootElement","errorCtlNode","cuerr","errorDescTxt","rcNode","lrcdnpNode","pc1Value","pc2Value","Provincia","Municipio","SRS","RC","docsRC","parseCPMRCResults","xcen","coords","ycen","locator_","xmlResults","coordNode","pcNode","pc1Node","pc2Node","geoNode","xcenNode","ycenNode","srsNode","attributes","rcId","srs","x","y","xFloat","yFloat","coordinatesLayer","isNaN","setCenter","center","refcatastral","substr","docs","rcResults_","resultsTemplateVars","total","partial","notResutls","resultTemplate","drawGeocoderResultRC","attri","newCoords","body","buildUrl_","Coordenada_X","Coordenada_Y","showInfoFromURL_","un","jsonp","infos","formatedInfo","formatInfo_","POPUP_TITLE","join","getCoordinate","hasExternalContent","getTabs","removeTab","ldtNode","valuePopup","codProv","codMun","link","DOMParser","parseFromString","beautifyAttribute","toLowerCase","LocatorControl","_get","_getPrototypeOf","XYLocatorControl","XYLocatorImpl","projections","help","xylocatoractive","hasHelp","isUrl","helpUrl","locate","east","west","north","south","geographic","zone","dms","dd","manageInputs_","calculate_","selectTarget","selectedOption","selectedIndex","display","selectors","unit","xString","yString","hhLon","mmLon","ssLon","dirLon","hhLat","mmLat","ssLat","dirLat","checkDegreeValue_","ex","num","isDraggable","byCoordinates","byParcelCadastre","byPlaceAddressPostal","order","position","LocatorImpl","byCoordinates_","byParcelCadastre_","byPlaceAddressPostal_","isDraggable_","zoom_","pointStyle_","map_","fail","showTitle","headertitle","infocatastro","xylocator","ignsearch","infocatastroControl","_ref","data","xylocatorControl","_ref2","ignsearchControl","ADDED_TO_MAP","initializateAddress","click","_ref3","draggabillyPlugin","getPanel","accessibilityTab","container","children","el","destroy","Locator","_M$Plugin","Plugin","controls_","position_","collapsed","collapsible","tooltip_","tooltip","getInfoCatastro","getXYLocator","getIGNSearchLocator","useproxy","panel_","ui","Panel","className","collapsedButtonClass","addControls","addPanels","units","isDraggableE","encodeBase64","removeControls","plugin","M$control$IGNSearchLocatorControl","M$control$InfoCatastroControl","M$plugin$Locator","M$control$LocatorControl","M$control$XYLocatorControl","M$impl$control$IGNSearchLocatorControl","M$impl$control$InfoCatastroControl","M$impl$control$LocatorControl","M$impl$control$XYLocatorControl"],"mappings":"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","file":"locator.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","module.exports = \"{{#if noresults}}\\r\\n<p class=\\\"m-ignsearchlocator-noresults\\\">{{translations.noresults}}</p>\\r\\n{{else}}\\r\\n<ul id=\\\"m-ignsearchlocator-results-list\\\">\\r\\n    {{#each places}}\\r\\n        {{#if this.address}}\\r\\n            {{#printType this.type this.address this.id this.municipality this.cps}}\\r\\n            {{/printType}}\\r\\n        {{else}}\\r\\n            {{#printType this.type this.title this.id this.municipality this.cps}}\\r\\n            {{/printType}}\\r\\n        {{/if}}\\r\\n    {{/each}}\\r\\n</ul>\\r\\n{{/if}}\";","module.exports = \"<div id=\\\"m-ignsearch-panel\\\">\\r\\n    <input type=\\\"text\\\" tabindex=\\\"0\\\" id=\\\"m-ignsearchlocator-search-input\\\" class=\\\"m-input-search\\\" autocomplete=\\\"off\\\" title=\\\"{{placeholder}}\\\" placeholder=\\\"{{placeholder}}\\\" />\\r\\n    {{#if reverse}}\\r\\n    <button type=\\\"button\\\" tabindex=\\\"0\\\" id=\\\"m-ignsearchlocator-locate-button\\\" title=\\\"{{translations.get_direction}}\\\">\\r\\n        <i class=\\\"locator-icon-locate\\\"></i>\\r\\n    </button>\\r\\n    {{/if}}\\r\\n    <button type=\\\"button\\\" tabindex=\\\"0\\\" id=\\\"m-ignsearchlocator-clean-button\\\" title=\\\"{{translations.clean}}\\\">\\r\\n        <i class=\\\"locator-icon-remove\\\"></i> {{translations.clean}}\\r\\n    </button>\\r\\n    <div id=\\\"m-ignsearchlocator-results\\\">\\r\\n        <!-- Here goes the list of search results -->\\r\\n    </div>\\r\\n</div>\";","module.exports = \"<div id=\\\"m-infocatastro-panel\\\">\\n  <div tabindex=\\\"0\\\" role=\\\"tablist\\\" aria-label=\\\"{{translations.plot}}\\\" class=\\\"m-search-tabs\\\">\\n    <!-- <input tabindex=\\\"0\\\" type=\\\"radio\\\" name=\\\"tabset\\\" id=\\\"tab-search-parcela\\\" aria-controls=\\\"m-search-tab-parcela\\\" checked> -->\\n    <label role=\\\"tab\\\" aria-controls=\\\"m-search-tab-parcela\\\" id=\\\"tab-search-parcela\\\" tabindex=\\\"0\\\" aria-selected=\\\"true\\\">{{translations.searchplot}}</label>\\n    <!-- <input tabindex=\\\"0\\\" type=\\\"radio\\\" name=\\\"tabset\\\" id=\\\"tab-search-catastro\\\" aria-controls=\\\"m-search-tab-catastro\\\"> -->\\n    <label role=\\\"tab\\\" aria-controls=\\\"m-search-tab-catastro\\\" id=\\\"tab-search-catastro\\\" tabindex=\\\"0\\\" aria-selected=\\\"false\\\">{{translations.searchcadastre}}</label>\\n    <div class=\\\"m-search-tab-content\\\">\\n      <section id=\\\"m-search-tab-parcela\\\" class=\\\"m-search-tab-panels\\\" role=\\\"tabpanel\\\" aria-expanded=\\\"true\\\">\\n        <div class=\\\"m-infocatastro-datas\\\">\\n          <div id=\\\"m-searchParams-container\\\">\\n            <div id=\\\"m-infocatastro-coordinatesSystemParcela\\\">\\n              <b>\\n                <p tabindex=\\\"0\\\" role=\\\"text\\\" id=\\\"m-provin\\\" class=\\\"parcela--input\\\">{{translations.province}}:</p>\\n              </b>\\n              <select role=\\\"select\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.selectprov}}\\\" id=\\\"m-searchParamsProvincia-select\\\" name=\\\"srs\\\" class=\\\"dropdown\\\">\\n                <option value=\\\"0\\\">{{translations.selectprov}}</option>\\n                <option value=\\\"02\\\">ALBACETE</option>\\n                <option value=\\\"03\\\">ALICANTE/ALACANT</option>\\n                <option value=\\\"04\\\">ALMERÍA</option>\\n                <option value=\\\"01\\\">ARABA/ÁLAVA</option>\\n                <option value=\\\"33\\\">ASTURIAS</option>\\n                <option value=\\\"05\\\">ÁVILA</option>\\n                <option value=\\\"06\\\">BADAJOZ</option>\\n                <option value=\\\"07\\\">BALEARS, ILLES</option>\\n                <option value=\\\"08\\\">BARCELONA</option>\\n                <option value=\\\"48\\\">BIZKAIA</option>\\n                <option value=\\\"09\\\">BURGOS</option>\\n                <option value=\\\"10\\\">CÁCERES</option>\\n                <option value=\\\"11\\\">CÁDIZ</option>\\n                <option value=\\\"39\\\">CANTABRIA</option>\\n                <option value=\\\"12\\\">CASTELLÓN/CASTELLÓ</option>\\n                <option value=\\\"13\\\">CIUDAD REAL</option>\\n                <option value=\\\"14\\\">CÓRDOBA</option>\\n                <option value=\\\"15\\\">CORUÑA, A</option>\\n                <option value=\\\"16\\\">CUENCA</option>\\n                <option value=\\\"20\\\">GIPUZKOA</option>\\n                <option value=\\\"17\\\">GIRONA</option>\\n                <option value=\\\"18\\\">GRANADA</option>\\n                <option value=\\\"19\\\">GUADALAJARA</option>\\n                <option value=\\\"21\\\">HUELVA</option>\\n                <option value=\\\"22\\\">HUESCA</option>\\n                <option value=\\\"23\\\">JAÉN</option>\\n                <option value=\\\"24\\\">LEÓN</option>\\n                <option value=\\\"25\\\">LLEIDA</option>\\n                <option value=\\\"27\\\">LUGO</option>\\n                <option value=\\\"28\\\">MADRID</option>\\n                <option value=\\\"29\\\">MÁLAGA</option>\\n                <option value=\\\"30\\\">MURCIA</option>\\n                <option value=\\\"31\\\">NAVARRA</option>\\n                <option value=\\\"32\\\">OURENSE</option>\\n                <option value=\\\"34\\\">PALENCIA</option>\\n                <option value=\\\"35\\\">PALMAS, LAS</option>\\n                <option value=\\\"36\\\">PONTEVEDRA</option>\\n                <option value=\\\"26\\\">RIOJA, LA</option>\\n                <option value=\\\"37\\\">SALAMANCA</option>\\n                <option value=\\\"38\\\">SANTA CRUZ DE TENERIFE</option>\\n                <option value=\\\"40\\\">SEGOVIA</option>\\n                <option value=\\\"41\\\">SEVILLA</option>\\n                <option value=\\\"42\\\">SORIA</option>\\n                <option value=\\\"43\\\">TARRAGONA</option>\\n                <option value=\\\"44\\\">TERUEL</option>\\n                <option value=\\\"45\\\">TOLEDO</option>\\n                <option value=\\\"46\\\">VALENCIA/VALÈNCIA</option>\\n                <option value=\\\"47\\\">VALLADOLID</option>\\n                <option value=\\\"49\\\">ZAMORA</option>\\n                <option value=\\\"50\\\">ZARAGOZA</option>\\n                <option value=\\\"51\\\">CEUTA</option>\\n                <option value=\\\"52\\\">MELILLA</option>\\n              </select>\\n            </div>\\n            <div id=\\\"m-infocatastro-coordinatesSystemParcela\\\">\\n              <b>\\n                <p id=\\\"m-munici\\\" tabindex=\\\"0\\\" role=\\\"text\\\" class=\\\"parcela--input\\\">{{translations.municipality}}:</p>\\n              </b>\\n              <select id=\\\"m-searchParamsMunicipio-select\\\" name=\\\"Municipios\\\" class=\\\"dropdown\\\" aria-label=\\\"{{translations.selectmuni}}\\\">\\n                <option value=\\\"0\\\">{{translations.selectmuni}}</option>\\n              </select>\\n            </div>\\n            <div id=\\\"m-infocatastro-estatePlot\\\">\\n              <b>\\n                <p type=\\\"text\\\" tabindex=\\\"0\\\" class=\\\"parcela--input\\\" style=\\\"width: 60px\\\">{{translations.estate}}:</p>\\n              </b>\\n              <input type=\\\"text\\\" tabindex=\\\"0\\\" id=\\\"m-searchParamsPoligono-input\\\" style=\\\"color:black\\\">\\n              <b>\\n                <p type=\\\"text\\\" tabindex=\\\"0\\\" class=\\\"parcela--input\\\" style=\\\"width: auto\\\">{{translations.plot}}:</p>\\n              </b>\\n              <input type=\\\"text\\\" tabindex=\\\"0\\\" id=\\\"m-searchParamsParcela-input\\\" style=\\\"color:black\\\">\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"button\\\">\\n          <button class=\\\"represent\\\" id=\\\"m-infocatastro-searchParams\\\" style=\\\"margin-right:10px\\\" title=\\\"{{translations.search}}\\\">\\n            <i class=\\\"locator-icon-position\\\"></i> {{translations.search}}\\n          </button>\\n          <button class=\\\"represent\\\" id=\\\"m-infocatastro-parcela-limpiar\\\" title=\\\"{{translations.clean}}\\\">\\n            <i class=\\\"locator-icon-remove\\\"></i> {{translations.clean}}\\n          </button>\\n        </div>\\n      </section>\\n      <section id=\\\"m-search-tab-catastro\\\" class=\\\"m-search-tab-panels\\\" role=\\\"tabpanel\\\" aria-expanded=\\\"false\\\">\\n        <div class=\\\"m-infocatastro-datas\\\">\\n          <div id=\\\"m-searchParams-container\\\">\\n            <div id=\\\"m-infocatastro-coordinatesSystemRefCatastral\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.refCastatro}}\\\">\\n              <b>\\n                <p tabindex=\\\"0\\\" role=\\\"text\\\" class=\\\"refCastastrl--input\\\">{{translations.refCastatro}}:</p>\\n              </b>\\n              <input type=\\\"text\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.insertCadastre}}\\\" id=\\\"m-refCatastral-input\\\" style=\\\"color:black; width: 97% !important;\\\"\\n              maxlength=\\\"20\\\">\\n              <button type=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.search}}\\\" class=\\\"represent\\\" id=\\\"m-infocatastro-refCatastral\\\" style=\\\"margin-bottom: 5px\\\">\\n                <i class=\\\"locator-icon-catastro\\\"></i> {{translations.search}}\\n              </button>\\n              <br>\\n              <i tabindex=\\\"0\\\">\\n                <p tabindex=\\\"0\\\" role=\\\"text\\\" aria-label=\\\"{{translations.notaRef}}\\\" id=\\\"m-informa\\\" class=\\\"parcela--input\\\"\\n                style=\\\"width: 0px !important; display: contents; font-size: 13px; font-family: auto;\\\">\\n                {{translations.notaRef}}</p>\\n              </i>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"button\\\">\\n          <button type=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.consultReference}}\\\" class=\\\"represent\\\" id=\\\"m-infocatastro-consulRef\\\" style=\\\"margin-left: 5px\\\">\\n            <i class=\\\"locator-icon-info\\\"></i> {{translations.consultReference}}\\n          </button>\\n          <button class=\\\"represent\\\" id=\\\"m-infocatastro-catastro-limpiar\\\" title=\\\"{{translations.clean}}\\\">\\n            <i class=\\\"locator-icon-remove\\\"></i> {{translations.clean}}\\n          </button>\\n        </div>\\n      </section>\\n    </div>\\n  </div>\\n</div>\";","module.exports = \"<div aria-label=\\\"Plugin Locator\\\" role=\\\"menuitem\\\" id=\\\"div-contenedor-locator\\\" class=\\\"m-control m-container m-locator\\\">\\n    {{#if showTitle}}\\n        <div role=\\\"heading\\\" tabindex=\\\"0\\\" id=\\\"m-locator-title\\\">{{translations.headertitle}}</div>\\n    {{/if}}\\n    <div id=\\\"m-locator-previews\\\">\\n        {{#if byPlaceAddressPostal}}\\n            <div tabindex=\\\"0\\\" id=\\\"m-locator-ignsearch\\\" title=\\\"{{translations.ignsearch}}\\\" class=\\\"locator-icon-ignsearch\\\"></div>\\n        {{/if}}\\n        {{#if byParcelCadastre}}\\n            <div tabindex=\\\"0\\\" id=\\\"m-locator-infocatastro\\\" title=\\\"{{translations.infocatastro}}\\\" class=\\\"locator-icon-catastro\\\"></div>\\n        {{/if}}\\n        {{#if byCoordinates}}\\n            <div tabindex=\\\"0\\\" id=\\\"m-locator-xylocator\\\" title=\\\"{{translations.xylocator}}\\\" class=\\\"locator-icon-posicion3\\\"></div>\\n        {{/if}}\\n    </div>\\n</div>\";","module.exports = \"<div id=\\\"m-xylocator-panel\\\">\\n  <div class=\\\"m-xylocator-datas\\\">\\n    <div id=\\\"m-xylocator-coordinatesSystem\\\">\\n      <div id=\\\"m-xylocator-selector-title\\\">\\n        <span>{{translations.srs}}:</span>\\n        {{#if hasHelp}}\\n          <div class=\\\"m-xylocator-help-button\\\" title=\\\"EPSG\\\">\\n            <a href=\\\"{{helpUrl}}\\\" target=\\\"_blank\\\"><i class=\\\"locator-icon-help\\\"></i></a>\\n          </div>\\n        {{/if}}\\n      </div>\\n      <select name=\\\"srs\\\" id=\\\"m-xylocator-srs\\\" class=\\\"dropdown\\\">\\n        {{#if projections}}\\n          {{#each projections}}\\n            <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"{{this.units}}\\\" value=\\\"{{this.code}}\\\">{{this.title}}</option>\\n          {{/each}}\\n        {{else}}\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"d\\\" value=\\\"EPSG:4258\\\" option=\\\"selected\\\">ETRS89\\n            {{translations.geographic}} (4258) {{translations.dd}}</option>\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"d\\\" value=\\\"EPSG:4326\\\">WGS84 {{translations.geographic}} (4326)\\n            {{translations.dd}}</option>\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"dms\\\" value=\\\"EPSG:4258\\\">ETRS89\\n            {{translations.geographic}} (4258) {{translations.dms}}</option>\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"dms\\\" value=\\\"EPSG:4326\\\">WGS84 {{translations.geographic}}\\n            (4326) {{translations.dms}}</option>\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:3857\\\">WGS84 Pseudo Mercator (3857)</option>\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25831\\\">ETRS89 UTM {{translations.zone}} 31N\\n            (25831)</option>\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25830\\\">ETRS89 UTM {{translations.zone}} 30N\\n            (25830)</option>\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25829\\\">ETRS89 UTM {{translations.zone}} 29N\\n            (25829)</option>\\n          <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25828\\\">ETRS89 UTM {{translations.zone}} 28N\\n            (25828)</option>\\n        {{/if}}\\n      </select>\\n    </div>\\n    <div id=\\\"m-xylocator-utm\\\" style=\\\"display:none;\\\">\\n      <span>X:</span>\\n      <input type=\\\"text\\\" name=\\\"UTM-X\\\" id=\\\"UTM-X\\\" placeholder=\\\"234798,13\\\" style=\\\"color:black\\\"><br />\\n      <span>Y:</span>\\n      <input type=\\\"text\\\" name=\\\"UTM-Y\\\" id=\\\"UTM-Y\\\" placeholder=\\\"4154570,15\\\" style=\\\"color:black\\\">\\n    </div>\\n    <div id=\\\"m-xylocator-dms\\\" style=\\\"display:none;\\\">\\n      <p>{{translations.longitude}}:</p>\\n      <div style=\\\"margin-bottom: -0.8rem;\\\">\\n        <div>\\n          <input type=\\\"number\\\" name=\\\"LONHH\\\" id=\\\"LONHH\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"180\\\" style=\\\"color:black\\\"><span>º</span>\\n        </div>\\n        <div>\\n          <input type=\\\"number\\\" name=\\\"LONMM\\\" id=\\\"LONMM\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"59\\\" style=\\\"color:black\\\"><span>'</span>\\n        </div>\\n        <div>\\n          <input type=\\\"number\\\" name=\\\"LONSS\\\" id=\\\"LONSS\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"59.9999\\\"\\n            style=\\\"color:black\\\"><span>''</span>\\n        </div>\\n        <div class=\\\"m-xylocator-dms-radio\\\">\\n          <table>\\n            <tbody>\\n              <tr>\\n                <td><input type=\\\"radio\\\" name=\\\"LONDIR\\\" style=\\\"color:black\\\" value=\\\"east\\\" checked></td>\\n                <td>{{translations.east}}</td>\\n              </tr>\\n              <tr>\\n                <td><input type=\\\"radio\\\" name=\\\"LONDIR\\\" style=\\\"color:black\\\" value=\\\"west\\\"></td>\\n                <td>{{translations.west}}</td>\\n              </tr>\\n              </tbdoy>\\n          </table>\\n        </div>\\n      </div>\\n      <p>{{translations.latitude}}:</p>\\n      <div style=\\\"margin-bottom: -0.8rem;\\\">\\n        <div>\\n          <input type=\\\"number\\\" name=\\\"LATHH\\\" id=\\\"LATHH\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"180\\\" style=\\\"color:black\\\"><span>º</span>\\n        </div>\\n        <div>\\n          <input type=\\\"number\\\" name=\\\"LATMM\\\" id=\\\"LATMM\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"59\\\" style=\\\"color:black\\\"><span>'</span>\\n        </div>\\n        <div>\\n          <input type=\\\"number\\\" name=\\\"LATSS\\\" id=\\\"LATSS\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"59.9999\\\"\\n            style=\\\"color:black\\\"><span>''</span>\\n        </div>\\n        <div class=\\\"m-xylocator-dms-radio\\\">\\n          <table>\\n            <tbody>\\n              <tr>\\n                <td><input type=\\\"radio\\\" name=\\\"LATDIR\\\" style=\\\"color:black\\\" value=\\\"north\\\" checked></td>\\n                <td>{{translations.north}}</td>\\n              </tr>\\n              <tr>\\n                <td><input type=\\\"radio\\\" name=\\\"LATDIR\\\" style=\\\"color:black\\\" value=\\\"south\\\"></td>\\n                <td>{{translations.south}}</td>\\n              </tr>\\n            </tbody>\\n          </table>\\n        </div>\\n      </div>\\n    </div>\\n    <div id=\\\"m-xylocator-latlon\\\">\\n      <span>{{translations.longitude}}:</span>\\n      <input type=\\\"text\\\" name=\\\"LON\\\" id=\\\"LON\\\" placeholder=\\\"-6,0\\\" style=\\\"color:black\\\"><br />\\n      <span>{{translations.latitude}}:</span>\\n      <input type=\\\"text\\\" name=\\\"LAT\\\" id=\\\"LAT\\\" placeholder=\\\"37,5\\\" style=\\\"color:black\\\">\\n    </div>\\n    <div class=\\\"button\\\">\\n      <button class=\\\"represent\\\" id=\\\"m-xylocator-loc\\\" title=\\\"{{translations.locate}}\\\">\\n        <i class=\\\"locator-icon-coordinates\\\"></i> {{translations.locate}}\\n      </button>\\n      <button class=\\\"represent\\\" id=\\\"m-xylocator-limpiar\\\" title=\\\"{{translations.clean}}\\\">\\n        <i class=\\\"locator-icon-remove\\\"></i> {{translations.clean}}\\n      </button>\\n    </div>\\n  </div>\\n</div>\";","/**\n * @module M/impl/control/IGNSearchLocatorControl\n */\n\nexport default class IGNSearchLocatorControl extends M.impl.Control {\n  constructor(map) {\n    super();\n\n    /**\n     * Map\n     */\n    this.facadeMap_ = map;\n  }\n\n  /**\n   * This function read features from WKT\n   *\n   * @param {WKT} wkt - WKT\n   * @param {Object} propertiesString - Properties\n   * @returns {Feature} Feature from WKT\n   */\n  readFromWKT(wkt, propertiesString) {\n    const format = new ol.format.WKT();\n    const feature = format.readFeature(wkt, {\n      dataProjection: 'EPSG:4326',\n      featureProjection: this.facadeMap_.getProjection().code,\n    });\n\n    const properties = JSON.parse(propertiesString);\n    delete properties.geom;\n    feature.setId(`f${new Date().getTime()}`);\n    feature.setProperties(properties);\n    this.wrapComplexFeature(feature);\n    return feature;\n  }\n\n  /**\n   * This function wrap complex feature\n   *\n   * @function\n   * @api\n   * @param {Feature} feature - Feature\n   */\n  wrapComplexFeature(feature) {\n    const featureGeom = feature.getGeometry();\n    if ((featureGeom.getType() === M.geom.wkt.type.POLYGON) ||\n      (featureGeom.getType() === M.geom.wkt.type.MULTI_POLYGON)) {\n      let centroid;\n      if (featureGeom.getType() === M.geom.wkt.type.POLYGON) {\n        centroid = featureGeom.getInteriorPoint();\n      } else {\n        centroid = featureGeom.getInteriorPoints();\n      }\n\n      const geometryCollection = new ol.geom.GeometryCollection([centroid, featureGeom]);\n      feature.setGeometry(geometryCollection);\n    }\n  }\n\n  /**\n   * This function reprojects given coordinates to given projection.\n   * @private\n   * @function\n   * @param {Array<number>} coordinates - [x,y]\n   * @param {string} source - 'EPSG:4326'\n   * @param {string} destiny - 'EPSG:4326'\n   * @returns {Array<number>} - Coordinares reprojects\n   */\n  reprojectReverse(coordinates, source, destiny) {\n    const transformFunc = ol.proj.getTransform(source, destiny);\n    return transformFunc(coordinates);\n  }\n\n  /**\n   * This function reprojects map on selected SRS.\n   *\n   * @function\n   * @param {string} origin - EPSG:25830, EPSG:4326, ..., etc\n   * @param {Array<number>} coordinates - Coordinares [x,y]\n   * @returns {Array<number>} Coordinates transformed\n   * @api\n   */\n  reproject(origin, coordinates) {\n    const originProj = ol.proj.get(origin);\n    const destProj = ol.proj.get(this.facadeMap_.getProjection().code);\n    let coordinatesTransform = ol.proj.transform(coordinates, originProj, destProj);\n    coordinatesTransform = [this.normalizeNumber(coordinates[0], coordinatesTransform[0]),\n      this.normalizeNumber(coordinates[1], coordinatesTransform[1]),\n    ];\n    return coordinatesTransform;\n  }\n\n  /**\n   * This functions normalize a number.\n   *\n   * @param {Number} origin\n   * @param {Number} calculated\n   * @returns {Number} Number normalized.\n   */\n  normalizeNumber(origin, calculated) {\n    let res = origin;\n    if (origin !== 0) {\n      res = parseFloat(calculated.toFixed(9));\n    }\n\n    return res;\n  }\n}\n","/**\n * @module M/control/IGNSearchLocatorControl\n */\nimport template from 'templates/ignsearchlocator';\nimport results from 'templates/ignsearchlocator-results';\nimport IGNSearchLocatorImpl from '../../impl/ol/js/ignsearchlocatorcontrol';\nimport { getValue } from './i18n/language';\n\nlet typingTimer;\n\n/** IGNSearch List Control\n *\n * @private\n * @type {object}\n */\nconst IGNSEARCH_TYPES_CONFIGURATION = [\n  'Estado',\n  // 'Comunidad aut\\u00F3noma',\n  // 'Ciudad con estatuto de autonom\\u00EDa',\n  // 'Provincia',\n  // 'Municipio',\n  // 'EATIM',\n  'Isla administrativa',\n  'Comarca administrativa',\n  'Jurisdicci\\u00F3n',\n  // 'Capital de Estado',\n  // 'Capital de comunidad aut\\u00F3noma y ciudad con estatuto de autonom\\u00EDa',\n  // 'Capital de provincia',\n  // 'Capital de municipio',\n  // 'Capital de EATIM',\n  // 'Entidad colectiva',\n  // 'Entidad menor de poblaci\\u00F3n',\n  // 'Distrito municipal',\n  // 'Barrio',\n  // 'Entidad singular',\n  // 'Construcci\\u00F3n/instalaci\\u00F3n abierta',\n  // 'Edificaci\\u00F3n',\n  'V\\u00E9rtice Geod\\u00E9sico',\n  // 'Hitos de demarcaci\\u00F3n territorial',\n  // 'Hitos en v\\u00EDas de comunicaci\\u00F3n',\n  'Alineaci\\u00F3n monta\\u00F1osa',\n  'Monta\\u00F1a',\n  'Paso de monta\\u00F1a',\n  'Llanura',\n  'Depresi\\u00F3n',\n  'Vertientes',\n  'Comarca geogr\\u00E1fica',\n  'Paraje',\n  'Elemento puntual del paisaje',\n  'Saliente costero',\n  'Playa',\n  'Isla',\n  'Otro relieve costero',\n  // 'Parque Nacional y Natural',\n  // 'Espacio protegido restante',\n  // 'Aeropuerto',\n  // 'Aer\\u00F3dromo',\n  // 'Pista de aviaci\\u00F3n y helipuerto',\n  // 'Puerto de Estado',\n  // 'Instalaci\\u00F3n portuaria',\n  // 'Carretera',\n  // 'Camino y v\\u00EDa pecuaria',\n  // 'V\\u00EDa urbana',\n  // 'Ferrocarril',\n  'Curso natural de agua',\n  'Masa de agua',\n  'Curso artificial de agua',\n  // 'Embalse',\n  'Hidr\\u00F3nimo puntual',\n  'Glaciares',\n  'Mar',\n  'Entrante costero y estrecho mar\\u00EDtimo',\n  'Relieve submarino',\n];\n\nexport default class IGNSearchLocatorControl extends M.Control {\n  /**\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(\n    map,\n    zoom,\n    pointStyle,\n    options,\n    useProxy,\n    statusProxy,\n    positionPlugin,\n  ) {\n    if (M.utils.isUndefined(IGNSearchLocatorImpl)) {\n      M.exception(getValue('exception.impl_ignsearchlocator'));\n    }\n    const impl = new IGNSearchLocatorImpl(map);\n    super(impl, 'IGNSearchLocatorImpl');\n\n    /**\n     * Zoom\n     *\n     * @type {number}\n     */\n    this.zoom = zoom;\n\n    /**\n     * This variable indicates which services should be searched\n     * (geocoder, nomenclator or both)\n     * @private\n     * @type {string} - 'g' | 'n' | 'gn'\n     */\n    this.servicesToSearch = options.servicesToSearch || 'g';\n\n    /**\n     * This variable sets the maximun results returned by a service\n     * (if both services are searched the maximum results will be twice this number)\n     * @private\n     * @type {number}\n     */\n    this.maxResults = options.maxResults || 10;\n\n    /**\n     * This variable indicate which entities shouldn't be searched\n     * @private\n     * @type {string} - 'municipio' | 'poblacion' | 'toponimo' | 'callejero'\n     * | 'municipio,poblacion' | etc\n     */\n    this.noProcess = options.noProcess;\n\n    /**\n     * This variable indicates the country code.\n     * @private\n     * @type {string} - 'es'\n     */\n    this.countryCode = options.countryCode || 'es';\n\n    /**\n     * This variable indicates whether the option to obtain the address\n     * at a point on the map appears\n     * @private\n     * @type {boolean}\n     */\n    this.reverse = !M.utils.isUndefined(options.reverse) ? options.reverse : true;\n\n    /**\n     * This variable indicates whether result geometry should be drawn on map.\n     * @private\n     * @type {boolean}\n     */\n    this.resultVisibility = !M.utils.isUndefined(options.resultVisibility) ?\n      options.resultVisibility : true;\n\n    /**\n     * This variable indicates Geocoder Candidates service url\n     * @private\n     * @type {string}\n     */\n    this.urlCandidates = options.urlCandidates || 'https://www.cartociudad.es/geocoder/api/geocoder/candidatesJsonp';\n\n    /**\n     * This variable indicates Geocoder Find service url\n     * @private\n     * @type {string}\n     */\n    this.urlFind = options.urlFind || 'https://www.cartociudad.es/geocoder/api/geocoder/findJsonp';\n\n    /**\n     * This variable indicates Geocoder Reverse service url\n     * @private\n     * @type {string}\n     */\n    this.urlReverse = options.urlReverse || 'https://www.cartociudad.es/geocoder/api/geocoder/reverseGeocode';\n\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.urlPrefix = options.urlPrefix || 'http://www.idee.es/';\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.urlAssistant = options.urlAssistant || 'https://www.idee.es/communicationsPoolServlet/SearchAssistant';\n\n    /**\n     * This variable indicates Nomenclator Dispatcher service url\n     * @private\n     * @type {string}\n     */\n    this.urlDispatcher = options.urlDispatcher || 'https://www.idee.es/communicationsPoolServlet/Dispatcher';\n\n    /**\n     * Type of icon to display when a punctual type result is found\n     * @private\n     * @type {string}\n     */\n    this.pointStyle = pointStyle;\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.searchPosition = options.searchPosition || 'geocoder,nomenclator';\n\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.locationID = (options.locationID && options.locationID.replace(/\\^/g, '&')) || '';\n\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.requestStreet = (options.requestStreet && options.requestStreet.replace(/\\^/g, '&')) || '';\n\n    let geocoderCoords = options.geocoderCoords;\n    if (M.utils.isString(geocoderCoords)) {\n      geocoderCoords = geocoderCoords.split(',');\n      geocoderCoords = [Number.parseFloat(geocoderCoords[0]),\n        Number.parseFloat(geocoderCoords[1]),\n      ];\n    }\n    /**\n     * Geocoder reverse coordinates\n     *\n     * @private\n     * @type {number}\n     */\n    this.geocoderCoords = geocoderCoords || [];\n\n    /**\n     * This variable indicates which entity types should be searched on Nomenclator service.\n     * @private\n     * @type {Array<string>}\n     */\n    if (options.nomenclatorSearchType) {\n      if (Array.isArray(options.nomenclatorSearchType)) {\n        this.nomenclatorSearchType = options.nomenclatorSearchType;\n      } else {\n        this.nomenclatorSearchType = options.nomenclatorSearchType.split(',');\n      }\n    } else {\n      this.nomenclatorSearchType = IGNSEARCH_TYPES_CONFIGURATION;\n    }\n\n    /**\n     * This variable indicates whether reverse geocoder button is activated.\n     * @private\n     * @type {Boolean}\n     */\n    this.reverseActivated = false;\n\n    /**\n     * Indicates if you want to use proxy in requests\n     * @private\n     * @type {Number}\n     */\n    this.useProxy = useProxy;\n\n    /**\n     * Stores the proxy state at plugin load time\n     * @private\n     * @type {Boolean}\n     */\n    this.statusProxy = statusProxy;\n\n    /**\n     * Position plugin\n     * @private\n     * @type {String}\n     */\n    this.positionPlugin = positionPlugin;\n\n    /**\n     * Map\n     */\n    this.map = map;\n  }\n\n  /**\n   * This function gets the initial lookup\n   *\n   * @function\n   * @public\n   * @api\n   * @param {Node} html - Panel html\n   */\n  initializateAddress(html) {\n    if ((this.locationID && this.locationID.length > 0) || (this.requestStreet &&\n        this.requestStreet.length > 0) ||\n      (this.geocoderCoords && this.geocoderCoords.length === 2)) {\n      this.active(html);\n    }\n    if (this.locationID && this.locationID.length > 0) {\n      this.createGeometryStyles();\n      this.drawNomenclatorResult(this.locationID, false);\n    }\n    if (this.requestStreet && this.requestStreet.length > 0) {\n      M.proxy(this.useProxy);\n      M.remote.get(this.requestStreet).then((res) => {\n        const geoJsonData = res.text.substring(9, res.text.length - 1);\n        this.createGeometryStyles();\n        this.drawGeocoderResult(geoJsonData);\n      }).catch();\n      M.proxy(this.statusProxy);\n    }\n    if (this.geocoderCoords && this.geocoderCoords.length === 2) {\n      const reprojCoords = this.getImpl().reproject('EPSG:4326', this.geocoderCoords);\n      this.showReversePopUp({\n        coord: reprojCoords,\n        fake: true,\n      }, true);\n    }\n  }\n\n  /**\n   * This function active control\n   *\n   * @public\n   * @function\n   * @param {Node} html\n   * @api\n   */\n  active(html) {\n    this.html_ = html;\n    const ignsearchactive = this.html_.querySelector('#m-locator-ignsearch').classList.contains('activated');\n    this.deactive();\n    if (!ignsearchactive) {\n      if (this.positionPlugin === 'TC') {\n        document.querySelector('.m-plugin-locator').classList.remove('m-plugin-locator-tc');\n        document.querySelector('.m-plugin-locator').classList.add('m-plugin-locator-tc-withpanel');\n      }\n      this.html_.querySelector('#m-locator-ignsearch').classList.add('activated');\n      const panel = M.template.compileSync(template, {\n        vars: {\n          reverse: this.reverse,\n          placeholder: this.servicesToSearch === 'n' ? getValue('toponimo') : getValue('search_direction'),\n          translations: {\n            search_direction: getValue('search_direction'),\n            get_direction: getValue('get_direction'),\n            clean: getValue('clean'),\n          },\n        },\n      });\n      document.querySelector('#div-contenedor-locator').appendChild(panel);\n      this.resultsBox = this.html_.querySelector('#m-ignsearch-panel>#m-ignsearchlocator-results');\n      this.searchInput = this.html_.querySelector('#m-ignsearch-panel>#m-ignsearchlocator-search-input');\n      this.addEvents();\n    }\n  }\n\n  /**\n   * This function deactive control\n   *\n   * @public\n   * @function\n   * @api\n   */\n  deactive() {\n    this.html_.querySelector('#m-locator-ignsearch').classList.remove('activated');\n    const panel = this.html_.querySelector('#m-ignsearch-panel');\n    if (panel) {\n      this.clearResults();\n      document.querySelector('#div-contenedor-locator').removeChild(panel);\n    }\n  }\n\n  /**\n   * This function add events to html\n   *\n   * @public\n   * @function\n   * @api\n   */\n  addEvents() {\n    this.html_.querySelector('#m-ignsearch-panel>#m-ignsearchlocator-search-input').addEventListener('keyup', e => this.createTimeout(e));\n    this.html_.querySelector('#m-ignsearch-panel>#m-ignsearchlocator-search-input').addEventListener('click', () => this.openRecentsResults());\n    if (this.reverse) {\n      this.html_.querySelector('#m-ignsearch-panel>#m-ignsearchlocator-search-input').style.width = '160px';\n      this.html_.querySelector('#m-ignsearch-panel>#m-ignsearchlocator-locate-button').addEventListener('click', this.activateDeactivateReverse.bind(this));\n      this.clickReverseEvent = this.map.on(M.evt.CLICK, e => this.showReversePopUp(e));\n    }\n    this.html_.querySelector('#m-ignsearch-panel>#m-ignsearchlocator-clean-button').addEventListener('click', () => this.clearResults());\n  }\n\n  /**\n   * This function toggles reverse geocoder button activation.\n   *\n   * @public\n   * @function\n   * @api\n   */\n  activateDeactivateReverse() {\n    if (!this.reverseActivated) {\n      this.invokeEscKey();\n      this.reverseActivated = true;\n      this.html_.querySelector('#m-ignsearchlocator-locate-button').style.color = '#71a7d3';\n      document.addEventListener('keyup', this.checkEscKey.bind(this));\n      document.getElementsByTagName('body')[0].style.cursor = `url(${M.utils.concatUrlPaths([M.config.THEME_URL, '/img/pushpin.svg'])}) 0 20, auto`;\n    } else {\n      this.reverseActivated = false;\n      this.html_.querySelector('#m-ignsearchlocator-locate-button').style.color = '#7A7A73';\n      document.removeEventListener('keyup', this.checkEscKey);\n      document.getElementsByTagName('body')[0].style.cursor = 'auto';\n    }\n  }\n\n  /**\n   * This function invoke \"Esc\" key\n   *\n   * @public\n   * @function\n   * @api\n   */\n  invokeEscKey() {\n    try {\n      document.dispatchEvent(new window.KeyboardEvent('keyup', {\n        key: 'Escape',\n        keyCode: 27,\n        code: '',\n        which: 69,\n        shiftKey: false,\n        ctrlKey: false,\n        metaKey: false,\n      }));\n    } catch (err) {\n      /* eslint-disable no-console */\n      console.error(err);\n    }\n  }\n\n  /**\n   * This function deactive option reverse when the user presses\n   * \"Esc\" key\n   *\n   * @function\n   * @public\n   * @param {Event} evt - Event\n   * @api\n   */\n  checkEscKey(evt) {\n    if (evt.key === 'Escape') {\n      this.reverseActivated = false;\n      this.html_.querySelector('#m-ignsearchlocator-locate-button').style.color = '#7A7A73';\n      document.removeEventListener('keyup', this.checkEscKey);\n      document.getElementsByTagName('body')[0].style.cursor = 'auto';\n    }\n  }\n\n  /**\n   * This function shows information tooltip on clicked point.\n   *\n   * @public\n   * @funcion\n   * @param {Event} e - Event\n   * @api\n   */\n  showReversePopUp(e, isGeocoderCoords = false) {\n    if (this.reverseActivated || isGeocoderCoords) {\n      // Reproject coordinates to ETRS89 on decimal grades (+ North latitude and East longitude)\n      const origin = this.map.getProjection().code;\n      const destiny = 'EPSG:4258';\n      const etrs89pointCoordinates = this.getImpl()\n        .reprojectReverse([e.coord[0], e.coord[1]], origin, destiny);\n      const params = `lon=${etrs89pointCoordinates[0]}&lat=${etrs89pointCoordinates[1]}`;\n      const urlToGet = `${this.urlReverse}?${params}`;\n      const mapCoordinates = e.coord;\n      this.geocoderCoords = etrs89pointCoordinates;\n      const dataCoordinates = [etrs89pointCoordinates[1], etrs89pointCoordinates[0]];\n      let fullAddress = '';\n      M.proxy(this.useProxy);\n      M.remote.get(urlToGet).then((res) => {\n        if (res.text) {\n          const returnData = JSON.parse(res.text);\n          fullAddress = this.createFullAddress(returnData);\n        } else {\n          fullAddress = '';\n        }\n        this.showPopUp(fullAddress, mapCoordinates, dataCoordinates, null, e, false);\n      });\n      M.proxy(this.statusProxy);\n    }\n  }\n\n  /**\n   * This function takes data from an entity and returns the complete address\n   *\n   * @function\n   * @public\n   * @param {string} jsonResult - json string with entity data\n   * @api\n   */\n  createFullAddress(jsonResult) {\n    const via = (jsonResult.tip_via === null ||\n      jsonResult.tip_via === undefined) ? '' : jsonResult.tip_via;\n    const address = (jsonResult.address === null ||\n      jsonResult.address === undefined) ? '' : jsonResult.address;\n    const portal = (jsonResult.portalNumber === null ||\n      jsonResult.portalNumber === undefined ||\n      jsonResult.portalNumber === 0) ? '' : jsonResult.portalNumber;\n    const muni = (jsonResult.muni === null ||\n      jsonResult.muni === undefined) ? '' : jsonResult.muni;\n    const province = (jsonResult.province === null ||\n      jsonResult.province === undefined) ? '' : jsonResult.province;\n    const extension = (jsonResult.extension === null ||\n      jsonResult.extension === undefined) ? '' : jsonResult.extension.trim();\n    let street = `${via} ${address} ${portal}`;\n    if (!M.utils.isNullOrEmpty(extension)) {\n      street += ` ${extension}`;\n    }\n    return `${street}, ${muni.toUpperCase()}, ${province.toUpperCase()}`;\n  }\n\n  /**\n   * This function sets a timeout between keypress and search.\n   *\n   * @public\n   * @function\n   * @param {e} event - Event that triggers the method\n   * @api\n   */\n  createTimeout(e) {\n    clearTimeout(typingTimer);\n    typingTimer = setTimeout(() => this.searchInputValue(e), 500);\n  }\n\n  /**\n   * This function open recent results\n   *\n   * @public\n   * @function\n   * @api\n   */\n  openRecentsResults() {\n    if (!this.html_.querySelector('#m-ignsearch-panel>#m-ignsearchlocator-search-input').value &&\n      !this.html_.querySelector('#m-ignsearchlocator-results-list')) {\n      const recents = window.localStorage.getItem('recents');\n      if (recents && recents.length > 0) {\n        const compiledResult = M.template.compileSync(results, {\n          vars: {\n            noresults: false,\n            places: JSON.parse(recents),\n            translations: {\n              noresults: getValue('exception.noresults'),\n            },\n          },\n        });\n        const elementList = compiledResult.querySelectorAll('li');\n        elementList.forEach((listElement) => {\n          listElement.addEventListener('click', () => {\n            this.goToLocation(listElement, true);\n          });\n        });\n        this.resultsBox.appendChild(compiledResult);\n      }\n    }\n  }\n\n  /**\n   * This function\n   * 1.- Takes user's input\n   * 2.- Searches for ocurrences on IGN sources\n   * 3.- Returns results as items in a drop-down list (returns address)\n   * 4.- Onclick on an item goes to its coordinates\n   *\n   * @public\n   * @function\n   * @param {event} e - Event that triggers this method\n   * @api\n   */\n  searchInputValue(e) {\n    const value = e.target.value.replace(',', ' ');\n    this.searchValue = value;\n    this.resultsBox.innerHTML = '';\n\n    if (value.length > 2) {\n      // Adds animation class during loading\n      this.resultsBox.classList.add('locator-icon-spinner');\n\n      this.nomenclatorCandidates = [];\n      this.geocoderCandidates = [];\n\n      this.nomenclatorFinished = false;\n      this.candidatesFinished = false;\n\n      // saves on allCandidates search results from Nomenclator (CommunicationPoolservlet)\n      this.getNomenclatorData(value, this.nomenclatorCandidates).then(() => {\n        this.nomenclatorFinished = true;\n        this.showCandidatesResults();\n      });\n\n      // saves on allCandidates search results from CartoCiudad (geocoder)\n      this.getCandidatesData(value, this.geocoderCandidates).then(() => {\n        this.candidatesFinished = true;\n        this.showCandidatesResults();\n      });\n    }\n  }\n\n  /**\n   * This function adds search coincidences on Nomenclator to array\n   *\n   * @public\n   * @function\n   * @param {string} inputValue - Location searched by user\n   * @param {Array <Object>} resultsArray - Search results\n   * @api\n   */\n  getNomenclatorData(inputValue, resultsArray) {\n    const newInputVal = window.encodeURIComponent(inputValue);\n    return new Promise((resolve) => {\n      if (this.servicesToSearch !== 'g') {\n        const params = `maxresults=${this.maxResults - 5}&name_equals=${newInputVal}`;\n        const urlToGet = `${this.urlAssistant}?${params}`;\n        M.proxy(this.useProxy);\n        M.remote.get(urlToGet).then((res) => {\n          const temporalData = (res.text !== '' && res.text !== null) ? JSON.parse(res.text) : { results: [] };\n          const returnData = temporalData.results;\n          for (let i = 0; i < returnData.length; i += 1) {\n            // avoid nameplaces not included in this.nomenclatorSearchType\n            if (this.nomenclatorSearchType.indexOf(returnData[i].type) >= 0) {\n              resultsArray.push(returnData[i]);\n            }\n          }\n          // move 'Núcleos de población' to start\n          for (let i = 0; i < resultsArray.length; i += 1) {\n            if (resultsArray[i].type === 'Núcleos de población') {\n              const thisElement = resultsArray.splice(i, 1);\n              resultsArray.splice(0, 0, thisElement);\n            }\n          }\n\n          resultsArray.forEach((elem) => {\n            // eslint-disable-next-line no-param-reassign\n            elem.cps = true;\n          });\n\n          resolve();\n        });\n        M.proxy(this.statusProxy);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * This function gets user input, searches for coincidences and adds each one to the given array.\n   *\n   * @public\n   * @function\n   * @param {string} inputValue - Search text written by user\n   * @param {Array<Object>} resultsArray - Search result candidates from IGN services\n   * @api\n   */\n  getCandidatesData(inputValue, resultsArray) {\n    const newInputVal = window.encodeURIComponent(inputValue);\n    return new Promise((resolve) => {\n      if (this.servicesToSearch !== 'n') {\n        let params = `q=${newInputVal}&limit=${this.maxResults}&no_process=${this.noProcess}`;\n        params += `&countrycode=${this.countryCode}&autocancel=true`;\n        const urlToGet = `${this.urlCandidates}?${params}`;\n        M.proxy(this.useProxy);\n        M.remote.get(urlToGet).then((res) => {\n          if (res.code === 404 || res.code === 500) {\n            M.dialog.error(getValue('exception.error_candidates'));\n          } else {\n            const returnData = JSON.parse(res.text.substring(9, res.text.length - 1));\n            for (let i = 0; i < returnData.length; i += 1) {\n              resultsArray.push(returnData[i]);\n            }\n          }\n          resolve();\n        });\n        M.proxy(this.statusProxy);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * This function show results of search\n   *\n   * @function\n   * @public\n   * @api\n   */\n  showCandidatesResults() {\n    this.allCandidates = [];\n    for (let i = 0; i < this.searchPosition.split(',').length; i += 1) {\n      if (this.searchPosition.split(',')[i] === 'nomenclator') {\n        for (let j = 0; j < this.nomenclatorCandidates.length; j += 1) {\n          this.allCandidates.push(this.nomenclatorCandidates[j]);\n        }\n      }\n      if (this.searchPosition.split(',')[i] === 'geocoder') {\n        for (let j = 0; j < this.geocoderCandidates.length; j += 1) {\n          this.allCandidates.push(this.geocoderCandidates[j]);\n        }\n      }\n    }\n\n    // Clears previous search\n    this.resultsBox.innerHTML = '';\n    // remove animation class and return to normal font size after loading\n    this.resultsBox.classList.remove('locator-icon-spinner');\n    const compiledResult = M.template.compileSync(results, {\n      vars: {\n        noresults: this.allCandidates.length === 0 &&\n          this.nomenclatorFinished && this.candidatesFinished,\n        places: this.allCandidates,\n        translations: {\n          noresults: getValue('exception.noresults'),\n        },\n      },\n    });\n    if (this.allCandidates.length > 0) {\n      const elementList = compiledResult.querySelectorAll('li');\n      elementList.forEach((listElement) => {\n        listElement.addEventListener('click', () => {\n          this.goToLocation(listElement);\n        });\n      });\n    }\n\n    this.resultsBox.appendChild(compiledResult);\n  }\n\n  /**\n   * This function zooms in clicked location and draws geometry\n   *\n   * @public\n   * @function\n   * @param {Object} listElement - Element clicked result information\n   * @param {Boolean} isRecentElement - True if the clicked item is from the recents list\n   * @api\n   */\n  goToLocation(listElement, isRecentElement = false) {\n    this.currentElement = listElement;\n    const text = listElement.querySelector('#info').innerHTML;\n    this.html_.querySelector('#m-ignsearchlocator-search-input').value = text;\n    const candidates = isRecentElement ? JSON.parse(window.localStorage.getItem('recents')) : this.allCandidates;\n    const selectedObject = candidates.filter(element => element.id === this.currentElement.getAttribute('id'))[0];\n    this.setRecents(selectedObject);\n    this.createGeometryStyles();\n    // if item comes from geocoder\n    if (Object.prototype.hasOwnProperty.call(selectedObject, 'address')) {\n      this.getFindData(selectedObject).then((geoJsonData) => {\n        if (geoJsonData) {\n          this.drawGeocoderResult(geoJsonData);\n          if (geoJsonData.includes('\"tip_via\":null') && (geoJsonData.includes('\"type\":\"Municipio\"') || geoJsonData.includes('\"type\":\"municipio\"') || geoJsonData.includes('\"type\":\"Provincia\"') || geoJsonData.includes('\"type\":\"provincia\"') || geoJsonData.includes('\"type\":\"comunidad autonoma\"'))) {\n            this.map.removePopup();\n          }\n        }\n      });\n    } else { // if item comes from nomenclator\n      this.map.removePopup();\n      this.drawNomenclatorResult(selectedObject.id);\n    }\n    this.resultsBox.innerHTML = '';\n  }\n\n  /**\n   * This function set search\n   *\n   * @public\n   * @function\n   * @param {Node} element - Element clicked\n   * @api\n   */\n  setRecents(element) {\n    let recents = JSON.parse(window.localStorage.getItem('recents'));\n\n    if (!recents || recents.length === 0) {\n      recents = [element];\n    } else if (!this.checkDuplicateRecent(element)) {\n      if (recents.length === 5) {\n        recents.pop();\n        recents.unshift(element);\n      } else {\n        recents.unshift(element);\n      }\n    }\n    window.localStorage.setItem('recents', JSON.stringify(recents));\n  }\n\n  /**\n   * This function check duplicates results\n   *\n   * @public\n   * @function\n   * @param {Node} element - Element clicked\n   * @api\n   */\n  checkDuplicateRecent(element) {\n    const recents = JSON.parse(window.localStorage.getItem('recents'));\n    let found = false;\n\n    recents.forEach((r) => {\n      if (r.id === element.id) {\n        found = true;\n      }\n    });\n\n    return found;\n  }\n\n  /**\n   * This function creates some geometry styles.\n   *\n   * @public\n   * @function\n   * @api\n   */\n  createGeometryStyles() {\n    // Shows pin on drawn point\n    if (this.pointStyle === 'pinAzul') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/marker.svg']),\n          scale: 1.4,\n          fill: {\n            color: '#71a7d3',\n          },\n          stroke: {\n            width: 30,\n            color: 'white',\n          },\n          anchor: [0.5, 1],\n        },\n      });\n    } else if (this.pointStyle === 'pinRojo') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/pinign.svg']),\n          anchor: [0.5, 1],\n        },\n      });\n    } else if (this.pointStyle === 'pinMorado') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/m-pin-24.svg']),\n          anchor: [0.5, 1],\n        },\n      });\n    }\n    // Style for hiding geometry\n    this.simple = new M.style.Polygon({\n      fill: {\n        color: 'black',\n        opacity: 0,\n      },\n    });\n  }\n\n  /**\n   * This function removes last search layer and adds new layer\n   * with current result (from nomenclator) features to map and zooms in result.\n   *\n   * @public\n   * @function\n   * @param {string} locationId - id of the location object\n   * @param {boolean} zoomIn - True for zoom\n   * @api\n   */\n  drawNomenclatorResult(locationId, zoomIn = true) {\n    this.requestStreet = '';\n    this.requestPlace = M.utils.addParameters(this.urlDispatcher, {\n      request: 'OpenQuerySource',\n      query: `<ogc:Filter><ogc:FeatureId fid=\"${locationId}\"/></ogc:Filter>`,\n      sourcename: `${this.urlPrefix}communicationsPoolServlet/sourceAccessWFS-INSPIRE-NGBE.rdf`,\n      outputformat: 'application/json',\n    });\n    this.locationID = locationId;\n    M.proxy(this.useProxy);\n    M.remote.get(this.requestPlace).then((res) => {\n      const latLngString = JSON.parse(res.text).results[0].location;\n      const resultTitle = JSON.parse(res.text).results[0].title;\n      const latLngArray = latLngString.split(' ');\n      const latitude = parseFloat(latLngArray[0]);\n      const longitude = parseFloat(latLngArray[1]);\n      this.map.removeLayers(this.clickedElementLayer);\n      const newGeojson = {\n        name: 'searchresult',\n        source: {\n          type: 'FeatureCollection',\n          features: [{\n            type: 'Feature',\n            geometry: {\n              type: 'Point',\n              coordinates: [\n                longitude, latitude,\n              ],\n            },\n            properties: {\n              name: resultTitle,\n            },\n          }],\n        },\n      };\n      this.clickedElementLayer = new M.layer.GeoJSON(newGeojson, { displayInLayerSwitcher: false });\n      this.clickedElementLayer.displayInLayerSwitcher = false;\n      this.clickedElementLayer.setStyle(this.point);\n\n      // Change zIndex value\n      this.clickedElementLayer.setZIndex(9999999999999999999);\n      // Stops showing polygon geometry\n      if (!this.resultVisibility) {\n        this.clickedElementLayer.setStyle(this.simple);\n      }\n      this.map.addLayers(this.clickedElementLayer);\n      if (zoomIn === true) {\n        this.zoomInLocation('n', 'Point', this.zoom);\n      }\n    });\n    M.proxy(this.statusProxy);\n  }\n\n  /**\n   * This function zooms in MaxExtent of clicked element\n   *\n   * @public\n   * @function\n   * @param {string} service - { 'g' | 'n' }\n   * @param {string} type - Type of geometry in which we zoom\n   * @param {number} zoom - Zoom\n   * @api\n   */\n  zoomInLocation(service, type, zoom) {\n    if (this.html_) {\n      this.resultsList = this.html_.querySelector('#m-ignsearchlocator-results-list');\n    }\n    if (this.clickedElementLayer instanceof M.layer.Vector) {\n      if (service === 'n' && type === 'Point') {\n        this.clickedElementLayer.calculateMaxExtent().then((extent) => {\n          this.map.setBbox(extent);\n          this.map.setZoom(zoom);\n          this.fire('ignsearchlocator:entityFound', [extent]);\n        });\n      } else {\n        const extent = this.clickedElementLayer.getImpl().getOL3Layer().getSource().getExtent();\n        this.map.setBbox(extent);\n        this.fire('ignsearchlocator:entityFound', [extent]);\n      }\n    }\n  }\n\n  /**\n   * This function gets address of selected item and returns geojson data (with coordinates)\n   * Only for Geocoder service\n   *\n   * @public\n   * @function\n   * @param {Node} selectedObject - Element from drop-down list(\"li\")\n   * @api\n   */\n  getFindData(selectedObject) {\n    return new Promise((resolve) => {\n      const id = `&id=${selectedObject.id}`;\n      const type = `&type=${selectedObject.type}`;\n      const portal = (selectedObject.portalNumber !== 0 &&\n          selectedObject.portalNumber !== undefined) ?\n        `&portal=${selectedObject.portalNumber}` : '';\n      const extension = (selectedObject.extension !== 0 &&\n          selectedObject.extension !== undefined) ?\n        `&extension=${selectedObject.extension}` : '';\n      const via = selectedObject.tip_via !== '' ? `&tip_via=${selectedObject.tip_via}` : '';\n      let address = selectedObject.address;\n\n      if (address.includes('(')) {\n        const parenthesisIndex = address.indexOf('(');\n        address = address.substring(0, parenthesisIndex);\n      }\n      address = window.encodeURIComponent(address);\n      const params = `${type}${via}${id}${portal}${extension}`;\n      const urlToGet = `${this.urlFind}?q=${address}${params}`;\n      this.urlParse = urlToGet;\n      this.requestStreet = urlToGet;\n      this.locationID = '';\n      M.proxy(this.useProxy);\n      M.remote.get(urlToGet).then((res) => {\n        if (res.code === 404 || res.code === 500) {\n          M.dialog.error(getValue('exception.error_findjsonp'));\n          resolve();\n        } else {\n          const geoJsonData = res.text.substring(9, res.text.length - 1);\n          resolve(geoJsonData);\n        }\n      });\n      M.proxy(this.statusProxy);\n    });\n  }\n\n  /**\n   * This function removes last search layer and adds new layer with current result (from geocoder)\n   * features to map, zooms in result, edits popup information and shows a message saying\n   *  if it's a perfect result or an approximation.\n   *\n   * @public\n   * @function\n   * @param {Object} geoJsonData - Clicked result object\n   * @api\n   */\n  drawGeocoderResult(geoJsonData) {\n    this.map.removeLayers(this.clickedElementLayer);\n    const urlSinJSON = geoJsonData;\n    const json = JSON.parse(urlSinJSON);\n    const olFeature = this.getImpl().readFromWKT(json.geom, urlSinJSON);\n    const mFeature = M.impl.Feature.olFeature2Facade(olFeature);\n    const properties = JSON.parse(urlSinJSON);\n    // Center coordinates\n    this.coordinates = `${properties.lat}, ${properties.lng}`;\n    // New layer with geometry\n    this.clickedElementLayer = new M.layer.GeoJSON({\n      name: 'searchresult',\n      source: {\n        type: 'FeatureCollection',\n        features: [],\n      },\n    }, { displayInLayerSwitcher: false });\n\n    this.clickedElementLayer.displayInLayerSwitcher = false;\n    const type = mFeature.getGeometry().type;\n\n    this.clickedElementLayer.on(M.evt.LOAD, () => {\n      this.clickedElementLayer.addFeatures(mFeature);\n      this.zoomInLocation('g', type, this.zoom);\n    });\n    this.map.addLayers(this.clickedElementLayer);\n    if (type === 'Point') {\n      this.clickedElementLayer.setStyle(this.point);\n    }\n\n    if (type.indexOf('Polygon') > -1 || type.indexOf('Collection') > -1) {\n      this.clickedElementLayer.setStyle(new M.style.Polygon({\n        fill: {\n          color: '#3399CC',\n          opacity: 0,\n        },\n        stroke: {\n          color: '#3399CC',\n          width: 2,\n        },\n      }));\n    }\n\n    // Change zIndex value\n    this.clickedElementLayer.setZIndex(99999999999999999);\n    // Stops showing polygon geometry\n    if (!this.resultVisibility) {\n      this.clickedElementLayer.setStyle(this.simple);\n    }\n\n    // // show popup for streets\n    M.config.MOVE_MAP_EXTRACT = false;\n    if (properties.type === 'callejero' || properties.type === 'portal') {\n      const fullAddress = this.createFullAddress(properties);\n      const coordinates = [properties.lat, properties.lng];\n      const perfectResult = properties.state;\n      this.showSearchPopUp(fullAddress, coordinates, perfectResult);\n    } else if (this.popup !== undefined) {\n      this.map.removePopup(this.popup);\n    }\n    M.config.MOVE_MAP_EXTRACT = true;\n  }\n\n  /**\n   * This function inserts a popUp with information about the searched location\n   * (and whether it 's an exact result or an approximation)\n   *\n   * @param {string} fullAddress - Location address(street, portal, etc.)\n   * @param {Array} coordinates - Latitude[0] and longitude[1] coordinates\n   * @param {boolean} exactResult - Indicating if the given result is a perfect match\n   * @param {Object} e\n   * @function\n   * @public\n   * @api\n   */\n  showSearchPopUp(fullAddress, coordinates, exactResult, e = {}) {\n    const destinyProj = this.map.getProjection().code;\n    const destinySource = 'EPSG:4326';\n    const newCoordinates = this.getImpl()\n      .reprojectReverse([coordinates[1], coordinates[0]], destinySource, destinyProj);\n    let exitState;\n    if (exactResult !== 1) {\n      exitState = getValue('aprox');\n    } else {\n      exitState = getValue('exact');\n    }\n    this.showPopUp(fullAddress, newCoordinates, coordinates, exitState, e);\n  }\n\n  /**\n   * This function inserts a popup on the map with information about its location.\n   *\n   * @param {string} fullAddress - Location address(street, portal, etc.)\n   * @param {Array} mapCoordinates - Latitude[0] and longitude[1] coordinates on map projection\n   * @param {Array} featureCoordinates - Latitude[0] and longitude[1] coordinates from feature\n   * @param {string} exitState - Indicating if the given result is a perfect match\n   * @param {Object} e - Object\n   * @param {boolean} hasOffset - Indicating if it has offset\n   * @public\n   * @function\n   * @api\n   */\n  showPopUp(\n    fullAddress, mapcoords, featureCoordinates, exitState = null, e = {},\n    hasOffset = true,\n  ) {\n    const featureTabOpts = { content: '', title: '' };\n    if (exitState !== null) {\n      featureTabOpts.content += `<div><b>${exitState}</b></div>`;\n    }\n\n    featureTabOpts.content += `<div><b>${fullAddress !== undefined ? fullAddress : '-'}</b></div><br/>\n                <div class='ignsearchlocator-popup'><b>Lon: </b>${featureCoordinates[1].toFixed(6)} </div>\n                <div class='ignsearchlocator-popup'><b>Lat: </b>${featureCoordinates[0].toFixed(6)}</div>`;\n\n\n    const myPopUp = new M.Popup({ panMapIfOutOfView: !e.fake });\n    myPopUp.addTab(featureTabOpts);\n    this.map.addPopup(myPopUp, [\n      mapcoords[0],\n      mapcoords[1],\n    ]);\n    this.popup = myPopUp;\n\n    if (hasOffset && this.pointStyle === 'pinAzul') {\n      this.popup.getImpl().setOffset([0, -30]);\n    } else if (hasOffset && this.pointStyle === 'pinRojo') {\n      this.popup.getImpl().setOffset([2, -30]);\n    } else if (hasOffset && this.pointStyle === 'pinMorado') {\n      this.popup.getImpl().setOffset([1, -20]);\n    }\n    this.lat = mapcoords[1];\n    this.lng = mapcoords[0];\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof IGNSearchLocatorControl;\n  }\n\n  /**\n   * This function clears input values\n   *\n   * @public\n   * @function\n   * @api\n   */\n  clearResults() {\n    this.searchInput.value = '';\n    this.resultsBox.innerHTML = '';\n    this.searchValue = '';\n    if (this.reverse) {\n      this.reverseActivated = false;\n      this.html_.querySelector('#m-ignsearchlocator-locate-button').style.color = '#7A7A73';\n      document.removeEventListener('keyup', this.checkEscKey);\n      document.getElementsByTagName('body')[0].style.cursor = 'auto';\n    }\n    this.map.removeLayers(this.clickedElementLayer);\n    this.map.removePopup(this.map.getPopup());\n  }\n\n  /**\n   * This function destroys this control\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    document.getElementsByTagName('body')[0].style.cursor = 'auto';\n    document.removeEventListener('keyup', this.checkEscKey);\n    this.map.removeLayers(this.clickedElementLayer);\n    this.map.removePopup(this.map.getPopup());\n  }\n}\n","import en from './en';\nimport es from './es';\n\n/**\n * Default object with es and en translate.\n *\n * @const\n * @type {object}\n */\nconst translations = {\n  en,\n  es,\n};\n\nconst getLang = () => {\n  let res = 'es';\n  if (typeof M.language.getLang === 'function') {\n    res = M.language.getLang();\n  }\n\n  return res;\n};\n\n/**\n * This function sets a new language translate.\n * @param {string} lang\n * @param {JSON} json\n * @public\n * @api\n */\nexport const addTranslation = (lang, json) => {\n  translations[lang] = json;\n};\n\n/**\n * This function gets a language translate.\n *\n * @param {string} lang\n * @return {JSON}\n * @public\n * @api\n */\nexport const getTranslation = (lang) => {\n  if (lang === 'es' || lang === 'en') {\n    return translations[lang];\n  }\n  return M.language.getTranslation(lang).locator;\n};\n\n/**\n * This function gets a language value from key\n *\n * @public\n * @param {string}\n * @param {string}\n * @return {string}\n * @public\n * @api\n */\n\nexport const getValue = (keyPath, lang = getLang()) => {\n  const translation = getTranslation(lang);\n  let value = '';\n  if (M.utils.isNullOrEmpty(translation)) {\n    /* eslint-disable no-console */\n    console.warn(`The translation '${lang}' has not been defined.`);\n  } else {\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\n  }\n\n  return value;\n};\n","/**\n * @module M/impl/control/InfoCatastroControl\n */\n\nexport default class InfoCatastroControl extends M.impl.Control {\n  /**\n   * This function reprojects given coordinates to given projection.\n   * @private\n   * @function\n   * @param { Array <number> } coordinates - [x,y]\n   * @param { string } source - 'EPSG:4326'\n   * @param { string } destiny - 'EPSG:4326'\n   */\n  reprojectReverse(coordinates, source, destiny) {\n    const transformFunc = ol.proj.getTransform(source, destiny);\n    return transformFunc(coordinates);\n  }\n}\n","/**\n * @module M/control/InfoCatastroControl\n */\n/* eslint-disable no-restricted-syntax */\nimport template from 'templates/infocatastro';\nimport InfoCatastroImpl from '../../impl/ol/js/infocatastrocontrol';\nimport { getValue } from './i18n/language';\n\nexport default class InfoCatastroControl extends M.Control {\n  /**\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(map, zoom, pointStyle, options, positionPlugin) {\n    if (M.utils.isUndefined(InfoCatastroImpl)) {\n      M.exception(getValue('exception.impl_infocatastro'));\n    }\n    const impl = new InfoCatastroImpl();\n    super(impl, 'InfoCatastroImpl');\n\n    /**\n     * CMC_url\n     * @private\n     * @type {String}\n     */\n    const defectCMC = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCallejeroCodigos.asmx/ConsultaMunicipioCodigos';\n    this.CMC_url = options.CMC_url || defectCMC;\n\n    /**\n     * DNPPP_url\n     * @private\n     * @type {String}\n     */\n    const defectDNPP = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCallejeroCodigos.asmx/Consulta_DNPPP_Codigos';\n    this.DNPPP_url = options.DNPPP_url || defectDNPP;\n\n    /**\n     * CPMRC_url\n     * @private\n     * @type {String}\n     */\n    const defectCPMRC = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCoordenadas.asmx/Consulta_CPMRC';\n    this.CPMRC_url = options.CPMRC_url || defectCPMRC;\n\n    /**\n     * catastroWMS\n     * @private\n     * @type {string}\n     */\n    this.cadastreWMS = options.cadastreWMS || 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCoordenadas.asmx/Consulta_RCCOOR';\n\n    /**\n     * zoom\n     * @private\n     * @type {number}\n     */\n    this.zoom = zoom;\n\n    /**\n     * Type of icon to display when a punctual type result is found\n     * @private\n     * @type {string}\n     */\n    this.pointStyle = pointStyle;\n\n    /**\n     * Map\n     */\n    this.map = map;\n\n    /**\n     * Province code\n     * @private\n     * @type {string}\n     */\n    this.provincecode = null;\n\n    /**\n     * Select element for Provincias\n     * @private\n     * @type {HTMLElement}\n     */\n    this.selectProvincias = null;\n\n    /**\n     * Select element for Municipios\n     * @private\n     * @type {HTMLElement}\n     */\n    this.selectMunicipios = null;\n\n    /**\n     * Input element for Poligono\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputPoligono = null;\n\n    /**\n     * Input element for Parcela\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputParcela = null;\n\n    /**\n     * Input element for Referencia Catastral\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputRefCatastral = null;\n\n    /**\n     * Position plugin\n     * @private\n     * @type {String}\n     */\n    this.positionPlugin = positionPlugin;\n\n    /**\n     * Tabs\n     */\n    this.tabs = null;\n    this.tabpanels = null;\n    this.activeTab = null;\n  }\n\n  /**\n   * This function active control\n   *\n   * @public\n   * @function\n   * @param {Node} html\n   * @api\n   */\n  active(html) {\n    this.html_ = html;\n    const infocatastroactive = html.querySelector('#m-locator-infocatastro').classList.contains('activated');\n    this.deactive();\n    if (!infocatastroactive) {\n      if (this.positionPlugin === 'TC') {\n        document.querySelector('.m-plugin-locator').classList.remove('m-plugin-locator-tc');\n        document.querySelector('.m-plugin-locator').classList.add('m-plugin-locator-tc-withpanel');\n      }\n      this.html_.querySelector('#m-locator-infocatastro').classList.add('activated');\n      const panel = M.template.compileSync(template, {\n        vars: {\n          translations: {\n            plot: getValue('plot'),\n            searchplot: getValue('searchplot'),\n            searchcadastre: getValue('searchcadastre'),\n            province: getValue('province'),\n            selectprov: getValue('selectprov'),\n            municipality: getValue('municipality'),\n            selectmuni: getValue('selectmuni'),\n            estate: getValue('estate'),\n            search: getValue('search'),\n            clean: getValue('clean'),\n            refCastatro: getValue('refCastatro'),\n            insertCadastre: getValue('insertCadastre'),\n            notaRef: getValue('notaRef'),\n            consultReference: getValue('consultReference'),\n          },\n        },\n      });\n      document.querySelector('#div-contenedor-locator').appendChild(panel);\n\n      // Tabs\n      this.tabs = this.html_.querySelectorAll('[role=tab]');\n      this.activeTab = this.html_.querySelector('[role=tab][aria-selected=true]');\n      this.tabpanels = this.html_.querySelectorAll('[role=tabpanel]');\n\n      for (const tab of this.tabs) {\n        tab.addEventListener('click', (e) => {\n          e.preventDefault();\n          this.setActiveTab(tab.getAttribute('aria-controls'));\n        });\n        tab.addEventListener('keyup', (e) => {\n          if (e.keyCode === 13 || e.keyCode === 32) { // return or space\n            e.preventDefault();\n            this.setActiveTab(tab.getAttribute('aria-controls'));\n          }\n        });\n      }\n      this.initParams();\n\n      // Buscar parcela\n      const buttonParcelSearch = this.html_.querySelector('button#m-infocatastro-searchParams');\n      buttonParcelSearch.addEventListener('click', e => this.onParamsSearch(e));\n\n      // Limpiar (tab parcela)\n      const buttonParcelClean = this.html_.querySelector('button#m-infocatastro-parcela-limpiar');\n      buttonParcelClean.addEventListener('click', () => this.clearResults(true, false));\n\n      // Buscar catastro\n      const buttonCatastroSearch = this.html_.querySelector('button#m-infocatastro-refCatastral');\n      buttonCatastroSearch.addEventListener('click', this.onRCSearch.bind(this));\n\n      // Consultar referencia\n      const buttonParamsConsultRef = this.html_.querySelector('button#m-infocatastro-consulRef');\n      buttonParamsConsultRef.addEventListener('click', this.onRCConsult.bind(this));\n\n      // Eliminar catastro\n      const buttonCatastro = this.html_.querySelector('button#m-infocatastro-catastro-limpiar');\n      buttonCatastro.addEventListener('click', () => this.clearResults(false, true));\n    }\n  }\n\n  /**\n   * This function change active tab\n   *\n   * @function\n   * @public\n   * @api\n   * @param {string} id ID of tab click\n   */\n  setActiveTab(id) {\n    for (const tab of this.tabs) {\n      if (tab.getAttribute('aria-controls') === id) {\n        tab.setAttribute('aria-selected', 'true');\n        tab.focus();\n        this.activeTab = tab;\n      } else {\n        tab.setAttribute('aria-selected', 'false');\n      }\n    }\n\n    for (const tabpanel of this.tabpanels) {\n      if (tabpanel.getAttribute('id') === id) {\n        tabpanel.setAttribute('aria-expanded', 'true');\n      } else {\n        tabpanel.setAttribute('aria-expanded', 'false');\n      }\n    }\n  }\n\n  /**\n   * This function deactive control\n   *\n   * @public\n   * @function\n   * @param {Node} html\n   * @api\n   */\n  deactive() {\n    this.html_.querySelector('#m-locator-infocatastro').classList.remove('activated');\n    const panel = this.html_.querySelector('#m-infocatastro-panel');\n    if (panel) {\n      this.clearResults(true, true);\n      document.querySelector('#div-contenedor-locator').removeChild(panel);\n    }\n  }\n\n  /**\n   * This function initializes parameters and event listeners\n   *\n   * @public\n   * @function\n   * @api\n   */\n  initParams() {\n    this.selectProvincias = this.html_.querySelector('#m-infocatastro-coordinatesSystemParcela>select#m-searchParamsProvincia-select');\n    this.selectProvincias.addEventListener('change', evt => this.onProvinciaSelect(evt, null));\n    if (this.provincecode !== null) {\n      this.onProvinciaSelect(null, this.provincecode, this.selectMunicipios);\n    }\n\n    this.selectMunicipios = this.html_.querySelector('#m-infocatastro-coordinatesSystemParcela>select#m-searchParamsMunicipio-select');\n    this.inputPoligono = this.html_.querySelector('#m-infocatastro-estatePlot>#m-searchParamsPoligono-input');\n    this.inputParcela = this.html_.querySelector('#m-infocatastro-estatePlot>#m-searchParamsParcela-input');\n    this.inputRefCatastral = this.html_.querySelector('#m-infocatastro-coordinatesSystemRefCatastral>#m-refCatastral-input');\n  }\n\n  /**\n   * This function clears drawn geometry from map and inputs.\n   *\n   * @public\n   * @function\n   * @param {boolean} clearParcela - Indicating if it clears inputs from tab \"Buscar Parcela\"\n   * @param {boolean} clearCatastro - Indicating if it clears inputs from tab \"Buscar Catastro\"\n   * @api\n   */\n  clearResults(clearParcela = true, clearCatastro = true) {\n    if (clearParcela) {\n      this.selectProvincias.value = '0';\n      this.provincecode = '0';\n      this.clearMunicipiosSelect();\n      this.inputPoligono.value = null;\n      this.inputParcela.value = null;\n      const layer = this.map.getLayers().find(l => l.name === 'coordinateparcel');\n      this.map.removeLayers(layer);\n    }\n    if (clearCatastro) {\n      this.inputRefCatastral.value = null;\n      const layer = this.map.getLayers().find(l => l.name === 'coordinatecatastro');\n      this.map.removeLayers(layer);\n      this.map.removePopup(this.map.getPopup());\n    }\n  }\n\n  /**\n   * This function destroys this control\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    if (this.html_ && this.html_.querySelector('button#m-infocatastro-consulRef')) {\n      this.html_.querySelector('button#m-infocatastro-consulRef').removeEventListener('click', this.onRCConsult);\n    }\n    const layer = this.map.getLayers().filter(l => l.name === 'coordinatecatastro' || l.name === 'coordinateparcel');\n    this.map.removeLayers(layer);\n    this.map.removePopup(this.map.getPopup());\n  }\n\n  /**\n   * Handler for selecting an option on Provincia select\n   *\n   * @public\n   * @function\n   * @param {Event} e - Event\n   * @param {string} idprov - Province code of select\n   * @param {string} mun - Municipality code of select\n   * @api\n   */\n  onProvinciaSelect(e, idprov, mun) {\n    let provinceCode = null;\n    if (e != null) {\n      const elt = e.target;\n      provinceCode = elt.value;\n    } else {\n      provinceCode = idprov;\n    }\n    this.clearMunicipiosSelect();\n    if (provinceCode !== '0') {\n      M.remote.get(this.CMC_url, {\n        CodigoProvincia: provinceCode,\n        CodigoMunicipio: '',\n        CodigoMunicipioIne: '',\n      }).then((res) => {\n        this.loadMunicipiosSelect(res, mun);\n      });\n    }\n  }\n\n  /**\n   * Clears options set to Municipios select\n   *\n   * @public\n   * @function\n   * @api\n   */\n  clearMunicipiosSelect() {\n    this.selectMunicipios = this.html_.querySelector('#m-infocatastro-coordinatesSystemParcela>select#m-searchParamsMunicipio-select');\n    while (this.selectMunicipios.firstChild) {\n      this.selectMunicipios.removeChild(this.selectMunicipios.firstChild);\n    }\n    const option = document.createElement('option');\n    option.value = '0';\n    option.innerHTML = getValue('selectmuni');\n    this.selectMunicipios.appendChild(option);\n  }\n\n  /**\n   * Loads and renders options set to Municipios select\n   *\n   * @public\n   * @function\n   * @param {Object} response - Response\n   * @param {string} mun - Municipality code of select\n   * @api\n   */\n  loadMunicipiosSelect(response, mun) {\n    if ((response.code === 200) && (response.error === false)) {\n      const rootElement = response.xml.getElementsByTagName('consulta_municipiero')[0];\n      const rootMunicipios = rootElement.getElementsByTagName('municipiero')[0];\n      const muniNodes = rootMunicipios.getElementsByTagName('muni');\n      for (let i = 0; i < muniNodes.length; i += 1) {\n        const option = document.createElement('option');\n        const locat = muniNodes[i].getElementsByTagName('locat')[0];\n        option.value = locat.getElementsByTagName('cmc')[0].childNodes[0].nodeValue;\n        option.innerHTML = muniNodes[i].getElementsByTagName('nm')[0].childNodes[0].nodeValue;\n        this.selectMunicipios.appendChild(option);\n      }\n      if (mun !== undefined && mun !== null) {\n        this.selectMunicipios.value = this.municipalityvalue;\n      }\n    } else {\n      M.dialog.error(getValue('exception.mapeaerror'));\n    }\n  }\n\n  /**\n   * Handler for search with params button\n   *\n   * @public\n   * @function\n   * @param {Event} evt - Event\n   * @api\n   */\n  onParamsSearch(evt) {\n    evt.preventDefault();\n    this.clearResults(false, true);\n    this.inputPoligono = this.html_.querySelector('#m-infocatastro-estatePlot>#m-searchParamsPoligono-input');\n    this.inputParcela = this.html_.querySelector('#m-infocatastro-estatePlot>#m-searchParamsParcela-input');\n\n    if ((evt.type !== 'keyup') || (evt.keyCode === 13)) {\n      if (M.utils.isNullOrEmpty(this.selectProvincias.value) || this.selectProvincias.value === '0') {\n        M.dialog.info(getValue('exception.no_province'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.selectMunicipios.value) || this.selectMunicipios.value === '0') {\n        M.dialog.info(getValue('exception.no_mun'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.inputPoligono.value)) {\n        M.dialog.info(getValue('exception.no_polygon'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.inputParcela.value)) {\n        M.dialog.info(getValue('exception.no_parcel'));\n        return;\n      }\n\n      const searchUrl = M.utils.addParameters(this.DNPPP_url, {\n        CodigoProvincia: this.selectProvincias.value,\n        CodigoMunicipio: this.selectMunicipios.value,\n        CodigoMunicipioINE: '',\n        Poligono: this.inputPoligono.value,\n        Parcela: this.inputParcela.value,\n      });\n\n      M.remote.get(searchUrl).then((response) => {\n        const success = this.acceptOVCSW(response);\n        if (success) {\n          this.parseParamsResultsForTemplate_(response.xml);\n        }\n      });\n    }\n  }\n\n  /**\n   * Checks if response is valid\n   *\n   * @private\n   * @function\n   * @param {Object} response - Response\n   * @api\n   */\n  acceptOVCSW(response) {\n    let success = true;\n    try {\n      if ((response.code === 200) && (response.error === false)) {\n        const results2 = response.xml;\n        const rootElement = results2.childNodes[0];\n        const controlNode = rootElement.getElementsByTagName('control')[0];\n        const errorCtlNode = controlNode.getElementsByTagName('cuerr')[0];\n        let cuerr = '0';\n        if (errorCtlNode !== undefined) {\n          cuerr = errorCtlNode.childNodes[0].nodeValue;\n        }\n        if (cuerr === '1') {\n          const errorNode = rootElement.getElementsByTagName('lerr')[0];\n          const errorDesc = errorNode.getElementsByTagName('err')[0];\n          const errorDescTxt = errorDesc.getElementsByTagName('des')[0].childNodes[0].nodeValue;\n          success = false;\n          M.dialog.info(errorDescTxt);\n        }\n      } else {\n        success = false;\n        M.dialog.error(getValue('exception.mapeaerror'));\n      }\n    } catch (err) {\n      success = false;\n      M.exception(`${getValue('exception.json_invalid')} ${err}.`);\n    }\n    return success;\n  }\n\n  /**\n   * This function parse results for template\n   *\n   * @param {Object} response - Response\n   * @public\n   * @function\n   * @api\n   */\n  parseParamsResultsForTemplate_(response) {\n    let rcNode;\n    const rootElement = response.getElementsByTagName('consulta_dnp')[0];\n    const lrcdnpNode = rootElement.getElementsByTagName('lrcdnp');\n\n    if (lrcdnpNode.length > 0) {\n      const rcdnpNode = lrcdnpNode[0].getElementsByTagName('rcdnp')[0];\n      rcNode = rcdnpNode.getElementsByTagName('rc')[0];\n    } else {\n      const bicoNode = rootElement.getElementsByTagName('bico')[0];\n      const biNode = bicoNode.getElementsByTagName('bi')[0];\n      const idbiNode = biNode.getElementsByTagName('idbi')[0];\n      rcNode = idbiNode.getElementsByTagName('rc')[0];\n    }\n    const pc1Value = rcNode.getElementsByTagName('pc1')[0].childNodes[0].nodeValue;\n    const pc2Value = rcNode.getElementsByTagName('pc2')[0].childNodes[0].nodeValue;\n\n    const searchUrl = M.utils.addParameters(this.CPMRC_url, {\n      Provincia: '',\n      Municipio: '',\n      SRS: this.map.getProjection().code,\n      RC: pc1Value + pc2Value,\n    });\n\n    return M.remote.get(searchUrl).then((res) => {\n      const success = this.acceptOVCSW(res);\n      if (success) {\n        const docsRC = this.parseCPMRCResults(res.xml);\n        const xcen = docsRC.coords[0].xcen;\n        const ycen = docsRC.coords[0].ycen;\n\n        this.locator_([xcen, ycen], 'parcel');\n      }\n    });\n  }\n\n  /**\n   * Parses CPMRC results\n   *\n   * @private\n   * @function\n   * @param {XMLDocument} xmlResults - XML\n   * @returns {Object} CPMRC results parsed\n   * @api\n   */\n  parseCPMRCResults(xmlResults) {\n    const rootElement = xmlResults.getElementsByTagName('consulta_coordenadas')[0];\n    const coordenadasNode = rootElement.getElementsByTagName('coordenadas')[0];\n    const coordNode = coordenadasNode.getElementsByTagName('coord')[0];\n\n    const pcNode = coordNode.getElementsByTagName('pc')[0];\n    const pc1Node = pcNode.getElementsByTagName('pc1')[0].childNodes[0].nodeValue;\n    const pc2Node = pcNode.getElementsByTagName('pc2')[0].childNodes[0].nodeValue;\n\n    const geoNode = coordNode.getElementsByTagName('geo')[0];\n    const xcenNode = geoNode.getElementsByTagName('xcen')[0].childNodes[0].nodeValue;\n    const ycenNode = geoNode.getElementsByTagName('ycen')[0].childNodes[0].nodeValue;\n    const srsNode = geoNode.getElementsByTagName('srs')[0].childNodes[0].nodeValue;\n\n    const ldtNode = coordNode.getElementsByTagName('ldt')[0].childNodes[0].nodeValue;\n\n    return {\n      attributes: [{\n        key: 'Referencia Catastral',\n        value: pc1Node + pc2Node,\n      }, {\n        key: 'Descripción',\n        value: ldtNode,\n      }],\n      rcId: `rc_${pc1Node}${pc2Node}`,\n      coords: [{\n        xcen: xcenNode,\n        ycen: ycenNode,\n        srs: srsNode,\n      }],\n    };\n  }\n\n  /**\n   * This function centers the map on given point\n   *\n   * @public\n   * @function\n   * @param {Array<number>} coords - coordinates writen by user\n   * @param {string} type - type search\n   * @api\n   */\n  locator_(coords, type = 'cadastre') {\n    const x = coords[0];\n    const y = coords[1];\n    const xFloat = parseFloat(x);\n    const yFloat = parseFloat(y);\n    this.map.removeLayers(this.coordinatesLayer);\n    if (!Number.isNaN(xFloat) && !Number.isNaN(yFloat)) {\n      this.map.setCenter(`${xFloat},${yFloat}*false`);\n      this.map.setZoom(this.zoom);\n      this.fire('infocatastro:locationCentered', [{\n        zoom: this.zoom,\n        center: [xFloat, yFloat],\n      }]);\n\n      this.coordinatesLayer = new M.layer.Vector({\n        name: type === 'cadastre' ? 'coordinatecatastro' : 'coordinateparcel',\n      }, { displayInLayerSwitcher: false });\n\n      const feature = new M.Feature('localizacion', {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'Point',\n          coordinates: [xFloat, yFloat],\n        },\n      });\n\n      this.coordinatesLayer.addFeatures([feature]);\n      this.createGeometryStyles();\n    } else {\n      M.dialog.error(getValue('exception.wrong_coords'), 'Error');\n    }\n  }\n\n  /**\n   * This function creates the style of the geometry according\n   * to the user parameter\n   *\n   * @function\n   * @public\n   * @api\n   */\n  createGeometryStyles() {\n    let style = {\n      radius: 8,\n      fill: {\n        color: '#f00',\n        opacity: 0.5,\n      },\n      stroke: {\n        color: '#f00',\n        opacity: 1,\n        width: 3,\n      },\n    };\n\n    if (this.pointStyle === 'pinAzul') {\n      style = {\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/marker.svg']),\n          scale: 1.4,\n          fill: {\n            color: '#71a7d3',\n          },\n          stroke: {\n            width: 30,\n            color: 'white',\n          },\n          anchor: [0.5, 1],\n        },\n      };\n    } else if (this.pointStyle === 'pinRojo') {\n      style = {\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/pinign.svg']),\n        },\n      };\n    } else if (this.pointStyle === 'pinMorado') {\n      style = {\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/m-pin-24.svg']),\n        },\n      };\n    }\n    this.coordinatesLayer.setStyle(new M.style.Point(style));\n    // Change zIndex value\n    this.coordinatesLayer.setZIndex(9999999999999999999);\n\n    this.map.addLayers(this.coordinatesLayer);\n  }\n\n  /**\n   * Handler for search with RC button\n   *\n   * @public\n   * @function\n   * @param {Event} evt - Event\n   * @api\n   */\n  onRCSearch(evt) {\n    evt.preventDefault();\n    this.clearResults(true, false);\n    this.inputRefCatastral = this.html_.querySelector('#m-infocatastro-coordinatesSystemRefCatastral>#m-refCatastral-input');\n    let refcatastral = this.inputRefCatastral.value.trim();\n    if ((evt.type !== 'keyup') || (evt.keyCode === 13)) {\n      if (M.utils.isNullOrEmpty(refcatastral)) {\n        M.dialog.info(getValue('exception.no_refcatastro'));\n      } else {\n        refcatastral = refcatastral.substr(0, 14);\n        const searchUrl = M.utils.addParameters(this.CPMRC_url, {\n          Provincia: '',\n          Municipio: '',\n          SRS: this.map.getProjection().code,\n          RC: refcatastral,\n        });\n        M.remote.get(searchUrl).then((response) => {\n          const success = this.acceptOVCSW(response);\n          if (success) {\n            const docs = this.parseCPMRCResults(response.xml);\n            this.rcResults_ = [docs];\n            const resultsTemplateVars = {\n              docs: this.rcResults_,\n              total: this.rcResults_.length,\n              partial: false,\n              notResutls: false,\n              query: refcatastral,\n            };\n            Promise.resolve(resultsTemplateVars).then((resultTemplate) => {\n              this.drawGeocoderResultRC(resultTemplate);\n            });\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * This function removes last search layer and adds new layer with current result (from geocoder)\n   * features to map, zooms in result, edits popup information and shows a message saying\n   *  if it's a perfect result or an approximation.\n   *\n   * @public\n   * @function\n   * @param {Object} geoJsonData - clicked result object\n   * @api\n   */\n  drawGeocoderResultRC(geoJsonData) {\n    const attri = geoJsonData.docs[0];\n\n    // Center coordinates\n    this.coordinates = `${attri.coords[0].xcen}, ${attri.coords[0].ycen}`;\n    const coords = [parseFloat(attri.coords[0].xcen), parseFloat(attri.coords[0].ycen)];\n\n    this.locator_(coords, this.point);\n\n    // show popup for streets\n    const fullAddress = attri.attributes[1].value;\n\n    // inserts a popUp with information about the searched location\n    const target = 'EPSG:4326';\n    const source = this.map.getProjection().code;\n    const newCoords = this.getImpl().reprojectReverse([coords[0], coords[1]], source, target);\n    const exitState = getValue('exact');\n\n    this.showPopUp(fullAddress, coords, newCoords, exitState, { fake: true });\n\n    const x = coords[0];\n    const y = coords[1];\n    const xFloat = parseFloat(x);\n    const yFloat = parseFloat(y);\n    this.map.setCenter(`${xFloat},${yFloat}*false`);\n  }\n\n\n  /**\n   * This function inserts a popup on the map with information about its location.\n   *\n   * @param {string} fullAddress - Location address(street, portal, etc.)\n   * @param {Array} mapCoordinates - Latitude[0] and longitude[1] coordinates on map projection\n   * @param {Array} featureCoordinates - Latitude[0] and longitude[1] coordinates from feature\n   * @param {string} exitState - Indicating if the given result is a perfect match\n   * @param {Object} e - Object\n   * @public\n   * @function\n   * @api\n   */\n  showPopUp(fullAddress, mapcoords, featureCoordinates, exitState = null, e = {}) {\n    const featureTabOpts = { content: '', title: '' };\n    if (exitState !== null) {\n      featureTabOpts.content += `<div><b>${exitState}</b></div>`;\n    }\n\n    featureTabOpts.content += `<div><b>${fullAddress !== undefined ? fullAddress : '-'}</b></div><br/>\n                  <div class='ignsearchlocator-popup'><b>Lon:</b> ${featureCoordinates[1].toFixed(6)} </div>\n                  <div class='ignsearchlocator-popup'><b>Lat:</b> ${featureCoordinates[0].toFixed(6)}</div>\n                  `;\n\n    const myPopUp = new M.Popup({ panMapIfOutOfView: !e.fake });\n    myPopUp.addTab(featureTabOpts);\n    this.map.addPopup(myPopUp, [\n      mapcoords[0],\n      mapcoords[1],\n    ]);\n    this.popup = myPopUp;\n    if (this.pointStyle === 'pinAzul') {\n      this.popup.getImpl().setOffset([0, -30]);\n    } else if (this.pointStyle === 'pinRojo') {\n      this.popup.getImpl().setOffset([2, -15]);\n    } else if (this.pointStyle === 'pinMorado') {\n      this.popup.getImpl().setOffset([1, -10]);\n    }\n    this.lat = mapcoords[1];\n    this.lng = mapcoords[0];\n  }\n\n  /**\n   * Handler for search with RC button\n   *\n   * @public\n   * @function\n   * @param {Event} evt - Event\n   * @api\n   */\n  onRCConsult(evt) {\n    evt.preventDefault();\n\n    // Se cambia al cursor a una cruz.\n    document.body.style.cursor = 'crosshair';\n    this.clearResults(true, true);\n\n    this.map.on(M.evt.CLICK, this.buildUrl_, this);\n  }\n\n  /**\n   * This function builds the query URL and shows results\n   *\n   * @private\n   * @function\n   * @param {ol.MapBrowserPointerEvent} evt - Browser point event\n   * @api\n   */\n  buildUrl_(evt) {\n    const options = {\n      jsonp: true,\n    };\n\n    const srs = this.map.getProjection().code;\n    M.remote.get(this.cadastreWMS, {\n      SRS: srs,\n      Coordenada_X: evt.coord[0],\n      Coordenada_Y: evt.coord[1],\n    }).then((res) => {\n      this.showInfoFromURL_(res, evt.coord);\n\n      // Se desactiva el evento del click una vez haya encontrado una catastro\n      this.map.un(M.evt.CLICK, this.buildUrl_, this);\n      document.body.style.cursor = '';\n    }, options);\n  }\n\n  /**\n   * This function displays information in a popup\n   *\n   * @private\n   * @function\n   * @param {XML} response - response from the petition\n   * @param {array} coordinates - Coordinate position onClick\n   * @api\n   */\n  showInfoFromURL_(response, coordinates) {\n    if ((response.code === 200) && (response.error === false)) {\n      const infos = [];\n      const info = response.text;\n      const formatedInfo = this.formatInfo_(info);\n      infos.push(formatedInfo);\n\n      const tab = {\n        icon: 'locator-icon-pin',\n        title: this.POPUP_TITLE,\n        content: infos.join(''),\n      };\n\n      let popup = this.map.getPopup();\n\n      if (!M.utils.isNullOrEmpty(popup) && popup.getCoordinate()[0] === coordinates[0] &&\n        popup.getCoordinate()[1] === coordinates[1]) {\n        let hasExternalContent = false;\n        popup.getTabs().forEach((t) => {\n          if (t.title !== this.POPUP_TITLE) {\n            hasExternalContent = true;\n          } else {\n            popup.removeTab(t);\n          }\n        });\n        if (hasExternalContent) {\n          popup.addTab(tab);\n        } else {\n          popup = new M.Popup();\n          popup.addTab(tab);\n          this.map.addPopup(popup, coordinates);\n        }\n      } else {\n        popup = new M.Popup();\n        popup.addTab(tab);\n        this.map.addPopup(popup, coordinates);\n      }\n    } else {\n      this.map.removePopup();\n      M.dialog.error(getValue('exception.mapeaerror'));\n    }\n  }\n\n  /**\n   * This function formats the response\n   *\n   * @param {string} info - Information to formatting\n   * @returns {string} information - Formatted information\n   * @private\n   * @function\n   */\n  formatInfo_(info) {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(info, 'text/xml');\n    let ldtNode;\n    let valuePopup;\n    let codProv;\n    let codMun;\n    let link = '';\n\n    const rootElement = xmlDoc.getElementsByTagName('consulta_coordenadas')[0];\n    const controlNode = rootElement.getElementsByTagName('control')[0];\n    const errorCtlNode = controlNode.getElementsByTagName('cuerr')[0].childNodes[0].nodeValue;\n    if (errorCtlNode === '1') {\n      valuePopup = getValue('exception.noInfo');\n    } else {\n      const coordenadasNode = rootElement.getElementsByTagName('coordenadas')[0];\n      const coordNode = coordenadasNode.getElementsByTagName('coord')[0];\n      const pcNode = coordNode.getElementsByTagName('pc')[0];\n      const pc1Node = pcNode.getElementsByTagName('pc1')[0].childNodes[0].nodeValue;\n      const pc2Node = pcNode.getElementsByTagName('pc2')[0].childNodes[0].nodeValue;\n\n      codProv = pc1Node.substring(0, 2);\n      codMun = pc1Node.substring(2, 5);\n\n      ldtNode = coordNode.getElementsByTagName('ldt')[0].childNodes[0].nodeValue;\n      valuePopup = pc1Node + pc2Node;\n      link = `https://www1.sedecatastro.gob.es/CYCBienInmueble/OVCListaBienes.aspx?del==${codProv}&mun=${codMun}&rc1=${pc1Node}&rc2=${pc2Node}`;\n    }\n\n    let formatedInfo = `${M.utils.beautifyAttribute(getValue('cadastral_information'))}\n    <div class='divinfo'>\n    <table class='mapea-table'>\n    <tbody>\n    <tr><td class='header' colspan='4'></td></tr>\n    <tr><td class='key'><b>${M.utils.beautifyAttribute(getValue('reference'))}</b></td><td class='value'></b>\n    <a href='${link}' target='_blank'>${valuePopup}</a></td></tr>\n    <tr><td class='key'><b>${M.utils.beautifyAttribute(getValue('description'))}</b></td>\n    <td class='value'>${ldtNode}</td></tr>\n    </tbody></table></div>`;\n\n    if (valuePopup.toLowerCase().indexOf(getValue('noReference')) > -1) {\n      formatedInfo = `${M.utils.beautifyAttribute(getValue('cadastral_information'))}\n      <div class='divinfo'>\n      <table class='mapea-table'>\n      <tbody>\n      <tr><td class='header' colspan='4'></td></tr>\n      <tr><td class='key' colspan='4'><b>${valuePopup}</b></td></tr>\n      </tbody></table>\n      </div>`;\n    }\n\n    return formatedInfo;\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof InfoCatastroControl;\n  }\n}\n","/**\n * @module M/impl/control/LocatorControl\n */\nexport default class LocatorControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    // super addTo - don't delete\n    super.addTo(map, html);\n\n    this.facadeMap_ = map;\n  }\n}\n","/**\n * @module M/impl/control/XYLocatorControl\n */\n\nexport default class XYLocatorControl extends M.impl.Control {\n  constructor(map) {\n    super();\n\n    this.facadeMap_ = map;\n  }\n\n  /**\n   * This function reprojects map on selected SRS.\n   *\n   * @function\n   * @param {string} origin - EPSG:25830, EPSG:4326, ..., etc\n   * @param {array<number>} coordinates\n   * @api\n   */\n  reproject(origin, coordinates) {\n    const originProj = ol.proj.get(origin);\n    const destProj = ol.proj.get(this.facadeMap_.getProjection().code);\n    let coordinatesTransform = ol.proj.transform(coordinates, originProj, destProj);\n    coordinatesTransform = [this.normalizeNumber(coordinates[0], coordinatesTransform[0]),\n      this.normalizeNumber(coordinates[1], coordinatesTransform[1])];\n    return coordinatesTransform;\n  }\n\n  /**\n   * This functions normalize a number.\n   *\n   * @param {Number} origin\n   * @param {Number} calculated\n   * @returns {Number} Number normalized.\n   */\n  normalizeNumber(origin, calculated) {\n    let res = origin;\n    if (origin !== 0) {\n      res = parseFloat(calculated.toFixed(9));\n    }\n\n    return res;\n  }\n}\n","/**\n * @module M/control/XYLocatorControl\n */\n\nimport template from 'templates/xylocator';\nimport XYLocatorImpl from '../../impl/ol/js/xylocatorcontrol';\nimport { getValue } from './i18n/language';\n\nexport default class XYLocatorControl extends M.Control {\n  /**\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(map, zoom, pointStyle, options, positionPlugin) {\n    if (M.utils.isUndefined(XYLocatorImpl)) {\n      M.exception(getValue('exception.impl_xylocator'));\n    }\n    const impl = new XYLocatorImpl(map);\n    super(impl, 'XYLocatorImpl');\n\n    /**\n     * Projections options\n     *\n     * @private\n     * @type {Array<object>} - {code: ..., title: ..., units: m | d}\n     */\n    this.projections = options.projections;\n\n    /**\n     * Zoom\n     *\n     * @private\n     * @type {number}\n     */\n    this.zoom = zoom;\n\n    /**\n     * Type of icon to display when a punctual type result is found\n     * @private\n     * @type {string}\n     */\n    this.pointStyle = pointStyle;\n\n    /**\n     * Help\n     *\n     * @private\n     * @type {string}\n     */\n    this.help = options.help;\n\n    /**\n     * Map\n     */\n    this.map = map;\n\n    /**\n     * Position plugin\n     * @private\n     * @type {String}\n     */\n    this.positionPlugin = positionPlugin;\n  }\n\n  /**\n   * This function active control\n   *\n   * @public\n   * @function\n   * @param {Node} html\n   * @api\n   */\n  active(html) {\n    this.html_ = html;\n    const xylocatoractive = this.html_.querySelector('#m-locator-xylocator').classList.contains('activated');\n    this.deactive();\n    if (!xylocatoractive) {\n      if (this.positionPlugin === 'TC') {\n        document.querySelector('.m-plugin-locator').classList.remove('m-plugin-locator-tc');\n        document.querySelector('.m-plugin-locator').classList.add('m-plugin-locator-tc-withpanel');\n      }\n      this.html_.querySelector('#m-locator-xylocator').classList.add('activated');\n      const panel = M.template.compileSync(template, {\n        vars: {\n          hasHelp: !M.utils.isUndefined(this.help) && M.utils.isUrl(this.help),\n          helpUrl: this.help,\n          projections: this.projections,\n          translations: {\n            srs: getValue('srs'),\n            longitude: getValue('longitude'),\n            latitude: getValue('latitude'),\n            locate: getValue('locate'),\n            clean: getValue('clean'),\n            east: getValue('east'),\n            west: getValue('west'),\n            north: getValue('north'),\n            south: getValue('south'),\n            geographic: getValue('geographic'),\n            zone: getValue('zone'),\n            dms: getValue('dms'),\n            dd: getValue('dd'),\n          },\n        },\n      });\n      document.querySelector('#div-contenedor-locator').appendChild(panel);\n      this.html_.querySelector('button#m-xylocator-limpiar').addEventListener('click', () => this.clearResults());\n      this.html_.querySelector('select#m-xylocator-srs').addEventListener('change', evt => this.manageInputs_(evt));\n      this.html_.querySelector('button#m-xylocator-loc').addEventListener('click', evt => this.calculate_());\n    }\n  }\n\n  /**\n   * This function deactive control\n   *\n   * @public\n   * @function\n   * @api\n   */\n  deactive() {\n    this.html_.querySelector('#m-locator-xylocator').classList.remove('activated');\n    const panel = this.html_.querySelector('#m-xylocator-panel');\n    if (panel) {\n      this.clearResults();\n      document.querySelector('#div-contenedor-locator').removeChild(panel);\n    }\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof XYLocatorControl;\n  }\n\n  /**\n   * This function clears input values\n   *\n   * @private\n   * @function\n   */\n  clearResults() {\n    this.html_.querySelector('input#UTM-X').value = '';\n    this.html_.querySelector('input#UTM-Y').value = '';\n    this.html_.querySelector('input#LON').value = '';\n    this.html_.querySelector('input#LAT').value = '';\n    this.html_.querySelector('input#LONHH').value = 0;\n    this.html_.querySelector('input#LONMM').value = 0;\n    this.html_.querySelector('input#LONSS').value = 0;\n    this.html_.querySelector('input#LATHH').value = 0;\n    this.html_.querySelector('input#LATMM').value = 0;\n    this.html_.querySelector('input#LATSS').value = 0;\n    this.map.removeLayers(this.coordinatesLayer);\n  }\n\n  /**\n   * This function changes input label depending on SRS\n   *\n   * @private\n   * @function\n   * @param {DOMEvent} evt - event\n   */\n  manageInputs_(evt) {\n    const selectTarget = evt.target;\n    const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n    this.html_.querySelector('div#m-xylocator-utm').style.display = 'none';\n    this.html_.querySelector('div#m-xylocator-dms').style.display = 'none';\n    this.html_.querySelector('div#m-xylocator-latlon').style.display = 'none';\n\n    if (selectedOption.getAttribute('data-units') === 'd') {\n      this.html_.querySelector('div#m-xylocator-latlon').style.display = 'block';\n    } else if (selectedOption.getAttribute('data-units') === 'dms') {\n      this.html_.querySelector('div#m-xylocator-dms').style.display = 'block';\n    } else {\n      this.html_.querySelector('div#m-xylocator-utm').style.display = 'block';\n    }\n  }\n\n  /**\n   * This function transforms coordinates to map SRS\n   *\n   * @public\n   * @function\n   * @api\n   */\n  calculate_() {\n    try {\n      const selectTarget = this.html_.querySelector('select#m-xylocator-srs');\n      const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n      const origin = selectedOption.value;\n      const unit = selectedOption.getAttribute('data-units');\n      let x = -1;\n      let y = -1;\n      let selectors;\n      if (unit !== 'dms') {\n        selectors = unit === 'd' ? ['input#LON', 'input#LAT'] : ['input#UTM-X', 'input#UTM-Y'];\n        const xString = this.html_.querySelector(selectors[0]).value.replace(',', '.');\n        const yString = this.html_.querySelector(selectors[1]).value.replace(',', '.');\n        x = parseFloat(xString);\n        y = parseFloat(yString);\n      } else {\n        const hhLon = this.html_.querySelector('input#LONHH').value;\n        const mmLon = this.html_.querySelector('input#LONMM').value;\n        const ssLon = this.html_.querySelector('input#LONSS').value;\n        const dirLon = this.html_.querySelector('input[name=\"LONDIR\"]:checked').value;\n        const hhLat = this.html_.querySelector('input#LATHH').value;\n        const mmLat = this.html_.querySelector('input#LATMM').value;\n        const ssLat = this.html_.querySelector('input#LATSS').value;\n        const dirLat = this.html_.querySelector('input[name=\"LATDIR\"]:checked').value;\n\n        if (this.checkDegreeValue_(mmLon) && this.checkDegreeValue_(ssLon) &&\n          this.checkDegreeValue_(mmLat) &&\n          this.checkDegreeValue_(ssLat) && parseFloat(hhLon) >= 0 &&\n          parseFloat(hhLon) <= 180 && parseFloat(hhLat) >= 0 && parseFloat(hhLat) <= 180) {\n          x = parseFloat(hhLon) + (parseFloat(mmLon) / 60) + (parseFloat(ssLon) / 3600);\n          y = parseFloat(hhLat) + (parseFloat(mmLat) / 60) + (parseFloat(ssLat) / 3600);\n\n          if (dirLon !== 'east' && x !== 0) {\n            x = -x;\n          }\n\n          if (dirLat !== 'north' && y !== 0) {\n            y = -y;\n          }\n        } else {\n          M.dialog.error(getValue('exception.wrong_values'), 'Error');\n        }\n      }\n      try {\n        const coordinatesTransform = this.getImpl().reproject(origin, [x, y]);\n        this.locator_(coordinatesTransform);\n      } catch (ex) {\n        M.dialog.error(getValue('exception.transforming'), 'Error');\n      }\n    } catch (ex) {\n      M.dialog.error(getValue('exception.wrong_coords'), 'Error');\n      throw ex;\n    }\n  }\n\n  /**\n   * This function centers the map on given point\n   *\n   * @public\n   * @function\n   * @param coords - coordinates writen by user\n   * @api\n   */\n  locator_(coords) {\n    const x = parseFloat(coords[0]);\n    const y = parseFloat(coords[1]);\n    this.map.removeLayers(this.coordinatesLayer);\n    if (!Number.isNaN(x) && !Number.isNaN(y)) {\n      this.map.setCenter(`${x},${y}*false`);\n      this.map.setZoom(this.zoom);\n      this.fire('xylocator:locationCentered', [{\n        zoom: this.zoom,\n        center: [x, y],\n      }]);\n\n      this.coordinatesLayer = new M.layer.Vector({\n        name: 'coordinatexylocator',\n      }, { displayInLayerSwitcher: false });\n\n      const feature = new M.Feature('localizacion', {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'Point',\n          coordinates: [x, y],\n        },\n      });\n\n      this.coordinatesLayer.addFeatures([feature]);\n      this.createGeometryStyles();\n      this.map.addLayers(this.coordinatesLayer);\n    } else {\n      M.dialog.error(getValue('exception.wrong_coords'), 'Error');\n    }\n  }\n\n  /**\n   * This function creates the style of the geometry according\n   * to the user parameter\n   *\n   * @function\n   * @public\n   * @api\n   */\n  createGeometryStyles() {\n    let style = {\n      radius: 8,\n      fill: {\n        color: '#f00',\n        opacity: 0.5,\n      },\n      stroke: {\n        color: '#f00',\n        opacity: 1,\n        width: 3,\n      },\n    };\n\n    if (this.pointStyle === 'pinAzul') {\n      style = {\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/marker.svg']),\n          scale: 1.4,\n          fill: {\n            color: '#71a7d3',\n          },\n          stroke: {\n            width: 30,\n            color: 'white',\n          },\n          anchor: [0.5, 1],\n        },\n      };\n    } else if (this.pointStyle === 'pinRojo') {\n      style = {\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/pinign.svg']),\n        },\n      };\n    } else if (this.pointStyle === 'pinMorado') {\n      style = {\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/m-pin-24.svg']),\n        },\n      };\n    }\n    this.coordinatesLayer.setStyle(new M.style.Point(style));\n  }\n\n  /**\n   * This function checks degree value\n   *\n   * @public\n   * @function\n   * @param {String} num\n   * @returns {boolean} True if value is greater than 60\n   * @api\n   */\n  checkDegreeValue_(num) {\n    return parseFloat(num) >= 0 && parseFloat(num) < 60;\n  }\n\n  /**\n   * This function destroys this control\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    this.map.removeLayers(this.coordinatesLayer);\n  }\n}\n","/**\n * @module M/control/LocatorControl\n */\n\nimport template from '../../templates/locator';\nimport LocatorImpl from '../../impl/ol/js/locator';\nimport { getValue } from './i18n/language';\nimport XYLocatorControl from './xylocatorcontrol';\nimport IGNSearchLocatorControl from './ignsearchlocatorcontrol';\nimport InfoCatastroControl from './infocatastrocontrol';\n\nexport default class LocatorControl extends M.Control {\n  /**\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(\n    isDraggable, zoom, pointStyle, byCoordinates, byParcelCadastre,\n    byPlaceAddressPostal, order, useProxy, statusProxy, position,\n  ) {\n    if (M.utils.isUndefined(LocatorImpl)) {\n      M.exception(getValue('exception.impl'));\n    }\n\n    const impl = new LocatorImpl();\n    super(impl, 'Locator');\n    /**\n     * Indicates if the control xylocator is added to the plugin\n     * @private\n     * @type {Boolean|Object}\n     */\n\n    this.byCoordinates_ = byCoordinates;\n\n    /**\n     * Indicates if the control infocatastro is added to the plugin\n     * @private\n     * @type {Boolean|Object}\n     */\n    this.byParcelCadastre_ = byParcelCadastre;\n\n    /**\n     * Indicates if the control ignsearchlocator is added to the plugin\n     * @private\n     * @type {Boolean|Object}\n     */\n    this.byPlaceAddressPostal_ = byPlaceAddressPostal;\n\n    /**\n     * Option to allow the plugin to be draggable or not\n     * @private\n     * @type {Boolean}\n     */\n    this.isDraggable_ = isDraggable;\n\n    /**\n     * Zoom\n     * @private\n     * @type {Number}\n     */\n    this.zoom_ = zoom;\n\n    /**\n     * Type of icon to display when a punctual type result is found\n     * @private\n     * @type {string}\n     */\n    this.pointStyle_ = pointStyle;\n\n    /**\n     * Order of plugin\n     * @public\n     * @type {Number}\n     */\n    this.order = order;\n\n    /**\n     * Indicates if you want to use proxy in requests\n     * @private\n     * @type {Number}\n     */\n    this.useProxy = useProxy;\n\n    /**\n     * Stores the proxy state at plugin load time\n     * @private\n     * @type {Boolean}\n     */\n    this.statusProxy = statusProxy;\n\n    /**\n     * Position of the plugin\n     *\n     * @private\n     * @type {String} TL | TR | BL | BR | TC\n     */\n    this.position = position || 'TR';\n\n    /**\n     * Control activated\n     * @public\n     * @type {Control}\n     */\n    this.control = null;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api\n   */\n  createView(map) {\n    this.map_ = map;\n    return new Promise((success, fail) => {\n      const html = M.template.compileSync(template, {\n        vars: {\n          showTitle: this.position !== 'TC',\n          byParcelCadastre: this.byParcelCadastre_,\n          byCoordinates: this.byCoordinates_,\n          byPlaceAddressPostal: this.byPlaceAddressPostal_,\n          translations: {\n            headertitle: getValue('tooltip'),\n            infocatastro: getValue('infocatastro'),\n            xylocator: getValue('xylocator'),\n            ignsearch: getValue('ignsearch'),\n          },\n        },\n      });\n      this.html = html;\n\n      if (this.byParcelCadastre_) {\n        // infocatastro\n        this.infocatastroControl = new InfoCatastroControl(\n          this.map_,\n          this.zoom_,\n          this.pointStyle_,\n          this.byParcelCadastre_,\n          this.position,\n        );\n        html.querySelector('#m-locator-infocatastro').addEventListener('click', () => {\n          this.deactive(html, 'infocatastro');\n          this.infocatastroControl.active(html);\n          this.control = this.infocatastroControl;\n        });\n        html.querySelector('#m-locator-infocatastro').addEventListener('keydown', ({ key }) => {\n          if (key === 'Enter') {\n            this.deactive(html, 'infocatastro');\n            this.infocatastroControl.active(html);\n            this.control = this.infocatastroControl;\n          }\n        });\n        this.infocatastroControl.on('infocatastro:locationCentered', (data) => {\n          this.fire('infocatastro:locationCentered', data);\n        });\n      }\n      if (this.byCoordinates_) {\n        // xylocator\n        this.xylocatorControl = new XYLocatorControl(\n          this.map_,\n          this.zoom_,\n          this.pointStyle_,\n          this.byCoordinates_,\n          this.position,\n        );\n        html.querySelector('#m-locator-xylocator').addEventListener('click', () => {\n          this.deactive(html, 'xylocator');\n          this.xylocatorControl.active(html);\n          this.control = this.xylocatorControl;\n        });\n        html.querySelector('#m-locator-xylocator').addEventListener('keydown', ({ key }) => {\n          if (key === 'Enter') {\n            this.deactive(html, 'xylocator');\n            this.xylocatorControl.active(html);\n            this.control = this.xylocatorControl;\n          }\n        });\n        this.xylocatorControl.on('xylocator:locationCentered', (data) => {\n          this.fire('xylocator:locationCentered', data);\n        });\n      }\n      if (this.byPlaceAddressPostal_) {\n        // ignsearchlocator\n        this.ignsearchControl = new IGNSearchLocatorControl(\n          this.map_,\n          this.zoom_,\n          this.pointStyle_,\n          this.byPlaceAddressPostal_,\n          this.useProxy,\n          this.statusProxy,\n          this.position,\n        );\n        this.on(M.evt.ADDED_TO_MAP, () => {\n          this.ignsearchControl.initializateAddress(html);\n          this.control = this.ignsearchControl;\n          if (this.position === 'TC') {\n            if (this.byPlaceAddressPostal_ !== false) {\n              document.querySelector('.m-plugin-locator').classList.add('m-plugin-locator-tc');\n              html.querySelector('#m-locator-ignsearch').click();\n            }\n          }\n        });\n        html.querySelector('#m-locator-ignsearch').addEventListener('click', () => {\n          this.deactive(html, 'ignsearch');\n          this.ignsearchControl.active(html);\n          this.control = this.ignsearchControl;\n        });\n        html.querySelector('#m-locator-ignsearch').addEventListener('keydown', ({ key }) => {\n          if (key === 'Enter') {\n            this.deactive(html, 'ignsearch');\n            this.ignsearchControl.active(html);\n            this.control = this.ignsearchControl;\n          }\n        });\n        this.ignsearchControl.on('ignsearchlocator:entityFound', (extent) => {\n          this.fire('ignsearchlocator:entityFound', [extent]);\n        });\n      }\n      if (this.isDraggable_) {\n        M.utils.draggabillyPlugin(this.getPanel(), '#m-locator-title');\n      }\n      this.accessibilityTab(html);\n      success(html);\n    });\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof LocatorControl;\n  }\n\n  /**\n   * This function deactivates the activated control\n   * before activating another\n   *\n   * @public\n   * @function\n   * @param {Node} html\n   * @param {String} control\n   * @api\n   */\n  deactive(html, control) {\n    const active = html.querySelectorAll('#m-locator-previews .activated')[0];\n    if (this.position === 'TC') {\n      document.querySelector('.m-plugin-locator').classList.remove('m-plugin-locator-tc-withpanel');\n      document.querySelector('.m-plugin-locator').classList.add('m-plugin-locator-tc');\n    }\n    if (active && !active.id.includes(control)) {\n      this.control.clearResults();\n      active.classList.remove('activated');\n      const container = document.querySelector('#div-contenedor-locator');\n      if (this.position === 'TC' && container && container.children.length > 1) {\n        container.removeChild(container.children[1]);\n      } else if (container && container.children.length > 2) {\n        container.removeChild(container.children[2]);\n      }\n    }\n  }\n\n  /**\n   * This function changes number of tabindex\n   *\n   * @public\n   * @function\n   * @param {Node} html\n   * @api\n   */\n  accessibilityTab(html) {\n    html.querySelectorAll('[tabindex=\"0\"]').forEach(el => el.setAttribute('tabindex', this.order));\n  }\n\n  /**\n   * This function destroys controls inside this control\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    if (!M.utils.isNullOrEmpty(this.infocatastroControl)) {\n      this.infocatastroControl.destroy();\n    }\n    if (!M.utils.isNullOrEmpty(this.ignsearchControl)) {\n      this.ignsearchControl.destroy();\n    }\n    if (!M.utils.isNullOrEmpty(this.xylocatorControl)) {\n      this.xylocatorControl.destroy();\n    }\n  }\n}\n","/**\n * @module M/plugin/Locator\n */\nimport '../assets/css/locator';\nimport LocatorControl from './locatorcontrol';\nimport es from './i18n/es';\nimport en from './i18n/en';\nimport { getValue } from './i18n/language';\n\nexport default class Locator extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api\n   */\n  constructor(options = {}) {\n    super();\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Plugin name\n     * @public\n     * @type {String}\n     */\n    this.name = 'locator';\n\n    /**\n     * Plugin parameters\n     * @public\n     * @type {Object}\n     */\n    this.options = options;\n\n    /**\n     * Position of the plugin\n     *\n     * @private\n     * @type {String} TL | TR | BL | BR | TC\n     */\n    this.position_ = options.position || 'TR';\n\n    /**\n     * Option to allow the plugin to be collapsed or not\n     * @private\n     * @type {Boolean}\n     */\n    this.collapsed = !M.utils.isUndefined(options.collapsed) ? options.collapsed : true;\n\n    /**\n     * Option to allow the plugin to be collapsible or not\n     * @private\n     * @type {Boolean}\n     */\n    this.collapsible = !M.utils.isUndefined(options.collapsible) ? options.collapsible : true;\n\n    /**\n     * Tooltip of plugin\n     * @private\n     * @type {String}\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * Option to allow the plugin to be draggable or not\n     * @private\n     * @type {Boolean}\n     */\n    this.isDraggable = !M.utils.isUndefined(options.isDraggable) ? options.isDraggable : false;\n\n    /**\n     * Zoom\n     * @private\n     * @type {Number}\n     */\n    this.zoom = options.zoom || 16;\n\n    /**\n     * Type of icon to display when a punctual type result is found\n     * @private\n     * @type {string}\n     */\n    this.pointStyle = options.pointStyle || 'pinAzul';\n\n    /**\n     * Indicates if the control infocatastro is added to the plugin\n     * @private\n     * @type {Boolean|Object}\n     */\n    this.byParcelCadastre = M.utils.isUndefined(options.byParcelCadastre) ||\n      options.byParcelCadastre === true ?\n      this.getInfoCatastro() : options.byParcelCadastre;\n\n    /**\n     * Indicates if the control xylocator is added to the plugin\n     * @private\n     * @type {Boolean|Object}\n     */\n    this.byCoordinates = M.utils.isUndefined(options.byCoordinates) ||\n      options.byCoordinates === true ? this.getXYLocator() : options.byCoordinates;\n\n    /**\n     * Indicates if the control ignsearchlocator is added to the plugin\n     * @private\n     * @type {Boolean|Object}\n     */\n    this.byPlaceAddressPostal = M.utils.isUndefined(options.byPlaceAddressPostal) ||\n      options.byPlaceAddressPostal === true ? this.getIGNSearchLocator() :\n      options.byPlaceAddressPostal;\n\n    /**\n     * Indicates order to the plugin\n     * @private\n     * @type {Number}\n     */\n    this.order = options.order >= -1 ? options.order : null;\n\n    /**\n     * Indicates if you want to use proxy in requests\n     * @private\n     * @type {Boolean}\n     */\n    this.useProxy = M.utils.isUndefined(options.useProxy) ? true : options.useProxy;\n\n    /**\n     * Stores the proxy state at plugin load time\n     * @private\n     * @type {Boolean}\n     */\n    this.statusProxy = M.useproxy;\n  }\n\n  /**\n   * Return plugin language\n   *\n   * @public\n   * @function\n   * @param {string} lang type language\n   * @api\n   */\n  static getJSONTranslations(lang) {\n    if (lang === 'en' || lang === 'es') {\n      return (lang === 'en') ? en : es;\n    }\n    return M.language.getTranslation(lang).locator;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api\n   */\n  addTo(map) {\n    if (this.byCoordinates === false && this.byParcelCadastre === false &&\n      this.byPlaceAddressPostal === false) {\n      M.dialog.error(getValue('exception.no_controls'));\n    }\n    this.controls_.push(new LocatorControl(\n      this.isDraggable,\n      this.zoom,\n      this.pointStyle,\n      this.byCoordinates,\n      this.byParcelCadastre,\n      this.byPlaceAddressPostal,\n      this.order,\n      this.useProxy,\n      this.statusProxy,\n      this.position_,\n    ));\n    this.map_ = map;\n    if (this.position_ === 'TC') {\n      this.collapsible = false;\n    }\n    this.panel_ = new M.ui.Panel('panelLocator', {\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      position: M.ui.position[this.position_],\n      className: 'm-plugin-locator',\n      tooltip: this.tooltip_,\n      collapsedButtonClass: 'locator-icon-localizacion2',\n      order: this.order,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n  }\n\n  /**\n   * This function indicates the default values\n   * for the control infocatastro\n   *\n   * @public\n   * @function\n   * @returns Default values\n   * @api\n   */\n  getInfoCatastro() {\n    return {\n      cadastreWMS: '',\n      CMC_url: '',\n      DNPPP_url: '',\n      CPMRC_url: '',\n    };\n  }\n\n  /**\n   * This function indicates the default values\n   * for the control xylocator\n   *\n   * @public\n   * @function\n   * @returns Default values\n   * @api\n   */\n  getXYLocator() {\n    return {\n      projections: [\n        { title: `ETRS89 ${getValue('geographic')} (4258) ${getValue('dd')}`, code: 'EPSG:4258', units: 'd' },\n        { title: `WGS84 ${getValue('geographic')} (4326) ${getValue('dd')}`, code: 'EPSG:4326', units: 'd' },\n        { title: `ETRS89 ${getValue('geographic')} (4258) ${getValue('dms')}`, code: 'EPSG:4258', units: 'dms' },\n        { title: `WGS84 ${getValue('geographic')} (4326) ${getValue('dms')}`, code: 'EPSG:4326', units: 'dms' },\n        { title: 'WGS84 Pseudo Mercator (3857)', code: 'EPSG:3857', units: 'm' },\n        { title: `ETRS89 UTM ${getValue('zone')} 31N (25831)`, code: 'EPSG:25831', units: 'm' },\n        { title: `ETRS89 UTM ${getValue('zone')} 30N (25830)`, code: 'EPSG:25830', units: 'm' },\n        { title: `ETRS89 UTM ${getValue('zone')} 29N (25829)`, code: 'EPSG:25829', units: 'm' },\n        { title: `ETRS89 UTM ${getValue('zone')} 28N (25828)`, code: 'EPSG:25828', units: 'm' },\n      ],\n      help: '',\n    };\n  }\n\n  /**\n   * This function indicates the default values\n   * for the control ignsearchlocator\n   *\n   * @public\n   * @function\n   * @returns Default values\n   * @api\n   */\n  getIGNSearchLocator() {\n    return {\n      servicesToSearch: '',\n      maxResults: 10,\n      noProcess: '',\n      countryCode: '',\n      reverse: true,\n      resultVisibility: true,\n      urlCandidates: '',\n      urlFind: '',\n      urlReverse: '',\n      urlPrefix: '',\n      urlAssistant: '',\n      urlDispatcher: '',\n      searchPosition: '',\n    };\n  }\n\n  /**\n   * Gets the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    return `${this.name}=${this.position_}*${this.collapsed}*${this.collapsible}*${this.tooltip_}*${this.zoom}*${this.pointStyle}\n    *${this.isDraggableE}*${this.byParcelCadastre}*${this.byCoordinates}*${this.byPlaceAddressPostal}*${this.useProxy}`;\n  }\n\n  /**\n   * Gets the API REST Parameters in base64 of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRestBase64() {\n    return `${this.name}=base64=${M.utils.encodeBase64(this.options)}`;\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    this.map_.removeControls(this.controls_);\n    this.map_ = null;\n    this.controls_ = null;\n    this.panel_ = null;\n    this.name = null;\n  }\n\n  /**\n   * This function compare if pluging recieved by param is instance of M.plugin.Locator\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to comapre\n   * @api\n   */\n  equals(plugin) {\n    if (plugin instanceof Locator) {\n      return true;\n    }\n    return false;\n  }\n}\n","import M$control$IGNSearchLocatorControl from './/facade/js/ignsearchlocatorcontrol';\nimport M$control$InfoCatastroControl from './/facade/js/infocatastrocontrol';\nimport M$plugin$Locator from './/facade/js/locator';\nimport M$control$LocatorControl from './/facade/js/locatorcontrol';\nimport M$control$XYLocatorControl from './/facade/js/xylocatorcontrol';\nimport M$impl$control$IGNSearchLocatorControl from './/impl/ol/js/ignsearchlocatorcontrol';\nimport M$impl$control$InfoCatastroControl from './/impl/ol/js/infocatastrocontrol';\nimport M$impl$control$LocatorControl from './/impl/ol/js/locator';\nimport M$impl$control$XYLocatorControl from './/impl/ol/js/xylocatorcontrol';\n\nif (!window.M.control) window.M.control = {};\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.control.IGNSearchLocatorControl = M$control$IGNSearchLocatorControl;\nwindow.M.control.InfoCatastroControl = M$control$InfoCatastroControl;\nwindow.M.plugin.Locator = M$plugin$Locator;\nwindow.M.control.LocatorControl = M$control$LocatorControl;\nwindow.M.control.XYLocatorControl = M$control$XYLocatorControl;\nwindow.M.impl.control.IGNSearchLocatorControl = M$impl$control$IGNSearchLocatorControl;\nwindow.M.impl.control.InfoCatastroControl = M$impl$control$InfoCatastroControl;\nwindow.M.impl.control.LocatorControl = M$impl$control$LocatorControl;\nwindow.M.impl.control.XYLocatorControl = M$impl$control$XYLocatorControl;\n"],"sourceRoot":""}