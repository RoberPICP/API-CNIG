!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=340)}([function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(4),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){(function(t){var r;
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */(function(){var n,i,o,a,s,u,l,c,h,f,p,d,m,y,g,v,_,b,w,M,S,x,E,O,P,T,I,L,R,C,A,k,N,j,F,D,B,G,z,U,q,V,Y,Z,W,H,X,K,J,Q,$,tt,et,rt,nt,it,ot,at,st,ut,lt,ct,ht,ft,pt,dt,mt,yt,gt,vt,_t,bt,wt,Mt,St,xt,Et,Ot,Pt,Tt,It=[].slice;xt=function(){var t,e,r,n,i;for(t={},n=0,e=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<e;n++)r=i[n],t["[object "+r+"]"]=r.toLowerCase();return function(e){var r;return r=Object.prototype.toString.call(e),t[r]||"object"}}(),X=function(t,e,r){return null==e&&(e=0),null==r&&(r=1),t<e&&(t=e),t>r&&(t=r),t},Et=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},S=function(t){var e,r;for(t._clipped=!1,t._unclipped=t.slice(0),e=r=0;r<3;e=++r)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},a=Math.PI,_t=Math.round,E=Math.cos,L=Math.floor,nt=Math.pow,K=Math.log,wt=Math.sin,Mt=Math.sqrt,y=Math.atan2,$=Math.max,m=Math.abs,l=2*a,s=a/3,i=a/180,u=180/a,(M=function(){return arguments[0]instanceof n?arguments[0]:function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,arguments,(function(){}))}).default=M,d=[],null!==t&&null!=t.exports&&(t.exports=M),void 0===(r=function(){return M}.apply(e,[]))||(t.exports=r),M.version="1.4.1",p={},h=[],f=!1,n=function(){function t(){var t,e,r,n,i,o,a,s,u;for(o=this,e=[],s=0,n=arguments.length;s<n;s++)null!=(t=arguments[s])&&e.push(t);if(e.length>1&&(a=e[e.length-1]),null!=p[a])o._rgb=S(p[a](Et(e.slice(0,-1))));else{for(f||(h=h.sort((function(t,e){return e.p-t.p})),f=!0),u=0,i=h.length;u<i&&!(a=(r=h[u]).test.apply(r,e));u++);a&&(o._rgb=S(p[a].apply(p,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),M._input=p,
/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
M.brewer=b={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],b)e.push(b[t.toLowerCase()]=b[t])}(),M.colors=Ot={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},V=function(){var t,e,r,n,i,a,s;return n=(e=Et(arguments))[0],t=e[1],r=e[2],a=(n+16)/116,i=isNaN(t)?a:a+t/500,s=isNaN(r)?a:a-r/200,a=o.Yn*Y(a),i=o.Xn*Y(i),s=o.Zn*Y(s),[Tt(3.2404542*i-1.5371385*a-.4985314*s),Tt(-.969266*i+1.8760108*a+.041556*s),r=Tt(.0556434*i-.2040259*a+1.0572252*s),e.length>3?e[3]:1]},Tt=function(t){return 255*(t<=.00304?12.92*t:1.055*nt(t,1/2.4)-.055)},Y=function(t){return t>o.t1?t*t*t:o.t2*(t-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ht=function(){var t,e,r,n,i,o,a;return r=(n=Et(arguments))[0],e=n[1],t=n[2],o=(i=yt(r,e,t))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},gt=function(t){return(t/=255)<=.04045?t/12.92:nt((t+.055)/1.055,2.4)},Pt=function(t){return t>o.t3?nt(t,1/3):t/o.t2+o.t0},yt=function(){var t,e,r,n;return r=(n=Et(arguments))[0],e=n[1],t=n[2],r=gt(r),e=gt(e),t=gt(t),[Pt((.4124564*r+.3575761*e+.1804375*t)/o.Xn),Pt((.2126729*r+.7151522*e+.072175*t)/o.Yn),Pt((.0193339*r+.119192*e+.9503041*t)/o.Zn)]},M.lab=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["lab"]),(function(){}))},p.lab=V,n.prototype.lab=function(){return ht(this._rgb)},g=function(t){var e,r,n,i,o,a,s,u,l,c,h;return 2===(t=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(M(i));return n}()).length?(l=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=l[0],a=l[1],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push(o[e]+t*(a[e]-o[e]));return n}(),M.lab.apply(M,r)}):3===t.length?(c=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*o[e]+2*(1-t)*t*a[e]+t*t*s[e]);return n}(),M.lab.apply(M,r)}):4===t.length?(h=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=h[0],a=h[1],s=h[2],u=h[3],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*u[e]);return n}(),M.lab.apply(M,r)}):5===t.length&&(r=g(t.slice(0,3)),n=g(t.slice(2,5)),e=function(t){return t<.5?r(2*t):n(2*(t-.5))}),e},M.bezier=function(t){var e;return(e=g(t)).scale=function(){return M.scale(e)},e},M.cubehelix=function(t,e,r,n,i){var o,a,s;return null==t&&(t=300),null==e&&(e=-1.5),null==r&&(r=1),null==n&&(n=1),null==i&&(i=[0,1]),o=0,"array"===xt(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(s=function(s){var u,c,h,f,p;return u=l*((t+120)/360+e*s),f=nt(i[0]+a*s,n),c=(0!==o?r[0]+s*o:r)*f*(1-f)/2,h=E(u),p=wt(u),M(S([255*(f+c*(-.14861*h+1.78277*p)),255*(f+c*(-.29227*h-.90649*p)),255*(f+c*(1.97294*h)),1]))}).start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?n:(n=t,s)},s.hue=function(t){return null==t?r:("array"===xt(r=t)?0===(o=r[1]-r[0])&&(r=r[1]):o=0,s)},s.lightness=function(t){return null==t?i:("array"===xt(t)?(i=t,a=t[1]-t[0]):(i=[t,t],a=0),s)},s.scale=function(){return M.scale(s)},s.hue(r),s},M.random=function(){var t,e;for("0123456789abcdef",t="#",e=0;e<6;++e)t+="0123456789abcdef".charAt(L(16*Math.random()));return new n(t)},d=[],F=function(t,e,r,n){var i,o,a,s;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==xt(t)&&(t=M(t)),"object"!==xt(e)&&(e=M(e)),a=0,o=d.length;a<o;a++)if(n===(i=d[a])[0]){s=i[1](t,e,r,n);break}if(null==s)throw"color mode "+n+" is not supported";return s.alpha(t.alpha()+r*(e.alpha()-t.alpha()))},M.interpolate=F,n.prototype.interpolate=function(t,e,r){return F(this,t,e,r)},M.mix=F,n.prototype.mix=n.prototype.interpolate,p.rgb=function(){var t,e,r,n;for(t in r=[],e=Et(arguments))n=e[t],r.push(n);return r},M.rgb=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["rgb"]),(function(){}))},n.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},h.push({p:3,test:function(t){var e;return e=Et(arguments),"array"===xt(e)&&3===e.length||4===e.length&&"number"===xt(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),p.lrgb=p.rgb,G=function(t,e,r,i){var o,a;return o=t._rgb,a=e._rgb,new n(Mt(nt(o[0],2)*(1-r)+nt(a[0],2)*r),Mt(nt(o[1],2)*(1-r)+nt(a[1],2)*r),Mt(nt(o[2],2)*(1-r)+nt(a[2],2)*r),i)},c=function(t){var e,r,i,o,a;for(e=1/t.length,a=[0,0,0,0],i=0,r=t.length;i<r;i++)o=t[i]._rgb,a[0]+=nt(o[0],2)*e,a[1]+=nt(o[1],2)*e,a[2]+=nt(o[2],2)*e,a[3]+=o[3]*e;return a[0]=Mt(a[0]),a[1]=Mt(a[1]),a[2]=Mt(a[2]),a[3]>1&&(a[3]=1),new n(S(a))},d.push(["lrgb",G]),M.average=function(t,e){var r,n,i,o,s,u,l,h,f,p,d,m,g;if(null==e&&(e="rgb"),f=t.length,l=(t=t.map((function(t){return M(t)}))).splice(0,1)[0],"lrgb"===e)return c(t);for(h in o=[],s=0,u=0,m=l.get(e))m[h]=m[h]||0,o.push(isNaN(m[h])?0:1),"h"!==e.charAt(h)||isNaN(m[h])||(r=m[h]/180*a,s+=E(r),u+=wt(r));for(n=l.alpha(),d=0,p=t.length;d<p;d++)for(h in g=(i=t[d]).get(e),n+=i.alpha(),m)isNaN(g[h])||(o[h]+=1,"h"===e.charAt(h)?(r=g[h]/180*a,s+=E(r),u+=wt(r)):m[h]+=g[h]);for(h in m)if("h"===e.charAt(h)){for(r=y(u/o[h],s/o[h])/a*180;r<0;)r+=360;for(;r>=360;)r-=360;m[h]=r}else m[h]=m[h]/o[h];return M(m,e).alpha(n/f)},C=function(t){var e,r;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(r=parseInt(t,16))>>16,r>>8&255,255&r,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(r=parseInt(t,16))>>24&255,r>>16&255,r>>8&255,_t((255&r)/255*100)/100];if(null!=p.css&&(e=p.css(t)))return e;throw"unknown color: "+t},st=function(t,e){var r,n,i,o,a,s;return null==e&&(e="auto"),a=t[0],i=t[1],n=t[2],r=t[3],"auto"===e&&(e=r<1?"rgba":"rgb"),a=Math.round(a),i=Math.round(i),n=Math.round(n),s=(s="000000"+(a<<16|i<<8|n).toString(16)).substr(s.length-6),o=(o="0"+_t(255*r).toString(16)).substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},p.hex=function(t){return C(t)},M.hex=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hex"]),(function(){}))},n.prototype.hex=function(t){return null==t&&(t="auto"),st(this._rgb,t)},h.push({p:4,test:function(t){if(1===arguments.length&&"string"===xt(t))return"hex"}}),N=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p;if(i=(t=Et(arguments))[0],c=t[1],a=t[2],0===c)u=n=e=255*a;else{for(r=[0,0,0],h=2*a-(f=a<.5?a*(1+c):a+c-a*c),(p=[0,0,0])[0]=(i/=360)+1/3,p[1]=i,p[2]=i-1/3,o=s=0;s<=2;o=++s)p[o]<0&&(p[o]+=1),p[o]>1&&(p[o]-=1),6*p[o]<1?r[o]=h+6*(f-h)*p[o]:2*p[o]<1?r[o]=f:3*p[o]<2?r[o]=h+(f-h)*(2/3-p[o])*6:r[o]=h;u=(l=[_t(255*r[0]),_t(255*r[1]),_t(255*r[2])])[0],n=l[1],e=l[2]}return t.length>3?[u,n,e,t[3]]:[u,n,e]},lt=function(t,e,r){var n,i,o,a,s;return void 0!==t&&t.length>=3&&(t=(a=t)[0],e=a[1],r=a[2]),t/=255,e/=255,r/=255,o=Math.min(t,e,r),i=(($=Math.max(t,e,r))+o)/2,$===o?(s=0,n=Number.NaN):s=i<.5?($-o)/($+o):($-o)/(2-$-o),t===$?n=(e-r)/($-o):e===$?n=2+(r-t)/($-o):r===$&&(n=4+(t-e)/($-o)),(n*=60)<0&&(n+=360),[n,s,i]},M.hsl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hsl"]),(function(){}))},p.hsl=N,n.prototype.hsl=function(){return lt(this._rgb)},j=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g;if(i=(t=Et(arguments))[0],m=t[1],g=t[2],g*=255,0===m)u=n=e=g;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=g*(1-m),s=g*(1-m*(r=(i/=60)-(o=L(i)))),y=g*(1-m*(1-r)),o){case 0:u=(l=[g,y,a])[0],n=l[1],e=l[2];break;case 1:u=(c=[s,g,a])[0],n=c[1],e=c[2];break;case 2:u=(h=[a,g,y])[0],n=h[1],e=h[2];break;case 3:u=(f=[a,s,g])[0],n=f[1],e=f[2];break;case 4:u=(p=[y,a,g])[0],n=p[1],e=p[2];break;case 5:u=(d=[g,a,s])[0],n=d[1],e=d[2]}return[u,n,e,t.length>3?t[3]:1]},ct=function(){var t,e,r,n,i,o,a,s,u;return o=(a=Et(arguments))[0],r=a[1],t=a[2],i=Math.min(o,r,t),e=($=Math.max(o,r,t))-i,u=$/255,0===$?(n=Number.NaN,s=0):(s=e/$,o===$&&(n=(r-t)/e),r===$&&(n=2+(t-o)/e),t===$&&(n=4+(o-r)/e),(n*=60)<0&&(n+=360)),[n,s,u]},M.hsv=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hsv"]),(function(){}))},p.hsv=j,n.prototype.hsv=function(){return ct(this._rgb)},et=function(t){return"number"===xt(t)&&t>=0&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},dt=function(){var t;return((t=Et(arguments))[0]<<16)+(t[1]<<8)+t[2]},M.num=function(t){return new n(t,"num")},n.prototype.num=function(t){return null==t&&(t="rgb"),dt(this._rgb,t)},p.num=et,h.push({p:1,test:function(t){if(1===arguments.length&&"number"===xt(t)&&t>=0&&t<=16777215)return"num"}}),R=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g,v,_;if(s=(r=Et(arguments))[0],i=r[1],e=r[2],a=a/100*255,t=255*(i/=100),0===i)h=a=n=e;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),c=(l=e*(1-i))+t*(1-(o=(s/=60)-(u=L(s)))),v=l+t*o,_=l+t,u){case 0:h=(f=[_,v,l])[0],a=f[1],n=f[2];break;case 1:h=(p=[c,_,l])[0],a=p[1],n=p[2];break;case 2:h=(d=[l,_,v])[0],a=d[1],n=d[2];break;case 3:h=(m=[l,c,_])[0],a=m[1],n=m[2];break;case 4:h=(y=[v,l,_])[0],a=y[1],n=y[2];break;case 5:h=(g=[_,l,c])[0],a=g[1],n=g[2]}return[h,a,n,r.length>3?r[3]:1]},at=function(){var t,e,r,n,i,o,a,s,u;return s=(u=Et(arguments))[0],i=u[1],e=u[2],a=Math.min(s,i,e),r=100*(n=($=Math.max(s,i,e))-a)/255,t=a/(255-n)*100,0===n?o=Number.NaN:(s===$&&(o=(i-e)/n),i===$&&(o=2+(e-s)/n),e===$&&(o=4+(s-i)/n),(o*=60)<0&&(o+=360)),[o,r,t]},M.hcg=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hcg"]),(function(){}))},p.hcg=R,n.prototype.hcg=function(){return at(this._rgb)},O=function(t){var e,r,n,i,o,a,s,u;if(t=t.toLowerCase(),null!=M.colors&&M.colors[t])return C(M.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=u=0;u<=3;i=++u)s[i]=+s[i];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=e=0;e<=2;i=++e)s[i]=_t(2.55*s[i]);s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=r=0;r<=2;i=++r)s[i]=_t(2.55*s[i]);s[3]=+s[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=N(n))[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=N(n))[3]=+o[4]);return s},ot=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(_t).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(_t).join(",")+","+t[3]+")":void 0},vt=function(t){return _t(100*t)/100},k=function(t,e){var r;return r=e<1?"hsla":"hsl",t[0]=vt(t[0]||0),t[1]=vt(100*t[1])+"%",t[2]=vt(100*t[2])+"%","hsla"===r&&(t[3]=e),r+"("+t.join(",")+")"},p.css=function(t){return O(t)},M.css=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["css"]),(function(){}))},n.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?ot(this._rgb):"hsl"===t.slice(0,3)?k(this.hsl(),this.alpha()):void 0},p.named=function(t){return C(Ot[t])},h.push({p:5,test:function(t){if(1===arguments.length&&null!=Ot[t])return"named"}}),n.prototype.name=function(t){var e,r;for(r in arguments.length&&(Ot[t]&&(this._rgb=C(Ot[t])),this._rgb[3]=1),e=this.hex("rgb"),Ot)if(e===Ot[r])return r;return e},Z=function(){var t,e,r,n;return r=(n=Et(arguments))[0],t=n[1],e=n[2],[r,E(e*=i)*t,wt(e)*t]},W=function(){var t,e,r,n,i,o,a,s,u;return a=(r=Et(arguments))[0],i=r[1],o=r[2],t=(s=Z(a,i,o))[0],e=s[1],n=s[2],[(u=V(t,e,n))[0],u[1],n=u[2],r.length>3?r[3]:1]},q=function(){var t,e,r,n,i,o;return i=(o=Et(arguments))[0],t=o[1],e=o[2],r=Mt(t*t+e*e),n=(y(e,t)*u+360)%360,0===_t(1e4*r)&&(n=Number.NaN),[i,r,n]},ft=function(){var t,e,r,n,i,o,a;return i=(o=Et(arguments))[0],r=o[1],e=o[2],n=(a=ht(i,r,e))[0],t=a[1],e=a[2],q(n,t,e)},M.lch=function(){var t;return t=Et(arguments),new n(t,"lch")},M.hcl=function(){var t;return t=Et(arguments),new n(t,"hcl")},p.lch=W,p.hcl=function(){var t,e,r,n;return e=(n=Et(arguments))[0],t=n[1],r=n[2],W([r,t,e])},n.prototype.lch=function(){return ft(this._rgb)},n.prototype.hcl=function(){return ft(this._rgb).reverse()},it=function(t){var e,r,n,i,o,a;return null==t&&(t="rgb"),o=(a=Et(arguments))[0],n=a[1],e=a[2],n/=255,e/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(n,e))))*(r=i<1?1/(1-i):0),(1-n-i)*r,(1-e-i)*r,i]},x=function(){var t,e,r,n,i,o;return r=(e=Et(arguments))[0],i=e[1],o=e[2],n=e[3],t=e.length>4?e[4]:1,1===n?[0,0,0,t]:[r>=1?0:255*(1-r)*(1-n),i>=1?0:255*(1-i)*(1-n),o>=1?0:255*(1-o)*(1-n),t]},p.cmyk=function(){return x(Et(arguments))},M.cmyk=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["cmyk"]),(function(){}))},n.prototype.cmyk=function(){return it(this._rgb)},p.gl=function(){var t,e,r,n,i;for(n=function(){var t,r;for(e in r=[],t=Et(arguments))i=t[e],r.push(i);return r}.apply(this,arguments),t=r=0;r<=2;t=++r)n[t]*=255;return n},M.gl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["gl"]),(function(){}))},n.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},pt=function(t,e,r){var n;return t=(n=Et(arguments))[0],e=n[1],r=n[2],.2126*(t=J(t))+.7152*(e=J(e))+.0722*(r=J(r))},J=function(t){return(t/=255)<=.03928?t/12.92:nt((t+.055)/1.055,2.4)},U=function(t,e,r,i){var o,a;return o=t._rgb,a=e._rgb,new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["rgb",U]),n.prototype.luminance=function(t,e){var r,n,i,o,a;return null==e&&(e="rgb"),arguments.length?(o=this._rgb,0===t?o=[0,0,0,this._rgb[3]]:1===t?o=[255,255,255,this[3]]:(r=pt(this._rgb),n=1e-7,i=20,a=function(r,o){var s,u;return s=(u=r.interpolate(o,.5,e)).luminance(),Math.abs(t-s)<n||!i--?u:s>t?a(r,u):a(u,o)},o=r>t?a(M("black"),this).rgba():a(this,M("white")).rgba()),M(o).alpha(this.alpha())):pt(this._rgb)},St=function(t){var e,r,n,i;return(i=t/100)<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*K(r),e=i<20?0:.8274096064007395*(e=i-10)-254.76935184120902+115.67994401066147*K(e)):(n=351.97690566805693+.114206453784165*(n=i-55)-40.25366309332127*K(n),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*K(r),e=255),[n,r,e]},mt=function(){var t,e,r,n,i,o,a,s;for(i=(o=Et(arguments))[0],o[1],t=o[2],n=1e3,r=4e4,e=.4;r-n>e;)(a=St(s=.5*(r+n)))[2]/a[0]>=t/i?r=s:n=s;return _t(s)},M.temperature=M.kelvin=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["temperature"]),(function(){}))},p.temperature=p.kelvin=p.K=St,n.prototype.temperature=function(){return mt(this._rgb)},n.prototype.kelvin=n.prototype.temperature,M.contrast=function(t,e){var r,i,o,a;return"string"!==(o=xt(t))&&"number"!==o||(t=new n(t)),"string"!==(a=xt(e))&&"number"!==a||(e=new n(e)),(r=t.luminance())>(i=e.luminance())?(r+.05)/(i+.05):(i+.05)/(r+.05)},M.distance=function(t,e,r){var i,o,a,s,u,l,c;for(o in null==r&&(r="lab"),"string"!==(u=xt(t))&&"number"!==u||(t=new n(t)),"string"!==(l=xt(e))&&"number"!==l||(e=new n(e)),a=t.get(r),s=e.get(r),c=0,a)c+=(i=(a[o]||0)-(s[o]||0))*i;return Math.sqrt(c)},M.deltaE=function(t,e,r,i){var o,s,u,l,c,h,f,p,d,g,v,_,b,w,M,S,x,O,P,T,I,L,R,C;for(null==r&&(r=1),null==i&&(i=1),"string"!==(M=xt(t))&&"number"!==M||(t=new n(t)),"string"!==(S=xt(e))&&"number"!==S||(e=new n(e)),o=(x=t.lab())[0],u=x[1],c=x[2],s=(O=e.lab())[0],l=O[1],h=O[2],f=Mt(u*u+c*c),p=Mt(l*l+h*h),T=o<16?.511:.040975*o/(1+.01765*o),P=.0638*f/(1+.0131*f)+.638,w=f<1e-6?0:180*y(c,u)/a;w<0;)w+=360;for(;w>=360;)w-=360;return I=w>=164&&w<=345?.56+m(.2*E(a*(w+168)/180)):.36+m(.4*E(a*(w+35)/180)),b=Mt((d=f*f*f*f)/(d+1900)),Mt((L=(o-s)/(r*T))*L+(R=(_=f-p)/(i*P))*R+((g=u-l)*g+(v=c-h)*v-_*_)/((C=P*(b*I+1-b))*C))},n.prototype.get=function(t){var e,r,n,i,o;return this,n=(i=t.split("."))[0],e=i[1],o=this[n](),e?(r=n.indexOf(e))>-1?o[r]:console.warn("unknown channel "+e+" in mode "+n):o},n.prototype.set=function(t,e){var r,n,i,o,a;if(this,i=(o=t.split("."))[0],r=o[1])if(a=this[i](),(n=i.indexOf(r))>-1)if("string"===xt(e))switch(e.charAt(0)){case"+":case"-":a[n]+=+e;break;case"*":a[n]*=+e.substr(1);break;case"/":a[n]/=+e.substr(1);break;default:a[n]=+e}else a[n]=e;else console.warn("unknown channel "+r+" in mode "+i);else a=e;return M(a,i).alpha(this.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(t){return arguments.length?M.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},n.prototype.darken=function(t){var e;return null==t&&(t=1),this,(e=this.lab())[0]-=o.Kn*t,M.lab(e).alpha(this.alpha())},n.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(t){var e;return null==t&&(t=1),this,(e=this.lch())[1]+=t*o.Kn,e[1]<0&&(e[1]=0),M.lch(e).alpha(this.alpha())},n.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},n.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),M(e[0]*t,e[1]*t,e[2]*t,t)},tt=function(t,e){return t*e/255},P=function(t,e){return t>e?e:t},H=function(t,e){return t>e?t:e},bt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},rt=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},w=function(t,e){return 255*(1-(1-e/255)/(t/255))},T=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t},(v=function(t,e,r){if(!v[r])throw"unknown blend mode "+r;return v[r](t,e)}).normal=(_=function(t){return function(e,r){var n,i;return n=M(r).rgb(),i=M(e).rgb(),M(t(n,i),"rgb")}})((I=function(t){return function(e,r){var n,i,o;for(o=[],n=i=0;i<=3;n=++i)o[n]=t(e[n],r[n]);return o}})((function(t,e){return t}))),v.multiply=_(I(tt)),v.screen=_(I(bt)),v.overlay=_(I(rt)),v.darken=_(I(P)),v.lighten=_(I(H)),v.dodge=_(I(T)),v.burn=_(I(w)),M.blend=v,M.analyze=function(t){var e,r,n,i;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,e=t.length;r<e;r++)null==(i=t[r])||isNaN(i)||(n.values.push(i),n.sum+=i,i<n.min&&(n.min=i),i>n.max&&(n.max=i),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return M.limits(n,t,e)},n},M.scale=function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g,v,_,b,w,S;return c="rgb",h=M("#ccc"),m=0,!1,a=[0,1],d=[],p=[0,0],r=!1,i=[],f=!1,l=0,u=1,o=!1,n={},y=!0,s=1,w=function(t){var e,r,n,o,a,s;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===xt(t)&&null!=M.brewer&&(t=M.brewer[t]||M.brewer[t.toLowerCase()]||t),"array"===xt(t)){for(1===t.length&&(t=[t[0],t[0]]),e=n=0,o=(t=t.slice(0)).length-1;0<=o?n<=o:n>=o;e=0<=o?++n:--n)r=t[e],"string"===xt(r)&&(t[e]=M(r));for(d.length=0,e=s=0,a=t.length-1;0<=a?s<=a:s>=a;e=0<=a?++s:--s)d.push(e/(t.length-1))}return b(),i=t},v=function(t){var e,n;if(null!=r){for(n=r.length-1,e=0;e<n&&t>=r[e];)e++;return e-1}return 0},S=function(t){return t},function(t){var e,n,i,o,a;return a=t,r.length>2&&(o=r.length-1,e=v(t),i=r[0]+(r[1]-r[0])*(0+.5*m),n=r[o-1]+(r[o]-r[o-1])*(1-.5*m),a=l+(r[e]+.5*(r[e+1]-r[e])-i)/(n-i)*(u-l)),a},_=function(t,e){var o,a,f,m,g,_,b;if(null==e&&(e=!1),isNaN(t)||null===t)return h;if(b=e?t:r&&r.length>2?v(t)/(r.length-2):u!==l?(t-l)/(u-l):1,e||(b=S(b)),1!==s&&(b=nt(b,s)),b=p[0]+b*(1-p[0]-p[1]),b=Math.min(1,Math.max(0,b)),f=Math.floor(1e4*b),y&&n[f])o=n[f];else{if("array"===xt(i))for(a=m=0,_=d.length-1;0<=_?m<=_:m>=_;a=0<=_?++m:--m){if(b<=(g=d[a])){o=i[a];break}if(b>=g&&a===d.length-1){o=i[a];break}if(b>g&&b<d[a+1]){b=(b-g)/(d[a+1]-g),o=M.interpolate(i[a],i[a+1],b,c);break}}else"function"===xt(i)&&(o=i(b));y&&(n[f]=o)}return o},b=function(){return n={}},w(t),(g=function(t){var e;return e=M(_(t)),f&&e[f]?e[f]():e}).classes=function(t){var e;return null!=t?("array"===xt(t)?(r=t,a=[t[0],t[t.length-1]]):(e=M.analyze(a),r=0===t?[e.min,e.max]:M.limits(e,"e",t)),g):r},g.domain=function(t){var e,r,n,o,s,c,h;if(!arguments.length)return a;if(l=t[0],u=t[t.length-1],d=[],n=i.length,t.length===n&&l!==u)for(s=0,o=t.length;s<o;s++)r=t[s],d.push((r-l)/(u-l));else for(e=h=0,c=n-1;0<=c?h<=c:h>=c;e=0<=c?++h:--h)d.push(e/(n-1));return a=[l,u],g},g.mode=function(t){return arguments.length?(c=t,b(),g):c},g.range=function(t,e){return w(t),g},g.out=function(t){return f=t,g},g.spread=function(t){return arguments.length?(m=t,g):m},g.correctLightness=function(t){return null==t&&(t=!0),o=t,b(),S=o?function(t){var e,r,n,i,o,a,s,u,l;for(e=_(0,!0).lab()[0],r=_(1,!0).lab()[0],s=e>r,n=_(t,!0).lab()[0],i=n-(o=e+(r-e)*t),u=0,l=1,a=20;Math.abs(i)>.01&&a-- >0;)s&&(i*=-1),i<0?(u=t,t+=.5*(l-t)):(l=t,t+=.5*(u-t)),n=_(t,!0).lab()[0],i=n-o;return t}:function(t){return t},g},g.padding=function(t){return null!=t?("number"===xt(t)&&(t=[t,t]),p=t,g):p},g.colors=function(e,n){var o,s,u,l,c,h,f,p;if(arguments.length<2&&(n="hex"),c=[],0===arguments.length)c=i.slice(0);else if(1===e)c=[g(.5)];else if(e>1)s=a[0],o=a[1]-s,c=function(){h=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)h.push(t);return h}.apply(this).map((function(t){return g(s+t/(e-1)*o)}));else{if(t=[],f=[],r&&r.length>2)for(u=p=1,l=r.length;1<=l?p<l:p>l;u=1<=l?++p:--p)f.push(.5*(r[u-1]+r[u]));else f=a;c=f.map((function(t){return g(t)}))}return M[n]&&(c=c.map((function(t){return t[n]()}))),c},g.cache=function(t){return null!=t?(y=t,g):y},g.gamma=function(t){return null!=t?(s=t,g):s},g.nodata=function(t){return null!=t?(h=M(t),g):h},g},null==M.scales&&(M.scales={}),M.scales.cool=function(){return M.scale([M.hsl(180,1,.9),M.hsl(250,.7,.4)])},M.scales.hot=function(){return M.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},M.analyze=function(t,e,r){var n,i,o,a,s,u;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},u=function(t,i){if(r(t,i))return null!=e&&"function"===xt(e)?n(e(t)):null!=e&&"string"===xt(e)||"number"===xt(e)?n(t[e]):n(t)},"array"===xt(t))for(a=0,o=t.length;a<o;a++)u(t[a]);else for(i in t)u(t[i],i);return s.domain=[s.min,s.max],s.limits=function(t,e){return M.limits(s,t,e)},s},M.limits=function(t,e,r){var n,i,o,a,s,u,l,c,h,f,p,d,y,g,v,_,b,w,S,x,E,O,P,T,I,R,C,A,k,N,j,F,D,B,G,z,U,q,V,Y,Z,W,H,X,J,Q,tt,et,rt,it,ot,at,st,ut,lt;if(null==e&&(e="equal"),null==r&&(r=7),"array"===xt(t)&&(t=M.analyze(t)),I=t.min,$=t.max,t.sum,ut=t.values.sort((function(t,e){return t-e})),1===r)return[I,$];if(P=[],"c"===e.substr(0,1)&&(P.push(I),P.push($)),"e"===e.substr(0,1)){for(P.push(I),x=j=1,G=r-1;1<=G?j<=G:j>=G;x=1<=G?++j:--j)P.push(I+x/r*($-I));P.push($)}else if("l"===e.substr(0,1)){if(I<=0)throw"Logarithmic scales are only possible for values > 0";for(R=Math.LOG10E*K(I),T=Math.LOG10E*K($),P.push(I),x=lt=1,z=r-1;1<=z?lt<=z:lt>=z;x=1<=z?++lt:--lt)P.push(nt(10,R+x/r*(T-R)));P.push($)}else if("q"===e.substr(0,1)){for(P.push(I),x=n=1,W=r-1;1<=W?n<=W:n>=W;x=1<=W?++n:--n)F=(ut.length-1)*x/r,(D=L(F))===F?P.push(ut[D]):(B=F-D,P.push(ut[D]*(1-B)+ut[D+1]*B));P.push($)}else if("k"===e.substr(0,1)){for(A=ut.length,g=new Array(A),w=new Array(r),it=!0,k=0,_=null,(_=[]).push(I),x=i=1,H=r-1;1<=H?i<=H:i>=H;x=1<=H?++i:--i)_.push(I+x/r*($-I));for(_.push($);it;){for(E=o=0,X=r-1;0<=X?o<=X:o>=X;E=0<=X?++o:--o)w[E]=0;for(x=a=0,J=A-1;0<=J?a<=J:a>=J;x=0<=J?++a:--a){for(st=ut[x],C=Number.MAX_VALUE,E=s=0,Q=r-1;0<=Q?s<=Q:s>=Q;E=0<=Q?++s:--s)(S=m(_[E]-st))<C&&(C=S,v=E);w[v]++,g[x]=v}for(N=new Array(r),E=u=0,tt=r-1;0<=tt?u<=tt:u>=tt;E=0<=tt?++u:--u)N[E]=null;for(x=l=0,et=A-1;0<=et?l<=et:l>=et;x=0<=et?++l:--l)null===N[b=g[x]]?N[b]=ut[x]:N[b]+=ut[x];for(E=c=0,rt=r-1;0<=rt?c<=rt:c>=rt;E=0<=rt?++c:--c)N[E]*=1/w[E];for(it=!1,E=h=0,U=r-1;0<=U?h<=U:h>=U;E=0<=U?++h:--h)if(N[E]!==_[x]){it=!0;break}_=N,++k>200&&(it=!1)}for(O={},E=f=0,q=r-1;0<=q?f<=q:f>=q;E=0<=q?++f:--f)O[E]=[];for(x=p=0,V=A-1;0<=V?p<=V:p>=V;x=0<=V?++p:--p)O[b=g[x]].push(ut[x]);for(ot=[],E=d=0,Y=r-1;0<=Y?d<=Y:d>=Y;E=0<=Y?++d:--d)ot.push(O[E][0]),ot.push(O[E][O[E].length-1]);for(ot=ot.sort((function(t,e){return t-e})),P.push(ot[0]),x=y=1,Z=ot.length-1;y<=Z;x=y+=2)at=ot[x],isNaN(at)||-1!==P.indexOf(at)||P.push(at)}return P},A=function(t,e,r){var n,i,o,a;return t=(n=Et(arguments))[0],e=n[1],r=n[2],isNaN(t)&&(t=0),(t/=360)<1/3?o=1-((i=(1-e)/3)+(a=(1+e*E(l*t)/E(s-l*t))/3)):t<2/3?i=1-((a=(1-e)/3)+(o=(1+e*E(l*(t-=1/3))/E(s-l*t))/3)):a=1-((o=(1-e)/3)+(i=(1+e*E(l*(t-=2/3))/E(s-l*t))/3)),[255*(a=X(r*a*3)),255*(o=X(r*o*3)),255*(i=X(r*i*3)),n.length>3?n[3]:1]},ut=function(){var t,e,r,n,i,o,a;return i=(o=Et(arguments))[0],e=o[1],t=o[2],l=2*Math.PI,i/=255,e/=255,t/=255,0===(a=1-Math.min(i,e,t)/(n=(i+e+t)/3))?r=0:(r=(i-e+(i-t))/2,r/=Math.sqrt((i-e)*(i-e)+(i-t)*(e-t)),r=Math.acos(r),t>e&&(r=l-r),r/=l),[360*r,a,n]},M.hsi=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,It.call(arguments).concat(["hsi"]),(function(){}))},p.hsi=A,n.prototype.hsi=function(){return ut(this._rgb)},D=function(t,e,r,n){var i,o,a,s,u,l,c,h,f,p;return"hsl"===n?(f=t.hsl(),p=e.hsl()):"hsv"===n?(f=t.hsv(),p=e.hsv()):"hcg"===n?(f=t.hcg(),p=e.hcg()):"hsi"===n?(f=t.hsi(),p=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",f=t.hcl(),p=e.hcl()),"h"===n.substr(0,1)&&(o=f[0],c=f[1],s=f[2],a=p[0],h=p[1],u=p[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===n||(l=h)):(i=o,1!==u&&0!==u||"hsv"===n||(l=c)):i=o+r*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),null==l&&(l=c+r*(h-c)),M[n](i,l,s+r*(u-s))},z=function(t,e,r,n){var i,o;return i=t.num(),o=e.num(),M.num(i+(o-i)*r,"num")},(d=d.concat(function(){var t,e,r,n;for(n=[],e=0,t=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)Q=r[e],n.push([Q,D]);return n}())).push(["num",z]),B=function(t,e,r,i){var o,a;return o=t.lab(),a=e.lab(),new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["lab",B])}).call(this)}).call(this,r(9)(t))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(233),i=r(58),o=r(59);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(n)return G(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return P(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function b(t,e,r,n){return U(G(e,t.length-r),t,r,n)}function w(t,e,r,n){return U(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function M(t,e,r,n){return w(t,e,r,n)}function S(t,e,r,n){return U(z(e),t,r,n)}function x(t,e,r,n){return U(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return l(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=t.slice(e,r),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return M(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function I(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=B(t[o]);return i}function L(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function A(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,o){return o||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function F(t,e,r,n,o){return o||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:G(new u(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(5))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},function(t,e,r){"use strict";var n=e,i=r(10),o=r(6),a=r(94);n.assert=o,n.toArray=a.toArray,n.zero2=a.zero2,n.toHex=a.toHex,n.encode=a.encode,n.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),a=0;a<n.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1)}return n},n.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var a,s,u=t.andln(3)+i&3,l=e.andln(3)+o&3;3===u&&(u=-1),3===l&&(l=-1),a=0==(1&u)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==l?u:-u,r[0].push(a),s=0==(1&l)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==u?l:-l,r[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},n.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(t){return"string"==typeof t?n.toArray(t,"hex"):t},n.intFromLE=function(t){return new i(t,"hex","le")}},function(t,e,r){"use strict";var n=r(6),i=r(0);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function s(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var a=t.charCodeAt(i);a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=63&a|128):o(t,i)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++i)),r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=63&a|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=63&a|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=s(t[r].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=a(i)),r+=u(i.toString(16))}return r},e.zero2=s,e.zero8=u,e.join32=function(t,e,r,i){var o=r-e;n(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4){var l;l="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=l>>>0}return a},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,o,a,s){var u=0,l=e;return u+=(l=l+n>>>0)<e?1:0,u+=(l=l+o>>>0)<o?1:0,t+r+i+a+(u+=(l=l+s>>>0)<s?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,o,a,s){return e+n+o+s>>>0},e.sum64_5_hi=function(t,e,r,n,i,o,a,s,u,l){var c=0,h=e;return c+=(h=h+n>>>0)<e?1:0,c+=(h=h+o>>>0)<o?1:0,c+=(h=h+s>>>0)<s?1:0,t+r+i+a+u+(c+=(h=h+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,o,a,s,u,l){return e+n+o+s+l>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(287).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,M=0|a[4],S=8191&M,x=M>>>13,E=0|a[5],O=8191&E,P=E>>>13,T=0|a[6],I=8191&T,L=T>>>13,R=0|a[7],C=8191&R,A=R>>>13,k=0|a[8],N=8191&k,j=k>>>13,F=0|a[9],D=8191&F,B=F>>>13,G=0|s[0],z=8191&G,U=G>>>13,q=0|s[1],V=8191&q,Y=q>>>13,Z=0|s[2],W=8191&Z,H=Z>>>13,X=0|s[3],K=8191&X,J=X>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,z),i=(i=Math.imul(d,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(v,z)|0,o=Math.imul(v,U),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,Y)|0;var vt=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,U))+Math.imul(w,z)|0,o=Math.imul(w,U),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,W)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,U))+Math.imul(x,z)|0,o=Math.imul(x,U),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,U))+Math.imul(P,z)|0,o=Math.imul(P,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,U))+Math.imul(L,z)|0,o=Math.imul(L,U),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var Mt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(A,z)|0,o=Math.imul(A,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var St=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,U))+Math.imul(j,z)|0,o=Math.imul(j,U),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var xt=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(B,z)|0,o=Math.imul(B,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Y))+Math.imul(B,V)|0,o=Math.imul(B,Y),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,at)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,H))+Math.imul(B,W)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Pt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ft)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ft)|0;var Tt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(B,$)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var It=(l+(n=n+Math.imul(S,dt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(x,dt)|0))<<13)|0;l=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(A,dt)|0))<<13)|0;l=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var At=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863;var kt=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=Mt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=Ot,u[11]=Pt,u[12]=Tt,u[13]=It,u[14]=Lt,u[15]=Rt,u[16]=Ct,u[17]=At,u[18]=kt,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(M,v),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return g[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new x(t)},i(x,S),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){var n=r(1).Buffer,i=r(247).Transform,o=r(21).StringDecoder;function a(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(0)(a,i),a.prototype.update=function(t,e,r){"string"==typeof t&&(t=n.from(t,e));var i=this._update(t);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){n=t}finally{r(n)}},a.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},a.prototype._finalOrDigest=function(t){var e=this.__final()||n.alloc(0);return t&&(e=this._toString(e,t,!0)),e},a.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n},t.exports=a},function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(n)},function(t,e,r){"use strict";var n=r(26),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var o=Object.create(r(22));o.inherits=r(0);var a=r(72),s=r(40);o.inherits(h,a);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,r){"use strict";(function(e,n){var i=r(1).Buffer,o=e.crypto||e.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(t);if(t>0)if(t>65536)for(var a=0;a<t;a+=65536)o.getRandomValues(r.slice(a,a+65536));else o.getRandomValues(r);if("function"==typeof e)return n.nextTick((function(){e(null,r)}));return r}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(5),r(3))},function(t,e,r){"use strict";var n={};function i(t,e,r){r||(r=Error);var i=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,a,s;if("string"==typeof e&&(i="not ",e.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))s="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var u=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(u," ").concat(n," ").concat(o(e,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},function(t,e,r){"use strict";(function(e){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=l;var i=r(63),o=r(67);r(0)(l,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(t){if(!(this instanceof l))return new l(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r(3))},function(t,e,r){var n=r(1).Buffer;function i(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=n.from(t,e));for(var r=this._block,i=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var u=a%i,l=Math.min(o-s,i-u),c=0;c<l;c++)r[u+c]=t[s+c];s+=l,(a+=l)%i==0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},function(t,e){t.exports='<div class="m-geojson-content">\n   {{#each features}}\n   <div id="{{id}}" class="result">\n      {{#each attributes}}\n      <table>\n         <tr>\n            <td class="key">{{key}}</td>\n            <td class="value">{{{value}}}</td>\n         </tr>\n      </table>\n      {{/each}}\n   </div>\n   <div class="m-separator"></div>\n   {{/each}}\n</div>'},function(t,e,r){"use strict";var n=r(0),i=r(34),o=r(36),a=r(37),s=r(11);function u(t){s.call(this,"digest"),this._hash=t}n(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new o:new u(a(t))}},function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&g(t,"error",e,r)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,a,s;if(l(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var l=u.length,c=y(u,l);for(r=0;r<l;++r)o(c[r],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,o,a;if(l(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){"use strict";var n=r(1).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function c(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,r(4).Buffer)},function(t,e,r){(function(e){t.exports=function(t,r){for(var n=Math.min(t.length,r.length),i=new e(n),o=0;o<n;++o)i[o]=t[o]^r[o];return i}}).call(this,r(4).Buffer)},function(t,e,r){"use strict";var n=r(8),i=r(6);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(t,e,r){"use strict";const n=r(0),i=r(52).Reporter,o=r(50).Buffer;function a(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function s(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return s.isEncoderBuffer(t)||(t=new s(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(a,i),e.DecoderBuffer=a,a.isDecoderBuffer=function(t){if(t instanceof a)return!0;return"object"==typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},a.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},a.prototype.restore=function(t){const e=new a(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},a.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new a(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},a.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=s,s.isEncoderBuffer=function(t){if(t instanceof s)return!0;return"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},s.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(t,e),e+=r.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},function(t,e,r){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,r(3))},function(t,e,r){var n=r(1).Buffer;function i(t){n.isBuffer(t)||(t=n.from(t));for(var e=t.length/4|0,r=new Array(e),i=0;i<e;i++)r[i]=t.readUInt32BE(4*i);return r}function o(t){for(;0<t.length;t++)t[0]=0}function a(t,e,r,n,i){for(var o,a,s,u,l=r[0],c=r[1],h=r[2],f=r[3],p=t[0]^e[0],d=t[1]^e[1],m=t[2]^e[2],y=t[3]^e[3],g=4,v=1;v<i;v++)o=l[p>>>24]^c[d>>>16&255]^h[m>>>8&255]^f[255&y]^e[g++],a=l[d>>>24]^c[m>>>16&255]^h[y>>>8&255]^f[255&p]^e[g++],s=l[m>>>24]^c[y>>>16&255]^h[p>>>8&255]^f[255&d]^e[g++],u=l[y>>>24]^c[p>>>16&255]^h[d>>>8&255]^f[255&m]^e[g++],p=o,d=a,m=s,y=u;return o=(n[p>>>24]<<24|n[d>>>16&255]<<16|n[m>>>8&255]<<8|n[255&y])^e[g++],a=(n[d>>>24]<<24|n[m>>>16&255]<<16|n[y>>>8&255]<<8|n[255&p])^e[g++],s=(n[m>>>24]<<24|n[y>>>16&255]<<16|n[p>>>8&255]<<8|n[255&d])^e[g++],u=(n[y>>>24]<<24|n[p>>>16&255]<<16|n[d>>>8&255]<<8|n[255&m])^e[g++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,r[a]=l,n[l]=a;var c=t[a],h=t[c],f=t[h],p=257*t[l]^16843008*l;i[0][a]=p<<24|p>>>8,i[1][a]=p<<16|p>>>16,i[2][a]=p<<8|p>>>24,i[3][a]=p,p=16843009*f^65537*h^257*c^16843008*a,o[0][l]=p<<24|p>>>8,o[1][l]=p<<16|p>>>16,o[2][l]=p<<8|p>>>24,o[3][l]=p,0===a?a=s=1:(a=c^t[t[t[f^c]]],s^=t[t[s]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function l(t){this._key=i(t),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=4*(r+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var a=i[o-1];o%e==0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=s[o/e|0]<<24):e>6&&o%e==4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),i[o]=i[o-e]^a}for(var l=[],c=0;c<n;c++){var h=n-c,f=i[h-(c%4?0:4)];l[c]=c<4||h<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(t){return a(t=i(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},l.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=n.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},l.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var r=a(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},l.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=l},function(t,e,r){var n=r(1).Buffer,i=r(34);t.exports=function(t,e,r,o){if(n.isBuffer(t)||(t=n.from(t,"binary")),e&&(n.isBuffer(e)||(e=n.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=r/8,s=n.alloc(a),u=n.alloc(o||0),l=n.alloc(0);a>0||o>0;){var c=new i;c.update(l),c.update(t),e&&c.update(e),l=c.digest();var h=0;if(a>0){var f=s.length-a;h=Math.min(a,l.length),l.copy(s,f,0,h),a-=h}if(h<l.length&&o>0){var p=u.length-o,d=Math.min(o,l.length-h);l.copy(u,p,h,h+d),o-=d}}return l.fill(0),{key:s,iv:u}}},function(t,e,r){"use strict";var n=r(10),i=r(7),o=i.getNAF,a=i.getJSF,s=i.assert;function u(t,e){this.type=t,this.p=new n(e.p,16),this.red=e.prime?n.red(e.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=e.n&&new n(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var r=t._getDoubles(),n=o(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var a,u,l=[];for(a=0;a<n.length;a+=r.step){u=0;for(var c=a+r.step-1;c>=a;c--)u=(u<<1)+n[c];l.push(u)}for(var h=this.jpoint(null,null,null),f=this.jpoint(null,null,null),p=i;p>0;p--){for(a=0;a<l.length;a++)(u=l[a])===p?f=f.mixedAdd(r.points[a]):u===-p&&(f=f.mixedAdd(r.points[a].neg()));h=h.add(f)}return h.toP()},u.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,a=o(e,r,this._bitLength),u=this.jpoint(null,null,null),l=a.length-1;l>=0;l--){for(var c=0;l>=0&&0===a[l];l--)c++;if(l>=0&&c++,u=u.dblp(c),l<0)break;var h=a[l];s(0!==h),u="affine"===t.type?h>0?u.mixedAdd(i[h-1>>1]):u.mixedAdd(i[-h-1>>1].neg()):h>0?u.add(i[h-1>>1]):u.add(i[-h-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,r,n,i){var s,u,l,c=this._wnafT1,h=this._wnafT2,f=this._wnafT3,p=0;for(s=0;s<n;s++){var d=(l=e[s])._getNAFPoints(t);c[s]=d.wnd,h[s]=d.points}for(s=n-1;s>=1;s-=2){var m=s-1,y=s;if(1===c[m]&&1===c[y]){var g=[e[m],null,null,e[y]];0===e[m].y.cmp(e[y].y)?(g[1]=e[m].add(e[y]),g[2]=e[m].toJ().mixedAdd(e[y].neg())):0===e[m].y.cmp(e[y].y.redNeg())?(g[1]=e[m].toJ().mixedAdd(e[y]),g[2]=e[m].add(e[y].neg())):(g[1]=e[m].toJ().mixedAdd(e[y]),g[2]=e[m].toJ().mixedAdd(e[y].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],_=a(r[m],r[y]);for(p=Math.max(_[0].length,p),f[m]=new Array(p),f[y]=new Array(p),u=0;u<p;u++){var b=0|_[0][u],w=0|_[1][u];f[m][u]=v[3*(b+1)+(w+1)],f[y][u]=0,h[m]=g}}else f[m]=o(r[m],c[m],this._bitLength),f[y]=o(r[y],c[y],this._bitLength),p=Math.max(f[m].length,p),p=Math.max(f[y].length,p)}var M=this.jpoint(null,null,null),S=this._wnafT4;for(s=p;s>=0;s--){for(var x=0;s>=0;){var E=!0;for(u=0;u<n;u++)S[u]=0|f[u][s],0!==S[u]&&(E=!1);if(!E)break;x++,s--}if(s>=0&&x++,M=M.dblp(x),s<0)break;for(u=0;u<n;u++){var O=S[u];0!==O&&(O>0?l=h[u][O-1>>1]:O<0&&(l=h[u][-O-1>>1].neg()),M="affine"===l.type?M.mixedAdd(l):M.add(l))}}for(s=0;s<n;s++)h[s]=null;return i?M:M.toP()},u.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(t){return this.encode(t,!0)},l.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},l.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},l.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},l.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},l.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},l.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}},function(t,e,r){var n=r(305),i=r(313),o=r(314),a=r(42),s=r(79),u=r(1).Buffer;function l(t){var e;"object"!=typeof t||u.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=u.from(t));var r,l,c=o(t,e),h=c.tag,f=c.data;switch(h){case"CERTIFICATE":l=n.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=n.PublicKey.decode(f,"der")),r=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=n.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":f=function(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[t.algorithm.decrypt.cipher.algo.join(".")],l=t.algorithm.decrypt.cipher.iv,c=t.subjectPrivateKey,h=parseInt(o.split("-")[1],10)/8,f=s.pbkdf2Sync(e,r,n,h,"sha1"),p=a.createDecipheriv(o,f,l),d=[];return d.push(p.update(c)),d.push(p.final()),u.concat(d)}(f=n.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(r=(l=n.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:n.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=n.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=n.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+h)}}t.exports=l,l.signature=n.signature},function(t,e,r){
/**!

 @license
 handlebars v4.7.7

Copyright (C) 2011-2019 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(){var t=f();return t.compile=function(e,r){return u.compile(e,r,t)},t.precompile=function(e,r){return u.precompile(e,r,t)},t.AST=a.default,t.Compiler=u.Compiler,t.JavaScriptCompiler=l.default,t.Parser=s.parser,t.parse=s.parse,t.parseWithoutProcessing=s.parseWithoutProcessing,t}var i=r(1).default;e.__esModule=!0;var o=i(r(2)),a=i(r(45)),s=r(46),u=r(51),l=i(r(52)),c=i(r(49)),h=i(r(44)),f=o.default.create,p=n();p.create=n,h.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,r){"use strict";function n(){var t=new a.HandlebarsEnvironment;return l.extend(t,a),t.SafeString=s.default,t.Exception=u.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var i=r(3).default,o=r(1).default;e.__esModule=!0;var a=i(r(4)),s=o(r(37)),u=o(r(6)),l=i(r(5)),c=i(r(38)),h=o(r(44)),f=n();f.create=n,h.default(f),f.default=f,e.default=f,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},e.__esModule=!0},function(t,e,r){"use strict";function n(t,e,r){this.helpers=t||{},this.partials=e||{},this.decorators=r||{},s.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var i=r(1).default;e.__esModule=!0,e.HandlebarsEnvironment=n;var o=r(5),a=i(r(6)),s=r(10),u=r(30),l=i(r(32)),c=r(33);e.VERSION="4.7.7",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var h="[object Object]";n.prototype={constructor:n,logger:l.default,log:l.default.log,registerHelper:function(t,e){if(o.toString.call(t)===h){if(e)throw new a.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===h)o.extend(this.partials,t);else{if(void 0===e)throw new a.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===h){if(e)throw new a.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var f=l.default.log;e.log=f,e.createFrame=o.createFrame,e.logger=l.default},function(t,e){"use strict";function r(t){return i[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&(t[r]=arguments[e][r]);return t}e.__esModule=!0,e.extend=n,e.indexOf=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return a.test(t)?t.replace(o,r):t},e.isEmpty=function(t){return!t&&0!==t||!(!l(t)||0!==t.length)},e.createFrame=function(t){var e=n({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,a=/[&<>"'`=]/,s=Object.prototype.toString;e.toString=s;var u=function(t){return"function"==typeof t};u(/x/)&&(e.isFunction=u=function(t){return"function"==typeof t&&"[object Function]"===s.call(t)}),e.isFunction=u;var l=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===s.call(t)};e.isArray=l},function(t,e,r){"use strict";function n(t,e){var r=e&&e.loc,a=void 0,s=void 0,u=void 0,l=void 0;r&&(a=r.start.line,s=r.end.line,u=r.start.column,l=r.end.column,t+=" - "+a+":"+u);for(var c=Error.prototype.constructor.call(this,t),h=0;h<o.length;h++)this[o[h]]=c[o[h]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,this.endLineNumber=s,i?(Object.defineProperty(this,"column",{value:u,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=u,this.endColumn=l))}catch(t){}}var i=r(7).default;e.__esModule=!0;var o=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,r){t.exports={default:r(8),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e,r){return n.setDesc(t,e,r)}},function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){i.default(t),o.default(t),a.default(t),s.default(t),u.default(t),l.default(t),c.default(t)},e.moveHelperToHooks=function(t,e,r){t.helpers[e]&&(t.hooks[e]=t.helpers[e],r||delete t.helpers[e])};var i=n(r(11)),o=n(r(12)),a=n(r(25)),s=n(r(26)),u=n(r(27)),l=n(r(28)),c=n(r(29))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,r){var i=r.inverse,o=r.fn;if(!0===e)return o(this);if(!1===e||null==e)return i(this);if(n.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):i(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return o(e,r)}))},t.exports=e.default},function(t,e,r){(function(n){"use strict";var i=r(13).default,o=r(1).default;e.__esModule=!0;var a=r(5),s=o(r(6));e.default=function(t){t.registerHelper("each",(function(t,e){function r(e,r,n){h&&(h.key=e,h.index=r,h.first=0===r,h.last=!!n,f&&(h.contextPath=f+e)),c+=o(t[e],{data:h,blockParams:a.blockParams([t[e],e],[f+e,null])})}if(!e)throw new s.default("Must pass iterator to #each");var o=e.fn,u=e.inverse,l=0,c="",h=void 0,f=void 0;if(e.data&&e.ids&&(f=a.appendContextPath(e.data.contextPath,e.ids[0])+"."),a.isFunction(t)&&(t=t.call(this)),e.data&&(h=a.createFrame(e.data)),t&&"object"==typeof t)if(a.isArray(t))for(var p=t.length;l<p;l++)l in t&&r(l,l,l===t.length-1);else if(n.Symbol&&t[n.Symbol.iterator]){for(var d=[],m=t[n.Symbol.iterator](),y=m.next();!y.done;y=m.next())d.push(y.value);for(p=(t=d).length;l<p;l++)r(l,l,l===t.length-1)}else!function(){var e=void 0;i(t).forEach((function(t){void 0!==e&&r(e,l-1),e=t,l++})),void 0!==e&&r(e,l-1,!0)}();return 0===l&&(c=u(this)),c}))},t.exports=e.default}).call(e,function(){return this}())},function(t,e,r){t.exports={default:r(14),__esModule:!0}},function(t,e,r){r(15),t.exports=r(21).Object.keys},function(t,e,r){var n=r(16);r(18)("keys",(function(t){return function(e){return t(n(e))}}))},function(t,e,r){var n=r(17);t.exports=function(t){return Object(n(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(19),i=r(21),o=r(24);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(t,e,r){var n=r(20),i=r(21),o=r(22),a="prototype",s=function(t,e,r){var u,l,c,h=t&s.F,f=t&s.G,p=t&s.S,d=t&s.P,m=t&s.B,y=t&s.W,g=f?i:i[e]||(i[e]={}),v=f?n:p?n[e]:(n[e]||{})[a];for(u in f&&(r=e),r)(l=!h&&v&&u in v)&&u in g||(c=l?v[u]:r[u],g[u]=f&&"function"!=typeof v[u]?r[u]:m&&l?o(c,n):y&&v[u]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[a]=t[a],e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((g[a]||(g[a]={}))[u]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(23);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=n(r(6));e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(5),o=n(r(6));e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,r){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),e[0]=i,t.log.apply(t,e)}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,r){return t?r.lookupProperty(t,e):t}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(5),o=n(r(6));e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(t)&&(t=t.call(this));var r=e.fn;if(i.isEmpty(t))return e.inverse(this);var n=e.data;return e.data&&e.ids&&((n=i.createFrame(e.data)).contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),r(t,{data:n,blockParams:i.blockParams([t],[n&&n.contextPath])})}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){i.default(t)};var i=n(r(31))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerDecorator("inline",(function(t,e,r,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var a=r.partials;r.partials=n.extend({},a,e.partials);var s=t(i,o);return r.partials=a,s}),e.partials[i.args[0]]=i.fn,o}))},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];console[e].apply(console,n)}}};e.default=i,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==l[t]&&(l[t]=!0,u.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}var i=r(34).default,o=r(13).default,a=r(3).default;e.__esModule=!0,e.createProtoAccessControl=function(t){var e=i(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var r=i(null);return r.__proto__=!1,{properties:{whitelist:s.createNewLookupObject(r,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:s.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,r){return n("function"==typeof t?e.methods:e.properties,r)},e.resetLoggedProperties=function(){o(l).forEach((function(t){delete l[t]}))};var s=r(36),u=a(r(32)),l=i(null)},function(t,e,r){t.exports={default:r(35),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){"use strict";var n=r(34).default;e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i.extend.apply(void 0,[n(null)].concat(e))};var i=r(5)},function(t,e){"use strict";function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r,n,i,o,s){function u(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||e==s[0]||e===t.nullContext&&null===s[0]||(a=[e].concat(s)),r(t,e,t.helpers,t.partials,i.data||n,o&&[i.blockParams].concat(o),a)}return(u=a(r,u,t,s,n,o)).program=e,u.depth=s?s.length:0,u.blockParams=i||0,u}function i(){return""}function o(t,e){return e&&"root"in e||((e=e?p.createFrame(e):{}).root=t),e}function a(t,e,r,n,i,o){if(t.decorator){var a={};e=t.decorator(e,a,r,n&&n[0],i,o,n),h.extend(e,a)}return e}var s=r(39).default,u=r(13).default,l=r(3).default,c=r(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,r=p.COMPILER_REVISION;if(!(e>=p.LAST_COMPATIBLE_COMPILER_REVISION&&e<=p.COMPILER_REVISION)){if(e<p.LAST_COMPATIBLE_COMPILER_REVISION){var n=p.REVISION_CHANGES[r],i=p.REVISION_CHANGES[e];throw new f.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new f.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){function r(e){function n(e){return""+t.main(l,e,l.helpers,l.partials,s,c,u)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=i.data;r._setup(i),!i.partial&&t.useData&&(s=o(e,s));var u=void 0,c=t.useBlockParams?[]:void 0;return t.useDepths&&(u=i.depths?e!=i.depths[0]?[e].concat(i.depths):i.depths:[e]),(n=a(t.main,n,l,i.depths||[],s,c))(e,i)}if(!e)throw new f.default("No environment passed to template");if(!t||!t.main)throw new f.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i=t.compiler&&7===t.compiler[0],l={strict:function(t,e,r){if(!t||!(e in t))throw new f.default('"'+e+'" not defined in '+t,{loc:r});return l.lookupProperty(t,e)},lookupProperty:function(t,e){var r=t[e];return null==r||Object.prototype.hasOwnProperty.call(t,e)||y.resultIsAllowed(r,l.protoAccessControl,e)?r:void 0},lookup:function(t,e){for(var r=t.length,n=0;n<r;n++)if(null!=(t[n]&&l.lookupProperty(t[n],e)))return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:h.escapeExpression,invokePartial:function(r,n,i){i.hash&&(n=h.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=e.VM.resolvePartial.call(this,r,n,i);var o=h.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),a=e.VM.invokePartial.call(this,r,n,o);if(null==a&&e.compile&&(i.partials[i.name]=e.compile(r,t.compilerOptions,e),a=i.partials[i.name](n,o)),null!=a){if(i.indent){for(var s=a.split("\n"),u=0,l=s.length;u<l&&(s[u]||u+1!==l);u++)s[u]=i.indent+s[u];a=s.join("\n")}return a}throw new f.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var r=t[e];return r.decorator=t[e+"_d"],r},programs:[],program:function(t,e,r,i,o){var a=this.programs[t],s=this.fn(t);return e||o||i||r?a=n(this,t,s,e,r,i,o):a||(a=this.programs[t]=n(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var r=t||e;return t&&e&&t!==e&&(r=h.extend({},e,t)),r},nullContext:s({}),noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(r){if(r.partial)l.protoAccessControl=r.protoAccessControl,l.helpers=r.helpers,l.partials=r.partials,l.decorators=r.decorators,l.hooks=r.hooks;else{var n=h.extend({},e.helpers,r.helpers);(function(t,e){u(t).forEach((function(r){var n=t[r];t[r]=function(t,e){var r=e.lookupProperty;return m.wrapHelper(t,(function(t){return h.extend({lookupProperty:r},t)}))}(n,e)}))})(n,l),l.helpers=n,t.usePartial&&(l.partials=l.mergeIfNeeded(r.partials,e.partials)),(t.usePartial||t.useDecorators)&&(l.decorators=h.extend({},e.decorators,r.decorators)),l.hooks={},l.protoAccessControl=y.createProtoAccessControl(r);var o=r.allowCallsToHelperMissing||i;d.moveHelperToHooks(l,"helperMissing",o),d.moveHelperToHooks(l,"blockHelperMissing",o)}},r._child=function(e,r,i,o){if(t.useBlockParams&&!i)throw new f.default("must pass block params");if(t.useDepths&&!o)throw new f.default("must pass parent depths");return n(l,e,t[e],r,0,i,o)},r},e.wrapProgram=n,e.resolvePartial=function(t,e,r){return t?t.call||r.name||(r.name=t,t=r.partials[t]):t="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],t},e.invokePartial=function(t,e,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var o=void 0;if(r.fn&&r.fn!==i&&function(){r.data=p.createFrame(r.data);var t=r.fn;o=r.data["partial-block"]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=p.createFrame(r.data),r.data["partial-block"]=n,t(e,r)},t.partials&&(r.partials=h.extend({},r.partials,t.partials))}(),void 0===t&&o&&(t=o),void 0===t)throw new f.default("The partial "+r.name+" could not be found");if(t instanceof Function)return t(e,r)},e.noop=i;var h=l(r(5)),f=c(r(6)),p=r(4),d=r(10),m=r(43),y=r(33)},function(t,e,r){t.exports={default:r(40),__esModule:!0}},function(t,e,r){r(41),t.exports=r(21).Object.seal},function(t,e,r){var n=r(42);r(18)("seal",(function(t){return function(e){return t&&n(e)?t(e):e}}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){"use strict";e.__esModule=!0,e.wrapHelper=function(t,e){return"function"!=typeof t?t:function(){var r=arguments[arguments.length-1];return arguments[arguments.length-1]=e(r),t.apply(this,arguments)}}},function(t,e){(function(r){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==r?r:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var r={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!r.helpers.scopedId(t)&&!t.depth}}};e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){return"Program"===t.type?t:(a.default.yy=c,c.locInfo=function(t){return new c.SourceLocation(e&&e.srcName,t)},a.default.parse(t))}var i=r(1).default,o=r(3).default;e.__esModule=!0,e.parseWithoutProcessing=n,e.parse=function(t,e){var r=n(t,e);return new s.default(e).accept(r)};var a=i(r(47)),s=i(r(48)),u=o(r(50)),l=r(5);e.parser=a.default;var c={};l.extend(c,u)},function(t,e){"use strict";e.__esModule=!0;var r=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var u=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),l=n.prepareProgram([u],o[s-1].loc);l.chained=!0,this.$={strip:o[s-2].strip,program:l,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 27:case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 33:case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:case 41:this.$=o[s];break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=r.lexer.lex()||1)&&(t=r.symbols_[t]||t),t}var r=this,n=[0],i=[null],o=[],a=this.table,s="",u=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,m,y,g,v,_,b,w,M={};;){if(m=n[n.length-1],this.defaultActions[m]?y=this.defaultActions[m]:(null!=p||(p=e()),y=a[m]&&a[m][p]),void 0===y||!y.length||!y[0]){var S="";if(!c){for(v in w=[],a[m])this.terminals_[v]&&v>2&&w.push("'"+this.terminals_[v]+"'");S=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:w})}}if(y[0]instanceof Array&&y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(y[0]){case 1:n.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(y[1]),p=null,d?(p=d,d=null):(l=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(_=this.productions_[y[1]][1],M.$=i[i.length-_],M._$={first_line:o[o.length-(_||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(_||1)].first_column,last_column:o[o.length-1].last_column},f&&(M._$.range=[o[o.length-(_||1)].range[0],o[o.length-1].range[1]]),void 0!==(g=this.performAction.call(M,s,l,u,this.yy,y[1],i,o)))return g;_&&(n=n.slice(0,-1*_*2),i=i.slice(0,-1*_),o=o.slice(0,-1*_)),n.push(this.productions_[y[1]][0]),i.push(M.$),o.push(M._$),b=a[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},r=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(r=this._input.match(this.rules[o[a]]))||e&&!(r[0].length>e[0].length)||(e=r,n=a,this.options.flex));a++);return e?((i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,n){function i(t,r){return e.yytext=e.yytext.substring(t,e.yyleng-r+t)}switch(r){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();return e.lexer=r,t.prototype=e,e.Parser=t,new t}();e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function i(t,e,r){void 0===e&&(e=t.length);var n=t[e-1],i=t[e-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(t,e,r){void 0===e&&(e=-1);var n=t[e+1],i=t[e+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(t,e,r){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function s(t,e,r){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var u=r(1).default;e.__esModule=!0;var l=u(r(49));n.prototype=new l.default,n.prototype.Program=function(t){var e=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,u=0,l=n.length;u<l;u++){var c=n[u],h=this.accept(c);if(h){var f=i(n,u,r),p=o(n,u,r),d=h.openStandalone&&f,m=h.closeStandalone&&p,y=h.inlineStandalone&&f&&p;h.close&&a(n,u,!0),h.open&&s(n,u,!0),e&&y&&(a(n,u),s(n,u)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[u-1].original)[1])),e&&d&&(a((c.program||c.inverse).body),s(n,u)),e&&m&&(a(n,u),s((c.inverse||c.program).body))}}return t},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,r=t.program&&t.inverse,n=r,u=r;if(r&&r.chained)for(n=r.body[0].program;u.chained;)u=u.body[u.body.length-1].program;var l={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:o(e.body),closeStandalone:i((n||e).body)};if(t.openStrip.close&&a(e.body,null,!0),r){var c=t.inverseStrip;c.open&&s(e.body,null,!0),c.close&&a(n.body,null,!0),t.closeStrip.open&&s(u.body,null,!0),!this.options.ignoreStandalone&&i(e.body)&&o(n.body)&&(s(e.body),a(n.body))}else t.closeStrip.open&&s(e.body,null,!0);return l},n.prototype.Decorator=n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(){this.parents=[]}function i(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function o(t){i.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function a(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var s=r(1).default;e.__esModule=!0;var u=s(r(6));n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var r=this.accept(t[e]);if(this.mutating){if(r&&!n.prototype[r.type])throw new u.default('Unexpected node type "'+r.type+'" found when accepting '+e+" on "+t.type);t[e]=r}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new u.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,r=t.length;e<r;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,r--)},accept:function(t){if(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(t){a.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var r={loc:t.path.loc};throw new o.default(t.path.original+" doesn't match "+e,r)}}var i=r(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,r){r=this.locInfo(r);for(var n=t?"@":"",i=[],a=0,s=0,u=e.length;s<u;s++){var l=e[s].part,c=e[s].original!==l;if(n+=(e[s].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new o.default("Invalid path: "+n,{loc:r});".."===l&&a++}}return{type:"PathExpression",data:t,depth:a,parts:i,original:n,loc:r}},e.prepareMustache=function(t,e,r,n,i,o){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:t,params:e,hash:r,escaped:s,strip:i,loc:this.locInfo(o)}},e.prepareRawBlock=function(t,e,r,i){n(t,r);var o={type:"Program",body:e,strip:{},loc:i=this.locInfo(i)};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},e.prepareBlock=function(t,e,r,i,a,s){i&&i.path&&n(t,i);var u=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(r){if(u)throw new o.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),c=r.strip,l=r.program}return a&&(a=l,l=e,e=a),{type:u?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:i&&i.strip,loc:this.locInfo(s)}},e.prepareProgram=function(t,e){if(!e&&t.length){var r=t[0].loc,n=t[t.length-1].loc;r&&n&&(e={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,r,i){return n(t,r),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:r&&r.strip,loc:this.locInfo(i)}};var o=i(r(6))},function(t,e,r){"use strict";function n(){}function i(t,e){if(t===e)return!0;if(l.isArray(t)&&l.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1;return!0}}function o(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var a=r(34).default,s=r(1).default;e.__esModule=!0,e.Compiler=n,e.precompile=function(t,e,r){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var n=r.parse(t,e),i=(new r.Compiler).compile(n,e);return(new r.JavaScriptCompiler).compile(i,e)},e.compile=function(t,e,r){function n(){var n=r.parse(t,e),i=(new r.Compiler).compile(n,e),o=(new r.JavaScriptCompiler).compile(i,e,void 0,!0);return r.template(o)}function i(t,e){return o||(o=n()),o.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=l.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var o=void 0;return i._setup=function(t){return o||(o=n()),o._setup(t)},i._child=function(t,e,r,i){return o||(o=n()),o._child(t,e,r,i)},i};var u=s(r(6)),l=r(5),c=s(r(45)),h=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var r=0;r<e;r++){var n=this.opcodes[r],o=t.opcodes[r];if(n.opcode!==o.opcode||!i(n.args,o.args))return!1}for(e=this.children.length,r=0;r<e;r++)if(!this.children[r].equals(t.children[r]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=l.extend(a(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),r=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[r]=e,this.useDepths=this.useDepths||e.useDepths,r},accept:function(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,r=e.length,n=0;n<r;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){o(t);var e=t.program,r=t.inverse;e=e&&this.compileProgram(e),r=r&&this.compileProgram(r);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,r):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,r),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),r=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var r=t.params;if(r.length>1)throw new u.default("Unsupported number of partial arguments: "+r.length,t);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,i="SubExpression"===t.name.type;i&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,n,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){o(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,r){var n=t.path,i=n.parts[0],o=null!=e||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,r){var n=this.setupFullMustacheParams(t,e,r),i=t.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new u.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,c.default.helpers.simpleId(i))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],r=c.default.helpers.scopedId(t),n=!t.depth&&!r&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,r):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,r=0,n=e.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(e[r].value);for(;r--;)this.opcode("assignToHash",e[r].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:h.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=c.default.helpers.simpleId(t.path),r=e&&!!this.blockParamIndex(t.path.parts[0]),n=!r&&c.default.helpers.helperExpression(t),i=!r&&(n||e);if(i&&!n){var o=t.path.parts[0],a=this.options;a.knownHelpers[o]?n=!0:a.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=0,r=t.length;e<r;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var r=void 0;if(!t.parts||c.default.helpers.scopedId(t)||t.depth||(r=this.blockParamIndex(t.parts[0])),r){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,r,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",r),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(t){for(var e=0,r=this.options.blockParams.length;e<r;e++){var n=this.options.blockParams[e],i=n&&l.indexOf(n,t);if(n&&i>=0)return[e,i]}}}},function(t,e,r){"use strict";function n(t){this.value=t}function i(){}var o=r(13).default,a=r(1).default;e.__esModule=!0;var s=r(4),u=a(r(6)),l=r(5),c=a(r(53));i.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(t),")"]},compilerInfo:function(){var t=s.COMPILER_REVISION;return[t,s.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,r){return l.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:r?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,r,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var i=t.opcodes,o=void 0,a=void 0,s=void 0,l=void 0;for(s=0,l=i.length;s<l;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var h={compiler:this.compilerInfo(),main:c};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var f=this.context,p=f.programs,d=f.decorators;for(s=0,l=p.length;s<l;s++)p[s]&&(h[s]=p[s],d[s]&&(h[s+"_d"]=d[s],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new c.default(this.options.srcName),this.decorators=new c.default(this.options.srcName)},createFunctionContext:function(t){var e=this,r="",n=this.stackVars.concat(this.registers.list);n.length>0&&(r+=", "+n.join(", "));var i=0;o(this.aliases).forEach((function(t){var n=e.aliases[t];n.children&&n.referenceCount>1&&(r+=", alias"+ ++i+"="+t,n.children[0]="alias"+i)})),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(r);return t?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,a=void 0;return this.source.each((function(t){t.appendToBuffer?(o?t.prepend("  + "):o=t,a=t):(o&&(i?o.prepend("buffer += "):n=!0,a.add(";"),o=a=void 0),i=!0,e||(r=!1))})),r?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(t,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(e,"call",r))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var r=this.topStack();e.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++])),this.resolvePath("context",t,i,e,r)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,r){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,r)},resolvePath:function(t,e,r,n,i){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,r,n){var i=e.popStack(),o=0,a=r.length;for(t&&a--;o<a;o++)i=e.nameLookup(i,r[o],n);return t?[e.aliasable("container.strict"),"(",i,", ",e.quotedString(r[o]),", ",JSON.stringify(e.source.currentLocation)," )"]:i}(this.options.strict&&i,this,e,t));else for(var a=e.length;r<a;r++)this.replaceStack((function(i){var a=o.nameLookup(i,e[r],t);return n?[" && ",a]:[" != null ? ",a," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var r=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,r){var n=this.popStack(),i=this.setupHelper(t,e),o=[];r&&o.push(i.name),o.push(n),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(o,"||"),")"],s=this.source.functionCall(a,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(t,e){var r=[];r.push(t[0]);for(var n=1;n<t.length;n++)r.push(e,t[n]);return r},invokeKnownHelper:function(t,e){var r=this.setupHelper(t,e);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,r){var n=[],i=this.setupParams(e,1,n);t&&(e=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[t]=r),n&&(o.types[t]=n),i&&(o.ids[t]=i),o.values[t]=e},pushId:function(t,e,r){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(t,e){for(var r=t.children,n=void 0,i=void 0,o=0,a=r.length;o<a;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var u=this.context.programs.length;n.index=u,n.name="program"+u,this.context.programs[u]=i.compile(n,e,this.context,!this.precompile),this.context.decorators[u]=i.decorators,this.context.environments[u]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(t){for(var e=0,r=this.context.environments.length;e<r;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],r=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new u.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)e=["(",r=[a.value]],o=!0;else{i=!0;var s=this.incrStack();e=["((",this.push(s)," = ",a,")"],r=this.topStack()}var l=t.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),r=(e?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof n)return r.value;if(!e){if(!this.stackSlot)throw new u.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(e,t,n,r),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(t,e,r){var n={},i=[],o=[],a=[],s=!r,u=void 0;s&&(r=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"container.noop",n.inverse=l||"container.noop");for(var h=e;h--;)u=this.popStack(),r[h]=u,this.trackIds&&(a[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),i[h]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,r,n){var i=this.setupParams(t,e,r);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=i.RESERVED_WORDS={},r=0,n=t.length;r<n;r++)e[t[r]]=!0}(),i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=i,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r){if(a.isArray(t)){for(var n=[],i=0,o=t.length;i<o;i++)n.push(e.wrap(t[i],r));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function i(t){this.srcFile=t,this.source=[]}var o=r(13).default;e.__esModule=!0;var a=r(5),s=void 0;s||((s=function(t,e,r,n){this.src="",n&&this.add(n)}).prototype={add:function(t){a.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){a.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,r=this.source.length;e<r;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new s(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof s?t:(t=n(t,this,e),new s(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,r){return r=this.generateList(r),this.wrap([t,e?"."+e+"(":"(",r,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,r=[];o(t).forEach((function(i){var o=n(t[i],e);"undefined"!==o&&r.push([e.quotedString(i),":",o])}));var i=this.generateList(r);return i.prepend("{"),i.add("}"),i},generateList:function(t){for(var e=this.empty(),r=0,i=t.length;r<i;r++)r&&e.add(","),e.add(n(t[r],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=i,t.exports=e.default}])},function(t,e,r){t.exports=function(){"use strict";function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),f=Math.max(i,Math.floor(n-u*c/s+h)),p=Math.min(o,Math.floor(n+(s-u)*c/s+h));t(r,n,f,p,a)}var d=r[n],m=i,y=o;for(e(r,i,n),a(r[o],d)>0&&e(r,i,o);m<y;){for(e(r,m,y),m++,y--;a(r[m],d)<0;)m++;for(;a(r[y],d)>0;)y--}0===a(r[i],d)?e(r,i,y):(y++,e(r,y,o)),y<=n&&(i=y+1),n<=y&&(o=y-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?r.push(a):f(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!f(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=d([])).leaf=!1,i.height=n;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));m(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var h=Math.min(c+l-1,r);m(t,c,h,u,this.compareMinY);for(var f=c;f<=h;f+=u){var p=Math.min(f+u-1,h);i.children.push(this._build(t,f,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=c(u),h=(f=t,p=u,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);h<o?(o=h,i=l<i?l:i,a=u):h===o&&l<i&&(i=l,a=u)}e=a||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,u,l,h,f=1/0,p=1/0,d=e;d<=r-e;d++){var m=a(t,0,d,this.toBBox),y=a(t,d,r,this.toBBox),g=(i=m,o=y,s=void 0,u=void 0,l=void 0,h=void 0,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,h-u)),v=c(m)+c(y);g<f?(f=g,n=d,p=v<p?v:p):g===f&&v<p&&(p=v,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,r-e,r,i),l=h(o)+h(u),c=e;c<r-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),l+=h(o)}for(var p=r-e-1;p>=e;p--){var d=t.children[p];s(u,t.leaf?i(d):d),l+=h(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},function(t,e){var r=null,n=null;function i(t,e,r){t.addEventListener(e,(function(t){var i=new MouseEvent(r,t);i.pointerId=1,i.isPrimary=!0,i.pointerType="mouse",i.width=1,i.height=1,i.tiltX=0,i.tiltY=0,"buttons"in t&&0!==t.buttons?i.pressure=.5:i.pressure=0;var o=t.target;null!==n&&(o=n,"mouseup"===e&&(n=null)),o.dispatchEvent(i),i.defaultPrevented&&t.preventDefault()}))}function o(t,e,n){t.addEventListener(e,(function(t){for(var i=t.changedTouches,o=i.length,a=0;a<o;a++){var s=new CustomEvent(n,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var u=i.item(a);s.clientX=u.clientX,s.clientY=u.clientY,s.screenX=u.screenX,s.screenY=u.screenY,s.pageX=u.pageX,s.pageY=u.pageY;var l=u.target.getBoundingClientRect();s.offsetX=u.clientX-l.left,s.offsetY=u.clientY-l.top,s.pointerId=1+u.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===r&&(r=u.identifier),s.isPrimary=u.identifier===r,"touchend"===e&&s.isPrimary&&(r=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}}))}"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(i(document,"mousedown","pointerdown"),i(document,"mousemove","pointermove"),i(document,"mouseup","pointerup")),o(document,"touchstart","pointerdown"),o(document,"touchmove","pointermove"),o(document,"touchend","pointerup"))},function(t,e,r){"use strict";var n=r(0),i=r(61),o=r(1).Buffer,a=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function l(t,e,r,n,i,o,a){return u(t+(e&r|~e&n)+i+o|0,a)+e|0}function c(t,e,r,n,i,o,a){return u(t+(e&n|r&~n)+i+o|0,a)+e|0}function h(t,e,r,n,i,o,a){return u(t+(e^r^n)+i+o|0,a)+e|0}function f(t,e,r,n,i,o,a){return u(t+(r^(e|~n))+i+o|0,a)+e|0}n(s,i),s.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=l(r,n,i,o,t[0],3614090360,7),o=l(o,r,n,i,t[1],3905402710,12),i=l(i,o,r,n,t[2],606105819,17),n=l(n,i,o,r,t[3],3250441966,22),r=l(r,n,i,o,t[4],4118548399,7),o=l(o,r,n,i,t[5],1200080426,12),i=l(i,o,r,n,t[6],2821735955,17),n=l(n,i,o,r,t[7],4249261313,22),r=l(r,n,i,o,t[8],1770035416,7),o=l(o,r,n,i,t[9],2336552879,12),i=l(i,o,r,n,t[10],4294925233,17),n=l(n,i,o,r,t[11],2304563134,22),r=l(r,n,i,o,t[12],1804603682,7),o=l(o,r,n,i,t[13],4254626195,12),i=l(i,o,r,n,t[14],2792965006,17),r=c(r,n=l(n,i,o,r,t[15],1236535329,22),i,o,t[1],4129170786,5),o=c(o,r,n,i,t[6],3225465664,9),i=c(i,o,r,n,t[11],643717713,14),n=c(n,i,o,r,t[0],3921069994,20),r=c(r,n,i,o,t[5],3593408605,5),o=c(o,r,n,i,t[10],38016083,9),i=c(i,o,r,n,t[15],3634488961,14),n=c(n,i,o,r,t[4],3889429448,20),r=c(r,n,i,o,t[9],568446438,5),o=c(o,r,n,i,t[14],3275163606,9),i=c(i,o,r,n,t[3],4107603335,14),n=c(n,i,o,r,t[8],1163531501,20),r=c(r,n,i,o,t[13],2850285829,5),o=c(o,r,n,i,t[2],4243563512,9),i=c(i,o,r,n,t[7],1735328473,14),r=h(r,n=c(n,i,o,r,t[12],2368359562,20),i,o,t[5],4294588738,4),o=h(o,r,n,i,t[8],2272392833,11),i=h(i,o,r,n,t[11],1839030562,16),n=h(n,i,o,r,t[14],4259657740,23),r=h(r,n,i,o,t[1],2763975236,4),o=h(o,r,n,i,t[4],1272893353,11),i=h(i,o,r,n,t[7],4139469664,16),n=h(n,i,o,r,t[10],3200236656,23),r=h(r,n,i,o,t[13],681279174,4),o=h(o,r,n,i,t[0],3936430074,11),i=h(i,o,r,n,t[3],3572445317,16),n=h(n,i,o,r,t[6],76029189,23),r=h(r,n,i,o,t[9],3654602809,4),o=h(o,r,n,i,t[12],3873151461,11),i=h(i,o,r,n,t[15],530742520,16),r=f(r,n=h(n,i,o,r,t[2],3299628645,23),i,o,t[0],4096336452,6),o=f(o,r,n,i,t[7],1126891415,10),i=f(i,o,r,n,t[14],2878612391,15),n=f(n,i,o,r,t[5],4237533241,21),r=f(r,n,i,o,t[12],1700485571,6),o=f(o,r,n,i,t[3],2399980690,10),i=f(i,o,r,n,t[10],4293915773,15),n=f(n,i,o,r,t[1],2240044497,21),r=f(r,n,i,o,t[8],1873313359,6),o=f(o,r,n,i,t[15],4264355552,10),i=f(i,o,r,n,t[6],2734768916,15),n=f(n,i,o,r,t[13],1309151649,21),r=f(r,n,i,o,t[4],4149444226,6),o=f(o,r,n,i,t[11],3174756917,10),i=f(i,o,r,n,t[2],718787259,15),n=f(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},function(t,e,r){"use strict";var n=r(15).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&e.readable,s=r.writable||!1!==r.writable&&e.writable,u=function(){e.writable||c()},l=e._writableState&&e._writableState.finished,c=function(){s=!1,l=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,h=!0,s||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):s&&!l?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},m=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",u),e.on("close",u)):(e.on("complete",c),e.on("abort",d),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",c),!1!==r.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",c),e.removeListener("abort",d),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",p),e.removeListener("close",d)}}},function(t,e,r){"use strict";var n=r(4).Buffer,i=r(0),o=r(61),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function p(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(t,e){return t<<e|t>>>32-e}function m(t,e,r,n,i,o,a,s){return d(t+(e^r^n)+o+a|0,s)+i|0}function y(t,e,r,n,i,o,a,s){return d(t+(e&r|~e&n)+o+a|0,s)+i|0}function g(t,e,r,n,i,o,a,s){return d(t+((e|~r)^n)+o+a|0,s)+i|0}function v(t,e,r,n,i,o,a,s){return d(t+(e&n|r&~n)+o+a|0,s)+i|0}function _(t,e,r,n,i,o,a,s){return d(t+(e^(r|~n))+o+a|0,s)+i|0}i(p,o),p.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,p=0|this._e,b=0|this._a,w=0|this._b,M=0|this._c,S=0|this._d,x=0|this._e,E=0;E<80;E+=1){var O,P;E<16?(O=m(r,n,i,o,p,t[s[E]],h[0],l[E]),P=_(b,w,M,S,x,t[u[E]],f[0],c[E])):E<32?(O=y(r,n,i,o,p,t[s[E]],h[1],l[E]),P=v(b,w,M,S,x,t[u[E]],f[1],c[E])):E<48?(O=g(r,n,i,o,p,t[s[E]],h[2],l[E]),P=g(b,w,M,S,x,t[u[E]],f[2],c[E])):E<64?(O=v(r,n,i,o,p,t[s[E]],h[3],l[E]),P=y(b,w,M,S,x,t[u[E]],f[3],c[E])):(O=_(r,n,i,o,p,t[s[E]],h[4],l[E]),P=m(b,w,M,S,x,t[u[E]],f[4],c[E])),r=p,p=o,o=d(i,10),i=n,n=O,b=x,x=S,S=d(M,10),M=w,w=P}var T=this._b+i+S|0;this._b=this._c+o+x|0,this._c=this._d+p+b|0,this._d=this._e+r+w|0,this._e=this._a+n+M|0,this._a=T},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.alloc?n.alloc(20):new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=p},function(t,e,r){(e=t.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r}).sha=r(243),e.sha1=r(244),e.sha224=r(245),e.sha256=r(70),e.sha384=r(246),e.sha512=r(71)},function(t,e,r){(e=t.exports=r(72)).Stream=e,e.Readable=e,e.Writable=r(40),e.Duplex=r(13),e.Transform=r(75),e.PassThrough=r(253)},function(t,e,r){var n=r(4),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";(function(e,n,i){var o=r(26);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=v;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;v.WritableState=g;var l=Object.create(r(22));l.inherits=r(0);var c={deprecate:r(68)},h=r(73),f=r(39).Buffer,p=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var d,m=r(74);function y(){}function g(t,e){s=s||r(13),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(x,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),x(t,e))}(t,r,n,e,i);else{var a=M(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),n?u(b,t,r,a,i):b(t,r,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(s=s||r(13),!(d.call(v,this)||this instanceof s))return new v(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function _(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),x(t,e)}function w(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,_(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(_(t,e,!1,e.objectMode?1:l.length,l,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function M(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),x(t,e)}))}function x(t,e){var r=M(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}l.inherits(v,h),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===v&&(t&&t._writableState instanceof g)}})):d=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,r){var n,i=this._writableState,a=!1,s=!i.objectMode&&(n=t,f.isBuffer(n)||n instanceof p);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=y),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),o.nextTick(e,r)}(this,r):(s||function(t,e,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(n,a),i=!1),i}(this,i,t,r))&&(i.pendingcb++,a=function(t,e,r,n,i,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,r));return e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,n,i,o);return u}(this,i,s,t,e,r)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,r){e.ending=!0,x(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(3),r(251).setImmediate,r(5))},function(t,e,r){"use strict";var n=r(6);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<r;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,r=0,n=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,r=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,r){var n=r(266),i=r(274),o=r(88);e.createCipher=e.Cipher=n.createCipher,e.createCipheriv=e.Cipheriv=n.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},function(t,e,r){var n={ECB:r(267),CBC:r(268),CFB:r(269),CFB8:r(270),CFB1:r(271),OFB:r(272),CTR:r(86),GCM:r(86)},i=r(88);for(var o in i)i[o].module=n[i[o].mode];t.exports=i},function(t,e,r){var n;function i(t){this.rand=t}if(t.exports=function(t){return n||(n=new i(null)),n.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(280);if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return o.randomBytes(t)}}catch(t){}},function(t,e,r){(function(e){var n=r(46),i=r(14);function o(t){var e,r=t.modulus.byteLength();do{e=new n(i(r))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function a(t,r){var i=function(t){var e=o(t);return{blinder:e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(r),a=r.modulus.byteLength(),s=new n(t).mul(i.blinder).umod(r.modulus),u=s.toRed(n.mont(r.prime1)),l=s.toRed(n.mont(r.prime2)),c=r.coefficient,h=r.prime1,f=r.prime2,p=u.redPow(r.exponent1).fromRed(),d=l.redPow(r.exponent2).fromRed(),m=p.isub(d).imul(c).umod(h).imul(f);return d.iadd(m).imul(i.unblinder).umod(r.modulus).toArrayLike(e,"be",a)}a.getr=o,t.exports=a}).call(this,r(4).Buffer)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(285).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,i){for(var o=0,a=0,s=Math.min(t.length,r),u=e;u<s;u++){var l=t.charCodeAt(u)-48;o*=i,a=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&a<i,"Invalid character"),o+=a}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){c(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),r=0!==o||a!==this.length-1?f[6-u.length]+u+r:u+r}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=p[t],c=d[t];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(c).toString(t);r=(h=h.idivn(c)).isZero()?m+r:f[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,i),a},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;t[r++]=255&a,r<t.length&&(t[r++]=a>>8&255),r<t.length&&(t[r++]=a>>16&255),6===o?(r<t.length&&(t[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;t[r--]=255&a,r>=0&&(t[r--]=a>>8&255),r>=0&&(t[r--]=a>>16&255),6===o?(r>=0&&(t[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,M=0|a[4],S=8191&M,x=M>>>13,E=0|a[5],O=8191&E,P=E>>>13,T=0|a[6],I=8191&T,L=T>>>13,R=0|a[7],C=8191&R,A=R>>>13,k=0|a[8],N=8191&k,j=k>>>13,F=0|a[9],D=8191&F,B=F>>>13,G=0|s[0],z=8191&G,U=G>>>13,q=0|s[1],V=8191&q,Y=q>>>13,Z=0|s[2],W=8191&Z,H=Z>>>13,X=0|s[3],K=8191&X,J=X>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,z),i=(i=Math.imul(d,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(v,z)|0,o=Math.imul(v,U),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,Y)|0;var vt=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,U))+Math.imul(w,z)|0,o=Math.imul(w,U),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,W)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,U))+Math.imul(x,z)|0,o=Math.imul(x,U),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,U))+Math.imul(P,z)|0,o=Math.imul(P,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,U))+Math.imul(L,z)|0,o=Math.imul(L,U),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var Mt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(A,z)|0,o=Math.imul(A,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var St=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,U))+Math.imul(j,z)|0,o=Math.imul(j,U),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var xt=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(B,z)|0,o=Math.imul(B,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Y))+Math.imul(B,V)|0,o=Math.imul(B,Y),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,at)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,H))+Math.imul(B,W)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Pt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ft)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ft)|0;var Tt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(B,$)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var It=(l+(n=n+Math.imul(S,dt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(x,dt)|0))<<13)|0;l=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(A,dt)|0))<<13)|0;l=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var At=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863;var kt=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=Mt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=Ot,u[11]=Pt,u[12]=Tt,u[13]=It,u[14]=Lt,u[15]=Rt,u[16]=Ct,u[17]=At,u[18]=kt,0!==l&&(u[19]=l,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(t,e,r){return g(t,e,r)}function _(t,e){this.x=t,this.y=e}Math.imul||(y=m),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):r<63?m(this,t,e):r<1024?g(this,t,e):v(this,t,e)},_.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},_.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},_.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},_.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},_.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},_.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},_.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},_.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},_.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),v(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new O(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function M(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function P(t){O.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},i(M,w),M.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},M.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(S,w),i(x,w),i(E,w),E.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new M;else if("p224"===t)e=new S;else if("p192"===t)e=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new E}return b[t]=e,e},O.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},O.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},O.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},O.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},O.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},O.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},O.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},O.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},O.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},O.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},O.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},O.prototype.isqr=function(t){return this.imul(t,t.clone())},O.prototype.sqr=function(t){return this.mul(t,t)},O.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},O.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},O.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},O.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},O.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new P(t)},i(P,O),P.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},P.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},P.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},P.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},P.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){"use strict";var n=e;n.version=r(286).version,n.utils=r(7),n.rand=r(44),n.curve=r(95),n.curves=r(48),n.ec=r(298),n.eddsa=r(302)},function(t,e,r){"use strict";var n,i=e,o=r(49),a=r(95),s=r(7).assert;function u(t){"short"===t.type?this.curve=new a.short(t):"edwards"===t.type?this.curve=new a.edwards(t):this.curve=new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var r=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=u,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(297)}catch(t){n=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},function(t,e,r){var n=e;n.utils=r(8),n.common=r(24),n.sha=r(291),n.ripemd=r(295),n.hmac=r(296),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(t,e,r){"use strict";(function(e){var n,i=r(4),o=i.Buffer,a={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(a[n]=i[n]);var s=a.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(s[n]=o[n]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,r){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,r)}),s.alloc||(s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=o(t);return e&&0!==e.length?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!a.kStringMaxLength)try{a.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(t){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this,r(3))},function(t,e,r){"use strict";const n=r(52).Reporter,i=r(25).EncoderBuffer,o=r(25).DecoderBuffer,a=r(6),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function l(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=l;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const t=this._baseState,e={};c.forEach((function(r){e[r]=t[r]}));const r=new this.constructor(e.parent);return r._baseState=e,r},l.prototype._wrap=function(){const t=this._baseState;u.forEach((function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}}),this)},l.prototype._init=function(t){const e=this._baseState;a(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),a.equal(e.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(t){const e=this._baseState,r=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==r.length&&(a(null===e.children),e.children=r,r.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(a(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(r){r==(0|r)&&(r|=0);const n=t[r];e[n]=r})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){l.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),s.forEach((function(t){l.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return a(null===e.tag),e.tag=t,this._useArgs(r),this}})),l.prototype.use=function(t){a(t);const e=this._baseState;return a(null===e.use),e.use=t,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(t){const e=this._baseState;return a(null===e.default),e.default=t,e.optional=!0,this},l.prototype.explicit=function(t){const e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.explicit=t,this},l.prototype.implicit=function(t){const e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.implicit=t,this},l.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},l.prototype.key=function(t){const e=this._baseState;return a(null===e.key),e.key=t,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(t){const e=this._baseState;return a(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},l.prototype.contains=function(t){const e=this._baseState;return a(null===e.use),e.contains=t,this},l.prototype._decode=function(t,e){const r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));let n,i=r.default,a=!0,s=null;if(null!==r.key&&(s=t.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(a=this._peekTag(t,n,r.any),t.isError(a))return a}else{const n=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),a=!0}catch(t){a=!1}t.restore(n)}}if(r.obj&&a&&(n=t.enterObject()),a){if(null!==r.explicit){const e=this._decodeTag(t,r.explicit);if(t.isError(e))return e;t=e}const n=t.offset;if(null===r.use&&null===r.choice){let e;r.any&&(e=t.save());const n=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(n))return n;r.any?i=t.raw(e):t=n}if(e&&e.track&&null!==r.tag&&e.track(t.path(),n,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(t,e)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new o(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(n,e)}}return r.obj&&a&&(i=t.leaveObject(n)),null===r.key||null===i&&!0!==a?null!==s&&t.exitKey(s):t.leaveKey(s,r.key,i),i},l.prototype._decodeGeneric=function(t,e,r){const n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},l.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),a(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},l.prototype._decodeChoice=function(t,e){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(o){const a=t.save(),s=r.choice[o];try{const r=s._decode(t,e);if(t.isError(r))return!1;n={type:o,value:r},i=!0}catch(e){return t.restore(a),!1}return!0}),this),i?n:t.error("Choice not matched")},l.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},l.prototype._encode=function(t,e,r){const n=this._baseState;if(null!==n.default&&n.default===t)return;const i=this._encodeValue(t,e,r);return void 0===i||this._skipDefault(i,e,r)?void 0:i},l.prototype._encodeValue=function(t,e,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new n);let o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}let a=null,s=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)a=this._getUse(i.contains,r)._encode(t,e),s=!0;else if(i.children)a=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");const n=e.enterKey(r._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i}),this).filter((function(t){return t})),a=this._createEncoderBuffer(a);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,a=this._createEncoderBuffer(t.map((function(r){const n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)}),r))}else null!==i.use?o=this._getUse(i.use,r)._encode(t,e):(a=this._encodePrimitive(i.tag,t),s=!0);if(!i.any&&null===i.choice){const t=null!==i.implicit?i.implicit:i.tag,r=null===i.implicit?"universal":"context";null===t?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(t,s,r,a))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},l.prototype._encodeChoice=function(t,e){const r=this._baseState,n=r.choice[t.type];return n||a(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},l.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},l.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},l.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,e,r){"use strict";const n=r(0);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,r){const n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},i.prototype.error=function(t){let e;const r=this._reporterState,n=t instanceof o;if(e=n?t:new o(r.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},i.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},n(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,r){"use strict";function n(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=n(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=n(e.tag)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(321).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,M=0|a[4],S=8191&M,x=M>>>13,E=0|a[5],O=8191&E,P=E>>>13,T=0|a[6],I=8191&T,L=T>>>13,R=0|a[7],C=8191&R,A=R>>>13,k=0|a[8],N=8191&k,j=k>>>13,F=0|a[9],D=8191&F,B=F>>>13,G=0|s[0],z=8191&G,U=G>>>13,q=0|s[1],V=8191&q,Y=q>>>13,Z=0|s[2],W=8191&Z,H=Z>>>13,X=0|s[3],K=8191&X,J=X>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,z),i=(i=Math.imul(d,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(v,z)|0,o=Math.imul(v,U),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,Y)|0;var vt=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,U))+Math.imul(w,z)|0,o=Math.imul(w,U),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,W)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,U))+Math.imul(x,z)|0,o=Math.imul(x,U),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,U))+Math.imul(P,z)|0,o=Math.imul(P,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,U))+Math.imul(L,z)|0,o=Math.imul(L,U),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var Mt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(A,z)|0,o=Math.imul(A,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var St=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,U))+Math.imul(j,z)|0,o=Math.imul(j,U),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var xt=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(B,z)|0,o=Math.imul(B,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Y))+Math.imul(B,V)|0,o=Math.imul(B,Y),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,at)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,H))+Math.imul(B,W)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Pt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ft)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ft)|0;var Tt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(B,$)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var It=(l+(n=n+Math.imul(S,dt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(x,dt)|0))<<13)|0;l=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(A,dt)|0))<<13)|0;l=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var At=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863;var kt=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=Mt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=Ot,u[11]=Pt,u[12]=Tt,u[13]=It,u[14]=Lt,u[15]=Rt,u[16]=Ct,u[17]=At,u[18]=kt,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(M,v),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return g[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new x(t)},i(x,S),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){t.exports='<div class="m-popup{{#gt tabs.length 1}} m-has-tabs{{/gt}} m-collapsed">\n  {{#gt tabs.length 1}}\n    <div class="m-tabs">\n      {{#each tabs}}\n        <div class="m-tab{{#eq @index 0}} m-activated{{/eq}}" data-index="{{@index}}">\n          <i class="{{icon}}"></i>\n        </div>\n      {{/each}}\n    </div>\n  {{/gt}}\n  <div class="m-content">\n    <div class="m-header">\n      {{#eq tabs.length 1}}\n        <div class="m-title">{{{tabs.0.title}}}</div>\n        <div class="m-subtitle">{{{tabs.0.subtitle}}}</div>\n      {{/eq}}\n      <a class="m-popup-closer" href="#" title="cerrar popup"></a>\n    </div>\n    <div class="m-body">{{{tabs.0.content}}}</div>\n  </div>\n</div>'},function(t,e,r){},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*m}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return(i?"/":"")+(e=r(n(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=r(n(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var r=function(t){"string"!=typeof t&&(t+="");var e,r=0,n=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){r=e+1;break}}else-1===n&&(i=!1,n=e+1);return-1===n?"":t.slice(r,n)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,n=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===n&&(i=!1,n=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=a+1;break}}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?"":t.slice(e,n)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(3))},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(62).Transform;function o(t){i.call(this),this._block=n.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(0)(o,i),o.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(t){n=t}r(n)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!n.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(t)||(t=n.from(t,e));for(var r=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)r[this._blockOffset++]=t[i++];for(var a=0,s=8*t.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},function(t,e,r){(e=t.exports=r(63)).Stream=e,e.Readable=e,e.Writable=r(67),e.Duplex=r(16),e.Transform=r(69),e.PassThrough=r(241),e.finished=r(35),e.pipeline=r(242)},function(t,e,r){"use strict";(function(e,n){var i;t.exports=E,E.ReadableState=x;r(20).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=r(64),s=r(4).Buffer,u=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=r(236);l=c&&c.debuglog?c.debuglog("stream"):function(){};var h,f,p,d=r(237),m=r(65),y=r(66).getHighWaterMark,g=r(15).codes,v=g.ERR_INVALID_ARG_TYPE,_=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(0)(E,a);var M=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function x(t,e,n){i=i||r(16),t=t||{},"boolean"!=typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=r(21).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function E(t){if(i=i||r(16),!(this instanceof E))return new E(t);var e=this instanceof i;this._readableState=new x(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function O(t,e,r,n,i){l("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(l("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?I(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,L(t)))}(t,a);else if(i||(o=function(t,e){var r;n=e,s.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(a,e)),o)M(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),n)a.endEmitted?M(t,new w):P(t,a,e,!0);else if(a.ended)M(t,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?P(t,a,e,!1):R(t,a)):P(t,a,e,!1)}else n||(a.reading=!1,R(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function P(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&I(t)),R(t,e)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(t,e){e(t)},E.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=s.from(t,e),e=""),r=!0),O(this,t,e,!1,r)},E.prototype.unshift=function(t){return O(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){h||(h=r(21).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;l("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(L,t))}function L(t){var e=t._readableState;l("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,j(t)}function R(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(l("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function A(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function k(t){l("readable nexttick read 0"),t.read(0)}function N(t,e){l("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),j(t),e.flowing&&!e.reading&&t.read(0)}function j(t){var e=t._readableState;for(l("flow",e.flowing);e.flowing&&null!==t.read(););}function F(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function D(t){var e=t._readableState;l("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(B,e,t))}function B(t,e){if(l("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function G(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}E.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):I(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&D(this),null;var n,i=e.needReadable;return l("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&l("length less than watermark",i=!0),e.ended||e.reading?l("reading or ended",i=!1):i&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(r,e))),null===(n=t>0?F(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&D(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(t){M(this,new b("_read()"))},E.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?u:y;function s(e,n){l("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,l("cleanup"),t.removeListener("close",d),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",f),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function u(){l("onend"),t.end()}i.endEmitted?n.nextTick(a):r.once("end",a),t.on("unpipe",s);var c=function(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,j(t))}}(r);t.on("drain",c);var h=!1;function f(e){l("ondata");var n=t.write(e);l("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==G(i.pipes,t))&&!h&&(l("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function p(e){l("onerror",e),y(),t.removeListener("error",p),0===o(t,"error")&&M(t,e)}function d(){t.removeListener("finish",m),y()}function m(){l("onfinish"),t.removeListener("close",d),y()}function y(){l("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",p),t.once("close",d),t.once("finish",m),t.emit("pipe",r),i.flowing||(l("pipe resume"),r.resume()),t},E.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=G(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},E.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?I(this):i.reading||n.nextTick(k,this))),r},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(A,this),r},E.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(A,this),e},E.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(N,t,e))}(this,t)),t.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(l("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<S.length;o++)t.on(S[o],this.emit.bind(this,S[o]));return this._read=function(e){l("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(239)),f(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=F,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,e){return void 0===p&&(p=r(240)),p(E,t,e)})}).call(this,r(5),r(3))},function(t,e,r){t.exports=r(20).EventEmitter},function(t,e,r){"use strict";(function(e){function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(n,a),o(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r(3))},function(t,e,r){"use strict";var n=r(15).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,r){"use strict";(function(e,n){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=E,E.WritableState=x;var a={deprecate:r(68)},s=r(64),u=r(4).Buffer,l=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,h=r(65),f=r(66).getHighWaterMark,p=r(15).codes,d=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,y=p.ERR_MULTIPLE_CALLBACK,g=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,_=p.ERR_STREAM_NULL_VALUES,b=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,M=h.errorOrDestroy;function S(){}function x(t,e,a){o=o||r(16),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new y;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(R,t,e),t._writableState.errorEmitted=!0,M(t,i)):(o(i),t._writableState.errorEmitted=!0,M(t,i),R(t,e))}(t,r,i,e,o);else{var a=I(r)||t.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||T(t,r),i?n.nextTick(P,t,r,a,o):P(t,r,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function E(t){var e=this instanceof(o=o||r(16));if(!e&&!c.call(E,this))return new E(t);this._writableState=new x(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function O(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function P(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),R(t,e)}function T(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,O(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(O(t,e,!1,e.objectMode?1:l.length,l,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function L(t,e){t._final((function(r){e.pendingcb--,r&&M(t,r),e.prefinished=!0,t.emit("prefinish"),R(t,e)}))}function R(t,e){var r=I(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(L,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}r(0)(E,s),x.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===E&&(t&&t._writableState instanceof x)}})):c=function(t){return t instanceof this},E.prototype.pipe=function(){M(this,new g)},E.prototype.write=function(t,e,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=t,u.isBuffer(i)||i instanceof l);return s&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof r&&(r=S),o.ending?function(t,e){var r=new b;M(t,r),n.nextTick(e,r)}(this,r):(s||function(t,e,r,i){var o;return null===r?o=new _:"string"==typeof r||e.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(M(t,o),n.nextTick(i,o),!1)}(this,o,t,r))&&(o.pendingcb++,a=function(t,e,r,n,i,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,r));return e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else O(t,e,!1,s,n,i,o);return l}(this,o,s,t,e,r)),a},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||T(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(t,e,r){r(new m("_write()"))},E.prototype._writev=null,E.prototype.end=function(t,e,r){var i=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,r){e.ending=!0,R(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),E.prototype.destroy=h.destroy,E.prototype._undestroy=h.undestroy,E.prototype._destroy=function(t,e){e(t)}}).call(this,r(5),r(3))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(5))},function(t,e,r){"use strict";t.exports=c;var n=r(15).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(16);function l(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);u.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}r(0)(c,u),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,r){r(new i("_transform()"))},c.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,r){var n=r(0),i=r(17),o=r(1).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t,e,r){return r^t&(e^r)}function c(t,e,r){return t&e|r&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}n(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,d=0|this._f,m=0|this._g,y=0|this._h,g=0;g<16;++g)r[g]=t.readInt32BE(4*g);for(;g<64;++g)r[g]=0|(((e=r[g-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[g-7]+p(r[g-15])+r[g-16];for(var v=0;v<64;++v){var _=y+f(u)+l(u,d,m)+a[v]+r[v]|0,b=h(n)+c(n,i,o)|0;y=m,m=d,d=u,u=s+_|0,s=o,o=i,i=n,n=_+b|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=m+this._g|0,this._h=y+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},function(t,e,r){var n=r(0),i=r(17),o=r(1).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}function l(t,e,r){return r^t&(e^r)}function c(t,e,r){return t&e|r&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function y(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function g(t,e){return t>>>0<e>>>0?1:0}n(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,v=0|this._gh,_=0|this._hh,b=0|this._al,w=0|this._bl,M=0|this._cl,S=0|this._dl,x=0|this._el,E=0|this._fl,O=0|this._gl,P=0|this._hl,T=0;T<32;T+=2)e[T]=t.readInt32BE(4*T),e[T+1]=t.readInt32BE(4*T+4);for(;T<160;T+=2){var I=e[T-30],L=e[T-30+1],R=p(I,L),C=d(L,I),A=m(I=e[T-4],L=e[T-4+1]),k=y(L,I),N=e[T-14],j=e[T-14+1],F=e[T-32],D=e[T-32+1],B=C+j|0,G=R+N+g(B,C)|0;G=(G=G+A+g(B=B+k|0,k)|0)+F+g(B=B+D|0,D)|0,e[T]=G,e[T+1]=B}for(var z=0;z<160;z+=2){G=e[z],B=e[z+1];var U=c(r,n,i),q=c(b,w,M),V=h(r,b),Y=h(b,r),Z=f(s,x),W=f(x,s),H=a[z],X=a[z+1],K=l(s,u,v),J=l(x,E,O),Q=P+W|0,$=_+Z+g(Q,P)|0;$=($=($=$+K+g(Q=Q+J|0,J)|0)+H+g(Q=Q+X|0,X)|0)+G+g(Q=Q+B|0,B)|0;var tt=Y+q|0,et=V+U+g(tt,Y)|0;_=v,P=O,v=u,O=E,u=s,E=x,s=o+$+g(x=S+Q|0,S)|0,o=i,S=M,i=n,M=w,n=r,w=b,r=$+et+g(b=Q+tt|0,Q)|0}this._al=this._al+b|0,this._bl=this._bl+w|0,this._cl=this._cl+M|0,this._dl=this._dl+S|0,this._el=this._el+x|0,this._fl=this._fl+E|0,this._gl=this._gl+O|0,this._hl=this._hl+P|0,this._ah=this._ah+r+g(this._al,b)|0,this._bh=this._bh+n+g(this._bl,w)|0,this._ch=this._ch+i+g(this._cl,M)|0,this._dh=this._dh+o+g(this._dl,S)|0,this._eh=this._eh+s+g(this._el,x)|0,this._fh=this._fh+u+g(this._fl,E)|0,this._gh=this._gh+v+g(this._gl,O)|0,this._hh=this._hh+_+g(this._hl,P)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},function(t,e,r){"use strict";(function(e,n){var i=r(26);t.exports=_;var o,a=r(59);_.ReadableState=v;r(20).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=r(73),l=r(39).Buffer,c=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var h=Object.create(r(22));h.inherits=r(0);var f=r(248),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,m=r(249),y=r(74);h.inherits(_,u);var g=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var n=e instanceof(o=o||r(13));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(21).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||r(13),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,r,n,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,S(t)}(t,a)):(i||(o=function(t,e){var r;n=e,l.isBuffer(n)||n instanceof c||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),n?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):E(t,a)):w(t,a,e,!1))):n||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&S(t)),E(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=l.from(t,e),e=""),r=!0),b(this,t,e,!1,r)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return d||(d=r(21).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};function M(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(x,t):x(t))}function x(t){p("emit readable"),t.emit("readable"),I(t)}function E(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(O,t,e))}function O(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function P(t){p("readable nexttick read 0"),t.read(0)}function T(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),I(t),e.flowing&&!e.reading&&t.read(0)}function I(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=l.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),0===(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(C,e,t))}function C(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function A(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}_.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):S(this),null;if(0===(t=M(t,e))&&e.ended)return 0===e.length&&R(this),null;var n,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=M(r,e))),null===(n=t>0?L(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&R(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?c:_;function l(e,n){p("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),t.removeListener("close",g),t.removeListener("finish",v),t.removeListener("drain",h),t.removeListener("error",y),t.removeListener("unpipe",l),r.removeListener("end",c),r.removeListener("end",_),r.removeListener("data",m),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){p("onend"),t.end()}o.endEmitted?i.nextTick(u):r.once("end",u),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,I(t))}}(r);t.on("drain",h);var f=!1;var d=!1;function m(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==A(o.pipes,t))&&!f&&(p("false write response, pause",o.awaitDrain),o.awaitDrain++,d=!0),r.pause())}function y(e){p("onerror",e),_(),t.removeListener("error",y),0===s(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",v),_()}function v(){p("onfinish"),t.removeListener("close",g),_()}function _(){p("unpipe"),r.unpipe(t)}return r.on("data",m),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",y),t.once("close",g),t.once("finish",v),t.emit("pipe",r),o.flowing||(p("pipe resume"),r.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=A(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},_.prototype.on=function(t,e){var r=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):i.nextTick(P,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(T,t,e))}(this,t)),this},_.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){p("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=L}).call(this,r(5),r(3))},function(t,e,r){t.exports=r(20).EventEmitter},function(t,e,r){"use strict";var n=r(26);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(i,this,t)):n.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,n.nextTick(i,r,t)):n.nextTick(i,r,t):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";t.exports=a;var n=r(13),i=Object.create(r(22));function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){u(t,e,r)})):u(this,null,null)}function u(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(0),i.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},function(t,e,r){"use strict";var n=r(0),i=r(258),o=r(11),a=r(1).Buffer,s=r(77),u=r(36),l=r(37),c=a.alloc(128);function h(t,e){o.call(this,"digest"),"string"==typeof e&&(e=a.from(e));var r="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>r)?e=("rmd160"===t?new u:l(t)).update(e).digest():e.length<r&&(e=a.concat([e,c],r));for(var n=this._ipad=a.allocUnsafe(r),i=this._opad=a.allocUnsafe(r),s=0;s<r;s++)n[s]=54^e[s],i[s]=92^e[s];this._hash="rmd160"===t?new u:l(t),this._hash.update(n)}n(h,o),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:l(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new h("rmd160",e):"md5"===t?new i(s,e):new h(t,e)}},function(t,e,r){var n=r(34);t.exports=function(t){return(new n).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,e,r){e.pbkdf2=r(260),e.pbkdf2Sync=r(82)},function(t,e){var r=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>r||e!=e)throw new TypeError("Bad key length")}},function(t,e,r){(function(e,r){var n;if(e.process&&e.process.browser)n="utf-8";else if(e.process&&e.process.version){n=parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else n="utf-8";t.exports=n}).call(this,r(5),r(3))},function(t,e,r){var n=r(77),i=r(36),o=r(37),a=r(1).Buffer,s=r(80),u=r(81),l=r(83),c=a.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,r){var s=function(t){function e(e){return o(t).update(e).digest()}return"rmd160"===t||"ripemd160"===t?function(t){return(new i).update(t).digest()}:"md5"===t?n:e}(t),u="sha512"===t||"sha384"===t?128:64;e.length>u?e=s(e):e.length<u&&(e=a.concat([e,c],u));for(var l=a.allocUnsafe(u+h[t]),f=a.allocUnsafe(u+h[t]),p=0;p<u;p++)l[p]=54^e[p],f[p]=92^e[p];var d=a.allocUnsafe(u+r+4);l.copy(d,0,0,u),this.ipad1=d,this.ipad2=l,this.opad=f,this.alg=t,this.blocksize=u,this.hash=s,this.size=h[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,r,n,i){s(r,n);var o=new f(i=i||"sha1",t=l(t,u,"Password"),(e=l(e,u,"Salt")).length),c=a.allocUnsafe(n),p=a.allocUnsafe(e.length+4);e.copy(p,0,0,e.length);for(var d=0,m=h[i],y=Math.ceil(n/m),g=1;g<=y;g++){p.writeUInt32BE(g,e.length);for(var v=o.run(p,o.ipad1),_=v,b=1;b<r;b++){_=o.run(_,o.ipad2);for(var w=0;w<m;w++)v[w]^=_[w]}v.copy(c,d),d+=m}return c}},function(t,e,r){var n=r(1).Buffer;t.exports=function(t,e,r){if(n.isBuffer(t))return t;if("string"==typeof t)return n.from(t,e);if(ArrayBuffer.isView(t))return n.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},function(t,e,r){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e},e.ip=function(t,e,r,n){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}r[n+0]=i>>>0,r[n+1]=o>>>0},e.rip=function(t,e,r,n){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=e>>>s+a&1,i<<=1,i|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.pc1=function(t,e,r,n){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,i){for(var o=0,a=0,s=n.length>>>1,u=0;u<s;u++)o<<=1,o|=t>>>n[u]&1;for(u=s;u<n.length;u++)a<<=1,a|=e>>>n[u]&1;r[i+0]=o>>>0,r[i+1]=a>>>0},e.expand=function(t,e,r){var n=0,i=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[r+0]=n>>>0,e[r+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var r=0,n=0;n<4;n++){r<<=4,r|=i[64*n+(t>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=i[256+64*n+(e>>>18-6*n&63)]}return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,r=0;r<o.length;r++)e<<=1,e|=t>>>o[r]&1;return e>>>0},e.padSplit=function(t,e,r){for(var n=t.toString(2);n.length<e;)n="0"+n;for(var i=[],o=0;o<e;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},function(t,e,r){"use strict";var n=r(6),i=r(0),o=r(84),a=r(41);function s(){this.tmp=new Array(2),this.keys=null}function u(t){a.call(this,t);var e=new s;this._desState=e,this.deriveKeys(e,t.key)}i(u,a),t.exports=u,u.create=function(t){return new u(t)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(t,e){t.keys=new Array(32),n.equal(e.length,this.blockSize,"Invalid key length");var r=o.readUInt32BE(e,0),i=o.readUInt32BE(e,4);o.pc1(r,i,t.tmp,0),r=t.tmp[0],i=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=l[a>>>1];r=o.r28shl(r,s),i=o.r28shl(i,s),o.pc2(r,i,t.keys,a)}},u.prototype._update=function(t,e,r,n){var i=this._desState,a=o.readUInt32BE(t,e),s=o.readUInt32BE(t,e+4);o.ip(a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,a,s,i.tmp,0):this._decrypt(i,a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],o.writeUInt32BE(r,a,n),o.writeUInt32BE(r,s,n+4)},u.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},u.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)n.equal(t[r],e);return t.slice(0,t.length-e)},u.prototype._encrypt=function(t,e,r,n,i){for(var a=e,s=r,u=0;u<t.keys.length;u+=2){var l=t.keys[u],c=t.keys[u+1];o.expand(s,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var h=o.substitute(l,c),f=s;s=(a^o.permute(h))>>>0,a=f}o.rip(s,a,n,i)},u.prototype._decrypt=function(t,e,r,n,i){for(var a=r,s=e,u=t.keys.length-2;u>=0;u-=2){var l=t.keys[u],c=t.keys[u+1];o.expand(a,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var h=o.substitute(l,c),f=a;a=(s^o.permute(h))>>>0,s=f}o.rip(a,s,n,i)}},function(t,e,r){var n=r(23),i=r(1).Buffer,o=r(87);function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var r=Math.ceil(e.length/16),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*r)]);for(var s=0;s<r;s++){var u=a(t),l=o+16*s;t._cache.writeUInt32BE(u[0],l+0),t._cache.writeUInt32BE(u[1],l+4),t._cache.writeUInt32BE(u[2],l+8),t._cache.writeUInt32BE(u[3],l+12)}var c=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,c)}},function(t,e){t.exports=function(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,e,r){var n=r(27),i=r(1).Buffer,o=r(11),a=r(0),s=r(273),u=r(23),l=r(87);function c(t,e,r,a){o.call(this);var u=i.alloc(4,0);this._cipher=new n.AES(e);var c=this._cipher.encryptBlock(u);this._ghash=new s(c),r=function(t,e,r){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var n=new s(r),o=e.length,a=o%16;n.update(e),a&&(a=16-a,n.update(i.alloc(a,0))),n.update(i.alloc(8,0));var u=8*o,c=i.alloc(8);c.writeUIntBE(u,0,8),n.update(c),t._finID=n.state;var h=i.from(t._finID);return l(h),h}(this,r,c),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}a(c,o),c.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},c.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=c},function(t,e,r){var n=r(27),i=r(1).Buffer,o=r(11);function a(t,e,r,a){o.call(this),this._cipher=new n.AES(e),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._mode=t}r(0)(a,o),a.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},function(t,e,r){var n=r(14);t.exports=v,v.simpleSieve=y,v.fermatTest=g;var i=r(92),o=new i(24),a=new(r(93)),s=new i(1),u=new i(2),l=new i(5),c=(new i(16),new i(8),new i(10)),h=new i(3),f=(new i(7),new i(11)),p=new i(4),d=(new i(12),null);function m(){if(null!==d)return d;var t=[];t[0]=2;for(var e=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<e&&t[i]<=n&&r%t[i]!=0;i++);e!==i&&t[i]<=n||(t[e++]=r)}return d=t,t}function y(t){for(var e=m(),r=0;r<e.length;r++)if(0===t.modn(e[r]))return 0===t.cmpn(e[r]);return!0}function g(t){var e=i.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function v(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var r,d;for(e=new i(e);;){for(r=new i(n(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(s),r.testn(1)||r.iadd(u),e.cmp(u)){if(!e.cmp(l))for(;r.mod(c).cmp(h);)r.iadd(p)}else for(;r.mod(o).cmp(f);)r.iadd(p);if(y(d=r.shrn(1))&&y(r)&&g(d)&&g(r)&&a.test(d)&&a.test(r))return r}}},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(277).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,M=0|a[4],S=8191&M,x=M>>>13,E=0|a[5],O=8191&E,P=E>>>13,T=0|a[6],I=8191&T,L=T>>>13,R=0|a[7],C=8191&R,A=R>>>13,k=0|a[8],N=8191&k,j=k>>>13,F=0|a[9],D=8191&F,B=F>>>13,G=0|s[0],z=8191&G,U=G>>>13,q=0|s[1],V=8191&q,Y=q>>>13,Z=0|s[2],W=8191&Z,H=Z>>>13,X=0|s[3],K=8191&X,J=X>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,z),i=(i=Math.imul(d,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(v,z)|0,o=Math.imul(v,U),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,Y)|0;var vt=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,U))+Math.imul(w,z)|0,o=Math.imul(w,U),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,W)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,U))+Math.imul(x,z)|0,o=Math.imul(x,U),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,U))+Math.imul(P,z)|0,o=Math.imul(P,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,U))+Math.imul(L,z)|0,o=Math.imul(L,U),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var Mt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(A,z)|0,o=Math.imul(A,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var St=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,U))+Math.imul(j,z)|0,o=Math.imul(j,U),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var xt=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(B,z)|0,o=Math.imul(B,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Y))+Math.imul(B,V)|0,o=Math.imul(B,Y),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,at)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,H))+Math.imul(B,W)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Pt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ft)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ft)|0;var Tt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(B,$)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var It=(l+(n=n+Math.imul(S,dt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(x,dt)|0))<<13)|0;l=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(A,dt)|0))<<13)|0;l=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var At=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863;var kt=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=Mt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=Ot,u[11]=Pt,u[12]=Tt,u[13]=It,u[14]=Lt,u[15]=Rt,u[16]=Ct,u[17]=At,u[18]=kt,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(M,v),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return g[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new x(t)},i(x,S),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){var n=r(278),i=r(44);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},o.prototype.test=function(t,e,r){var i=t.bitLength(),o=n.mont(t),a=new n(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var l=t.shrn(u),c=s.toRed(o);e>0;e--){var h=this._randrange(new n(2),s);r&&r(h);var f=h.toRed(o).redPow(l);if(0!==f.cmp(a)&&0!==f.cmp(c)){for(var p=1;p<u;p++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(c))break}if(p===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var r=t.bitLength(),i=n.mont(t),o=new n(1).toRed(i);e||(e=Math.max(1,r/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),l=a.toRed(i);e>0;e--){var c=this._randrange(new n(2),a),h=t.gcd(c);if(0!==h.cmpn(1))return h;var f=c.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(l)){for(var p=1;p<s;p++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(l))break}if(p===s)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,r){"use strict";var n=e;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r},n.zero2=i,n.toHex=o,n.encode=function(t,e){return"hex"===e?o(t):t}},function(t,e,r){"use strict";var n=e;n.base=r(29),n.short=r(288),n.mont=r(289),n.edwards=r(290)},function(t,e,r){"use strict";var n=r(8).rotr32;function i(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function a(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?a(e,r,n):2===t?o(e,r,n):void 0},e.ch32=i,e.maj32=o,e.p32=a,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,r){"use strict";var n=r(8),i=r(24),o=r(96),a=r(6),s=n.sum32,u=n.sum32_4,l=n.sum32_5,c=o.ch32,h=o.maj32,f=o.s0_256,p=o.s1_256,d=o.g0_256,m=o.g1_256,y=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}n.inherits(v,y),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=u(m(r[n-2]),r[n-7],d(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],y=this.h[2],g=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],w=this.h[7];for(a(this.k.length===r.length),n=0;n<r.length;n++){var M=l(w,p(v),c(v,_,b),this.k[n],r[n]),S=s(f(i),h(i,o,y));w=b,b=_,_=v,v=s(g,M),g=y,y=o,o=i,i=s(M,S)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],y),this.h[3]=s(this.h[3],g),this.h[4]=s(this.h[4],v),this.h[5]=s(this.h[5],_),this.h[6]=s(this.h[6],b),this.h[7]=s(this.h[7],w)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(8),i=r(24),o=r(6),a=n.rotr64_hi,s=n.rotr64_lo,u=n.shr64_hi,l=n.shr64_lo,c=n.sum64,h=n.sum64_hi,f=n.sum64_lo,p=n.sum64_4_hi,d=n.sum64_4_lo,m=n.sum64_5_hi,y=n.sum64_5_lo,g=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function b(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function w(t,e,r,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function M(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function S(t,e,r,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function x(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function E(t,e){var r=s(t,e,28)^s(e,t,2)^s(e,t,7);return r<0&&(r+=4294967296),r}function O(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function P(t,e){var r=s(t,e,14)^s(t,e,18)^s(e,t,9);return r<0&&(r+=4294967296),r}function T(t,e){var r=a(t,e,1)^a(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function I(t,e){var r=s(t,e,1)^s(t,e,8)^l(t,e,7);return r<0&&(r+=4294967296),r}function L(t,e){var r=a(t,e,19)^a(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}function R(t,e){var r=s(t,e,19)^s(e,t,29)^l(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(_,g),t.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=L(r[n-4],r[n-3]),o=R(r[n-4],r[n-3]),a=r[n-14],s=r[n-13],u=T(r[n-30],r[n-29]),l=I(r[n-30],r[n-29]),c=r[n-32],h=r[n-31];r[n]=p(i,o,a,s,u,l,c,h),r[n+1]=d(i,o,a,s,u,l,c,h)}},_.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],l=this.h[5],p=this.h[6],d=this.h[7],g=this.h[8],v=this.h[9],_=this.h[10],T=this.h[11],I=this.h[12],L=this.h[13],R=this.h[14],C=this.h[15];o(this.k.length===r.length);for(var A=0;A<r.length;A+=2){var k=R,N=C,j=O(g,v),F=P(g,v),D=b(g,v,_,T,I),B=w(g,v,_,T,I,L),G=this.k[A],z=this.k[A+1],U=r[A],q=r[A+1],V=m(k,N,j,F,D,B,G,z,U,q),Y=y(k,N,j,F,D,B,G,z,U,q);k=x(n,i),N=E(n,i),j=M(n,i,a,s,u),F=S(n,i,a,s,u,l);var Z=h(k,N,j,F),W=f(k,N,j,F);R=I,C=L,I=_,L=T,_=g,T=v,g=h(p,d,V,Y),v=f(d,d,V,Y),p=u,d=l,u=a,l=s,a=n,s=i,n=h(V,Y,Z,W),i=f(V,Y,Z,W)}c(this.h,0,n,i),c(this.h,2,a,s),c(this.h,4,u,l),c(this.h,6,p,d),c(this.h,8,g,v),c(this.h,10,_,T),c(this.h,12,I,L),c(this.h,14,R,C)},_.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";const n=e;n.bignum=r(100),n.define=r(307).define,n.base=r(310),n.constants=r(311),n.decoders=r(103),n.encoders=r(101)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(306).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,M=0|a[4],S=8191&M,x=M>>>13,E=0|a[5],O=8191&E,P=E>>>13,T=0|a[6],I=8191&T,L=T>>>13,R=0|a[7],C=8191&R,A=R>>>13,k=0|a[8],N=8191&k,j=k>>>13,F=0|a[9],D=8191&F,B=F>>>13,G=0|s[0],z=8191&G,U=G>>>13,q=0|s[1],V=8191&q,Y=q>>>13,Z=0|s[2],W=8191&Z,H=Z>>>13,X=0|s[3],K=8191&X,J=X>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,z),i=(i=Math.imul(d,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(v,z)|0,o=Math.imul(v,U),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,Y)|0;var vt=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,U))+Math.imul(w,z)|0,o=Math.imul(w,U),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,W)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,U))+Math.imul(x,z)|0,o=Math.imul(x,U),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,U))+Math.imul(P,z)|0,o=Math.imul(P,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,U))+Math.imul(L,z)|0,o=Math.imul(L,U),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var Mt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(A,z)|0,o=Math.imul(A,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var St=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,U))+Math.imul(j,z)|0,o=Math.imul(j,U),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var xt=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(B,z)|0,o=Math.imul(B,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Y))+Math.imul(B,V)|0,o=Math.imul(B,Y),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,at)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,H))+Math.imul(B,W)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Pt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ft)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ft)|0;var Tt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(B,$)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var It=(l+(n=n+Math.imul(S,dt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(x,dt)|0))<<13)|0;l=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(A,dt)|0))<<13)|0;l=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var At=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863;var kt=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=Mt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=Ot,u[11]=Pt,u[12]=Tt,u[13]=It,u[14]=Lt,u[15]=Rt,u[16]=Ct,u[17]=At,u[18]=kt,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(M,v),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return g[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new x(t)},i(x,S),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e,r){"use strict";const n=e;n.der=r(102),n.pem=r(308)},function(t,e,r){"use strict";const n=r(0),i=r(50).Buffer,o=r(51),a=r(53);function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){o.call(this,"der",t)}function l(t){return t<10?"0"+t:t}t.exports=s,s.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},n(u,o),u.prototype._encodeComposite=function(t,e,r,n){const o=function(t,e,r,n){let i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(a.tagByName.hasOwnProperty(t))i=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t}if(i>=31)return n.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=a.tagClassByName[r||"universal"]<<6,i}(t,e,r,this.reporter);if(n.length<128){const t=i.alloc(2);return t[0]=o,t[1]=n.length,this._createEncoderBuffer([t,n])}let s=1;for(let t=n.length;t>=256;t>>=8)s++;const u=i.alloc(2+s);u[0]=o,u[1]=128|s;for(let t=1+s,e=n.length;e>0;t--,e>>=8)u[t]=255&e;return this._createEncoderBuffer([u,n])},u.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=i.alloc(2*t.length);for(let r=0;r<t.length;r++)e.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},u.prototype._encodeObjid=function(t,e,r){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let e=0;e<t.length;e++){let r=t[e];for(n++;r>=128;r>>=7)n++}const o=i.alloc(n);let a=o.length-1;for(let e=t.length-1;e>=0;e--){let r=t[e];for(o[a--]=127&r;(r>>=7)>0;)o[a--]=128|127&r}return this._createEncoderBuffer(o)},u.prototype._encodeTime=function(t,e){let r;const n=new Date(t);return"gentime"===e?r=[l(n.getUTCFullYear()),l(n.getUTCMonth()+1),l(n.getUTCDate()),l(n.getUTCHours()),l(n.getUTCMinutes()),l(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[l(n.getUTCFullYear()%100),l(n.getUTCMonth()+1),l(n.getUTCDate()),l(n.getUTCHours()),l(n.getUTCMinutes()),l(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=i.from(e)}if(i.isBuffer(t)){let e=t.length;0===t.length&&e++;const r=i.alloc(e);return t.copy(r),0===t.length&&(r[0]=0),this._createEncoderBuffer(r)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let e=t;e>=256;e>>=8)r++;const n=new Array(r);for(let e=n.length-1;e>=0;e--)n[e]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(i.from(n))},u.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},u.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},u.prototype._skipDefault=function(t,e,r){const n=this._baseState;let i;if(null===n.default)return!1;const o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0}},function(t,e,r){"use strict";const n=e;n.der=r(104),n.pem=r(309)},function(t,e,r){"use strict";const n=r(0),i=r(100),o=r(25).DecoderBuffer,a=r(51),s=r(53);function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){a.call(this,"der",t)}function c(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=s.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=t.readUInt8(e),t.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:s.tag[r]}}function h(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0==(128&n))return n;const i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(let e=0;e<i;e++){n<<=8;const e=t.readUInt8(r);if(t.isError(e))return e;n|=e}return n}t.exports=u,u.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},n(l,a),l.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;const n=t.save(),i=c(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},l.prototype._decodeTag=function(t,e,r){const n=c(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let i=h(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');const o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},l.prototype._skipUntilEnd=function(t,e){for(;;){const r=c(t,e);if(t.isError(r))return r;const n=h(t,r.primitive,e);if(t.isError(n))return n;let i;if(i=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===r.tagStr)break}},l.prototype._decodeList=function(t,e,r,n){const i=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=r.decode(t,"der",n);if(t.isError(o)&&e)break;i.push(o)}return i},l.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let r="";for(let t=0;t<e.length/2;t++)r+=String.fromCharCode(e.readUInt16BE(2*t));return r}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},l.prototype._decodeObjid=function(t,e,r){let n;const i=[];let o=0,a=0;for(;!t.isEmpty();)a=t.readUInt8(),o<<=7,o|=127&a,0==(128&a)&&(i.push(o),o=0);128&a&&i.push(o);const s=i[0]/40|0,u=i[0]%40;if(n=r?i:[s,u].concat(i.slice(1)),e){let t=e[n.join(" ")];void 0===t&&(t=e[n.join(".")]),void 0!==t&&(n=t)}return n},l.prototype._decodeTime=function(t,e){const r=t.raw().toString();let n,i,o,a,s,u;if("gentime"===e)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),s=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),u=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,a,s,u,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},l.prototype._decodeInt=function(t,e){const r=t.raw();let n=new i(r);return e&&(n=e[n.toString(10)]||n),n},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(t,e,r){var n=r(19),i=r(1).Buffer;function o(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var r,a=i.alloc(0),s=0;a.length<e;)r=o(s++),a=i.concat([a,n("sha1").update(t).update(r).digest()]);return a.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t}},function(t,e,r){var n=r(54),i=r(1).Buffer;t.exports=function(t,e){return i.from(t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed().toArray())}},function(t,e,r){"use strict";t.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();t.exports=function(t,e,r,i){var o=n,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,r){"use strict";var n=r(12),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,e.string2buf=function(t){var e,r,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},e.buf2string=function(t,e){var r,n,i,o,s=e||t.length,l=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)l[n++]=i;else if((o=a[i])>4)l[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&t[r++],o--;o>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return u(l,n)},e.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e}},function(t,e,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){t.exports='<div class="m-control"></div>'},function(t){t.exports=JSON.parse('{"location":{"title":"Get current location"},"layerswitcher":{"title":"Layer selector"},"scale":{"title":"Scale","scale":"Scale","level":"Zoom level"},"getfeatureinfo":{"info":"Information","title":"Consult layer","no_info":"No associated info","info_of":"Information about","unsupported_format":"Unsupported format"},"wmcselector":{"title":"Context selector"},"rotate":{"title":"Turn north"},"mouse":{"title":"Pointer coordinates"},"dialog":{"info":"INFORMATION","error":"ERROR","success":"SUCCESS","id_feature":"An ID has not been indicated to obtain the feature","invalid_type_layer":"A valid type was not specified for the layer","vector_filter":"The indicated filter is not correct","unauthorized_user":"An error occurred while loading the layer: Unauthorized user.","only_one_filter":"FeatureID and CQL are mutually exclusive, indicate only one type of filtering.","any_format":"TXT, HTML and GML are and unsupported"},"toast":{"close":"Cerrar"},"feature":{"incorrect_attributes":"The attributes were not specified correctly."},"heatmap":{"features":"The layer does not have any <br/> features with the specified attribute in set symbology. <br/>A default weighting is set","name":"Heatmap"},"exception":{"addto_method":"The used implementation does not have the addTo method","getelement_method":"The used implementation does not have the getElement method","getfeatureinfo_method":"The used implementation can not create GetFeatureInfo controls","mouse_method":"The used implementation can not create Mouse controls","navtoolbar_method":"The used implementation can not create navtoolbar controls","overviewmap_method":"The used implementation can not create OverviewMap controls","panzoom_method":"The used implementation can not create Panzoom controls","panzoombar_method":"The used implementation can not create Panzoombar controls","scale_method":"The used implementation can not create Scale controls","scaleline_method":"The used implementation can not create ScaleLine controls","wmcselector_method":"The used implementation can not create WMCSelector controls","geojson_method":"The used implementation can not create objects M.impl.format.GeoJSON","wkt_method":"The used implementation can not creat objects M.impl.format.WKT","getfeaturesbylayer_method":"The used implementation does not have the getFeaturesByLayer method","geojsonlayer_method":"The used implementation can not create GeoJSON layers","no_param":"No parameters specified","no_name":"You have not specified any name","kmllayer_method":"The used implementation can not create KML layers","isvisible_method":"The used implementation does not have the isVisible method","isqueryable_methd":"The used implementation does not have the isQueryable method","visibility_param":"You have not specified any visibility parameters","setvisible_method":"The used implementation does not have the setVisible method","inrange_method":"The used implementation does not have the inRange method","mapbox_method":"The used implementation can not create Mapbox layers","osm_method":"The used implementation can not create OSM layers","vectorlayer_method":"The used implementation can not create Vector layers","wfslayer_method":"The used implementation can not create WFS layers","wmclayer_method":"The used implementation can not create WMC layers","select_method":"The used implementation does not have the select method","unselect_method":"The used implementation does not have the unselect method","constructor_impl":"The used implementation does not have a constructor.","getlayers_method":"The used implementation does not have the getLayers method.","getbaselayers_method":"The used implementation does not have the getBaseLayers method.","addlayers_method":"The used implementation does not have the addLayers method.","removelayers_method":"The used implementation does not have the removeLayers method.","getwmc_method":"The implementation used does not have the getWMC method.","addwmc_method":"The used implementation does not have the addWMC method.","removewmc_method":"The used implementation does not have the removeWMC method.","getkml_method":"The used implementation does not have the getKML method.","addkml_method":"The implementation used does not have the addKML method.","removekml_method":"The implementation used does not have the removeKML method.","getwms_method":"The used implementation does not have the getWMS method.","addwms_method":"The used implementation does not have the addWMS method.","removewms_method":"The used implementation does not have the removeWMS method.","getwfs_method":"The implementation used does not have the getWFS method.","getgeojson_method":"The used implementation does not have the getGeoJSON method.","getogcapif_method":"The used implementation does not have the getOGCAPIFeatures method.","addwfs_method":"The used implementation does not have the addWFS method.","removewfs_method":"The used implementation does not have the removeWFS method.","getwmts_method":"The implementation used does not have the getWMTS method.","addwmts_method":"The used implementation does not have the addWMTS method.","removewmts_method":"The used implementation does not have the removeWMTS method.","getmbtiles_method":"The used implementation does not have the getMBtiles method.","getxyzs_method":"The used implementation does not have the getXYZs method.","gettms_method":"The used implementation does not have the getTMS method.","getcontrols_method":"The used implementation does not have the getControls method.","addcontrols_method":"The used implementation does not have the addControls method.","remove_control":"You have not specified any control to delete.","removecontrol_method":"The used implementation does not have the removeControls method.","setmaxextent_method":"The used implementation does not have the setMaxExtent method.","getbbox_method":"The used implementation does not have the getBbox method.","no_bbox":"You have not specified any bbox.","setbbox_method":"The used implementation does not have the setBbox method.","incorrect_bbox_format":"The format of the bbox parameter is not correct.","getzoom_method":"The used implementation does not have the getZoom method.","no_zoom":"You have not specified any zoom.","setzoom_method":"The implementation used does not have the setZoom method.","getcenter_method":"The used implementation does not have the getCenter method.","setcenter_method":"The used implementation does not have the setCenter method.","getresolutions_method":"The used implementation does not have the getResolutions method.","no_resolutions":"You have not specified any resolution.","setresolutions_method":"The used implementation does not have the setResolutions method.","getscale_method":"The used implementation does not have the getScale method.","getprojection_method":"The implementation used does not have the getProjection method.","no_projection":"You have not specified any projection.","setprojection_method":"The used implementation does not have the setProjection method.","no_plugins":"You have not specified any plugins.","no_add_plugin_to_map":"The plugin can not be added to the map.","no_plugin_to_remove":"You have not specified any plugins to delete.","destroy_method":"The used implementation does not have the destroy method.","addlabel_method":"The used implementation does not have the addLabel method.","no_point":"You have not specified any points.","remove_control_from_panel":"You must remove the controls from the panel previously.","getcontainer_method":"The used implementation does not have the getContainer method.","getmapimpl_method":"The used implementation does not have the getMapImpl method.","removepopup_method":"The used implementation does not have the removePopup method.","no_popup":"You have not specified any popup.","invalid_popup":"The specified popup is not valid.","no_maxextent":"You have not specified any maxExtent","must_be_document":"doc.nodeType must be DOCUMENT type","no_service_response":"There was no reply from the service","no_kml_response":"There was no response from the KML","no_getfeature_response":"There was no response in the GetFeature operation","no_map":"You have not specified any map","layerswitcher_method":"The used implementation can not create LayerSwitcher controls","location_method":"The used implementation can not create Location controls","wms_method":"The used implementation can not create WMS layers","wmts_method":"The used implementation can not create WMTS layers","no_impl":"No implementation specified","no_container":"You have not specified any container parameters","no_id_container":"There is no container with the specified id","no_center":"You have not specified any center parameters","no_attr_name":"The name of the attribute was not specified","no_empty":"The attribute name can not be null. Specify string or function","invalid_center_param":"The format of the center parameter is not correct","invalid_maxextent_param":"The format of the maxExtent parameter is not correct","invalid_resolutions_param":"The format of the resolutions parameter is not correct","invalid_zoom_param":"The format of the zoom parameter is not correct","min_gt_max":"A minimum radius greater than the maximum can not be established.","max_lt_min":"A maximum radius of less than the minimum can not be established.","no_geojson":"No GeoJSON has been specified","unsupported_lang":"A language without support has been established","mbtilesvector_method":"The used implementation can not create MBTilesVector layers","mbtiles_method":"The used implementation can not create MBTiles layers","no_source":"No source was specified.","addmbtiles_method":"The implementation used does not have the method addMBTilesVector.","removembtiles_method":"The implementation used does not have the method removeMBTilesVector."}}')},function(t){t.exports=JSON.parse('{"location":{"error":"El control ubicación no acepta http. Debe usar https.","title":"Obtener ubicación actual"},"layerswitcher":{"title":"Selector de capas"},"scale":{"title":"Escala","scale":"Escala","level":"Nivel de zoom"},"getfeatureinfo":{"info":"Información","title":"Consultar capa","no_info":"No existe información asociada","info_of":"Información de","unsupported_format":"Formato no soportado"},"wmcselector":{"title":"Selector de contextos"},"rotate":{"title":"Girar al norte"},"mouse":{"title":"Coordenadas del puntero"},"dialog":{"info":"INFORMACIÓN","error":"ERROR","success":"ÉXITO","id_feature":"No se ha indicado un ID para obtener el feature","invalid_type_layer":"No se ha especificado un tipo válido para la capa","vector_filter":"El filtro indicado no es correcto","unauthorized_user":"Ha ocurrido un error al cargar la capa: Usuario no autorizado.","only_one_filter":"FeatureID y CQL son mutuamente excluyentes. Indicar sólo un tipo de filtrado.","any_format":"TXT, ni HTML ni GML están soportados"},"toast":{"close":"Cerrar"},"feature":{"incorrect_attributes":"No se han especificado correctamente los atributos."},"heatmap":{"features":"La capa no tiene ninguna feature <br/> con el atributo especificado en simbología establecida. <br/>Se setea una ponderación por defecto","name":"Mapa de calor"},"exception":{"addto_method":"La implementación usada no posee el método addTo","getelement_method":"La implementación usada no posee el método getElement","getfeatureinfo_method":"La implementación usada no puede crear controles GetFeatureInfo","mouse_method":"La implementación usada no puede crear controles Mouse","navtoolbar_method":"La implementación usada no puede crear controles Navtoolbar","overviewmap_method":"La implementación usada no puede crear controles OverviewMap","panzoom_method":"La implementación usada no puede crear controles Panzoom","panzoombar_method":"La implementación usada no puede crear controles Panzoombar","scale_method":"La implementación usada no puede crear controles Scale","scaleline_method":"La implementación usada no puede crear controles ScaleLine","wmcselector_method":"La implementación usada no puede crear controles WMCSelector","geojson_method":"La implementación usada no puede crear objetos M.impl.format.GeoJSON","wkt_method":"La implementación usada no puede creat objetos M.impl.format.WKT","getfeaturesbylayer_method":"La implementación usada no posee el método getFeaturesByLayer","geojsonlayer_method":"La implementación usada no puede crear capas GeoJSON","no_param":"No se ha especificado ningun parámetro","no_name":"No ha especificado ningún nombre","kmllayer_method":"La implementación usada no puede crear capas KML","isvisible_method":"La implementación usada no posee el método isVisible","isqueryable_methd":"La implementación usada no posee el método isQueryable","visibility_param":"No ha especificado ningún parámetro de visibilidad","setvisible_method":"La implementación usada no posee el método setVisible","inrange_method":"La implementación usada no posee el método inRange","mapbox_method":"La implementación usada no puede crear capas Mapbox","osm_method":"La implementación usada no puede crear capas OSM","vectorlayer_method":"La implementación usada no puede crear capas Vector","wfslayer_method":"La implementación usada no puede crear capas WFS","wmclayer_method":"La implementación usada no puede crear capas WMC","select_method":"La implementación usada no posee el método select","unselect_method":"La implementación usada no posee el método unselect","constructor_impl":"La implementación usada no posee un constructor.","getlayers_method":"La implementación usada no posee el método getLayers.","getbaselayers_method":"La implementación usada no posee el método getBaseLayers.","addlayers_method":"La implementación usada no posee el método addLayers.","removelayers_method":"La implementación usada no posee el método removeLayers.","getwmc_method":"La implementación usada no posee el método getWMC.","addwmc_method":"La implementación usada no posee el método addWMC.","removewmc_method":"La implementación usada no posee el método removeWMC.","getkml_method":"La implementación usada no posee el método getKML.","addkml_method":"La implementación usada no posee el método addKML.","removekml_method":"La implementación usada no posee el método removeKML.","getwms_method":"La implementación usada no posee el método getWMS.","addwms_method":"La implementación usada no posee el método addWMS.","removewms_method":"La implementación usada no posee el método removeWMS.","getwfs_method":"La implementación usada no posee el método getWFS.","getgeojson_method":"La implementación usada no posee el método getGeoJSON.","getogcapif_method":"La implementación usada no posee el método getOGCAPIFeatures.","addwfs_method":"La implementación usada no posee el método addWFS.","removewfs_method":"La implementación usada no posee el método removeWFS.","getwmts_method":"La implementación usada no posee el método getWMTS.","addwmts_method":"La implementación usada no posee el método addWMTS.","removewmts_method":"La implementación usada no posee el método removeWMTS.","getmbtiles_method":"La implementación usada no posee el método getMBtiles.","getxyzs_method":"La implementación usada no posee el método getXYZs.","gettms_method":"La implementación usada no posee el método getTMS.","getcontrols_method":"La implementación usada no posee el método getControls.","addcontrols_method":"La implementación usada no posee el método addControls.","remove_control":"No ha especificado ningún control a eliminar.","removecontrol_method":"La implementación usada no posee el método removeControls.","setmaxextent_method":"La implementación usada no posee el método setMaxExtent.","getbbox_method":"La implementación usada no posee el método getBbox.","no_bbox":"No ha especificado ningún bbox.","setbbox_method":"La implementación usada no posee el método setBbox.","incorrect_bbox_format":"El formato del parámetro bbox no es el correcto.","getzoom_method":"La implementación usada no posee el método getZoom.","no_zoom":"No ha especificado ningún zoom.","setzoom_method":"La implementación usada no posee el método setZoom.","getcenter_method":"La implementación usada no posee el método getCenter.","setcenter_method":"La implementación usada no posee el método setCenter.","getresolutions_method":"La implementación usada no posee el método getResolutions.","no_resolutions":"No ha especificado ninguna resolución.","setresolutions_method":"La implementación usada no posee el método setResolutions.","getscale_method":"La implementación usada no posee el método getScale.","getprojection_method":"La implementación usada no posee el método getProjection.","no_projection":"No ha especificado ninguna proyección.","setprojection_method":"La implementación usada no posee el método setProjection.","no_plugins":"No ha especificado ningún plugin.","no_add_plugin_to_map":"El plugin no puede añadirse al mapa.","no_plugin_to_remove":"No ha especificado ningún plugin a eliminar.","destroy_method":"La implementación usada no posee el método destroy.","addlabel_method":"La implementación usada no posee el método addLabel.","no_point":"No ha especificado ningún punto.","remove_control_from_panel":"Debe eliminar los controles del panel previamente.","getcontainer_method":"La implementación usada no posee el método getContainer.","getmapimpl_method":"La implementación usada no posee el método getMapImpl.","removepopup_method":"La implementación usada no posee el método removePopup.","no_popup":"No ha especificado ningún popup.","invalid_popup":"El popup especificado no es válido.","no_maxextent":"No ha especificado ningún maxExtent","must_be_document":"doc.nodeType debe ser de tipo DOCUMENT","no_service_response":"No hubo respuesta del servicio","no_kml_response":"No hubo respuesta del KML","no_getfeature_response":"No hubo respuesta en la operación GetFeature","no_map":"No ha especificado ningun mapa","layerswitcher_method":"La implementación usada no puede crear controles LayerSwitcher","location_method":"La implementación usada no puede crear controles Location","wms_method":"La implementación usada no puede crear capas WMS","wmts_method":"La implementación usada no puede crear capas WMTS","no_impl":"No se ha especificado ninguna implementación","no_container":"No ha especificado ningún parámetro contenedor","no_id_container":"No existe ningún contenedor con el id especificado","no_center":"No ha especificado ningún parámetro center","no_attr_name":"No se ha especificado el nombre del atributo","no_empty":"El nombre de atributo no puede ser nulo. Especifique cadena o función","invalid_center_param":"El formato del parámetro center no es correcto","invalid_maxextent_param":"El formato del parámetro maxExtent no es correcto","invalid_resolutions_param":"El formato del parámetro resolutions no es correcto","invalid_zoom_param":"El formato del parámetro zoom no es correcto","min_gt_max":"No puede establecerse un radio mínimo mayor que el máximo.","max_lt_min":"No puede establecerse un radio máximo menor que el mínimo.","no_geojson":"No se ha especificado ningun GeoJSON","unsupported_lang":"Se ha establecido un idioma sin soporte","mbtilesvector_method":"La implementación usada no puede crear capas MBTilesVector","mbtiles_method":"La implementación usada no puede crear capas MBTiles","no_source":"Fuente no especificada.","addmbtiles_method":"La implementación usada no posee el método addMBTilesVector.","removembtiles_method":"La implementación usada no posee el método removeMBTilesVector."}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution.","mode":"La opción \'mode\' no ha sido establecida correctamente. Consejo: {mode: 1 | 2 | 3}.","type":"La opción \'type\' no ha sido establecida. Cuando la opción \'url\' es usada el plugin necesita la opción \'type\'. Valores = geojson | kml | topojson.","layer_name":"La opción \'layerName\' no ha sido establecida. Cuando la opción \'url\' es usada el plugin necesita la opción \'layerName\'."},"attribution":"atribución","tooltip":"Reconocimientos"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls.","mode":"Options mode is bad setted. Tip: {mode: 1 | 2 | 3}.","type":"Missing \'type\' options. When \'url\' option is setted the plugin needs \'type\' option. Values = geojson | kml | topojson.","layer_name":"Missing \'layerName\' options. When \'url\' option is setted the plugin needs \'layerName\' option."},"attribution":"attribution","tooltip":"Acknowledgments"}')},function(t){t.exports=JSON.parse('{"tooltip":"Capas de fondo","none":"Ninguna"}')},function(t){t.exports=JSON.parse('{"tooltip":"Background layers","none":"None"}')},function(t){t.exports=JSON.parse('{"exception":{"cobertura":"Comprobando cobertura en la zona...","nocobertura":"Esta capa no tiene cobertura en esta zona"},"tooltip":"Capas Adicionales","layers":"Capas Adicionales","vectoriallayers":"Capas vectoriales","ortofotos":"Ortofotos","warning":"AVISO"}')},function(t){t.exports=JSON.parse('{"exception":{"cobertura":"Checking coverage in the area...","nocobertura":"This layer has no coverage in this area"},"tooltip":"Additional Layers","layers":"Additional Layers","vectoriallayers":"Vectorial layers","ortofotos":"Orthophotos","warning":"WARNING"}')},function(t){t.exports=JSON.parse('{"tooltip":"Área de influencia","tooltip_point":"Pintar punto","tooltip_line":"Pintar línea","tooltip_polygon":"Pintar polígono","tooltip_remove":"Eliminar","title_popup":"ÁREA DE INFLUENCIA","unit_m":"Metros","unit_km":"Kilómetros","exception_layer":"La implementación usada no puede crear capas BufferLayer","exception_control":"La implementación usada no puede crear controles influenceareaControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"Influence Area","tooltip_point":"Draw Point","tooltip_line":"Draw Line","tooltip_polygon":"Draw Polygon","tooltip_remove":"Remove","title_popup":"INFLUENCE AREA","unit_m":"Metres","unit_km":"Kilometres","exception_layer":"The implementation used cannot create BufferLayer layers","exception_control":"The implementation used cannot create influenceareaControl controls"}')},function(t){t.exports=JSON.parse('{"tooltip":"Cita previa","exception_calendarcontrol":"La implementación usada no puede crear controles CalendarControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"Previous appointment","exception_calendarcontrol":"The implementation used cannot create CalendarControl controls"}')},function(t){t.exports=JSON.parse('{"tooltip":"Panel de Comparadores","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","exception":"La implementación usada no puede crear controles ComparepanelControl","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","tooltip_deactivatecurtain":"Desactivar cortina","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","tooltipTimeline":"Línea de tiempo","titleTimeline":"Línea de tiempo","tooltipTransparency":"Transparencia","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","nolayertext":"Ninguna capa","freeze":"Inmovilizar cursor","unfreeze":"liberar cursor","activate_spyeye":"Activar Spy Eye","deactivate_spyeye":"Desactivar Spy Eye"}')},function(t){t.exports=JSON.parse('{"tooltip":"Comparepanel","title":"Comparepanel","play":"Play","pause":"Pause","exception":"The implementation used cannot create comparepanelControl controls","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","tooltip_deactivatecurtain":"Deactivate curtain","layers":"Layehrs","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","tooltipTimeline":"Timeline","titleTimeline":"Timeline","tooltipTransparency":"Transparency","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","nolayertext":"No layer selected","freeze":"freeze cursor","unfreeze":"defrost cursor","activate_spyeye":"SpyEye ON","deactivate_spyeye":"SpyEye OFF"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"tooltip":"Enlaces y contacto IGN","title":"Enlaces y contacto","links":{"downloads":"Descargas CNIG","compare":"Comparador PNOA","3d":"Visualizador 3D","photo":"Fototeca"},"accessibility":{"webLinks":"Links to IGN websites","socialMedia":"Links to IGN\'s social networks"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"tooltip":"IGN links and contact","title":"Links and contact","links":{"downloads":"CNIG Downloads","compare":"PNOA Comparator","3d":"3D Display","photo":"Aerial Photography Viewer"},"accessibility":{"webLinks":"Enlaces a sitios web del IGN","socialMedia":"Enlaces a las redes sociales del IGN"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles FullTOCControl.","extent":"No se puede obtener la extensión de la capa","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","only_http":"Sólo se permiten servicios http","only_https":"Sólo se permiten servicios https","no_http_https":"No se permiten servicios http ni https","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","select_layer":"Debes seleccionar al menos una capa","no_results":"No se han encontrado capas en este servicio","codsi":"Ha ocurrido un error al consultar el catálogo CODSI","codsi_no_results":"No hay resultados para su búsqueda"},"tooltip":"Capas","info":"Información","layer_info":"Información de la capa","configure_layer":"Configurar capa","close":"Cerrar","load_ext_services":"Cargar capas de información geográfica","layers":"Capas","add_service":"Añadir servicio","show_hide":"Mostrar/Ocultar leyenda","zoom":"Zoom a la capa","info_metadata":"Ver información","change_style":"Cambiar estilo","remove_layer":"Eliminar capa del mapa","select_style":"Selecciona un estilo","change":"Cambiar","url_service":"Incluir URL del servicio a cargar","query":"Consultar","loaded_services":"Capas de información geográfica","codsi_services":"Catálogo de Servicios INSPIRE (CODSI)","clean":"Limpiar búsqueda","availables":"Listado de algunas capas disponibles","title":"Título","name":"Nombre","abstract":"Resumen","provider":"Proveedor","service_info":"Información del servicio (Capabilities)","download_center":"Centro de descargas","add":"Añadir","drag_drop":"Arrastre y suelte para cambiar el orden de visualización","see_more":"Mostrar metadato del conjunto de datos","see_less":"Ocultar metadato del conjunto de datos","service":"Servicio","metadata_abstract":"Resumen (metadato)","responsible":"Responsable","access_constraints":"Restricciones de acceso","use_constraints":"Restricciones de uso","online_resources":"Recursos online","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","filter_results":"Filtrar resultados","clean_filter":"Limpiar filtro","filter_text":"Texto a buscar","metadata":"Metadatos","see_more_layer":"Ver más información de la capa","see_more_service":"Ver más información del servicio","select_service":"Selecciona una capa","amount_results":"Obtener ","amount_results_2":" elementos","bbox-select":"Solo de la extensión actual","no-limit":"Obtener todos los elementos","custom_query":"Consulta personalizada","no_results":"No se han encontrado resultados","search":"Buscar","yes":"Sí","no":"No","filters":"Filtros","other_filters":"Otros filtros","id_filter":"Filtrar por ID","warning":"ADVERTENCIA: No se recomiendan límites altos","add_btn":"Añadir","custom_query_btn":"Más filtros","apply_btn":"Aplicar","style":"Estilo","default_style":"Estilo predeterminado","selected":"seleccionado","custom_query_warning":"ATENCIÓN: La opción buscar por «Más filtros» se basa en un estándar en estado borrador. El resultado de la consulta puede no ser el deseado.","check_results":"Comprobar resultados","results_1_plural":"Se han encontrado ","results_2_plural":" features","results_1_singular":"Se ha encontrado ","results_2_singular":" feature"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create FullTOCControl.","extent":"Cannot get the extent of the layer","capabilities":"An error has occurred in obtaining the GetCapabilities document","only_http":"Only http services are allowed","only_https":"Only https services are allowed","no_http_https":"No http or https services allowed","valid_url":"You must provide a valid URL","empty":"The fields are empty","select_layer":"You must select at least one layer","no_results":"No layers found in this service","codsi":"An error occurred while consulting the CODSI catalog","codsi_no_results":"There are no results for your search"},"tooltip":"Layers","info":"Information","layer_info":"Layer information","configure_layer":"Configure layer","close":"Close","load_ext_services":"Load geographic information layers","layers":"Layers","add_service":"Add service","show_hide":"Show/Hide legend","zoom":"Zoom to the layer","info_metadata":"View information","change_style":"Change style","remove_layer":"Remove layer from map","select_style":"Select a style","change":"Change","url_service":"Include URL of the service to load","query":"Consult","loaded_services":"Preloaded geographic information layers","codsi_services":"INSPIRE Services Catalog (CODSI)","clean":"Clean search","availables":"List of some available layers","title":"Title","name":"Name","abstract":"Abstract","provider":"Provider","service_info":"Service information (Capabilities)","download_center":"Download center","add":"Add","drag_drop":"Drag and drop to change display order","see_more":"Show dataset metadata","see_less":"Hide dataset metadata","service":"Service","metadata_abstract":"Abstract (metadata)","responsible":"Responsible","access_constraints":"Access constraints","use_constraints":"Use constraints","online_resources":"Online resources","show_service_info":"Show service information","hide_service_info":"Hide service information","filter_results":"Filter results","clean_filter":"Clean filter","filter_text":"Text to search","metadata":"Metadata","see_more_layer":"View more information about the layer (Metadata)","see_more_service":"View more service information (Metadata)","select_service":"Select layer","amount_results":"Get ","amount_results_2":" elements","bbox-select":"Find features within rendered map","no-limit":"Get all results","custom_query":"Custom query","no_results":"No results found","search":"Search","yes":"Sí","no":"No","filters":"Filters","other_filters":"Other filters","id_filter":"Filter by ID","warning":"WARNING: High limits are not recommended","add_btn":"Add","custom_query_btn":"More filters","apply_btn":"Apply","style":"Style","default_style":"Default style","selected":"selected","custom_query_warning":"WARNING: Filtering by \\"More filters\\" it is based on a draft standard. The result of the query may not be as desired.","check_results":"Check results","results_1_plural":"","results_2_plural":" features have been found.","results_1_singular":"","results_2_singular":" feature has been found."}')},function(t){t.exports=JSON.parse('{"exception":{"emptylater":"La capa de dibujo está vacía.","geometrianoencontrar":"Geometría no reconocida.","formatocoord":"Las coordenadas introducidas no tienen el formato correcto.","introduzcoord":"No se han introducido las coordenadas correctamente.","errorfichero":"Error al cargar el fichero.","nodetectado":"No se han detectado geometrías en este fichero.","comprobar":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","insertado":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX y GeoJSON.","maxfichero":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","ficherosel":"No se ha seleccionado formato de descarga."},"tooltip":"Dibujo de geometrías","punto":"Punto","coordenadas":"Punto por coordenadas","linea":"Línea","poligono":"Polígono","texto":"Texto","editgeometria":"Editar geometría","descgeometria":"Descargar geometrías","subircapa":"Subir capa","limpiar":"Limpiar","color":"Color","grosor":"Grosor","borrar":"Borrar geometría","dibujar":"Dibujar geometría","descargar":"Descargar","sistema":"Sistema de coordenadas","longitud":"Longitud","latitud":"Latitud","fuente":"Fuente","tamaño":"Tamaño","eliminar":"Eliminar texto","ficheros":"Los formatos aceptados son KML, SHP (.zip), GPX y GeoJSON.","seleccionar":"Selecciona el fichero","cargarcapa":"Cargar capa"}')},function(t){t.exports=JSON.parse('{"exception":{"emptylater":"The drawing layer is empty.","geometrianoencontrar":"Unrecognized geometry.","formatocoord":"The entered coordinates are not in the correct format.","introduzcoord":"Coordinates are not entered correctly.","errorfichero":"Error loading the file.","nodetectado":"No geometries have been detected in this file.","comprobar":"Error loading the file. Verify that this is the correct file.","insertado":"A permitted file extension has not been inserted. The allowed ones are: KML, SHP (.zip), GPX and GeoJSON.","maxfichero":"The selected file exceeds the maximum of 20 MB allowed","ficherosel":"Download format has not been selected."},"tooltip":"Geometry drawing","punto":"Point","coordenadas":"Coordinate point","linea":"Line","poligono":"Polygon","texto":"Text","editgeometria":"Edit geometry","descgeometria":"Download geometry","subircapa":"Import layer","limpiar":"Clean","color":"Color","grosor":"Stroke","borrar":"Delete geometry","dibujar":"Draw geometry","descargar":"Download","sistema":"Coordinate system","longitud":"Longitude","latitud":"Latitude","fuente":"Font","tamaño":"Size","eliminar":"Delete text","ficheros":"The accepted formats are KML, SHP (.zip), GPX and GeoJSON.","seleccionar":"Select file","cargarcapa":"Load layer"}')},function(t){t.exports=JSON.parse('{"exception":{"loaderror":"La imagen no ha podido ser cargada.","teselaError":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","printError":"Se ha producido un error en la impresión."},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","printInfo":"Impresión generada a través de Mapea","tooltip":"Descargar Imagen georreferenciada","referenced":"Imagen georreferenciada","projection":"Proyección","downImg":"Descargar imagen","delete":"Borrar","down":"Descargar","title":"Título","notitle":"(Sin título)","keep":"Conservar vista"}')},function(t){t.exports=JSON.parse('{"exception":{"loaderror":"The image could not be loaded.","teselaError":"The request has caused an error in printing. < br / > Please try again.","printError":"Printing has failed."},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","printInfor":"Print generated by Mapea","tooltip":"Download Georeferenced image","referenced":"Georeferenced image","projection":"Projection","downImg":"Download image","delete":"Delete","down":"Download","title":"Title","notitle":"(No title)","keep":"Keep view"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles Georefimage2","encode_method":"La implementación usada no posee el método encodeLayer","loaderror":"La imagen no ha podido ser cargada.","teselaError":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","printError":"Se ha producido un error en la impresión.","imageError":"No ha podido realizarse la descarga en este momento. Por favor, inténtelo más tarde."},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","printInfo":"Impresión generada a través de Mapea","tooltip":"Descargar Imagen georreferenciada","generating":"Generando imagen georreferenciada","referenced":"Imagen georreferenciada","projection":"Proyección","downImg":"Descargar imagen","delete":"Borrar","down":"Descargar","title":"Título","notitle":"(Sin título)","keep":"Conservar vista","cancel":"Cancelar","accept":"Aceptar","download_modal":"El uso de la información de los productos y servicios de datos geográficos definidos en la <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Orden FOM/2807/2015</a>, así como sus derivados, conlleva la aceptación por el usuario de las condiciones generales de dicha orden, concretada en la siguiente <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">licencia de uso</a>, compatible con CC-BY 4.0.","use_license":"Licencia de uso","map":"Mapa","pnoa":"Imagen (PNOA)","screen":"Imagen Pantalla"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The used implementation cannot create Georefimage2 controls","encode_method":"The used implementation does not have the encodeLayer method","loaderror":"The image could not be loaded.","teselaError":"The request has caused an error in printing. < br / > Please try again.","printError":"Printing has failed.","imageError":"The download could not be completed at this time. Please try again later."},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","printInfor":"Print generated by Mapea","tooltip":"Download Georeferenced image","generating":"Generating georeferenced image","referenced":"Georeferenced image","projection":"Projection","downImg":"Download image","delete":"Delete","down":"Download","title":"Title","notitle":"(No title)","keep":"Keep view","cancel":"Cancel","accept":"Accept","download_modal":"The use of the information of the geographic data products and services defined in the <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Order FOM/2807/2015</a>, as well as its derivatives, entails the acceptance by the user of the general conditions of said order, specified in the following <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">license of use</a>, compatible with CC-BY 4.0.","use_license":"License of use","map":"Map","pnoa":"Image (PNOA)","screen":"Screen Image"}')},function(t){t.exports=JSON.parse('{"tooltip":"Panel de Comparadores","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","exception":"La implementación usada no puede crear controles IberpixCompareControl","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"Para utilizar esta opción de comparación, debe tener cargadas tantas capas en la herramienta \\"Capas\\" como divisiones haya seleccionado","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","nolayertext":"Ninguna capa","no_coverage":"La capa seleccionada no tiene cobertura en la zona del mapa en la que se encuentra","warning":"Advertencia","print_disabled":"La impresión no está disponible","georef_download_disabled":"La descarga no está disponible","printmap":"Impresión del mapa","georef_download":"Descargar Imagen georreferenciada","no_layer":"Sin capa"}')},function(t){t.exports=JSON.parse('{"tooltip":"IberpixCompare","title":"IberpixCompare","play":"Play","pause":"Pause","exception":"The implementation used cannot create iberpixcompareControl controls","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","layers":"Layehrs","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"In order to use this comparison option, you must have as many layers loaded in the \\"Layers\\" tool as divisions you have selected.","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","nolayertext":"No layer selected","no_coverage":"The selected layer does not have coverage in this area of the map","warning":"Warning","print_disabled":"Printing is not available","georef_download_disabled":"Image download is not available","printmap":"Map Printing","georef_download":"Download Georeferenced image","no_layer":"No layer"}')},function(t){t.exports=JSON.parse('{"exception":{"exists":"No existe dirección asociada para esta ubicación.","results":"No se han encontrado resultados"},"searchresult":"searchresult","tooltip":"Búsqueda de lugares","tooltip_input":"Topónimo, dirección o código postal","deleteresults":"Borrar resultados de la búsqueda","obtener":"Obtener dirección en un punto del mapa","direccion":"Topónimo, dirección o código postal","aprox":"Dirección aproximada","exact":"Dirección exacta"}')},function(t){t.exports=JSON.parse('{"exception":{"exists":"There is no associated address for this location.","results":"No results found"},"searchresult":"searchresult","tooltip":"Search places","tooltip_input":"Place name, address or postal code","deleteresults":"Delete search results","obtener":"Get direction at a point on the map","direccion":"Place name, address or postal code","aprox":"Approximate address","exact":"Exact address"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles InformationControl.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","mapeaerror":"No es posible establecer la conexión con el servidor de Catastro.","noresults":"No se han encontrado resultados","noubi":"No existe dirección asociada para esta ubicación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180."},"informacion":"Información","informacionCatastral":"Información catastral","errorConexion":"No es posible establecer conexión con el servidor de Catastro.","consultar":"Consultar Catastro","description":"Descripción","reference":"Referencia catastral","noReference":"No hay referencia","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE","searchresult":"searchresult","coordinateresult":"coordinateresult","tooltip":"Búsqueda de lugares","tooltip_input":"Topónimo, dirección o código postal","geographic":"Geograficas","zone":"huso","title":"Buscar por coordenadas","titleparcela":"Buscar parcela/catastro","province":"Provincia","municipality":"Municipio","selectmuni":"Seleccione municipio","selectprov":"Seleccione provincia","estate":"Polígono","plot":"Parcela","search":"Buscar","titlerefCatastral":"Búsqueda referencia catastral","refCastatro":"Referencia catastral","placeHolderRC":"Introduzca los 14 ó 20 dígitos de la RC","consultReference":"Consultar Referencia","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","dms":"GMS","dd":"GD","negative":"Nota: Los valores negativos se corresponden con latitud sur y longitud oeste respectivamente","notaRef":"Código de parcela (14 primeros dígitos). Ej.9977715VK3797F (edificio del IGN)","RCnull":"Debe introducir una referencia catastral","direccion":"Topónimo, dirección o código postal","obtener":"Obtener dirección en un punto del mapa","buscparcela":"Buscar parcela/catastro","busccoord":"Buscar por coordenadas","borrarresult":"Borrar resultados de la búsqueda","exact":"Dirección exacta","aprox":"Dirección aproximada","debeprov":"Debe seleccionar una provincia.","debemuni":"Debe seleccionar un municipio.","debepoli":"Debe seleccionar un polígono.","debeparce":"Debe seleccionar una parcela.","accessibility":{"province":"Seleccionar una provincia.","town":"Seleccione un municipio.","estate":"Insertar polígono","plot":"Insertar parcela","cadastre":"Insertar catastro","srs":"Seleccionar sistema de coordenadas"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create XYLocatorControl.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","mapeaerror":"It is not possible to establish a connection with the Cadastre server.","noresults":"No results found","noubi":"There is no associated address for this location.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180."},"searchresult":"searchresult","coordinateresult":"coordinateresult","informacion":"Information","informacionCatastral":"Cadastre information","errorConexion":"It is not possible to establish a connection with the Cadastre server.","consultar":"Cadastre information","description":"Description","reference":"Cadastral reference","noReference":"No reference","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES ","tooltip":"Search places","tooltip_input":"Place name, address or postal code","geographic":"Geographic","zone":"zone","title":"Coordinate locator","titleparcela":"Search parcel/cadastre","municipality":"Municipality","selectmuni":"Select a municipality","selectprov":"Select a province","estate":"Polygon","plot":"Parcel","search":"Search","placeHolderRC":"Enter the 14 or 20 digits of the RC","consultReference":"Consult Reference","titlerefCatastral":"Cadastral reference search","refCastatro":"Cadastral reference","province":"Province","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","north":"North","south":"South","east":"East","west":"West","dms":"DMS","dd":"DD","negative":"Note: Negative values​​ correspond to south latitude and west longitude respectively ","notaRef":"Parcel code (first 14 digits). Ex.9977715VK3797F (IGN building)","RCnull":"You must enter a cadastral reference","direccion":"Place name, address or postal code","obtener":"Get direction at a point on the map","buscparcela":"Search parcel/cadastre","busccoord":"Search coordinates","borrarresult":"Delete results","exact":"Exact address","aprox":"Approximate address","debeprov":"You must select a province.","debemuni":"You must select a municipality.","debepoli":"You must select an polygon.","debeparce":"You must select a parcel.","accessibility":{"province":"Select a province.","town":"Select a town.","estate":"Insert polygon","plot":"Insert parcel","cadastre":"Insert cadastre","srs":"Select coordinate system"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles VectorsControl.","unknown_geom":"Geometría no reconocida.","format_not_selected":"No se ha seleccionado formato de descarga.","size":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","load":"Error al cargar el fichero.","no_geoms":"No se han detectado geometrías en este fichero.","load_correct":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","extension":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX, GML y GeoJSON.","not_extent":"No se puede obtener la extensión de la capa.","no_features":"Esta capa todavía no tiene ninguna entidad. Añada entidades primero.","query_profile":"No se han podido consultar los datos de altitud para esta entidad.","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","error_features_wfs":"No se han podido cargar features de la capa. Inténtalo aumentando el nivel de zoom en la zona de interés.","error_no_features_wfs":"No se han podido cargar features de la capa. Inténtalo de nuevo en otra zona.","error_wfs":"No se ha podido cargar el servicio WFS","wfs_zoom":"Aumente el nivel de zoom * niveles si quiere añadir este servicio WFS,","error_email":"No se ha podido realizar el envío del email.","error_email_size":"El tamaño del fichero adjunto es demasiado grande. El tamaño máximo de ficheros permitido para correos electrónicos es 25Mb."},"tooltip":"Notificar incidencia en cartografía","change_name":"Cambiar nombre","close":"Cerrar","info":"Información","warning":"Advertencia","coordinates":"Coordenadas","length":"Longitud","area":"Área","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)","vector_layers":"Capas vectoriales","profile":"Perfil Topográfico","add_point_layer":"Dibujar incidencias puntuales","add_line_layer":"Dibujar incidencias lineales","add_poly_layer":"Dibujar incidencias superficiales","add_wfs_layer":"Añadir capa WFS","load_layer":"Cargar ruta o capa","point_layer":"Capa incidencias puntuales","line_layer":"Capa incidencias lineales","poly_layer":"Capa incidencias superficiales","show_hide":"Ver/Ocultar","add_geom":"Añadir geometría a la incidencia","edit_geom":"Editar geometría de la incidencia","edit_geom_line":"Editar/Perfil","layer_zoom":"Zoom a la incidencia","download_layer":"Descargar capa","notify_err":"Notificar incidencia","delete_layer":"Eliminar incidencia","color":"Color","thickness":"Grosor","line":"Trazo","delete_geom":"Borrar geometría","query_profile":"Perfil topográfico","accepted":"Los formatos aceptados son KML, SHP (.zip), GPX, GML y GeoJSON.","select_file":"Selecciona el fichero","download":"Descargar","notifyerr":"Enviar incidencia","change":"Cambiar","expand":"Mostrar","collapse":"Ocultar","url_service":"URL del servicio","query":"Consultar","clean":"Limpiar búsqueda","select_service":"Selecciona una capa","select":"Seleccionar","loading":"Cargando","cancel":"Cancelar","reload_from_view":"Recargar desde la vista","loaded_services":"Servicios precargados","availables":"Servicios precargados disponibles","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","title":"Título","abstract":"Resumen","responsible":"Responsable","access_constraints":"Restricciones de acceso","symbology":"Simbología","symbology_profile":"Simbología/Perfil","generating_profile":"Generando perfil","calculate":"Calcular","calculating":"Calculando","try_again":"No se ha podido realizar la consulta. Por favor, inténtelo de nuevo más tarde","email_correct":"El correo con la incidencia se ha enviado correctamente.","sending_email":"El correo está siendo enviado..."}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create VectorsControl controls.","unknown_geom":"Unrecognized geometry.","format_not_selected":"No download format selected.","size":"The selected file exceeds the maximum 20 MB allowed.","load":"Error when loading the file.","no_geoms":"No geometries have been detected in this file.","load_correct":"Error when loading the file. Check that it is the right file.","extension":"A not allowed file extension has been inserted. The allowed ones are: KML, SHP(.zip), GPX, GML and GeoJSON.","not_extent":"Cannot get the layer extension.","no_features":"This layer does not yet have any entities. Add entities first.","query_profile":"The altitude data for this entity could not be queried.","capabilities":"An error has occurred in obtaining the GetCapabilities document","valid_url":"You must provide a valid URL","empty":"The fields are empty","error_features_wfs":"Unable to load layer features. Try increasing the zoom level in the area of interest.","error_no_features_wfs":"Unable to load layer features. Try again in another area.","error_wfs":"Could not load WFS service","wfs_zoom":"Increase the zoom in * levels if you want to add this WFS service","error_email":"The email could not be sent.","error_email_size":"The size of the attached file is too large. The maximum file size allowed for emails is 25Mb."},"tooltip":"Report error in cartography","change_name":"Change name","close":"Close","info":"Information","warning":"Warning","coordinates":"Coordinates","length":"Length","area":"Area","zmin":"Min. Height","zmax":"Max. Height","altitude":"Height","distance":"Total Dist.","ytitle":"Height (m)","xtitle":"Distance (km)","vector_layers":"Vector layers","profile":"Topographic Profile","add_point_layer":"Drawing points","add_line_layer":"Drawing lines","add_poly_layer":"Drawing polygons","add_wfs_layer":"Add WFS layer","load_layer":"Load route or layer","point_layer":"Point layer","line_layer":"Linear layer","poly_layer":"Polygonal layer","show_hide":"Show/Hide","add_geom":"Add geometry","edit_geom":"Edit geometry","edit_geom_line":"Edit/Profile","layer_zoom":"Zoom to the layer","download_layer":"Download layer","notify_err":"Reporting error","delete_layer":"Remove layer","color":"Color","thickness":"Thickness","line":"Stroke","delete_geom":"Remove geometry","query_profile":"Topographic profile","accepted":"The accepted formats are KML, SHP (.zip), GPX, GML and GeoJSON.","select_file":"Select the file","download":"Download","notifyerr":"Enviar incidencia","change":"Change","expand":"Show","collapse":"Hide","url_service":"Service URL","query":"Consult","clean":"Clean search","select_service":"Select layer","select":"Select","loading":"Loading","cancel":"Cancel","reload_from_view":"Reload from the view","loaded_services":"Preloaded services","availables":"Preloaded services available","show_service_info":"Show service information","hide_service_info":"Hide service information","title":"Title","abstract":"Abstract","responsible":"Responsible","access_constraints":"Access constraints","symbology":"Symbology","symbology_profile":"Symbology/Profile","generating_profile":"Generating profile","calculate":"Calculate","calculating":"Calculating","try_again":"The query could not be executed. Please try again later","email_correct":"The email with the incident has been sent correctly.","sending_email":"The email is being sent..."}')},function(t){t.exports=JSON.parse('{"tooltip":"Consultar Catastro","informacionCatastral":"Información catastral","errorConexion":"No es posible establecer conexión con el servidor de Catastro.","consultar":"Consultar Catastro","description":"Descripción","reference":"Referencia catastral","noReference":"No hay referencia","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE"}')},function(t){t.exports=JSON.parse('{"tooltip":"Cadastre information","informacionCatastral":"Cadastre information","errorConexion":"It is not possible to establish a connection with the Cadastre server.","consultar":"Cadastre information","description":"Description","reference":"Cadastral reference","noReference":"No reference","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES "}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Infocoordinates"},"tooltip":"Información Coordenadas","title":"Información Coordenadas","point":"Punto:","datum":"Datum:","latitude":"Latitud:","longitude":"Longitud:","formatCoordinates":"GMS","coordX":"Coord.X (m):","coordY":"Coord.Y (m):","altitude":"Altitud (m):","readingAltitude":"Consultando...","noDatafromWCS":"Sin datos","removePoint":"Elimina el punto","copyLatLon":"Copiar latitud/longitud","copyxy":"Copiar x/y","removeAllPoints":"Elimina todos los puntos","importAllPoints":"Exportar todos los puntos","copyAllPoints":"Copiar todos los puntos","displayONAllPoints":"Mostrar coordenadas de todos los puntos","displayOFFAllPoints":"Ocultar coordenadas de todos los puntos","clipboard":"Resultado copiado al portapapeles"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Infocoordinates controls."},"tooltip":"Coordinates Information","title":"Coordinates Information","point":"Point:","datum":"Datum:","latitude":"Latitude:","longitude":"Longitude:","formatCoordinates":"DMS","coordX":"Coord.X (m):","coordY":"Coord.Y (m):","altitude":"Altitude (m):","readingAltitude":"Reading...","noDatafromWCS":"No data","removePoint":"Removes point","copyLatLon":"Copy latitude/longitude","copyxy":"Copy x/y","removeAllPoints":"Remove all points","importAllPoints":"Export all points","copyAllPoints":"Copy all points","displayONAllPoints":"Show coordinates of all points","displayOFFAllPoints":"Hide coordinates of all points","clipboard":"Result copied to clipboard"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles InformationControl."},"tooltip":"Consultar capas","title":"Información","not_queryable":"No existen capas consultables","querying":"Obteniendo información...","unsupported_format":"Formato no soportado","no_info":"No existe información asociada","info_of":"Información de"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create InformationControl."},"tooltip":"Consult layers","title":"Information","not_queryable":"There are no queryable layers","querying":"Getting information...","unsupported_format":"Unsupported format","no_info":"No associated info","info_of":"Information about"}')},function(t){t.exports=JSON.parse('{"tooltip":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyr1Select_tooltip":"Selecciona la capa de la posición 1","lyr2Select_tooltip":"Selecciona la capa de la posición 2","lyr3Select_tooltip":"Selecciona la capa de la posición 3","lyr4Select_tooltip":"Selecciona la capa de la posición 4","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir"}')},function(t){t.exports=JSON.parse('{"tooltip":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","layers":"Layehrs","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyr1Select_tooltip":"Select layer on the first position","lyr2Select_tooltip":"Select layer on the second position","lyr3Select_tooltip":"Select layer on the third position","lyr4Select_tooltip":"Select layer on the fourth position","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated"}')},function(t){t.exports=JSON.parse('{"exception":{"impl_length":"La implementación usada no puede crear controles MeasureLength.","impl_clear":"La implementación usada no puede crear controles MeasureClear.","impl_area":"La implementación usada no puede crear controles MeasureArea"},"text":{"tooltip":"Herramientas de medición","keep_drawing":"Click para continuar dibujando la línea","click_draw":"Click para empezar a dibujar","keep_drawing_area":"Click para continuar dibujando el área","measure_area":"Medir área","delete":"Borrar medidas","measure":"Medir distancias"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl_length":"The implementation used cannot create MeasureLength.","impl_clear":"The implementation used cannot create MeasureClear.","impl_area":"The implementation used cannot create MeasureArea"},"text":{"tooltip":"Measurement tools","keep_drawing":"Click to continue drawing the line","click_draw":"Click to start drawing","keep_drawing_area":"Click to continue drawing the area","measure_area":"Measure area","delete":"Remove measures","measure":"Measuring distances"}}')},function(t){t.exports=JSON.parse('{"tooltip":"Comparador de mapas espejo","title":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","backimglayersparams_undefined":"Los parámetros de BackImgLayers no están definidos correctamente."}')},function(t){t.exports=JSON.parse('{"tooltip":"Mirror Comparison","title":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","backimglayersparams_undefined":"BackImgLayers\' parameters are not defined correctly."}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles MouseSRSControl."},"tooltip":"Coordenadas","select_srs":"Selecciona un sistema de referencia","close":"Cerrar","accessibility":{"src":"Clic o Enter para modificar el EPSG"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create MouseSRSControl."},"tooltip":"Coordinates","select_srs":"Select a reference system","close":"Close","accessibility":{"src":"Click or Enter to modify the EPSG"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles OverviewMapControl."},"tooltip":"Mapa de situación"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create OverviewMapControl."},"tooltip":"Overview Map"}')},function(t){t.exports=JSON.parse('{"tooltip":"Más información","exception_popupcontrol":"La implementación usada no puede crear controles PopupControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"More information","exception_popupcontrol":"The implementation used cannot create PopupControl controls"}')},function(t){t.exports=JSON.parse('{"exception_predefinedzoomcontrol":"La implementación usada no puede crear controles PredefinedZoomControl","predefinedzoom_obsolete":"M.plugin.PredefinedZoom ha quedado obsoleto, utilice en su lugar M.plugin.ViewManagement"}')},function(t){t.exports=JSON.parse('{"exception_predefinedzoomcontrol":"The implementation used cannot create controls PredefinedZoomControl","predefinedzoom_obsolete":"M.plugin.PredefinedZoom has been deprecated, please use M.plugin.ViewManagement instead"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles PrinterMap.","encode":"La implementación usada no posee el método encodeLayer.","tile":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","error":"Se ha producido un error en la impresión.","imageError":"No ha podido realizarse la descarga en este momento. Por favor, inténtelo más tarde.","error_layers":"Las siguientes capas no se visualizarán al imprimir el mapa: "},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","tooltip":"Impresión del mapa","credits":"Impresión generada a través del api-core","no_title":"(Sin título)","zone":"huso","base":"Cartografía base","title":"Título","description":"Descripción","layout":"Plantilla","format":"Formato","projection":"Proyección","keep":"Conservar vista","geo":"Imagen Georreferenciada","print":"Imprimir","delete":"Borrar","download":"Descargar","minimize":"Minimizar el control de impresión","fototeca":"Este documento carece de validez legal"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create PrinterMap.","encode":"The implementation used cannot use encodeLayer.","tile":"The request for some tile has caused a printing error. <br/>Please try again.","error":"An error has occurred while printing.","imageError":"The download could not be completed at this time. Please try again later.","error_layers":"The following layers will not be displayed when printing the map: "},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","tooltip":"Map Printing","credits":"Print generated through api-core","no_title":"(Untitled)","zone":"zone","base":"Base Cartography","title":"Title","description":"Description","layout":"Layout","format":"Format","projection":"Projection","keep":"Keep view","geo":"Georeferenced Image","print":"Print","delete":"Remove","download":"Download","minimize":"Minimize print control","fototeca":"This document has no legal validity"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles QueryAttributesControl.","no_data":"No hay datos para exportar."},"tooltip":"Tabla de atributos","values":"Valores","attribute_table":"Tabla de atributos","clean_filters":"Limpiar filtros aplicados","export":"Exportar datos","not_attributes":"No se han encontrado atributos.","close":"Cerrar","filters":"Filtros","bbox":"Por vista","area":"Por área","csv":"CSV (sólo atributos)","download":"Descargar","loading":"Cargando datos...","search":"Buscar","filter_by_bbox":"Filtrar resultados por vista actual","filter_by_area":"Filtrar resultados dibujando geometría","show_hide":"Ocultar / Mostrar","information":"Información","search_all_fields":"Búsqueda en todos los campos"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create QueryAttributesControl.","no_data":"No data for export."},"tooltip":"Search by filters","values":"Values","attribute_table":"Table of attributes","clean_filters":"Clean applied filters","export":"Export data","not_attributes":"No attributes found.","close":"Close","filters":"Filters","bbox":"By view","area":"By area","csv":"CSV (only attributes)","download":"Download","loading":"Loading information...","search":"Search","filter_by_bbox":"Filter results by current view","filter_by_area":"Filter results by drawing geometry","show_hide":"Hide / Show","information":"Information","search_all_fields":"Search over all fields"}')},function(t){t.exports=JSON.parse('{"tooltip":"Cambiar escala","insertscale":"Introducir escala"}')},function(t){t.exports=JSON.parse('{"tooltip":"Change scale","insertscale":"Insert scale"}')},function(t){t.exports=JSON.parse('{"tooltip":"Búsqueda por geometría","exception_selectiondrawcontrol":"La implementación usada no puede crear controles SelectionDrawImplControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"Search by geometry","exception_selectiondrawcontrol":"The implementation used cannot create SelectionDrawImplControl controls"}')},function(t){t.exports=JSON.parse('{"exception":{"formatMRE":"No se ha especificado ningún valor para los parámetros bbox o zoom y centro.","parameterizationDeprecated":"Advertencia M.plugin.selectionzoom: la definición de parámetros establecidas en el plugin ha quedado obsoleta. Revise la nueva definición: https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/selectionzoom","formatBBoxAndZoom":"No se ha especificado ningún valor para los parámetros bbox o zoom."},"tooltip":"Vistas predefinidas"}')},function(t){t.exports=JSON.parse('{"exception":{"formatMRE":"No value specified for the bbox or zoom and center parameters.","parameterizationDeprecated":"Warning M.plugin.selectionzoom: The parameter definition set in the plugin has been deprecated. Review the new definition: https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/selectionzoom","formatBBoxAndZoom":"No value specified for the bbox or zoom parameters."},"tooltip":"Default views"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"title":"Compartir URL","text":"HTML embebido","copy":"Copiar","tooltip":"¡Copiado!","tooltipPanel":"Compartir"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"title":"Share URL","text":"Embedded HTML","copy":"Copy","tooltip":"Copied!","tooltipPanel":"Share"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles StyleManager.","geomNotSupported":"Geometría no soportada","attributeAdded":"El atributo ya se ha agregado.","repeatedVariable":"Nombre de variable repetido","variableName":"No existe ninguna variable con ese nombre.","incorrectName":"Nombre de variable incorrecto.","emptyString":"No está permitido introducir una cadena vacía.","emptyVariable":"Nombre de variable vacía.","moreColorsRanges":"No pueden existir más colores que rangos.","numberColors":"Número de colores incorrecto.","chooseStyle":"Debe elegir al menos un estilo","choStyle":"Elija estilo","layerNoFeaturesLoad":"La capa no tiene features o aún no se han cargado.","chooseLayer":"Tiene que elegir una capa","choLayer":"Elija capa","numberColorAllowed":"Ha llegado al número máximo de colores permitidos","information":"Información"},"selectLayer":"Seleccione una capa...","applyStyle":"Aplicar estilo","clearStyle":"Limpiar estilo","symbology":"Simbología","heatMap":"Mapa de calor","category":"Categoría","choropleths":"Coropleta","proportional":"Proporcional","statistic":"Estadísticos","attributeValue":"Valor de atributo","preview":"Previsualización","others":"Otros","type":"Tipo","options":"Opciones","pointOptions":"Opciones de punto","lineOptions":"Opciones de línea","polygonOptions":"Opciones de polígono","opacity":"Opacidad","radius":"Radio","width":"Ancho","pattern":"Patrón","size":"Tamaño","space":"Espacio","rotation":"Rotación","scale":"Escala","none":"Ninguno","text":"Texto","font":"Fuente","horizontalAlignment":"Alineación horizontal","verticalAlignment":"Alineación vertical","enableRotation":"Habilitar rotación con el mapa","fitGeometry":"Ajustar a geometría","minimumWidth":"Ancho Mínimo","smooth":"Suavizar","overflow":"Desbordar","hidden":"Oculto","visible":"Visible","ellipsis":"Puntos suspensivos","labelStroke":"Trazo de la etiqueta","label":"Trazo","anchorage":"Anclaje","form":"Forma","family":"Familia","iconSize":"Tamaño icono","gradient":"Gradiente","iconColor":"Color de icono","legend":"Leyenda","showLabel":"Mostrar etiqueta","fill":"Relleno","border":"Borde","bulk":"Grosor","attributes":"Atributos","attribute":"Atributo","minimumRadius":"Radio mínimo","maximumRadius":"Radio máximo","addColor":"Añadir color","blur":"Difuminado","ranks":"Rangos","rank":"Rango","numberRanks":"Número de rangos","since":"Desde","until":"Hasta","envelope":"Envoltura","quantity":"Cantidad","selectable":"Seleccionable","animated":"Animado","distance":"Distancia","points":"Puntos","fanDistance":"Distancia de abanico","textColor":"Color de texto","algorithm":"Algoritmo","arithmeticProgression":"Progresión aritmética","equalIntervals":"Intervalos iguales","geometricProgression":"Progresión geométrica","meanSigma":"Media sigma","naturalBreaks":"Rupturas naturales","quantile":"Cuantil","colorRamp":"Rampa de color","initial":"Inicial","final":"Final","cake":"Tarta","tDcake":"Tarta 3D","donut":"Donut","graphic":"Gráfico","classic":"Clásico","dark":"Oscuro","pale":"Pálido","neon":"Neón","pie":"Pastel","xAxis":"Eje X","yAxis":"Eje Y","addAttribute":"Añadir atributo","bevel":"Bisel","miter":"Inglete","rounded":"Redondeado","extreme":"Extremo","square":"Cuadrado","labelText":"Etiqueta","icon":"Icono","stroke":"Trazo","center":"Centro","justified":"Justificado","left":"Izquierda","right":"Derecha","alphabetical":"Alfabetico","down":"Abajo","hanging":"Colgando","ideographic":"Ideografico","up":"Arriba","patternOptions":"Opciones de patrón","adjust":"Ajustar","ranges":"Rangos","flowLine":"Línea de flujo","absolute":"Absoluto","arrow":"Flecha","arrowColor":"Color flecha","generateSerialized":"Generar estilo serializado","serializedStyle":"Estilo serializado","clipboard":"Copiado estilo serializado en el portapapeles","modifySVG":"Modificar SVG","infoURL":"Se encuentra disponible una galería de ficheros SVG en <a target=\'blank\' href=\'https://componentes.cnig.es/api-core/api/actions/resources/svg\'>https://componentes.cnig.es/api-core/api/actions/resources/svg</a>","tooltip":"Gestor de estilos"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create StyleManager controls.","geomNotSupported":"Geometry not supported","attributeAdded":"Attribute has already been added.","repeatedVariable":"Repeated variable name","variableName":"No variable with that name exists.","incorrectName":"Incorrect variable name.","emptyString":"It is not allowed to enter an empty string.","emptyVariable":"Empty variable name.","moreColorsRanges":"There cannot be more colors than ranges.","numberColors":"Incorrect number of colors.","chooseStyle":"You must choose at least one style","choStyle":"Choose style","layerNoFeaturesLoad":"The layer has no features or they have not been loaded yet.","chooseLayer":"You have to choose a layer","choLayer":"Choose layer","numberColorAllowed":"You have reached the maximum number of colors allowed","information":"Information"},"selectLayer":"Select a layer...","applyStyle":"Apply Style","clearStyle":"Clear Style","symbology":"Symbology","heatMap":"Heat Map","category":"Category","choropleths":"Choroplet","proportional":"Proportional","statistic":"Statistics","attributeValue":"Attribute Value","preview":"Preview","others":"Others","type":"Type","options":"Options","pointOptions":"Point Options","lineOptions":"Line Options","polygonOptions":"Polygon Options","opacity":"Opacity","radius":"Radius","width":"Width","pattern":"Pattern","size":"Size","space":"Space","rotation":"Rotation","scale":"Scale","none":"None","text":"Text","font":"Font","horizontalAlignment":"Horizontal Alignment","verticalAlignment":"Vertical Alignment","enableRotation":"Enable rotation with the map","fitGeometry":"Fit Geometry","minimumWidth":"Minimum Width","smooth":"Smooth","overflow":"Overflow","hidden":"Hidden","visible":"Visible","ellipsis":"Ellipsis","labelStroke":"Label Stroke","label":"Stroke","anchorage":"Anchorage","form":"Form","family":"Family","iconSize":"Icon size","gradient":"Gradient","iconColor":"Icon Color","legend":"Legend","showLabel":"Show Label","fill":"Fill","border":"Border","bulk":"Thickness","attributes":"Attributes","attribute":"Attribute","minimumRadius":"Minimum radius","maximumRadius":"Maximum Radius","addColor":"Add Color","blur":"Blur","ranks":"Ranks","rank":"Rank","numberRanks":"Number of ranks","since":"Since","until":"Until","envelope":"Envelope","quantity":"Quantity","selectable":"Selectable","animated":"Animated","distance":"Distance","points":"Points","fanDistance":"Fan Distance","textColor":"Text Color","algorithm":"Algorithm","arithmeticProgression":"Arithmetic Progression","equalIntervals":"Equal Intervals","geometricProgression":"Geometric Progression","meanSigma":"Mean Sigma","naturalBreaks":"Natural Breaks","quantile":"Quantile","colorRamp":"Color Ramp","initial":"Initial","final":"Final","cake":"Cake","tDcake":"3D Cake","donut":"Donut","graphic":"Graphic","classic":"Classic","dark":"Dark","pale":"Pale","neon":"Neon","pie":"Cake","xAxis":"X axis","yAxis":"Y axis","addAttribute":"Add Attribute","bevel":"Bezel","miter":"Miter","rounded":"Rounded","extreme":"Extreme","square":"Square","labelText":"Label","icon":"Icon","stroke":"Stroke","center":"Center","justified":"Justified","left":"Left","right":"Right","alphabetical":"Alphabetical","down":"Down","hanging":"Hanging","ideographic":"Ideographic","up":"Up","patternOptions":"Pattern options","adjust":"Adjust","ranges":"Ranges","flowLine":"Flowline","absolute":"Absolute","arrow":"Arrow","arrowColor":"Arrow color","generateSerialized":"Generate serialized style","serializedStyle":"Serialized style","clipboard":"Copied serialized style to clipboard","modifySVG":"Modify SVG","infoURL":"A gallery of SVG files is available at <a target=\'blank\' href=\'https://componentes.cnig.es/api-core/api/actions/resources/svg\'>https://componentes.cnig.es/api-core/api/actions/resources/svg</a>","tooltip":"Style manager"}')},function(t){t.exports=JSON.parse('{"tooltip":"Línea de tiempo","title":"Línea de tiempo","play":"Iniciar","pause":"Parar","excepcion":"La implementación usada no puede crear controles TimelineControl","intervals_error":"Los intervalos no fueron definidos correctamente","initValue":"Valor inicio","endValue":"Valor final"}')},function(t){t.exports=JSON.parse('{"tooltip":"Timeline","title":"Timeline","play":"Play","pause":"Pause","excepcion":"The implementation used cannot create timelineControl controls","intervals_error":"The intervals were not defined correctly","initValue":"Start value","endValue":"Final value"}')},function(t){t.exports=JSON.parse('{"tooltip":"Capas","capas":"Capas"}')},function(t){t.exports=JSON.parse('{"tooltip":"Layers","capas":"Layers"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Perfiltopografico."},"tooltip":"Perfil Topográfico","title":"Perfil Topográfico","profil":{"title":"Perfil Topográfico","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Perfiltopografico controls."},"tooltip":"Topography Profile","title":"Topography Profile","profil":{"title":"Topographic Profile","zmin":"Min Alt.","zmax":"Max Alt.","altitude":"Alt.","distance":"Full Distance","ytitle":"Altitude (m)","xtitle":"Distance (km)"}}')},function(t){t.exports=JSON.parse('{"tooltip":"Transparencia","layers":"Capas","radius":"Radio","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","excepcion":"La implementación usada no puede crear controles TransparencyControl"}')},function(t){t.exports=JSON.parse('{"tooltip":"Transparency","layers":"Layers","radius":"Radius","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","excepcion":"The implementation used cannot create TransparencyControl controls"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles VectorsControl.","unknown_geom":"Geometría no reconocida.","format_not_selected":"No se ha seleccionado formato de descarga.","size":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","load":"Error al cargar el fichero.","no_geoms":"No se han detectado geometrías en este fichero.","load_correct":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","extension":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX, GML y GeoJSON.","not_extent":"No se puede obtener la extensión de la capa.","no_features":"Esta capa todavía no tiene ninguna entidad. Añada entidades primero.","query_profile":"No se han podido consultar los datos de altitud para esta entidad.","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","error_features_wfs":"No se han podido cargar features de la capa. Inténtalo aumentando el nivel de zoom en la zona de interés.","error_no_features_wfs":"No se han podido cargar features de la capa. Inténtalo de nuevo en otra zona.","error_wfs":"No se ha podido cargar el servicio WFS","wfs_zoom":"Aumente el nivel de zoom * niveles si quiere añadir este servicio WFS","url_not_valid":"La URL introducida no es válida"},"help_template":{"help":"Ayuda","create_layers":"Crear capas de puntos (<span class=\'icon-points\'></span>), de líneas/rutas (<span class=\'icon-lines\'></span>) o polígonos (<span class=\'icon-polygon\'></span>)","create_layers_content":"<p>Al hacer clic sobre <span class=\'icon-points\'></span>, <span class=\'icon-lines\'></span> o <span class=\'icon-polygon\'></span> se añadirá una capa vacía con un nombre provisional. <b>Cada capa puede tener uno o varios elementos de dibujo y se pueden tener tantas capas como se desee.</b></p><p>Si quiere cambiar el nombre de la capa pulse sobre el nombre de la capa e introduzca el nombre que desea.</p><p>Con la opción <b>\\"Añadir Geometría\\"</b> (<span class=\'icon-add m-vector-layer-add\'></span>) seleccionada podemos añadir nuevos elementos de dibujo a nuestra capa. El procedimiento de dibujo tiene las siguientes características:</p><ul><li><b>Un clic dibuja un punto o vértice</b> de línea o de polígono.</li><li><b>Doble clic finaliza el dibujo</b> de línea o polígono.</li><li>Pulsando la tecla <b>ESCape se interrumpe y borra el dibujo</b> que estuviera ejecutándose en ese momento.</li><li>Mientras se está realizando un elemento de dibujo, al pulsar la combinación de teclas <b>Ctrl+Z se elimina el último punto dibujado</b> dentro de la geometría en curso. Deshace, elimina el último vértice que se está dibujando.</li><li>Para elementos lineales o superficiales, al mantener pulsada la tecla \\"Shift\\" o \\"Mayúscula\\" durante un proceso de dibujo, se realiza el <b>dibujo de forma continua o libre</b> y no vértice a vértice.</li></ul>","add_wfs":"Añadir capa WFS","add_wfs_content":"<p>Para <b>descargar Features</b> añada la URL del servicio WFS o seleccione uno de los que se encuentran <b>preconfigurados</b> y elija la capa que sea de su interés. Al igual que con el resto de elementos puede editar su color y grosor. <b>La consulta de estos servicios se encuentra limitada y sólo están activos para niveles de zoom superiores al nivel 12</b>.</p>","loaded_layer":"Cargar ruta o capa (<span class=\'icon-upload\'></span>)","loaded_layer_content":"<p>Haga clic en el botón <span class=\'icon-upload\'></span> y seleccione el fichero en su ordenador personal. También, puede desde su el explorador arrastrar el fichero a la zona de mapa y el fichero quedará cargado. Los formatos aceptados son: <b> KML, SHP(.zip), GPX, GML y GeoJSON.</b> Una vez añadida al panel, el comportamiento es igual al resto de capas y rutas vectoriales.</p>"},"tooltip":"Capas Vectoriales","change_name":"Cambiar nombre","close":"Cerrar","info":"Información","warning":"Advertencia","coordinates":"Coordenadas","length":"Longitud","area":"Área","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)","title_plugin":"Capas Vectoriales","vector_layers":"Capas vectoriales","profile":"Perfil Topográfico","add_point_layer":"Crear capas de puntos","add_line_layer":"Crear capas de líneas/rutas","add_poly_layer":"Crear capas de polígonos","add_wfs_layer":"Añadir capa WFS","load_layer":"Cargar ruta o capa","point_layer":"Capa puntual","line_layer":"Capa lineal","poly_layer":"Capa poligonal","show_hide":"Ver/Ocultar","add_geom":"Añadir geometría","edit_geom":"Editar geometría","edit_geom_line":"Editar/Perfil","layer_zoom":"Zoom a la capa","download_layer":"Descargar capa","delete_layer":"Eliminar capa","color":"Color","thickness":"Grosor","line":"Trazo","delete_geom":"Borrar geometría","query_profile":"Perfil topográfico","accepted":"Los formatos aceptados son KML, SHP (.zip), GPX, GML y GeoJSON.","select_file":"Selecciona el fichero","download":"Descargar","change":"Cambiar","expand":"Mostrar","collapse":"Ocultar","url_service":"URL del servicio","query":"Consultar","clean":"Limpiar búsqueda","select_service":"Selecciona una capa","select":"Seleccionar","loading":"Cargando","cancel":"Cancelar","reload_from_view":"Recargar desde la vista","loaded_services":"Servicios precargados","availables":"Servicios precargados disponibles","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","title":"Título","abstract":"Resumen","responsible":"Responsable","access_constraints":"Restricciones de acceso","symbology":"Simbología","symbology_profile":"Simbología/Perfil","generating_profile":"Generando perfil","calculate":"Calcular","calculating":"Calculando","try_again":"No se ha podido realizar la consulta. Por favor, inténtelo de nuevo más tarde","from_url":"Desde URL","url_layer":"URL del fichero","add_layer":"Añadir capa","add_from_url":"Añadir capa desde URL","add_points":"Añadir puntos"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create VectorsControl controls.","unknown_geom":"Unrecognized geometry.","format_not_selected":"No download format selected.","size":"The selected file exceeds the maximum 20 MB allowed.","load":"Error when loading the file.","no_geoms":"No geometries have been detected in this file.","load_correct":"Error when loading the file. Check that it is the right file.","extension":"A not allowed file extension has been inserted. The allowed ones are: KML, SHP(.zip), GPX, GML and GeoJSON.","not_extent":"Cannot get the layer extension.","no_features":"This layer does not yet have any entities. Add entities first.","query_profile":"The altitude data for this entity could not be queried.","capabilities":"An error has occurred in obtaining the GetCapabilities document","valid_url":"You must provide a valid URL","empty":"The fields are empty","error_features_wfs":"Unable to load layer features. Try increasing the zoom level in the area of interest.","error_no_features_wfs":"Unable to load layer features. Try again in another area.","error_wfs":"Could not load WFS service","wfs_zoom":"Increase the zoom in * levels if you want to add this WFS service","url_not_valid":"The entered URL is not valid"},"help_template":{"help":"Help","create_layers":"Create points (<span class=\'icon-points\'></span>), lines/routes (<span class=\'icon-lines\'></span>), or polygons (<span class=\'icon-polygon\'></span>) layers","create_layers_content":"<p>When clicking on <span class=\'icon-points\'></span>, <span class=\'icon-lines\'></span> or <span class=\'icon-polygon\'></span > an empty layer with a temporary name will be added. <b>Each layer can have one or several drawing elements and you can have as many layers as you want.</b></p><p>If you want to change the name of the layer, click on the name of the layer and enter the name you want.</p><p>With the option <b>\\"Add Geometry\\"</b> (<span class=\'icon-add m-vector-layer-add\'></span>) selected we can add new drawing elements to our layer. The drawing procedure has the following characteristics:</p><ul><li><b>One click draws a point or vertex</b> of line or polygon.</li><li><b>Double click ends drawing</b> of line or polygon.</li><li>Pressing the <b>ESCape key interrupts and deletes the drawing</b> that was running at that moment.</li><li >While an element is being drawn, pressing the <b>Ctrl+Z key combination deletes the last drawn point</b> within the current geometry. Undo, removes the last vertex being drawn.</li><li>For linear or surface elements, holding down the \\"Shift\\" or \\"Caps Lock\\" key during a drawing process performs the <b>drawing continuously or freely</b> and not vertex by vertex.</li></ul>","add_wfs":"Add WFS layer","add_wfs_content":"<p>To <b>download Features</b> add the URL of the WFS service or select one of the <b>preconfigured ones</b> and choose the layer that is of interest to you. As with the rest of the elements you can edit their color and thickness.<b> The consultation of these services is limited and they are only active for zoom levels higher than level 12</b>.</p>","loaded_layer":"Load route or layer (<span class=\'icon-upload\'></span>)","loaded_layer_content":"<p>Click the <span class=\'icon-upload\'></span> button and select the file on your personal computer. Also, you can from your browser drag the file to the map area and the file will be loaded. The accepted formats are: <b> KML, SHP(.zip), GPX, GML and GeoJSON.</b> Once added to the panel, the behavior is the same as the rest of the layers and vector routes.</p>"},"tooltip":"vector layers","change_name":"Change name","close":"Close","info":"Information","warning":"Warning","coordinates":"Coordinates","length":"Length","area":"Area","zmin":"Min. Height","zmax":"Max. Height","altitude":"Height","distance":"Total Dist.","ytitle":"Height (m)","xtitle":"Distance (km)","title_plugin":"Vector Layers","vector_layers":"Vector layers","profile":"Topographic Profile","add_point_layer":"Create points layers","add_line_layer":"Create lines layers/routes","add_poly_layer":"Create polygons layers","add_wfs_layer":"Add WFS layer","load_layer":"Load route or layer","point_layer":"Point layer","line_layer":"Linear layer","poly_layer":"Polygonal layer","show_hide":"Show/Hide","add_geom":"Add geometry","edit_geom":"Edit geometry","edit_geom_line":"Edit/Profile","layer_zoom":"Zoom to the layer","download_layer":"Download layer","delete_layer":"Remove layer","color":"Color","thickness":"Thickness","line":"Stroke","delete_geom":"Remove geometry","query_profile":"Topographic profile","accepted":"The accepted formats are KML, SHP (.zip), GPX, GML and GeoJSON.","select_file":"Select the file","download":"Download","change":"Change","expand":"Show","collapse":"Hide","url_service":"Service URL","query":"Consult","clean":"Clean search","select_service":"Select layer","select":"Select","loading":"Loading","cancel":"Cancel","reload_from_view":"Reload from the view","loaded_services":"Preloaded services","availables":"Preloaded services available","show_service_info":"Show service information","hide_service_info":"Hide service information","title":"Title","abstract":"Abstract","responsible":"Responsible","access_constraints":"Access constraints","symbology":"Symbology","symbology_profile":"Symbology/Profile","generating_profile":"Generating profile","calculate":"Calculate","calculating":"Calculating","try_again":"The query could not be executed. Please try again later","from_url":"From URL","url_layer":"File URL","add_layer":"Add layer","add_from_url":"Add layer from URL","add_points":"Add points"}')},function(t){t.exports=JSON.parse('{"nextView":"Vista siguiente","previousView":"Vista anterior","viewhistory_obsolete":"M.plugin.ViewHistory ha quedado obsoleto, utilice en su lugar M.plugin.ViewManagement"}')},function(t){t.exports=JSON.parse('{"nextView":"Next View","previousView":"Previous View","viewhistory_obsolete":"M.plugin.ViewHistory has been deprecated, please use M.plugin.ViewManagement instead"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles XYLocatorControl.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180."},"coordinateresult":"coordinateresult","tooltip":"Buscar por coordenadas","geographic":"Geograficas","zone":"huso","title":"Localizador por coordenadas","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","clean":"Limpiar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","dms":"GMS","dd":"GD"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create XYLocatorControl.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180."},"coordinateresult":"coordinateresult","tooltip":"Search by coordinates","geographic":"Geographic","zone":"zone","title":"Coordinate locator","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","clean":"Clean","north":"North","south":"South","east":"East","west":"West","dms":"DMS","dd":"DD"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles ZoomExtentControl.","zoomextent_obsolete":"M.plugin.ZoomExtent ha quedado obsoleto, utilice en su lugar M.plugin.ViewManagement"},"tooltip":"Zoom al recuadro"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create ZoomExtentControl.","zoomextent_obsolete":"M.plugin.ZoomExtent has been deprecated, please use M.plugin.ViewManagement instead"},"tooltip":"Zoom to box"}')},function(t){t.exports=JSON.parse('{"tooltip":"Herramientas de zoom","zoomin":"Aumentar zoom","zoomout":"Disminuir zoom","previouszoom":"Zoom anterior","nextzoom":"Zoom posterior","rectzoom":"Zoom ventana","zoom_extent":"Zoom a la extensión del mapa","zoompanel_obsolete":"M.plugin.ZoomPanel ha quedado obsoleto, utilice en su lugar M.plugin.ViewManagement"}')},function(t){t.exports=JSON.parse('{"tooltip":"Zoom tools","zoomin":"Zoom In","zoomout":"Zoom Out","previouszoom":"Previous history","nextzoom":"Next history","rectzoom":"Rectangular zoom","zoom_extent":"Zoom to the map extension","zoompanel_obsolete":"M.plugin.ZoomPanel has been deprecated, please use M.plugin.ViewManagement instead"}')},function(t){t.exports=JSON.parse('{"tooltip":"Calcular área de visibilidad","calculating":"Realizando geoproceso de análisis","warning":"Advertencia","outbox":"Las coordenadas no están dentro del ámbito de cálculo","error_query":"No se ha podido realizar la consulta","active_viewshed":"Hacer click en punto del mapa","clear":"Limpiar resultado"}')},function(t){t.exports=JSON.parse('{"tooltip":"Calculate visibility area","calculating":"Performing geoprocessing analysis","warning":"Warning","outbox":"he coordinates are not within the calculation range","error_query":"Unable to perform query","active_viewshed":"Click a point on the map","clear":"Clean result"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles ViewManagementControl.","impl_zoomextent":"La implementación usada no puede crear controles ZoomExtentControl.","impl_viewhistory":"La implementación usada no puede crear controles ViewHistoryControl.","impl_zoompanel":"La implementación usada no puede crear controles ZoomPanelControl.","impl_predefinedzoom":"La implementación usada no puede crear controles PredefinedZoomControl.","no_controls":"El plugin ViewManagement necesita activar al menos un control."},"tooltip":"Gestión de la vista","viewhistory":"Historia","nextView":"Vista siguiente","previousView":"Vista anterior","predefinedzoom":"Zoom predefinido","zoomextent":"Zoom al recuadro","zoompanel":"Herramientas de zoom","zoomin":"Aumentar zoom","zoomout":"Disminuir zoom"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create ViewManagementControl.","impl_zoomextent":"The implementation used cannot create ZoomExtentControl.","impl_viewhistory":"The implementation used cannot create ViewHistoryControl.","impl_zoompanel":"The implementation used cannot create ZoomPanelControl.","impl_predefinedzoom":"The implementation used cannot create PredefinedZoomControl.","no_controls":"The ViewManagement plugin needs to activate at least one control."},"tooltip":"View Management","viewhistory":"View history","nextView":"Next view","previousView":"Previous view","predefinedzoom":"Predefined zoom","zoomextent":"Zoom to box","zoompanel":"Zoom tools","zoomin":"Zoom In","zoomout":"Zoom Out"}')},function(t,e){t.exports='<div class="m-label-content">\n   {{{info}}}\n</div>'},function(t,e){t.exports='<div class="m-dialog {{severity}}">\n   <div class="m-modal">\n      <div class="m-content">\n         <div class="m-title">\n            <i class="m-icon"></i>\n            <span tabindex="{{order}}" role="heading">{{{title}}}</span>\n         </div>\n         <div tabindex="{{order}}" role="main" class="m-message">{{{message}}}</div>\n         <div class="m-button">\n            <button tabindex="{{order}}" type="button">OK</button>\n         </div>\n      </div>\n   </div>\n</div>'},function(t,e){t.exports='<div class="m-getfeatureinfo-content">\n   {{{info}}}\n</div>'},function(t,e){t.exports="  {{#each layers}}\n      <div class='m-getfeatureinfo-content-info'>\n          <div class='m-getfeatureinfo-content-info-header'>\n              <div class=\"m-arrow-right\"></div>\n              <div>\n                  <p> {{../info_of}} <strong>{{layerName}}</strong></p>\n              </div>\n          </div>\n          <div class='m-getfeatureinfo-content-info-body m-content-collapsed'>\n              {{{formatedInfo}}}\n          </div>\n      </div>\n  {{/each}}"},function(t,e){t.exports='<div class="m-control m-location-container" title="{{title}}">\n    <button id="m-location-button" class="g-cartografia-gps2"></button>\n</div>'},function(t,e){t.exports='<div \n    role="button" \n    tabindex="{{order}}" \n    class="m-control m-scale-container" \n    title="Control {{title}}"\n    >\n    <div role="text" class="m-level">{{level}} </div>\n    <div role="text" id="m-level-number"></div>\n    <span class="m-scale-separator"> | </span>\n    <div role="text" class="m-unit">{{scale}} = 1 : </div>\n    <div role="text" class="m-scale" id="m-scale-span"></div>\n</div>'},function(t,e){t.exports='<div class="m-control m-rotate-container">\n    <button id="m-rotate-button" class="g-cartografia-brujula-norte" title="{{title}}"></button>\n</div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div id="div-contenedor" class="m-control m-container m-background">\n    {{#each layers}}\n        <button class="m-background-group-btn" id="m-baselayerselector-{{this.id}}" title="Selección de capa de fondo">{{{this.title}}}</button>\n    {{/each}}\n    <button class="m-background-unique-btn" id="m-baselayerselector-unique-btn" title="Selección de capa de fondo"></button>\n</div>'},function(t,e){t.exports='<div class="m-kml-content">\n   <p class="m-kml-name">{{{name}}}</p>\n   <div class="m-kml-desc">{{{desc}}}</div>\n</div>'},function(t,e,r){"use strict";t.exports=i;var n=r(58);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function l(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&o?function(t,e,r){return o.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){var n="",i=e;for(;i<r;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>r)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=a(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&u(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&u(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e){t.exports='<div class="m-panel">\n   <button class="m-panel-btn"></button>\n   <div class="m-panel-controls"></div>\n</div>'},function(t,e,r){(function(t,e,n,i){var o=void 0,a=function(a){return o||(o=new Promise((function(o,s){var u,l=void 0!==a?a:{},c=l.onAbort;l.onAbort=function(t){s(new Error(t)),c&&c(t)},l.postRun=l.postRun||[],l.postRun.push((function(){o(l)})),t=void 0,u||(u=void 0!==l?l:{}),u.onRuntimeInitialized=function(){function t(t,e){switch(typeof e){case"boolean":X(t,e?1:0);break;case"number":Y(t,e);break;case"string":W(t,e,-1,-1);break;case"object":if(null===e)Z(t);else if(null!=e.length){var r=Pe(e);H(t,r,e.length,-1),Ae(r)}else K(t,"Wrong API use : tried to return a value of an unknown type ("+e+").",-1);break;default:Z(t)}}function e(t,e){for(var r=[],n=0;n<t;n+=1){var i=it(e+4*n,"i32"),o=F(i);if(1===o||2===o)i=V(i);else if(3===o)i=U(i);else if(4===o){i=z(o=i),o=q(o);for(var a=new Uint8Array(i),s=0;s<i;s+=1)a[s]=T[o+s];i=a}else i=null;r.push(i)}return r}function r(t,e){this.La=t,this.db=e,this.Ja=1,this.fb=[]}function n(t,e){if(this.db=e,e=G(t)+1,this.Ya=Ce(e),null===this.Ya)throw Error("Unable to allocate memory for the SQL string");B(t,I,this.Ya,e),this.eb=this.Ya,this.Ua=this.ib=null}function i(t){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=t){var e=this.filename,r="/",n=e;if(r&&(r="string"==typeof r?r:Rt(r),n=e?st(r+"/"+e):r),e=le(!0,!0),n=Yt(n,4095&(void 0!==e?e:438)|32768,0),t){if("string"==typeof t){r=Array(t.length);for(var i=0,a=t.length;i<a;++i)r[i]=t.charCodeAt(i);t=r}te(n,146|e),r=re(n,577),ae(r,t,0,t.length,0),ne(r),te(n,e)}}this.handleError(s(this.filename,o)),this.db=it(o,"i32"),Q(this.db),this.Za={},this.Na={}}var o=De(4),a=u.cwrap,s=a("sqlite3_open","number",["string","number"]),l=a("sqlite3_close_v2","number",["number"]),c=a("sqlite3_exec","number",["number","string","number","number","number"]),h=a("sqlite3_changes","number",["number"]),f=a("sqlite3_prepare_v2","number",["number","string","number","number","number"]),p=a("sqlite3_sql","string",["number"]),d=a("sqlite3_normalized_sql","string",["number"]),m=a("sqlite3_prepare_v2","number",["number","number","number","number","number"]),y=a("sqlite3_bind_text","number",["number","number","number","number","number"]),g=a("sqlite3_bind_blob","number",["number","number","number","number","number"]),v=a("sqlite3_bind_double","number",["number","number","number"]),_=a("sqlite3_bind_int","number",["number","number","number"]),b=a("sqlite3_bind_parameter_index","number",["number","string"]),w=a("sqlite3_step","number",["number"]),M=a("sqlite3_errmsg","string",["number"]),S=a("sqlite3_column_count","number",["number"]),x=a("sqlite3_data_count","number",["number"]),E=a("sqlite3_column_double","number",["number","number"]),O=a("sqlite3_column_text","string",["number","number"]),P=a("sqlite3_column_blob","number",["number","number"]),L=a("sqlite3_column_bytes","number",["number","number"]),R=a("sqlite3_column_type","number",["number","number"]),C=a("sqlite3_column_name","string",["number","number"]),A=a("sqlite3_reset","number",["number"]),k=a("sqlite3_clear_bindings","number",["number"]),N=a("sqlite3_finalize","number",["number"]),j=a("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),F=a("sqlite3_value_type","number",["number"]),z=a("sqlite3_value_bytes","number",["number"]),U=a("sqlite3_value_text","string",["number"]),q=a("sqlite3_value_blob","number",["number"]),V=a("sqlite3_value_double","number",["number"]),Y=a("sqlite3_result_double","",["number","number"]),Z=a("sqlite3_result_null","",["number"]),W=a("sqlite3_result_text","",["number","string","number","number"]),H=a("sqlite3_result_blob","",["number","number","number","number"]),X=a("sqlite3_result_int","",["number","number"]),K=a("sqlite3_result_error","",["number","string","number"]),J=a("sqlite3_aggregate_context","number",["number","number"]),Q=a("RegisterExtensionFunctions","number",["number"]);r.prototype.bind=function(t){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(t)?this.xb(t):null==t||"object"!=typeof t||this.yb(t)},r.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var t=w(this.La);switch(t){case 100:return!0;case 101:return!1;default:throw this.db.handleError(t)}},r.prototype.sb=function(t){return null==t&&(t=this.Ja,this.Ja+=1),E(this.La,t)},r.prototype.Cb=function(t){if(null==t&&(t=this.Ja,this.Ja+=1),t=O(this.La,t),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(t)},r.prototype.Db=function(t){return null==t&&(t=this.Ja,this.Ja+=1),O(this.La,t)},r.prototype.getBlob=function(t){null==t&&(t=this.Ja,this.Ja+=1);var e=L(this.La,t);t=P(this.La,t);for(var r=new Uint8Array(e),n=0;n<e;n+=1)r[n]=T[t+n];return r},r.prototype.get=function(t,e){e=e||{},null!=t&&this.bind(t)&&this.step(),t=[];for(var r=x(this.La),n=0;n<r;n+=1)switch(R(this.La,n)){case 1:var i=e.useBigInt?this.Cb(n):this.sb(n);t.push(i);break;case 2:t.push(this.sb(n));break;case 3:t.push(this.Db(n));break;case 4:t.push(this.getBlob(n));break;default:t.push(null)}return t},r.prototype.getColumnNames=function(){for(var t=[],e=S(this.La),r=0;r<e;r+=1)t.push(C(this.La,r));return t},r.prototype.getAsObject=function(t,e){t=this.get(t,e),e=this.getColumnNames();for(var r={},n=0;n<e.length;n+=1)r[e[n]]=t[n];return r},r.prototype.getSQL=function(){return p(this.La)},r.prototype.getNormalizedSQL=function(){return d(this.La)},r.prototype.run=function(t){return null!=t&&this.bind(t),this.step(),this.reset()},r.prototype.nb=function(t,e){null==e&&(e=this.Ja,this.Ja+=1);var r=Pe(t=ht(t));this.fb.push(r),this.db.handleError(y(this.La,e,r,t.length-1,0))},r.prototype.wb=function(t,e){null==e&&(e=this.Ja,this.Ja+=1);var r=Pe(t);this.fb.push(r),this.db.handleError(g(this.La,e,r,t.length,0))},r.prototype.mb=function(t,e){null==e&&(e=this.Ja,this.Ja+=1),this.db.handleError((t===(0|t)?_:v)(this.La,e,t))},r.prototype.zb=function(t){null==t&&(t=this.Ja,this.Ja+=1),g(this.La,t,0,0,0)},r.prototype.ob=function(t,e){switch(null==e&&(e=this.Ja,this.Ja+=1),typeof t){case"string":return void this.nb(t,e);case"number":return void this.mb(t,e);case"bigint":return void this.nb(t.toString(),e);case"boolean":return void this.mb(t+0,e);case"object":if(null===t)return void this.zb(e);if(null!=t.length)return void this.wb(t,e)}throw"Wrong API use : tried to bind a value of an unknown type ("+t+")."},r.prototype.yb=function(t){var e=this;return Object.keys(t).forEach((function(r){var n=b(e.La,r);0!==n&&e.ob(t[r],n)})),!0},r.prototype.xb=function(t){for(var e=0;e<t.length;e+=1)this.ob(t[e],e+1);return!0},r.prototype.reset=function(){return this.freemem(),0===k(this.La)&&0===A(this.La)},r.prototype.freemem=function(){for(var t;void 0!==(t=this.fb.pop());)Ae(t)},r.prototype.free=function(){this.freemem();var t=0===N(this.La);return delete this.db.Za[this.La],this.La=0,t},n.prototype.next=function(){if(null===this.Ya)return{done:!0};if(null!==this.Ua&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var t=je(),e=De(4);ot(o),ot(e);try{this.db.handleError(m(this.db.db,this.eb,-1,o,e)),this.eb=it(e,"i32");var n=it(o,"i32");return 0===n?(this.gb(),{done:!0}):(this.Ua=new r(n,this.db),this.db.Za[n]=this.Ua,{value:this.Ua,done:!1})}catch(t){throw this.ib=D(this.eb),this.gb(),t}finally{Fe(t)}},n.prototype.gb=function(){Ae(this.Ya),this.Ya=null},n.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:D(this.eb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(t,e){if(!this.db)throw"Database closed";if(e){t=this.prepare(t,e);try{t.step()}finally{t.free()}}else this.handleError(c(this.db,t,0,0,o));return this},i.prototype.exec=function(t,e,n){if(!this.db)throw"Database closed";var i=je(),a=null;try{var s=G(t)+1,u=De(s);B(t,T,u,s);var l=u,c=De(4);for(t=[];0!==it(l,"i8");){ot(o),ot(c),this.handleError(m(this.db,l,-1,o,c));var h=it(o,"i32");if(l=it(c,"i32"),0!==h){for(s=null,a=new r(h,this),null!=e&&a.bind(e);a.step();)null===s&&(s={columns:a.getColumnNames(),values:[]},t.push(s)),s.values.push(a.get(null,n));a.free()}}return t}catch(t){throw a&&a.free(),t}finally{Fe(i)}},i.prototype.each=function(t,e,r,n,i){"function"==typeof e&&(n=r,r=e,e=void 0),t=this.prepare(t,e);try{for(;t.step();)r(t.getAsObject(null,i))}finally{t.free()}if("function"==typeof n)return n()},i.prototype.prepare=function(t,e){if(ot(o),this.handleError(f(this.db,t,-1,o,0)),0===(t=it(o,"i32")))throw"Nothing to prepare";var n=new r(t,this);return null!=e&&n.bind(e),this.Za[t]=n},i.prototype.iterateStatements=function(t){return new n(t,this)},i.prototype.export=function(){Object.values(this.Za).forEach((function(t){t.free()})),Object.values(this.Na).forEach(Oe),this.Na={},this.handleError(l(this.db));var t=se(this.filename);return this.handleError(s(this.filename,o)),this.db=it(o,"i32"),t},i.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach((function(t){t.free()})),Object.values(this.Na).forEach(Oe),this.Na={},this.handleError(l(this.db)),Kt("/"+this.filename),this.db=null)},i.prototype.handleError=function(t){if(0===t)return null;throw t=M(this.db),Error(t)},i.prototype.getRowsModified=function(){return h(this.db)},i.prototype.create_function=function(r,n){Object.prototype.hasOwnProperty.call(this.Na,r)&&(Oe(this.Na[r]),delete this.Na[r]);var i=Ee((function(r,i,o){i=e(i,o);try{var a=n.apply(null,i)}catch(t){return void K(r,t,-1)}t(r,a)}),"viii");return this.Na[r]=i,this.handleError(j(this.db,r,n.length,1,0,i,0,0,0)),this},i.prototype.create_aggregate=function(r,n){var i=n.init||function(){return null},o=n.finalize||function(t){return t},a=n.step;if(!a)throw"An aggregate function must have a step function in "+r;var s={};Object.hasOwnProperty.call(this.Na,r)&&(Oe(this.Na[r]),delete this.Na[r]),n=r+"__finalize",Object.hasOwnProperty.call(this.Na,n)&&(Oe(this.Na[n]),delete this.Na[n]);var u=Ee((function(t,r,n){var o=J(t,1);Object.hasOwnProperty.call(s,o)||(s[o]=i()),r=e(r,n),r=[s[o]].concat(r);try{s[o]=a.apply(null,r)}catch(e){delete s[o],K(t,e,-1)}}),"viii"),l=Ee((function(e){var r=J(e,1);try{var n=o(s[r])}catch(t){return delete s[r],void K(e,t,-1)}t(e,n),delete s[r]}),"vi");return this.Na[r]=u,this.Na[n]=l,this.handleError(j(this.db,r,a.length-1,1,0,0,u,l,0)),this},u.Database=i};var h,f,p,d,m,y,g=Object.assign({},u),v="./this.program",_="object"==typeof window,b="function"==typeof importScripts,w="object"==typeof e&&"object"==typeof e.versions&&"string"==typeof e.versions.node,M="";w?(M=b?r(60).dirname(M)+"/":n+"/",y=()=>{m||(d=r(234),m=r(60))},h=function(t,e){return y(),t=m.normalize(t),d.readFileSync(t,e?void 0:"utf8")},p=t=>((t=h(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,r)=>{y(),t=m.normalize(t),d.readFile(t,(function(t,n){t?r(t):e(n.buffer)}))},1<e.argv.length&&(v=e.argv[1].replace(/\\/g,"/")),e.argv.slice(2),t.exports=u,u.inspect=function(){return"[Emscripten Module object]"}):(_||b)&&(b?M=self.location.href:"undefined"!=typeof document&&document.currentScript&&(M=document.currentScript.src),M=0!==M.indexOf("blob:")?M.substr(0,M.replace(/[?#].*/,"").lastIndexOf("/")+1):"",h=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},b&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?e(n.response):r()},n.onerror=r,n.send(null)});var S,x=u.print||console.log.bind(console),E=u.printErr||console.warn.bind(console);Object.assign(u,g),g=null,u.thisProgram&&(v=u.thisProgram),u.wasmBinary&&(S=u.wasmBinary);u.noExitRuntime;"object"!=typeof WebAssembly&&$("no native wasm support detected");var O,P,T,I,L,R,C,A,k,N=!1,j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function F(t,e,r){var n=e+r;for(r=e;t[r]&&!(r>=n);)++r;if(16<r-e&&t.buffer&&j)return j.decode(t.subarray(e,r));for(n="";e<r;){var i=t[e++];if(128&i){var o=63&t[e++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var a=63&t[e++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&t[e++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else n+=String.fromCharCode(i)}return n}function D(t,e){return t?F(I,t,e):""}function B(t,e,r,n){if(!(0<n))return 0;var i=r;n=r+n-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&57343>=a)a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o);if(127>=a){if(r>=n)break;e[r++]=a}else{if(2047>=a){if(r+1>=n)break;e[r++]=192|a>>6}else{if(65535>=a){if(r+2>=n)break;e[r++]=224|a>>12}else{if(r+3>=n)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63}e[r++]=128|a>>6&63}e[r++]=128|63&a}}return e[r]=0,r-i}function G(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);127>=n?e++:2047>=n?e+=2:55296<=n&&57343>=n?(e+=4,++r):e+=3}return e}function z(){var t=O.buffer;P=t,u.HEAP8=T=new Int8Array(t),u.HEAP16=L=new Int16Array(t),u.HEAP32=R=new Int32Array(t),u.HEAPU8=I=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=C=new Uint32Array(t),u.HEAPF32=A=new Float32Array(t),u.HEAPF64=k=new Float64Array(t)}var U,q=[],V=[],Y=[];function Z(){var t=u.preRun.shift();q.unshift(t)}var W,H,X,K=0,J=null,Q=null;function $(t){throw u.onAbort&&u.onAbort(t),E(t="Aborted("+t+")"),N=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}function tt(){return W.startsWith("data:application/octet-stream;base64,")}if(W="sql-wasm.wasm",!tt()){var et=W;W=u.locateFile?u.locateFile(et,M):M+et}function rt(){var t=W;try{if(t==W&&S)return new Uint8Array(S);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){$(t)}}function nt(t){for(;0<t.length;)t.shift()(u)}function it(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return T[t>>0];case"i16":return L[t>>1];case"i32":case"i64":return R[t>>2];case"float":return A[t>>2];case"double":return k[t>>3];case"*":return C[t>>2];default:$("invalid type for getValue: "+e)}return null}function ot(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":T[t>>0]=0;break;case"i16":L[t>>1]=0;break;case"i32":R[t>>2]=0;break;case"i64":X=[0,(H=0,1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[t>>2]=X[0],R[t+4>>2]=X[1];break;case"float":A[t>>2]=0;break;case"double":k[t>>3]=0;break;case"*":C[t>>2]=0;break;default:$("invalid type for setValue: "+e)}}var at=(t,e)=>{for(var r=0,n=t.length-1;0<=n;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t},st=t=>{var e="/"===t.charAt(0),r="/"===t.substr(-1);return(t=at(t.split("/").filter(t=>!!t),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},ut=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."},lt=t=>{if("/"===t)return"/";var e=(t=(t=st(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)};function ct(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){if("string"!=typeof(e=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=at(t.split("/").filter(t=>!!t),!e).join("/"))||"."}function ht(t,e){var r=Array(G(t)+1);return t=B(t,r,0,r.length),e&&(r.length=t),r}var ft=[];function pt(t,e){ft[t]={input:[],output:[],Xa:e},qt(t,vt)}var dt,mt,yt,gt,vt={open:function(t){var e=ft[t.node.rdev];if(!e)throw new Tt(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.Xa.fsync(t.tty)},fsync:function(t){t.tty.Xa.fsync(t.tty)},read:function(t,e,r,n){if(!t.tty||!t.tty.Xa.tb)throw new Tt(60);for(var i=0,o=0;o<n;o++){try{var a=t.tty.Xa.tb(t.tty)}catch(t){throw new Tt(29)}if(void 0===a&&0===i)throw new Tt(6);if(null==a)break;i++,e[r+o]=a}return i&&(t.node.timestamp=Date.now()),i},write:function(t,e,r,n){if(!t.tty||!t.tty.Xa.jb)throw new Tt(60);try{for(var i=0;i<n;i++)t.tty.Xa.jb(t.tty,e[r+i])}catch(t){throw new Tt(29)}return n&&(t.node.timestamp=Date.now()),i}},_t={tb:function(t){if(!t.input.length){var r=null;if(w){var n=i.alloc(256),o=0;try{o=d.readSync(e.stdin.fd,n,0,256,-1)}catch(t){if(!t.toString().includes("EOF"))throw t;o=0}r=0<o?n.slice(0,o).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(r=window.prompt("Input: "))&&(r+="\n"):"function"==typeof readline&&(null!==(r=readline())&&(r+="\n"));if(!r)return null;t.input=ht(r,!0)}return t.input.shift()},jb:function(t,e){null===e||10===e?(x(F(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync:function(t){t.output&&0<t.output.length&&(x(F(t.output,0)),t.output=[])}},bt={jb:function(t,e){null===e||10===e?(E(F(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync:function(t){t.output&&0<t.output.length&&(E(F(t.output,0)),t.output=[])}},wt={Qa:null,Ra:function(){return wt.createNode(null,"/",16895,0)},createNode:function(t,e,r,n){if(24576==(61440&r)||4096==(61440&r))throw new Tt(63);return wt.Qa||(wt.Qa={dir:{node:{Pa:wt.Ga.Pa,Oa:wt.Ga.Oa,lookup:wt.Ga.lookup,ab:wt.Ga.ab,rename:wt.Ga.rename,unlink:wt.Ga.unlink,rmdir:wt.Ga.rmdir,readdir:wt.Ga.readdir,symlink:wt.Ga.symlink},stream:{Ta:wt.Ha.Ta}},file:{node:{Pa:wt.Ga.Pa,Oa:wt.Ga.Oa},stream:{Ta:wt.Ha.Ta,read:wt.Ha.read,write:wt.Ha.write,lb:wt.Ha.lb,bb:wt.Ha.bb,cb:wt.Ha.cb}},link:{node:{Pa:wt.Ga.Pa,Oa:wt.Ga.Oa,readlink:wt.Ga.readlink},stream:{}},pb:{node:{Pa:wt.Ga.Pa,Oa:wt.Ga.Oa},stream:Ut}}),16384==(61440&(r=Nt(t,e,r,n)).mode)?(r.Ga=wt.Qa.dir.node,r.Ha=wt.Qa.dir.stream,r.Ia={}):32768==(61440&r.mode)?(r.Ga=wt.Qa.file.node,r.Ha=wt.Qa.file.stream,r.Ma=0,r.Ia=null):40960==(61440&r.mode)?(r.Ga=wt.Qa.link.node,r.Ha=wt.Qa.link.stream):8192==(61440&r.mode)&&(r.Ga=wt.Qa.pb.node,r.Ha=wt.Qa.pb.stream),r.timestamp=Date.now(),t&&(t.Ia[e]=r,t.timestamp=r.timestamp),r},Jb:function(t){return t.Ia?t.Ia.subarray?t.Ia.subarray(0,t.Ma):new Uint8Array(t.Ia):new Uint8Array(0)},qb:function(t,e){var r=t.Ia?t.Ia.length:0;r>=e||(e=Math.max(e,r*(1048576>r?2:1.125)>>>0),0!=r&&(e=Math.max(e,256)),r=t.Ia,t.Ia=new Uint8Array(e),0<t.Ma&&t.Ia.set(r.subarray(0,t.Ma),0))},Gb:function(t,e){if(t.Ma!=e)if(0==e)t.Ia=null,t.Ma=0;else{var r=t.Ia;t.Ia=new Uint8Array(e),r&&t.Ia.set(r.subarray(0,Math.min(e,t.Ma))),t.Ma=e}},Ga:{Pa:function(t){var e={};return e.dev=8192==(61440&t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,16384==(61440&t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.Ma:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.Ab=4096,e.blocks=Math.ceil(e.size/e.Ab),e},Oa:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&wt.Gb(t,e.size)},lookup:function(){throw It[44]},ab:function(t,e,r,n){return wt.createNode(t,e,r,n)},rename:function(t,e,r){if(16384==(61440&t.mode)){try{var n=kt(e,r)}catch(t){}if(n)for(var i in n.Ia)throw new Tt(55)}delete t.parent.Ia[t.name],t.parent.timestamp=Date.now(),t.name=r,e.Ia[r]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.Ia[e],t.timestamp=Date.now()},rmdir:function(t,e){var r,n=kt(t,e);for(r in n.Ia)throw new Tt(55);delete t.Ia[e],t.timestamp=Date.now()},readdir:function(t){var e,r=[".",".."];for(e in t.Ia)t.Ia.hasOwnProperty(e)&&r.push(e);return r},symlink:function(t,e,r){return(t=wt.createNode(t,e,41471,0)).link=r,t},readlink:function(t){if(40960!=(61440&t.mode))throw new Tt(28);return t.link}},Ha:{read:function(t,e,r,n,i){var o=t.node.Ia;if(i>=t.node.Ma)return 0;if(8<(t=Math.min(t.node.Ma-i,n))&&o.subarray)e.set(o.subarray(i,i+t),r);else for(n=0;n<t;n++)e[r+n]=o[i+n];return t},write:function(t,e,r,n,i,o){if(e.buffer===T.buffer&&(o=!1),!n)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.Ia||t.Ia.subarray)){if(o)return t.Ia=e.subarray(r,r+n),t.Ma=n;if(0===t.Ma&&0===i)return t.Ia=e.slice(r,r+n),t.Ma=n;if(i+n<=t.Ma)return t.Ia.set(e.subarray(r,r+n),i),n}if(wt.qb(t,i+n),t.Ia.subarray&&e.subarray)t.Ia.set(e.subarray(r,r+n),i);else for(o=0;o<n;o++)t.Ia[i+o]=e[r+o];return t.Ma=Math.max(t.Ma,i+n),n},Ta:function(t,e,r){if(1===r?e+=t.position:2===r&&32768==(61440&t.node.mode)&&(e+=t.node.Ma),0>e)throw new Tt(28);return e},lb:function(t,e,r){wt.qb(t.node,e+r),t.node.Ma=Math.max(t.node.Ma,e+r)},bb:function(t,e,r,n,i){if(32768!=(61440&t.node.mode))throw new Tt(43);if(t=t.node.Ia,2&i||t.buffer!==P){if((0<r||r+e<t.length)&&(t=t.subarray?t.subarray(r,r+e):Array.prototype.slice.call(t,r,r+e)),r=!0,e=65536*Math.ceil(e/65536),(i=Ne(65536,e))?(I.fill(0,i,i+e),e=i):e=0,!e)throw new Tt(48);T.set(t,e)}else r=!1,e=t.byteOffset;return{Fb:e,vb:r}},cb:function(t,e,r,n,i){if(32768!=(61440&t.node.mode))throw new Tt(43);return 2&i||wt.Ha.write(t,e,0,n,r,!1),0}}},Mt=null,St={},xt=[],Et=1,Ot=null,Pt=!0,Tt=null,It={},Lt=(t,e={})=>{if(!(t=ct("/",t)))return{path:"",node:null};if(8<(e=Object.assign({rb:!0,kb:0},e)).kb)throw new Tt(32);t=at(t.split("/").filter(t=>!!t),!1);for(var r=Mt,n="/",i=0;i<t.length;i++){var o=i===t.length-1;if(o&&e.parent)break;if(r=kt(r,t[i]),n=st(n+"/"+t[i]),r.Va&&(!o||o&&e.rb)&&(r=r.Va.root),!o||e.Sa)for(o=0;40960==(61440&r.mode);)if(r=Jt(n),n=ct(ut(n),r),r=Lt(n,{kb:e.kb+1}).node,40<o++)throw new Tt(32)}return{path:n,node:r}},Rt=t=>{for(var e;;){if(t===t.parent)return t=t.Ra.ub,e?"/"!==t[t.length-1]?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}},Ct=(t,e)=>{for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%Ot.length},At=t=>{var e=Ct(t.parent.id,t.name);if(Ot[e]===t)Ot[e]=t.Wa;else for(e=Ot[e];e;){if(e.Wa===t){e.Wa=t.Wa;break}e=e.Wa}},kt=(t,e)=>{var r;if(r=(r=Dt(t,"x"))?r:t.Ga.lookup?0:2)throw new Tt(r,t);for(r=Ot[Ct(t.id,e)];r;r=r.Wa){var n=r.name;if(r.parent.id===t.id&&n===e)return r}return t.Ga.lookup(t,e)},Nt=(t,e,r,n)=>(t=new Ie(t,e,r,n),e=Ct(t.parent.id,t.name),t.Wa=Ot[e],Ot[e]=t),jt={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Ft=t=>{var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},Dt=(t,e)=>Pt?0:!e.includes("r")||292&t.mode?e.includes("w")&&!(146&t.mode)||e.includes("x")&&!(73&t.mode)?2:0:2,Bt=(t,e)=>{try{return kt(t,e),20}catch(t){}return Dt(t,"wx")},Gt=(t,e,r)=>{try{var n=kt(t,e)}catch(t){return t.Ka}if(t=Dt(t,"wx"))return t;if(r){if(16384!=(61440&n.mode))return 54;if(n===n.parent||"/"===Rt(n))return 10}else if(16384==(61440&n.mode))return 31;return 0},zt=(t,e)=>(yt||((yt=function(){this.$a={}}).prototype={},Object.defineProperties(yt.prototype,{object:{get:function(){return this.node},set:function(t){this.node=t}},flags:{get:function(){return this.$a.flags},set:function(t){this.$a.flags=t}},position:{get:function(){return this.$a.position},set:function(t){this.$a.position=t}}})),t=Object.assign(new yt,t),e=((t=0)=>{for(;4096>=t;t++)if(!xt[t])return t;throw new Tt(33)})(e),t.fd=e,xt[e]=t),Ut={open:t=>{t.Ha=St[t.node.rdev].Ha,t.Ha.open&&t.Ha.open(t)},Ta:()=>{throw new Tt(70)}},qt=(t,e)=>{St[t]={Ha:e}},Vt=(t,e)=>{var r="/"===e,n=!e;if(r&&Mt)throw new Tt(10);if(!r&&!n){var i=Lt(e,{rb:!1});if(e=i.path,(i=i.node).Va)throw new Tt(10);if(16384!=(61440&i.mode))throw new Tt(54)}e={type:t,Kb:{},ub:e,Eb:[]},(t=t.Ra(e)).Ra=e,e.root=t,r?Mt=t:i&&(i.Va=e,i.Ra&&i.Ra.Eb.push(e))},Yt=(t,e,r)=>{var n=Lt(t,{parent:!0}).node;if(!(t=lt(t))||"."===t||".."===t)throw new Tt(28);var i=Bt(n,t);if(i)throw new Tt(i);if(!n.Ga.ab)throw new Tt(63);return n.Ga.ab(n,t,e,r)},Zt=(t,e)=>Yt(t,1023&(void 0!==e?e:511)|16384,0),Wt=(t,e,r)=>{void 0===r&&(r=e,e=438),Yt(t,8192|e,r)},Ht=(t,e)=>{if(!ct(t))throw new Tt(44);var r=Lt(e,{parent:!0}).node;if(!r)throw new Tt(44);e=lt(e);var n=Bt(r,e);if(n)throw new Tt(n);if(!r.Ga.symlink)throw new Tt(63);r.Ga.symlink(r,e,t)},Xt=t=>{var e=Lt(t,{parent:!0}).node;t=lt(t);var r=kt(e,t),n=Gt(e,t,!0);if(n)throw new Tt(n);if(!e.Ga.rmdir)throw new Tt(63);if(r.Va)throw new Tt(10);e.Ga.rmdir(e,t),At(r)},Kt=t=>{var e=Lt(t,{parent:!0}).node;if(!e)throw new Tt(44);t=lt(t);var r=kt(e,t),n=Gt(e,t,!1);if(n)throw new Tt(n);if(!e.Ga.unlink)throw new Tt(63);if(r.Va)throw new Tt(10);e.Ga.unlink(e,t),At(r)},Jt=t=>{if(!(t=Lt(t).node))throw new Tt(44);if(!t.Ga.readlink)throw new Tt(28);return ct(Rt(t.parent),t.Ga.readlink(t))},Qt=(t,e)=>{if(!(t=Lt(t,{Sa:!e}).node))throw new Tt(44);if(!t.Ga.Pa)throw new Tt(63);return t.Ga.Pa(t)},$t=t=>Qt(t,!0),te=(t,e)=>{if(!(t="string"==typeof t?Lt(t,{Sa:!0}).node:t).Ga.Oa)throw new Tt(63);t.Ga.Oa(t,{mode:4095&e|-4096&t.mode,timestamp:Date.now()})},ee=(t,e)=>{if(0>e)throw new Tt(28);if(!(t="string"==typeof t?Lt(t,{Sa:!0}).node:t).Ga.Oa)throw new Tt(63);if(16384==(61440&t.mode))throw new Tt(31);if(32768!=(61440&t.mode))throw new Tt(28);var r=Dt(t,"w");if(r)throw new Tt(r);t.Ga.Oa(t,{size:e,timestamp:Date.now()})},re=(t,e,r)=>{if(""===t)throw new Tt(44);if("string"==typeof e){var n=jt[e];if(void 0===n)throw Error("Unknown file open mode: "+e);e=n}if(r=64&e?4095&(void 0===r?438:r)|32768:0,"object"==typeof t)var i=t;else{t=st(t);try{i=Lt(t,{Sa:!(131072&e)}).node}catch(t){}}if(n=!1,64&e)if(i){if(128&e)throw new Tt(20)}else i=Yt(t,r,0),n=!0;if(!i)throw new Tt(44);if(8192==(61440&i.mode)&&(e&=-513),65536&e&&16384!=(61440&i.mode))throw new Tt(54);if(!n&&(r=i?40960==(61440&i.mode)?32:16384==(61440&i.mode)&&("r"!==Ft(e)||512&e)?31:Dt(i,Ft(e)):44))throw new Tt(r);return 512&e&&!n&&ee(i,0),e&=-131713,(i=zt({node:i,path:Rt(i),flags:e,seekable:!0,position:0,Ha:i.Ha,Ib:[],error:!1})).Ha.open&&i.Ha.open(i),!u.logReadFiles||1&e||(gt||(gt={}),t in gt||(gt[t]=1)),i},ne=t=>{if(null===t.fd)throw new Tt(8);t.hb&&(t.hb=null);try{t.Ha.close&&t.Ha.close(t)}catch(t){throw t}finally{xt[t.fd]=null}t.fd=null},ie=(t,e,r)=>{if(null===t.fd)throw new Tt(8);if(!t.seekable||!t.Ha.Ta)throw new Tt(70);if(0!=r&&1!=r&&2!=r)throw new Tt(28);t.position=t.Ha.Ta(t,e,r),t.Ib=[]},oe=(t,e,r,n,i)=>{if(0>n||0>i)throw new Tt(28);if(null===t.fd)throw new Tt(8);if(1==(2097155&t.flags))throw new Tt(8);if(16384==(61440&t.node.mode))throw new Tt(31);if(!t.Ha.read)throw new Tt(28);var o=void 0!==i;if(o){if(!t.seekable)throw new Tt(70)}else i=t.position;return e=t.Ha.read(t,e,r,n,i),o||(t.position+=e),e},ae=(t,e,r,n,i)=>{if(0>n||0>i)throw new Tt(28);if(null===t.fd)throw new Tt(8);if(0==(2097155&t.flags))throw new Tt(8);if(16384==(61440&t.node.mode))throw new Tt(31);if(!t.Ha.write)throw new Tt(28);t.seekable&&1024&t.flags&&ie(t,0,2);var o=void 0!==i;if(o){if(!t.seekable)throw new Tt(70)}else i=t.position;return e=t.Ha.write(t,e,r,n,i,void 0),o||(t.position+=e),e},se=t=>{var e;var r=re(t,r||0);t=Qt(t).size;var n=new Uint8Array(t);return oe(r,n,0,t,0),e=n,ne(r),e},ue=()=>{Tt||((Tt=function(t,e){this.node=e,this.Hb=function(t){this.Ka=t},this.Hb(t),this.message="FS error"}).prototype=Error(),Tt.prototype.constructor=Tt,[44].forEach(t=>{It[t]=new Tt(t),It[t].stack="<generic error, no stack>"}))},le=(t,e)=>{var r=0;return t&&(r|=365),e&&(r|=146),r},ce=(t,e,r)=>{t=st("/dev/"+t);var n=le(!!e,!!r);mt||(mt=64);var i=mt++<<8|0;qt(i,{open:t=>{t.seekable=!1},close:()=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(t,r,n,i)=>{for(var o=0,a=0;a<i;a++){try{var s=e()}catch(t){throw new Tt(29)}if(void 0===s&&0===o)throw new Tt(6);if(null==s)break;o++,r[n+a]=s}return o&&(t.node.timestamp=Date.now()),o},write:(t,e,n,i)=>{for(var o=0;o<i;o++)try{r(e[n+o])}catch(t){throw new Tt(29)}return i&&(t.node.timestamp=Date.now()),o}}),Wt(t,n,i)},he={};function fe(t,e,r){if("/"===e.charAt(0))return e;if(t=-100===t?"/":ge(t).path,0==e.length){if(!r)throw new Tt(44);return t}return st(t+"/"+e)}function pe(t,e,r){try{var n=t(e)}catch(t){if(t&&t.node&&st(e)!==st(Rt(t.node)))return-54;throw t}return R[r>>2]=n.dev,R[r+8>>2]=n.ino,R[r+12>>2]=n.mode,C[r+16>>2]=n.nlink,R[r+20>>2]=n.uid,R[r+24>>2]=n.gid,R[r+28>>2]=n.rdev,X=[n.size>>>0,(H=n.size,1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+40>>2]=X[0],R[r+44>>2]=X[1],R[r+48>>2]=4096,R[r+52>>2]=n.blocks,X=[Math.floor(n.atime.getTime()/1e3)>>>0,(H=Math.floor(n.atime.getTime()/1e3),1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+56>>2]=X[0],R[r+60>>2]=X[1],C[r+64>>2]=0,X=[Math.floor(n.mtime.getTime()/1e3)>>>0,(H=Math.floor(n.mtime.getTime()/1e3),1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+72>>2]=X[0],R[r+76>>2]=X[1],C[r+80>>2]=0,X=[Math.floor(n.ctime.getTime()/1e3)>>>0,(H=Math.floor(n.ctime.getTime()/1e3),1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+88>>2]=X[0],R[r+92>>2]=X[1],C[r+96>>2]=0,X=[n.ino>>>0,(H=n.ino,1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[r+104>>2]=X[0],R[r+108>>2]=X[1],0}var de,me=void 0;function ye(){return R[(me+=4)-4>>2]}function ge(t){if(!(t=xt[t]))throw new Tt(8);return t}function ve(t){return C[t>>2]+4294967296*R[t+4>>2]}function _e(t){var e=G(t)+1,r=Ce(e);return r&&B(t,T,r,e),r}de=w?()=>{var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now();var be={};function we(){if(!Me){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:v||"./this.program"};for(t in be)void 0===be[t]?delete e[t]:e[t]=be[t];var r=[];for(t in e)r.push(t+"="+e[t]);Me=r}return Me}var Me,Se=void 0,xe=[];function Ee(t,e){if(!Se){Se=new WeakMap;var r=U.length;if(Se)for(var n=0;n<0+r;n++){var i=U.get(n);i&&Se.set(i,n)}}if(Se.has(t))return Se.get(t);if(xe.length)r=xe.pop();else{try{U.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}r=U.length-1}try{U.set(r,t)}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var o={parameters:[],results:"v"==e[0]?[]:[i[e[0]]]},a=1;a<e.length;++a)o.parameters.push(i[e[a]]);e=new n(o,t)}else{for(n=[1,96],i=e.slice(0,1),o={i:127,p:127,j:126,f:125,d:124},128>(a=(e=e.slice(1)).length)?n.push(a):n.push(a%128|128,a>>7),a=0;a<e.length;++a)n.push(o[e[a]]);"v"==i?n.push(0):n.push(1,o[i]),e=[0,97,115,109,1,0,0,0,1],128>(i=n.length)?e.push(i):e.push(i%128|128,i>>7),e.push.apply(e,n),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}U.set(r,e)}return Se.set(t,r),r}function Oe(t){Se.delete(U.get(t)),xe.push(t)}function Pe(t){var e=Ce(t.length);return t.subarray||t.slice||(t=new Uint8Array(t)),I.set(t,e),e}function Te(t,e,r,n){var i={string:t=>{var e=0;if(null!=t&&0!==t){var r=1+(t.length<<2);e=De(r),B(t,I,e,r)}return e},array:t=>{var e=De(t.length);return T.set(t,e),e}};t=u["_"+t];var o,a=[],s=0;if(n)for(var l=0;l<n.length;l++){var c=i[r[l]];c?(0===s&&(s=je()),a[l]=c(n[l])):a[l]=n[l]}return r=t.apply(null,a),o=r,0!==s&&Fe(s),"string"===e?D(o):"boolean"===e?!!o:o}function Ie(t,e,r,n){t||(t=this),this.parent=t,this.Ra=t.Ra,this.Va=null,this.id=Et++,this.name=e,this.mode=r,this.Ga={},this.Ha={},this.rdev=n}Object.defineProperties(Ie.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}}),ue(),Ot=Array(4096),Vt(wt,"/"),Zt("/tmp"),Zt("/home"),Zt("/home/web_user"),(()=>{Zt("/dev"),qt(259,{read:()=>0,write:(t,e,r,n)=>n}),Wt("/dev/null",259),pt(1280,_t),pt(1536,bt),Wt("/dev/tty",1280),Wt("/dev/tty1",1536);var t=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(w)try{var e=r(235);return()=>e.randomBytes(1)[0]}catch(t){}return()=>$("randomDevice")}();ce("random",t),ce("urandom",t),Zt("/dev/shm"),Zt("/dev/shm/tmp")})(),(()=>{Zt("/proc");var t=Zt("/proc/self");Zt("/proc/self/fd"),Vt({Ra:()=>{var e=Nt(t,"fd",16895,73);return e.Ga={lookup:(t,e)=>{var r=xt[+e];if(!r)throw new Tt(8);return(t={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>r.path}}).parent=t}},e}},"/proc/self/fd")})();var Le={a:function(t,e,r,n){$("Assertion failed: "+D(t)+", at: "+[e?D(e):"unknown filename",r,n?D(n):"unknown function"])},h:function(t,e){try{return t=D(t),te(t,e),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},H:function(t,e,r){try{if(e=fe(t,e=D(e)),-8&r)return-28;var n=Lt(e,{Sa:!0}).node;return n?(t="",4&r&&(t+="r"),2&r&&(t+="w"),1&r&&(t+="x"),t&&Dt(n,t)?-2:0):-44}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},i:function(t,e){try{var r=xt[t];if(!r)throw new Tt(8);return te(r.node,e),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},g:function(t){try{var e=xt[t];if(!e)throw new Tt(8);var r=e.node,n="string"==typeof r?Lt(r,{Sa:!0}).node:r;if(!n.Ga.Oa)throw new Tt(63);return n.Ga.Oa(n,{timestamp:Date.now()}),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},b:function(t,e,r){me=r;try{var n=ge(t);switch(e){case 0:var i=ye();return 0>i?-28:zt(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=ye(),n.flags|=i,0;case 5:return i=ye(),L[i+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return R[Re()>>2]=28,-1;default:return-28}}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},G:function(t,e){try{var r=ge(t);return pe(Qt,r.path,e)}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},l:function(t,e,r){try{if(e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,isNaN(e))return-61;var n=xt[t];if(!n)throw new Tt(8);if(0==(2097155&n.flags))throw new Tt(28);return ee(n.node,e),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},B:function(t,e){try{if(0===e)return-28;var r=G("/")+1;return e<r?-68:(B("/",I,t,e),r)}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},E:function(t,e){try{return t=D(t),pe($t,t,e)}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},y:function(t,e,r){try{return e=fe(t,e=D(e)),"/"===(e=st(e))[e.length-1]&&(e=e.substr(0,e.length-1)),Zt(e,r),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},D:function(t,e,r,n){try{e=D(e);var i=256&n;return e=fe(t,e,4096&n),pe(i?$t:Qt,e,r)}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},v:function(t,e,r,n){me=n;try{e=fe(t,e=D(e));var i=n?ye():0;return re(e,r,i).fd}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},t:function(t,e,r,n){try{if(e=fe(t,e=D(e)),0>=n)return-28;var i=Jt(e),o=Math.min(n,G(i)),a=T[r+o];return B(i,I,r,n+1),T[r+o]=a,o}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},s:function(t){try{return t=D(t),Xt(t),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},F:function(t,e){try{return t=D(t),pe(Qt,t,e)}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},p:function(t,e,r){try{return e=fe(t,e=D(e)),0===r?Kt(e):512===r?Xt(e):$("Invalid flags passed to unlinkat"),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},o:function(t,e,r){try{if(e=fe(t,e=D(e),!0),r){var n=ve(r),i=R[r+8>>2];o=1e3*n+i/1e6,a=1e3*(n=ve(r+=16))+(i=R[r+8>>2])/1e6}else var o=Date.now(),a=o;t=o;var s=Lt(e,{Sa:!0}).node;return s.Ga.Oa(s,{timestamp:Math.max(t,a)}),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},e:function(){return Date.now()},j:function(t,e){t=new Date(1e3*ve(t)),R[e>>2]=t.getSeconds(),R[e+4>>2]=t.getMinutes(),R[e+8>>2]=t.getHours(),R[e+12>>2]=t.getDate(),R[e+16>>2]=t.getMonth(),R[e+20>>2]=t.getFullYear()-1900,R[e+24>>2]=t.getDay();var r=new Date(t.getFullYear(),0,1);R[e+28>>2]=(t.getTime()-r.getTime())/864e5|0,R[e+36>>2]=-60*t.getTimezoneOffset();var n=new Date(t.getFullYear(),6,1).getTimezoneOffset();r=r.getTimezoneOffset(),R[e+32>>2]=0|(n!=r&&t.getTimezoneOffset()==Math.min(r,n))},w:function(t,e,r,n,i,o){try{var a=ge(n);if(0!=(2&e)&&0==(2&r)&&2!=(2097155&a.flags))throw new Tt(2);if(1==(2097155&a.flags))throw new Tt(2);if(!a.Ha.bb)throw new Tt(43);var s=a.Ha.bb(a,t,i,e,r),u=s.Fb;return R[o>>2]=s.vb,u}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},x:function(t,e,r,n,i,o){try{var a=ge(i);if(2&r){var s=I.slice(t,t+e);a&&a.Ha.cb&&a.Ha.cb(a,s,o,e,n)}}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return-t.Ka}},n:function t(e,r,n){t.Bb||(t.Bb=!0,function(t,e,r){function n(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var i=(new Date).getFullYear(),o=new Date(i,0,1),a=new Date(i,6,1);i=o.getTimezoneOffset();var s=a.getTimezoneOffset();R[t>>2]=60*Math.max(i,s),R[e>>2]=Number(i!=s),t=n(o),e=n(a),t=_e(t),e=_e(e),s<i?(C[r>>2]=t,C[r+4>>2]=e):(C[r>>2]=e,C[r+4>>2]=t)}(e,r,n))},q:function(){return 2147483648},d:de,c:function(t){var e=I.length;if(2147483648<(t>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=e*(1+.2/r);n=Math.min(n,t+100663296);var i=Math;n=Math.max(t,n),i=i.min.call(i,2147483648,n+(65536-n%65536)%65536);t:{try{O.grow(i-P.byteLength+65535>>>16),z();var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},z:function(t,e){var r=0;return we().forEach((function(n,i){var o=e+r;for(i=C[t+4*i>>2]=o,o=0;o<n.length;++o)T[i++>>0]=n.charCodeAt(o);T[i>>0]=0,r+=n.length+1})),0},A:function(t,e){var r=we();C[t>>2]=r.length;var n=0;return r.forEach((function(t){n+=t.length+1})),C[e>>2]=n,0},f:function(t){try{var e=ge(t);return ne(e),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return t.Ka}},m:function(t,e){try{var r=ge(t);return T[e>>0]=r.tty?2:16384==(61440&r.mode)?3:40960==(61440&r.mode)?7:4,0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return t.Ka}},u:function(t,e,r,n){try{t:{var i=ge(t);t=e;for(var o=e=0;o<r;o++){var a=C[t>>2],s=C[t+4>>2];t+=8;var u=oe(i,T,a,s);if(0>u){var l=-1;break t}if(e+=u,u<s)break}l=e}return C[n>>2]=l,0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return t.Ka}},k:function(t,e,r,n,i){try{if(e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,isNaN(e))return 61;var o=ge(t);return ie(o,e,n),X=[o.position>>>0,(H=o.position,1<=+Math.abs(H)?0<H?(0|Math.min(+Math.floor(H/4294967296),4294967295))>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],R[i>>2]=X[0],R[i+4>>2]=X[1],o.hb&&0===e&&0===n&&(o.hb=null),0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return t.Ka}},C:function(t){try{var e=ge(t);return e.Ha&&e.Ha.fsync?e.Ha.fsync(e):0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return t.Ka}},r:function(t,e,r,n){try{t:{var i=ge(t);t=e;for(var o=e=0;o<r;o++){var a=C[t>>2],s=C[t+4>>2];t+=8;var u=ae(i,T,a,s);if(0>u){var l=-1;break t}e+=u}l=e}return C[n>>2]=l,0}catch(t){if(void 0===he||!(t instanceof Tt))throw t;return t.Ka}}};!function(){function t(t){u.asm=t.exports,O=u.asm.I,z(),U=u.asm.Aa,V.unshift(u.asm.J),K--,u.monitorRunDependencies&&u.monitorRunDependencies(K),0==K&&(null!==J&&(clearInterval(J),J=null),Q&&(t=Q,Q=null,t()))}function e(e){t(e.instance)}function r(t){return function(){if(!S&&(_||b)){if("function"==typeof fetch&&!W.startsWith("file://"))return fetch(W,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+W+"'";return t.arrayBuffer()})).catch((function(){return rt()}));if(f)return new Promise((function(t,e){f(W,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return rt()}))}().then((function(t){return WebAssembly.instantiate(t,n)})).then((function(t){return t})).then(t,(function(t){E("failed to asynchronously prepare wasm: "+t),$(t)}))}var n={a:Le};if(K++,u.monitorRunDependencies&&u.monitorRunDependencies(K),u.instantiateWasm)try{return u.instantiateWasm(n,t)}catch(t){return E("Module.instantiateWasm callback failed with error: "+t),!1}S||"function"!=typeof WebAssembly.instantiateStreaming||tt()||W.startsWith("file://")||w||"function"!=typeof fetch?r(e):fetch(W,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,n).then(e,(function(t){return E("wasm streaming compile failed: "+t),E("falling back to ArrayBuffer instantiation"),r(e)}))}))}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.J).apply(null,arguments)},u._sqlite3_free=function(){return(u._sqlite3_free=u.asm.K).apply(null,arguments)},u._sqlite3_value_double=function(){return(u._sqlite3_value_double=u.asm.L).apply(null,arguments)},u._sqlite3_value_text=function(){return(u._sqlite3_value_text=u.asm.M).apply(null,arguments)};var Re=u.___errno_location=function(){return(Re=u.___errno_location=u.asm.N).apply(null,arguments)};u._sqlite3_prepare_v2=function(){return(u._sqlite3_prepare_v2=u.asm.O).apply(null,arguments)},u._sqlite3_step=function(){return(u._sqlite3_step=u.asm.P).apply(null,arguments)},u._sqlite3_finalize=function(){return(u._sqlite3_finalize=u.asm.Q).apply(null,arguments)},u._sqlite3_reset=function(){return(u._sqlite3_reset=u.asm.R).apply(null,arguments)},u._sqlite3_value_int=function(){return(u._sqlite3_value_int=u.asm.S).apply(null,arguments)},u._sqlite3_clear_bindings=function(){return(u._sqlite3_clear_bindings=u.asm.T).apply(null,arguments)},u._sqlite3_value_blob=function(){return(u._sqlite3_value_blob=u.asm.U).apply(null,arguments)},u._sqlite3_value_bytes=function(){return(u._sqlite3_value_bytes=u.asm.V).apply(null,arguments)},u._sqlite3_value_type=function(){return(u._sqlite3_value_type=u.asm.W).apply(null,arguments)},u._sqlite3_result_blob=function(){return(u._sqlite3_result_blob=u.asm.X).apply(null,arguments)},u._sqlite3_result_double=function(){return(u._sqlite3_result_double=u.asm.Y).apply(null,arguments)},u._sqlite3_result_error=function(){return(u._sqlite3_result_error=u.asm.Z).apply(null,arguments)},u._sqlite3_result_int=function(){return(u._sqlite3_result_int=u.asm._).apply(null,arguments)},u._sqlite3_result_int64=function(){return(u._sqlite3_result_int64=u.asm.$).apply(null,arguments)},u._sqlite3_result_null=function(){return(u._sqlite3_result_null=u.asm.aa).apply(null,arguments)},u._sqlite3_result_text=function(){return(u._sqlite3_result_text=u.asm.ba).apply(null,arguments)},u._sqlite3_sql=function(){return(u._sqlite3_sql=u.asm.ca).apply(null,arguments)},u._sqlite3_aggregate_context=function(){return(u._sqlite3_aggregate_context=u.asm.da).apply(null,arguments)},u._sqlite3_column_count=function(){return(u._sqlite3_column_count=u.asm.ea).apply(null,arguments)},u._sqlite3_data_count=function(){return(u._sqlite3_data_count=u.asm.fa).apply(null,arguments)},u._sqlite3_column_blob=function(){return(u._sqlite3_column_blob=u.asm.ga).apply(null,arguments)},u._sqlite3_column_bytes=function(){return(u._sqlite3_column_bytes=u.asm.ha).apply(null,arguments)},u._sqlite3_column_double=function(){return(u._sqlite3_column_double=u.asm.ia).apply(null,arguments)},u._sqlite3_column_text=function(){return(u._sqlite3_column_text=u.asm.ja).apply(null,arguments)},u._sqlite3_column_type=function(){return(u._sqlite3_column_type=u.asm.ka).apply(null,arguments)},u._sqlite3_column_name=function(){return(u._sqlite3_column_name=u.asm.la).apply(null,arguments)},u._sqlite3_bind_blob=function(){return(u._sqlite3_bind_blob=u.asm.ma).apply(null,arguments)},u._sqlite3_bind_double=function(){return(u._sqlite3_bind_double=u.asm.na).apply(null,arguments)},u._sqlite3_bind_int=function(){return(u._sqlite3_bind_int=u.asm.oa).apply(null,arguments)},u._sqlite3_bind_text=function(){return(u._sqlite3_bind_text=u.asm.pa).apply(null,arguments)},u._sqlite3_bind_parameter_index=function(){return(u._sqlite3_bind_parameter_index=u.asm.qa).apply(null,arguments)},u._sqlite3_normalized_sql=function(){return(u._sqlite3_normalized_sql=u.asm.ra).apply(null,arguments)},u._sqlite3_errmsg=function(){return(u._sqlite3_errmsg=u.asm.sa).apply(null,arguments)},u._sqlite3_exec=function(){return(u._sqlite3_exec=u.asm.ta).apply(null,arguments)},u._sqlite3_changes=function(){return(u._sqlite3_changes=u.asm.ua).apply(null,arguments)},u._sqlite3_close_v2=function(){return(u._sqlite3_close_v2=u.asm.va).apply(null,arguments)},u._sqlite3_create_function_v2=function(){return(u._sqlite3_create_function_v2=u.asm.wa).apply(null,arguments)},u._sqlite3_open=function(){return(u._sqlite3_open=u.asm.xa).apply(null,arguments)};var Ce=u._malloc=function(){return(Ce=u._malloc=u.asm.ya).apply(null,arguments)},Ae=u._free=function(){return(Ae=u._free=u.asm.za).apply(null,arguments)};u._RegisterExtensionFunctions=function(){return(u._RegisterExtensionFunctions=u.asm.Ba).apply(null,arguments)};var ke,Ne=u._emscripten_builtin_memalign=function(){return(Ne=u._emscripten_builtin_memalign=u.asm.Ca).apply(null,arguments)},je=u.stackSave=function(){return(je=u.stackSave=u.asm.Da).apply(null,arguments)},Fe=u.stackRestore=function(){return(Fe=u.stackRestore=u.asm.Ea).apply(null,arguments)},De=u.stackAlloc=function(){return(De=u.stackAlloc=u.asm.Fa).apply(null,arguments)};function Be(){function t(){if(!ke&&(ke=!0,u.calledRun=!0,!N)){if(u.noFSInit||dt||(dt=!0,ue(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?ce("stdin",u.stdin):Ht("/dev/tty","/dev/stdin"),u.stdout?ce("stdout",null,u.stdout):Ht("/dev/tty","/dev/stdout"),u.stderr?ce("stderr",null,u.stderr):Ht("/dev/tty1","/dev/stderr"),re("/dev/stdin",0),re("/dev/stdout",1),re("/dev/stderr",1)),Pt=!1,nt(V),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Y.unshift(t)}nt(Y)}}if(!(0<K)){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)Z();nt(q),0<K||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=D,u.stackAlloc=De,u.stackSave=je,u.stackRestore=Fe,u.cwrap=function(t,e,r,n){var i=(r=r||[]).every(t=>"number"===t||"boolean"===t);return"string"!==e&&i&&!n?u["_"+t]:function(){return Te(t,e,r,arguments)}},Q=function t(){ke||Be(),ke||(Q=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Be(),l})))};t.exports=a,t.exports.default=a}).call(this,r(9)(t),r(3),"/",r(4).Buffer)},function(t,e,r){"use strict";var n={};(0,r(12).assign)(n,r(324),r(327),r(113)),t.exports=n},function(t,e,r){var n,i;
/*!
 * Draggabilly v2.4.1
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */!function(o,a){n=[r(333),r(334)],void 0===(i=function(t,e){return function(t,e,r){function n(t,e){for(var r in e)t[r]=e[r];return t}var i=t.jQuery;function o(t,e){this.element="string"==typeof t?document.querySelector(t):t,i&&(this.$element=i(this.element)),this.options=n({},this.constructor.defaults),this.option(e),this._create()}var a=o.prototype=Object.create(r.prototype);o.defaults={},a.option=function(t){n(this.options,t)};var s={relative:!0,absolute:!0,fixed:!0};function u(t,e,r){return r=r||"round",e?Math[r](t/e)*e:t}a._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=n({},this.position);var t=getComputedStyle(this.element);s[t.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},a.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},a.dispatchEvent=function(t,e,r){var n=[e].concat(r);this.emitEvent(t,n),this.dispatchJQueryEvent(t,e,r)},a.dispatchJQueryEvent=function(e,r,n){var i=t.jQuery;if(i&&this.$element){var o=i.Event(r);o.type=e,this.$element.trigger(o,n)}},a._getPosition=function(){var t=getComputedStyle(this.element),e=this._getPositionCoord(t.left,"width"),r=this._getPositionCoord(t.top,"height");this.position.x=isNaN(e)?0:e,this.position.y=isNaN(r)?0:r,this._addTransformPosition(t)},a._getPositionCoord=function(t,r){if(-1!=t.indexOf("%")){var n=e(this.element.parentNode);return n?parseFloat(t)/100*n[r]:0}return parseInt(t,10)},a._addTransformPosition=function(t){var e=t.transform;if(0===e.indexOf("matrix")){var r=e.split(","),n=0===e.indexOf("matrix3d")?12:4,i=parseInt(r[n],10),o=parseInt(r[n+1],10);this.position.x+=i,this.position.y+=o}},a.onPointerDown=function(t,e){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",t,[e])},a.pointerDown=function(t,e){this.okayPointerDown(t)&&this.isEnabled?(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",t,[e])):this._pointerReset()},a.dragStart=function(t,e){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",t,[e]),this.animate())},a.measureContainment=function(){var t=this.getContainer();if(t){var r=e(this.element),n=e(t),i=this.element.getBoundingClientRect(),o=t.getBoundingClientRect(),a=n.borderLeftWidth+n.borderRightWidth,s=n.borderTopWidth+n.borderBottomWidth,u=this.relativeStartPosition={x:i.left-(o.left+n.borderLeftWidth),y:i.top-(o.top+n.borderTopWidth)};this.containSize={width:n.width-a-u.x-r.width,height:n.height-s-u.y-r.height}}},a.getContainer=function(){var t=this.options.containment;if(t)return t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):this.element.parentNode},a.onPointerMove=function(t,e,r){this.dispatchJQueryEvent("pointerMove",t,[e,r])},a.dragMove=function(t,e,r){if(this.isEnabled){var n=r.x,i=r.y,o=this.options.grid,a=o&&o[0],s=o&&o[1];n=u(n,a),i=u(i,s),n=this.containDrag("x",n,a),i=this.containDrag("y",i,s),n="y"==this.options.axis?0:n,i="x"==this.options.axis?0:i,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+i,this.dragPoint.x=n,this.dragPoint.y=i,this.dispatchEvent("dragMove",t,[e,r])}},a.containDrag=function(t,e,r){if(!this.options.containment)return e;var n="x"==t?"width":"height",i=u(-this.relativeStartPosition[t],r,"ceil"),o=this.containSize[n];return o=u(o,r,"floor"),Math.max(i,Math.min(o,e))},a.onPointerUp=function(t,e){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",t,[e])},a.dragEnd=function(t,e){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",t,[e]))},a.animate=function(){if(this.isDragging){this.positionDrag();var t=this;requestAnimationFrame((function(){t.animate()}))}},a.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},a.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},a.staticClick=function(t,e){this.dispatchEvent("staticClick",t,[e])},a.setPosition=function(t,e){this.position.x=t,this.position.y=e,this.setLeftTop()},a.enable=function(){this.isEnabled=!0},a.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},a.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},a._init=function(){},i&&i.bridget&&i.bridget("draggabilly",o);return o}(o,t,e)}.apply(e,n))||(t.exports=i)}(window)},function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAwADADAREAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAAAgQGAAMFBwj/xAAaAQACAwEBAAAAAAAAAAAAAAABAwACBQQG/9oADAMBAAIQAxAAAAH6nAjsJBGa6wjLHdfHYSKvZeqmvnvmeW03ujmclCMS56qpDj7We++Xx06aCfzF5J29Bj3RYKgROx3M3XMzkpERpxsd18dhIIzJBEsd1/8A/8QAHBAAAwEBAQEBAQAAAAAAAAAAAgMFBAEAEwYU/9oACAEBAAEFAiLg8Oppos5Cc33Y5p4FTTOYJcLlQzo7UIDMqi5mfHzC183D3tSdLM522Fz66aFrQLc1Rj/H+aLvkZ15hu8+WmSPfpn0BIsbNa69U6blulVia27366agHO2/y5aGTPNQhOrNsx08AtW2WB0dpDwuHL0zmcuuV7t1zfBL00WCPB5//8QAIBEAAgEEAwEBAQAAAAAAAAAAAQIAERIhIgMTMRAyQv/aAAgBAwEBPwGXlsJOsn0yynhl5XD/AB9jYIBTAjGgqJaSt1Yu67RNTYZx5JMbkOVgcmikTqgAHk5MEGJ/SwGx8xje2JeRqsR64M5MkCPqbxKKwxAgApCGVqiLX9tE2N5+WFcpOwj0TsJ8EsLZf5//xAAoEQABBAEDAwQCAwAAAAAAAAACAAEDBBESIUExUWEFFSIzExQjMkL/2gAIAQIBAT8Bd2ZsuiuTWi0VG27r26Q/tldPRIN4pnZDcmqlottt3TOztllcIrUzVA6cqOMYhYAbZWjOKFzDq3dfrnJXe1r844Vd3uV/58PlUyKrM9Q+nC9O+cksvlWr8rEddh34worhyaKsgZfnKL0p3zguenGFHEETYBsL1H4SRS+VSb5T1843UUo0bZa31eVPMN20Oh9PlFbkAxggyTj1zyqd0jJ4pv75XqPzkii8q4JVZmth05X4YLMTuH+lHUijAQxnCmisQWfyxPqcvCrMYkVycsd2wqYlame2fThOzO2HRU5qpa6j7dl7jIH2xOvcZD+qJ0NOa0Wu2+3ZMzM2GX//xAAlEAABAwIGAwEBAQAAAAAAAAABAAIDBBEFEhMhMUEiMlEUQiP/2gAIAQEABj8CJJsB2jFh7PEczv4V6iulcfjUXQYi9ttvI7XQixBnieJ2cIEG4PaZh8Rs32lKbHG3KwdKSSMtDm7+fCkrv0Wu4y6X83V6kMeJOm9J+Hym7faIquqDy6TKFUUYh/0OzCw72UFBNTB7rgO1U+0oAMlxH/OVZYmBg5sFQ1A5bJlKxKkzFjsxsRypNV5qBbKZO1BpOMA9dQ8qGmptSeWK4kDx7J1PUB/6Mx2y7NCoaccukzFMxCIXb6yhSGMNyz7l4G91FHka/T3DiO/qbUQO15JrjKW2ACmxGql0dy17MvKfiEos31iCIIuD0jLh7/E8wP4VqihlafrVanoZXH65CXEH+I4gZwgALAdL/8QAIBABAAIBBQEBAQEAAAAAAAAAAQARITFBUXHwYcGBof/aAAgBAQABPyEGxrVoErNNRMOvX8mTK3aD3Uvhexf8HMvNNRMu/X8gNjWDRI4U8PY49ukPsWgQg3/YcdxUFIAyD3rM7VfN+McK+Xuce3GanEJwHiZmdd0I17qN3TltoZuneWOplXW0ftRenthouaHAJyPmGyKtMGyz/I7iEDNsff5NJkDFbMLdyg6m9/vUDGbaWoqanABwHmOFfD3OfbhMM8ofZ2S00dBuBIGrTCqFvg+aQ3Od9IKAe604jhTy9jn26wGxqVokvNNbMuvX9mDK2bH3cyZWzQe7lZprZh36/sBsagaBP//aAAwDAQACAAMAAAAQo4FGBA7SvIwnAyQo/F//xAAdEQEBAAIDAQEBAAAAAAAAAAABABGBITFBYXFR/9oACAEDAQE/EFxyyvBu9nL5WLwbhzyST2QGGeMh+2LL6JL6Lc4qBzcwn7L5w+9fIXAxbnHnoibLMJ9PsoMincq97c4J7LNvqKYdXedYhUx/YL6JM8MryavZ3s4Xk1Bjgv/EACIRAQABAwQDAQEBAAAAAAAAAAERACExQVFhcYHB8LHhkf/aAAgBAgEBPxBEkBSC3ZePHy8FF292LH76odjjF2Sdm/qgF+wcefh4aBJI0g8ZPjb7VNqj4ClFC5s67cHND9GV5g9xO1uKmADSaHpH/KQecnxt9qO9CfyxOif5V3rskzCZ7i9oisy4ErgvMOsbzPmpbEMy7JrrMfaiY4b23oR+SD0x/acuCUJkmSfFqSnEQ5M23cmG9HrDErM358F6GSSAIs1nJuPVE03LRYMx13xelH5ZPRH9oB5wPG/2ob1DQi9QJnfs/ZpgHKKEzvR68ZDAAiBZ2M2bVl8U1AQEPcREzGaAeMDxv9qu1IgkaQX7Lx4+HloszO5c/PdNm53bH57oBbsHHn5eSgQQFf/EACAQAQACAgIDAQEBAAAAAAAAAAERIQAxQVFhcZGBobH/2gAIAQEAAT8QTtB2AWq8GCJrqeglfoodN5zBhY7xKn8Zpp6KkEgAZQhHeCJvqegF/gANt4HaDsosR5MIyQ/phPKJGNPQc/0ACRXldq7yF3EzgMvsKPKYgZRAxGSmrFPBzImVkJYGgbpRaarCMEv7ZXwkFjR2DNrBDalj4/OOoUT4gQCVKaiJ8YKEllTEEgLuZjV5UGvGh5N2qoJuR5z5kIBY9B8zSwQ2oY+H3hA6OtTzAP8AcD15MbErKsRVvPrCI2DdxCA1bBZbxhvy/ugNKhakjtOsh6thgYJLAsFnZbOaWCG1BPx+cIyQftgPCYCdHYcZCYkxClOk4eZ5XF6Qd6bLtf8ADrI2LMXISFBcp7S41YIXgyJ6AgzSbcIwSfpkfKBSdPQMTtA2UUicmCJvqewt/qANtZxBhY7xIH9ZxBgY7zAn8YIGup7A1+Kh01gdoGwCgDgz/9k="},function(t,e){t.exports='<div class="m-toast {{severity}}">\n    <span class="{{icon}}"></span>\n    <div class="m-toast-message" tabindex="{{order}}">{{{message}}}</div>\n    <button type="button" class="g-cartografia-cancelar m-toast-button" tabindex="{{order}}" title="{{translations.close}}"></button>\n</div>'},function(t,e,r){var n=r(338);e.Processor=n},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=l(t),a=n[0],s=n[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),c=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[c++]=255&e);1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(t,a,a+16383>s?s:a+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){},function(t,e,r){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=r(14),e.createHash=e.Hash=r(19),e.createHmac=e.Hmac=r(76);var n=r(259),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return o};var a=r(79);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync;var s=r(261);e.Cipher=s.Cipher,e.createCipher=s.createCipher,e.Cipheriv=s.Cipheriv,e.createCipheriv=s.createCipheriv,e.Decipher=s.Decipher,e.createDecipher=s.createDecipher,e.Decipheriv=s.Decipheriv,e.createDecipheriv=s.createDecipheriv,e.getCiphers=s.getCiphers,e.listCiphers=s.listCiphers;var u=r(276);e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var l=r(283);e.createSign=l.createSign,e.Sign=l.Sign,e.createVerify=l.createVerify,e.Verify=l.Verify,e.createECDH=r(316);var c=r(319);e.publicEncrypt=c.publicEncrypt,e.privateEncrypt=c.privateEncrypt,e.publicDecrypt=c.publicDecrypt,e.privateDecrypt=c.privateDecrypt;var h=r(323);e.randomFill=h.randomFill,e.randomFillSync=h.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e){},function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var u=r(4).Buffer,l=r(238).inspect,c=l&&l.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,n;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return u.alloc(0);for(var e,r,n,i=u.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,r=i,n=a,u.prototype.copy.call(e,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0==(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=u.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:c,value:function(t,e){return l(this,i(i({},e),{},{depth:0,customInspect:!1}))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e){},function(t,e,r){"use strict";(function(e){var n;function i(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(35),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[a];if(null!==e){var r=t[f].read();null!==r&&(t[c]=null,t[a]=null,t[s]=null,e(p(r,!1)))}}function m(t){e.nextTick(d,t)}var y=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var t=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(r,n){e.nextTick((function(){t[u]?n(t[u]):r(p(void 0,!0))}))}));var n,i=this[c];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[l]?r(p(void 0,!0)):e[h](r,n)}),n)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[h])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),n),y);t.exports=function(t){var e,r=Object.create(g,(i(e={},f,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,l,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var n=r[f].read();n?(r[c]=null,r[a]=null,r[s]=null,t(p(n,!1))):(r[a]=t,r[s]=e)},writable:!0}),e));return r[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[s];return null!==e&&(r[c]=null,r[a]=null,r[s]=null,e(t)),void(r[u]=t)}var n=r[a];null!==n&&(r[c]=null,r[a]=null,r[s]=null,n(p(void 0,!0))),r[l]=!0})),t.on("readable",m.bind(null,r)),r}}).call(this,r(3))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,r){"use strict";t.exports=i;var n=r(69);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(0)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){"use strict";var n;var i=r(15).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===n&&(n=r(35)),n(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function l(t){t()}function c(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,r){var o=r<e.length-1;return u(t,o,r>0,(function(t){n||(n=t),t&&a.forEach(l),o||(a.forEach(l),i(n))}))}));return e.reduce(c)}},function(t,e,r){var n=r(0),i=r(17),o=r(1).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<30|t>>>2}function c(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)r[h]=t.readInt32BE(4*h);for(;h<80;++h)r[h]=r[h-3]^r[h-8]^r[h-14]^r[h-16];for(var f=0;f<80;++f){var p=~~(f/20),d=0|((e=n)<<5|e>>>27)+c(p,i,o,s)+u+r[f]+a[p];u=s,s=o,o=l(i),i=n,n=d}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,r){var n=r(0),i=r(17),o=r(1).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<5|t>>>27}function c(t){return t<<30|t>>>2}function h(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<80;++f)r[f]=(e=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|e>>>31;for(var p=0;p<80;++p){var d=~~(p/20),m=l(n)+h(d,i,o,s)+u+r[p]+a[d]|0;u=s,s=o,o=c(i),i=n,n=m}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,r){var n=r(0),i=r(70),o=r(17),a=r(1).Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}n(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},function(t,e,r){var n=r(0),i=r(71),o=r(17),a=r(1).Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}n(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},function(t,e,r){t.exports=i;var n=r(20).EventEmitter;function i(){n.call(this)}r(0)(i,n),i.Readable=r(38),i.Writable=r(254),i.Duplex=r(255),i.Transform=r(256),i.PassThrough=r(257),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===n.listenerCount(this,"error"))throw t}function c(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("error",l),t.on("error",l),r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t}},function(t,e){},function(t,e,r){"use strict";var n=r(39).Buffer,i=r(250);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);for(var e,r,i,o=n.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,r=o,i=s,e.copy(r,i),s+=a.data.length,a=a.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(252),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(5))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,o,a,s,u=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return l[u]=i,n(u),u++},f.clearImmediate=p}function p(t){delete l[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{p(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(5),r(3))},function(t,e,r){"use strict";t.exports=o;var n=r(75),i=Object.create(r(22));function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=r(0),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(40)},function(t,e,r){t.exports=r(13)},function(t,e,r){t.exports=r(38).Transform},function(t,e,r){t.exports=r(38).PassThrough},function(t,e,r){"use strict";var n=r(0),i=r(1).Buffer,o=r(11),a=i.alloc(128);function s(t,e){o.call(this,"digest"),"string"==typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>64?e=t(e):e.length<64&&(e=i.concat([e,a],64));for(var r=this._ipad=i.allocUnsafe(64),n=this._opad=i.allocUnsafe(64),s=0;s<64;s++)r[s]=54^e[s],n[s]=92^e[s];this._hash=[r]}n(s,o),s.prototype._update=function(t){this._hash.push(t)},s.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=s},function(t,e,r){t.exports=r(78)},function(t,e,r){(function(e){var n,i,o=r(1).Buffer,a=r(80),s=r(81),u=r(82),l=r(83),c=e.crypto&&e.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function p(){return i||(i=e.process&&e.process.nextTick?e.process.nextTick:e.queueMicrotask?e.queueMicrotask:e.setImmediate?e.setImmediate:e.setTimeout)}function d(t,e,r,n,i){return c.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return c.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},t,n<<3)})).then((function(t){return o.from(t)}))}t.exports=function(t,r,i,m,y,g){"function"==typeof y&&(g=y,y=void 0);var v=h[(y=y||"sha1").toLowerCase()];if(v&&"function"==typeof e.Promise){if(a(i,m),t=l(t,s,"Password"),r=l(r,s,"Salt"),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){p()((function(){e(null,t)}))}),(function(t){p()((function(){e(t)}))}))}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var r=d(n=n||o.alloc(8),n,10,128,t).then((function(){return!0})).catch((function(){return!1}));return f[t]=r,r}(v).then((function(e){return e?d(t,r,i,m,v):u(t,r,i,m,y)})),g)}else p()((function(){var e;try{e=u(t,r,i,m,y)}catch(t){return g(t)}g(null,e)}))}}).call(this,r(5))},function(t,e,r){var n=r(262),i=r(42),o=r(43),a=r(275),s=r(28);function u(t,e,r){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,r);if(a[t])return new n({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function l(t,e,r){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,r);if(a[t])return new n({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");r=8*a[t].key,n=a[t].iv}var i=s(e,!1,r,n);return u(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");r=8*a[t].key,n=a[t].iv}var i=s(e,!1,r,n);return l(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=function(){return Object.keys(a).concat(i.getCiphers())}},function(t,e,r){var n=r(11),i=r(263),o=r(0),a=r(1).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(t){n.call(this);var e,r=t.mode.toLowerCase(),i=s[r];e=t.decrypt?"decrypt":"encrypt";var o=t.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=a.concat([o,o.slice(0,8)]));var u=t.iv;a.isBuffer(u)||(u=a.from(u)),this._des=i.create({key:o,iv:u,type:e})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,o(u,n),u.prototype._update=function(t){return a.from(this._des.update(t))},u.prototype._final=function(){return a.from(this._des.final())}},function(t,e,r){"use strict";e.utils=r(84),e.Cipher=r(41),e.DES=r(85),e.CBC=r(264),e.EDE=r(265)},function(t,e,r){"use strict";var n=r(6),i=r(0),o={};function a(t){n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var r=Object.keys(o),n=0;n<r.length;n++){var a=r[n];e.prototype[a]=o[a]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},o._update=function(t,e,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];o._update.call(this,a,0,r,n);for(s=0;s<this.blockSize;s++)a[s]=r[n+s]}else{o._update.call(this,t,e,r,n);for(s=0;s<this.blockSize;s++)r[n+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s]}}},function(t,e,r){"use strict";var n=r(6),i=r(0),o=r(41),a=r(85);function s(t,e){n.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[a.create({type:"encrypt",key:r}),a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:i}),a.create({type:"decrypt",key:r})]}function u(t){o.call(this,t);var e=new s(this.type,this.options.key);this._edeState=e}i(u,o),t.exports=u,u.create=function(t){return new u(t)},u.prototype._update=function(t,e,r,n){var i=this._edeState;i.ciphers[0]._update(t,e,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad},function(t,e,r){var n=r(43),i=r(89),o=r(1).Buffer,a=r(90),s=r(11),u=r(27),l=r(28);function c(t,e,r){s.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(r),this._mode=t,this._autopadding=!0}r(0)(c,s),c.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return o.concat(n)};var h=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function p(t,e,r){var s=n[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof r&&(r=o.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===s.type?new a(s.module,e,r):"auth"===s.type?new i(s.module,e,r):new c(s.module,e,r)}c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return o.concat([this.cache,e])},e.createCipheriv=p,e.createCipher=function(t,e){var r=n[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=l(e,!1,r.key,r.iv);return p(t,i.key,i.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,r){var n=r(23);e.encrypt=function(t,e){var r=n(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},e.decrypt=function(t,e){var r=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return n(i,r)}},function(t,e,r){var n=r(1).Buffer,i=r(23);function o(t,e,r){var o=e.length,a=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=n.concat([t._prev,r?e:a]),a}e.encrypt=function(t,e,r){for(var i,a=n.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=n.allocUnsafe(0)),!(t._cache.length<=e.length)){a=n.concat([a,o(t,e,r)]);break}i=t._cache.length,a=n.concat([a,o(t,e.slice(0,i),r)]),e=e.slice(i)}return a}},function(t,e,r){var n=r(1).Buffer;function i(t,e,r){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=n.concat([t._prev.slice(1),n.from([r?e:i])]),i}e.encrypt=function(t,e,r){for(var o=e.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],r);return a}},function(t,e,r){var n=r(1).Buffer;function i(t,e,r){for(var n,i,a=-1,s=0;++a<8;)n=e&1<<7-a?128:0,s+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^n))>>a%8,t._prev=o(t._prev,r?n:i);return s}function o(t,e){var r=t.length,i=-1,o=n.allocUnsafe(t.length);for(t=n.concat([t,n.from([e])]);++i<r;)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,r){for(var o=e.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],r);return a}},function(t,e,r){(function(t){var n=r(23);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),n(r,o)}}).call(this,r(4).Buffer)},function(t,e,r){var n=r(1).Buffer,i=n.alloc(16,0);function o(t){var e=n.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}a.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){for(var t,e,r,n=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!=(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=o(i)},a.prototype.update=function(t){var e;for(this.cache=n.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=a},function(t,e,r){var n=r(89),i=r(1).Buffer,o=r(43),a=r(90),s=r(11),u=r(27),l=r(28);function c(t,e,r){s.call(this),this._cache=new h,this._last=void 0,this._cipher=new u.AES(e),this._prev=i.from(r),this._mode=t,this._autopadding=!0}function h(){this.cache=i.allocUnsafe(0)}function f(t,e,r){var s=o[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=i.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof e&&(e=i.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new a(s.module,e,r,!0):"auth"===s.type?new n(s.module,e,r,!0):new c(s.module,e,r)}r(0)(c,s),c.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return i.concat(n)},c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},h.prototype.add=function(t){this.cache=i.concat([this.cache,t])},h.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var r=o[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=l(e,!1,r.key,r.iv);return f(t,n.key,n.iv)},e.createDecipheriv=f},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,r){(function(t){var n=r(91),i=r(281),o=r(282);var a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var r=new t(i[e].prime,"hex"),n=new t(i[e].gen,"hex");return new o(r,n)},e.createDiffieHellman=e.DiffieHellman=function e(r,i,s,u){return t.isBuffer(i)||void 0===a[i]?e(r,"binary",i,s):(i=i||"binary",u=u||"binary",s=s||new t([2]),t.isBuffer(s)||(s=new t(s,u)),"number"==typeof r?new o(n(r,s),s,!0):(t.isBuffer(r)||(r=new t(r,i)),new o(r,s,!0)))}}).call(this,r(4).Buffer)},function(t,e){},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(279).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,M=0|a[4],S=8191&M,x=M>>>13,E=0|a[5],O=8191&E,P=E>>>13,T=0|a[6],I=8191&T,L=T>>>13,R=0|a[7],C=8191&R,A=R>>>13,k=0|a[8],N=8191&k,j=k>>>13,F=0|a[9],D=8191&F,B=F>>>13,G=0|s[0],z=8191&G,U=G>>>13,q=0|s[1],V=8191&q,Y=q>>>13,Z=0|s[2],W=8191&Z,H=Z>>>13,X=0|s[3],K=8191&X,J=X>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,z),i=(i=Math.imul(d,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(v,z)|0,o=Math.imul(v,U),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,Y)|0;var vt=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,U))+Math.imul(w,z)|0,o=Math.imul(w,U),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,W)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,U))+Math.imul(x,z)|0,o=Math.imul(x,U),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,U))+Math.imul(P,z)|0,o=Math.imul(P,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,U))+Math.imul(L,z)|0,o=Math.imul(L,U),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var Mt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(A,z)|0,o=Math.imul(A,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var St=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,U))+Math.imul(j,z)|0,o=Math.imul(j,U),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var xt=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(B,z)|0,o=Math.imul(B,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Y))+Math.imul(B,V)|0,o=Math.imul(B,Y),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,at)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,H))+Math.imul(B,W)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Pt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ft)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ft)|0;var Tt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(B,$)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var It=(l+(n=n+Math.imul(S,dt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(x,dt)|0))<<13)|0;l=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(A,dt)|0))<<13)|0;l=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var At=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863;var kt=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=Mt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=Ot,u[11]=Pt,u[12]=Tt,u[13]=It,u[14]=Lt,u[15]=Rt,u[16]=Ct,u[17]=At,u[18]=kt,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(M,v),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return g[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new x(t)},i(x,S),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e){},function(t,e){},function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,e,r){(function(e){var n=r(92),i=new(r(93)),o=new n(24),a=new n(11),s=new n(10),u=new n(3),l=new n(7),c=r(91),h=r(14);function f(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._pub=new n(t),this}function p(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._priv=new n(t),this}t.exports=m;var d={};function m(t,e,r){this.setGenerator(e),this.__prime=new n(t),this._prime=n.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=f,this.setPrivateKey=p):this._primeCode=8}function y(t,r){var n=new e(t.toArray());return r?n.toString(r):n}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in d)return d[n];var h,f=0;if(t.isEven()||!c.simpleSieve||!c.fermatTest(t)||!i.test(t))return f+=1,f+="02"===r||"05"===r?8:4,d[n]=f,f;switch(i.test(t.shrn(1))||(f+=2),r){case"02":t.mod(o).cmp(a)&&(f+=8);break;case"05":(h=t.mod(s)).cmp(u)&&h.cmp(l)&&(f+=8);break;default:f+=4}return d[n]=f,f}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new n(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var r=(t=(t=new n(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new e(r.toArray()),o=this.getPrime();if(i.length<o.length){var a=new e(o.length-i.length);a.fill(0),i=e.concat([a,i])}return i},m.prototype.getPublicKey=function(t){return y(this._pub,t)},m.prototype.getPrivateKey=function(t){return y(this._priv,t)},m.prototype.getPrime=function(t){return y(this.__prime,t)},m.prototype.getGenerator=function(t){return y(this._gen,t)},m.prototype.setGenerator=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.__gen=t,this._gen=new n(t),this}}).call(this,r(4).Buffer)},function(t,e,r){var n=r(1).Buffer,i=r(19),o=r(62),a=r(0),s=r(284),u=r(315),l=r(78);function c(t){o.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){o.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new c(t)}function p(t){return new h(t)}Object.keys(l).forEach((function(t){l[t].id=n.from(l[t].id,"hex"),l[t.toLowerCase()]=l[t]})),a(c,o.Writable),c.prototype._write=function(t,e,r){this._hash.update(t),r()},c.prototype.update=function(t,e){return"string"==typeof t&&(t=n.from(t,e)),this._hash.update(t),this},c.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),n=s(r,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},a(h,o.Writable),h.prototype._write=function(t,e,r){this._hash.update(t),r()},h.prototype.update=function(t,e){return"string"==typeof t&&(t=n.from(t,e)),this._hash.update(t),this},h.prototype.verify=function(t,e,r){"string"==typeof e&&(e=n.from(e,r)),this.end();var i=this._hash.digest();return u(e,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:p,createSign:f,createVerify:p}},function(t,e,r){var n=r(1).Buffer,i=r(76),o=r(45),a=r(47).ec,s=r(46),u=r(30),l=r(105);function c(t,e,r,o){if((t=n.from(t.toArray())).length<e.byteLength()){var a=n.alloc(e.byteLength()-t.length);t=n.concat([a,t])}var s=r.length,u=function(t,e){t=(t=h(t,e)).mod(e);var r=n.from(t.toArray());if(r.length<e.byteLength()){var i=n.alloc(e.byteLength()-r.length);r=n.concat([i,r])}return r}(r,e),l=n.alloc(s);l.fill(1);var c=n.alloc(s);return c=i(o,c).update(l).update(n.from([0])).update(t).update(u).digest(),l=i(o,c).update(l).digest(),{k:c=i(o,c).update(l).update(n.from([1])).update(t).update(u).digest(),v:l=i(o,c).update(l).digest()}}function h(t,e){var r=new s(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function f(t,e,r){var o,a;do{for(o=n.alloc(0);8*o.length<t.bitLength();)e.v=i(r,e.k).update(e.v).digest(),o=n.concat([o,e.v]);a=h(o,t),e.k=i(r,e.k).update(e.v).update(n.from([0])).digest(),e.v=i(r,e.k).update(e.v).digest()}while(-1!==a.cmp(t));return a}function p(t,e,r,n){return t.toRed(s.mont(r)).redPow(e).fromRed().mod(n)}t.exports=function(t,e,r,i,d){var m=u(e);if(m.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(t,e){var r=l[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var i=new a(r).keyFromPrivate(e.privateKey).sign(t);return n.from(i.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==i)throw new Error("wrong private key type");return function(t,e,r){var i,o=e.params.priv_key,a=e.params.p,u=e.params.q,l=e.params.g,d=new s(0),m=h(t,u).mod(u),y=!1,g=c(o,u,t,r);for(;!1===y;)i=f(u,g,r),d=p(l,i,a,u),0===(y=i.invm(u).imul(m.add(o.mul(d))).mod(u)).cmpn(0)&&(y=!1,d=new s(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t));128&e[0]&&(e=[0].concat(e));var r=[48,t.length+e.length+4,2,t.length];return r=r.concat(t,[2,e.length],e),n.from(r)}(d,y)}(t,m,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");t=n.concat([d,t]);for(var y=m.modulus.byteLength(),g=[0,1];t.length+g.length+1<y;)g.push(255);g.push(0);for(var v=-1;++v<t.length;)g.push(t[v]);return o(g,m)},t.exports.getKey=c,t.exports.makeKey=f},function(t,e){},function(t){t.exports=JSON.parse('{"_from":"elliptic@^6.5.3","_id":"elliptic@6.5.4","_inBundle":false,"_integrity":"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.5.3","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.5.3","saveSpec":null,"fetchSpec":"^6.5.3"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz","_shasum":"da37cebd31e79a1367e941b592ed1fbebd58abbb","_spec":"elliptic@^6.5.3","_where":"/home/carmenmarquez/proyectos/IGN/REPO CNIG/API-CNIG/api-ign-js/node_modules/browserify-sign","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.4"}')},function(t,e){},function(t,e,r){"use strict";var n=r(7),i=r(10),o=r(0),a=r(29),s=n.assert;function u(t){a.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(t,e,r,n){a.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(t,e,r,n){a.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?r=o[0]:(r=o[1],s(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new i(t.a,16),b:new i(t.b,16)}})):this._getEndoBasis(r)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),r=new i(2).toRed(e).redInvm(),n=r.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,r,n,o,a,s,u,l,c,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,p=this.n.clone(),d=new i(1),m=new i(0),y=new i(0),g=new i(1),v=0;0!==f.cmpn(0);){var _=p.div(f);l=p.sub(_.mul(f)),c=y.sub(_.mul(d));var b=g.sub(_.mul(m));if(!n&&l.cmp(h)<0)e=u.neg(),r=d,n=l.neg(),o=c;else if(n&&2==++v)break;u=l,p=f,f=l,y=d,d=c,g=m,m=b}a=l.neg(),s=c;var w=n.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(w)>=0&&(a=e,s=r),n.negative&&(n=n.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:n,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),l=o.mul(n.b);return{k1:t.sub(a).sub(s),k2:u.add(l).neg()}},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(e&&!o||!e&&o)&&(n=n.redNeg()),this.point(t,n)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var l=this._wnafMulAdd(1,n,i,2*o,r),c=0;c<2*o;c++)n[c]=null,i[c]=null;return l},o(l,a.BasePoint),u.prototype.point=function(t,e,r){return new l(this,t,e,r)},u.prototype.pointFromJSON=function(t,e){return l.fromJSON(this,t,e)},l.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},l.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},l.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},l.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},l.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(c,a.BasePoint),u.prototype.jpoint=function(t,e,r){return new c(this,t,e,r)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),h=n.redMul(l),f=u.redSqr().redIAdd(c).redISub(h).redISub(h),p=u.redMul(h.redISub(f)).redISub(o.redMul(c)),d=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,p,d)},c.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),c=r.redMul(u),h=s.redSqr().redIAdd(l).redISub(c).redISub(c),f=s.redMul(c.redISub(h)).redISub(i.redMul(l)),p=this.z.redMul(a);return this.curve.jpoint(h,f,p)},c.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),l=a.redAdd(a);for(e=0;e<t;e++){var c=o.redSqr(),h=l.redSqr(),f=h.redSqr(),p=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(u)),d=o.redMul(h),m=p.redSqr().redISub(d.redAdd(d)),y=d.redISub(m),g=p.redMul(y);g=g.redIAdd(g).redISub(f);var v=l.redMul(s);e+1<t&&(u=u.redMul(f)),o=m,s=v,l=g}return this.curve.jpoint(o,l.redMul(i),s)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),t=u,e=s.redMul(a.redISub(u)).redISub(l),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(c).redISub(f);p=p.redIAdd(p);var d=c.redAdd(c).redIAdd(c),m=d.redSqr(),y=f.redIAdd(f);y=(y=y.redIAdd(y)).redIAdd(y),t=m.redISub(p).redISub(p),e=d.redMul(p.redISub(t)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},c.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),e=s.redMul(a.redISub(u)).redISub(l),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),p=this.x.redSub(c).redMul(this.x.redAdd(c));p=p.redAdd(p).redIAdd(p);var d=f.redIAdd(f),m=(d=d.redIAdd(d)).redAdd(d);t=p.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var y=h.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),e=p.redMul(d.redISub(t)).redISub(y)}return this.curve.jpoint(t,e,r)},c.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),l=(u=u.redIAdd(u)).redMul(a),c=s.redSqr().redISub(l.redAdd(l)),h=l.redISub(c),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=s.redMul(h).redISub(f),d=r.redAdd(r).redMul(n);return this.curve.jpoint(c,p,d)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),c=e.redMul(l);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(s).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(h,f,p)},c.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},c.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},c.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,r){"use strict";var n=r(10),i=r(0),o=r(29),a=r(7);function s(t){o.call(this,"mont",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,r){o.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(e,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(s,o),t.exports=s,s.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===n.redSqrt().redSqr().cmp(n)},i(u,o.BasePoint),s.prototype.decodePoint=function(t,e){return this.point(a.toArray(t,e),1)},s.prototype.point=function(t,e){return new u(this,t,e)},s.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),n=t.redMul(e),i=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),a=i.redMul(n),s=e.z.redMul(o.redAdd(a).redSqr()),u=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},u.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,r){"use strict";var n=r(7),i=r(10),o=r(0),a=r(29),s=n.assert;function u(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,a.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function l(t,e,r,n,o){a.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,a),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=n.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(e&&!u||!e&&u)&&(s=s.redNeg()),this.point(t,s)},u.prototype.pointFromY=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},o(l,a.BasePoint),u.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},u.prototype.point=function(t,e,r,n){return new l(this,t,e,r,n)},l.fromJSON=function(t,e){return new l(t,e[0],e[1],e[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),a=o.redSub(r),s=n.redSub(e),u=i.redMul(a),l=o.redMul(s),c=i.redMul(s),h=a.redMul(o);return this.curve.point(u,l,h,c)},l.prototype._projDbl=function(){var t,e,r,n,i,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var l=(n=this.curve._mulA(s)).redAdd(u);this.zOne?(t=a.redSub(s).redSub(u).redMul(l.redSub(this.curve.two)),e=l.redMul(n.redSub(u)),r=l.redSqr().redSub(l).redSub(l)):(i=this.z.redSqr(),o=l.redSub(i).redISub(i),t=a.redSub(s).redISub(u).redMul(o),e=l.redMul(n.redSub(u)),r=l.redMul(o))}else n=s.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),t=this.curve._mulC(a.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(s.redISub(u)),r=n.redMul(o);return this.curve.point(t,e,r)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),a=i.redSub(n),s=i.redAdd(n),u=r.redAdd(e),l=o.redMul(a),c=s.redMul(u),h=o.redMul(u),f=a.redMul(s);return this.curve.point(l,c,f,h)},l.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),u=i.redSub(s),l=i.redAdd(s),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),h=n.redMul(u).redMul(c);return this.curve.twisted?(e=n.redMul(l).redMul(a.redSub(this.curve._mulA(o))),r=u.redMul(l)):(e=n.redMul(l).redMul(a.redSub(o)),r=this.curve._mulC(u).redMul(l)),this.curve.point(h,e,r)},l.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},l.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},l.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},l.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),0===this.x.cmp(e))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},function(t,e,r){"use strict";e.sha1=r(292),e.sha224=r(293),e.sha256=r(97),e.sha384=r(294),e.sha512=r(98)},function(t,e,r){"use strict";var n=r(8),i=r(24),o=r(96),a=n.rotl32,s=n.sum32,u=n.sum32_5,l=o.ft_1,c=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,c),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=a(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],c=this.h[2],f=this.h[3],p=this.h[4];for(n=0;n<r.length;n++){var d=~~(n/20),m=u(a(i,5),l(d,o,c,f),p,r[n],h[d]);p=f,f=c,c=a(o,30),o=i,i=m}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],c),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],p)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(8),i=r(97);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(t,e,r){"use strict";var n=r(8),i=r(98);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(t,e,r){"use strict";var n=r(8),i=r(24),o=n.rotl32,a=n.sum32,s=n.sum32_3,u=n.sum32_4,l=i.BlockHash;function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function p(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(c,l),e.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],l=this.h[3],c=this.h[4],v=r,_=n,b=i,w=l,M=c,S=0;S<80;S++){var x=a(o(u(r,h(S,n,i,l),t[d[S]+e],f(S)),y[S]),c);r=c,c=l,l=o(i,10),i=n,n=x,x=a(o(u(v,h(79-S,_,b,w),t[m[S]+e],p(S)),g[S]),M),v=M,M=w,w=o(b,10),b=_,_=x}x=s(this.h[1],i,w),this.h[1]=s(this.h[2],l,M),this.h[2]=s(this.h[3],c,v),this.h[3]=s(this.h[4],r,_),this.h[4]=s(this.h[0],n,b),this.h[0]=x},c.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,r){"use strict";var n=r(8),i=r(6);function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,r){"use strict";var n=r(10),i=r(299),o=r(7),a=r(48),s=r(44),u=o.assert,l=r(300),c=r(301);function h(t){if(!(this instanceof h))return new h(t);"string"==typeof t&&(u(Object.prototype.hasOwnProperty.call(a,t),"Unknown curve "+t),t=a[t]),t instanceof a.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=h,h.prototype.keyPair=function(t){return new l(this,t)},h.prototype.keyFromPrivate=function(t,e){return l.fromPrivate(this,t,e)},h.prototype.keyFromPublic=function(t,e){return l.fromPublic(this,t,e)},h.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||s(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var a=new n(e.generate(r));if(!(a.cmp(o)>0))return a.iaddn(1),this.keyFromPrivate(a)}},h.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},h.prototype.sign=function(t,e,r,o){"object"==typeof r&&(o=r,r=null),o||(o={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new n(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),u=t.toArray("be",a),l=new i({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new n(1)),f=0;;f++){var p=o.k?o.k(f):new n(l.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(h)>=0)){var d=this.g.mul(p);if(!d.isInfinity()){var m=d.getX(),y=m.umod(this.n);if(0!==y.cmpn(0)){var g=p.invm(this.n).mul(y.mul(e.getPrivate()).iadd(t));if(0!==(g=g.umod(this.n)).cmpn(0)){var v=(d.getY().isOdd()?1:0)|(0!==m.cmp(y)?2:0);return o.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),v^=1),new c({r:y,s:g,recoveryParam:v})}}}}}},h.prototype.verify=function(t,e,r,i){t=this._truncateToN(new n(t,16)),r=this.keyFromPublic(r,i);var o=(e=new c(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,u=a.invm(this.n),l=u.mul(t).umod(this.n),h=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(l,r.getPublic(),h)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(l,r.getPublic(),h)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(t,e,r,i){u((3&r)===r,"The recovery param is more than two bits"),e=new c(e,i);var o=this.n,a=new n(t),s=e.r,l=e.s,h=1&r,f=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");s=f?this.curve.pointFromX(s.add(this.curve.n),h):this.curve.pointFromX(s,h);var p=e.r.invm(o),d=o.sub(a).mul(p).umod(o),m=l.mul(p).umod(o);return this.g.mulAdd(d,s,m)},h.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new c(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},function(t,e,r){"use strict";var n=r(49),i=r(94),o=r(6);function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),r=i.toArray(t.nonce,t.nonceEnc||"hex"),n=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}t.exports=a,a.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=i.toArray(t,e),r=i.toArray(r,n),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},a.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(r),this._reseed++,i.encode(a,e)}},function(t,e,r){"use strict";var n=r(10),i=r(7).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,r){return e instanceof o?e:new o(t,{pub:e,pubEnc:r})},o.fromPrivate=function(t,e,r){return e instanceof o?e:new o(t,{priv:e,privEnc:r})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new n(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.validate()||i(t.validate(),"public point not validated"),t.mul(this.priv).getX()},o.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,r){"use strict";var n=r(10),i=r(7),o=i.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new n(t.r,16),this.s=new n(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=t[a],i>>>=0;return!(i<=127)&&(e.place=a,i)}function l(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function c(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}t.exports=a,a.prototype._importDER=function(t,e){t=i.toArray(t,e);var r=new s;if(48!==t[r.place++])return!1;var o=u(t,r);if(!1===o)return!1;if(o+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var a=u(t,r);if(!1===a)return!1;var l=t.slice(r.place,a+r.place);if(r.place+=a,2!==t[r.place++])return!1;var c=u(t,r);if(!1===c)return!1;if(t.length!==c+r.place)return!1;var h=t.slice(r.place,c+r.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new n(l),this.s=new n(h),this.recoveryParam=null,!0},a.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=l(e),r=l(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];c(n,e.length),(n=n.concat(e)).push(2),c(n,r.length);var o=n.concat(r),a=[48];return c(a,o.length),a=a.concat(o),i.encode(a,t)}},function(t,e,r){"use strict";var n=r(49),i=r(48),o=r(7),a=o.assert,s=o.parseBytes,u=r(303),l=r(304);function c(t){if(a("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof c))return new c(t);t=i[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=n.sha512}t.exports=c,c.prototype.sign=function(t,e){t=s(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),a=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),u=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},c.prototype.verify=function(t,e,r){t=s(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(i)).eq(o)},c.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},c.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},c.prototype.makeSignature=function(t){return t instanceof l?t:new l(this,t)},c.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},c.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),n=0!=(128&t[e]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},c.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(t){return o.intFromLE(t)},c.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,r){"use strict";var n=r(7),i=n.assert,o=n.parseBytes,a=n.cachedProperty;function s(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}s.fromPublic=function(t,e){return e instanceof s?e:new s(t,{pub:e})},s.fromSecret=function(t,e){return e instanceof s?e:new s(t,{secret:e})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(s,"privBytes",(function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),a(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},s.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},s.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),t)},s.prototype.getPublic=function(t){return n.encode(this.pubBytes(),t)},t.exports=s},function(t,e,r){"use strict";var n=r(10),i=r(7),o=i.assert,a=i.cachedProperty,s=i.parseBytes;function u(t,e){this.eddsa=t,"object"!=typeof e&&(e=s(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof n&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}a(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},function(t,e,r){"use strict";var n=r(99);e.certificate=r(312);var i=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=i;var o=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=o;var a=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}));e.PublicKey=a;var s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=u;var l=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=l;var c=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=c,e.DSAparam=n.define("DSAparam",(function(){this.int()}));var h=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=h;var f=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(t,e){},function(t,e,r){"use strict";const n=r(101),i=r(103),o=r(0);function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){const e=this.name;function r(t){this._initNamed(t,e)}return o(r,t),r.prototype._initNamed=function(e,r){t.call(this,e,r)},new r(this)},a.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},a.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},a.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(n[t])),this.encoders[t]},a.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},function(t,e,r){"use strict";const n=r(0),i=r(102);function o(t){i.call(this,t),this.enc="pem"}n(o,i),t.exports=o,o.prototype.encode=function(t,e){const r=i.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let t=0;t<r.length;t+=64)n.push(r.slice(t,t+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}},function(t,e,r){"use strict";const n=r(0),i=r(50).Buffer,o=r(104);function a(t){o.call(this,t),this.enc="pem"}n(a,o),t.exports=a,a.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,u=-1;for(let t=0;t<r.length;t++){const e=r[t].match(a);if(null!==e&&e[2]===n){if(-1!==s){if("END"!==e[1])break;u=t;break}if("BEGIN"!==e[1])break;s=t}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+n);const l=r.slice(s+1,u).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const c=i.from(l,"base64");return o.prototype.decode.call(this,c,e)}},function(t,e,r){"use strict";const n=e;n.Reporter=r(52).Reporter,n.DecoderBuffer=r(25).DecoderBuffer,n.EncoderBuffer=r(25).EncoderBuffer,n.Node=r(51)},function(t,e,r){"use strict";const n=e;n._reverse=function(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e},n.der=r(53)},function(t,e,r){"use strict";var n=r(99),i=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())})),u=n.define("RelativeDistinguishedName",(function(){this.setof(o)})),l=n.define("RDNSequence",(function(){this.seqof(u)})),c=n.define("Name",(function(){this.choice({rdnSequence:this.use(l)})})),h=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),f=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),p=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(c),this.key("validity").use(h),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),d=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())}));t.exports=d},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,e,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=r(28),s=r(42),u=r(1).Buffer;t.exports=function(t,e){var r,l=t.toString(),c=l.match(n);if(c){var h="aes"+c[1],f=u.from(c[2],"hex"),p=u.from(c[3].replace(/[\r\n]/g,""),"base64"),d=a(e,f.slice(0,8),parseInt(c[1],10)).key,m=[],y=s.createDecipheriv(h,d,f);m.push(y.update(p)),m.push(y.final()),r=u.concat(m)}else{var g=l.match(o);r=u.from(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(i)[1],data:r}}},function(t,e,r){var n=r(1).Buffer,i=r(46),o=r(47).ec,a=r(30),s=r(105);function u(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,r,l,c){var h=a(r);if("ec"===h.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(t,e,r){var n=s[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new o(n),a=r.data.subjectPrivateKey.data;return i.verify(e,t,a)}(t,e,h)}if("dsa"===h.type){if("dsa"!==l)throw new Error("wrong public key type");return function(t,e,r){var n=r.data.p,o=r.data.q,s=r.data.g,l=r.data.pub_key,c=a.signature.decode(t,"der"),h=c.s,f=c.r;u(h,o),u(f,o);var p=i.mont(n),d=h.invm(o);return 0===s.toRed(p).redPow(new i(e).mul(d).mod(o)).fromRed().mul(l.toRed(p).redPow(f.mul(d).mod(o)).fromRed()).mod(n).mod(o).cmp(f)}(t,e,h)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");e=n.concat([c,e]);for(var f=h.modulus.byteLength(),p=[1],d=0;e.length+p.length+2<f;)p.push(255),d++;p.push(0);for(var m=-1;++m<e.length;)p.push(e[m]);p=n.from(p);var y=i.mont(h.modulus);t=(t=new i(t).toRed(y)).redPow(new i(h.publicExponent)),t=n.from(t.fromRed().toArray());var g=d<8?1:0;for(f=Math.min(t.length,p.length),t.length!==p.length&&(g=1),m=-1;++m<f;)g|=t[m]^p[m];return 0===g}},function(t,e,r){(function(e){var n=r(47),i=r(317);t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function s(t,r,n){Array.isArray(t)||(t=t.toArray());var i=new e(t);if(n&&i.length<n){var o=new e(n-i.length);o.fill(0),i=e.concat([o,i])}return r?i.toString(r):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,r,n){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,r){r=r||"utf8",e.isBuffer(t)||(t=new e(t,r));var n=new i(t);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,r(4).Buffer)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(318).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=l(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],p=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:c[l-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,m=p>>>13,y=0|a[2],g=8191&y,v=y>>>13,_=0|a[3],b=8191&_,w=_>>>13,M=0|a[4],S=8191&M,x=M>>>13,E=0|a[5],O=8191&E,P=E>>>13,T=0|a[6],I=8191&T,L=T>>>13,R=0|a[7],C=8191&R,A=R>>>13,k=0|a[8],N=8191&k,j=k>>>13,F=0|a[9],D=8191&F,B=F>>>13,G=0|s[0],z=8191&G,U=G>>>13,q=0|s[1],V=8191&q,Y=q>>>13,Z=0|s[2],W=8191&Z,H=Z>>>13,X=0|s[3],K=8191&X,J=X>>>13,Q=0|s[4],$=8191&Q,tt=Q>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(l+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,z),i=(i=Math.imul(d,U))+Math.imul(m,z)|0,o=Math.imul(m,U);var gt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,U))+Math.imul(v,z)|0,o=Math.imul(v,U),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,Y)|0;var vt=(l+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;l=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,U))+Math.imul(w,z)|0,o=Math.imul(w,U),n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,W)|0,i=(i=i+Math.imul(d,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,U))+Math.imul(x,z)|0,o=Math.imul(x,U),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,H)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var bt=(l+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,U))+Math.imul(P,z)|0,o=Math.imul(P,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,U))+Math.imul(L,z)|0,o=Math.imul(L,U),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var Mt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,U))+Math.imul(A,z)|0,o=Math.imul(A,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var St=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,U))+Math.imul(j,z)|0,o=Math.imul(j,U),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0;var xt=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(B,z)|0,o=Math.imul(B,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Et=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Y))+Math.imul(B,V)|0,o=Math.imul(B,Y),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,at)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Ot=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,H))+Math.imul(B,W)|0,o=Math.imul(B,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,J)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Pt=(l+(n=n+Math.imul(g,dt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,J))+Math.imul(B,K)|0,o=Math.imul(B,J),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ft)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ft)|0;var Tt=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(B,$)|0,o=Math.imul(B,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,at)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var It=(l+(n=n+Math.imul(S,dt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(x,dt)|0))<<13)|0;l=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,lt)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(O,dt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,lt)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var Rt=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(j,ht)|0,o=o+Math.imul(j,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(A,dt)|0))<<13)|0;l=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(B,ht)|0,o=Math.imul(B,ft);var At=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((o=o+Math.imul(j,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863;var kt=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,mt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,mt))+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,u[0]=yt,u[1]=gt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=Mt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=Ot,u[11]=Pt,u[12]=Tt,u[13]=It,u[14]=Lt,u[15]=Rt,u[16]=Ct,u[17]=At,u[18]=kt,0!==l&&(u[19]=l,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],m=n[c+p],y=r[c+p+a],g=n[c+p+a],v=h*y-f*g;g=h*g+f*y,y=v,r[c+p]=d+y,n[c+p]=m+g,r[c+p+a]=d-y,n[c+p+a]=m-g,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(M,v),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return g[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var m=p,y=0;0!==m.cmp(s);y++)m=m.redSqr();n(y<d);var g=this.pow(h,new o(1).iushln(d-y-1));f=f.redMul(g),h=g.redSqr(),p=p.redMul(h),d=y}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new x(t)},i(x,S),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(9)(t))},function(t,e){},function(t,e,r){e.publicEncrypt=r(320),e.privateDecrypt=r(322),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}},function(t,e,r){var n=r(30),i=r(14),o=r(19),a=r(106),s=r(107),u=r(54),l=r(108),c=r(45),h=r(1).Buffer;t.exports=function(t,e,r){var f;f=t.padding?t.padding:r?1:4;var p,d=n(t);if(4===f)p=function(t,e){var r=t.modulus.byteLength(),n=e.length,l=o("sha1").update(h.alloc(0)).digest(),c=l.length,f=2*c;if(n>r-f-2)throw new Error("message too long");var p=h.alloc(r-n-f-2),d=r-c-1,m=i(c),y=s(h.concat([l,p,h.alloc(1,1),e],d),a(m,d)),g=s(m,a(y,c));return new u(h.concat([h.alloc(1),g,y],r))}(d,e);else if(1===f)p=function(t,e,r){var n,o=e.length,a=t.modulus.byteLength();if(o>a-11)throw new Error("message too long");n=r?h.alloc(a-o-3,255):function(t){var e,r=h.allocUnsafe(t),n=0,o=i(2*t),a=0;for(;n<t;)a===o.length&&(o=i(2*t),a=0),(e=o[a++])&&(r[n++]=e);return r}(a-o-3);return new u(h.concat([h.from([0,r?1:2]),n,h.alloc(1),e],a))}(d,e,r);else{if(3!==f)throw new Error("unknown padding");if((p=new u(e)).cmp(d.modulus)>=0)throw new Error("data too long for modulus")}return r?c(p,d):l(p,d)}},function(t,e){},function(t,e,r){var n=r(30),i=r(106),o=r(107),a=r(54),s=r(45),u=r(19),l=r(108),c=r(1).Buffer;t.exports=function(t,e,r){var h;h=t.padding?t.padding:r?1:4;var f,p=n(t),d=p.modulus.byteLength();if(e.length>d||new a(e).cmp(p.modulus)>=0)throw new Error("decryption error");f=r?l(new a(e),p):s(e,p);var m=c.alloc(d-f.length);if(f=c.concat([m,f],d),4===h)return function(t,e){var r=t.modulus.byteLength(),n=u("sha1").update(c.alloc(0)).digest(),a=n.length;if(0!==e[0])throw new Error("decryption error");var s=e.slice(1,a+1),l=e.slice(a+1),h=o(s,i(l,a)),f=o(l,i(h,r-a-1));if(function(t,e){t=c.from(t),e=c.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));var i=-1;for(;++i<n;)r+=t[i]^e[i];return r}(n,f.slice(0,a)))throw new Error("decryption error");var p=a;for(;0===f[p];)p++;if(1!==f[p++])throw new Error("decryption error");return f.slice(p)}(p,f);if(1===h)return function(t,e,r){var n=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var a=e.slice(2,i-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,f,r);if(3===h)return f;throw new Error("unknown padding")}},function(t,e,r){"use strict";(function(t,n){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=r(1),a=r(14),s=o.Buffer,u=o.kMaxLength,l=t.crypto||t.msCrypto,c=Math.pow(2,32)-1;function h(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function f(t,e,r){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>u)throw new RangeError("buffer too small")}function p(t,e,r,i){if(n.browser){var o=t.buffer,s=new Uint8Array(o,e,r);return l.getRandomValues(s),i?void n.nextTick((function(){i(null,t)})):t}if(!i)return a(r).copy(t,e),t;a(r,(function(r,n){if(r)return i(r);n.copy(t,e),i(null,t)}))}l&&l.getRandomValues||!n.browser?(e.randomFill=function(e,r,n,i){if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof r)i=r,r=0,n=e.length;else if("function"==typeof n)i=n,n=e.length-r;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return h(r,e.length),f(n,r,e.length),p(e,r,n,i)},e.randomFillSync=function(e,r,n){void 0===r&&(r=0);if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');h(r,e.length),void 0===n&&(n=e.length-r);return f(n,r,e.length),p(e,r,n)}):(e.randomFill=i,e.randomFillSync=i)}).call(this,r(5),r(3))},function(t,e,r){"use strict";var n=r(325),i=r(12),o=r(111),a=r(55),s=r(112),u=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(a[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(a[r]);this._dict_set=!0}}function c(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}l.prototype.push=function(t,e){var r,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(r=n.deflate(s,a))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),s.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=l,e.deflate=c,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},function(t,e,r){"use strict";var n,i=r(12),o=r(326),a=r(109),s=r(110),u=r(55);function l(t,e){return t.msg=u[e],e}function c(t){return(t<<1)-(t>4?9:0)}function h(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function p(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function d(t,e){t.pending_buf[t.pending++]=e}function m(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function y(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+258,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(r=e)+a]===d&&l[r+a-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do{}while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<f);if(n=258-(f-o),o=f-258,n>a){if(t.match_start=e,a=n,n>=s)break;p=l[o+a-1],d=l[o+a]}}}while((e=h[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function g(t){var e,r,n,o,u,l,c,h,f,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-262)){i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--r);e=r=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--r);o+=d}if(0===t.strm.avail_in)break;if(l=t.strm,c=t.window,h=t.strstart+t.lookahead,f=o,p=void 0,(p=l.avail_in)>f&&(p=f),r=0===p?0:(l.avail_in-=p,i.arraySet(c,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=a(l.adler,c,p,h):2===l.state.wrap&&(l.adler=s(l.adler,c,p,h)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function v(t,e){for(var r,n;;){if(t.lookahead<262){if(g(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}function _(t,e){for(var r,n,i;;){if(t.lookahead<262){if(g(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(p(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&p(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}function b(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):l(t,-2)}function S(t){var e,r=M(t);return 0===r&&((e=t.state).window_size=2*e.w_size,h(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function x(t,e,r,n,o,a){if(!t)return-2;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||8!==r||n<8||n>15||e<0||e>9||a<0||a>4)return l(t,-2);8===n&&(n=9);var u=new w;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,S(t)}n=[new b(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(g(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,p(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(p(t,!1),t.strm.avail_out),1)})),new b(4,4,8,4,v),new b(4,5,16,8,v),new b(4,6,32,32,v),new b(4,4,16,16,_),new b(8,16,32,32,_),new b(8,16,128,128,_),new b(8,32,128,256,_),new b(32,128,258,1024,_),new b(32,258,258,4096,_)],e.deflateInit=function(t,e){return x(t,e,8,15,8,0)},e.deflateInit2=x,e.deflateReset=S,e.deflateResetKeep=M,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var r,i,a,u;if(!t||!t.state||e>5||e<0)return t?l(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return l(t,0===t.avail_out?-5:-2);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,d(i,31),d(i,139),d(i,8),i.gzhead?(d(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),d(i,255&i.gzhead.time),d(i,i.gzhead.time>>8&255),d(i,i.gzhead.time>>16&255),d(i,i.gzhead.time>>24&255),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(d(i,255&i.gzhead.extra.length),d(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(d(i,0),d(i,0),d(i,0),d(i,0),d(i,0),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,3),i.status=113);else{var y=8+(i.w_bits-8<<4)<<8;y|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=32),y+=31-y%31,i.status=113,m(i,y),0!==i.strstart&&(m(i,t.adler>>>16),m(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending!==i.pending_buf_size));)d(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&f(t),i.pending+2<=i.pending_buf_size&&(d(i,255&t.adler),d(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(f(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&c(e)<=c(r)&&4!==e)return l(t,-5);if(666===i.status&&0!==t.avail_in)return l(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var v=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(g(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=258){if(g(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=t.strstart+258;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=258-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(h(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),f(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(d(i,255&t.adler),d(i,t.adler>>8&255),d(i,t.adler>>16&255),d(i,t.adler>>24&255),d(i,255&t.total_in),d(i,t.total_in>>8&255),d(i,t.total_in>>16&255),d(i,t.total_in>>24&255)):(m(i,t.adler>>>16),m(i,65535&t.adler)),f(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?l(t,-2):(t.state=null,113===e?l(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var r,n,o,s,u,l,c,f,p=e.length;if(!t||!t.state)return-2;if(2===(s=(r=t.state).wrap)||1===s&&42!==r.status||r.lookahead)return-2;for(1===s&&(t.adler=a(t.adler,e,p,0)),r.wrap=0,p>=r.w_size&&(0===s&&(h(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new i.Buf8(r.w_size),i.arraySet(f,e,p-r.w_size,r.w_size,0),e=f,p=r.w_size),u=t.avail_in,l=t.next_in,c=t.input,t.avail_in=p,t.next_in=0,t.input=e,g(r);r.lookahead>=3;){n=r.strstart,o=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=2,g(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=u,r.wrap=s,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,r){"use strict";var n=r(12);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var c=new Array(60);i(c);var h=new Array(512);i(h);var f=new Array(256);i(f);var p=new Array(29);i(p);var d,m,y,g=new Array(30);function v(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function _(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?h[t]:h[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function M(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function S(t,e,r){M(t,r[2*e],r[2*e+1])}function x(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function E(t,e,r){var n,i,o=new Array(16),a=0;for(n=1;n<=15;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=x(o[s]++,s))}}function O(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function P(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function I(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function L(t,e,r){var n,i,s,u,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===n?S(t,i,e):(S(t,(s=f[i])+256+1,e),0!==(u=o[s])&&M(t,i-=p[s],u),S(t,s=b(--n),r),0!==(u=a[s])&&M(t,n-=g[s],u))}while(l<t.last_lit);S(t,256,e)}function R(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)I(t,o,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,I(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,m=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)>d&&(o=d,m++),u[2*n+1]=o,n>l||(t.bl_count[o]++,a=0,n>=p&&(a=f[n-p]),s=u[2*n],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*n+1]+a)));if(0!==m){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,m-=2}while(m>0);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--r])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(t,e),E(o,l,t.bl_count)}function C(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function A(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<u&&i===a)){if(s<l)do{S(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(S(t,i,t.bl_tree),s--),S(t,16,t.bl_tree),M(t,s-3,2)):s<=10?(S(t,17,t.bl_tree),M(t,s-3,3)):(S(t,18,t.bl_tree),M(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}i(g);var k=!1;function N(t,e,r,i){M(t,0+(i?1:0),3),function(t,e,r,i){P(t),i&&(w(t,r),w(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}e._tr_init=function(t){k||(!function(){var t,e,r,n,i,u=new Array(16);for(r=0,n=0;n<28;n++)for(p[n]=r,t=0;t<1<<o[n];t++)f[r++]=n;for(f[r-1]=n,i=0,n=0;n<16;n++)for(g[n]=i,t=0;t<1<<a[n];t++)h[i++]=n;for(i>>=7;n<30;n++)for(g[n]=i<<7,t=0;t<1<<a[n]-7;t++)h[256+i++]=n;for(e=0;e<=15;e++)u[e]=0;for(t=0;t<=143;)l[2*t+1]=8,t++,u[8]++;for(;t<=255;)l[2*t+1]=9,t++,u[9]++;for(;t<=279;)l[2*t+1]=7,t++,u[7]++;for(;t<=287;)l[2*t+1]=8,t++,u[8]++;for(E(l,287,u),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=x(t,5);d=new v(l,o,257,286,15),m=new v(c,a,0,30,15),y=new v(new Array(0),s,0,19,7)}(),k=!0),t.l_desc=new _(t.dyn_ltree,d),t.d_desc=new _(t.dyn_dtree,m),t.bl_desc=new _(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,O(t)},e._tr_stored_block=N,e._tr_flush_block=function(t,e,r,n){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),R(t,t.l_desc),R(t,t.d_desc),a=function(t){var e;for(C(t,t.dyn_ltree,t.l_desc.max_code),C(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*u[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?N(t,e,r,n):4===t.strategy||o===i?(M(t,2+(n?1:0),3),L(t,l,c)):(M(t,4+(n?1:0),3),function(t,e,r,n){var i;for(M(t,e-257,5),M(t,r-1,5),M(t,n-4,4),i=0;i<n;i++)M(t,t.bl_tree[2*u[i]+1],3);A(t,t.dyn_ltree,e-1),A(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),L(t,t.dyn_ltree,t.dyn_dtree)),O(t),n&&P(t)},e._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(f[r]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){M(t,2,3),S(t,256,l),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,r){"use strict";var n=r(328),i=r(12),o=r(111),a=r(113),s=r(55),u=r(112),l=r(331),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);if(this.header=new l,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(s[r])}function f(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}h.prototype.push=function(t,e){var r,s,u,l,h,f=this.strm,p=this.options.chunkSize,d=this.options.dictionary,m=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(r=n.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&d&&(r=n.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===m&&(r=a.Z_OK,m=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(f.output,f.next_out),l=f.next_out-u,h=o.buf2string(f.output,u),f.next_out=l,f.avail_out=p-l,l&&i.arraySet(f.output,f.output,u,l,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,r){"use strict";var n=r(12),i=r(109),o=r(110),a=r(329),s=r(330);function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,c(t)):-2}function f(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,h(t))):-2}function p(t,e){var r,n;return t?(n=new l,t.state=n,n.window=null,0!==(r=f(t,e))&&(t.state=null),r):-2}var d,m,y=!0;function g(t){if(y){var e;for(d=new n.Buf32(512),m=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,m,0,t.work,{bits:5}),y=!1}t.lencode=d,t.lenbits=9,t.distcode=m,t.distbits=5}function v(t,e,r,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,e,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=h,e.inflateReset2=f,e.inflateResetKeep=c,e.inflateInit=function(t){return p(t,15)},e.inflateInit2=p,e.inflate=function(t,e){var r,l,c,h,f,p,d,m,y,_,b,w,M,S,x,E,O,P,T,I,L,R,C,A,k=0,N=new n.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(r=t.state).mode&&(r.mode=13),f=t.next_out,c=t.output,d=t.avail_out,h=t.next_in,l=t.input,p=t.avail_in,m=r.hold,y=r.bits,_=p,b=d,R=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(2&r.wrap&&35615===m){r.check=0,N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0),m=0,y=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&m)<<8)+(m>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&m)){t.msg="unknown compression method",r.mode=30;break}if(y-=4,L=8+(15&(m>>>=4)),0===r.wbits)r.wbits=L;else if(L>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<L,t.adler=r.check=1,r.mode=512&m?10:12,m=0,y=0;break;case 2:for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(r.flags=m,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=m>>8&1),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,y=0,r.mode=3;case 3:for(;y<32;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.head&&(r.head.time=m),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,N[2]=m>>>16&255,N[3]=m>>>24&255,r.check=o(r.check,N,4,0)),m=0,y=0,r.mode=4;case 4:for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.head&&(r.head.xflags=255&m,r.head.os=m>>8),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,y=0,r.mode=5;case 5:if(1024&r.flags){for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.length=m,r.head&&(r.head.extra_len=m),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,y=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((w=r.length)>p&&(w=p),w&&(r.head&&(L=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,l,h,w,L)),512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,r.length-=w),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break t;w=0;do{L=l[h+w++],r.head&&L&&r.length<65536&&(r.head.name+=String.fromCharCode(L))}while(L&&w<p);if(512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,L)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break t;w=0;do{L=l[h+w++],r.head&&L&&r.length<65536&&(r.head.comment+=String.fromCharCode(L))}while(L&&w<p);if(512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,L)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;y<16;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(m!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}m=0,y=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;y<32;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}t.adler=r.check=u(m),m=0,y=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=m,r.bits=y,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){m>>>=7&y,y-=7&y,r.mode=27;break}for(;y<3;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}switch(r.last=1&m,y-=1,3&(m>>>=1)){case 0:r.mode=14;break;case 1:if(g(r),r.mode=20,6===e){m>>>=2,y-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}m>>>=2,y-=2;break;case 14:for(m>>>=7&y,y-=7&y;y<32;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if((65535&m)!=(m>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&m,m=0,y=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(w=r.length){if(w>p&&(w=p),w>d&&(w=d),0===w)break t;n.arraySet(c,l,h,w,f),p-=w,h+=w,d-=w,f+=w,r.length-=w;break}r.mode=12;break;case 17:for(;y<14;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(r.nlen=257+(31&m),m>>>=5,y-=5,r.ndist=1+(31&m),m>>>=5,y-=5,r.ncode=4+(15&m),m>>>=4,y-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;y<3;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.lens[j[r.have++]]=7&m,m>>>=3,y-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},R=s(0,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,R){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;E=(k=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,O=65535&k,!((x=k>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(O<16)m>>>=x,y-=x,r.lens[r.have++]=O;else{if(16===O){for(A=x+2;y<A;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(m>>>=x,y-=x,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}L=r.lens[r.have-1],w=3+(3&m),m>>>=2,y-=2}else if(17===O){for(A=x+3;y<A;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}y-=x,L=0,w=3+(7&(m>>>=x)),m>>>=3,y-=3}else{for(A=x+7;y<A;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}y-=x,L=0,w=11+(127&(m>>>=x)),m>>>=7,y-=7}if(r.have+w>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;w--;)r.lens[r.have++]=L}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,C={bits:r.lenbits},R=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,R){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},R=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,R){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(p>=6&&d>=258){t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=m,r.bits=y,a(t,b),f=t.next_out,c=t.output,d=t.avail_out,h=t.next_in,l=t.input,p=t.avail_in,m=r.hold,y=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;E=(k=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,O=65535&k,!((x=k>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(E&&0==(240&E)){for(P=x,T=E,I=O;E=(k=r.lencode[I+((m&(1<<P+T)-1)>>P)])>>>16&255,O=65535&k,!(P+(x=k>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}m>>>=P,y-=P,r.back+=P}if(m>>>=x,y-=x,r.back+=x,r.length=O,0===E){r.mode=26;break}if(32&E){r.back=-1,r.mode=12;break}if(64&E){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&E,r.mode=22;case 22:if(r.extra){for(A=r.extra;y<A;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.length+=m&(1<<r.extra)-1,m>>>=r.extra,y-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;E=(k=r.distcode[m&(1<<r.distbits)-1])>>>16&255,O=65535&k,!((x=k>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(0==(240&E)){for(P=x,T=E,I=O;E=(k=r.distcode[I+((m&(1<<P+T)-1)>>P)])>>>16&255,O=65535&k,!(P+(x=k>>>24)<=y);){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}m>>>=P,y-=P,r.back+=P}if(m>>>=x,y-=x,r.back+=x,64&E){t.msg="invalid distance code",r.mode=30;break}r.offset=O,r.extra=15&E,r.mode=24;case 24:if(r.extra){for(A=r.extra;y<A;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}r.offset+=m&(1<<r.extra)-1,m>>>=r.extra,y-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===d)break t;if(w=b-d,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}w>r.wnext?(w-=r.wnext,M=r.wsize-w):M=r.wnext-w,w>r.length&&(w=r.length),S=r.window}else S=c,M=f-r.offset,w=r.length;w>d&&(w=d),d-=w,r.length-=w;do{c[f++]=S[M++]}while(--w);0===r.length&&(r.mode=21);break;case 26:if(0===d)break t;c[f++]=r.length,d--,r.mode=21;break;case 27:if(r.wrap){for(;y<32;){if(0===p)break t;p--,m|=l[h++]<<y,y+=8}if(b-=d,t.total_out+=b,r.total+=b,b&&(t.adler=r.check=r.flags?o(r.check,c,b,f-b):i(r.check,c,b,f-b)),b=d,(r.flags?m:u(m))!==r.check){t.msg="incorrect data check",r.mode=30;break}m=0,y=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;y<32;){if(0===p)break t;p--,m+=l[h++]<<y,y+=8}if(m!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}m=0,y=0}r.mode=29;case 29:R=1;break t;case 30:R=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=m,r.bits=y,(r.wsize||b!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&v(t,t.output,t.next_out,b-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,b-=t.avail_out,t.total_in+=_,t.total_out+=b,r.total+=b,r.wrap&&b&&(t.adler=r.check=r.flags?o(r.check,c,b,t.next_out-b):i(r.check,c,b,t.next_out-b)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===_&&0===b||4===e)&&0===R&&(R=-5),R)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?-2:(r.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,e,n,0)!==r.check?-3:v(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,r){"use strict";t.exports=function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g,v,_,b,w,M,S,x,E,O;r=t.state,n=t.next_in,E=t.input,i=n+(t.avail_in-5),o=t.next_out,O=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,f=r.window,p=r.hold,d=r.bits,m=r.lencode,y=r.distcode,g=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{d<15&&(p+=E[n++]<<d,d+=8,p+=E[n++]<<d,d+=8),_=m[p&g];e:for(;;){if(p>>>=b=_>>>24,d-=b,0===(b=_>>>16&255))O[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=m[(65535&_)+(p&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&_,(b&=15)&&(d<b&&(p+=E[n++]<<d,d+=8),w+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=E[n++]<<d,d+=8,p+=E[n++]<<d,d+=8),_=y[p&v];r:for(;;){if(p>>>=b=_>>>24,d-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=y[(65535&_)+(p&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(M=65535&_,d<(b&=15)&&(p+=E[n++]<<d,(d+=8)<b&&(p+=E[n++]<<d,d+=8)),(M+=p&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=b,d-=b,M>(b=o-a)){if((b=M-b)>c&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(S=0,x=f,0===h){if(S+=l-b,b<w){w-=b;do{O[o++]=f[S++]}while(--b);S=o-M,x=O}}else if(h<b){if(S+=l+h-b,(b-=h)<w){w-=b;do{O[o++]=f[S++]}while(--b);if(S=0,h<w){w-=b=h;do{O[o++]=f[S++]}while(--b);S=o-M,x=O}}}else if(S+=h-b,b<w){w-=b;do{O[o++]=f[S++]}while(--b);S=o-M,x=O}for(;w>2;)O[o++]=x[S++],O[o++]=x[S++],O[o++]=x[S++],w-=3;w&&(O[o++]=x[S++],w>1&&(O[o++]=x[S++]))}else{S=o-M;do{O[o++]=O[S++],O[o++]=O[S++],O[o++]=O[S++],w-=3}while(w>2);w&&(O[o++]=O[S++],w>1&&(O[o++]=O[S++]))}break}}break}}while(n<i&&o<s);n-=w=d>>3,p&=(1<<(d-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=p,r.bits=d}},function(t,e,r){"use strict";var n=r(12),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,u,l,c,h,f){var p,d,m,y,g,v,_,b,w,M=f.bits,S=0,x=0,E=0,O=0,P=0,T=0,I=0,L=0,R=0,C=0,A=null,k=0,N=new n.Buf16(16),j=new n.Buf16(16),F=null,D=0;for(S=0;S<=15;S++)N[S]=0;for(x=0;x<u;x++)N[e[r+x]]++;for(P=M,O=15;O>=1&&0===N[O];O--);if(P>O&&(P=O),0===O)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(E=1;E<O&&0===N[E];E++);for(P<E&&(P=E),L=1,S=1;S<=15;S++)if(L<<=1,(L-=N[S])<0)return-1;if(L>0&&(0===t||1!==O))return-1;for(j[1]=0,S=1;S<15;S++)j[S+1]=j[S]+N[S];for(x=0;x<u;x++)0!==e[r+x]&&(h[j[e[r+x]]++]=x);if(0===t?(A=F=h,v=19):1===t?(A=i,k-=257,F=o,D-=257,v=256):(A=a,F=s,v=-1),C=0,x=0,S=E,g=c,T=P,I=0,m=-1,y=(R=1<<P)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){_=S-I,h[x]<v?(b=0,w=h[x]):h[x]>v?(b=F[D+h[x]],w=A[k+h[x]]):(b=96,w=0),p=1<<S-I,E=d=1<<T;do{l[g+(C>>I)+(d-=p)]=_<<24|b<<16|w|0}while(0!==d);for(p=1<<S-1;C&p;)p>>=1;if(0!==p?(C&=p-1,C+=p):C=0,x++,0==--N[S]){if(S===O)break;S=e[r+h[x]]}if(S>P&&(C&y)!==m){for(0===I&&(I=P),g+=E,L=1<<(T=S-I);T+I<O&&!((L-=N[T+I])<=0);)T++,L<<=1;if(R+=1<<T,1===t&&R>852||2===t&&R>592)return 1;l[m=C&y]=P<<24|T<<16|g-c|0}}return 0!==C&&(l[g+C]=S-I<<24|64<<16|0),f.bits=P,0}},function(t,e,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,r){},function(t,e,r){var n,i;
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */window,void 0===(i="function"==typeof(n=function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],n=r.length;function i(t){var r=getComputedStyle(t);return r||e("Style returned "+r+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),r}var o,a=!1;function s(e){if(function(){if(!a){a=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var r=document.body||document.documentElement;r.appendChild(e);var n=i(e);o=200==Math.round(t(n.width)),s.isBoxSizeOuter=o,r.removeChild(e)}}(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var u=i(e);if("none"==u.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<n;e++)t[r[e]]=0;return t}();var l={};l.width=e.offsetWidth,l.height=e.offsetHeight;for(var c=l.isBorderBox="border-box"==u.boxSizing,h=0;h<n;h++){var f=r[h],p=u[f],d=parseFloat(p);l[f]=isNaN(d)?0:d}var m=l.paddingLeft+l.paddingRight,y=l.paddingTop+l.paddingBottom,g=l.marginLeft+l.marginRight,v=l.marginTop+l.marginBottom,_=l.borderLeftWidth+l.borderRightWidth,b=l.borderTopWidth+l.borderBottomWidth,w=c&&o,M=t(u.width);!1!==M&&(l.width=M+(w?0:m+_));var S=t(u.height);return!1!==S&&(l.height=S+(w?0:y+b)),l.innerWidth=l.width-(m+_),l.innerHeight=l.height-(y+b),l.outerWidth=l.width+g,l.outerHeight=l.height+v,l}}return s})?n.call(e,r,e,t):n)||(t.exports=i)},function(t,e,r){var n,i;
/*!
 * Unidragger v2.4.0
 * Draggable base class
 * MIT license
 */!function(o,a){n=[r(335)],void 0===(i=function(t){return function(t,e){"use strict";function r(){}var n=r.prototype=Object.create(e.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(e){for(var r=(e=void 0===e||e)?"addEventListener":"removeEventListener",n=e?this._touchActionValue:"",i=0;i<this.handles.length;i++){var o=this.handles[i];this._bindStartEvent(o,e),o[r]("click",this),t.PointerEvent&&(o.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var i={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(t){var e=i[t.target.nodeName],r=o[t.target.type],n=!e||r;return n||this._pointerReset(),n},n.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},n.pointerMove=function(t,e){var r=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,r]),this._dragMove(t,e,r)},n._dragPointerMove=function(t,e){var r={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(r)&&this._dragStart(t,e),r},n.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},n._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},n._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},n.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},n._dragMove=function(t,e,r){this.isDragging&&this.dragMove(t,e,r)},n.dragMove=function(t,e,r){t.preventDefault(),this.emitEvent("dragMove",[t,e,r])},n._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},n.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},n.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},n._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},r.getPointerPoint=e.getPointerPoint,r}(o,t)}.apply(e,n))||(t.exports=i)}(window)},function(t,e,r){var n,i;
/*!
 * Unipointer v2.4.0
 * base class for doing one thing with pointer event
 * MIT license
 */!function(o,a){n=[r(336)],void 0===(i=function(t){return function(t,e){"use strict";function r(){}var n=r.prototype=Object.create(e.prototype);n.bindStartEvent=function(t){this._bindStartEvent(t,!0)},n.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},n._bindStartEvent=function(e,r){var n=(r=void 0===r||r)?"addEventListener":"removeEventListener",i="mousedown";"ontouchstart"in t?i="touchstart":t.PointerEvent&&(i="pointerdown"),e[n](i,this)},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.getTouch=function(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.identifier==this.pointerIdentifier)return r}},n.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},n.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},n.onpointerdown=function(t){this._pointerDown(t,t)},n._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},n.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var i={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return n._bindPostStartEvents=function(e){if(e){var r=i[e.type];r.forEach((function(e){t.addEventListener(e,this)}),this),this._boundPointerEvents=r}},n._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach((function(e){t.removeEventListener(e,this)}),this),delete this._boundPointerEvents)},n.onmousemove=function(t){this._pointerMove(t,t)},n.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},n.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},n._pointerMove=function(t,e){this.pointerMove(t,e)},n.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},n.onmouseup=function(t){this._pointerUp(t,t)},n.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},n.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},n._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},n._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},n._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},n.pointerDone=function(){},n.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},n.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},n._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},n.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},r.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},r}(o,t)}.apply(e,n))||(t.exports=i)}(window)},function(t,e,r){var n,i;"undefined"!=typeof window&&window,void 0===(i="function"==typeof(n=function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var r=this._events=this._events||{},n=r[t]=r[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var r=this._onceEvents=this._onceEvents||{};return(r[t]=r[t]||{})[e]=!0,this}},e.off=function(t,e){var r=this._events&&this._events[t];if(r&&r.length){var n=r.indexOf(e);return-1!=n&&r.splice(n,1),this}},e.emitEvent=function(t,e){var r=this._events&&this._events[t];if(r&&r.length){r=r.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],i=0;i<r.length;i++){var o=r[i];n&&n[o]&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})?n.call(e,r,e,t):n)||(t.exports=i)},function(t,e,r){},function(t,e,r){var n=r(339).newImageData;function i(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,n){return e?new ImageData(t,r,n):{data:t,width:r,height:n}}return function(e){var n,i,o=e.buffers,a=e.meta,s=e.imageOps,u=e.width,l=e.height,c=o.length,h=o[0].byteLength;if(s){var f=new Array(c);for(i=0;i<c;++i)f[i]=r(new Uint8ClampedArray(o[i]),u,l);n=t(f,a).data}else{n=new Uint8ClampedArray(h);var p=new Array(c),d=new Array(c);for(i=0;i<c;++i)p[i]=new Uint8ClampedArray(o[i]),d[i]=[0,0,0,0];for(var m=0;m<h;m+=4){for(var y=0;y<c;++y){var g=p[y];d[y][0]=g[m],d[y][1]=g[m+1],d[y][2]=g[m+2],d[y][3]=g[m+3]}var v=t(d,a);n[m]=v[0],n[m+1]=v[1],n[m+2]=v[2],n[m+3]=v[3]}}return n.buffer}}function o(t,e){var r=Object.keys(t.lib||{}).map((function(e){return"var "+e+" = "+t.lib[e].toString()+";"})).concat(["var __minion__ = ("+i.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Blob(r,{type:"text/javascript"}),o=URL.createObjectURL(n),a=new Worker(o);return a.addEventListener("message",e),a}function a(t){var e;this._imageOps=!!t.imageOps;var r=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var n=0;n<e;++n)r[n]=o(t,this._onWorkerMessage.bind(this,n));else r[0]=function(t,e){var r=i(t.operation);return{postMessage:function(t){setTimeout((function(){e({data:{buffer:r(t),meta:t.meta}})}),0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}a.prototype.process=function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()},a.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},a.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},a.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map((function(t){return t.data.buffer})),i=this._workers.length;if(this._running=i,1===i)this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:r},n);else for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var u=s*a,l=[],c=0,h=n.length;c<h;++c)l.push(n[s].slice(u,u+a));this._workers[s].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:r},l)}}},a.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},a.prototype._resolveJob=function(){var t,e,r=this._job,i=this._workers.length;if(1===i)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=r.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var a=4*Math.ceil(o/4/i),s=0;s<i;++s){var u=this._dataLookup[s].buffer,l=s*a;t.set(new Uint8ClampedArray(u),l),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},r.callback(null,n(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()},t.exports=a},function(t,e){var r=!0;try{new ImageData(10,10)}catch(t){r=!1}var n=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,i){if(r)return new ImageData(t,e,i);var o=n.createImageData(e,i);return o.data.set(t),o}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"easeIn",(function(){return ba})),r.d(n,"easeOut",(function(){return wa})),r.d(n,"inAndOut",(function(){return Ma})),r.d(n,"linear",(function(){return Sa})),r.d(n,"upAndDown",(function(){return xa}));var i={};r.r(i),r.d(i,"WMC",(function(){return vp})),r.d(i,"KML",(function(){return _p})),r.d(i,"WMS",(function(){return bp})),r.d(i,"WFS",(function(){return wp})),r.d(i,"OGCAPIFeatures",(function(){return Mp})),r.d(i,"WMTS",(function(){return Sp})),r.d(i,"OSM",(function(){return xp})),r.d(i,"XYZ",(function(){return Ep})),r.d(i,"TMS",(function(){return Op})),r.d(i,"GeoJSON",(function(){return Pp})),r.d(i,"Vector",(function(){return Tp})),r.d(i,"MVT",(function(){return Ip})),r.d(i,"MBTiles",(function(){return Lp})),r.d(i,"MBTilesVector",(function(){return Rp})),r.d(i,"parse",(function(){return Ap})),r.d(i,"know",(function(){return kp})),r.d(i,"default",(function(){return Np}));var o={};r.r(o),r.d(o,"removeElement",(function(){return HS})),r.d(o,"remove",(function(){return XS})),r.d(o,"show",(function(){return KS})),r.d(o,"info",(function(){return JS})),r.d(o,"error",(function(){return QS})),r.d(o,"success",(function(){return $S})),r.d(o,"default",(function(){return tx}));var a={};r.r(a),r.d(a,"LEFT",(function(){return Px})),r.d(a,"CENTER",(function(){return Tx})),r.d(a,"RIGHT",(function(){return Ix})),r.d(a,"JUSTIFY",(function(){return Lx}));var s={};r.r(s),r.d(s,"TOP",(function(){return Rx})),r.d(s,"MIDDLE",(function(){return Cx})),r.d(s,"BOTTOM",(function(){return Ax})),r.d(s,"ALPHABETIC",(function(){return kx})),r.d(s,"HANGING",(function(){return Nx})),r.d(s,"IDEOGRAPHIC",(function(){return jx}));var u={};r.r(u),r.d(u,"POINT",(function(){return WF})),r.d(u,"LINE",(function(){return HF})),r.d(u,"POLYGON",(function(){return XF})),r.d(u,"MPOINT",(function(){return KF})),r.d(u,"MLINE",(function(){return JF})),r.d(u,"MPOLYGON",(function(){return QF})),r.d(u,"default",(function(){return $F}));r(222),r(223);var l=484813681109536e-20,c=Math.PI/2,h=.017453292519943295,f=57.29577951308232,p=Math.PI/4,d=2*Math.PI,m=3.14159265359,y={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},g={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},v=/[\s_\-\/\(\)]/g;function _(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),i=e.toLowerCase().replace(v,""),o=-1;++o<n.length;)if((r=n[o]).toLowerCase().replace(v,"")===i)return t[r]}var b=function(t){var e,r,n,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*h},lat_1:function(t){i.lat1=t*h},lat_2:function(t){i.lat2=t*h},lat_ts:function(t){i.lat_ts=t*h},lon_0:function(t){i.long0=t*h},lon_1:function(t){i.long1=t*h},lon_2:function(t){i.long2=t*h},alpha:function(t){i.alpha=parseFloat(t)*h},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*h},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=_(g,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*h},pm:function(t){var e=_(y,t);i.from_greenwich=(e||parseFloat(t))*h},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in o)r=o[e],e in a?"function"==typeof(n=a[e])?n(r):i[n]=r:i[e]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},w=function(t){return new T(t).output()},S=/\s/,x=/[A-Za-z]/,E=/[A-Za-z84_]/,O=/[,\]]/,P=/[\d\.E\-\+]/;function T(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function I(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,i=r.reduce((function(t,e){return L(e,t),t}),n);e&&(t[e]=i)}function L(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void L(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&L(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&L(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void I(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return L(t,e[r]);return I(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}T.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;S.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},T.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(O.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},T.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},T.prototype.number=function(t){if(!P.test(t)){if(O.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},T.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},T.prototype.keyword=function(t){if(E.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!O.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},T.prototype.neutral=function(t){if(x.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(P.test(t))return this.word=t,void(this.state=3);if(!O.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},T.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function R(t){return.017453292519943295*t}var C,A=function(t){var e=w(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var i={};return L(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var i=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",R],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",R],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",R],["lat0","latitude_of_origin",R],["lat0","standard_parallel_1",R],["lat1","standard_parallel_1",R],["lat2","standard_parallel_2",R],["azimuth","Azimuth"],["alpha","azimuth",R],["srsCode","name"]].forEach((function(e){return r=t,i=(n=e)[0],o=n[1],void(!(i in r)&&o in r&&(r[i]=r[o],3===n.length&&(r[i]=n[2](r[i]))));var r,n,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=R(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function k(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?k[t]=b(arguments[1]):k[t]=A(arguments[1]):k[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?k.apply(e,t):k(t)}));if("string"==typeof t){if(t in k)return k[t]}else"EPSG"in t?k["EPSG:"+t.EPSG]=t:"ESRI"in t?k["ESRI:"+t.ESRI]=t:"IAU2000"in t?k["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(C=k)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),C("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),C("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),C.WGS84=C["EPSG:4326"],C["EPSG:3785"]=C["EPSG:3857"],C.GOOGLE=C["EPSG:3857"],C["EPSG:900913"]=C["EPSG:3857"],C["EPSG:102113"]=C["EPSG:3857"];var N=k;var j=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var F=["3857","900913","3785","102113"];var D=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in N}(t))return N[t];if(function(t){return j.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=A(t);if(function(t){var e=_(t,"authority");if(e){var r=_(e,"epsg");return r&&F.indexOf(r)>-1}}(e))return N["EPSG:3857"];var r=function(t){var e=_(t,"extension");if(e)return _(e,"proj4")}(e);return r?b(r):e}return function(t){return"+"===t[0]}(t)?b(t):void 0},B=function(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t},G=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)},z=function(t){return t<0?-1:1},U=function(t){return Math.abs(t)<=m?t:t-z(t)*d},q=function(t,e,r){var n=t*r,i=.5*t;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(c-e))/n},V=function(t,e){for(var r,n,i=.5*t,o=c-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(o),o+=n=c-2*Math.atan(e*Math.pow((1-r)/(1+r),i))-o,Math.abs(n)<=1e-10)return o;return-9999};function Y(t){return t}var Z=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,i=t.y;if(i*f>90&&i*f<-90&&n*f>180&&n*f<-180)return null;if(Math.abs(Math.abs(i)-c)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*U(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(p+.5*i));else{var o=Math.sin(i),a=q(this.e,i,o);e=this.x0+this.a*this.k0*U(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,i=t.y-this.y0;if(this.sphere)r=c-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(r=V(this.e,o)))return null}return e=U(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Y,inverse:Y,names:["longlat","identity"]}],W={},H=[];function X(t,e){var r=H.length;return t.names?(H[r]=t,t.names.forEach((function(t){W[t.toLowerCase()]=r})),this):(console.log(e),!0)}var K={start:function(){Z.forEach(X)},add:X,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==W[e]&&H[W[e]]?H[W[e]]:void 0}},J={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Q=J.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};J.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var $={};$.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},$.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},$.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},$.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},$.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},$.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},$.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},$.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},$.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},$.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},$.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},$.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},$.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},$.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},$.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},$.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},$.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var tt=function(t,e,r,n,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=l,s.datum_params[4]*=l,s.datum_params[5]*=l,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=3,s.grids=a),s.a=r,s.b=n,s.es=i,s.ep2=o,s},et={};function rt(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:et[t]||null,isNull:!1}}function nt(t){return t/3600*Math.PI/180}function it(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function ot(t){return t.map((function(t){return[nt(t.longitudeShift),nt(t.latitudeShift)]}))}function at(t,e,r){return{name:it(t,e+8,e+16).trim(),parent:it(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function st(t,e,r,n){for(var i=e+176,o=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(i+16*a,n),longitudeShift:t.getFloat32(i+16*a+4,n),latitudeAccuracy:t.getFloat32(i+16*a+8,n),longitudeAccuracy:t.getFloat32(i+16*a+12,n)};o.push(s)}return o}function ut(t,e){if(!(this instanceof ut))return new ut(t);e=e||function(t){if(t)throw t};var r=D(t);if("object"==typeof r){var n=ut.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var i=_($,r.datumCode);i&&(r.datum_params=r.datum_params||(i.towgs84?i.towgs84.split(","):null),r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var o,a,s,u,l,c,h,f=function(t,e,r,n,i){if(!t){var o=_(J,n);o||(o=Q),t=o.a,e=o.b,r=o.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<1e-10)&&(i=!0,e=t),{a:t,b:e,rf:r,sphere:i}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(o=f.a,a=f.b,f.rf,s=r.R_A,c=((u=o*o)-(l=a*a))/u,h=0,s?(u=(o*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*o,c=0):h=Math.sqrt(c),{es:c,e:h,ep2:(u-l)/l}),d=function(t){return void 0===t?null:t.split(",").map(rt)}(r.nadgrids),m=r.datum||tt(r.datumCode,r.datum_params,f.a,f.b,p.es,p.ep2,d);B(this,r),B(this,n),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=m,this.init(),e(null,this)}else e(t)}else e(t)}ut.projections=K,ut.projections.start();var lt=ut;function ct(t,e,r){var n,i,o,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-c&&u>-1.001*c)u=-c;else if(u>c&&u<1.001*c)u=c;else{if(u<-c)return{x:-1/0,y:-1/0,z:t.z};if(u>c)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((n=r/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-e)+l)*i}}function ht(t,e,r,n){var i,o,a,s,u,l,h,f,p,d,m,y,g,v,_,b=t.x,w=t.y,M=t.z?t.z:0;if(i=Math.sqrt(b*b+w*w),o=Math.sqrt(b*b+w*w+M*M),i/r<1e-12){if(v=0,o/r<1e-12)return c,_=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,b);a=M/o,f=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),p=a*u,g=0;do{g++,l=e*(h=r/Math.sqrt(1-e*p*p))/(h+(_=i*f+M*p-h*(1-e*p*p))),y=(m=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*f-(d=s*(1-l)*u)*p,f=d,p=m}while(y*y>1e-24&&g<30);return{x:v,y:Math.atan(m/Math.abs(d)),z:_}}function ft(t){return 1===t||2===t}var pt=function(t,e,r){if(function(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}(t,e))return r;if(5===t.datum_type||5===e.datum_type)return r;var n=t.a,i=t.es;if(3===t.datum_type){if(0!==dt(t,!1,r))return;n=6378137,i=.0066943799901413165}var o=e.a,a=e.b,s=e.es;if(3===e.datum_type&&(o=6378137,a=6356752.314,s=.0066943799901413165),i===s&&n===o&&!ft(t.datum_type)&&!ft(e.datum_type))return r;if((r=ct(r,i,n),ft(t.datum_type)&&(r=function(t,e,r){if(1===e)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(2===e){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(r,t.datum_type,t.datum_params)),ft(e.datum_type)&&(r=function(t,e,r){if(1===e)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(2===e){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(r,e.datum_type,e.datum_params)),r=ht(r,s,o,a),3===e.datum_type)&&0!==dt(e,!0,r))return;return r};function dt(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){i=n;break}if(s.mandatory,null!==s.grid){var u=s.grid.subgrids[0],l=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,c=u.ll[0]-l,h=u.ll[1]-l,p=u.ll[0]+(u.lim[0]-1)*u.del[0]+l,d=u.ll[1]+(u.lim[1]-1)*u.del[1]+l;if(!(h>n.y||c>n.x||d<n.y||p<n.x||(i=mt(n,e,u),isNaN(i.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*f+" "+n.y*f+" tried: '"+o+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function mt(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var i={x:t.x,y:t.y};i.x-=r.ll[0],i.y-=r.ll[1],i.x=U(i.x-Math.PI)+Math.PI;var o=yt(i,r);if(e){if(isNaN(o.x))return n;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,u=9;do{if(s=yt(o,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=U(o.x+r.ll[0]),n.y=o.y+r.ll[1]}else isNaN(o.x)||(n.x=t.x+o.x,n.y=t.y+o.y);return n}function yt(t,e){var r,n={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(n.x),o=Math.floor(n.y),a=n.x-1*i,s=n.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;r=o*e.lim[0]+i;var l=e.cvs[r][0],c=e.cvs[r][1];r++;var h=e.cvs[r][0],f=e.cvs[r][1];r+=e.lim[0];var p=e.cvs[r][0],d=e.cvs[r][1];r--;var m=e.cvs[r][0],y=e.cvs[r][1],g=a*s,v=a*(1-s),_=(1-a)*(1-s),b=(1-a)*s;return u.x=_*l+v*h+b*m+g*p,u.y=_*c+v*f+b*y+g*d,u}var gt=function(t,e,r){var n,i,o,a=r.x,s=r.y,u=r.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==r.z)switch(0===o?(n=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(n=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(n=u,i="z"),t.axis[o]){case"e":l[i]=n;break;case"w":l[i]=-n;break;case"n":l[i]=n;break;case"s":l[i]=-n;break;case"u":void 0!==r[i]&&(l.z=n);break;case"d":void 0!==r[i]&&(l.z=-n);break;default:return null}return l},vt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function _t(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function bt(t,e,r,n){var i,o=void 0!==(r=Array.isArray(r)?vt(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(t){_t(t.x),_t(t.y)}(r),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type||3===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(r=bt(t,i=new lt("WGS84"),r,n),t=i),n&&"enu"!==t.axis&&(r=gt(t,!1,r)),"longlat"===t.projName)r={x:r.x*h,y:r.y*h,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=pt(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*f,y:r.y*f,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&"enu"!==e.axis?gt(e,!0,r):(o||delete r.z,r)}var wt=lt("WGS84");function Mt(t,e,r,n){var i,o,a;return Array.isArray(r)?(i=bt(t,e,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(r.splice(3)):[i.x,i.y,r[2]].concat(r.splice(3)):[i.x,i.y].concat(r.splice(2)):[i.x,i.y]):(o=bt(t,e,r,n),2===(a=Object.keys(r)).length||a.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;o[n]=r[n]})),o)}function St(t){return t instanceof lt?t:t.oProj?t.oProj:lt(t)}var xt=function(t,e,r){t=St(t);var n,i=!1;return void 0===e?(e=t,t=wt,i=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=wt,i=!0),e=St(e),r?Mt(t,e,r):(n={forward:function(r,n){return Mt(t,e,r,n)},inverse:function(r,n){return Mt(e,t,r,n)}},i&&(n.oProj=e),n)},Et=79,Ot={forward:Pt,inverse:function(t){var e=Rt(kt(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Tt};function Pt(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,d=t.northing,m=t.zoneNumber,y=At(m),g=Math.floor(p/1e5),v=Math.floor(d/1e5)%20,i=g,o=v,a=y,s=a-1,u="AJSAJS".charCodeAt(s),l="AFAFAF".charCodeAt(s),c=u+i-1,h=l+o,f=!1,c>90&&(c=c-90+65-1,f=!0),(73===c||u<73&&c>73||(c>73||u<73)&&f)&&c++,(c===Et||u<Et&&c>Et||(c>Et||u<Et)&&f)&&73==++c&&c++,c>90&&(c=c-90+65-1),h>86?(h=h-86+65-1,f=!0):f=!1,(73===h||l<73&&h>73||(h>73||l<73)&&f)&&h++,(h===Et||l<Et&&h>Et||(h>Et||l<Et)&&f)&&73==++h&&h++,h>86&&(h=h-86+65-1),String.fromCharCode(c)+String.fromCharCode(h))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var i,o,a,s,u,l,c,h,f;var p,d,m,y,g,v}(function(t){var e,r,n,i,o,a,s,u=t.lat,l=t.lon,c=6378137,h=It(u),f=It(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=It(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),r=Math.tan(h)*Math.tan(h),n=.006739496752268451*Math.cos(h)*Math.cos(h),i=Math.cos(h)*(f-a),o=c*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var p=.9996*e*(i+(1-r+n)*i*i*i/6+(5-18*r+r*r+72*n-.39089081163157013)*i*i*i*i*i/120)+5e5,d=.9996*(o+e*Math.tan(h)*(i*i/2+(5-r+9*n+4*n*n)*i*i*i*i/24+(61-58*r+r*r+600*n-2.2240339282485886)*i*i*i*i*i*i/720));u<0&&(d+=1e7);return{northing:Math.round(d),easting:Math.round(p),zoneNumber:s,zoneLetter:Ct(u)}}({lat:t[1],lon:t[0]}),e)}function Tt(t){var e=Rt(kt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function It(t){return t*(Math.PI/180)}function Lt(t){return t/Math.PI*180}function Rt(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=r-5e5,y=e;n<"N"&&(y-=1e7),c=6*(i-1)-180+3,f=(h=y/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*h)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*h)+151*d*d*d/96*Math.sin(6*h),o=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=m/(.9996*o);var g=f-o*Math.tan(f)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);g=Lt(g);var v,_=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(f);if(_=c+Lt(_),t.accuracy){var b=Rt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:b.lat,right:b.lon,bottom:g,left:_}}else v={lat:g,lon:_};return v}function Ct(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function At(t){var e=t%6;return 0===e&&(e=6),e}function kt(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(o,o+=2);for(var u=At(a),l=function(t,e){var r="AJSAJS".charCodeAt(e-1),n=1e5,i=!1;for(;r!==t.charCodeAt(0);){if(73===++r&&r++,r===Et&&r++,r>90){if(i)throw"Bad character: "+t;r=65,i=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r="AFAFAF".charCodeAt(e-1),n=0,i=!1;for(;r!==t.charCodeAt(0);){if(73===++r&&r++,r===Et&&r++,r>86){if(i)throw"Bad character: "+t;r=65,i=!0}n+=1e5}return n}(n.charAt(1),u);c<Nt(s);)c+=2e6;var h=r-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,m=h/2,y=0,g=0;return m>0&&(f=1e5/Math.pow(10,m),p=t.substring(o,o+m),y=parseFloat(p)*f,d=t.substring(o+m),g=parseFloat(d)*f),{easting:y+l,northing:g+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function Nt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function jt(t,e,r){if(!(this instanceof jt))return new jt(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}jt.fromMGRS=function(t){return new jt(Tt(t))},jt.prototype.toMGRS=function(t){return Pt([this.x,this.y],t)};var Ft=jt,Dt=.01068115234375,Bt=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Dt))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*Dt)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),r*=t,e[3]=r*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e},Gt=function(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},zt=function(t,e,r){for(var n=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(Gt(i,a,Math.cos(i),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<1e-10)return i}return i};var Ut={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Bt(this.es),this.ml0=Gt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,i=t.x,o=t.y,a=U(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>1e-10?Math.tan(o):0,d=Math.pow(p,2),m=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var y=Gt(o,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+m+14*h-58*d*h+c/42*(61+179*m-m*d-479*d)))))+this.x0,n=this.a*(this.k0*(y-this.ml0+s*a*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+m-58*d+270*h-330*d*h+c/56*(1385+543*m-m*d-3111*d))))))+this.y0}else{var g=u*Math.sin(a);if(Math.abs(Math.abs(g)-1)<1e-10)return 93;if(r=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(n))>=1){if(g-1>1e-10)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,r=zt(e,this.es,this.en),Math.abs(r)<c){var s=Math.sin(r),u=Math.cos(r),l=Math.abs(u)>1e-10?Math.tan(r):0,h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.pow(l,2),d=Math.pow(p,2);e=1-this.es*Math.pow(s,2);var m=o*Math.sqrt(e)/this.k0,y=Math.pow(m,2);n=r-(e*=l)*y/(1-this.es)*.5*(1-y/12*(5+3*p-9*h*p+h-4*f-y/30*(61+90*p-252*h*p+45*d+46*h-y/56*(1385+3633*p+4095*d+1574*d*p)))),i=U(this.long0+m*(1-y/6*(1+2*p+h-y/20*(5+28*p+24*d+8*h*p+6*h-y/42*(61+662*p+1320*d+720*d*p))))/u)}else n=c*z(a),i=0;else{var g=Math.exp(o/this.k0),v=.5*(g-1/g),_=this.lat0+a/this.k0,b=Math.cos(_);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),n=Math.asin(e),a<0&&(n=-n),i=0===v&&0===b?0:U(Math.atan2(v,b)+this.long0)}return t.x=i,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},qt=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Vt=function(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},Yt=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(Vt(1,e)+1))),t<0?-e:e},Zt=function(t,e){for(var r,n=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return e+r*Math.sin(2*e)},Wt=function(t,e,r){for(var n,i,o=Math.sin(e),a=Math.cos(e),s=qt(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,m=0;--h>=0;)n=d,i=p,f=l*(d=f)-n-c*(p=m)+t[h],m=c*d-i+l*p;return[(l=o*u)*f-(c=a*s)*m,l*m+c*f]};var Ht={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ut.init.apply(this),this.forward=Ut.forward,this.inverse=Ut.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var n=Zt(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=U(t.x-this.long0),r=t.y;r=Zt(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),o=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*i),e=Math.atan2(o*i,Vt(n,i*a)),e=Yt(Math.tan(e));var s,u,l=Wt(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=Wt(this.utg,2*i,2*n);i+=o[0],n+=o[1],n=Math.atan(qt(n));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(n),l=Math.cos(n);i=Math.atan2(a*l,Vt(u,l*s)),n=Math.atan2(u,l*s),e=U(n+this.long0),r=Zt(this.cgb,i)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var Xt={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(U(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*h,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ht.init.apply(this),this.forward=Ht.forward,this.inverse=Ht.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Kt=function(t,e){return Math.pow((1-t)/(1+t),e)};var Jt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+p)/(Math.pow(Math.tan(.5*this.lat0+p),this.C)*Kt(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+p),this.C)*Kt(this.e*Math.sin(r),this.ratexp))-c,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+p)/this.K,1/this.C),i=20;i>0&&(r=2*Math.atan(n*Kt(this.e*Math.sin(t.y),-.5*this.e))-c,!(Math.abs(r-t.y)<1e-14));--i)t.y=r;return i?(t.x=e,t.y=r,t):null},names:["gauss"]};var Qt={init:function(){Jt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,i;return t.x=U(t.x-this.long0),Jt.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=i*r*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),r=Math.cos(a),i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*r-t.y*this.sinc0*e)}else i=this.phic0,n=0;return t.x=n,t.y=i,Jt.inverse.apply(this,[t]),t.x=U(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var $t={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+z(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/q(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=G(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-c,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,i,o,a,s=t.x,u=t.y,l=Math.sin(u),h=Math.cos(u),f=U(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=1e-10&&Math.abs(u+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*h*Math.cos(f)),t.x=this.a*e*h*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*h*Math.cos(f))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,l,this.e))-c,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=1e-10?(o=q(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+i*Math.cos(f)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(f))),t.y=e*(this.cosX0*n-this.sinX0*i*Math.cos(f))+this.y0),t.x=e*i*Math.sin(f)+this.x0,t))},inverse:function(t){var e,r,n,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=1e-10?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?U(this.long0+Math.atan2(t.x,-1*t.y)):U(this.long0+Math.atan2(t.x,t.y)):U(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=1e-10){if(a<=1e-10)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*V(this.e,n),e=this.con*U(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=1e-10?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=U(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),r=-1*V(this.e,Math.tan(.5*(c+o)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(c+t))*Math.pow((1-e)/(1+e),.5*r)}};var te={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]};var ee={init:function(){var t,e,r,n,i,o,a,s,u,l,f,m,y,g=0,v=0,_=0,b=0,w=0,M=0,S=0;this.no_off=(y="object"==typeof(m=this).PROJECTION?Object.keys(m.PROJECTION)[0]:m.PROJECTION,"no_uoff"in m||"no_off"in m||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(y)),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var E=!1;if("rectified_grid_angle"in this&&(E=!0),x&&(S=this.alpha),E&&(g=this.rectified_grid_angle*h),x||E)v=this.longc;else if(_=this.long1,w=this.lat1,b=this.long2,M=this.lat2,Math.abs(w-M)<=1e-7||(t=Math.abs(w))<=1e-7||Math.abs(t-c)<=1e-7||Math.abs(Math.abs(this.lat0)-c)<=1e-7||Math.abs(Math.abs(M)-c)<=1e-7)throw new Error;var O=1-this.es;e=Math.sqrt(O),Math.abs(this.lat0)>1e-10?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*e/t,(i=(n=this.B*e/(r*Math.sqrt(t)))*n-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(q(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=i=1),x||E?(x?(f=Math.asin(Math.sin(S)/n),E||(g=S)):(f=g,S=Math.asin(n*Math.sin(f))),this.lam0=v-Math.asin(.5*(i-1/i)*Math.tan(f))/this.B):(o=Math.pow(q(this.e,w,Math.sin(w)),this.B),a=Math.pow(q(this.e,M,Math.sin(M)),this.B),i=this.E/o,u=(a-o)/(a+o),l=((l=this.E*this.E)-a*o)/(l+a*o),(t=_-b)<-Math.pi?b-=d:t>Math.pi&&(b+=d),this.lam0=U(.5*(_+b)-Math.atan(l*Math.tan(.5*this.B*(_-b))/u)/this.B),f=Math.atan(2*Math.sin(this.B*U(_-this.lam0))/(i-1/i)),g=S=Math.asin(n*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(g),this.cosrot=Math.cos(g),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(p-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(p+i))},forward:function(t){var e,r,n,i,o,a,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-c)>1e-10){if(e=.5*((o=this.E/Math.pow(q(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),r=.5*(o+a),i=Math.sin(this.B*t.x),n=(e*this.singam-i*this.cosgam)/r,Math.abs(Math.abs(n)-1)<1e-10)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<1e-7?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,r,n,i,o,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((n=Math.exp(-this.BrA*r))-1/n),o=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<1e-10)u.x=0,u.y=s<0?-c:c;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=V(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var re={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=G(this.e,e,r),i=q(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=G(this.e,o,a),u=q(this.e,this.lat2,o),l=q(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(n/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=1e-10&&(r=z(r)*(c-2e-10));var n,i,o=Math.abs(Math.abs(r)-c);if(o>1e-10)n=q(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((o=r*this.ns)<=0)return null;i=0}var a=this.ns*U(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(i=V(this.e,n)))return null}else i=-c;return o=U(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var ne={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y,c=U(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},ie=function(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)},oe=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},ae=function(t){return.375*t*(1+.25*t*(1+.46875*t))},se=function(t){return.05859375*t*t*(1+.75*t)},ue=function(t){return t*t*t*(35/3072)},le=function(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)},ce=function(t){return Math.abs(t)<c?t:t-z(t)*Math.PI},he=function(t,e,r,n,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var fe={init:function(){this.sphere||(this.e0=oe(this.es),this.e1=ae(this.es),this.e2=se(this.es),this.e3=ue(this.es),this.ml0=this.a*ie(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,i=t.y;if(n=U(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=le(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=n*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),r=this.a*ie(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(o))}else{var a=this.ml0/this.a+i,s=he(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-c)<=1e-10)return t.x=this.long0,t.y=c,i<0&&(t.y*=-1),t;var u=le(this.a,this.e,Math.sin(s)),l=u*u*u/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(s),2),f=n*this.a/u,p=f*f;e=s-u*Math.tan(s)/l*f*f*(.5-(1+3*h)*f*f/24),r=f*(1-p*(h/3+(1+3*h)*h*p/15))/Math.cos(s)}return t.x=U(r+this.long0),t.y=ce(e),t},names:["Cassini","Cassini_Soldner","cass"]},pe=function(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e};var de={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-c)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=pe(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=.3333333333333333*t,e=t*t,r[0]+=.17222222222222222*e,r[1]=.06388888888888888*e,e*=t,r[0]+=.10257936507936508*e,r[1]+=.0664021164021164*e,r[2]=.016415012942191543*e,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=pe(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,i,o,a,s,u,l,h,f=t.x,d=t.y;if(f=U(f-this.long0),this.sphere){if(o=Math.sin(d),h=Math.cos(d),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+h*n:1+this.sinph0*o+this.cosph0*h*n)<=1e-10)return null;e=(r=Math.sqrt(2/r))*h*Math.sin(f),r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*h*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<1e-10)return null;r=p-.5*d,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,u=0,l=0,n=Math.cos(f),i=Math.sin(f),o=Math.sin(d),a=pe(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=c+d,a=this.qp-a;break;case this.S_POLE:l=d-c,a=this.qp+a}if(Math.abs(l)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*i,r=n*(this.mode===this.S_POLE?l:-l)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,i,o,a,s,u,l,h,f=t.x/this.a,p=t.y/this.a;if(this.sphere){var d,m=0,y=0;if((r=.5*(d=Math.sqrt(f*f+p*p)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(r),m=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(d)<=1e-10?0:Math.asin(p*y/d),f*=y,p=m*d;break;case this.OBLIQ:r=Math.abs(d)<=1e-10?this.lat0:Math.asin(m*this.sinph0+p*y*this.cosph0/d),f*=y*this.cosph0,p=(m-Math.sin(r)*this.sinph0)*d;break;case this.N_POLE:p=-p,r=c-r;break;case this.S_POLE:r-=c}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(a=Math.sqrt(f*f+p*p))<1e-10)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),n=Math.cos(i),f*=i=Math.sin(i),this.mode===this.OBLIQ?(s=n*this.sinb1+p*i*this.cosb1/a,o=this.qp*s,p=a*this.cosb1*n-p*this.sinb1*i):(s=p*i/a,o=this.qp*s,p=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(o=f*f+p*p))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(f,p),u=Math.asin(s),l=this.apa,h=u+u,r=u+l[0]*Math.sin(h)+l[1]*Math.sin(h+h)+l[2]*Math.sin(h+h+h)}return t.x=U(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},me=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var ye={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=G(this.e3,this.sin_po,this.cos_po),this.qs1=pe(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=G(this.e3,this.sin_po,this.cos_po),this.qs2=pe(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=pe(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=pe(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*U(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,0!==e&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),o=U(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,i,o,a=me(.5*e);if(t<1e-10)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(n=t*(r=Math.sin(a)))*n)*i/Math.cos(a)*(e/(1-s)-r/i+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return a;return null}};var ge={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=U(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),1,(o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=1e-10?(a=this.x0+1*this.a*r*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)/o):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),r=Math.sin(i),n=Math.cos(i),a=me(n*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),o=U(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};var ve={init:function(){this.sphere||(this.k0=G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,i=t.y,o=U(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=pe(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=U(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*c:c;for(var n,i,o,a,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=n=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=U(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var _e={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=U(e-this.long0),i=ce(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,r=t.y;return t.x=U(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ce(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var be={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=oe(this.es),this.e1=ae(this.es),this.e2=se(this.es),this.e3=ue(this.es),this.ml0=this.a*ie(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,i=t.x,o=t.y,a=U(i-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),r=this.a*(ce(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=1e-10)e=this.a*a,r=-1*this.ml0;else{var s=le(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(n),r=this.a*ie(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,i,o,a,s,u,l;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)e=U(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+i/this.a,s=n*n/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=1e-10){r=u;break}e=U(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=1e-10)r=0,e=U(this.long0+n/this.a);else{var h,f,p,d,m;for(a=(this.ml0+i)/this.a,s=n*n/this.a/this.a+a*a,u=a,o=20;o;--o)if(m=this.e*Math.sin(u),h=Math.sqrt(1-m*m)*Math.tan(u),f=this.a*ie(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=1e-10){r=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=U(this.long0+Math.asin(n*h/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var we={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,i=r-this.long0,o=n/l*1e-5,a=i,s=1,u=0;for(e=1;e<=10;e++)s*=o,u+=this.A[e]*s;var c,h=u,f=a,p=1,d=0,m=0,y=0;for(e=1;e<=6;e++)c=d*h+p*f,p=p*h-d*f,d=c,m=m+this.B_re[e]*p-this.B_im[e]*d,y=y+this.B_im[e]*p+this.B_re[e]*d;return t.x=y*this.a+this.x0,t.y=m*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,i=t.y,o=n-this.x0,a=(i-this.y0)/this.a,s=o/this.a,u=1,c=0,h=0,f=0;for(e=1;e<=6;e++)r=c*a+u*s,u=u*a-c*s,c=r,h=h+this.C_re[e]*u-this.C_im[e]*c,f=f+this.C_im[e]*u+this.C_re[e]*c;for(var p=0;p<this.iterations;p++){var d,m=h,y=f,g=a,v=s;for(e=2;e<=6;e++)d=y*h+m*f,m=m*h-y*f,y=d,g+=(e-1)*(this.B_re[e]*m-this.B_im[e]*y),v+=(e-1)*(this.B_im[e]*m+this.B_re[e]*y);m=1,y=0;var _=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)d=y*h+m*f,m=m*h-y*f,y=d,_+=e*(this.B_re[e]*m-this.B_im[e]*y),b+=e*(this.B_im[e]*m+this.B_re[e]*y);var w=_*_+b*b;h=(g*_+v*b)/w,f=(v*_-g*b)/w}var M=h,S=f,x=1,E=0;for(e=1;e<=9;e++)x*=M,E+=this.D[e]*x;var O=this.lat0+E*l*1e5,P=this.long0+S;return t.x=P,t.y=O,t},names:["New_Zealand_Map_Grid","nzmg"]};var Me={init:function(){},forward:function(t){var e=t.x,r=t.y,n=U(e-this.long0),i=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=U(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]};var Se={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Bt(this.es)},forward:function(t){var e,r,n=t.x,i=t.y;if(n=U(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);r=this.a*Gt(i,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=me((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=me(Math.sin(e)/this.n)),n=U(n+this.long0),e=ce(e)):(e=zt(t.y/this.a,this.es,this.en),(i=Math.abs(e))<c?(i=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),n=U(r)):i-1e-10<c&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var xe={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=U(e-this.long0),i=r,o=Math.PI*Math.sin(r);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<1e-10)break}i/=2,Math.PI/2-Math.abs(r)<1e-10&&(n=0);var s=.900316316158*this.a*n*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=U(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return t.x=n,t.y=i,t},names:["Mollweide","moll"]};var Ee={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=oe(this.es),this.e1=ae(this.es),this.e2=se(this.es),this.e3=ue(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=G(this.e,this.sinphi,this.cosphi),this.ml1=ie(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=G(this.e,this.sinphi,this.cosphi),this.ml2=ie(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ie(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var i=ie(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-i)}var o=this.ns*U(r-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==r&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=U(this.long0+o/this.ns),n=ce(this.g-r/this.a),t.x=i,t.y=n,t;var a=this.g-r/this.a;return n=he(a,this.e0,this.e1,this.e2,this.e3),i=U(this.long0+o/this.ns),t.x=i,t.y=n,t},names:["Equidistant_Conic","eqdc"]};var Oe={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,i=t.y,o=U(n-this.long0);Math.abs(i)<=1e-10&&(e=this.x0+this.R*o,r=this.y0);var a=me(2*Math.abs(i/Math.PI));(Math.abs(o)<=1e-10||Math.abs(Math.abs(i)-c)<=1e-10)&&(e=this.x0,r=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,l=Math.sin(a),h=Math.cos(a),f=h/(l+h-1),p=f*f,d=f*(2/l-1),m=d*d,y=Math.PI*this.R*(s*(f-m)+Math.sqrt(u*(f-m)*(f-m)-(m+u)*(p-m)))/(m+u);o<0&&(y=-y),e=this.x0+y;var g=u+f;return y=Math.PI*this.R*(d*g-s*Math.sqrt((m+u)*(u+1)-g*g))/(m+u),r=i>=0?this.y0+y:this.y0-y,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(n=t.x/h)*n+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,r=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<1e-10?this.long0:U(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Pe={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u,l,h,f,p,d,m,y,g,v,_,b,w,M,S,x=t.x,E=t.y,O=Math.sin(t.y),P=Math.cos(t.y),T=U(x-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(c-E)*Math.sin(T),t.y=this.y0-this.a*(c-E)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(c+E)*Math.sin(T),t.y=this.y0+this.a*(c+E)*Math.cos(T),t):(_=this.sin_p12*O+this.cos_p12*P*Math.cos(T),v=(g=Math.acos(_))?g/Math.sin(g):1,t.x=this.x0+this.a*v*P*Math.sin(T),t.y=this.y0+this.a*v*(this.cos_p12*O-this.sin_p12*P*Math.cos(T)),t):(e=oe(this.es),r=ae(this.es),n=se(this.es),i=ue(this.es),Math.abs(this.sin_p12-1)<=1e-10?(o=this.a*ie(e,r,n,i,c),a=this.a*ie(e,r,n,i,E),t.x=this.x0+(o-a)*Math.sin(T),t.y=this.y0-(o-a)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=1e-10?(o=this.a*ie(e,r,n,i,c),a=this.a*ie(e,r,n,i,E),t.x=this.x0+(o+a)*Math.sin(T),t.y=this.y0+(o+a)*Math.cos(T),t):(s=O/P,u=le(this.a,this.e,this.sin_p12),l=le(this.a,this.e,O),h=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*P)),b=0===(f=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(f)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(T)*Math.cos(h)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),g=u*b*(1-(w=b*b)*(y=(d=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*d)*(1-y)/6+(M=w*b)/8*(m=p*d)*(1-2*y)+(S=M*b)/120*(y*(4-7*y)-3*p*p*(1-7*y))-S*b/48*m),t.x=this.x0+g*Math.sin(f),t.y=this.y0+g*Math.cos(f),t))},inverse:function(t){var e,r,n,i,o,a,s,u,l,h,f,p,d,m,y,g,v,_,b,w,M,S,x;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*c*this.a)return;return r=e/this.a,n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(e)<=1e-10?a=this.lat0:(a=me(i*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-c,o=Math.abs(s)<=1e-10?this.lat0>=0?U(this.long0+Math.atan2(t.x,-t.y)):U(this.long0-Math.atan2(-t.x,t.y)):U(this.long0+Math.atan2(t.x*n,e*this.cos_p12*i-t.y*this.sin_p12*n))),t.x=o,t.y=a,t}return u=oe(this.es),l=ae(this.es),h=se(this.es),f=ue(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*ie(u,l,h,f,c),e=Math.sqrt(t.x*t.x+t.y*t.y),a=he((p-e)/this.a,u,l,h,f),o=U(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*ie(u,l,h,f,c),e=Math.sqrt(t.x*t.x+t.y*t.y),a=he((e-p)/this.a,u,l,h,f),o=U(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),d=le(this.a,this.e,this.sin_p12),g=Math.cos(y),_=-(v=this.e*this.cos_p12*g)*v/(1-this.es),b=3*this.es*(1-_)*this.sin_p12*this.cos_p12*g/(1-this.es),S=1-_*(M=(w=e/d)-_*(1+_)*Math.pow(w,3)/6-b*(1+3*_)*Math.pow(w,4)/24)*M/2-w*M*M*M/6,m=Math.asin(this.sin_p12*Math.cos(M)+this.cos_p12*Math.sin(M)*g),o=U(this.long0+Math.asin(Math.sin(y)*Math.sin(M)/Math.cos(m))),x=Math.sin(m),a=Math.atan2((x-this.es*S*this.sin_p12)*Math.tan(m),x*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var Te={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=U(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),1,((o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=1e-10)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=me(e/this.a),n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(e)<=1e-10?(s=this.lat0,t.x=a,t.y=s,t):(s=me(i*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-c,Math.abs(o)<=1e-10?(a=this.lat0>=0?U(this.long0+Math.atan2(t.x,-t.y)):U(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=U(this.long0+Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},Ie=1,Le=2,Re=3,Ce=4,Ae=5,ke=6,Ne=1,je=2,Fe=3,De=4;function Be(t,e,r,n){var i;return t<1e-10?(n.value=Ne,i=0):(i=Math.atan2(e,r),Math.abs(i)<=p?n.value=Ne:i>p&&i<=c+p?(n.value=je,i-=c):i>c+p||i<=-(c+p)?(n.value=Fe,i=i>=0?i-m:i+m):(n.value=De,i+=c)),i}function Ge(t,e){var r=t+e;return r<-m?r+=d:r>+m&&(r-=d),r}var ze={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=c-p/2?this.face=Ae:this.lat0<=-(c-p/2)?this.face=ke:Math.abs(this.long0)<=p?this.face=Ie:Math.abs(this.long0)<=c+p?this.face=this.long0>0?Le:Ce:this.face=Re,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,i,o,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===Ae)i=c-e,r>=p&&r<=c+p?(u.value=Ne,n=r-c):r>c+p||r<=-(c+p)?(u.value=je,n=r>0?r-m:r+m):r>-(c+p)&&r<=-p?(u.value=Fe,n=r+c):(u.value=De,n=r);else if(this.face===ke)i=c+e,r>=p&&r<=c+p?(u.value=Ne,n=-r+c):r<p&&r>=-p?(u.value=je,n=-r):r<-p&&r>=-(c+p)?(u.value=Fe,n=-r-c):(u.value=De,n=r>0?-r+m:-r-m);else{var l,h,f,d,y,g;this.face===Le?r=Ge(r,+c):this.face===Re?r=Ge(r,+m):this.face===Ce&&(r=Ge(r,-c)),d=Math.sin(e),y=Math.cos(e),g=Math.sin(r),l=y*Math.cos(r),h=y*g,f=d,this.face===Ie?n=Be(i=Math.acos(l),f,h,u):this.face===Le?n=Be(i=Math.acos(h),f,-l,u):this.face===Re?n=Be(i=Math.acos(-l),f,-h,u):this.face===Ce?n=Be(i=Math.acos(-h),f,l,u):(i=n=0,u.value=Ne)}return a=Math.atan(12/m*(n+Math.acos(Math.sin(n)*Math.cos(p))-c)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===je?a+=c:u.value===Fe?a+=m:u.value===De&&(a+=1.5*m),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,i,o,a,s,u,l,h,f,p,d={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=Ne:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=je,e-=c):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=Fe,e=e<0?e+m:e-m):(y.value=De,e+=c),l=m/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(n=Math.cos(e))*n*(i=Math.tan(r))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Ae)u=Math.acos(s),d.phi=c-u,y.value===Ne?d.lam=a+c:y.value===je?d.lam=a<0?a+m:a-m:y.value===Fe?d.lam=a-c:d.lam=a;else if(this.face===ke)u=Math.acos(s),d.phi=u-c,y.value===Ne?d.lam=-a+c:y.value===je?d.lam=-a:y.value===Fe?d.lam=-a-c:d.lam=a<0?-a-m:-a+m;else{var g,v,_;l=(g=s)*g,v=(l+=(_=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*_)>=1?0:Math.sqrt(1-l),y.value===je?(l=v,v=-_,_=l):y.value===Fe?(v=-v,_=-_):y.value===De&&(l=v,v=_,_=-l),this.face===Le?(l=g,g=-v,v=l):this.face===Re?(g=-g,v=-v):this.face===Ce&&(l=g,g=v,v=-l),d.phi=Math.acos(-_)-c,d.lam=Math.atan2(v,g),this.face===Le?d.lam=Ge(d.lam,-c):this.face===Re?d.lam=Ge(d.lam,-m):this.face===Ce&&(d.lam=Ge(d.lam,+c))}return 0!==this.es&&(h=d.phi<0?1:0,f=Math.tan(d.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),h&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Ue=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],qe=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ve=f/5,Ye=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var Ze={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=U(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*Ve);n<0?n=0:n>=18&&(n=17);var i={x:Ye(Ue[n],r=f*(r-.08726646259971647*n))*e,y:Ye(qe[n],r)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=Ue[18][0],e.y=t.y<0?-c:c;else{var r=Math.floor(18*e.y);for(r<0?r=0:r>=18&&(r=17);;)if(qe[r][0]>e.y)--r;else{if(!(qe[r+1][0]<=e.y))break;++r}var n=qe[r],i=5*(e.y-n[0])/(qe[r+1][0]-n[0]);i=function(t,e,r,n){for(var i=e;n;--n){var o=t(i);if(i-=o,Math.abs(o)<r)break}return i}((function(t){return(Ye(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),i,1e-10,100),e.x/=Ye(Ue[r],i),e.y=(5*r+i)*h,t.y<0&&(e.y=-e.y)}return e.x=U(e.x+this.long0),e},names:["Robinson","robin"]};var We={init:function(){this.name="geocent"},forward:function(t){return ct(t,this.es,this.a)},inverse:function(t){return ht(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},He=0,Xe=1,Ke=2,Je=3,Qe={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var $e={init:function(){if(Object.keys(Qe).forEach(function(t){if(void 0===this[t])this[t]=Qe[t].def;else{if(Qe[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Qe[t].num&&(this[t]=parseFloat(this[t]))}Qe[t].degrees&&(this[t]=this[t]*h)}.bind(this)),Math.abs(Math.abs(this.lat0)-c)<1e-10?this.mode=this.lat0<0?Xe:He:Math.abs(this.lat0)<1e-10?this.mode=Ke:(this.mode=Je,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,r,n,i,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case Je:r=this.sinph0*o+this.cosph0*a*s;break;case Ke:r=a*s;break;case Xe:r=-o;break;case He:r=o}switch(e=(r=this.pn1/(this.p-r))*a*Math.sin(t.x),this.mode){case Je:r*=this.cosph0*o-this.sinph0*a*s;break;case Ke:r*=o;break;case He:r*=-a*s;break;case Xe:r*=a*s}return i=1/((n=r*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-r*this.sg)*this.cw*i,r=n*i,t.x=e*this.a,t.y=r*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,r,n,i={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,r=this.pn1*t.y*this.cw*n,t.x=e*this.cg+r*this.sg,t.y=r*this.cg-e*this.sg;var o=Vt(t.x,t.y);if(Math.abs(o)<1e-10)i.x=0,i.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Je:i.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(i.y))*o,t.x*=s*this.cosph0;break;case Ke:i.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case He:i.y=Math.asin(a),t.y=-t.y;break;case Xe:i.y=-Math.asin(a)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]};var tr,er={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,i,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/Vt(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(o)*Math.cos(a),n=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-r)*r-n*n-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Vt(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(i/Vt(n,e)))}else"sphere"===this.shape&&(e=Math.cos(a),r=Math.cos(o)*e,n=Math.sin(o)*e,i=Math.sin(a),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Vt(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(i/Vt(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,i,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Vt(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Vt(1,a));var u=s/this.radius_p;if(e=a*a+u*u+o*o,(n=(r=2*this.radius_g*o)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-r-Math.sqrt(n))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(n=(r=2*this.radius_g*o)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-r-Math.sqrt(n))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};xt.defaultDatum="WGS84",xt.Proj=lt,xt.WGS84=new xt.Proj("WGS84"),xt.Point=Ft,xt.toPoint=vt,xt.defs=N,xt.nadgrid=function(t,e){var r=new DataView(e),n=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(r),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:it(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,n);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o={header:i,subgrids:function(t,e,r){for(var n=[],i=0;i<e.nSubgrids;i++){var o=at(t,176,r),a=st(t,176,o,r),s=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[nt(o.lowerLongitude),nt(o.lowerLatitude)],del:[nt(o.longitudeInterval),nt(o.latitudeInterval)],lim:[s,u],count:o.gridNodeCount,cvs:ot(a)})}return n}(r,i,n)};return et[t]=o,o},xt.transform=bt,xt.mgrs=Ot,xt.version="__VERSION__",(tr=xt).Proj.projections.add(Ut),tr.Proj.projections.add(Ht),tr.Proj.projections.add(Xt),tr.Proj.projections.add(Qt),tr.Proj.projections.add($t),tr.Proj.projections.add(te),tr.Proj.projections.add(ee),tr.Proj.projections.add(re),tr.Proj.projections.add(ne),tr.Proj.projections.add(fe),tr.Proj.projections.add(de),tr.Proj.projections.add(ye),tr.Proj.projections.add(ge),tr.Proj.projections.add(ve),tr.Proj.projections.add(_e),tr.Proj.projections.add(be),tr.Proj.projections.add(we),tr.Proj.projections.add(Me),tr.Proj.projections.add(Se),tr.Proj.projections.add(xe),tr.Proj.projections.add(Ee),tr.Proj.projections.add(Oe),tr.Proj.projections.add(Pe),tr.Proj.projections.add(Te),tr.Proj.projections.add(ze),tr.Proj.projections.add(Ze),tr.Proj.projections.add(We),tr.Proj.projections.add($e),tr.Proj.projections.add(er);var rr=xt,nr={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},ir={};ir[nr.DEGREES]=2*Math.PI*6370997/360,ir[nr.FEET]=.3048,ir[nr.METERS]=1,ir[nr.USFEET]=1200/3937;var or=nr,ar=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ir[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();function sr(t,e,r){return Math.min(Math.max(t,e),r)}var ur="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function lr(t,e,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var u=((t-r)*a+(e-n)*s)/(a*a+s*s);u>1?(r=i,n=o):u>0&&(r+=a*u,n+=s*u)}return cr(t,e,r,n)}function cr(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function hr(t){return 180*t/Math.PI}function fr(t){return t*Math.PI/180}function pr(t,e){var r=t%e;return r*e<0?r+e:r}function dr(t,e,r){return t+r*(e-t)}var mr={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};function yr(t,e,r){var n=r||6371008.8,i=fr(t[1]),o=fr(e[1]),a=(o-i)/2,s=fr(e[0]-t[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function gr(t,e){for(var r=0,n=0,i=t.length;n<i-1;++n)r+=yr(t[n],t[n+1],e);return r}function vr(t,e){for(var r=0,n=t.length,i=t[n-1][0],o=t[n-1][1],a=0;a<n;a++){var s=t[a][0],u=t[a][1];r+=fr(s-i)*(2+Math.sin(fr(o))+Math.sin(fr(u))),i=s,o=u}return r*e*e/2}function _r(t,e,r,n){var i=n||6371008.8,o=fr(t[1]),a=fr(t[0]),s=e/i,u=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(r));return[hr(a+Math.atan2(Math.sin(r)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(u))),hr(u)]}function br(){return function(){throw new Error("Unimplemented abstract method.")}()}var wr=0;function Mr(t){return t.ol_uid||(t.ol_uid=String(++wr))}var Sr,xr=(Sr=function(t,e){return(Sr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Sr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Er=function(t){function e(e){var r=this,n="Assertion failed. See https://openlayers.org/en/"+("v"+"6.3.1".split("-")[0])+"/doc/errors/#"+e+" for details.";return(r=t.call(this,n)||this).code=e,r.name="AssertionError",r.message=n,r}return xr(e,t),e}(Error);function Or(t,e){if(!t)throw new Er(e)}var Pr="bottom-left",Tr="bottom-right",Ir="top-left",Lr="top-right",Rr=0,Cr=1,Ar=2,kr=4,Nr=8,jr=16;function Fr(t){for(var e=Yr(),r=0,n=t.length;r<n;++r)Qr(e,t[r]);return e}function Dr(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Br(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Gr(t,e,r){var n,i;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(i=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*i}function zr(t,e){return qr(t,e[0],e[1])}function Ur(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function qr(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function Vr(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=Rr;return a<r?u|=jr:a>i&&(u|=kr),s<n?u|=Nr:s>o&&(u|=Ar),u===Rr&&(u=Cr),u}function Yr(){return[1/0,1/0,-1/0,-1/0]}function Zr(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function Wr(t){return Zr(1/0,1/0,-1/0,-1/0,t)}function Hr(t,e){var r=t[0],n=t[1];return Zr(r,n,r,n,e)}function Xr(t,e,r,n,i){return tn(Wr(i),t,e,r,n)}function Kr(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Jr(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Qr(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function $r(t,e){for(var r=0,n=e.length;r<n;++r)Qr(t,e[r]);return t}function tn(t,e,r,n,i){for(;r<n;r+=i)en(t,e[r],e[r+1]);return t}function en(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function rn(t,e){var r;return(r=e(on(t)))||(r=e(an(t)))||(r=e(pn(t)))?r:(r=e(fn(t)))||!1}function nn(t){var e=0;return yn(t)||(e=dn(t)*cn(t)),e}function on(t){return[t[0],t[1]]}function an(t){return[t[2],t[1]]}function sn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function un(t,e){var r;return e===Pr?r=on(t):e===Tr?r=an(t):e===Ir?r=fn(t):e===Lr?r=pn(t):Or(!1,13),r}function ln(t,e,r,n,i){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(r),u=Math.sin(r),l=o*s,c=o*u,h=a*s,f=a*u,p=t[0],d=t[1],m=p-l+f,y=p-l-f,g=p+l-f,v=p+l+f,_=d-c-h,b=d-c+h,w=d+c+h,M=d+c-h;return Zr(Math.min(m,y,g,v),Math.min(_,b,w,M),Math.max(m,y,g,v),Math.max(_,b,w,M),i)}function cn(t){return t[3]-t[1]}function hn(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return mn(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Wr(n),n}function fn(t){return[t[0],t[3]]}function pn(t){return[t[2],t[3]]}function dn(t){return t[2]-t[0]}function mn(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function yn(t){return t[2]<t[0]||t[3]<t[1]}function gn(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function vn(t,e,r,n){var i=[];if(n>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)i.push(t[0]+o*s/n,t[1],t[2],t[1]+a*s/n,t[2]-o*s/n,t[3],t[0],t[3]-a*s/n);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var u=[],l=[],c=(s=0,i.length);s<c;s+=2)u.push(i[s]),l.push(i[s+1]);return function(t,e,r){return Zr(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}(u,l,r)}function _n(t,e){var r=e.getExtent(),n=sn(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=dn(r),o=Math.floor((n[0]-r[0])/i)*i;t[0]-=o,t[2]-=o}return t}var bn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wn=6378137*Math.PI,Mn=[-wn,-wn,wn,wn],Sn=[-180,-85,180,85],xn=function(t){function e(e){return t.call(this,{code:e,units:or.METERS,extent:Mn,global:!0,worldExtent:Sn,getPointResolution:function(t,e){return t/ur(e[1]/6378137)}})||this}return bn(e,t),e}(ar),En=[new xn("EPSG:3857"),new xn("EPSG:102100"),new xn("EPSG:102113"),new xn("EPSG:900913"),new xn("urn:ogc:def:crs:EPSG:6.18:3:3857"),new xn("urn:ogc:def:crs:EPSG::3857"),new xn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function On(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=wn,s=0;s<n;s+=i){o[s]=a*t[s]/180;var u=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o}function Pn(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=0;a<n;a+=i)o[a]=180*t[a]/wn,o[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return o}var Tn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),In=[-180,-90,180,90],Ln=6378137*Math.PI/180,Rn=function(t){function e(e,r){return t.call(this,{code:e,units:or.DEGREES,extent:In,axisOrientation:r,global:!0,metersPerUnit:Ln,worldExtent:In})||this}return Tn(e,t),e}(ar),Cn=[new Rn("CRS:84"),new Rn("EPSG:4326","neu"),new Rn("urn:ogc:def:crs:EPSG::4326","neu"),new Rn("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Rn("urn:ogc:def:crs:OGC:1.3:CRS84"),new Rn("urn:ogc:def:crs:OGC:2:84"),new Rn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Rn("urn:x-ogc:def:crs:EPSG:4326","neu")],An="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a])}return r};function kn(t){for(var e in t)delete t[e]}var Nn="function"==typeof Object.values?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};function jn(t){var e;for(e in t)return!1;return!e}var Fn={};function Dn(t,e,r){var n=t.getCode(),i=e.getCode();n in Fn||(Fn[n]={}),Fn[n][i]=r}function Bn(t,e){var r;return t in Fn&&e in Fn[t]&&(r=Fn[t][e]),r}var Gn={};function zn(t,e,r){var n;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];n=e}else n=t.slice();return n}function Un(t,e,r){if(void 0!==e&&t!==e){for(var n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function qn(t){!function(t,e){Gn[t]=e}(t.getCode(),t),Dn(t,t,zn)}function Vn(t){return"string"==typeof t?Gn[t]||null:t||null}function Yn(t,e,r,n){var i,o=(t=Vn(t)).getPointResolutionFunc();if(o)i=o(e,r),n&&n!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/ir[n]);else if(t.getUnits()==or.DEGREES&&!n||n==or.DEGREES)i=e;else{var a,s=Jn(t,Vn("EPSG:4326")),u=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];i=(yr((u=s(u,u,2)).slice(0,2),u.slice(2,4))+yr(u.slice(4,6),u.slice(6,8)))/2,void 0!==(a=n?ir[n]:t.getMetersPerUnit())&&(i/=a)}return i}function Zn(t){!function(t){t.forEach(qn)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Dn(e,t,zn)}))}))}function Wn(t,e){return t?"string"==typeof t?Vn(t):t:Vn(e)}function Hn(t){return function(e,r,n){for(var i=e.length,o=void 0!==n?n:2,a=void 0!==r?r:new Array(i),s=0;s<i;s+=o){var u=t([e[s],e[s+1]]);a[s]=u[0],a[s+1]=u[1];for(var l=o-1;l>=2;--l)a[s+l]=e[s+l]}return a}}function Xn(t,e,r,n){var i=Vn(t),o=Vn(e);Dn(i,o,Hn(r)),Dn(o,i,Hn(n))}function Kn(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Jn(t,e)===zn)&&r}function Jn(t,e){var r=Bn(t.getCode(),e.getCode());return r||(r=Un),r}function Qn(t,e){return Jn(Vn(t),Vn(e))}function $n(t,e,r){return Qn(e,r)(t,void 0,t.length)}function ti(t,e,r,n){return vn(t,Qn(e,r),void 0,n)}var ei,ri,ni,ii=null;function oi(){return ii}function ai(t,e){return ii?$n(t,e,ii):t}function si(t,e){return ii?$n(t,ii,e):t}function ui(t,e){return ii?ti(t,e,ii):t}function li(t,e){return ii?ti(t,ii,e):t}function ci(t){var e,r,n=Object.keys(t.defs),i=n.length;for(e=0;e<i;++e){var o=n[e];if(!Vn(o)){var a=t.defs(o);qn(new ar({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:a.units}))}}for(e=0;e<i;++e){var s=n[e],u=Vn(s);for(r=0;r<i;++r){var l=n[r],c=Vn(l);if(!Bn(s,l))if(t.defs[s]===t.defs[l])Zn([u,c]);else{var h=t(s,l);Xn(u,c,h.forward,h.inverse)}}}}Zn(En),Zn(Cn),ei=En,ri=On,ni=Pn,Cn.forEach((function(t){ei.forEach((function(e){Dn(t,e,ri),Dn(e,t,ni)}))}));[{def:"+proj=longlat +datum=WGS84 +no_defs",extent:[-180,-90,180,90],codes:["EPSG:4326","urn:ogc:def:crs:EPSG::4326","urn:ogc:def:crs:OGC:1.3:CRS84","http://www.opengis.net/def/crs/OGC/1.3/CRS84"],units:"d",metersPerUnit:111319.49079327358,axisOrientation:"neu"},{def:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32627","urn:ogc:def:crs:EPSG::32627","http://www.opengis.net/gml/srs/epsg.xml#32627"],units:"m"},{def:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.44317933178,0,833978.5568206678,9329005.18301614],codes:["EPSG:32628","urn:ogc:def:crs:EPSG::32628","http://www.opengis.net/gml/srs/epsg.xml#32628"],units:"m"},{def:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32629","urn:ogc:def:crs:EPSG::32629","http://www.opengis.net/gml/srs/epsg.xml#32629"],units:"m"},{def:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32630","urn:ogc:def:crs:EPSG::32630","http://www.opengis.net/gml/srs/epsg.xml#32630"],units:"m"},{def:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32631","urn:ogc:def:crs:EPSG::32631","http://www.opengis.net/gml/srs/epsg.xml#32631"],units:"m"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-16.1,32.88,39.65,84.17],codes:["EPSG:4258","urn:ogc:def:crs:EPSG::4258","http://www.opengis.net/gml/srs/epsg.xml#4258"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-164850.78,3660417.01,988728.57,9567111.85],codes:["EPSG:25829","urn:ogc:def:crs:EPSG::25829","http://www.opengis.net/gml/srs/epsg.xml#25829"],units:"m"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[397101.09,3638520.14,1034670.43,9625438.82],codes:["EPSG:25828","urn:ogc:def:crs:EPSG::25828","http://www.opengis.net/gml/srs/epsg.xml#25828"],units:"m"},{def:"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-729785.83,3715125.82,940929.67,9518470.69],codes:["EPSG:25830","urn:ogc:def:crs:EPSG::25830","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m"},{def:"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-1300111.74,3804640.43,893164.13,9478718.31],codes:["EPSG:25831","urn:ogc:def:crs:EPSG::25831","http://www.opengis.net/gml/srs/epsg.xml#25831"],units:"m"},{def:"+proj=longlat +ellps=intl +no_defs",extent:[-16.09882145355955,25.711114310330917,48.60999527749605,84.16977336415472],codes:["EPSG:4230","urn:ogc:def:crs:EPSG::4230","http://www.opengis.net/gml/srs/epsg.xml#4230"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=28 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[997517.95,3873475.61,2024693.05,8529441.99],codes:["EPSG:23028","urn:ogc:def:crs:EPSG::23028","http://www.opengis.net/gml/srs/epsg.xml#23028"],units:"m"},{def:"+proj=utm +zone=29 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[448933.91,3860083.93,1860436.11,8381369.16],codes:["EPSG:23029","urn:ogc:def:crs:EPSG::23029","http://www.opengis.net/gml/srs/epsg.xml#23029"],units:"m"},{def:"+proj=utm +zone=30 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-99844.71,3879626.63,1682737.72,8251830.8],codes:["EPSG:23030","urn:ogc:def:crs:EPSG::23030","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m"},{def:"+proj=utm +zone=31 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-650883.16,3932764.97,1493695.91,8141744.84],codes:["EPSG:23031","urn:ogc:def:crs:EPSG::23031","http://www.opengis.net/gml/srs/epsg.xml#23031"],units:"m"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-21.93,24.6,-11.75,32.76],codes:["EPSG:4081","urn:ogc:def:crs:EPSG::4081","http://www.opengis.net/gml/srs/epsg.xml#4081"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[405849.71,2720975.6,1367994.77,3662797.15],codes:["EPSG:4082","urn:ogc:def:crs:EPSG::4082","http://www.opengis.net/gml/srs/epsg.xml#4082"],units:"m"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",extent:[-202677.94,2738405.48,804488.92,3629357.1],codes:["EPSG:4083","urn:ogc:def:crs:EPSG::4083","http://www.opengis.net/gml/srs/epsg.xml#4083"],units:"m"},{def:"+proj=merc +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[-20026376.39,15496570.74,20026376.39,18764656.23],codes:["EPSG:3395","urn:ogc:def:crs:EPSG::3395","http://www.opengis.net/gml/srs/epsg.xml#3395"],units:"m"}].forEach((function(t){t.codes.forEach((function(e){rr.defs(e,t.def)})),Zn(t.codes.map((function(e){return new ar({code:e,extent:t.extent,units:t.units,metersPerUnit:t.metersPerUnit,axisOrientation:t.axisOrientation})})))})),ci(rr);var hi="add",fi="remove",pi="propertychange";function di(t,e,r,n,i){if(n&&n!==t&&(r=r.bind(n)),i){var o=r;r=function(){t.removeEventListener(e,r),o.apply(this,arguments)}}var a={target:t,type:e,listener:r};return t.addEventListener(e,r),a}function mi(t,e,r,n){return di(t,e,r,n,!0)}function yi(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),kn(t))}var gi=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function vi(t,e){return t>e?1:t<e?-1:0}function _i(t,e){return t.indexOf(e)>=0}function bi(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function wi(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function Mi(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]}function Si(t,e){for(var r,n=t.length>>>0,i=0;i<n;i++)if(e(r=t[i],i,t))return r;return null}function xi(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ei(t,e){var r;return!t.every((function(n,i){return r=i,!e(n,i,t)}))?r:-1}function Oi(){return!0}function Pi(){return!1}function Ti(){}function Ii(t){t.stopPropagation()}var Li=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),Ri=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ci=function(t){function e(e){var r=t.call(this)||this;return r.eventTarget_=e,r.pendingRemovals_={},r.dispatching_={},r.listeners_={},r}return Ri(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var r=this.listeners_[t];r||(r=[],this.listeners_[t]=r),-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new Li(t):t,r=e.type;e.target||(e.target=this.eventTarget_||this);var n,i=this.listeners_[r];if(i){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var o=0,a=i.length;o<a;++o)if(!1===(n="handleEvent"in i[o]?i[o].handleEvent(e):i[o].call(this,e))||e.propagationStopped){n=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var s=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];s--;)this.removeEventListener(r,Ti);delete this.dispatching_[r]}return n}},e.prototype.disposeInternal=function(){kn(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var r=this.listeners_[t];if(r){var n=r.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(r[n]=Ti,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t]))}},e}(gi),Ai="change",ki="error",Ni="contextmenu",ji="click",Fi="dblclick",Di="dragenter",Bi="dragover",Gi="drop",zi="keydown",Ui="keypress",qi="load",Vi="resize",Yi="touchmove",Zi="wheel",Wi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Hi(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)yi(t[e]);else yi(t)}var Xi=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return Wi(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Ai)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=di(this,t[i],e);return n}return di(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=mi(this,t[i],e);return n}return mi(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(Ci),Ki=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ji=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.key=r,i.oldValue=n,i}return Ki(e,t),e}(Li),Qi=function(t){function e(e){var r=t.call(this)||this;return Mr(r),r.values_={},void 0!==e&&r.setProperties(e),r}return Ki(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return An({},this.values_)},e.prototype.notify=function(t,e){var r;r=to(t),this.dispatchEvent(new Ji(r,t,e)),r=pi,this.dispatchEvent(new Ji(r,t,e))},e.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},e}(Xi),$i={};function to(t){return $i.hasOwnProperty(t)?$i[t]:$i[t]="change:"+t}var eo=Qi,ro=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),no="length",io=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return ro(e,t),e}(Li),oo=function(t){function e(e,r){var n=t.call(this)||this,i=r||{};if(n.unique_=!!i.unique,n.array_=e||[],n.unique_)for(var o=0,a=n.array_.length;o<a;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return ro(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(no)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new io(hi,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new io(fi,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new io(fi,n,t)),this.dispatchEvent(new io(hi,e,t))}else{for(var i=r;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(no,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new Er(58)},e}(eo),ao=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),so=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.map=r,i.frameState=void 0!==n?n:null,i}return ao(e,t),e}(Li),uo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lo=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,o)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return uo(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(so),co=(r(33),"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():""),ho=-1!==co.indexOf("firefox"),fo=(-1!==co.indexOf("safari")&&co.indexOf("chrom"),-1!==co.indexOf("webkit")&&-1==co.indexOf("edge")),po=-1!==co.indexOf("macintosh"),mo="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,yo="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,go="undefined"!=typeof Image&&Image.prototype.decode,vo=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),_o={SINGLECLICK:"singleclick",CLICK:ji,DBLCLICK:Fi,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},bo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wo=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,n,i,o)||this;return a.pointerEvent=n,a}return bo(e,t),e}(lo),Mo="pointermove",So="pointerdown",xo="pointerup",Eo="pointerout",Oo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Po=function(t){function e(e,r){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=r?r*mo:mo,n.down_=null;var i=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=i,n.pointerdownListenerKey_=di(i,So,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=di(i,Mo,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(Yi,n.boundHandleTouchMove_,!!vo&&{passive:!1}),n}return Oo(e,t),e.prototype.emulateClick_=function(t){var e=new wo(_o.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new wo(_o.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new wo(_o.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==_o.POINTERUP||e.type==_o.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==_o.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new wo(_o.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(yi),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new wo(_o.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(di(document,_o.POINTERMOVE,this.handlePointerMove_,this),di(document,_o.POINTERUP,this.handlePointerUp_,this),di(this.element_,_o.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new wo(_o.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new wo(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(yi(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Yi,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(yi(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(yi),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(Ci),To="postrender",Io="movestart",Lo="moveend",Ro="layergroup",Co="size",Ao="target",ko="view",No="prerender",jo="postrender",Fo="precompose",Do="postcompose",Bo="rendercomplete",Go=0,zo=1,Uo=2,qo=3,Vo=4,Yo=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,kn(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r},t.prototype.enqueue=function(t){Or(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,i=e[t],o=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<n&&r[u]<r[s]?u:s;e[t]=e[l],r[t]=r[l],t=l}e[t]=i,r[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var r=this.elements_,n=this.priorities_,i=r[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=i,n[e]=o},t.prototype.reprioritize=function(){var t,e,r,n=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(r=n(t=i[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=r,i[a++]=t);i.length=a,o.length=a,this.heapify_()},t}(),Zo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wo=function(t){function e(e,r){var n=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return Zo(e,t),e.prototype.enqueue=function(e){var r=t.prototype.enqueue.call(this,e);r&&e[0].addEventListener(Ai,this.boundHandleTileChange_);return r},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(e.hifi&&r===Uo||r===qo||r===Vo){e.removeEventListener(Ai,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var r,n,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),r.getState()!==Go||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++i,r.load())},e}(Yo);function Ho(t,e,r){return function(n,i,o,a){if(n){var s=e?0:o[0]*i,u=e?0:o[1]*i,l=t[0]+s/2,c=t[2]-s/2,h=t[1]+u/2,f=t[3]-u/2;l>c&&(c=l=(c+l)/2),h>f&&(f=h=(f+h)/2);var p=sr(n[0],l,c),d=sr(n[1],h,f),m=30*i;return a&&r&&(p+=-m*Math.log(1+Math.max(0,l-n[0])/m)+m*Math.log(1+Math.max(0,n[0]-c)/m),d+=-m*Math.log(1+Math.max(0,h-n[1])/m)+m*Math.log(1+Math.max(0,n[1]-f)/m)),[p,d]}}}function Xo(t){return t}function Ko(t,e,r,n){var i=dn(e)/r[0],o=cn(e)/r[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function Jo(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),sr(n,r/2,2*e)}function Qo(t,e,r,n,i){return function(o,a,s,u){if(void 0!==o){var l=n?Ko(t,n,s,i):t;return(void 0===r||r)&&u?Jo(o,l,e):sr(o,e,l)}}}function $o(t){return void 0!==t?0:void 0}function ta(t){return void 0!==t?t:void 0}var ea=0,ra=1,na="center",ia="resolution",oa="rotation";function aa(t,e,r){var n=void 0!==r?t.toFixed(r):""+t,i=n.indexOf(".");return(i=-1===i?n.length:i)>e?n:new Array(1+e-i).join("0")+n}function sa(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function ua(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function la(t,e){var r,n,i=t[0],o=t[1],a=e[0],s=e[1],u=a[0],l=a[1],c=s[0],h=s[1],f=c-u,p=h-l,d=0===f&&0===p?0:(f*(i-u)+p*(o-l))/(f*f+p*p||0);return d<=0?(r=u,n=l):d>=1?(r=c,n=h):(r=u+d*f,n=l+d*p),[r,n]}function ca(t,e,r){var n=pr(e+180,360)-180,i=Math.abs(3600*n),o=r||0,a=Math.pow(10,o),s=Math.floor(i/3600),u=Math.floor((i-3600*s)/60),l=i-3600*s-60*u;return(l=Math.ceil(l*a)/a)>=60&&(l=0,u+=1),u>=60&&(u=0,s+=1),s+"° "+aa(u,2)+"′ "+aa(l,2,o)+"″"+(0==n?"":" "+t.charAt(n<0?1:0))}function ha(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function fa(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function pa(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t}function da(t,e){return t[0]*=e,t[1]*=e,t}function ma(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function ya(t,e){return Math.sqrt(ma(t,e))}function ga(t,e){return ma(t,la(t,e))}function va(t,e){return ha(t,"{x}, {y}",e)}function _a(t,e){var r=e.getExtent();if(e.canWrapX()&&(t[0]<r[0]||t[0]>=r[2])){var n=dn(r),i=Math.floor((t[0]-r[0])/n);t[0]-=i*n}return t}function ba(t){return Math.pow(t,3)}function wa(t){return 1-ba(1-t)}function Ma(t){return 3*t*t-2*t*t*t}function Sa(t){return t}function xa(t){return t<.5?Ma(2*t):1-Ma(2*(t-.5))}var Ea="XY",Oa="XYZ",Pa="XYM",Ta="XYZM";function Ia(t,e,r,n,i,o){for(var a=o||[],s=0,u=e;u<r;u+=n){var l=t[u],c=t[u+1];a[s++]=i[0]*l+i[2]*c+i[4],a[s++]=i[1]*l+i[3]*c+i[5]}return o&&a.length!=s&&(a.length=s),a}function La(t,e,r,n,i,o,a){for(var s=a||[],u=Math.cos(i),l=Math.sin(i),c=o[0],h=o[1],f=0,p=e;p<r;p+=n){var d=t[p]-c,m=t[p+1]-h;s[f++]=c+d*u-m*l,s[f++]=h+d*l+m*u;for(var y=p+2;y<p+n;++y)s[f++]=t[y]}return a&&s.length!=f&&(s.length=f),s}function Ra(t,e,r,n,i,o,a){for(var s=a||[],u=0,l=e;l<r;l+=n){s[u++]=t[l]+i,s[u++]=t[l+1]+o;for(var c=l+2;c<l+n;++c)s[u++]=t[c]}return a&&s.length!=u&&(s.length=u),s}var Ca=new Array(6);function Aa(t){return Na(t,1,0,0,1,0,0)}function ka(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return t[0]=r*u+i*l,t[1]=n*u+o*l,t[2]=r*c+i*h,t[3]=n*c+o*h,t[4]=r*f+i*p+a,t[5]=n*f+o*p+s,t}function Na(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function ja(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function Fa(t,e,r){return ka(t,Na(Ca,e,0,0,r,0,0))}function Da(t,e,r,n,i,o,a,s){var u=Math.sin(o),l=Math.cos(o);return t[0]=n*l,t[1]=i*u,t[2]=-n*u,t[3]=i*l,t[4]=a*n*l-s*n*u+e,t[5]=a*i*u+s*i*l+r,t}function Ba(t,e){var r,n=(r=e)[0]*r[3]-r[1]*r[2];Or(0!==n,32);var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5];return t[0]=s/n,t[1]=-o/n,t[2]=-a/n,t[3]=i/n,t[4]=(a*l-s*u)/n,t[5]=-(i*l-o*u)/n,t}function Ga(t){return"matrix("+t.join(", ")+")"}var za=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ua=[1,0,0,1,0,0],qa=function(t){function e(){var e,r,n,i,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===i&&xi(t,n)||(o=!0,i=this,n=t,r=e.apply(this,arguments)),r}),a}return za(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return br()},e.prototype.closestPointXY=function(t,e,r,n){return br()},e.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},e.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return br()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){br()},e.prototype.scale=function(t,e,r){br()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return br()},e.prototype.getType=function(){return br()},e.prototype.applyTransform=function(t){br()},e.prototype.intersectsExtent=function(t){return br()},e.prototype.translate=function(t,e){br()},e.prototype.transform=function(t,e){var r=Vn(t),n=r.getUnits()==or.TILE_PIXELS?function(t,n,i){var o=r.getExtent(),a=r.getWorldExtent(),s=cn(a)/cn(o);return Da(Ua,a[0],a[3],s,-s,0,0,0),Ia(t,0,t.length,i,Ua,n),Qn(r,e)(t,n,i)}:Qn(r,e);return this.applyTransform(n),this},e}(eo),Va=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ya(t){var e;return t==Ea?e=2:t==Oa||t==Pa?e=3:t==Ta&&(e=4),e}var Za=function(t){function e(){var e=t.call(this)||this;return e.layout=Ea,e.stride=2,e.flatCoordinates=null,e}return Va(e,t),e.prototype.computeExtent=function(t){return Xr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return br()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Ya(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){br()},e.prototype.setLayout=function(t,e,r){var n;if(t)n=Ya(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout=Ea,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=Ea:3==t?e=Oa:4==t&&(e=Ta);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();La(r,0,r.length,n,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var i=r;i||(i=sn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,r,n,i,o,a,s){for(var u=s||[],l=a[0],c=a[1],h=0,f=e;f<r;f+=n){var p=t[f]-l,d=t[f+1]-c;u[h++]=l+i*p,u[h++]=c+o*d;for(var m=f+2;m<f+n;++m)u[h++]=t[m]}s&&u.length!=h&&(u.length=h)}(o,0,o.length,a,t,n,i,o),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();Ra(r,0,r.length,n,t,e,r),this.changed()}},e}(qa);function Wa(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function Ha(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=Wa(t,e,s,n),e=s}return i}function Xa(t,e,r,n,i,o,a){var s,u=t[e],l=t[e+1],c=t[r]-u,h=t[r+1]-l;if(0===c&&0===h)s=e;else{var f=((i-u)*c+(o-l)*h)/(c*c+h*h);if(f>1)s=r;else{if(f>0){for(var p=0;p<n;++p)a[p]=dr(t[e+p],t[r+p],f);return void(a.length=n)}s=e}}for(p=0;p<n;++p)a[p]=t[s+p];a.length=n}function Ka(t,e,r,n,i){var o=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var s=t[e],u=t[e+1],l=cr(o,a,s,u);l>i&&(i=l),o=s,a=u}return i}function Ja(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Ka(t,e,s,n,i),e=s}return i}function Qa(t,e,r,n,i,o,a,s,u,l,c){if(e==r)return l;var h,f;if(0===i){if((f=cr(a,s,t[e],t[e+1]))<l){for(h=0;h<n;++h)u[h]=t[e+h];return u.length=n,f}return l}for(var p=c||[NaN,NaN],d=e+n;d<r;)if(Xa(t,d-n,d,n,a,s,p),(f=cr(a,s,p[0],p[1]))<l){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(l))/i|0,1);if(o&&(Xa(t,r-n,e,n,a,s,p),(f=cr(a,s,p[0],p[1]))<l)){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n}return l}function $a(t,e,r,n,i,o,a,s,u,l,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];l=Qa(t,e,d,n,i,o,a,s,u,l,h),e=d}return l}function ts(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e}function es(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)t[e++]=a[s];return e}function rs(t,e,r,n,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var l=es(t,e,r[s],n);o[a++]=l,e=l}return o.length=a,o}function ns(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=e;s<r;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function is(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];o[a++]=ns(t,e,l,n,o[a]),e=l}return o.length=a,o}function os(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];o[a++]=is(t,e,l,n,o[a]),e=l[l.length-1]}return o.length=a,o}function as(t,e,r,n,i,o,a){var s=(r-e)/n;if(s<3){for(;e<r;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,r-n],c=0;l.length>0;){for(var h=l.pop(),f=l.pop(),p=0,d=t[f],m=t[f+1],y=t[h],g=t[h+1],v=f+n;v<h;v+=n){var _=lr(t[v],t[v+1],d,m,y,g);_>p&&(c=v,p=_)}p>i&&(u[(c-e)/n]=1,f+n<c&&l.push(f,c),c+n<h&&l.push(c,h))}for(v=0;v<s;++v)u[v]&&(o[a++]=t[e+v*n],o[a++]=t[e+v*n+1]);return a}function ss(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=as(t,e,c,n,i,o,a),s.push(a),e=c}return a}function us(t,e){return e*Math.round(t/e)}function ls(t,e,r,n,i,o,a){if(e==r)return a;var s,u,l=us(t[e],i),c=us(t[e+1],i);e+=n,o[a++]=l,o[a++]=c;do{if(s=us(t[e],i),u=us(t[e+1],i),(e+=n)==r)return o[a++]=s,o[a++]=u,a}while(s==l&&u==c);for(;e<r;){var h=us(t[e],i),f=us(t[e+1],i);if(e+=n,h!=s||f!=u){var p=s-l,d=u-c,m=h-l,y=f-c;p*y==d*m&&(p<0&&m<p||p==m||p>0&&m>p)&&(d<0&&y<d||d==y||d>0&&y>d)?(s=h,u=f):(o[a++]=s,o[a++]=u,l=s,c=u,s=h,u=f)}}return o[a++]=s,o[a++]=u,a}function cs(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=ls(t,e,c,n,i,o,a),s.push(a),e=c}return a}var hs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fs=function(t){function e(e,r){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return hs(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Gr(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ka(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.getArea=function(){return Wa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=as(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Ea)},e.prototype.getType=function(){return mr.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Za),ps=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ds=function(t){function e(e,r){var n=t.call(this)||this;return n.setCoordinates(e,r),n}return ps(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=cr(t,e,i[0],i[1]);if(o<n){for(var a=this.stride,s=0;s<a;++s)r[s]=i[s];return r.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Hr(this.flatCoordinates,t)},e.prototype.getType=function(){return mr.POINT},e.prototype.intersectsExtent=function(t){return qr(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ts(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Za);function ms(t,e,r,n,i){return!rn(i,(function(i){return!ys(t,e,r,n,i[0],i[1])}))}function ys(t,e,r,n,i,o){for(var a=0,s=t[r-n],u=t[r-n+1];e<r;e+=n){var l=t[e],c=t[e+1];u<=o?c>o&&(l-s)*(o-u)-(i-s)*(c-u)>0&&a++:c<=o&&(l-s)*(o-u)-(i-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function gs(t,e,r,n,i,o){if(0===r.length)return!1;if(!ys(t,e,r[0],n,i,o))return!1;for(var a=1,s=r.length;a<s;++a)if(ys(t,r[a-1],r[a],n,i,o))return!1;return!0}function vs(t,e,r,n,i,o,a){for(var s,u,l,c,h,f,p,d=i[o+1],m=[],y=0,g=r.length;y<g;++y){var v=r[y];for(c=t[v-n],f=t[v-n+1],s=e;s<v;s+=n)h=t[s],p=t[s+1],(d<=f&&p<=d||f<=d&&d<=p)&&(l=(d-f)/(p-f)*(h-c)+c,m.push(l)),c=h,f=p}var _=NaN,b=-1/0;for(m.sort(vi),c=m[0],s=1,u=m.length;s<u;++s){h=m[s];var w=Math.abs(h-c);w>b&&gs(t,e,r,n,l=(c+h)/2,d)&&(_=l,b=w),c=h}return isNaN(_)&&(_=i[o]),a?(a.push(_,d,b),a):[_,d,b]}function _s(t,e,r,n,i){for(var o=[],a=0,s=r.length;a<s;++a){var u=r[a];o=vs(t,e,u,n,i,2*a,o),e=u[u.length-1]}return o}function bs(t,e,r,n,i){for(var o,a=[t[e],t[e+1]],s=[];e+n<r;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],o=i(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}function ws(t,e,r,n,i){var o=tn([1/0,1/0,-1/0,-1/0],t,e,r,n);return!!mn(i,o)&&(!!Ur(i,o)||(o[0]>=i[0]&&o[2]<=i[2]||(o[1]>=i[1]&&o[3]<=i[3]||bs(t,e,r,n,(function(t,e){return function(t,e,r){var n=!1,i=Vr(t,e),o=Vr(t,r);if(i===Cr||o===Cr)n=!0;else{var a=t[0],s=t[1],u=t[2],l=t[3],c=e[0],h=e[1],f=r[0],p=r[1],d=(p-h)/(f-c),m=void 0,y=void 0;o&Ar&&!(i&Ar)&&(n=(m=f-(p-l)/d)>=a&&m<=u),n||!(o&kr)||i&kr||(n=(y=p-(f-u)*d)>=s&&y<=l),n||!(o&Nr)||i&Nr||(n=(m=f-(p-s)/d)>=a&&m<=u),n||!(o&jr)||i&jr||(n=(y=p-(f-a)*d)>=s&&y<=l)}return n}(i,t,e)})))))}function Ms(t,e,r,n,i){if(!function(t,e,r,n,i){return!!ws(t,e,r,n,i)||(!!ys(t,e,r,n,i[0],i[1])||(!!ys(t,e,r,n,i[0],i[3])||(!!ys(t,e,r,n,i[2],i[1])||!!ys(t,e,r,n,i[2],i[3]))))}(t,e,r[0],n,i))return!1;if(1===r.length)return!0;for(var o=1,a=r.length;o<a;++o)if(ms(t,r[o-1],r[o],n,i)&&!ws(t,r[o-1],r[o],n,i))return!1;return!0}function Ss(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}function xs(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return i>0}function Es(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var u=r[a],l=xs(t,e,u,n);if(0===a){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0}function Os(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var u=r[a],l=xs(t,e,u,n);(0===a?o&&l||!o&&!l:o&&!l||!o&&l)&&Ss(t,e,u,n),e=u}return e}function Ps(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o)e=Os(t,e,r[o],n,i);return e}var Ts=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Is=function(t){function e(e,r,n){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==r&&n?(i.setFlatCoordinates(r,e),i.ends_=n):i.setCoordinates(e,r),i}return Ts(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Mi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<Gr(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ja(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$a(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return gs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Ha(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Os(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,is(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=sn(this.getExtent());this.flatInteriorPoint_=vs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new ds(this.getFlatInteriorPoint(),Pa)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new fs(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o],u=new fs(e.slice(i,s),t);n.push(u),i=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Es(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Os(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=cs(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,Ea,n)},e.prototype.getType=function(){return mr.POLYGON},e.prototype.intersectsExtent=function(t){return Ms(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=rs(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Za),Ls=Is;function Rs(t,e,r,n){for(var i=r||32,o=[],a=0;a<i;++a)Mi(o,_r(t,e,2*Math.PI*a/i,n));return o.push(o[0],o[1]),new Is(o,Ea,[o.length])}function Cs(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=[e,r,e,i,n,i,n,r,e,r];return new Is(o,Ea,[o.length])}function As(t,e,r){for(var n=e||32,i=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=i*(n+1),u=new Array(s),l=0;l<s;l+=i){u[l]=0,u[l+1]=0;for(var c=2;c<i;c++)u[l+c]=a[c]}var h=[u.length],f=new Is(u,o,h);return ks(f,a,t.getRadius(),r),f}function ks(t,e,r,n){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=n||0,u=0;u<=a;++u){var l=u*o,c=s+2*pr(u,a)*Math.PI/a;i[l]=e[0]+r*Math.cos(c),i[l+1]=e[1]+r*Math.sin(c)}t.changed()}var Ns=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function js(t,e){setTimeout((function(){t(e)}),0)}function Fs(t){return!(t.sourceCenter&&t.targetCenter&&!fa(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var Ds=function(t){function e(e){var r=t.call(this)||this,n=An({},e);return r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=Wn(n.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.cancelAnchor_=void 0,n.center&&(n.center=si(n.center,r.projection_)),n.extent&&(n.extent=li(n.extent,r.projection_)),r.applyOptions_(n),r}return Ns(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,r,n,i=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=Wn(t.projection,"EPSG:3857"),h=c.getExtent(),f=t.constrainOnlyCenter,p=t.extent;s||p||!c.isGlobal()||(f=!1,p=h);if(void 0!==t.resolutions){var d=t.resolutions;r=d[i],n=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function(t,e,r,n){return function(i,o,a,s){if(void 0!==i){var u=t[0],l=t[t.length-1],c=r?Ko(u,r,a,n):u;if(s)return void 0===e||e?Jo(i,c,l):sr(i,l,c);var h=Math.min(c,i),f=Math.floor(bi(t,h,o));return t[f]>c&&f<t.length-1?t[f+1]:t[f]}}}(d,u,!f&&p,l):Qo(r,n,u,!f&&p,l)}else{var m=(h?Math.max(dn(h),cn(h)):360*ir[or.DEGREES]/c.getMetersPerUnit())/256/Math.pow(2,0),y=m/Math.pow(2,28);void 0!==(r=t.maxResolution)?i=0:r=m/Math.pow(a,i),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(a,o):m/Math.pow(a,o):y),o=i+Math.floor(Math.log(r/n)/Math.log(a)),n=r/Math.pow(a,o-i),e=t.constrainResolution?function(t,e,r,n,i,o){return function(a,s,u,l){if(void 0!==a){var c=i?Ko(e,i,u,o):e,h=void 0!==r?r:0;if(l)return void 0===n||n?Jo(a,c,h):sr(a,h,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,d=Math.min(c,a),m=Math.floor(Math.log(e/d)/Math.log(t)+p),y=Math.max(f,m);return sr(e/Math.pow(t,y),h,c)}}}(a,r,n,u,!f&&p,l):Qo(r,n,u,!f&&p,l)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var r=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Ho(t.extent,t.constrainOnlyCenter,e)}var r=Wn(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Ho(n,!1,!1)}return Xo}(t),n=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=i||fr(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=o?0:t:void 0}):!1===e?ta:"number"==typeof e?(r=e,n=2*Math.PI/r,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):ta}return $o;var r,n;var i,o}(t);this.constraints_={center:r,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=An({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),An({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var n=arguments[r];n.center&&((n=An({},n)).center=si(n.center,this.getProjection())),n.anchor&&((n=An({},n)).anchor=si(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&js(e,!0))}for(var i=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],l=0;l<r;++l){var c=arguments[l],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Ma,callback:e};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=s;var f=pr(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=s+f,s=h.targetRotation}Fs(h)?h.complete=!0:i+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(ea,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[ea]>0},e.prototype.getInteracting=function(){return this.hints_[ra]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(ea,-this.hints_[ea]);for(var e=0,r=this.animations_.length;e<r;++e){var n=this.animations_[e];if(n[0].callback&&js(n[0].callback,!1),!t)for(var i=0,o=n.length;i<o;++i){var a=n[i];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],i=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):i=!1;var c=s.easing(l);if(s.sourceCenter){var h=s.sourceCenter[0],f=s.sourceCenter[1],p=h+c*(s.targetCenter[0]-h),d=f+c*(s.targetCenter[1]-f);this.targetCenter_=[p,d]}if(s.sourceResolution&&s.targetResolution){var m=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var y=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(m,0,y,!0);this.targetCenter_=this.calculateCenterZoom(g,s.anchor)}this.targetResolution_=m,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var v=1===c?pr(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var _=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(_,s.anchor)}this.targetRotation_=v}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[r]=null,this.setHint(ea,-1);var b=n[0].callback;b&&js(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var r,n=this.getCenterInternal();return void 0!==n&&(pa(r=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),ua(r,e)),r},e.prototype.calculateCenterZoom=function(t,e){var r,n=this.getCenterInternal(),i=this.getResolution();void 0!==n&&void 0!==i&&(r=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]);return r},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?ai(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(na)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return ui(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),r=this.getCenterInternal();Or(r,1);var n=this.getResolution();Or(void 0!==n,2);var i=this.getRotation();return Or(void 0!==i,3),ln(r,n,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(ia)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(li(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var r=e||this.getViewportSize_(),n=dn(t)/r[0],i=cn(t)/r[1];return Math.max(n,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(t){return r/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(oa)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/e;return function(t){return Math.log(r/t)/e/i}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),r=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:r,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var i=bi(this.resolutions_,t,1);n=i,e=this.resolutions_[i],r=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=sr(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,sr(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var r,n=An({size:this.getViewportSize_()},e||{});if(Or(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Or(!yn(t),25),r=Cs(i=li(t,this.getProjection()));else if(t.getType()===mr.CIRCLE){var i;(r=Cs(i=li(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),sn(i))}else{var o=oi();r=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(r,n)},e.prototype.fitInternal=function(t,e){var r=e||{},n=r.size;n||(n=this.getViewportSize_());var i,o=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0!==r.nearest&&r.nearest;i=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;for(var s=t.getFlatCoordinates(),u=this.getRotation(),l=Math.cos(-u),c=Math.sin(-u),h=1/0,f=1/0,p=-1/0,d=-1/0,m=t.getStride(),y=0,g=s.length;y<g;y+=m){var v=s[y]*l-s[y+1]*c,_=s[y]*c+s[y+1]*l;h=Math.min(h,v),f=Math.min(f,_),p=Math.max(p,v),d=Math.max(d,_)}var b=this.getResolutionForExtentInternal([h,f,p,d],[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);b=isNaN(b)?i:Math.max(b,i),b=this.getConstrainedResolution(b,a?0:1),c=-c;var w=(h+p)/2,M=(f+d)/2,S=[(w+=(o[1]-o[3])/2*b)*l-(M+=(o[0]-o[2])/2*b)*c,M*l+w*c],x=r.callback?r.callback:Ti;void 0!==r.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(S,b),duration:r.duration,easing:r.easing},x):(this.targetResolution_=b,this.targetCenter_=S,this.applyTargetState_(!1,!0),js(x,!0))},e.prototype.centerOn=function(t,e,r){this.centerOnInternal(si(t,this.getProjection()),e,r)},e.prototype.centerOnInternal=function(t,e,r){var n=this.getRotation(),i=Math.cos(-n),o=Math.sin(-n),a=t[0]*i-t[1]*o,s=t[1]*i+t[0]*o,u=this.getResolution(),l=(a+=(e[0]/2-r[0])*u)*i-(s+=(r[1]-e[1]/2)*u)*(o=-o),c=s*i+a*o;this.setCenterInternal([l,c])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=ai(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var r=e&&si(e,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=si(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(si(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),i=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,i,r),a=this.constraints_.center(this.targetCenter_,o,i,r);this.get(oa)!==n&&this.set(oa,n),this.get(ia)!==o&&this.set(ia,o),this.get(na)&&fa(this.get(na),a)||this.set(na,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,r){var n=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();var l=r||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&fa(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:u,resolution:s,duration:n,easing:wa,anchor:l}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(ra,1)},e.prototype.endInteraction=function(t,e,r){var n=r&&si(r,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,r){this.setHint(ra,-1),this.resolveConstraints(t,e,r)},e.prototype.getConstrainedCenter=function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))},e.prototype.getConstrainedResolution=function(t,e){var r=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,n)},e}(eo);function Bs(t,e,r){var n=r&&r.length?r.shift():yo?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function Gs(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function zs(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function Us(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function qs(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Vs(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var Ys="opacity",Zs="visible",Ws="extent",Hs="zIndex",Xs="maxResolution",Ks="minResolution",Js="maxZoom",Qs="minZoom",$s="source",tu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eu=function(t){function e(e){var r=t.call(this)||this,n=An({},e);return n[Ys]=void 0!==e.opacity?e.opacity:1,Or("number"==typeof n[Ys],64),n[Zs]=void 0===e.visible||e.visible,n[Hs]=e.zIndex,n[Xs]=void 0!==e.maxResolution?e.maxResolution:1/0,n[Ks]=void 0!==e.minResolution?e.minResolution:0,n[Qs]=void 0!==e.minZoom?e.minZoom:-1/0,n[Js]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}return tu(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=sr(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r?r:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return br()},e.prototype.getLayerStatesArray=function(t){return br()},e.prototype.getExtent=function(){return this.get(Ws)},e.prototype.getMaxResolution=function(){return this.get(Xs)},e.prototype.getMinResolution=function(){return this.get(Ks)},e.prototype.getMinZoom=function(){return this.get(Qs)},e.prototype.getMaxZoom=function(){return this.get(Js)},e.prototype.getOpacity=function(){return this.get(Ys)},e.prototype.getSourceState=function(){return br()},e.prototype.getVisible=function(){return this.get(Zs)},e.prototype.getZIndex=function(){return this.get(Hs)},e.prototype.setExtent=function(t){this.set(Ws,t)},e.prototype.setMaxResolution=function(t){this.set(Xs,t)},e.prototype.setMinResolution=function(t){this.set(Ks,t)},e.prototype.setMaxZoom=function(t){this.set(Js,t)},e.prototype.setMinZoom=function(t){this.set(Qs,t)},e.prototype.setOpacity=function(t){Or("number"==typeof t,64),this.set(Ys,t)},e.prototype.setVisible=function(t){this.set(Zs,t)},e.prototype.setZIndex=function(t){this.set(Hs,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(eo),ru="undefined",nu="loading",iu="ready",ou="error",au=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),su="layers",uu=function(t){function e(e){var r=this,n=e||{},i=An({},n);delete i.layers;var o=n.layers;return(r=t.call(this,i)||this).layersListenerKeys_=[],r.listenerKeys_={},r.addEventListener(to(su),r.handleLayersChanged_),o?Array.isArray(o)?o=new oo(o.slice(),{unique:!0}):Or("function"==typeof o.getArray,43):o=new oo(void 0,{unique:!0}),r.setLayers(o),r}return au(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(yi),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(di(t,hi,this.handleLayersAdd_,this),di(t,fi,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(yi);kn(this.listenerKeys_);for(var r=t.getArray(),n=0,i=r.length;n<i;n++){var o=r[n];this.listenerKeys_[Mr(o)]=[di(o,pi,this.handleLayerChange_,this),di(o,Ai,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Mr(e)]=[di(e,pi,this.handleLayerChange_,this),di(e,Ai,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=Mr(t.element);this.listenerKeys_[e].forEach(yi),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(su)},e.prototype.setLayers=function(t){this.set(su,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var n=this.getLayerState(),i=r,o=e.length;i<o;i++){var a=e[i];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=hn(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return iu},e}(eu);function lu(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function cu(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function hu(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var fu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var pu=function(t){function e(e){var r=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new uu({layers:t.layers});o[Ro]=a,o[Ao]=t.target,o[ko]=void 0!==t.view?t.view:new Ds,void 0!==t.controls&&(Array.isArray(t.controls)?r=new oo(t.controls.slice()):(Or("function"==typeof t.controls.getArray,47),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new oo(t.interactions.slice()):(Or("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?i=new oo(t.overlays.slice()):(Or("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new oo;return{controls:r,interactions:n,keyboardEventTarget:e,overlays:i,values:o}}(e);r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:mo,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=[1,0,0,1,0,0],r.pixelToCoordinateTransform_=[1,0,0,1,0,0],r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=new Po(r,e.moveTolerance);var i=r.handleMapBrowserEvent.bind(r);for(var o in _o)r.mapBrowserEventHandler_.addEventListener(_o[o],i);r.keyboardEventTarget_=n.keyboardEventTarget,r.keyHandlerKeys_=null;var a=r.handleBrowserEvent.bind(r);return r.viewport_.addEventListener(Ni,a,!1),r.viewport_.addEventListener(Zi,a,!!vo&&{passive:!1}),r.controls=n.controls||new oo,r.interactions=n.interactions||new oo,r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.handleResize_,r.postRenderFunctions_=[],r.tileQueue_=new Wo(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addEventListener(to(Ro),r.handleLayerGroupChanged_),r.addEventListener(to(ko),r.handleViewChanged_),r.addEventListener(to(Co),r.handleSizeChanged_),r.addEventListener(to(Ao),r.handleTargetChanged_),r.setProperties(n.values),r.controls.forEach(function(t){t.setMap(this)}.bind(r)),r.controls.addEventListener(hi,function(t){t.element.setMap(this)}.bind(r)),r.controls.addEventListener(fi,function(t){t.element.setMap(null)}.bind(r)),r.interactions.forEach(function(t){t.setMap(this)}.bind(r)),r.interactions.addEventListener(hi,function(t){t.element.setMap(this)}.bind(r)),r.interactions.addEventListener(fi,function(t){t.element.setMap(null)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r.overlays_.addEventListener(hi,function(t){this.addOverlayInternal_(t.element)}.bind(r)),r.overlays_.addEventListener(fi,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(r)),r}return fu(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(Ni,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Zi,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(Vi,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:Oi,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var r=[];return this.forEachFeatureAtPixel(t,(function(t){r.push(t)}),e),r},e.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||Oi;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Oi,i=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Ao)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return ai(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?ja(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ro)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=si(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?ja(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Co)},e.prototype.getView=function(){return this.get(ko)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,r,n){return function(t,e,r,n,i){if(!t||!(r in t.wantedTiles))return 1/0;if(!t.wantedTiles[r][e.getKey()])return 1/0;var o=t.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}(this.frameState_,t,e,r,n)},e.prototype.handleBrowserEvent=function(t,e){var r=e||t.type,n=new lo(r,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.getActive())if(!i.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var i=t.viewHints;if(i[ea]||i[ra]){var o=!go&&Date.now()-t.time>8;r=o?0:8,n=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}!t||!this.hasListener(Bo)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(Bo,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,r=this.keyHandlerKeys_.length;e<r;++e)yi(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[di(n,zi,this.handleBrowserEvent,this),di(n,Ui,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Vi,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),qs(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Vi,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(yi(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(yi(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=di(t,pi,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=di(t,Ai,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(yi),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[di(t,pi,this.render,this),di(t,Ai,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),r=this.getView(),n=this.frameState_,i=null;if(void 0!==e&&function(t){return t[0]>0&&t[1]>0}(e)&&r&&r.isDef()){var o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:ln(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),n)(!this.previousExtent_||!yn(this.previousExtent_)&&!Kr(i.extent,this.previousExtent_))&&(this.dispatchEvent(new so(Io,this,n)),this.previousExtent_=Wr(this.previousExtent_));this.previousExtent_&&!i.viewHints[ea]&&!i.viewHints[ra]&&!Kr(i.extent,this.previousExtent_)&&(this.dispatchEvent(new so(Lo,this,i)),Br(i.extent,this.previousExtent_))}this.dispatchEvent(new so(To,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Ro,t)},e.prototype.setSize=function(t){this.set(Co,t)},e.prototype.setTarget=function(t){this.set(Ao,t)},e.prototype.setView=function(t){this.set(ko,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(e=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(e)}},e}(eo),du=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mu=function(t){function e(e){var r=t.call(this)||this;return r.element=e.element?e.element:null,r.target_=null,r.map_=null,r.listenerKeys=[],r.render_=e.render?e.render:Ti,e.target&&r.setTarget(e.target),r}return du(e,t),e.prototype.disposeInternal=function(){qs(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&qs(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)yi(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ti&&this.listenerKeys.push(di(t,To,this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(eo),yu=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),gu=["style","variant","weight","size","lineHeight","family"],vu=function(t){var e=t.match(yu);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=gu.length;n<i;++n){var o=e[n+1];void 0!==o&&(r[gu[n]]=o)}return r.families=r.family.split(/,\s?/),r},_u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function bu(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var wu=function(t){function e(e){var r=this,n=An({},e);delete n.source,(r=t.call(this,n)||this).mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addEventListener(to($s),r.handleSourcePropertyChange_);var i=e.source?e.source:null;return r.setSource(i),r}return _u(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get($s)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ru},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(yi(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=di(t,Ai,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(yi(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(yi(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=di(t,Fo,(function(t){var e=t.frameState.layerStatesArray,r=this.getLayerState(!1);Or(!e.some((function(t){return t.layer===r.layer})),67),e.push(r)}),this),this.mapRenderKey_=di(this,Ai,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set($s,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(eu),Mu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Su(t){this.updateElement_(t.frameState)}var xu=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||Su,target:n.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===n.collapsed||n.collapsed,r.overrideCollapsible_=void 0!==n.collapsible,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.collapseLabel?n.collapseLabel:"»";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(ji,r.handleClick_.bind(r),!1);var c=i+" ol-unselectable ol-control"+(r.collapsed_&&r.collapsible_?" ol-collapsed":"")+(r.collapsible_?"":" ol-uncollapsible"),h=r.element;return h.className=c,h.appendChild(r.ulElement_),h.appendChild(l),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return Mu(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],n=t.layerStatesArray,i=0,o=n.length;i<o;++i){var a=n[i];if(bu(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var l=u(t);if(l)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(l))for(var c=0,h=l.length;c<h;++c)l[c]in e||(r.push(l[c]),e[l[c]]=!0);else l in e||(r.push(l),e[l]=!0)}}}}return r},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!xi(e,this.renderedAttributions_)){Vs(this.ulElement_);for(var n=0,i=e.length;n<i;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Us(this.collapseLabel_,this.label_):Us(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(mu),Eu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ou(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains("ol-hidden");i||0!==r?i&&0!==r&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.transform=n}this.rotation_=r}}var Pu=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),render:n.render||Ou,target:n.target})||this;var i=void 0!==n.className?n.className:"ol-rotate",o=void 0!==n.label?n.label:"⇧";r.label_=null,"string"==typeof o?(r.label_=document.createElement("span"),r.label_.className="ol-compass",r.label_.textContent=o):(r.label_=o,r.label_.classList.add("ol-compass"));var a=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(r.label_),s.addEventListener(ji,r.handleClick_.bind(r),!1);var u=i+" ol-unselectable ol-control",l=r.element;return l.className=u,l.appendChild(s),r.callResetNorth_=n.resetNorth?n.resetNorth:void 0,r.duration_=void 0!==n.duration?n.duration:250,r.autoHide_=void 0===n.autoHide||n.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add("ol-hidden"),r}return Eu(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:wa}):t.setRotation(0))}},e}(mu),Tu=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Iu=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),target:n.target})||this;var i=void 0!==n.className?n.className:"ol-zoom",o=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",u=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",l=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i+"-in",c.setAttribute("type","button"),c.title=u,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(ji,r.handleClick_.bind(r,o),!1);var h=document.createElement("button");h.className=i+"-out",h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(ji,r.handleClick_.bind(r,-o),!1);var f=i+" ol-unselectable ol-control",p=r.element;return p.className=f,p.appendChild(c),p.appendChild(h),r.duration_=void 0!==n.duration?n.duration:250,r}return Tu(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:wa})):e.setZoom(n)}}},e}(mu);function Lu(t){var e=t||{},r=new oo;return(void 0===e.zoom||e.zoom)&&r.push(new Iu(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&r.push(new Pu(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&r.push(new xu(e.attributionOptions)),r}var Ru=function(){function t(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var i=this.points_[e]-this.points_[r],o=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),Cu="active",Au=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ku(t,e,r,n){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:wa})}}var Nu=function(t){function e(e){var r=t.call(this)||this;return e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return Au(e,t),e.prototype.getActive=function(){return this.get(Cu)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Cu,t)},e.prototype.setMap=function(t){this.map_=t},e}(eo),ju=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Fu(t){var e=!1;if(t.type==_o.DBLCLICK){var r=t.originalEvent,n=t.map,i=t.coordinate,o=r.shiftKey?-this.delta_:this.delta_;ku(n.getView(),o,i,this.duration_),t.preventDefault(),e=!0}return!e}var Du=function(t){function e(e){var r=t.call(this,{handleEvent:Fu})||this,n=e||{};return r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:250,r}return ju(e,t),e}(Nu),Bu=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Gu=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},zu=function(t){return t.target.getTargetElement()===document.activeElement},Uu=Oi,qu=function(t){var e=t.originalEvent;return 0==e.button&&!(fo&&po&&e.ctrlKey)},Vu=Pi,Yu=function(t){return t.type==_o.SINGLECLICK},Zu=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Wu=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Hu=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Xu=function(t){var e=t.pointerEvent;return Or(void 0!==e,56),"mouse"==e.pointerType},Ku=function(t){var e=t.pointerEvent;return Or(void 0!==e,56),e.isPrimary&&0===e.button},Ju=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Qu(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return[r/e,n/e]}var $u=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,n)||this,n.handleDownEvent&&(r.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(r.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(r.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(r.handleUpEvent=n.handleUpEvent),n.stopDown&&(r.stopDown=n.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return Ju(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==_o.POINTERDRAG)this.handleDragEvent(t);else if(t.type==_o.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==_o.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==_o.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===_o.POINTERDOWN||e===_o.POINTERDRAG||e===_o.POINTERUP}(t)){var e=t.pointerEvent,r=e.pointerId.toString();t.type==_o.POINTERUP?delete this.trackedPointers_[r]:(t.type==_o.POINTERDOWN||r in this.trackedPointers_)&&(this.trackedPointers_[r]=e),this.targetPointers=Nn(this.trackedPointers_)}},e}(Nu),tl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function el(t){return Zu(t)&&Ku(t)}var rl=function(t){function e(e){var r=t.call(this,{stopDown:Pi})||this,n=e||{};return r.kinetic_=n.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1,r.condition_=n.condition?n.condition:el,r.noKinetic_=!1,r}return tl(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=zu(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,r=Qu(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var n=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],i=t.map.getView();da(n,i.getResolution()),pa(n,i.getRotation()),i.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(i),a[1]-n*Math.sin(i)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:wa})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}($u),nl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),il=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{stopDown:Pi})||this).condition_=n.condition?n.condition:Gu,r.lastAngle_=void 0,r.duration_=void 0!==n.duration?n.duration:250,r}return nl(e,t),e.prototype.handleDragEvent=function(t){if(Xu(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==$o){var n=e.getSize(),i=t.pixel,o=Math.atan2(n[1]/2-i[1],i[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!Xu(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!Xu(t)&&(!(!qu(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}($u),ol=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),al=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return ol(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Ls([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(gi),sl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ul="boxstart",ll="boxdrag",cl="boxend",hl=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.coordinate=r,i.mapBrowserEvent=n,i}return sl(e,t),e}(Li),fl=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.box_=new al(n.className||"ol-dragbox"),r.minArea_=void 0!==n.minArea?n.minArea:64,r.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:Ti,r.startPixel_=null,r.condition_=n.condition?n.condition:qu,r.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:r.defaultBoxEndCondition,r}return sl(e,t),e.prototype.defaultBoxEndCondition=function(t,e,r){var n=r[0]-e[0],i=r[1]-e[1];return n*n+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new hl(ll,t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new hl(cl,t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new hl(ul,t.coordinate,t)),!0)},e}($u),pl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function dl(){var t,e,r=this.getMap(),n=r.getView(),i=r.getSize(),o=this.getGeometry().getExtent();if(this.out_){var a=n.calculateExtentInternal(i),s=(t=[r.getPixelFromCoordinateInternal(on(o)),r.getPixelFromCoordinateInternal(pn(o))],$r(Wr(e),t));gn(a,1/n.getResolutionForExtentInternal(s,i)),o=a}var u=n.getConstrainedResolution(n.getResolutionForExtentInternal(o,i)),l=n.getConstrainedCenter(sn(o),u);n.animateInternal({resolution:u,center:l,duration:this.duration_,easing:wa})}var ml=function(t){function e(e){var r=this,n=e||{},i=n.condition?n.condition:Wu;return(r=t.call(this,{condition:i,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:dl})||this).duration_=void 0!==n.duration?n.duration:200,r.out_=void 0!==n.out&&n.out,r}return pl(e,t),e}(fl),yl=37,gl=38,vl=39,_l=40,bl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function wl(t){var e=!1;if(t.type==zi){var r=t.originalEvent.keyCode;if(this.condition_(t)&&(r==_l||r==yl||r==vl||r==gl)){var n=t.map.getView(),i=n.getResolution()*this.pixelDelta_,o=0,a=0;r==_l?a=-i:r==yl?o=-i:r==vl?o=i:a=i;var s=[o,a];pa(s,n.getRotation()),function(t,e,r){var n=t.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:Sa,center:t.getConstrainedCenter(i)})}}(n,s,this.duration_),t.preventDefault(),e=!0}}return!e}var Ml=function(t){function e(e){var r=t.call(this,{handleEvent:wl})||this,n=e||{};return r.defaultCondition_=function(t){return Zu(t)&&Hu(t)},r.condition_=void 0!==n.condition?n.condition:r.defaultCondition_,r.duration_=void 0!==n.duration?n.duration:100,r.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,r}return bl(e,t),e}(Nu),Sl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function xl(t){var e=!1;if(t.type==zi||t.type==Ui){var r=t.originalEvent.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var n=t.map,i=r=="+".charCodeAt(0)?this.delta_:-this.delta_;ku(n.getView(),i,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var El=function(t){function e(e){var r=t.call(this,{handleEvent:xl})||this,n=e||{};return r.condition_=n.condition?n.condition:Hu,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return Sl(e,t),e}(Nu),Ol=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pl="trackpad",Tl="wheel",Il=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,r.duration_=void 0!==n.duration?n.duration:250,r.timeout_=void 0!==n.timeout?n.timeout:80,r.useAnchor_=void 0===n.useAnchor||n.useAnchor,r.condition_=n.condition?n.condition:Uu,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}return Ol(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=zu(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==Zi)return!0;t.preventDefault();var e,r=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Zi&&(e=n.deltaY,ho&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=mo),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Pl:Tl);var o=r.getView();if(this.mode_===Pl&&!o.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-sr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(r=r?r>0?1:-1:0),ku(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Nu),Ll=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rl=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Pi),(r=t.call(this,i)||this).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==n.threshold?n.threshold:.3,r.duration_=void 0!==n.duration?n.duration:250,r}return Ll(e,t),e.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],i=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==$o){var u=a.getViewport().getBoundingClientRect(),l=Qu(this.targetPointers);l[0]-=u.left,l[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}($u),Cl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Al=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Pi),(r=t.call(this,i)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return Cl(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],i=r.clientX-n.clientX,o=r.clientY-n.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=Qu(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),u.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}($u);function kl(t){var e=t||{},r=new oo,n=new Ru(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&r.push(new il),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&r.push(new Du({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&r.push(new rl({condition:e.onFocusOnly?zu:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&r.push(new Rl),(void 0===e.pinchZoom||e.pinchZoom)&&r.push(new Al({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(r.push(new Ml),r.push(new El({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&r.push(new Il({condition:e.onFocusOnly?zu:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&r.push(new ml({duration:e.zoomDuration})),r}var Nl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jl=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.inversePixelTransform=r,o.frameState=n,o.context=i,o}return Nl(e,t),e}(Li),Fl=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Dl=/^([a-z]*)$|^hsla?\(.*\)$/i;function Bl(t){return"string"==typeof t?t:Zl(t)}function Gl(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}var zl,Ul,ql=(zl={},Ul=0,function(t){var e;if(zl.hasOwnProperty(t))e=zl[t];else{if(Ul>=1024){var r=0;for(var n in zl)0==(3&r++)&&(delete zl[n],--Ul)}e=function(t){var e,r,n,i,o;if(Dl.exec(t)&&(t=Gl(t)),Fl.exec(t)){var a=t.length-1,s=void 0;s=a<=4?1:2;var u=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),r=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),i=u?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,r=(r<<4)+r,n=(n<<4)+n,u&&(i=(i<<4)+i)),o=[e,r,n,i/255]}else 0==t.indexOf("rgba(")?Yl(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Yl(o)):Or(!1,14);return o}(t),zl[t]=e,++Ul}return e});function Vl(t){return Array.isArray(t)?t:ql(t)}function Yl(t){return t[0]=sr(t[0]+.5|0,0,255),t[1]=sr(t[1]+.5|0,0,255),t[2]=sr(t[2]+.5|0,0,255),t[3]=sr(t[3],0,1),t}function Zl(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:t[3])+")"}var Wl=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,r){var n=Hl(t,e,r);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,r,n){var i=Hl(t,e,r);this.cache_[i]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Hl(t,e,r){return e+":"+t+":"+(r?Bl(r):"null")}var Xl=new Wl;function Kl(t){return Array.isArray(t)?Zl(t):t}var Jl=function(){function t(){}return t.prototype.drawCustom=function(t,e,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),Ql=[],$l=[0,0,0,0],tc=new eo,ec=new Ci;ec.setSize=function(){console.warn("labelCache is deprecated.")};var rc,nc,ic,oc=null,ac={},sc=function(){var t,e,r=["monospace","serif"],n=r.length,i="wmytzilWMYTZIL@#/&?$%10";function o(t,o,a){for(var s=!0,u=0;u<n;++u){var l=r[u];if(e=cc(t+" "+o+" 32px "+l,i),a!=l){var c=cc(t+" "+o+" 32px "+a+","+l,i);s=s&&c!=e}}return!!s}function a(){for(var e=!0,r=tc.getKeys(),n=0,i=r.length;n<i;++n){var a=r[n];tc.get(a)<100&&(o.apply(this,a.split("\n"))?(kn(ac),oc=null,rc=void 0,tc.set(a,100)):(tc.set(a,tc.get(a)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var r=vu(e);if(r)for(var n=r.families,i=0,s=n.length;i<s;++i){var u=n[i],l=r.style+"\n"+r.weight+"\n"+u;void 0===tc.get(l)&&(tc.set(l,100,!0),o(r.style,r.weight,u)||(tc.set(l,0,!0),void 0===t&&(t=setInterval(a,32))))}}}(),uc=(ic=ac,function(t){var e=ic[t];if(null==e)if(yo){var r=vu(t),n=lc(t,"Žg"),i=isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight);ac[t]=i*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else nc||((nc=document.createElement("div")).innerHTML="M",nc.style.margin="0 !important",nc.style.padding="0 !important",nc.style.position="absolute !important",nc.style.left="-99999px !important"),nc.style.font=t,document.body.appendChild(nc),e=nc.offsetHeight,ic[t]=e,document.body.removeChild(nc);return e});function lc(t,e){return oc||(oc=Bs(1,1)),t!=rc&&(oc.font=t,rc=oc.font),oc.measureText(e)}function cc(t,e){return lc(t,e).width}function hc(t,e,r){if(e in r)return r[e];var n=cc(t,e);return r[e]=n,n}function fc(t,e,r,n){0!==e&&(t.translate(r,n),t.rotate(e),t.translate(-r,-n))}function pc(t,e,r,n,i,o,a,s,u,l,c){t.save(),1!==r&&(t.globalAlpha*=r),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(u,l),t.scale(c,c),function(t,e){for(var r=t.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}(n,t)):t.drawImage(n,i,o,a,s,u,l,a*c,s*c),t.restore()}var dc=null;function mc(t){return yo?Ga(t):(dc||(dc=Bs(1,1).canvas),dc.style.transform=Ga(t),dc.style.transform)}var yc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gc=function(t){function e(e,r,n,i,o,a,s){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=r,u.extent_=n,u.transform_=i,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=0,u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=0,u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}return yc(e,t),e.prototype.drawImages_=function(t,e,r,n){if(this.image_){var i=Ia(t,e,r,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=i.length;l<c;l+=2){var h=i[l]-this.imageAnchorX_,f=i[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var p=h+this.imageAnchorX_,d=f+this.imageAnchorY_;Da(a,p,d,this.imageScale_,this.imageScale_,u,-p,-d),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=Ia(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=i[e]+this.textOffsetX_,u=i[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var l=Da(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,r,n,i){var o=this.context_,a=Ia(t,e,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return i&&o.closePath(),r},e.prototype.drawRings_=function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)e=this.moveToLineTo_(t,e,r[i],n,!0);return e},e.prototype.drawCircle=function(t){if(mn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,r){var n=t.getFlatCoordinates();if(n){var i=t.getStride();return Ia(n,0,n.length,i,e,r)}return null}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],i=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case mr.POINT:this.drawPoint(t);break;case mr.LINE_STRING:this.drawLineString(t);break;case mr.POLYGON:this.drawPolygon(t);break;case mr.MULTI_POINT:this.drawMultiPoint(t);break;case mr.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case mr.MULTI_POLYGON:this.drawMultiPolygon(t);break;case mr.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case mr.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&mn(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),mn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(mn(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();r.beginPath();for(var s=0,u=o.length;s<u;++s)i=this.moveToLineTo_(n,i,o[s],a,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),mn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),mn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var u=i[a];n=this.drawRings_(r,n,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(xi(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:"center";r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var r=t.getColor();this.fillState_={fillStyle:Kl(r||"#000")}}else this.fillState_=null;if(e){var n=e.getColor(),i=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==i?i:"round",lineDash:o||Ql,lineDashOffset:a||0,lineJoin:void 0!==s?s:"round",lineWidth:this.pixelRatio_*(void 0!==u?u:1),miterLimit:void 0!==l?l:10,strokeStyle:Kl(n||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),r=t.getImage(1),n=t.getOrigin(),i=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=i[1],this.image_=r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=i[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:Kl(r||"#000")}}else this.textFillState_=null;var n=t.getStroke();if(n){var i=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:a||Ql,lineDashOffset:s||0,lineJoin:void 0!==u?u:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:Kl(i||"#000")}}else this.textStrokeState_=null;var h=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),m=t.getRotation(),y=t.getScale(),g=t.getText(),v=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==h?h:"10px sans-serif",textAlign:void 0!==v?v:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==g?g:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==m?m:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},e}(Jl),vc=0,_c=1,bc=2,wc=3,Mc=4,Sc="Circle",xc="Default",Ec="Image",Oc="LineString",Pc="Polygon",Tc="Text",Ic={Point:function(t,e,r,n){var i=r.getImage();if(i){if(i.getImageState()!=bc)return;var o=t.getBuilder(r.getZIndex(),Ec);o.setImageStyle(i,t.addDeclutter(!1)),o.drawPoint(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Tc);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,n)}},LineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),Oc);o.setFillStrokeStyle(null,i),o.drawLineString(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Tc);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},Polygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var a=t.getBuilder(r.getZIndex(),Pc);a.setFillStrokeStyle(i,o),a.drawPolygon(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Tc);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},MultiPoint:function(t,e,r,n){var i=r.getImage();if(i){if(i.getImageState()!=bc)return;var o=t.getBuilder(r.getZIndex(),Ec);o.setImageStyle(i,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Tc);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,n)}},MultiLineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),Oc);o.setFillStrokeStyle(null,i),o.drawMultiLineString(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Tc);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},MultiPolygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(o||i){var a=t.getBuilder(r.getZIndex(),Pc);a.setFillStrokeStyle(i,o),a.drawMultiPolygon(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Tc);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},GeometryCollection:function(t,e,r,n){var i,o,a=e.getGeometriesArray();for(i=0,o=a.length;i<o;++i){(0,Ic[a[i].getType()])(t,a[i],r,n)}},Circle:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var a=t.getBuilder(r.getZIndex(),Sc);a.setFillStrokeStyle(i,o),a.drawCircle(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Tc);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}}};function Lc(t,e){return parseInt(Mr(t),10)-parseInt(Mr(e),10)}function Rc(t,e){var r=Cc(t,e);return r*r}function Cc(t,e){return.5*t/e}function Ac(t,e,r,n,i,o){var a=!1,s=r.getImage();if(s){var u=s.getImageState();u==bc||u==wc?s.unlistenImageChange(i):(u==vc&&s.load(),u=s.getImageState(),s.listenImageChange(i),a=!0)}return function(t,e,r,n,i){var o=r.getGeometryFunction()(e);if(!o)return;var a=o.simplifyTransformed(n,i);if(r.getRenderer())!function t(e,r,n,i){if(r.getType()==mr.GEOMETRY_COLLECTION){for(var o=r.getGeometries(),a=0,s=o.length;a<s;++a)t(e,o[a],n,i);return}e.getBuilder(n.getZIndex(),xc).drawCustom(r,i,n.getRenderer())}(t,a,r,e);else{(0,Ic[a.getType()])(t,a,r,e)}}(t,e,r,n,o),a}function kc(t,e){var r=t.canvas,n=e||{},i=n.pixelRatio||mo,o=n.size;o&&(r.width=o[0]*i,r.height=o[1]*i,r.style.width=o[0]+"px",r.style.height=o[1]+"px");var a=[0,0,r.width,r.height],s=Fa([1,0,0,1,0,0],i,i);return new gc(t,i,a,s,0)}function Nc(t){var e,r=t.frameState,n=ka(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),i=Rc(r.viewState.resolution,r.pixelRatio),o=oi();return o&&(e=Jn(o,r.viewState.projection)),new gc(t.context,r.pixelRatio,r.extent,n,r.viewState.rotation,i,e)}function jc(t,e){e&&e.clear();for(var r=t.declutterItems,n=r.length-1;n>=0;--n)for(var i=r[n],o=i.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],i.opacity,e);return r.length=0,e}var Fc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Dc(t,e){Xl.expire()}var Bc=function(t){function e(e){var r=t.call(this)||this;return r.map_=e,r.declutterTree_=null,r}return Fc(e,t),e.prototype.dispatchRenderEvent=function(t,e){br()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Da(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Ba(n,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o,a,s){var u,l=e.viewState;function c(t,e,r){return i.call(o,e,t?r:null)}var h=l.projection,f=_a(t.slice(),h),p=[[0,0]];if(h.canWrapX()&&n){var d=dn(h.getExtent());p.push([-d,0],[d,0])}var m,y=e.layerStatesArray,g=y.length;this.declutterTree_&&(m=this.declutterTree_.all().map((function(t){return t.value})));for(var v=[],_=0;_<p.length;_++)for(var b=g-1;b>=0;--b){var w=y[b],M=w.layer;if(M.hasRenderer()&&bu(w,l)&&a.call(s,M)){var S=M.getRenderer(),x=M.getSource();if(S&&x){var E=x.getWrapX()?f:t,O=c.bind(null,w.managed);v[0]=E[0]+p[_][0],v[1]=E[1]+p[_][1],u=S.forEachFeatureAtCoordinate(v,e,r,O,m)}if(u)return u}}},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){return br()},e.prototype.hasFeatureAtCoordinate=function(t,e,r,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,n,Oi,this,i,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=jc(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){Xl.canExpireCache()&&t.postRenderFunctions.push(Dc)},e}(gi),Gc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zc=function(t){function e(e){var r=t.call(this,e)||this;r.fontChangeListenerKey_=di(tc,pi,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className="ol-unselectable ol-layers";var i=e.getViewport();return i.insertBefore(r.element_,i.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return Gc(e,t),e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new jl(t,void 0,e);r.dispatchEvent(n)}},e.prototype.disposeInternal=function(){yi(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(Fo,e);var r=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=e.viewState;this.children_.length=0;for(var i=null,o=0,a=r.length;o<a;++o){var s=r[o];if(e.layerIndex=o,bu(s,n)&&(s.sourceState==iu||s.sourceState==ru)){var u=s.layer.render(e,i);u&&u!==i&&(this.children_.push(u),i=u)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(Do,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],l=u.layer;if(l.hasRenderer()&&bu(u,o)&&i(l)){var c=l.getRenderer().getDataAtPixel(t,e,r);if(c){var h=n(l,c);if(h)return h}}}},e}(Bc),Uc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qc=function(t){function e(e){return(e=An({},e)).controls||(e.controls=Lu()),e.interactions||(e.interactions=kl()),t.call(this,e)||this}return Uc(e,t),e.prototype.createRenderer=function(){return new zc(this)},e}(pu);function Vc(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var Yc="http://www.w3.org/2001/XMLSchema-instance";function Zc(t,e){return ph().createElementNS(t,e)}function Wc(t,e){return function t(e,r,n){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)r?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else{var i=void 0;for(i=e.firstChild;i;i=i.nextSibling)t(i,r,n)}return n}(t,e,[]).join("")}function Hc(t){return"documentElement"in t}function Xc(t){return(new DOMParser).parseFromString(t,"application/xml")}function Kc(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&Mi(n[n.length-1],i)}}function Jc(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&n[n.length-1].push(i)}}function Qc(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&(n[n.length-1]=i)}}function $c(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:n.localName,u=void 0;s in a?u=a[s]:(u=[],a[s]=u),u.push(o)}}}function th(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);void 0!==o&&(i[i.length-1][void 0!==e?e:n.localName]=o)}}function eh(t,e){return function(r,n,i){t.call(void 0!==e?e:this,r,n,i),i[i.length-1].node.appendChild(r)}}function rh(t,e){var r,n;return function(e,i,o){if(void 0===r){r={};var a={};a[e.localName]=t,r[e.namespaceURI]=a,n=nh(e.localName)}lh(r,n,i,o)}}function nh(t,e){var r=t;return function(t,n,i){var o=n[n.length-1].node,a=r;return void 0===a&&(a=i),Zc(void 0!==e?e:o.namespaceURI,a)}}var ih=nh();function oh(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=t[e[i]];return n}function ah(t,e,r){var n,i,o=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)o[t[n]]=e;return o}function sh(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(n,i,r)}}}function uh(t,e,r,n,i){return n.push(t),sh(e,r,n,i),n.pop()}function lh(t,e,r,n,i,o){for(var a,s,u=(void 0!==i?i:r).length,l=0;l<u;++l)void 0!==(a=r[l])&&void 0!==(s=e.call(void 0!==o?o:this,a,n,void 0!==i?i[l]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,n)}function ch(t,e,r,n,i,o,a){return i.push(t),lh(e,r,n,i,o,a),i.pop()}var hh=void 0;var fh=void 0;function ph(){return void 0===fh&&"undefined"!=typeof document&&(fh=document.implementation.createDocument("","",null)),fh}var dh=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=Xc(t);return this.readFromDocument(e)}return Hc(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){},t.prototype.readFromNode=function(t){},t}();function mh(t){return yh(Wc(t,!1))}function yh(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function gh(t){var e=Wc(t,!1),r=Date.parse(e);return isNaN(r)?void 0:r/1e3}function vh(t){return _h(Wc(t,!1))}function _h(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function bh(t){return wh(Wc(t,!1))}function wh(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function Mh(t){return Wc(t,!1).trim()}function Sh(t,e){Oh(t,e?"1":"0")}function xh(t,e){var r=e.toPrecision();t.appendChild(ph().createTextNode(r))}function Eh(t,e){var r=e.toString();t.appendChild(ph().createTextNode(r))}function Oh(t,e){t.appendChild(ph().createTextNode(e))}var Ph=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Th=[null,"http://www.opengis.net/ows/1.1"],Ih=ah(Th,{ServiceIdentification:th((function(t,e){return uh({},Uh,t,e)})),ServiceProvider:th((function(t,e){return uh({},qh,t,e)})),OperationsMetadata:th((function(t,e){return uh({},Dh,t,e)}))}),Lh=function(t){function e(){return t.call(this)||this}return Ph(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=uh({},Ih,t,[]);return e||null},e}(dh),Rh=ah(Th,{DeliveryPoint:th(Mh),City:th(Mh),AdministrativeArea:th(Mh),PostalCode:th(Mh),Country:th(Mh),ElectronicMailAddress:th(Mh)}),Ch=ah(Th,{Value:$c((function(t,e){return Mh(t)}))}),Ah=ah(Th,{AllowedValues:th((function(t,e){return uh({},Ch,t,e)}))}),kh=ah(Th,{Phone:th((function(t,e){return uh({},Bh,t,e)})),Address:th((function(t,e){return uh({},Rh,t,e)}))}),Nh=ah(Th,{HTTP:th((function(t,e){return uh({},jh,t,e)}))}),jh=ah(Th,{Get:$c((function(t,e){var r=Vc(t);if(!r)return;return uh({href:r},Gh,t,e)})),Post:void 0}),Fh=ah(Th,{DCP:th((function(t,e){return uh({},Nh,t,e)}))}),Dh=ah(Th,{Operation:function(t,e){var r=t.getAttribute("name"),n=uh({},Fh,t,e);if(!n)return;e[e.length-1][r]=n}}),Bh=ah(Th,{Voice:th(Mh),Facsimile:th(Mh)}),Gh=ah(Th,{Constraint:$c((function(t,e){var r=t.getAttribute("name");if(!r)return;return uh({name:r},Ah,t,e)}))}),zh=ah(Th,{IndividualName:th(Mh),PositionName:th(Mh),ContactInfo:th((function(t,e){return uh({},kh,t,e)}))}),Uh=ah(Th,{Abstract:th(Mh),AccessConstraints:th(Mh),Fees:th(Mh),Title:th(Mh),ServiceTypeVersion:th(Mh),ServiceType:th(Mh)}),qh=ah(Th,{ProviderName:th(Mh),ProviderSite:th(Vc),ServiceContact:th((function(t,e){return uh({},zh,t,e)}))});var Vh=Lh,Yh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zh=[null,"http://www.opengis.net/wmts/1.0"],Wh=[null,"http://www.opengis.net/ows/1.1"],Hh=ah(Zh,{Contents:th((function(t,e){return uh({},Kh,t,e)}))}),Xh=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new Vh,e}return Yh(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var r=this.owsParser_.readFromNode(t);return r?(r.version=e,(r=uh(r,Hh,t,[]))||null):null},e}(dh),Kh=ah(Zh,{Layer:$c((function(t,e){return uh({},Jh,t,e)})),TileMatrixSet:$c((function(t,e){return uh({},of,t,e)}))}),Jh=ah(Zh,{Style:$c((function(t,e){var r=uh({},Qh,t,e);if(!r)return;var n="true"===t.getAttribute("isDefault");return r.isDefault=n,r})),Format:$c(Mh),TileMatrixSetLink:$c((function(t,e){return uh({},$h,t,e)})),Dimension:$c((function(t,e){return uh({},rf,t,e)})),ResourceURL:$c((function(t,e){var r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};r&&(o.format=r);n&&(o.template=n);i&&(o.resourceType=i);return o}))},ah(Wh,{Title:th(Mh),Abstract:th(Mh),WGS84BoundingBox:th((function(t,e){var r=uh([],nf,t,e);if(2!=r.length)return;return Fr(r)})),Identifier:th(Mh)})),Qh=ah(Zh,{LegendURL:$c((function(t,e){var r={};return r.format=t.getAttribute("format"),r.href=Vc(t),r}))},ah(Wh,{Title:th(Mh),Identifier:th(Mh)})),$h=ah(Zh,{TileMatrixSet:th(Mh),TileMatrixSetLimits:th((function(t,e){return uh([],tf,t,e)}))}),tf=ah(Zh,{TileMatrixLimits:Jc((function(t,e){return uh({},ef,t,e)}))}),ef=ah(Zh,{TileMatrix:th(Mh),MinTileRow:th(bh),MaxTileRow:th(bh),MinTileCol:th(bh),MaxTileCol:th(bh)}),rf=ah(Zh,{Default:th(Mh),Value:$c(Mh)},ah(Wh,{Identifier:th(Mh)})),nf=ah(Wh,{LowerCorner:Jc(sf),UpperCorner:Jc(sf)}),of=ah(Zh,{WellKnownScaleSet:th(Mh),TileMatrix:$c((function(t,e){return uh({},af,t,e)}))},ah(Wh,{SupportedCRS:th(Mh),Identifier:th(Mh)})),af=ah(Zh,{TopLeftCorner:th(sf),ScaleDenominator:th(vh),TileWidth:th(bh),TileHeight:th(bh),MatrixWidth:th(bh),MatrixHeight:th(bh)},ah(Wh,{Identifier:th(Mh)}));function sf(t,e){var r=Mh(t).split(/\s+/);if(r&&2==r.length){var n=+r[0],i=+r[1];if(!isNaN(n)&&!isNaN(i))return[n,i]}}var uf=Xh;function lf(t){return(lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==lf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===lf(o)?o:String(o)),n)}var i,o}var ff=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];cf(this,t),this._listener=e,this._scope=r,this.eventKey_=nq(),this.once_=n}var e,r,n;return e=t,(r=[{key:"fire",value:function(t){var e=t;HU(e)||(e=[e]),this._listener.apply(this._scope,e)}},{key:"getEventKey",value:function(){return this.eventKey_}},{key:"isOnce",value:function(){return this.once_}},{key:"has",value:function(t,e){var r=!1;return r=KU(t)?this._listener===t&&this._scope===e:this.eventKey_===t,r}}])&&hf(e.prototype,r),n&&hf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pf(t){return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function df(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==pf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pf(o)?o:String(o)),n)}var i,o}var mf=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events_={}}var e,r,n;return e=t,(r=[{key:"add",value:function(t,e,r){var n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!XU(t)&&KU(e)&&(XU(this.events_[t])&&(this.events_[t]=[]),-1===this.indexOf(t,e,r))){var o=new ff(e,r,i);this.events_[t].push(o),n=o.getEventKey()}return n}},{key:"remove",value:function(t,e,r){var n=this.events_[t];if(!XU(n)){var i=this.indexOf(t,e,r);-1!==i&&n.splice(i,1)}}},{key:"removeByKey",value:function(t,e){var r=this.events_[t];if(!XU(r)){var n=r.map((function(t,r){var n=-1;return t.getEventKey()===e&&(n=r),n}));-1!==n&&r.splice(n,1)}}},{key:"fire",value:function(t,e){var r=this,n=[].concat(this.events_[t]);XU(n)||n.forEach((function(n){n.fire(e),!0===n.isOnce()&&r.remove(t,n.getEventKey())}))}},{key:"indexOf",value:function(t,e,r){var n=-1,i=this.events_[t];if(!XU(i))for(var o=0,a=i.length;o<a;o+=1)if(i[o].has(e,r)){n=o;break}return n}}])&&df(e.prototype,r),n&&df(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yf(t){return(yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==yf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===yf(o)?o:String(o)),n)}var i,o}var vf=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventsManager_=new mf}var e,r,n;return e=t,(r=[{key:"on",value:function(t,e,r){return this.eventsManager_.add(t,e,r)}},{key:"once",value:function(t,e,r){return this.eventsManager_.add(t,e,r,!0)}},{key:"un",value:function(t,e,r){this.eventsManager_.remove(t,e,r)}},{key:"unByKey",value:function(t,e){this.eventsManager_.remove(t,e)}},{key:"fire",value:function(t,e){var r=e;XU(r)&&(r=[this]),this.eventsManager_.fire(t,r)}}])&&gf(e.prototype,r),n&&gf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_f=r(114),bf=r.n(_f),wf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mf=0,Sf=1;function xf(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}var Ef=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||xf})||this).dragListenerKeys_=[],r.currentResolution_=void 0,r.direction_=Mf,r.dragging_,r.heightLimit_=0,r.widthLimit_=0,r.startX_,r.startY_,r.thumbSize_=null,r.sliderInitialized_=!1,r.duration_=void 0!==n.duration?n.duration:200;var i=void 0!==n.className?n.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=i+"-thumb ol-unselectable";var a=r.element;return a.className=i+" ol-unselectable ol-control",a.appendChild(o),a.addEventListener(So,r.handleDraggerStart_.bind(r),!1),a.addEventListener(Mo,r.handleDraggerDrag_.bind(r),!1),a.addEventListener(xo,r.handleDraggerEnd_.bind(r),!1),a.addEventListener(ji,r.handleContainerClick_.bind(r),!1),o.addEventListener(ji,Ii,!1),r}return wf(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,r=t.offsetHeight,n=t.firstElementChild,i=getComputedStyle(n),o=n.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),a=n.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);this.thumbSize_=[o,a],e>r?(this.direction_=Sf,this.widthLimit_=e-o):(this.direction_=Mf,this.heightLimit_=r-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),r=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),i=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:i,duration:this.duration_,easing:wa})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var r=this.handleDraggerDrag_,n=this.handleDraggerEnd_;this.dragListenerKeys_.push(di(document,Mo,r,this),di(document,xo,n,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,r=t.clientY-this.startY_,n=this.getRelativePosition_(e,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(yi),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),r=this.element.firstElementChild;this.direction_==Sf?r.style.left=this.widthLimit_*e+"px":r.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){return sr(this.direction_===Sf?t/this.widthLimit_:e/this.heightLimit_,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return sr(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},e}(mu);function Of(t){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Of(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Of(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Of(o)?o:String(o)),n)}var i,o}function Tf(t,e){return(Tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function If(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Rf(t);if(e){var i=Rf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Lf(this,r)}}function Lf(t,e){if(e&&("object"===Of(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Rf(t){return(Rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tf(t,e)}(o,t);var e,r,n,i=If(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,dq({},t,!0))).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&Pf(e.prototype,r),n&&Pf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ef),Af=function(t){throw t};function kf(t){return(kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==kf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===kf(o)?o:String(o)),n)}var i,o}function jf(t,e){return(jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Gf(t);if(e){var i=Gf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Df(this,r)}}function Df(t,e){if(e&&("object"===kf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bf(t)}function Bf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gf(t){return(Gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jf(t,e)}(o,t);var e,r,n,i=Ff(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).impl_=t,!XU(e.impl_)&&KU(e.impl_.setFacadeObj)&&e.impl_.setFacadeObj(Bf(e)),e}return e=o,(r=[{key:"getImpl",value:function(){return this.impl_}},{key:"setImpl",value:function(t){this.impl_=t}},{key:"destroy",value:function(){!XU(this.impl_)&&KU(this.impl_.destroy)&&this.impl_.destroy()}}])&&Nf(e.prototype,r),n&&Nf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vf),Uf="load",qf=r(115),Vf=r(116),Yf={attributions:{esAttributions:r(117),enAttributions:r(118)},backimglayer:{esBackimglayer:r(119),enBackimglayer:r(120)},beautytoc:{esBeautytoc:r(121),enBeautytoc:r(122)},buffer:{esBuffer:r(123),enBuffer:r(124)},calendar:{esCalendar:r(125),enCalendar:r(126)},comparepanel:{esComparepanel:r(127),enComparepanel:r(128)},contactlink:{esContactlink:r(129),enContactlink:r(130)},fulltoc:{esFulltoc:r(131),enFulltoc:r(132)},geometrydraw:{esGeometrydraw:r(133),enGeometrydraw:r(134)},georefimage:{esGeorefimage:r(135),enGeorefimage:r(136)},georefimage2:{esGeorefimage2:r(137),enGeorefimage2:r(138)},iberpixcompare:{esIberpixcompare:r(139),enIberpixcompare:r(140)},ignsearch:{esIgnsearch:r(141),enIgnsearch:r(142)},ignsearchlocator:{esIgnsearchlocator:r(143),enIgnsearchlocator:r(144)},incicarto:{esIncicarto:r(145),enIncicarto:r(146)},infocatastro:{esInfocatastro:r(147),enInfocatastro:r(148)},infocoordinates:{esInfocoordinates:r(149),enInfocoordinates:r(150)},information:{esInformation:r(151),enInformation:r(152)},lyrcompare:{esLyrcompare:r(153),enLyrcompare:r(154)},measurebar:{esMeasurebar:r(155),enMeasurebar:r(156)},mirrorpanel:{esMirrorpanel:r(157),enMirrorpanel:r(158)},mousesrs:{esMousesrs:r(159),enMousesrs:r(160)},overviewmap:{esOverviewmap:r(161),enOverviewmap:r(162)},popup:{esPopup:r(163),enPopup:r(164)},predefinedzoom:{esPredefinedzoom:r(165),enPredefinedzoom:r(166)},printermap:{esPrintermap:r(167),enPrintermap:r(168)},queryattributes:{esQueryattributes:r(169),enQueryattributes:r(170)},rescale:{esRescale:r(171),enRescale:r(172)},selectiondraw:{esSelectiondraw:r(173),enSelectiondraw:r(174)},selectionzoom:{esSelectionzoom:r(175),enSelectionzoom:r(176)},sharemap:{esSharemap:r(177),enSharemap:r(178)},stylemanager:{esStylemanager:r(179),enStylemanager:r(180)},timeline:{esTimeline:r(181),enTimeline:r(182)},toc:{esToc:r(183),enToc:r(184)},topographicprofile:{esTopographicprofile:r(185),enTopographicprofile:r(186)},transparency:{esTransparency:r(187),enTransparency:r(188)},vectors:{esVectors:r(189),enVectors:r(190)},viewhistory:{esViewhistory:r(191),enViewhistory:r(192)},xylocator:{esXylocator:r(193),enXylocator:r(194)},zoomextent:{esZoomextent:r(195),enZoomextent:r(196)},zoompanel:{esZoompanel:r(197),enZoompanel:r(198)},viewshed:{esViewshed:r(199),enViewshed:r(200)},viewmanagement:{esViewmanagement:r(201),enViewmanagement:r(202)}},Zf={translations:{en:qf,es:Vf},lang:"es"},Wf=function(t){return"es"===t?(Zf.translations[t].attributions=Yf.attributions.esAttributions,Zf.translations[t].backimglayer=Yf.backimglayer.esBackimglayer,Zf.translations[t].beautytoc=Yf.beautytoc.esBeautytoc,Zf.translations[t].buffer=Yf.buffer.esBuffer,Zf.translations[t].calendar=Yf.calendar.esCalendar,Zf.translations[t].comparepanel=Yf.comparepanel.esComparepanel,Zf.translations[t].contactlink=Yf.contactlink.esContactlink,Zf.translations[t].fulltoc=Yf.fulltoc.esFulltoc,Zf.translations[t].geometrydraw=Yf.geometrydraw.esGeometrydraw,Zf.translations[t].georefimage=Yf.georefimage.esGeorefimage,Zf.translations[t].georefimage2=Yf.georefimage2.esGeorefimage2,Zf.translations[t].iberpixcompare=Yf.iberpixcompare.esIberpixcompare,Zf.translations[t].ignsearch=Yf.ignsearch.esIgnsearch,Zf.translations[t].ignsearchlocator=Yf.ignsearchlocator.esIgnsearchlocator,Zf.translations[t].incicarto=Yf.incicarto.esIncicarto,Zf.translations[t].infocatastro=Yf.infocatastro.esInfocatastro,Zf.translations[t].infocoordinates=Yf.infocoordinates.esInfocoordinates,Zf.translations[t].information=Yf.information.esInformation,Zf.translations[t].lyrcompare=Yf.lyrcompare.esLyrcompare,Zf.translations[t].measurebar=Yf.measurebar.esMeasurebar,Zf.translations[t].mirrorpanel=Yf.mirrorpanel.esMirrorpanel,Zf.translations[t].mousesrs=Yf.mousesrs.esMousesrs,Zf.translations[t].popup=Yf.popup.esPopup,Zf.translations[t].predefinedzoom=Yf.predefinedzoom.esPredefinedzoom,Zf.translations[t].printermap=Yf.printermap.esPrintermap,Zf.translations[t].queryattributes=Yf.queryattributes.esQueryattributes,Zf.translations[t].rescale=Yf.rescale.esRescale,Zf.translations[t].selectiondraw=Yf.selectiondraw.esSelectiondraw,Zf.translations[t].selectionzoom=Yf.selectionzoom.esSelectionzoom,Zf.translations[t].sharemap=Yf.sharemap.esSharemap,Zf.translations[t].stylemanager=Yf.stylemanager.esStylemanager,Zf.translations[t].timeline=Yf.timeline.esTimeline,Zf.translations[t].toc=Yf.toc.esToc,Zf.translations[t].topographicprofile=Yf.topographicprofile.esTopographicprofile,Zf.translations[t].transparency=Yf.transparency.esTransparency,Zf.translations[t].vectors=Yf.vectors.esVectors,Zf.translations[t].viewhistory=Yf.viewhistory.esViewhistory,Zf.translations[t].xylocator=Yf.xylocator.esXylocator,Zf.translations[t].zoomextent=Yf.zoomextent.esZoomextent,Zf.translations[t].zoompanel=Yf.zoompanel.esZoompanel,Zf.translations[t].viewshed=Yf.viewshed.esViewshed,Zf.translations[t].viewmanagement=Yf.viewmanagement.esViewmanagement):"en"===t&&(Zf.translations[t].attributions=Yf.attributions.enAttributions,Zf.translations[t].backimglayer=Yf.backimglayer.enBackimglayer,Zf.translations[t].beautytoc=Yf.beautytoc.enBeautytoc,Zf.translations[t].buffer=Yf.buffer.enBuffer,Zf.translations[t].calendar=Yf.calendar.enCalendar,Zf.translations[t].comparepanel=Yf.comparepanel.enComparepanel,Zf.translations[t].contactlink=Yf.contactlink.enContactlink,Zf.translations[t].fulltoc=Yf.fulltoc.enFulltoc,Zf.translations[t].geometrydraw=Yf.geometrydraw.enGeometrydraw,Zf.translations[t].georefimage=Yf.georefimage.enGeorefimage,Zf.translations[t].georefimage2=Yf.georefimage2.enGeorefimage2,Zf.translations[t].iberpixcompare=Yf.iberpixcompare.enIberpixcompare,Zf.translations[t].ignsearch=Yf.ignsearch.enIgnsearch,Zf.translations[t].ignsearchlocator=Yf.ignsearchlocator.enIgnsearchlocator,Zf.translations[t].incicarto=Yf.incicarto.enIncicarto,Zf.translations[t].infocatastro=Yf.infocatastro.enInfocatastro,Zf.translations[t].infocoordinates=Yf.infocoordinates.enInfocoordinates,Zf.translations[t].information=Yf.information.enInformation,Zf.translations[t].lyrcompare=Yf.lyrcompare.enLyrcompare,Zf.translations[t].measurebar=Yf.measurebar.enMeasurebar,Zf.translations[t].mirrorpanel=Yf.mirrorpanel.enMirrorpanel,Zf.translations[t].mousesrs=Yf.mousesrs.enMousesrs,Zf.translations[t].popup=Yf.popup.enPopup,Zf.translations[t].predefinedzoom=Yf.predefinedzoom.enPredefinedzoom,Zf.translations[t].printermap=Yf.printermap.enPrintermap,Zf.translations[t].queryattributes=Yf.queryattributes.enQueryattributes,Zf.translations[t].rescale=Yf.rescale.enRescale,Zf.translations[t].selectiondraw=Yf.selectiondraw.enSelectiondraw,Zf.translations[t].selectionzoom=Yf.selectionzoom.enSelectionzoom,Zf.translations[t].sharemap=Yf.sharemap.enSharemap,Zf.translations[t].stylemanager=Yf.stylemanager.enStylemanager,Zf.translations[t].timeline=Yf.timeline.enTimeline,Zf.translations[t].toc=Yf.toc.enToc,Zf.translations[t].topographicprofile=Yf.topographicprofile.enTopographicprofile,Zf.translations[t].transparency=Yf.transparency.enTransparency,Zf.translations[t].vectors=Yf.vectors.enVectors,Zf.translations[t].viewhistory=Yf.viewhistory.enViewhistory,Zf.translations[t].xylocator=Yf.xylocator.enXylocator,Zf.translations[t].zoomextent=Yf.zoomextent.enZoomextent,Zf.translations[t].zoompanel=Yf.zoompanel.enZoompanel,Zf.translations[t].viewshed=Yf.viewshed.enViewshed,Zf.translations[t].viewmanagement=Yf.viewmanagement.enViewmanagement),Zf.translations[t]},Hf=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zf.lang;return Wf(e)[t]};function Xf(t){return(Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Xf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Xf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Xf(o)?o:String(o)),n)}var i,o}function Jf(t,e){return(Jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Qf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tp(t);if(e){var i=tp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $f(this,r)}}function $f(t,e){if(e&&("object"===Xf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tp(t){return(tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ep=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jf(t,e)}(o,t);var e,r,n,i=Qf(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=t;return r=i.call(this,n),YU(n.addTo)&&Af(Hf("exception").addto_method),YU(n.getElement)&&Af(Hf("exception").getelement_method),YU(n.isByDefault)&&(n.isByDefault=!0),r.name=e,r.map_=null,r.element_=null,r.activationBtn_=null,r.activated=!1,r.panel_=null,r.controls_=null,r}return e=o,(r=[{key:"setImpl",value:function(t){var e=t;YU(e.addTo)&&Af(Hf("exception").addto_method),YU(e.getElement)&&Af(Hf("exception").getelement_method),YU(e.isByDefault)&&(e.isByDefault=!0)}},{key:"addTo",value:function(t){var e=this;this.map_=t;var r=this.getImpl(),n=this.createView(t);n instanceof Promise?n.then((function(n){e.manageActivation(n),r.addTo(t,n),e.fire("added:map")})):(this.manageActivation(n),r.addTo(t,n),this.fire("added:map"))}},{key:"createView",value:function(t){}},{key:"manageActivation",value:function(t){var e=this;this.element_=t,this.activationBtn_=this.getActivationButton(this.element_),XU(this.activationBtn_)||this.activationBtn_.addEventListener("click",(function(t){t.preventDefault(),e.activated?(e.deactivate(),e.activated=!1):(e.activate(),e.activated=!0)}),!1)}},{key:"getActivationButton",value:function(t){}},{key:"activate",value:function(){XU(this.element_)||this.element_.classList.add("activated"),YU(this.getImpl().activate)||this.getImpl().activate(),this.activated=!0,this.fire("activated")}},{key:"deactivate",value:function(){XU(this.element_)||this.element_.classList.remove("activated"),YU(this.getImpl().deactivate)||this.getImpl().deactivate(),this.activated=!1,this.fire("deactivated")}},{key:"getElement",value:function(){return this.getImpl().getElement()}},{key:"setPanel",value:function(t){this.panel_=t}},{key:"getPanel",value:function(){return this.panel_}},{key:"destroy",value:function(){}}])&&Kf(e.prototype,r),n&&Kf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf),rp=r(31),np=r.n(rp);function ip(t){return function(t){const e=t.compile;return t.compile=function(t,r){const n=e.call(this,t,r);return function(t,e){return n(t,function(t){return{allowProtoPropertiesByDefault:!0,allowProtoMethodsByDefault:!0,...t}}(e))}},t}(t.create())}var op=function(t){t.registerHelper("gt",(function(t,e,r){return t>e?r.fn(this):r.inverse(this)})),t.registerHelper("lt",(function(t,e,r){return t<e?r.fn(this):r.inverse(this)})),t.registerHelper("eq",(function(t,e,r){return Object.equals(t,e)?r.fn(this):r.inverse(this)})),t.registerHelper("oneword",(function(t,e){return/\s/g.test(bq(t))?e.inverse(this):e.fn(this)})),t.registerHelper("printType",(function(t,e,r,n,i){var o="<li id=".concat(r,'><span id="info">').concat(e,"</span>");return"Municipio"!==t&&"provincia"!==t&&"comunidad autonoma"!==t&&!0!==i||(o+=" (".concat(t,")")),void 0!==n&&(o+=" en ".concat(n)),o})),t.registerHelper("pattern",(function(t){var e="";return t.data.root.fields.forEach((function(t){if(t.isFormatter&&void 0!==t.typeparam)for(var r=t.typeparam,n=t.value,i=0;i<n;i+=1)e+=r})),e})),t.registerHelper("formatterStr",(function(t){var e,r,n="";r=t.value,e=t.typeparam;for(var i=0;i<r;i+=1)n+=e;return n})),t.registerHelper("ifCond",(function(t,e,r){return t===e?r.fn(void 0):r.inverse(void 0)})),t.registerHelper("sum",(function(t,e){return t+e})),t.registerHelper("neq",(function(t,e,r){return Object.equals(t,e)?r.inverse(void 0):r.fn(void 0)})),t.registerHelper("unless",(function(t,e){return t?e.inverse(void 0):e.fn(void 0)})),t.registerHelper("get",(function(t,e){return e[t]})),t.registerHelper("uppercase",(function(t){return t.toUpperCase()})),t.registerHelper("lowercase",(function(t){return t.toLowerCase()}))},ap={},sp=function(t,e){var r,n={};YU(e)||(n=Mq(n,e.vars),r=e.parseToHtml);var i=ip(np.a);op(i);var o=i.compile(t)(n);return!1!==r?cq(o):o},up=function(t,e){var r;return YU(e)||(r=e.scope),new Promise((function(n,i){var o=ap[t];if(YU(o)){var a=t;YU(e)||!0!==e.jsonp||(a=function(t){var e=null;return XU(t)||(e=(e=M.config.MAPEA_URL.concat(M.config.TEMPLATES_PATH)).concat(t)),e}(t));var s=XU(e)&&!0===e.jsonp;jU(a,null,{jsonp:s}).then((function(e){var i=ip(np.a);op(i),o=i.compile(e.text),ap[t]=o,n.call(r,o)}))}else n.call(r,o)}))};function lp(t){return(lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==lp(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===lp(o)?o:String(o)),n)}var i,o}function fp(t,e){return(fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mp(t);if(e){var i=mp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return dp(this,r)}}function dp(t,e){if(e&&("object"===lp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mp(t){return(mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fp(t,e)}(o,t);var e,r,n,i=pp(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cp(this,o);var r=new Cf(e);return t=i.call(this,r,o.NAME),YU(Cf)&&Af(Hf("exception").panzoombar_method),t}return e=o,(r=[{key:"createView",value:function(t){return sp(bf.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&hp(e.prototype,r),n&&hp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ep);yp.NAME="panzoombar";var gp=yp,vp="WMC",_p="KML",bp="WMS",wp="WFS",Mp="OGCAPIFeatures",Sp="WMTS",xp="OSM",Ep="XYZ",Op="TMS",Pp="GeoJSON",Tp="Vector",Ip="MVT",Lp="MBTiles",Rp="MBTilesVector",Cp={WMC:vp,KML:_p,WMS:bp,WFS:wp,WMTS:Sp,OSM:xp,GeoJSON:Pp,Vector:Tp,MVT:Ip,XYZ:Ep,TMS:Op,MBTiles:Lp,MBTilesVector:Rp,OGCAPIFeatures:Mp},Ap=function(t){var e=tq(t,!0);return e="WMS_FULL"===e?bp:"WFST"===e?wp:Object.keys(Cp).find((function(t){var r=Cp[t];return QU(r)&&tq(r,!0)===e})),Cp[e]},kp=function(t){return-1!==[vp,_p,bp,wp,Sp,Ip,Ep,Op,Lp,Rp,Mp].indexOf(Ap(t))},Np={};r(224),r(225);function jp(t){return(jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Fp=/OSM\.*/,Dp=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(QU(e)&&t.test(e)){var l=e.split("*")[o];XU(l)||(s=u[n](l))}else JU(e)?s=e[r]:Af("El parámetro no es de un tipo soportado: ".concat(jp(e)));return QU(s)&&(s=s.trim()),!0===a&&(s=tq(s)),s}},Bp=function(t){var e=t,r=[];XU(e)&&(e={type:xp,name:"osm"});var n=e;return HU(n)||(n=[n]),r=n.map((function(t){return{type:xp,transparent:Dp({parameter:t,type:"boolean",attr:"transparent"})(Fp,1),legend:Dp({parameter:t,type:"string",name:"legend"})(Fp,2),name:Dp({parameter:t,type:"string",name:"name"})(Fp,3)}})),HU(e)||(r=r[0]),r};function Gp(t){return(Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zp=function(t){var e=t,r={};if(XU(e)&&Af(Hf("exception").no_center),QU(e))if(e=tq(e),/^-?\d+(\.\d+)?[,;]-?\d+(\.\d+)?([*](true|false))?$/i.test(e)){var n=e.split(/\*/),i=n[0],o=n[1],a=i.split(/[,;]+/);2===a.length?(r.x=Number.parseFloat(a[0]),r.y=Number.parseFloat(a[1])):Af(Hf("exception").invalid_center_param),r.draw=/^1|(true)$/i.test(o)}else Af(Hf("exception").invalid_center_param);else HU(e)?2===e.length||3===e.length?(QU(e[0])&&(e[0]=Number.parseFloat(e[0])),QU(e[1])&&(e[1]=Number.parseFloat(e[1])),r.x=e[0],r.y=e[1]):Af(Hf("exception").invalid_center_param):JU(e)?(WU(e.x)?Af(Hf("exception").invalid_center_param):(QU(e.x)&&(e.x=Number.parseFloat(e.x)),r.x=e.x),WU(e.y)?Af(Hf("exception").invalid_center_param):(QU(e.y)&&(e.y=Number.parseFloat(e.y)),r.y=e.y),WU(e.draw)?r.draw=!1:r.draw=/^true$/.test(e.draw)):Af("El parámetro no es de un tipo soportado: ".concat("undefined"==typeof maxExtentParameter?"undefined":Gp(maxExtentParameter)));return(Number.isNaN(r.x)||Number.isNaN(r.y))&&Af(Hf("exception").invalid_center_param),r},Up=function(t,e){var r;if(QU(t))if(/^\s*osm\s*$/i.test(t))r=xp;else{var n=t.match(/^(\w+)\*.+$/);n&&n.length>1&&(r=Ap(n[1]),YU(r)&&Af("No se reconoce el tipo de capa ".concat(n[1]))),YU(r)&&!XU(e)?r=e:YU(r)&&Af("No se reconoce el tipo de capa ".concat(r))}else JU(t)?XU(t.type)||(r=Ap(t.type),YU(r)&&Af("No se reconoce el tipo de capa ".concat(r))):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return XU(r)||XU(e)||r===e||Af("El tipo de la capa (".concat(r).concat(") no era el esperado (").concat(e).concat(")")),XU(r)&&!XU(e)&&(r=e),r},qp=function(t){var e,r=t;if(!XU(r)){if(e={x:{},y:{}},XU(r)&&Af(Hf("exception").no_maxextent),QU(r))if(/^\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?$/.test(r)){var n=r.split(/[,;]+/);4===n.length?(e.x.min=Number.parseFloat(n[0]),e.y.min=Number.parseFloat(n[1]),e.x.max=Number.parseFloat(n[2]),e.y.max=Number.parseFloat(n[3])):Af(Hf("exception").invalid_maxextent_param)}else Af(Hf("exception").invalid_maxextent_param);else HU(r)?4===r.length?(QU(r[0])&&(r[0]=Number.parseFloat(r[0])),QU(r[1])&&(r[1]=Number.parseFloat(r[1])),QU(r[2])&&(r[2]=Number.parseFloat(r[2])),QU(r[3])&&(r[3]=Number.parseFloat(r[3])),e.x.min=r[0],e.y.min=r[1],e.x.max=r[2],e.y.max=r[3]):Af(Hf("exception").invalid_maxextent_param):JU(r)?(WU(r.left)?WU(r.x.min)?Af(Hf("exception").invalid_maxextent_param):(QU(r.x.min)&&(r.x.min=Number.parseFloat(r.x.min)),e.x.min=r.x.min):(QU(r.left)&&(r.left=Number.parseFloat(r.left)),e.x.min=r.left),WU(r.bottom)?WU(r.y.min)?Af(Hf("exception").invalid_maxextent_param):(QU(r.y.min)&&(r.y.min=Number.parseFloat(r.y.min)),e.y.min=r.y.min):(QU(r.bottom)&&(r.bottom=Number.parseFloat(r.bottom)),e.y.min=r.bottom),WU(r.right)?WU(r.x.max)?Af(Hf("exception").invalid_maxextent_param):(QU(r.x.max)&&(r.x.max=Number.parseFloat(r.x.max)),e.x.max=r.x.max):(QU(r.right)&&(r.right=Number.parseFloat(r.right)),e.x.max=r.right),WU(r.top)?WU(r.y.max)?Af(Hf("exception").invalid_maxextent_param):(QU(r.y.max)&&(r.y.max=Number.parseFloat(r.y.max)),e.y.max=r.y.max):(QU(r.top)&&(r.top=Number.parseFloat(r.top)),e.y.max=r.top)):Af("El parámetro no es de un tipo soportado: ".concat(Gp(r)));(Number.isNaN(e.x.min)||Number.isNaN(e.y.min)||Number.isNaN(e.x.max)||Number.isNaN(e.y.max))&&Af(Hf("exception").invalid_maxextent_param)}return e},Vp=function(t){var e={code:null,units:null};if(XU(t)&&Af(Hf("exception").no_projection),QU(t))if(/^(EPSG:)?\d+\*((d(egrees)?)|(m(eters)?))$/i.test(t)){var r=t.split(/\*/);e.code=r[0],e.units=tq(r[1].substring(0,1))}else Af("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ));else JU(t)?WU(t.code)||WU(t.units)?Af("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ)):(e.code=t.code,e.units=tq(t.units.substring(0,1))):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return"m"!==e.units&&"d"!==e.units&&Af('La unidad "'.concat(t.units,'" del parámetro projection no es válida. Las disponibles son: "m" o "d"')),e},Yp=function(t){var e=t,r=[];XU(e)&&Af(Hf("exception").no_resolutions),QU(e)&&(/^\d+(\.\d+)?([,;]\d+(\.\d+)?)*$/.test(e)?e=e.split(/[,;]+/):Af(Hf("exception").invalid_resolutions_param)),HU(e)?r=e.map((function(t){return QU(t)?Number.parseFloat(t):t})):Af("El parámetro no es de un tipo soportado: ".concat(Gp(e)));for(var n=!0,i=0,o=r.length;i<o&&n;i+=1)n=!Number.isNaN(r[i]);return n||Af(Hf("exception").invalid_resolutions_param),r},Zp=function(t){var e,r=t;return XU(r)&&Af(Hf("exception").no_zoom),QU(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:Af("El parámetro no es de un tipo soportado: ".concat(Gp(r))),Number.isNaN(e)&&Af(Hf("exception").invalid_zoom_param),e},Wp=function(t){var e,r=t;return XU(r)&&Af(Hf("exception").no_zoom),QU(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:Af("El parámetro no es de un tipo soportado: ".concat(Gp(r))),Number.isNaN(e)&&Af(Hf("exception").invalid_zoom_param),e},Hp=function(t){var e,r=t;return XU(r)&&Af(Hf("exception").no_zoom),QU(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:Af("El parámetro no es de un tipo soportado: ".concat(Gp(r))),Number.isNaN(e)&&Af(Hf("exception").invalid_zoom_param),e},Xp=function(t){var e;return QU(t)?/^KML\*.+/i.test(t)?/^KML\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(t)&&(e=t.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(t)||/^[^*]*/.test(t))&&(e=t.split(/\*/)[0].trim()):JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},Kp=function(t){var e,r;return QU(t)?/^KML\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(t)?e=(r=t.split(/\*/))[r.length-3].trim():/^[^*]+\*[^*]+\*(true|false)$/i.test(t)?e=(r=t.split(/\*/))[2].trim():/^[^*]+\*(true|false)$/i.test(t)&&(e=(r=t.split(/\*/))[1].trim()):JU(t)?e=tq(t.extract):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e=XU(e)?void 0:/^1|(true)$/i.test(e)},Jp=function(t){var e,r;return QU(t)?e="false"!==(e=(r=t.split(/\*/))[r.length-2].trim()):JU(t)?e=tq(t.label):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e},Qp=function(t){var e,r;return QU(t)?e="false"!==(e=(r=t.split(/\*/))[r.length-1].trim()):JU(t)?e=tq(t.visibility):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e},$p=function(t){var e;if(QU(t))if(/^KML\*[^*]+\*[^*]+\*[^*]+\.kml\*(true|false)$/i.test(t)){var r=t.split(/\*/);e=r[2].concat(r[3])}else{var n=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)\*.*/i);n&&n.length>2&&(e=n[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},td=function(t){var e=t,r=[];XU(e)&&Af(Hf("exception").no_param);var n=e;return HU(n)||(n=[n]),r=n.map((function(t){var e={};return e.type=_p,e.name=Xp(t),e.url=$p(t),e.extract=Kp(t),e.label=Jp(t),e.visibility=Qp(t),e})),HU(e)||(r=r[0]),r},ed=function(t){var e;return QU(t)?/^WFS(T)?\*.+/i.test(t)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(t)||/^[^*]*\*[^*]+:[^*]+/.test(t)?e=t.split(/\*/)[3].trim().split(":")[1]:/^WFS(T)?\*[^*]*\*[^*]+[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim()):/^[^*]*\*[^*]+:[^*]+/.test(t)&&(e=t.split(/\*/)[1].trim().split(":")[1]):JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},rd=function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},nd=function(t){var e;return QU(t)?/^WFS(T)?\*.+/i.test(t)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim().split(":")[0]):/^[^*]*\*[^*]+:[^*]+/.test(t)&&(e=t.split(/\*/)[1].trim().split(":")[0]):JU(t)&&!XU(t.namespace)?e=t.namespace.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},id=function(t){var e;return QU(t)?/^WFS(T)?\*[^*]/i.test(t)?e=t.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):JU(t)&&!XU(t.legend)?e=t.legend.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},od=function(t){var e;return QU(t)?(/^[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim()),/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*/i.test(t)&&(e=t.split(/\*/)[6].trim())):JU(t)&&!XU(t.cql)||!XU(t.ecql)?e=t.cql?t.cql.trim():t.ecql.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),(/^(true|false)$/i.test(e)||/^\d\.\d\.\d$/.test(e))&&(e=void 0),e},ad=function(t){var e;return QU(t)?/^WFS(T)?\*.+/i.test(t)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+/i.test(t)||/^WFS(T)?\*[^*]*\*[^*][^*]+\*[^*]+/i.test(t))&&(e=t.split(/\*/)[4].trim()):JU(t)&&!XU(t.geometry)?e=t.geometry.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},sd=function(t){var e;return QU(t)?/^WFS(T)?\*.+/i.test(t)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*(.-?)+$/i.test(t)||/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]+\*(.-?)+$/i.test(t))&&(e=t.split(/\*/)[5].trim().split("-")):JU(t)&&!XU(t.ids)?e=t.ids:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),$U(e)&&(e=null),XU(e)||HU(e)||(e=[e]),e},ud=function(t){var e;return QU(t)?/^WFS(T)?\*.+/i.test(t)&&/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*\*[^*]*/i.test(t)&&(e=t.split(/\*/)[7].trim()):JU(t)&&!XU(t.style)?e=t.style:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e},ld=function(t){var e;return QU(t)?/(\d\.\d\.\d)$/.test(t)&&(e=t.match(/\d\.\d\.\d$/)[0]):JU(t)?e=t.version:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e},cd=function(t){var e;return JU(t)&&(e=tq(t.extract)),e=XU(e)?void 0:/^1|(true)$/i.test(e)},hd=function(t){var e;return QU(t)||(JU(t)?e=t.options:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)))),e},fd=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(e){var r={};return r.type=wp,r.name=ed(e),r.url=rd(e),r.namespace=nd(e),r.legend=id(e),r.cql=od(e),r.geometry=ad(e),r.ids=sd(e),r.version=ld(e),r.extract=cd(e),r.style=ud(e),r.options=hd(e),r.outputFormat=t.outputFormat,r})),HU(t)||(e=e[0]),e},pd=function(t){var e;return QU(t)?/^GeoJSON(T)?\*[^*]/i.test(t)?e=t.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):JU(t)&&!XU(t.legend)?e=t.legend.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},dd=function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},md=function(t){var e,r;if(QU(t)){if(r=t.split(/\*/),/^GeoJSON\*[^*]+\*[^*]/i.test(t)){var n=r[2];-1===n.indexOf("http")&&-1===n.indexOf("https")&&(e=n)}}else JU(t)?e=t.source:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},yd=function(t){var e,r;return QU(t)?/^GeoJSON\*[^*]+\*[^*]+\*[^*]*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():(r=t.split(/\*/)[3],e=!XU(r)&&[r]):JU(t)?e=tq(t.extract):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e},gd=function(t){var e;return QU(t)?/^GeoJSON\*[^*]+\*[^*]+\*[^*]*(true|false)+\*[^*]/i.test(t)&&(/^GeoJSON(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]*/i.test(t)||/^GeoJSON(T)?\*[^*]*\*[^*]+\*/i.test(t))&&(e=t.split(/\*/)[4].trim()):JU(t)&&!XU(t.style)?e=t.style:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e},vd=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e={};return e.type=Pp,e.name=pd(t),e.url=dd(t),e.source=md(t),e.extract=yd(t),e.style=gd(t),e})),HU(t)||(e=e[0]),e},_d=function(t){var e;if(QU(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+).*/i);r&&r.length>1&&(e=r[1])}}else JU(t)&&!XU(t.url)?e=t.url.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},bd=function(t){var e;if(QU(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+)\*([^*]+)/i);r&&r.length>2&&(e=r[2])}}else JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},wd=function(t){var e=[];XU(t)&&Af("No ha especificado ningún parámetro");var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e={};return e.type=Ip,e.name=bd(t),e.url=_d(t),e})),HU(t)||(e=e[0]),e},Md=function(t,e){var r;return QU(t)?/^\w{3,7}\*[^*]+\*[^*]+$/.test(t)?r=t.split(/\*/)[2].trim():/^\w{3,7}\*[^*]$/.test(t)||/^[^*]+\*[^*]+$/.test(t)?r=t.split(/\*/)[1].trim():/^[^*]+$/.test(t)&&!$U(t)&&(r=t):JU(t)?r=tq(t.name):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),$U(r)&&(r=null),r},Sd=function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},xd=function(t){var e;return QU(t)||(JU(t)?e=t.options:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)))),e},Ed=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e={};return e.type=vp,e.name=Md(t),e.url=Sd(t),e.options=xd(t),e})),HU(t)||(e=e[0]),e},Od=function(t){var e;return QU(t)?/^WMS\*.+/i.test(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim()):/^[^*]*\*[^*]+/.test(t)?e=t.split(/\*/)[1].trim():/^[^*]*/.test(t)&&(e=t.split(/\*/)[0].trim()):JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},Pd=function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},Td=function(t){var e;return QU(t)?/^WMS\*[^*]/i.test(t)?e=t.split(/\*/)[1].trim():/^[^*]+\*[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):JU(t)&&!XU(t.legend)?e=t.legend.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},Id=function(t){var e;return QU(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[4].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(t)?(t.split(/\*/),e=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(t)&&(e=t.split(/\*/)[2].trim()):JU(t)?e=tq(t.transparent):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Ld=function(t){var e;return QU(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t)?e=t.split(/\*/)[5].trim():/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=!0:/^WMS_FULL\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[2].trim():(/^[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t)||/^[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t))&&t.split(/\*/):JU(t)?e=tq(t.tiled):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Rd=function(t){var e;if(QU(t)){if(/^WMS(\*[^*]*){6}$/i.test(t))e=t.split(/\*/)[6].trim();else if(/^WMS_FULL(\*[^*]*){3}/i.test(t)){e=t.split(/\*/)[3].trim()}XU(e)||(e=e.split(/[,;]+/))}else JU(t)?e=t.maxExtent:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return XU(e)||4!==e.length?XU(e)||Af(Hf("exception").invalid_maxextent_param):(QU(e[0])&&(e[0]=Number.parseFloat(e[0])),QU(e[1])&&(e[1]=Number.parseFloat(e[1])),QU(e[2])&&(e[2]=Number.parseFloat(e[2])),QU(e[3])&&(e[3]=Number.parseFloat(e[3]))),e},Cd=function(t){var e;return QU(t)?/(\d\.\d\.\d)$/.test(t)&&(e=t.match(/\d\.\d\.\d$/)[0]):JU(t)?e=t.version:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e},Ad=function(t){var e;return QU(t)||(JU(t)?e=t.options:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)))),e},kd=function(t){var e;return QU(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[8].trim()):JU(t)?e=tq(t.displayInLayerSwitcher):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Nd=function(t){var e;return QU(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[9].trim()):JU(t)?e=tq(t.queryable):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},jd=function(t){var e;return QU(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[10].trim()):JU(t)?e=tq(t.visibility):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Fd=function(t){var e;return QU(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[11].trim()):JU(t)?e=tq(t.useCapabilities):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Dd=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e=bp,r=Od(t),n=Pd(t),i=Td(t),o=Id(t),a=Ld(t),s=Rd(t),u=Cd(t),l=Ad(t);return{type:e,name:r,url:n,legend:i,transparent:o,tiled:a,maxExtent:s,version:u,displayInLayerSwitcher:kd(t),queryable:Nd(t),visibility:jd(t),options:l,useCapabilities:Fd(t)}})),HU(t)||(e=e[0]),e},Bd=function(t){var e;return QU(t)?/^WMTS\*.+/i.test(t)?/^WMTS\*[^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[2].trim()):/^[^*]*\*[^*]+/.test(t)&&(e=t.split(/\*/)[1].trim()):JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},Gd=function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},zd=function(t){var e;return QU(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]+/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):JU(t)&&!XU(t.matrixSet)?e=t.matrixSet.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},Ud=function(t){var e;return QU(t)?/^WMTS\*.+/i.test(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]+/i.test(t)&&(e=t.split(/\*/)[4].trim()):/^[^*]+\*[^*]+\*[^*]*\*[^*]+/.test(t)&&(e=t.split(/\*/)[3].trim()):JU(t)&&!XU(t.legend)?e=t.legend.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},qd=function(t){var e;return QU(t)||(JU(t)?e=t.options:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)))),e},Vd=function(t){var e;return QU(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)/i.test(t)?e=t.split(/\*/)[5].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(t)?(t.split(/\*/),e=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(t)&&(e=t.split(/\*/)[2].trim()):JU(t)?e=tq(t.transparent):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Yd=function(t){var e;return QU(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)/i.test(t)&&(e=t.split(/\*/)[6].trim()):JU(t)?e=tq(t.format):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),e},Zd=function(t){var e;return QU(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[7].trim()):JU(t)?e=tq(t.displayInLayerSwitcher):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Wd=function(t){var e;return QU(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[8].trim()):JU(t)?e=tq(t.queryable):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Hd=function(t){var e;return QU(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[9].trim()):JU(t)?e=tq(t.visibility):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),XU(e)||(e=/^1|(true)$/i.test(e)),e},Xd=function(t){var e;return QU(t)?/^XYZ\*.+/i.test(t)?/^XYZ\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(t)&&(e=t.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(t)||/^[^*]*/.test(t))&&(e=t.split(/\*/)[0].trim()):JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},Kd=function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},Jd=function(t,e,r,n){var i,o;return QU(t)?r+3<=(o=t.split(/\*/)).length-1?(i=o[r+3].trim(),i=isNaN(i)?"false"!==i.toLowerCase():Number(i)):i=e:JU(t)?i=tq(t[n]):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),i},Qd=function(t){var e=t,r=[];XU(e)&&Af(Hf("exception").no_param);var n=e;return HU(n)||(n=[n]),r=n.map((function(t){var e={};return e.type=Ep,e.name=Xd(t),e.legend=e.name,e.url=Kd(t),e.visibility=Jd(t,"true",0,"visibility"),e.transparent=Jd(t,"true",1,"transparent"),e.displayInLayerSwitcher=Jd(t,"true",2,"displayInLayerSwitcher"),e})),HU(e)||(r=r[0]),r},$d=function(t){var e;return QU(t)?/^TMS\*.+/i.test(t)?/^TMS\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(t)&&(e=t.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(t)||/^[^*]*/.test(t))&&(e=t.split(/\*/)[0].trim()):JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t))),($U(e)||/^(true|false)$/i.test(e))&&(e=null),e},tm=function(t){var e=t,r=[];XU(e)&&Af(Hf("exception").no_param);var n=e;return HU(n)||(n=[n]),r=n.map((function(t){var e={};return e.type=Op,e.name=$d(t),e.legend=e.name,e.url=Kd(t),e.visibility=Jd(t,"true",0,"visibility"),e.transparent=Jd(t,"true",1,"transparent"),e.tileGridMaxZoom=Jd(t,"17",2,"tileGridMaxZoom"),e.displayInLayerSwitcher=Jd(t,"true",3,"displayInLayerSwitcher"),e})),HU(e)||(r=r[0]),r},em=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e,r,n={};return n.type=Sp,n.name=Bd(t),n.url=Gd(t),n.matrixSet=zd(t),n.legend=Ud(t),n.options=qd(t),n.transparent=Vd(t),n.format=Yd(t),n.displayInLayerSwitcher=Zd(t),n.queryable=Wd(t),n.visibility=Hd(t),n.useCapabilities=(QU(e=t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)\*(true|false)\*(true|false)/i.test(e)&&(r=e.split(/\*/)[10].trim()):JU(e)?r=tq(e.useCapabilities):Af("El parámetro no es de un tipo soportado: ".concat(Gp(e))),XU(r)||(r=/^1|(true)$/i.test(r)),r),n})),HU(t)||(e=e[0]),e},rm=function(t){var e,r;if(QU(t)){if((r=t.split("*")).length-1>=1){var n=r[1].trim();e=XU(n)?void 0:n}}else JU(t)&&!XU(t.legend)?e=t.legend.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},nm=function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},im=function(t){var e;return JU(t)&&(e=t.source),e},om=function(t){var e;return JU(t)&&(e=t.tileLoadFunction),e},am=function(t){var e,r;if(QU(t))if((r=t.split("*")).length-1>=3){var n=r[3].trim();e=XU(n)?void 0:n}else/^[^*]*/.test(t)&&(e=(r=t.split(/\*/))[0].trim());else JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},sm=function(t){var e,r;if(QU(t)){if((r=t.split("*")).length-1>=4){var n=r[4].trim();e=XU(n)?void 0:n}}else JU(t)&&!XU(t.transparent)?e=t.transparent:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},um=function(t){var e,r;if(QU(t)){if((r=t.split("*")).length-1>=5){var n=r[5].trim();e=XU(n)?void 0:"false"!==n}}else JU(t)&&!XU(t.visibility)?e=t.visibility:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},lm=function(t){var e,r;if(QU(t)){if((r=t.split("*")).length-1>=6){var n=r[6].trim();e=XU(n)?void 0:parseInt(n,10)}}else JU(t)&&!XU(t.opacity)?e=t.opacity:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},cm=function(t){var e,r;if(QU(t)){if((r=t.split("*")).length-1>=7){var n=r[7].trim();e=XU(n)?void 0:parseInt(n,10)}}else JU(t)&&!XU(t.maxZoomLevel)?e=t.maxZoomLevel:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},hm=function(t){var e,r;if(QU(t)){if((r=t.split("*")).length-1>=8){var n=r[8].trim();XU(n)?e=void 0:(n=n.split(";"),XU(n)||4!==n.length||(e=n=n.map((function(t){return parseFloat(t.trim())}))))}}else JU(t)&&!XU(t.maxExtent)?e=t.maxExtent:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},fm=function(t){var e,r;if(QU(t)){if((e=t.split("*")).length-1>=9){var n=e[9].trim();r=XU(n)?void 0:parseInt(n,10)}}else JU(t)&&!XU(t.tileSize)?r=parseInt(tq(t.tileSize),10):JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return r},pm=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e={};return e.type=Lp,e.legend=rm(t),e.url=nm(t),e.source=im(t),e.name=am(t),e.transparent=sm(t),e.visibility=um(t),e.opacity=lm(t),e.maxZoomLevel=cm(t),e.maxExtent=hm(t),e.tileLoadFunction=om(t),e.tileSize=fm(t),e})),HU(t)||(e=e[0]),e},dm=function(t){var e,r;if(QU(t)){if((r=t.split("*")).length-1>=1){var n=r[1].trim();e=XU(n)?void 0:n}}else JU(t)&&!XU(t.legend)?e=t.legend.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},mm=function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},ym=function(t){var e;return JU(t)&&(e=t.source),e},gm=function(t){var e;return JU(t)&&(e=t.tileLoadFunction),e},vm=function(t){var e,r;if(QU(t))if((r=t.split("*")).length-1>=3){var n=r[3].trim();e=XU(n)?void 0:n}else/^[^*]*/.test(t)&&(e=(r=t.split(/\*/))[0].trim());else JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},_m=function(t){var e,r;if(QU(t)){if((r=t.split("*")).length-1>=4){var n=r[4].trim();e=XU(n)?void 0:"false"!==n}}else JU(t)&&!XU(t.visibility)?e=t.visibility:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e},bm=function(t){var e;return JU(t)&&!XU(t.maxExtent)&&(e=t.maxExtent),e},wm=function(t){var e,r;if(QU(t)){if((e=t.split("*")).length-1>=5){var n=e[5].trim();r=XU(n)?void 0:parseInt(n,10)}}else JU(t)&&!XU(t.tileSize)?r=parseInt(tq(t.tileSize),10):JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return r},Mm=function(t){var e,r;if(QU(t)){if((e=t.split("*")).length-1>=6){var n=e[6].trim();r=XU(n)?void 0:n}}else JU(t)&&!XU(t.style)?r=t.style:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return r},Sm=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e={};return e.type=Rp,e.legend=dm(t),e.url=mm(t),e.source=ym(t),e.name=vm(t),e.visibility=_m(t),e.tileSize=wm(t),e.maxExtent=bm(t),e.tileLoadFunction=gm(t),e.style=Mm(t),e})),HU(t)||(e=e[0]),e},xm=function(t){var e,r;if(QU(t)){if((e=t.split("*")).length>=9){var n=e[9];r=XU(n)?void 0:n}}else JU(t)&&!XU(t.style)?r=t.style:JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return r},Em=function(t){var e;return JU(t)&&!XU(t.conditional)&&(e=t.conditional),e},Om=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){return{type:Mp,legend:function(t){var e,r;if(QU(t)){if((r=t.split("*")).length>=1){var n=r[1];e=XU(n)?void 0:n}}else JU(t)&&!XU(t.legend)?e=t.legend.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e}(t),url:function(t){var e;if(QU(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else JU(t)?e=t.url:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e}(t),name:function(t){var e,r;if(QU(t))if((r=t.split("*")).length>=3){var n=r[3];e=XU(n)?void 0:n}else e=r[0].trim();else JU(t)&&!XU(t.name)?e=t.name.trim():JU(t)||Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e}(t),limit:function(t){var e,r;if(QU(t)){if((r=t.split("*")).length>=4){var n=r[4];e=XU(n)?void 0:parseInt(n,10)}}else JU(t)?YU(t.limit)||(e=parseInt(tq(t.limit),10)):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e}(t),bbox:function(t){var e,r;if(QU(t)){if((r=t.split("*")).length>=5){var n=r[5];e=XU(n)?void 0:n}}else JU(t)?e=tq(t.bbox):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return XU(e)||HU(e)||(e=e.split(";")).forEach((function(t,r){e[r]=parseFloat(t)})),e}(t),format:function(t){var e,r;if(QU(t)){if((r=t.split("*")).length>=8){var n=r[8];e=XU(n)?void 0:n}}else JU(t)?e=tq(t.format):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e}(t),offset:function(t){var e,r;if(QU(t)){if((r=t.split("*")).length>=7){var n=r[7];e=XU(n)?void 0:parseInt(n,10)}}else JU(t)?e=tq(t.offset):Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e}(t),id:function(t){var e,r;if(QU(t)){if((r=t.split("*")).length>=6){var n=r[6];e=XU(n)?void 0:parseInt(n,10)}}else JU(t)?e=t.id:Af("El parámetro no es de un tipo soportado: ".concat(Gp(t)));return e}(t),style:xm(t),conditional:Em(t)}})),HU(t)||(e=e[0]),e},Pm={kml:td,wfs:fd,osm:Bp,wmc:Ed,wms:Dd,wmts:em,geojson:vd,mvt:wd,xyz:Qd,tms:tm,mbtiles:pm,mbtilesvector:Sm,ogcapifeatures:Om},Tm=function(t,e){var r=[];XU(t)&&Af(Hf("exception").no_param);var n=t;return HU(n)||(n=[n]),r=n.map((function(t){var r=null;if(JU(t)&&t instanceof Fm)r=t;else{var n=Up(t,e);n=tq(n),r=KU(Pm[n])?Pm[n](t):t}return r})),HU(t)||(r=r[0]),r},Im={};function Lm(t){return(Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Lm(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Lm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Lm(o)?o:String(o)),n)}var i,o}function Cm(t,e){return(Cm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Am(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Nm(t);if(e){var i=Nm(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return km(this,r)}}function km(t,e){if(e&&("object"===Lm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Nm(t){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cm(t,e)}(o,t);var e,r,n,i=Am(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=i.call(this,e);var n=Tm(t);return r.type=n.type,r.url=n.url,r.name=n.name,r.transparent=n.transparent,r.maxExtent_=null,r.zindex_=null,r.map_=null,r.userMaxExtent=n.maxExtent,r.legend=n.legend,r.minZoom=n.minZoom||Number.NEGATIVE_INFINITY,r.maxZoom=n.maxZoom||Number.POSITIVE_INFINITY,r}return e=o,(r=[{key:"getLegend",value:function(){return this.getImpl().legend}},{key:"setLegend",value:function(t){this.legend=t,this.getImpl().legend=t}},{key:"url",get:function(){return this.getImpl().url},set:function(t){this.getImpl().url=t}},{key:"name",get:function(){return this.getImpl().name},set:function(t){this.getImpl().name=t}},{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){XU(t)?this.getImpl().transparent=!0:QU(t)?this.getImpl().transparent="true"===tq(t):this.getImpl().transparent=t}},{key:"displayInLayerSwitcher",get:function(){return this.getImpl().displayInLayerSwitcher},set:function(t){XU(t)?this.getImpl().displayInLayerSwitcher=!0:QU(t)?this.getImpl().displayInLayerSwitcher="true"===tq(t):this.getImpl().displayInLayerSwitcher=t}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return XU(t)&&(t=this.map_.userMaxExtent,XU(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return e(t.getMaxExtent())}))}},{key:"setMaxExtent",value:function(t){this.userMaxExtent=t,!HU(t)&&JU(t)&&(this.userMaxExtent=[t.x.min,t.y.min,t.x.max,t.y.max]),KU(this.getImpl().setMaxExtent)&&(XU(t)?this.resetMaxExtent():this.getImpl().setMaxExtent(t))}},{key:"resetMaxExtent",value:function(){var t=this;this.userMaxExtent=null,this.calculateMaxExtent().then((function(e){KU(t.getImpl().setMaxExtent)&&t.getImpl().setMaxExtent(e)}))}},{key:"setMap",value:function(t){this.map_=t}},{key:"getLayerGroup",value:function(){return this.getImpl().layerGroup}},{key:"setLayerGroup",value:function(t){this.getImpl().layerGroup=t}},{key:"isVisible",value:function(){return YU(this.getImpl().isVisible)&&Af(Hf("exception").isvisible_method),this.getImpl().isVisible()}},{key:"isQueryable",value:function(){return YU(this.getImpl().isQueryable)&&Af(Hf("exception").isqueryable_method),this.getImpl().isQueryable()}},{key:"setVisible",value:function(t){var e=t;XU(e)&&Af(Hf("exception").visibility_param),QU(e)||ZU(e)||Af(Hf("exception").visibility_param),YU(this.getImpl().setVisible)&&Af(Hf("exception").setvisible_method),e=/^1|(true)$/i.test(e),this.getImpl().setVisible(e)}},{key:"inRange",value:function(){return YU(this.getImpl().inRange)&&Af(Hf("exception").inrage_method),this.getImpl().inRange()}},{key:"getLegendURL",value:function(){return this.getImpl().getLegendURL()}},{key:"setLegendURL",value:function(t){var e=t;XU(e)&&(e=fq([M.config.THEME_URL,o.LEGEND_DEFAULT])),this.getImpl().setLegendURL(e)}},{key:"getZIndex",value:function(){return this.zindex_}},{key:"setZIndex",value:function(t){this.zindex_=t,this.getImpl().setZIndex(t)}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"setMinZoom",value:function(t){this.minZoom=t,this.getImpl().setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"setMaxZoom",value:function(t){this.maxZoom=t,this.getImpl().setMaxZoom(t)}},{key:"getOpacity",value:function(){return this.getImpl().getOpacity()}},{key:"setOpacity",value:function(t){this.getImpl().setOpacity(t)}},{key:"refresh",value:function(){!YU(this.getImpl().refresh)&&KU(this.getImpl().refresh)&&this.getImpl().refresh()}},{key:"generateName_",value:function(){this.name=nq("layer_","_".concat(this.type))}}])&&Rm(e.prototype,r),n&&Rm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf);jm.LEGEND_DEFAULT="/img/legend-default.png",jm.LEGEND_ERROR="/img/legend-error.png";var Fm=jm,Dm="preload",Bm="useInterimTilesOnError",Gm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zm=function(t){function e(e){var r=this,n=e||{},i=An({},n);return delete i.preload,delete i.useInterimTilesOnError,(r=t.call(this,i)||this).setPreload(void 0!==n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return Gm(e,t),e.prototype.getPreload=function(){return this.get(Dm)},e.prototype.setPreload=function(t){this.set(Dm,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Bm)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Bm,t)},e}(wu),Um=function(){function t(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function qm(t,e,r,n,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new Um(t,e,r,n)}var Vm=Um,Ym=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zm=function(t){function e(e){var r=t.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r}return Ym(e,t),e.prototype.getFeatures=function(t){return br()},e.prototype.prepareFrame=function(t){return br()},e.prototype.renderFrame=function(t,e){return br()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(n,i){var o=this.loadedTileCallback.bind(this,r,n);return t.forEachLoadedTile(e,n,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){},e.prototype.getDataAtPixel=function(t,e,r){return br()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===bc&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=bc&&e!=wc&&t.addEventListener(Ai,this.boundHandleImageChange_),e==vc&&(t.load(),e=t.getState()),e==bc},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==iu&&t.changed()},e}(Xi),Wm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hm=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform_=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r}return Wm(e,t),e.prototype.useContainer=function(t,e,r){var n,i,o=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===o&&((s=t.firstElementChild)instanceof HTMLCanvasElement&&(i=s.getContext("2d")));if(i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=o;var a=n.style;a.position="absolute",a.width="100%",a.height="100%";var s=(i=Bs()).canvas;n.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=n,this.context=i}},e.prototype.clip=function(t,e,r){var n=e.pixelRatio,i=e.size[0]*n/2,o=e.size[1]*n/2,a=e.viewState.rotation,s=fn(r),u=pn(r),l=an(r),c=on(r);ja(e.coordinateToPixelTransform,s),ja(e.coordinateToPixelTransform,u),ja(e.coordinateToPixelTransform,l),ja(e.coordinateToPixelTransform,c),t.save(),fc(t,-a,i,o),t.beginPath(),t.moveTo(s[0]*n,s[1]*n),t.lineTo(u[0]*n,u[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(c[0]*n,c[1]*n),t.clip(),fc(t,a,i,o)},e.prototype.clipUnrotated=function(t,e,r){var n=fn(r),i=pn(r),o=an(r),a=on(r);ja(e.coordinateToPixelTransform,n),ja(e.coordinateToPixelTransform,i),ja(e.coordinateToPixelTransform,o),ja(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;ja(s,n),ja(s,i),ja(s,o),ja(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var i=new jl(t,this.inversePixelTransform,r,e);n.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(No,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(jo,t,e)},e.prototype.getRenderTransform=function(t,e,r,n,i,o,a){var s=i/2,u=o/2,l=n/e,c=-l,h=-t[0]+a,f=-t[1];return Da(this.tempTransform_,s,u,l,c,-r,h,f)},e.prototype.getDataAtPixel=function(t,e,r){var n,i=ja(this.inversePixelTransform,t.slice()),o=this.context;try{n=o.getImageData(Math.round(i[0]),Math.round(i[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(Zm),Xm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Km=function(t){function e(e){var r=t.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new Vm(0,0,0,0),r}return Xm(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==Uo||r==Vo||r==qo&&!n},e.prototype.getTile=function(t,e,r,n){var i=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,i,o);return s.getState()==qo&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(Uo)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,r,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,r,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],n=t.viewState,i=n.projection,o=n.resolution,a=n.center,s=n.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),h=c.getRevision(),f=c.getTileGridForProjection(i),p=f.getZForResolution(o,c.zDirection),d=f.getResolution(p),m=t.extent,y=r.extent&&li(r.extent,i);y&&(m=hn(m,li(r.extent,i)));var g=c.getTilePixelRatio(u),v=Math.round(t.size[0]*g),_=Math.round(t.size[1]*g);if(s){var b=Math.round(Math.sqrt(v*v+_*_));v=b,_=b}var w=d*v/2/g,M=d*_/2/g,S=[a[0]-w,a[1]-M,a[0]+w,a[1]+M],x=f.getTileRangeForExtentAndZ(m,p),E={};E[p]={};var O=this.createLoadedTileFinder(c,i,E),P=this.tmpExtent,T=this.tmpTileRange_;this.newTiles_=!1;for(var I=x.minX;I<=x.maxX;++I)for(var L=x.minY;L<=x.maxY;++L){var R=this.getTile(p,I,L,t);if(this.isDrawableTile(R)){var C=Mr(this);if(R.getState()==Uo){E[p][R.tileCoord.toString()]=R;var A=R.inTransition(C);this.newTiles_||!A&&-1!==this.renderedTiles.indexOf(R)||(this.newTiles_=!0)}if(1===R.getAlpha(C,t.time))continue}var k=f.getTileCoordChildTileRange(R.tileCoord,T,P),N=!1;k&&(N=O(p+1,k)),N||f.forEachTileCoordParentTileRange(R.tileCoord,O,T,P)}var j=d/o;Da(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/g,1/g,s,-v/2,-_/2);var F=mc(this.pixelTransform);this.useContainer(e,F,r.opacity);var D=this.context,B=D.canvas;Ba(this.inversePixelTransform,this.pixelTransform),Da(this.tempTransform_,v/2,_/2,j,j,0,-v/2,-_/2),B.width!=v||B.height!=_?(B.width=v,B.height=_):this.containerReused||D.clearRect(0,0,v,_),y&&this.clipUnrotated(D,t,y),this.preRender(D,t),this.renderedTiles.length=0;var G,z,U,q=Object.keys(E).map(Number);q.sort(vi),1!==r.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(G=[],z=[]):q=q.reverse();for(var V=q.length-1;V>=0;--V){var Y=q[V],Z=c.getTilePixelSize(Y,u,i),W=f.getResolution(Y)/d,H=Z[0]*W*j,X=Z[1]*W*j,K=f.getTileCoordForCoordAndZ(fn(S),Y),J=f.getTileCoordExtent(K),Q=ja(this.tempTransform_,[g*(J[0]-S[0])/d,g*(S[3]-J[3])/d]),$=g*c.getGutterForProjection(i),tt=E[Y];for(var et in tt){var rt=(R=tt[et]).tileCoord,nt=Q[0]-(K[1]-rt[1])*H,it=Math.round(nt+H),ot=Q[1]-(K[2]-rt[2])*X,at=Math.round(ot+X),st=it-(I=Math.round(nt)),ut=at-(L=Math.round(ot)),lt=p===Y;if(!(A=lt&&1!==R.getAlpha(Mr(this),t.time)))if(G){D.save(),U=[I,L,I+st,L,I+st,L+ut,I,L+ut];for(var ct=0,ht=G.length;ct<ht;++ct)if(p!==Y&&Y<z[ct]){var ft=G[ct];D.beginPath(),D.moveTo(U[0],U[1]),D.lineTo(U[2],U[3]),D.lineTo(U[4],U[5]),D.lineTo(U[6],U[7]),D.moveTo(ft[6],ft[7]),D.lineTo(ft[4],ft[5]),D.lineTo(ft[2],ft[3]),D.lineTo(ft[0],ft[1]),D.clip()}G.push(U),z.push(Y)}else D.clearRect(I,L,st,ut);this.drawTileImage(R,t,I,L,st,ut,$,lt,r.opacity),G&&!A&&D.restore(),this.renderedTiles.push(R),this.updateUsedTiles(t.usedTiles,c,R)}}return this.renderedRevision=h,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!Kr(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=u,this.renderedProjection=i,this.manageTilePyramid(t,c,f,u,i,m,p,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(D,t),r.extent&&D.restore(),F!==B.style.transform&&(B.style.transform=F),this.container},e.prototype.drawTileImage=function(t,e,r,n,i,o,a,s,u){var l=this.getTileImage(t);if(l){var c=Mr(this),h=s?t.getAlpha(c,e.time):1,f=u*h,p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,r,n,i,o),p&&this.context.restore(),1!==h?e.animate=!0:s&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=Mr(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r){var n=Mr(e);n in t||(t[n]={}),t[n][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,r,n,i,o,a,s,u){var l=Mr(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,h,f,p,d,m,y=t.wantedTiles[l],g=t.tileQueue;for(m=r.getMinZoom();m<=a;++m)for(h=r.getTileRangeForExtentAndZ(o,m,h),f=r.getResolution(m),p=h.minX;p<=h.maxX;++p)for(d=h.minY;d<=h.maxY;++d)a-m<=s?((c=e.getTile(m,p,d,n,i)).getState()==Go&&(y[c.getKey()]=!0,g.isKeyQueued(c.getKey())||g.enqueue([c,l,r.getTileCoordCenter(c.tileCoord),f])),void 0!==u&&u(c)):e.useTile(m,p,d,i)},e}(Hm);Km.prototype.getLayer;var Jm=Km,Qm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$m=function(t){function e(e){return t.call(this,e)||this}return Qm(e,t),e.prototype.createRenderer=function(){return new Jm(this)},e}(zm),ty=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ey=function(t){function e(e){var r=e||{};return t.call(this,r)||this}return ty(e,t),e}(wu),ry=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ny=function(t){function e(e){var r=t.call(this,e)||this;return r.image_=null,r}return ry(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,i=n.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=hn(s,li(e.extent,n.projection))),!a[ea]&&!a[ra]&&!yn(s))if(o){var u=n.projection,l=o.getImage(s,i,r,u);l&&this.loadImage(l)&&(this.image_=l)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var r=this.image_,n=r.getExtent(),i=r.getResolution(),o=r.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,u=t.viewState,l=u.center,c=u.resolution,h=t.size,f=s*i/(c*o),p=Math.round(h[0]*s),d=Math.round(h[1]*s),m=u.rotation;if(m){var y=Math.round(Math.sqrt(p*p+d*d));p=y,d=y}Da(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,m,-p/2,-d/2),Ba(this.inversePixelTransform,this.pixelTransform);var g=mc(this.pixelTransform);this.useContainer(e,g,a.opacity);var v=this.context,_=v.canvas;_.width!=p||_.height!=d?(_.width=p,_.height=d):this.containerReused||v.clearRect(0,0,p,d);var b=!1;if(a.extent){var w=li(a.extent,u.projection);(b=!Ur(w,t.extent)&&mn(w,t.extent))&&this.clipUnrotated(v,t,w)}var M=r.getImage(),S=Da(this.tempTransform_,p/2,d/2,f,f,0,o*(n[0]-l[0])/i,o*(l[1]-n[3])/i);this.renderedResolution=i*s/o;var x=S[4],E=S[5],O=M.width*S[0],P=M.height*S[3];if(this.preRender(v,t),O>=.5&&P>=.5){var T=a.opacity,I=void 0;1!==T&&(I=this.context.globalAlpha,this.context.globalAlpha=T),this.context.drawImage(M,0,0,+M.width,+M.height,Math.round(x),Math.round(E),Math.round(O),Math.round(P)),1!==T&&(this.context.globalAlpha=I)}return this.postRender(v,t),b&&v.restore(),g!==_.style.transform&&(_.style.transform=g),this.container},e}(Hm),iy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oy=function(t){function e(e){return t.call(this,e)||this}return iy(e,t),e.prototype.createRenderer=function(){return new ny(this)},e}(ey);function ay(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function sy(t,e,r){return t+"/"+e+"/"+r}function uy(t){return sy(t[0],t[1],t[2])}function ly(t){return t.split("/").map(Number)}function cy(t){return(t[1]<<t[0])+t[2]}var hy=[0,0,0],fy=function(){function t(t){var e,r,n,i;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Or((e=this.resolutions_,r=!0,n=function(t,e){return e-t}||vi,e.every((function(t,i){if(0===i)return!0;var o=n(e[i-1],t);return!(o>0||r&&0===o)}))),17),!t.origins)for(var o=0,a=this.resolutions_.length-1;o<a;++o)if(i){if(this.resolutions_[o]/this.resolutions_[o+1]!==i){i=void 0;break}}else i=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Or(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0===s||this.origin_||this.origins_||(this.origin_=fn(s)),Or(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Or(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Or(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new Vm(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):s&&this.calculateTileRanges_(s)}return t.prototype.forEachTileCoord=function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,r,n){var i,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?qm(i=Math.floor(i/2),i,o=Math.floor(o/2),o,r):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],i=2*t[2];return qm(n,n+1,i,i+1,e)}var o=this.getTileCoordExtent(t,r);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,r){var n=this.getOrigin(t),i=this.getResolution(t),o=hu(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*i,s=n[0]+(e.maxX+1)*o[0]*i;return Zr(a,n[1]+e.minY*o[1]*i,s,n[1]+(e.maxY+1)*o[1]*i,r)},t.prototype.getTileRangeForExtentAndZ=function(t,e,r){var n=hy;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var i=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),qm(i,n[1],o,n[2],r)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=hu(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]},t.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=hu(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*i[0]*n,a=r[1]-(t[2]+1)*i[1]*n;return Zr(o,a,o+i[0]*n,a+i[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,r,n,i){var o=this.getZForResolution(r),a=r/this.getResolution(o),s=this.getOrigin(o),u=hu(this.getTileSize(o),this.tmpSize_),l=n?.5:0,c=n?.5:0,h=Math.floor((t-s[0])/r+l),f=Math.floor((s[1]-e)/r+c),p=a*h/u[0],d=a*f/u[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),ay(o,p,d,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,r,n,i){var o=this.getOrigin(r),a=this.getResolution(r),s=hu(this.getTileSize(r),this.tmpSize_),u=n?.5:0,l=n?.5:0,c=Math.floor((t-o[0])/a+u),h=Math.floor((o[1]-e)/a+l),f=c/s[0],p=h/s[1];return n?(f=Math.ceil(f)-1,p=Math.ceil(p)-1):(f=Math.floor(f),p=Math.floor(p)),ay(r,f,p,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return sr(bi(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r},t}(),py=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var dy=function(t){function e(e){var r=t.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener(to(r.geometryName_),r.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;r.setGeometry(n)}else{var i=e;r.setProperties(i)}return r}return py(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(yi(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=di(t,Ai,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(Or("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(to(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(to(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(eo);function my(t,e,r,n){for(var i=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=r.length;a<s;++a){var u=r[a];o=Xr(t,e,u[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}function yy(t,e,r,n,i,o){var a=NaN,s=NaN,u=(r-e)/n;if(1===u)a=t[e],s=t[e+1];else if(2==u)a=(1-i)*t[e]+i*t[e+n],s=(1-i)*t[e+1]+i*t[e+n+1];else if(0!==u){for(var l=t[e],c=t[e+1],h=0,f=[0],p=e+n;p<r;p+=n){var d=t[p],m=t[p+1];h+=Math.sqrt((d-l)*(d-l)+(m-c)*(m-c)),f.push(h),l=d,c=m}var y=i*h,g=function(t,e,r){for(var n,i,o=r||vi,a=0,s=t.length,u=!1;a<s;)(i=+o(t[n=a+(s-a>>1)],e))<0?a=n+1:(s=n,u=!i);return u?a:~a}(f,y);if(g<0){var v=(y-f[-g-2])/(f[-g-1]-f[-g-2]),_=e+(-g-2)*n;a=dr(t[_],t[_+n],v),s=dr(t[_+1],t[_+n+1],v)}else a=t[e+g*n],s=t[e+g*n+1]}return o?(o[0]=a,o[1]=s,o):[a,s]}function gy(t,e,r,n,i,o){if(r==e)return null;var a;if(i<t[e+n-1])return o?((a=t.slice(e,e+n))[n-1]=i,a):null;if(t[r-1]<i)return o?((a=t.slice(r-n,r))[n-1]=i,a):null;if(i==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,u=r/n;s<u;){var l=s+u>>1;i<t[(l+1)*n-1]?u=l:s=l+1}var c=t[s*n-1];if(i==c)return t.slice((s-1)*n,(s-1)*n+n);var h=(i-c)/(t[(s+1)*n-1]-c);a=[];for(var f=0;f<n-1;++f)a.push(dr(t[(s-1)*n+f],t[s*n+f],h));return a.push(i),a}var vy=[1,0,0,1,0,0],_y=function(){function t(t,e,r,n,i){this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===mr.POINT?Hr(this.flatCoordinates_):Xr(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=sn(this.getExtent());this.flatInteriorPoints_=vs(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=my(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=_s(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=yy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,i=r.length;n<i;++n){var o=r[n],a=yy(t,e,o,2,.5);Mi(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var r=(t=Vn(t)).getExtent(),n=t.getWorldExtent(),i=cn(n)/cn(r);Da(vy,n[0],n[3],i,-i,0,0,0),Ia(this.flatCoordinates_,0,this.flatCoordinates_.length,2,vy,this.flatCoordinates_)},t}();_y.prototype.getEnds=function(){return this.ends_},_y.prototype.getEndss=_y.prototype.getEnds,_y.prototype.getFlatCoordinates=_y.prototype.getOrientedFlatCoordinates;var by=_y;function wy(t,e,r,n){for(var i=t[e],o=t[e+1],a=0,s=e+n;s<r;s+=n){var u=t[s],l=t[s+1];a+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return a}var My=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sy=function(t){function e(e,r){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return My(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Mi(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Gr(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ka(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.forEachSegment=function(t){return bs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=Pa&&this.layout!=Ta)return null;var r=void 0!==e&&e;return gy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return yy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return wy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=as(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Ea)},e.prototype.getType=function(){return mr.LINE_STRING},e.prototype.intersectsExtent=function(t){return ws(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Za),xy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ey=function(t){function e(e,r){var n=t.call(this)||this;return r&&!Array.isArray(e[0])?n.setFlatCoordinates(r,e):n.setCoordinates(e,r),n}return xy(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Mi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){if(n<Gr(this.getExtent(),t,e))return n;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var u=cr(t,e,i[a],i[a+1]);if(u<n){n=u;for(var l=0;l<o;++l)r[l]=i[a+l];r.length=o}}return n},e.prototype.getCoordinates=function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new ds(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],i=0,o=t.length;i<o;i+=r){var a=new ds(t.slice(i,i+r),e);n.push(a)}return n},e.prototype.getType=function(){return mr.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,i=e.length;n<i;n+=r){if(qr(t,e[n],e[n+1]))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Za),Oy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Py=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,r);else if(void 0!==r&&n)i.setFlatCoordinates(r,e),i.ends_=n;else{for(var o=i.getLayout(),a=e,s=[],u=[],l=0,c=a.length;l<c;++l){var h=a[l];0===l&&(o=h.getLayout()),Mi(s,h.getFlatCoordinates()),u.push(s.length)}i.setFlatCoordinates(o,s),i.ends_=u}return i}return Oy(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Mi(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<Gr(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ja(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$a(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=Pa&&this.layout!=Ta||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,i=void 0!==r&&r;return function(t,e,r,n,i,o,a){if(a)return gy(t,e,r[r.length-1],n,i,o);var s;if(i<t[n-1])return o?((s=t.slice(0,n))[n-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-n))[n-1]=i,s):null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(e!=c){if(i<t[e+n-1])return null;if(i<=t[c-1])return gy(t,e,c,n,i,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,i)},e.prototype.getCoordinates=function(){return is(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Sy(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],u=new Sy(t.slice(i,s),r);n.push(u),i=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var s=n[o];Mi(t,yy(e,r,s,i,.5)),r=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=ss(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,Ea,n)},e.prototype.getType=function(){return mr.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){if(ws(t,e,r[o],n,i))return!0;e=r[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=rs(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Za),Ty=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Iy=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=i.getLayout(),a=e,s=[],u=[],l=0,c=a.length;l<c;++l){var h=a[l];0===l&&(o=h.getLayout());for(var f=s.length,p=h.getEnds(),d=0,m=p.length;d<m;++d)p[d]+=f;Mi(s,h.getFlatCoordinates()),u.push(p)}r=o,e=s,n=u}return void 0!==r&&n?(i.setFlatCoordinates(r,e),i.endss_=n):i.setCoordinates(e,r),i}return Ty(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;Mi(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,i=(e=t.getEnds().slice()).length;n<i;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,r)},e.prototype.closestPointXY=function(t,e,r,n){return n<Gr(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Ja(t,e,s,n,i),e=s[s.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,r,n,i,o,a,s,u,l,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];l=$a(t,e,d,n,i,o,a,s,u,l,h),e=d[d.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return function(t,e,r,n,i,o){if(0===r.length)return!1;for(var a=0,s=r.length;a<s;++a){var u=r[a];if(gs(t,e,u,n,i,o))return!0;e=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=Ha(t,e,s,n),e=s[s.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Ps(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,os(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=my(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=_s(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Ey(this.getFlatInteriorPoints().slice(),Pa)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(!Es(t,e,s,n,i))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ps(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=function(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u],h=[];a=cs(t,e,c,n,i,o,a,h),s.push(h),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,Ea,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new Ls(this.flatCoordinates.slice(e,i),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o].slice(),u=s[s.length-1];if(0!==i)for(var l=0,c=s.length;l<c;++l)s[l]-=i;var h=new Ls(e.slice(i,u),t,s);n.push(h),i=u}return n},e.prototype.getType=function(){return mr.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(Ms(t,e,s,n,i))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=function(t,e,r,n,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var l=rs(t,e,r[s],n,o[a]);o[a++]=l,e=l[l.length-1]}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(Za),Ly=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ry(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}var Cy=function(t){function e(e){var r=t.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return Ly(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(yi),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(di(this.geometries_[t],Ai,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,r,n){if(n<Gr(this.getExtent(),t,e))return n;for(var i=this.geometries_,o=0,a=i.length;o<a;++o)n=i[o].closestPointXY(t,e,r,n);return n},e.prototype.containsXY=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Wr(t);for(var e=this.geometries_,r=0,n=e.length;r<n;++r)Jr(t,e[r].getExtent());return t},e.prototype.getGeometries=function(){return Ry(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],n=this.geometries_,i=!1,o=0,a=n.length;o<a;++o){var s=n[o],u=s.getSimplifiedGeometry(t);r.push(u),u!==s&&(i=!0)}if(i){var l=new e(null);return l.setGeometriesArray(r),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return mr.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,r){var n=r;n||(n=sn(this.getExtent()));for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Ry(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(qa),Ay=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ky=function(t){function e(e,r,n){var i=t.call(this)||this;if(void 0!==n&&void 0===r)i.setFlatCoordinates(n,e);else{var o=r||0;i.setCenterAndRadius(e,o,n)}return i}return Ay(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<n){if(0===s)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var l=this.getRadius()/Math.sqrt(s);r[0]=i[0]+l*o,r[1]=i[1]+l*a;for(u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return Zr(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return mr.CIRCLE},e.prototype.intersectsExtent=function(t){if(mn(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||rn(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=ts(n,0,t,this.stride);n[i++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[i++]=n[o];n.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(La(r,0,r.length,n,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(Ra(r,0,r.length,n,t,e,r)),this.changed()},e}(Za);ky.prototype.transform;var Ny=ky;function jy(t){return(jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fy(t){return function(t){if(Array.isArray(t))return Dy(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Dy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dy(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function By(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qy(n.key),n)}}function Gy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gy(Object(r),!0).forEach((function(e){Uy(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Uy(t,e,r){return(e=qy(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qy(t){var e=function(t,e){if("object"!==jy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===jy(e)?e:String(e)}var Vy=function(t,e){return function(t,e){var r=t;return r[0]=e[0],r[1]=e[1],r}(e,Qn(t,"EPSG:4326")(function(t){for(var e=[],r=0;r<t.length;r+=1)e.push(t[r]);for(;e.length>2;)e.pop();return e}(e)))},Yy=function(t,e){var r=[];return t.forEach((function(t){var n=t.geometry.coordinates,i=[];switch(t.geometry.type){case"Point":i=Vy(e,n);break;case"MultiPoint":for(var o=0;o<n.length;o+=1){var a=Vy(e,n[o]);i.push(a)}break;case"LineString":for(var s=0;s<n.length;s+=1){var u=Vy(e,n[s]);i.push(u)}break;case"MultiLineString":for(var l=0;l<n.length;l+=1){for(var c=[],h=0;h<n[l].length;h+=1){var f=Vy(e,n[l][h]);c.push(f)}i.push(c)}break;case"Polygon":for(var p=0;p<n.length;p+=1){for(var d=[],m=0;m<n[p].length;m+=1){var y=Vy(e,n[p][m]);d.push(y)}i.push(d)}break;case"MultiPolygon":for(var g=0;g<n.length;g+=1){for(var v=[],_=0;_<n[g].length;_+=1){for(var b=[],w=0;w<n[g][_].length;w+=1){var M=Vy(e,n[g][_][w]);b.push(M)}v.push(b)}i.push(v)}}var S=function(t,e){return zy(zy({},t),{},{geometry:{type:t.geometry.type,coordinates:e}})}(t,i);r.push(S)})),r},Zy=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"generateResolutions",value:function(t,e,r,n){var i,o,a,s=[];XU(e)&&(i=t.getExtent());var u=dn(i)/256;XU(r)&&(o=0),XU(n)&&(a=20);for(var l=a-o,c=0;c<l;c+=1)s[c]=u/Math.pow(2,c);return s}},{key:"addOverlayImage",value:function(t,e){e.getMapImpl().updateSize();var r=e.getMapImpl().getSize(),n=t.screenXY,i=t.screenXUnits,o=t.screenYUnits,a=t.overlayXY,s=t.overlayXUnits,u=t.overlayYUnits,l=t.size,c=t.src,h=document.createElement("img");h.src=c,h.style.width="".concat(l[0],"px"),h.style.height="".concat(l[1],"px");var f=a[0];"fraction"===s&&(f*=l[0]);var p=a[1];"fraction"===u&&(p=l[1]-p*l[1]),h.style.position="absolute";var d=n[0];"fraction"===i&&(d=d*r[0]-f);var m=n[1];return"fraction"===o&&(m=r[1]-m*r[1]-p),h.style.top="".concat(m,"px"),h.style.left="".concat(d,"px"),e.getMapImpl().getOverlayContainerStopEvent().appendChild(h),h}},{key:"getExtentHeight",value:function(t){return t[3]-t[1]}},{key:"getExtentWidth",value:function(t){return t[2]-t[0]}},{key:"getCentroid",value:function(e){var r,n,i,o,a;if(XU(e))r=null;else if(e instanceof by)r=e;else switch(e.getType()){case"Point":r=e.getCoordinates();break;case"LineString":case"LinearRing":r=(n=e.getCoordinates())[i=Math.floor(n.length/2)];break;case"Polygon":r=t.getCentroid(e.getInteriorPoint());break;case"MultiPoint":o=e.getPoints(),i=Math.floor(o.length/2),r=t.getCentroid(o[i]);break;case"MultiLineString":a=e.getLineStrings(),i=Math.floor(a.length/2),r=t.getCentroid(a[i]);break;case"MultiPolygon":o=e.getInteriorPoints(),r=t.getCentroid(o);break;case"Circle":r=e.getCenter();break;default:return null}return r}},{key:"getFeaturesExtent",value:function(t,e){var r=t.map((function(t){return t instanceof Yq?t.getImpl().getOLFeature():t})),n=r.map((function(t){return t.getGeometry().getExtent().slice(0)}));if(1===n.length){var i=r[0].getGeometry();if("Point"===i.getType()){var o=function(t,e){return e/Vn(t).getMetersPerUnit()}(e,1e3),a=i.getCoordinates()[0],s=i.getCoordinates()[1];n=[[a-o,s-o,a+o,s+o]]}}return 0===n.length?null:n.reduce((function(t,e){return Jr(t,e)}))}},{key:"getCentroidCoordinate",value:function(e){var r,n,i,o,a,s;return"Point"===e.getType()?r=e.getCoordinates():"LineString"===e.getType()||"LinearRing"===e.getType()?r=(n=e.getCoordinates())[i=Math.floor(n.length/2)]:"Polygon"===e.getType()?r=t.getCentroidCoordinate(e.getInteriorPoint()):"MultiPoint"===e.getType()?(o=e.getPoints(),i=Math.floor(o.length/2),r=t.getCentroidCoordinate(o[i])):"MultiLineString"===e.getType()?(a=e.getLineStrings(),i=Math.floor(a.length/2),r=t.getCentroidCoordinate(a[i])):"MultiPolygon"===e.getType()?(o=e.getInteriorPoints(),r=t.getCentroidCoordinate(o)):"Circle"===e.getType()?r=e.getCenter():"GeometryCollection"===e.getType()&&(s=e.getGeometries(),i=Math.floor(s.length/2),r=t.getCentroidCoordinate(s[i])),r}},{key:"transformExtent",value:function(t,e,r){var n=QU(e)?Vn(e):e,i=QU(r)?Vn(r):r,o=n.getExtent();return t.every((function(t,e){return e<2?t<=o[e]:t>=o[e]}))?i.getExtent():ti(t,n,i)}},{key:"olRenderFeature2olFeature",value:function(t,e,r){var n;if(!XU(t)){var i,o=t.getId(),a=t.getProperties();if(XU(e)&&XU(e))i=this.getGeometryFromRenderFeature(t.getGeometry());else{var s=e.getExtent(),u=e.getWorldExtent();if(!XU(s)&&!XU(u)){var l=this.cloneOLRenderFeature(t);l.transform(e,r),i=this.getGeometryFromRenderFeature(l.getGeometry())}}n=new dy,XU(o)?n.setId(nq("mapea_feature_")):n.setId(o),n.setProperties(a,!0),n.setGeometry(i)}return n}},{key:"cloneOLRenderFeature",value:function(t){var e=t.getType(),r=t.getFlatCoordinates(),n=t.getEnds(),i=t.getProperties(),o=t.getId(),a=Fy(r),s=Object.assign(i),u=Fy(n);return new by(e,a,u,s,o)}},{key:"getGeometryFromRenderFeature",value:function(t){var e,r=t.getFlatCoordinates(),n=t.getEnds(),i=t.getEndss();switch(t.getType()){case mr.POINT:e=new ds(r);break;case mr.LINE_STRING:e=new Sy(r);break;case mr.LINEAR_RING:e=new fs(r);break;case mr.POLYGON:e=new Ls(r);break;case mr.MULTI_POINT:e=new Ey(r);break;case mr.MULTI_LINE_STRING:e=new Py(r,void 0,n);break;case mr.MULTI_POLYGON:e=new Iy(r,void 0,i);break;case mr.GEOMETRY_COLLECTION:var o=t.getGeometries();e=new Cy(o);break;case mr.CIRCLE:var a=t.getFlatInteriorPoint();e=new Ny(a);break;default:e=null}return e}},{key:"getWMTSScale",value:function(t,e){var r=Vn(t.getProjection().code).getMetersPerUnit(),n=t.getMapImpl().getSize(),i=n[0],o=t.getMapImpl().getView().calculateExtent(n),a=r*(o[2]-o[0])/i*1e3/.28;return 1==!e&&(a=a>=1e3&&a<=95e4?1e3*Math.round(a/1e3):a>=95e4?1e6*Math.round(a/1e6):Math.round(a)),Math.trunc(a)}}],(r=null)&&By(e.prototype,r),n&&By(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wy(t){return(Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Wy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Wy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Wy(o)?o:String(o)),n)}var i,o}function Ky(t,e){return(Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$y(t);if(e){var i=$y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Qy(this,r)}}function Qy(t,e){if(e&&("object"===Wy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $y(t){return($y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ky(t,e)}(o,t);var e,r,n,i=Jy(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hy(this,o),(t=i.call(this,e)).vendorOptions_=r,t.map=null,t.ol3Layer=null,t.options=e,t.visibility=!1!==t.options.visibility,t.displayInLayerSwitcher=!1!==t.options.displayInLayerSwitcher,t.zIndex_=null,t.opacity_=t.options.opacity||1,t.legendUrl_=fq([M.config.THEME_URL,Fm.LEGEND_DEFAULT]),t.minZoom=t.options.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=t.options.maxZoom||Number.POSITIVE_INFINITY,t}return e=o,(r=[{key:"isVisible",value:function(){return XU(this.ol3Layer)?this.visibility:this.ol3Layer.getVisible()}},{key:"isQueryable",value:function(){return!1}},{key:"inRange",value:function(){var t=!1;if(!XU(this.ol3Layer)){var e=this.map.getMapImpl().getView().getResolution(),r=this.ol3Layer.getMaxResolution();t=e>=this.ol3Layer.getMinResolution()&&e<=r}return t}},{key:"setVisible",value:function(t){this.visibility=t,XU(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"getMinZoom",value:function(){return XU(this.getOL3Layer())||(this.minZoom=this.getOL3Layer().getMinZoom()),this.minZoom}},{key:"setMinZoom",value:function(t){this.minZoom=t,XU(this.getOL3Layer())||this.getOL3Layer().setMinZoom(t)}},{key:"getMaxZoom",value:function(){return XU(this.getOL3Layer())||(this.maxZoom=this.getOL3Layer().getMaxZoom()),this.maxZoom}},{key:"setMaxZoom",value:function(t){this.maxZoom=t,XU(this.getOL3Layer())||this.getOL3Layer().setMaxZoom(t)}},{key:"getZIndex",value:function(){return XU(this.getOL3Layer())||(this.zIndex_=this.getOL3Layer().getZIndex()),this.zIndex_}},{key:"setZIndex",value:function(t){this.zIndex_=t,XU(this.getOL3Layer())||this.getOL3Layer().setZIndex(t)}},{key:"getOpacity",value:function(){return XU(this.getOL3Layer())||(this.opacity_=this.getOL3Layer().getOpacity()),this.opacity_}},{key:"setOpacity",value:function(t){var e=t;!XU(t)&&QU(t)&&(e=Number(t)),this.opacity_=e,XU(this.getOL3Layer())||this.getOL3Layer().setOpacity(e)}},{key:"getOL3Layer",value:function(){return this.ol3Layer}},{key:"setOL3Layer",value:function(t){var e=this.map.getMapImpl();return e.removeLayer(this.ol3Layer),this.ol3Layer=t,e.addLayer(t),this}},{key:"getMap",value:function(){return this.map}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}},{key:"getNumZoomLevels",value:function(){return 20}},{key:"unselectFeatures",value:function(t,e,r){}},{key:"selectFeatures",value:function(t,e,r){}}])&&Xy(e.prototype,r),n&&Xy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vf);function eg(t){return(eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==eg(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==eg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===eg(o)?o:String(o)),n)}var i,o}var ng=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.capabilities_=e,this.projection_=n,this.serviceUrl_=r}var e,r,n;return e=t,(r=[{key:"capabilities",get:function(){return this.capabilities_}},{key:"projection",get:function(){return this.projection_}},{key:"serviceUrl",get:function(){return this.serviceUrl_}},{key:"getLayerExtent",value:function(t){var e=this.capabilities_.Capability.Layer,r=this.getExtentRecursive_(e,t);return this.transformExtent(r)}},{key:"getExtentRecursive_",value:function(t,e){var r,n=this,i=null;if(!XU(t))if(HU(t))for(r=0;r<t.length&&null===i;r+=1)i=this.getExtentRecursive_(t[r],e);else if(JU(t))if(XU(e)||t.Name===e)if(XU(t.BoundingBox)){if(!XU(t.LatLonBoundingBox)){var o=t.LatLonBoundingBox[0];this.capabilitiesProj="EPSG:4326";var a=Vn("EPSG:4326"),s=Vn(this.projection_.code);i=Zy.transformExtent(o.extent,a,s)}}else{var u=t.BoundingBox.find((function(t){return t.crs===n.projection_.code}));if(XU(u)){var l=t.BoundingBox[0];this.capabilitiesProj=l.crs;var c=Vn(l.crs),h=Vn(this.projection_.code);i=Zy.transformExtent(l.extent,c,h)}else this.capabilitiesProj=u.crs,i=u.extent}else YU(t.Layer)||(i=this.getExtentRecursive_(t.Layer,e));return i}},{key:"getLayers",value:function(){var t=this.capabilities_.Capability.Layer;return this.getLayersRecursive_(t)}},{key:"getLayersRecursive_",value:function(t){var e=this,r=[];if(XU(t.Layer))if(HU(t))t.forEach((function(t){r=r.concat(e.getLayersRecursive_(t))}));else{var n="image/png";try{var i=this.capabilities_.Capability.Request.GetMap.Format;1===i.length&&(n=i[0])}catch(t){}r.push(new D_({url:this.serviceUrl_,name:t.Name,legend:XU(t.Title)?"":t.Title},{format:n},{capabilitiesMetadata:{abstract:XU(t.Abstract)?"":t.Abstract,attribution:XU(t.Attribution)?"":t.Attribution,metadataURL:XU(t.MetadataURL)?"":t.MetadataURL,style:XU(t.Style)?"":t.Style}}))}else r=this.getLayersRecursive_(t.Layer);return r}},{key:"transformExtent",value:function(t){var e=t;if("1.3.0"===this.capabilities_.version&&QU(this.capabilitiesProj)){var r=Vn(this.capabilitiesProj).getAxisOrientation();Array.isArray(e)&&"ne"===r.substr(0,2)&&(e=[t[1],t[0],t[3],t[2]])}return e}}])&&rg(e.prototype,r),n&&rg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ig=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),og=[null,"http://www.opengis.net/wms"],ag=ah(og,{Service:th((function(t,e){return uh({},lg,t,e)})),Capability:th((function(t,e){return uh({},sg,t,e)}))}),sg=ah(og,{Request:th((function(t,e){return uh({},gg,t,e)})),Exception:th((function(t,e){return uh([],pg,t,e)})),Layer:th((function(t,e){return uh({},dg,t,e)}))}),ug=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return ig(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=uh({version:this.version},ag,t,[]);return e||null},e}(dh),lg=ah(og,{Name:th(Mh),Title:th(Mh),Abstract:th(Mh),KeywordList:th(Pg),OnlineResource:th(Vc),ContactInformation:th((function(t,e){return uh({},cg,t,e)})),Fees:th(Mh),AccessConstraints:th(Mh),LayerLimit:th(bh),MaxWidth:th(bh),MaxHeight:th(bh)}),cg=ah(og,{ContactPersonPrimary:th((function(t,e){return uh({},hg,t,e)})),ContactPosition:th(Mh),ContactAddress:th((function(t,e){return uh({},fg,t,e)})),ContactVoiceTelephone:th(Mh),ContactFacsimileTelephone:th(Mh),ContactElectronicMailAddress:th(Mh)}),hg=ah(og,{ContactPerson:th(Mh),ContactOrganization:th(Mh)}),fg=ah(og,{AddressType:th(Mh),Address:th(Mh),City:th(Mh),StateOrProvince:th(Mh),PostCode:th(Mh),Country:th(Mh)}),pg=ah(og,{Format:Jc(Mh)}),dg=ah(og,{Name:th(Mh),Title:th(Mh),Abstract:th(Mh),KeywordList:th(Pg),CRS:$c(Mh),EX_GeographicBoundingBox:th((function(t,e){var r=uh({},yg,t,e);if(!r)return;var n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,a=r.northBoundLatitude;if(void 0===n||void 0===i||void 0===o||void 0===a)return;return[n,i,o,a]})),BoundingBox:$c((function(t,e){var r=[_h(t.getAttribute("minx")),_h(t.getAttribute("miny")),_h(t.getAttribute("maxx")),_h(t.getAttribute("maxy"))],n=[_h(t.getAttribute("resx")),_h(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:r,res:n}})),Dimension:$c((function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:yh(t.getAttribute("multipleValues")),nearestValue:yh(t.getAttribute("nearestValue")),current:yh(t.getAttribute("current")),values:Mh(t)}})),Attribution:th((function(t,e){return uh({},mg,t,e)})),AuthorityURL:$c((function(t,e){var r=xg(t,e);if(r)return r.name=t.getAttribute("name"),r;return})),Identifier:$c(Mh),MetadataURL:$c((function(t,e){var r=xg(t,e);if(r)return r.type=t.getAttribute("type"),r;return})),DataURL:$c(xg),FeatureListURL:$c(xg),Style:$c((function(t,e){return uh({},wg,t,e)})),MinScaleDenominator:th(vh),MaxScaleDenominator:th(vh),Layer:$c((function(t,e){var r=e[e.length-1],n=uh({},dg,t,e);if(!n)return;var i=yh(t.getAttribute("queryable"));void 0===i&&(i=r.queryable);n.queryable=void 0!==i&&i;var o=wh(t.getAttribute("cascaded"));void 0===o&&(o=r.cascaded);n.cascaded=o;var a=yh(t.getAttribute("opaque"));void 0===a&&(a=r.opaque);n.opaque=void 0!==a&&a;var s=yh(t.getAttribute("noSubsets"));void 0===s&&(s=r.noSubsets);n.noSubsets=void 0!==s&&s;var u=_h(t.getAttribute("fixedWidth"));u||(u=r.fixedWidth);n.fixedWidth=u;var l=_h(t.getAttribute("fixedHeight"));l||(l=r.fixedHeight);n.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach((function(t){if(t in r){var e=n[t]||[];n[t]=e.concat(r[t])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in n)){var e=r[t];n[t]=e}})),n}))}),mg=ah(og,{Title:th(Mh),OnlineResource:th(Vc),LogoURL:th(Og)}),yg=ah(og,{westBoundLongitude:th(vh),eastBoundLongitude:th(vh),southBoundLatitude:th(vh),northBoundLatitude:th(vh)}),gg=ah(og,{GetCapabilities:th(Eg),GetMap:th(Eg),GetFeatureInfo:th(Eg)}),vg=ah(og,{Format:$c(Mh),DCPType:$c((function(t,e){return uh({},_g,t,e)}))}),_g=ah(og,{HTTP:th((function(t,e){return uh({},bg,t,e)}))}),bg=ah(og,{Get:th(xg),Post:th(xg)}),wg=ah(og,{Name:th(Mh),Title:th(Mh),Abstract:th(Mh),LegendURL:$c(Og),StyleSheetURL:th(xg),StyleURL:th(xg)}),Mg=ah(og,{Format:th(Mh),OnlineResource:th(Vc)}),Sg=ah(og,{Keyword:Jc(Mh)});function xg(t,e){return uh({},Mg,t,e)}function Eg(t,e){return uh({},vg,t,e)}function Og(t,e){var r=xg(t,e);if(r){var n=[wh(t.getAttribute("width")),wh(t.getAttribute("height"))];return r.size=n,r}}function Pg(t,e){return uh([],Sg,t,e)}var Tg=ug;function Ig(t){return(Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ig(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ig(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ig(o)?o:String(o)),n)}var i,o}function Cg(t,e){return(Cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ag(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ng(t);if(e){var i=Ng(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kg(this,r)}}function kg(t,e){if(e&&("object"===Ig(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ng(t){return(Ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jg=["SRS","BoundingBox","ScaleHint","LatLonBoundingBox"],Fg=function(t,e){null!==t&&jg.forEach((function(r){var n,i;(n=e,i=r,Array.prototype.filter.call(n.children,(function(t){return t.tagName===i})).length>0)||Array.prototype.filter.call(t.children,(function(t){return t.tagName===r})).forEach((function(t){var r=t.cloneNode(!0);e.appendChild(r)}))}))},Dg=[function t(e,r){var n=e,i=r[n.Name];if(XU(i))HU(n.Layer)&&n.Layer.forEach((function(e){return t(e,r)}));else{var o=i.querySelector("SRS");if(null!==o){var a=o.innerHTML;n.SRS=[a]}}},function t(e,r){var n=r[e.Name];if(XU(n))HU(e.Layer)&&e.Layer.forEach((function(e){return t(e,r)}));else if(HU(e.BoundingBox)){var i=Array.prototype.map.call(n.children,(function(t){return t}));i=i.filter((function(t){return["BoundingBox"].includes(t.tagName)})),e.BoundingBox.forEach((function(t,e){var r=t;if(null===r.crs){var n=i[e];if(!XU(n)){var o=n.getAttribute("SRS");XU(o)||(r.crs=o)}}}))}},function t(e,r){var n=e,i=r[e.Name];if(XU(i))HU(e.Layer)&&e.Layer.forEach((function(e){return t(e,r)}));else{n.ScaleHint=[];var o=Array.prototype.map.call(i.children,(function(t){return t}));(o=o.filter((function(t){return"ScaleHint"===t.tagName}))).forEach((function(t){var e={minScale:parseFloat(t.getAttribute("min")),maxScale:parseFloat(t.getAttribute("max"))};n.ScaleHint.push(e)}))}},function t(e,r){var n=e,i=r[e.Name];if(XU(i))HU(n.Layer)&&n.Layer.forEach((function(e){return t(e,r)}));else{n.LatLonBoundingBox=[];var o=Array.prototype.map.call(i.children,(function(t){return t}));(o=o.filter((function(t){return"LatLonBoundingBox"===t.tagName}))).forEach((function(t){var e={crs:"EPSG:4326",extent:[parseFloat(t.getAttribute("minx")),parseFloat(t.getAttribute("miny")),parseFloat(t.getAttribute("maxx")),parseFloat(t.getAttribute("maxy"))]};n.LatLonBoundingBox.push(e)}))}},function(t,e){var r=t;XU(r.BoundingBox)&&!XU(r.LatLonBoundingBox)&&(r.BoundingBox=r.LatLonBoundingBox)},function(t,e){var r=t;XU(r.MaxScaleDenominator)&&!XU(r.ScaleHint)&&(r.MaxScaleDenominator=r.ScaleHint[0].maxScale)},function(t,e){var r=t;XU(r.MinScaleDenominator)&&!XU(r.ScaleHint)&&(r.MinScaleDenominator=r.ScaleHint[0].minScale)}],Bg=function t(e,r){HU(e)?e.forEach((function(e){t(e,r)})):JU(e)&&(!function(t,e){Dg.forEach((function(r){r(t,e)}))}(e,r),t(e.Layer,r))},Gg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cg(t,e)}(o,t);var e,r,n,i=Ag(o);function o(){return Lg(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"customRead",value:function(t){var e=this.read(t),r=function t(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=n,a=e;if(!0===r&&null!==e&&(a=e.querySelector("Layer")),null!==a){Fg(i,a);var s=a.querySelector("Name").innerHTML,u=a.children;Array.prototype.forEach.call(u,(function(e){"Layer"===e.tagName&&(o=t(e,!1,o,a))})),o[s]=a}return o}(t),n=e.Capability;return XU(n)||XU(n.Layer)||Bg(n.Layer,r),e}}])&&Rg(e.prototype,r),n&&Rg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Tg);function zg(t,e,r,n){var i=$n(r,e,t),o=Yn(e,n,r),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var u=t.getExtent();if(!u||zr(u,i)){var l=Yn(t,o,i)/o;isFinite(l)&&l>0&&(o/=l)}return o}function Ug(t,e,r,n){var i=r-t,o=n-e,a=Math.sqrt(i*i+o*o);return[Math.round(r+i/a),Math.round(n+o/a)]}function qg(t,e,r,n,i,o,a,s,u,l,c){var h=Bs(Math.round(r*t),Math.round(r*e));if(0===u.length)return h.canvas;h.scale(r,r);var f=[1/0,1/0,-1/0,-1/0];u.forEach((function(t,e,r){Jr(f,t.extent)}));var p=dn(f),d=cn(f),m=Bs(Math.round(r*p/n),Math.round(r*d/n)),y=r/n;u.forEach((function(t,e,r){var n=t.extent[0]-f[0],i=-(t.extent[3]-f[3]),o=dn(t.extent),a=cn(t.extent);m.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*y,i*y,o*y,a*y)}));var g=fn(a);return s.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,u=a[0][0],l=a[0][1],c=a[1][0],p=a[1][1],d=a[2][0],y=a[2][1],v=(s[0][0]-g[0])/o,_=-(s[0][1]-g[1])/o,b=(s[1][0]-g[0])/o,w=-(s[1][1]-g[1])/o,M=(s[2][0]-g[0])/o,S=-(s[2][1]-g[1])/o,x=u,E=l;u=0,l=0;var O=function(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var a=Math.abs(t[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}([[c-=x,p-=E,0,0,b-v],[d-=x,y-=E,0,0,M-v],[0,0,c,p,w-_],[0,0,d,y,S-_]]);if(O){h.save(),h.beginPath();var P=(v+b+M)/3,T=(_+w+S)/3,I=Ug(P,T,v,_),L=Ug(P,T,b,w),R=Ug(P,T,M,S);h.moveTo(L[0],L[1]),h.lineTo(I[0],I[1]),h.lineTo(R[0],R[1]),h.clip(),h.transform(O[0],O[2],O[1],O[3],v,_),h.translate(f[0]-x,f[3]-E),h.scale(n/r,-n/r),h.drawImage(m.canvas,0,0),h.restore()}})),c&&(h.save(),h.strokeStyle="black",h.lineWidth=1,s.getTriangles().forEach((function(t,e,r){var n=t.target,i=(n[0][0]-g[0])/o,a=-(n[0][1]-g[1])/o,s=(n[1][0]-g[0])/o,u=-(n[1][1]-g[1])/o,l=(n[2][0]-g[0])/o,c=-(n[2][1]-g[1])/o;h.beginPath(),h.moveTo(s,u),h.lineTo(i,a),h.lineTo(l,c),h.closePath(),h.stroke()})),h.restore()),h.canvas}var Vg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yg=function(t){function e(e,r,n){var i=t.call(this)||this,o=n||{};return i.tileCoord=e,i.state=r,i.interimTile=null,i.hifi=!0,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i}return Vg(e,t),e.prototype.changed=function(){this.dispatchEvent(Ai)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Uo)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==Uo){t.interimTile=null;break}t.getState()==zo?e=t:t.getState()==Go?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==qo&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){br()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:ba(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Ci),Zg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wg=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=r,o.state=i,o}return Zg(e,t),e.prototype.changed=function(){this.dispatchEvent(Ai)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return br()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){br()},e}(Ci),Hg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Xg(t,e,r){var n=t;if(n.src&&go){var i=n.decode(),o=!0;return i.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():r())})),function(){o=!1}}var a=[mi(n,qi,e),mi(n,ki,r)];return function(){a.forEach(yi)}}var Kg=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,n,vc)||this;return s.src_=i,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=vc,s.imageLoadFunction_=a,s}return Hg(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=wc,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=cn(this.extent)/this.image_.height),this.state=bc,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=vc&&this.state!=wc||(this.state=_c,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Xg(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Wg),Jg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var Qg=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=i,s.src_=n,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return Jg(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=qo,this.unlistenImage_(),this.image_=((t=Bs(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Uo:this.state=Vo,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==qo&&(this.state=Go,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Go&&(this.state=zo,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Xg(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Yg),$g=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var r=this.entries_[t];return Or(void 0!==r,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},t.prototype.remove=function(t){var e=this.entries_[t];return Or(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Or(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}(),tv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tv(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=ly(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(uy(e.tileCoord)),e.release())}.bind(this))}},e}($g),rv=function(){function t(t,e,r,n,i,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=Qn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&dn(n)==dn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?dn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?dn(this.targetProj_.getExtent()):null;var u=fn(r),l=pn(r),c=an(r),h=on(r),f=this.transformInv_(u),p=this.transformInv_(l),d=this.transformInv_(c),m=this.transformInv_(h),y=10+(o?Math.max(0,Math.ceil(Math.log2(nn(r)/(o*o*256*256)))):0);if(this.addQuad_(u,l,c,h,f,p,d,m,y),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach((function(t,e,r){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,n,i,o,a,s,u){var l=Fr([i,o,a,s]),c=this.sourceWorldWidth_?dn(l)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1,p=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)p=dn(Fr([t,e,r,n]))/this.targetWorldWidth_>.25||p;!f&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)}if(p||!this.maxSourceExtent_||mn(l,this.maxSourceExtent_)){if(!(p||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(u>0))return;p=!0}if(u>0){if(!p){var d=[(t[0]+r[0])/2,(t[1]+r[1])/2],m=this.transformInv_(d),y=void 0;if(f)y=(pr(i[0],h)+pr(a[0],h))/2-pr(m[0],h);else y=(i[0]+a[0])/2-m[0];var g=(i[1]+a[1])/2-m[1];p=y*y+g*g>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var v=[(e[0]+r[0])/2,(e[1]+r[1])/2],_=this.transformInv_(v),b=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(b);this.addQuad_(t,e,v,b,i,o,_,w,u-1),this.addQuad_(b,v,r,n,w,_,a,s,u-1)}else{var M=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(M),x=[(r[0]+n[0])/2,(r[1]+n[1])/2],E=this.transformInv_(x);this.addQuad_(t,M,x,n,i,S,E,s,u-1),this.addQuad_(M,e,r,x,S,o,a,E,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,r,n,i,a,s),this.addTriangle_(t,e,r,i,o,a)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,r,n){var i=e.source;Qr(t,i[0]),Qr(t,i[1]),Qr(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),nv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iv=function(t){function e(e,r,n,i,o,a,s,u,l,c,h){var f=t.call(this,o,Go)||this;f.renderEdges_=void 0!==h&&h,f.pixelRatio_=s,f.gutter_=u,f.canvas_=null,f.sourceTileGrid_=r,f.targetTileGrid_=i,f.wrappedTileCoord_=a||o,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var p=i.getTileCoordExtent(f.wrappedTileCoord_),d=f.targetTileGrid_.getExtent(),m=f.sourceTileGrid_.getExtent(),y=d?hn(p,d):p;if(0===nn(y))return f.state=Vo,f;var g=e.getExtent();g&&(m=m?hn(m,g):g);var v=i.getResolution(f.wrappedTileCoord_[0]),_=zg(e,n,sn(y),v);if(!isFinite(_)||_<=0)return f.state=Vo,f;var b=void 0!==c?c:.5;if(f.triangulation_=new rv(e,n,y,m,_*b,v),0===f.triangulation_.getTriangles().length)return f.state=Vo,f;f.sourceZ_=r.getZForResolution(_);var w=f.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(w[1]=sr(w[1],m[1],m[3]),w[3]=sr(w[3],m[1],m[3])):w=hn(w,m)),nn(w)){for(var M=r.getTileRangeForExtentAndZ(w,f.sourceZ_),S=M.minX;S<=M.maxX;S++)for(var x=M.minY;x<=M.maxY;x++){var E=l(f.sourceZ_,S,x,s);E&&f.sourceTiles_.push(E)}0===f.sourceTiles_.length&&(f.state=Vo)}else f.state=Vo;return f}return nv(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,n){e&&e.getState()==Uo&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=qo;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n="number"==typeof r?r:r[0],i="number"==typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=qg(n,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=Uo}this.changed()},e.prototype.load=function(){if(this.state==Go){this.state=zo,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,n){var i=e.getState();if(i==Go||i==zo){t++;var o=di(e,Ai,(function(r){var n=e.getState();n!=Uo&&n!=qo&&n!=Vo||(yi(o),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,r){t.getState()==Go&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(yi),this.sourcesListenerKeys_=null},e}(Yg);function ov(t,e){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){return a?t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],r=e.getFullTileRange(t);return Or(r,55),(r.getHeight()-a[2]-1).toString()})):void 0}}function av(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=ov(t[i],e);return sv(n)}function sv(t){return 1===t.length?t[0]:function(e,r,n){if(e){var i=pr(cy(e),t.length);return t[i](e,r,n)}}}function uv(t,e,r){}function lv(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}var cv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function hv(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var fv=function(t){function e(e){var r=t.call(this)||this;return r.projection_=Vn(e.projection),r.attributions_=hv(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:iu,r.wrapX_=void 0!==e.wrapX&&e.wrapX,r}return cv(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return br()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=hv(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(eo);function pv(t){var e=t.getDefaultTileGrid();return e||(e=yv(t),t.setDefaultTileGrid(e)),e}function dv(t){var e=t||{},r=e.extent||Vn("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:mv(r,e.maxZoom,e.tileSize,e.maxResolution)};return new fy(n)}function mv(t,e,r,n){for(var i=void 0!==e?e:42,o=cn(t),a=dn(t),s=hu(void 0!==r?r:256),u=n>0?n:Math.max(a/s[0],o/s[1]),l=i+1,c=new Array(l),h=0;h<l;++h)c[h]=u/Math.pow(2,h);return c}function yv(t,e,r,n){return function(t,e,r,n){var i=void 0!==n?n:Ir,o=mv(t,e,r);return new fy({extent:t,origin:un(t,i),resolutions:o,tileSize:r})}(gv(t),e,r,n)}function gv(t){var e=(t=Vn(t)).getExtent();if(!e){var r=180*ir[or.DEGREES]/t.getMetersPerUnit();e=Zr(-r,-r,r,r)}return e}var vv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_v=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=[256,256],i=e.tileGrid;i&&hu(i.getTileSize(i.getMinZoom()),n);var o="undefined"!=typeof screen,a=o?screen.availWidth||screen.width:1920,s=o?screen.availHeight||screen.height:1080,u=4*Math.ceil(a/n[0])*Math.ceil(s/n[1]);return r.tileCache=new ev(Math.max(u,e.cacheSize||0)),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return vv(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,n){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,u=!0,l=r.minX;l<=r.maxX;++l)for(var c=r.minY;c<=r.maxY;++c)a=sy(e,l,c),s=!1,i.containsKey(a)&&(s=(o=i.get(a)).getState()===Uo)&&(s=!1!==n(o)),s||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,r,n,i){return br()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:pv(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Kn(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),i=this.getTilePixelRatio(e),o=hu(n.getTileSize(t),this.tmpSize);return 1==i?o:cu(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=function(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),o=gv(r);if(zr(o,i))return e;var a=dn(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,n)}(n,t,r)),function(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,r):e.getFullTileRange(r))||o.containsXY(n,i)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,r,n){},e}(fv),bv=function(t){function e(e,r){var n=t.call(this,e)||this;return n.tile=r,n}return vv(e,t),e}(Li),wv=_v,Mv="tileloadstart",Sv="tileloadend",xv="tileloaderror",Ev=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ov=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.generateTileUrlFunction_=!e.tileUrlFunction,r.tileLoadFunction=e.tileLoadFunction,r.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(r):uv,r.urls=null,e.urls?r.setUrls(e.urls):e.url&&r.setUrl(e.url),r.tileLoadingKeys_={},r}return Ev(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,n=Mr(r),i=r.getState();i==zo?(this.tileLoadingKeys_[n]=!0,e=Mv):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=i==qo?xv:i==Uo?Sv:void 0),null!=e&&this.dispatchEvent(new bv(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=lv(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(av(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,r){var n=sy(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(wv),Pv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Tv(t,e){t.getImage().src=e}var Iv=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Tv,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:Qg,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return Pv(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[n];i.expireCache(i==r?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Kn(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Kn(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Kn(e,t)){var r=Mr(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=pv(t)),this.tileGridForProjection[r]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Kn(e,t))return this.tileCache;var r=Mr(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new ev(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,e,r,n,i,o){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=s?this.tileUrlFunction(s,n,i):void 0,l=new this.tileClass(a,void 0!==u?Go:Vo,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,l.addEventListener(Ai,this.handleTileChange.bind(this)),l},e.prototype.getTile=function(t,e,r,n,i){var o=this.getProjection();if(o&&i&&!Kn(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,r],u=void 0,l=uy(s);a.containsKey(l)&&(u=a.get(l));var c=this.getKey();if(u&&u.key==c)return u;var h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(i),p=this.getTileCoordForTileUrlFunction(s,i),d=new iv(o,h,i,f,s,p,this.getTilePixelRatio(n),this.getGutter(),function(t,e,r,n){return this.getTileInternal(t,e,r,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=c,u?(d.interimTile=u,d.refreshInterimChain(),a.replace(l,d)):a.set(l,d),d}return this.getTileInternal(t,e,r,n,o||i)},e.prototype.getTileInternal=function(t,e,r,n,i){var o=null,a=sy(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var u=o;o=this.createTile_(t,e,r,n,i,s),u.getState()==Go?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,n,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var r=Vn(t);if(r){var n=Mr(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(Ov),Lv="carmentaserver",Rv="geoserver",Cv="mapserver",Av="qgis";function kv(t,e){var r=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))}));var n=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}var Nv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function jv(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var i=n.getResolution(t[0]),o=n.getTileCoordExtent(t,this.tmpExtent_),a=hu(n.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=lu(a,s,this.tmpSize),o=Dr(o,i*s,o)),1!=e&&(a=cu(a,e,this.tmpSize));var u={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return An(u,this.params_),this.getRequestUrl_(t,a,o,e,r,u)}}var Fv=function(t){function e(e){var r=this,n=e||{},i=n.params||{},o=!("TRANSPARENT"in i)||i.TRANSPARENT;return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!o,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:jv,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).gutter_=void 0!==n.gutter?n.gutter:0,r.params_=i,r.v13_=!0,r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return Nv(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){var i=Vn(r),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var s=a.getZForResolution(e,this.zDirection),u=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=u[0])){var l=a.getResolution(u[0]),c=a.getTileCoordExtent(u,this.tmpExtent_),h=hu(a.getTileSize(u[0]),this.tmpSize),f=this.gutter_;0!==f&&(h=lu(h,f,this.tmpSize),c=Dr(c,l*f,c)),o&&o!==i&&(l=zg(o,i,t,l),c=ti(c,i,o),t=$n(t,i,o));var p={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};An(p,this.params_,n);var d=Math.floor((t[0]-c[0])/l),m=Math.floor((c[3]-t[1])/l);return p[this.v13_?"I":"X"]=d,p[this.v13_?"J":"Y"]=m,this.getRequestUrl_(u,h,c,1,o||i,p)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i*39.37*(25.4/.28)}return An(r,e),kv(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case Rv:var s=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case Cv:o.MAP_RESOLUTION=90*n;break;case Lv:case Av:o.DPI=90*n;break;default:Or(!1,52)}var u,l=i.getAxisOrientation(),c=r;if(this.v13_&&"ne"==l.substr(0,2)){var h=void 0;h=r[0],c[0]=r[1],c[1]=h,h=r[2],c[2]=r[3],c[3]=h}if(o.BBOX=c.join(","),1==a.length)u=a[0];else u=a[pr(cy(t),a.length)];return kv(u,o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.updateParams=function(t){An(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||"1.3.0";this.v13_=sa(t,"1.3")>=0},e}(Iv);function Dv(t){return(Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Dv(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Dv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Dv(o)?o:String(o)),n)}var i,o}function zv(){return(zv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Uv(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Uv(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zv(t)););return t}function qv(t,e){return(qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Zv(t);if(e){var i=Zv(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Yv(this,r)}}function Yv(t,e){if(e&&("object"===Dv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Zv(t){return(Zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qv(t,e)}(o,t);var e,r,n,i=Vv(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Bv(this,o);var e=t;return XU(t.tileLoadFunction)&&(e.tileLoadFunction=o.tileLoadFunction),i.call(this,e)}return e=o,n=[{key:"tileLoadFunction",value:function(t,e){t.getImage().src="".concat(e,"&_= ").concat(this.revision_)}}],(r=[{key:"changed",value:function(){XU(this.tileCache)||this.tileCache.clear(),zv(Zv(o.prototype),"changed",this).call(this)}}])&&Gv(e.prototype,r),n&&Gv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fv),Hv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xv=function(t){function e(e,r,n,i,o,a){var s=this,u=e.getExtent(),l=r.getExtent(),c=l?hn(n,l):n,h=zg(e,r,sn(c),i),f=new rv(e,r,c,u,.5*h,i),p=a(f.calculateSourceExtent(),h,o),d=p?vc:Mc,m=p?p.getPixelRatio():1;return(s=t.call(this,n,i,m,d)||this).targetProj_=r,s.maxSourceExtent_=u,s.triangulation_=f,s.targetResolution_=i,s.targetExtent_=n,s.sourceImage_=p,s.sourcePixelRatio_=m,s.canvas_=null,s.sourceListenerKey_=null,s}return Hv(e,t),e.prototype.disposeInternal=function(){this.state==_c&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==bc){var e=dn(this.targetExtent_)/this.targetResolution_,r=cn(this.targetExtent_)/this.targetResolution_;this.canvas_=qg(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==vc){this.state=_c,this.changed();var t=this.sourceImage_.getState();t==bc||t==wc?this.reproject_():(this.sourceListenerKey_=di(this.sourceImage_,Ai,(function(t){var e=this.sourceImage_.getState();e!=bc&&e!=wc||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){yi(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(Wg),Kv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jv="imageloadstart",Qv="imageloadend",$v="imageloaderror",t_=function(t){function e(e,r){var n=t.call(this,e)||this;return n.image=r,n}return Kv(e,t),e}(Li);function e_(t,e){t.getImage().src=e}var r_=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return r.resolutions_=void 0!==e.resolutions?e.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return Kv(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=bi(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,r,n){var i=this.getProjection();if(i&&n&&!Kn(i,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Kn(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&Kr(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Xv(i,n,t,e,r,function(t,e,r){return this.getImageInternal(t,e,r,i)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(n=i),this.getImageInternal(t,e,r,n)},e.prototype.getImageInternal=function(t,e,r,n){return br()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case _c:this.loading=!0,this.dispatchEvent(new t_(Jv,e));break;case bc:this.loading=!1,this.dispatchEvent(new t_(Qv,e));break;case wc:this.loading=!1,this.dispatchEvent(new t_($v,e))}},e}(fv),n_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i_=[101,101],o_=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:e_,r.params_=n.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return n_(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){if(void 0!==this.url_){var i=Vn(r),o=this.getProjection();o&&o!==i&&(e=zg(o,i,t,e),t=$n(t,i,o));var a=ln(t,e,0,i_),s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};An(s,this.params_,n);var u=Math.floor((t[0]-a[0])/e),l=Math.floor((a[3]-t[1])/e);return s[this.v13_?"I":"X"]=u,s[this.v13_?"J":"Y"]=l,this.getRequestUrl_(a,i_,1,o||i,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i*39.37*(25.4/.28)}return An(r,e),kv(this.url_,r)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var i=e/r,o=sn(t),a=ln(o,i,0,[Math.ceil(dn(t)/i),Math.ceil(cn(t)/i)]),s=ln(o,i,0,[Math.ceil(this.ratio_*dn(t)/i),Math.ceil(this.ratio_*cn(t)/i)]),u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==r&&Ur(u.getExtent(),a))return u;var l={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};An(l,this.params_),this.imageSize_[0]=Math.round(dn(s)/i),this.imageSize_[1]=Math.round(cn(s)/i);var c=this.getRequestUrl_(s,this.imageSize_,r,n,l);return this.image_=new Kg(s,e,r,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Ai,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){if(Or(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=r)switch(this.serverType_){case Rv:var o=90*r+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case Cv:i.MAP_RESOLUTION=90*r;break;case Lv:case Av:i.DPI=90*r;break;default:Or(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=a.join(","),kv(this.url_,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){An(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||"1.3.0";this.v13_=sa(t,"1.3")>=0},e}(r_);function a_(t){return(a_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==a_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===a_(o)?o:String(o)),n)}var i,o}function l_(){return(l_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=c_(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function c_(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d_(t)););return t}function h_(t,e){return(h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d_(t);if(e){var i=d_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p_(this,r)}}function p_(t,e){if(e&&("object"===a_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d_(t){return(d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h_(t,e)}(o,t);var e,r,n,i=f_(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s_(this,o);var r=e;return(t=i.call(this,r)).imageLoadFunction_=r.imageLoadFunction||t.imageLoadFunction,t}return e=o,(r=[{key:"changed",value:function(){l_(d_(o.prototype),"changed",this).call(this)}},{key:"imageLoadFunction",value:function(t,e){t.getImage().src="".concat(e,"&_=").concat(this.revision_)}}])&&u_(e.prototype,r),n&&u_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(o_);function y_(t){return(y_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g_(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */g_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new E(i||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function f(){}function p(){}function d(){}var m={};u(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(O([])));g&&g!==e&&r.call(g,o)&&(m=g);var v=d.prototype=f.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==y_(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return P()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=M(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function M(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,M(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=d,n(v,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},_(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(v),u(v,s,"Generator"),u(v,o,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function v_(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function __(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==y_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===y_(o)?o:String(o)),n)}var i,o}function w_(t,e){return(w_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function M_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=x_(t);if(e){var i=x_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S_(this,r)}}function S_(t,e){if(e&&("object"===y_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x_(t){return(x_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w_(t,e)}(s,t);var e,r,n,i,o,a=M_(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return __(this,s),(t=a.call(this,e,r)).facadeLayer_=null,t.options=e,t.layers=[],t.displayInLayerSwitcher_=!0,t.getCapabilitiesPromise=null,t.extentPromise=null,t.extent=null,t.resolutions_=null,t.extentProj_=null,!1===t.options.visibility&&(t.visibility=!1),XU(t.tiled)&&(t.tiled=!0!==t.options.singleTile),XU(t.options.numZoomLevels)&&(t.options.numZoomLevels=20),XU(t.options.animated)&&(t.options.animated=!1),t.format=XU(t.options.format)?"image/png":t.options.format,t.styles=t.options.styles||"",t.sldBody=e.sldBody,t.zIndex_=Lb.Z_INDEX[bp],t.minZoom=e.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=e.maxZoom||Number.POSITIVE_INFINITY,t.useCapabilities=!1!==e.useCapabilities,t}return e=s,(r=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().filter((function(t){return!t.equals(e)&&t.isVisible()})).forEach((function(t){return t.setVisible(!1)})),XU(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),XU(r)||this.map.setZoom(r)}else XU(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"addTo",value:function(t){if(this.map=t,this.fire("added:map"),!WU(this.options)&&!WU(this.options.minScale)&&!WU(this.options.maxScale)){var e=this.map.getProjection().units;this.options.minResolution=sq(this.options.minScale,e),this.options.maxResolution=sq(this.options.maxScale,e)}XU(this.name)?this.addAllLayers_():this.addSingleLayer_(),this.legendUrl_===fq([M.config.THEME_URL,Fm.LEGEND_DEFAULT])&&(this.legendUrl_=rq(this.url,{SERVICE:"WMS",VERSION:this.version,REQUEST:"GetLegendGraphic",LAYER:this.name,FORMAT:"image/png"}))}},{key:"setResolutions",value:function(t){var e=this;this.resolutions_=t,this.facadeLayer_.calculateMaxExtent().then((function(r){if(!XU(e.ol3Layer)){var n=e.options.minResolution,i=e.options.maxResolution,o=e.createOLSource_(t,n,i,r);e.ol3Layer.setSource(o),e.ol3Layer.setExtent(r)}}))}},{key:"addSingleLayer_",value:(i=g_().mark((function t(){var e,r,n,i,o,a,s,u,l,c,h,f,p,d,m,y;return g_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,!this.useCapabilities){t.next=9;break}return t.next=4,this.getCapabilities();case 4:n=t.sent,i=n.capabilities.Capability.Layer.Layer,HU(i)&&(o=this.formatCapabilities_(i,e),this.addCapabilitiesMetadata(o)),this.addCapabilitiesMetadata(i),r=this.facadeLayer_.calculateMaxExtentWithCapabilities(n);case 9:a=this.options.minResolution,s=this.options.maxResolution,u=this.opacity_,l=this.zIndex_,c=this.visibility&&!1!==this.options.visibility,h=this.map.getResolutions(),XU(h)&&!XU(this.resolutions_)?h=this.resolutions_:XU(h)&&(f=this.getNumZoomLevels(),p=this.map.getMapImpl().getSize(),d=this.map.getProjection().units,h=XU(a)||XU(s)?uq(r,p,f,d):aq(a,s,f)),m=this.createOLSource_(h,a,s,r),!0===this.tiled?this.ol3Layer=new $m(dq({visible:c,source:m,extent:r,minResolution:a,maxResolution:s,opacity:u,zIndex:l},this.vendorOptions_,!0)):this.ol3Layer=new oy(dq({visible:c,source:m,extent:r,minResolution:a,maxResolution:s,opacity:u,zIndex:l},this.vendorOptions_,!0)),this.map.getMapImpl().addLayer(this.ol3Layer),this.isVisible()&&!this.inRange()?this.setVisible(!1):this.setVisible(this.visibility),null!==l&&this.setZIndex(l),null!==this.resolutions_&&this.setResolutions(this.resolutions_),y=!1===this.transparent||!0===this.options.animated,this.ol3Layer.set("animated",y),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom);case 26:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){v_(o,r,n,a,s,"next",t)}function s(t){v_(o,r,n,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"formatCapabilities_",value:function(t,e){for(var r=t,n=0,i=r.length;n<i;n+=1)if(void 0!==r[n]&&void 0!==r[n].Name&&r[n].Name===e.facadeLayer_.name){r=r[n];try{this.legendUrl_=r.Style[0].LegendURL[0].OnlineResource}catch(t){}}else if(void 0!==r[n]&&void 0!==r[n].Layer&&void 0!==r[n].Layer.filter((function(t){return t.Name===e.facadeLayer_.name}))[0]){r=r[n].Layer.filter((function(t){return t.Name===e.facadeLayer_.name}))[0];try{this.legendUrl_=r.Style[0].LegendURL[0].OnlineResource}catch(t){}}return r}},{key:"addCapabilitiesMetadata",value:function(t){var e={abstract:XU(t.Abstract)?"":t.Abstract,attribution:XU(t.Attribution)?"":t.Attribution,metadataURL:XU(t.MetadataURL)?"":t.MetadataURL,style:XU(t.Style)?"":t.Style};void 0===this.facadeLayer_.capabilitiesMetadata&&(this.facadeLayer_.capabilitiesMetadata=e)}},{key:"createOLSource_",value:function(t,e,r,n){var i=this,o=this.vendorOptions_.source;if(XU(this.vendorOptions_.source)){var a={LAYERS:this.name,VERSION:this.version,TRANSPARENT:this.transparent,FORMAT:this.format,STYLES:this.styles};"1.3.0"!==this.version&&(a.TILED=this.tiled),XU(this.sldBody)||(a.SLD_BODY=this.sldBody),XU(this.options.params)||Object.keys(this.options.params).forEach((function(t){a[t.toUpperCase()]=i.options.params[t]}));var s=this.opacity_,u=this.zIndex_;if(!0===this.tiled){var l=!!this.useCapabilities&&new fy({resolutions:t,extent:n,origin:on(n)});o=new Wv({url:this.url,params:a,tileGrid:l,extent:n,minResolution:e,maxResolution:r,opacity:s,zIndex:u})}else o=new m_({url:this.url,params:a,extent:n,minResolution:e,maxResolution:r,opacity:s,zIndex:u})}return o}},{key:"addAllLayers_",value:function(){var t=this;this.getCapabilities().then((function(e){e.getLayers().forEach((function(e){var r=new D_({url:t.url,name:e.name,version:e.version,tiled:t.tiled},t.vendorOptions_);t.layers.push(r)})),t.map.addWMS(t.layers);var r=t.layers.length;t.layers.forEach((function(t){t.setZIndex(Lb.Z_INDEX[bp]+r),r+=1}))}))}},{key:"getExtent",value:function(){var t=this,e=Vn(this.map.getProjection().code);return this.extentPromise=new Promise((function(r,n){XU(t.extent_)?t.getCapabilities().then((function(n){t.extent_=n.getLayerExtent(t.name),t.extentProj_=e,r(t.extent_)})):(t.extent_=Zy.transformExtent(t.extent_,t.extentProj_,e),t.extentProj_=e,r(t.extent_))})),this.extentPromise}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"updateMinMaxResolution",value:function(t){XU(this.options.minResolution)||(this.options.minResolution=sq(this.options.minScale,t.units),this.ol3Layer.setMinResolution(this.options.minResolution)),XU(this.options.maxResolution)||(this.options.maxResolution=sq(this.options.maxScale,t.units),this.ol3Layer.setMaxResolution(this.options.maxResolution))}},{key:"setMaxExtent",value:function(t){var e=this.options.minResolution,r=this.options.maxResolution;if(this.getOL3Layer().setExtent(t),!0===this.tiled){var n=this.map.getResolutions();if(XU(n)&&!XU(this.resolutions_)&&(n=this.resolutions_),!XU(n)){var i=this.createOLSource_(n,e,r,t);this.ol3Layer.setSource(i)}}}},{key:"getNumZoomLevels",value:function(){return this.options.numZoomLevels}},{key:"getLayers",value:function(){return this.layers}},{key:"getCapabilities",value:function(){var t=this,e=this.map.collectionCapabilities.find((function(e){return e.url===t.url}));if(e.capabilities)this.getCapabilitiesPromise=e.capabilities;else if(XU(this.getCapabilitiesPromise)){var r=this.url,n=this.version,i=this.map.getProjection();this.getCapabilitiesPromise=new Promise((function(t,e){var o=iq(r,n);jU(o).then((function(e){var n=e.xml,o=(new Gg).customRead(n),a=new ng(o,r,i);t(a)}))})),e.capabilities=this.getCapabilitiesPromise}return this.getCapabilitiesPromise}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}},{key:"refresh",value:function(){var t=this.getOL3Layer();XU(t)||t.getSource().changed()}},{key:"getExtentFromCapabilities",value:function(t){var e=this.facadeLayer_.name;return t.getLayerExtent(e)}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"destroy",value:function(){var t=this.map.getMapImpl();XU(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),XU(this.layers)||(this.layers.map(this.map.removeLayers,this.map),this.layers.length=0),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof s&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.version===t.version),e}}])&&b_(e.prototype,r),n&&b_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(tg);E_.LEGEND_IMAGE=null;var O_=E_;function P_(t){return(P_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function I_(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T_(Object(r),!0).forEach((function(e){L_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L_(t,e,r){return(e=A_(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A_(n.key),n)}}function A_(t){var e=function(t,e){if("object"!==P_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===P_(e)?e:String(e)}function k_(t,e){return(k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function N_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=F_(t);if(e){var i=F_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j_(this,r)}}function j_(t,e){if(e&&("object"===P_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function F_(t){return(F_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var D_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k_(t,e)}(o,t);var e,r,n,i=N_(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};R_(this,o),YU(O_)&&Af(Hf("exception").wms_method),XU(t)&&Af(Hf("exception").no_param);var a=Tm(t,bp),s=I_(I_({},r),{},{visibility:a.visibility,queryable:a.queryable,displayInLayerSwitcher:a.displayInLayerSwitcher,useCapabilities:a.useCapabilities}),u=new O_(s,n);return(e=i.call(this,a,u)).legend=a.legend,e.version=a.version,XU(a.tiled)||(e.tiled=a.tiled),e.transparent=a.transparent,XU(n.capabilitiesMetadata)||(e.capabilitiesMetadata=n.capabilitiesMetadata),e.minZoom=a.minZoom,e.maxZoom=a.maxZoom,e.options=s,e.getCapabilitiesPromise_=null,e.useCapabilities=!1!==t.useCapabilities,e._updateNoCache(),e}return e=o,(r=[{key:"type",get:function(){return bp},set:function(t){YU(t)||XU(t)||t===bp||Af("El tipo de capa debe ser '".concat(bp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){XU(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"tiled",get:function(){return this.getImpl().tiled},set:function(t){XU(t)?this.getImpl().tiled=!0:QU(t)?this.getImpl().tiled="true"===tq(t):this.getImpl().tiled=t}},{key:"version",get:function(){return this.getImpl().version},set:function(t){XU(t)?this.getImpl().version="1.3.0":this.getImpl().version=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}},{key:"getMaxExtent",value:function(t){var e,r=this;return XU(this.userMaxExtent)?(XU(this.options.wmcMaxExtent)?XU(this.map_.userMaxExtent)?this.getCapabilities().then((function(e){var n=r.getImpl().getExtentFromCapabilities(e);if(XU(n)){var i=r.map_.getProjection().getExtent();r.maxExtent_=i}else r.maxExtent_=n;KU(t)&&t(r.maxExtent_)})):this.maxExtent_=this.map_.userMaxExtent:this.maxExtent_=this.options.wmcMaxExtent,e=this.maxExtent_):e=this.userMaxExtent,!XU(e)&&KU(t)&&t(e),e}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return t.getMaxExtent(e)}))}},{key:"calculateMaxExtentWithCapabilities",value:function(t){if(XU(this.userMaxExtent)&&this.userMaxExtent)return this.userMaxExtent;if(XU(this.options.wmcMaxExtent)&&this.options.wmcMaxExtent)return this.maxExtent_=this.options.wmcMaxExtent,this.maxExtent_;if(XU(this.map_.userMaxExtent)&&this.map_.userMaxExtent)return this.maxExtent_=this.map_.userMaxExtent,this.maxExtent_;var e=this.getImpl().getExtentFromCapabilities(t);if(XU(e)){var r=this.map_.getProjection().getExtent();return this.maxExtent_=r,this.maxExtent_}return e}},{key:"getCapabilities",value:function(){return XU(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"getNoCacheUrl",value:function(){return this._noCacheUrl}},{key:"getNoCacheName",value:function(){return this._noCacheName}},{key:"updateMinMaxResolution",value:function(t){return this.getImpl().updateMinMaxResolution(t)}},{key:"_updateNoCache",value:function(){var t=M.config.tileMappgins.tiledNames.indexOf(this.name);-1!==t&&gq(M.config.tileMappgins.tiledUrls[t],this.url)&&(this._noCacheUrl=M.config.tileMappgins.urls[t],this._noCacheName=M.config.tileMappgins.names[t])}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.version===t.version),e}}])&&C_(e.prototype,r),n&&C_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fm),B_=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var r;if(e){var n=e.dataProjection?Vn(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===or.TILE_PIXELS&&(n=Vn(n)).setWorldExtent(e.extent),r={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(r)},t.prototype.adaptOptions=function(t){return An({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return br()},t.prototype.readFeature=function(t,e){return br()},t.prototype.readFeatures=function(t,e){return br()},t.prototype.readGeometry=function(t,e){return br()},t.prototype.readProjection=function(t){return br()},t.prototype.writeFeature=function(t,e){return br()},t.prototype.writeFeatures=function(t,e){return br()},t.prototype.writeGeometry=function(t,e){return br()},t}();function G_(t,e,r){var n,i=r?Vn(r.featureProjection):null,o=r?Vn(r.dataProjection):null;if(n=i&&o&&!Kn(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&r&&void 0!==r.decimals){var a=Math.pow(10,r.decimals);n===t&&(n=t.clone()),n.applyTransform((function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*a)/a;return t}))}return n}function z_(t,e){var r=e?Vn(e.featureProjection):null,n=e?Vn(e.dataProjection):null;return r&&n&&!Kn(r,n)?ti(t,n,r):t}var U_="arraybuffer",q_="json",V_="text",Y_="xml",Z_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),W_=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===hh&&"undefined"!=typeof XMLSerializer&&(hh=new XMLSerializer),hh),e}return Z_(e,t),e.prototype.getType=function(){return Y_},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var r=Xc(t);return this.readFeatureFromDocument(r,e)}return Hc(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var r=Xc(t);return this.readFeaturesFromDocument(r,e)}return Hc(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var r=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Mi(r,this.readFeaturesFromNode(n,e));return r},e.prototype.readFeaturesFromNode=function(t,e){return br()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var r=Xc(t);return this.readGeometryFromDocument(r,e)}return Hc(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=Xc(t);return this.readProjectionFromDocument(e)}return Hc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeGeometryNode=function(t,e){return null},e}(B_),H_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X_="http://www.opengis.net/gml",K_=/^[\s\xa0]*$/,J_=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType=n.featureType,r.featureNS=n.featureNS,r.srsName=n.srsName,r.schemaLocation="",r.FEATURE_COLLECTION_PARSERS={},r.FEATURE_COLLECTION_PARSERS[r.namespace]={featureMember:Jc(r.readFeaturesInternal),featureMembers:Qc(r.readFeaturesInternal)},r}return H_(e,t),e.prototype.readFeaturesInternal=function(t,e){var r=t.localName,n=null;if("FeatureCollection"==r)n=uh([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r){var i=e[0],o=i.featureType,a=i.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,u=t.childNodes.length;s<u;++s){var l=t.childNodes[s];if(1===l.nodeType){var c=l.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",f=0,p=l.namespaceURI;for(var d in a){if(a[d]===p){h=d;break}++f}h||(a[h="p"+f]=p),o.push(h+":"+c)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var m=a;(a={}).p0=m}var y={},g=Array.isArray(o)?o:[o];for(var v in a){var _={};for(s=0,u=g.length;s<u;++s){(-1===g[s].indexOf(":")?"p0":g[s].split(":")[0])===v&&(_[g[s].split(":").pop()]="featureMembers"==r?Jc(this.readFeatureElement,this):Qc(this.readFeatureElement,this))}y[a[v]]=_}n=uh("featureMember"==r?void 0:[],y,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var r=e[0];r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension");var n=uh(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?z_(n,r):G_(n,!1,r):void 0},e.prototype.readFeatureElementInternal=function(t,e,r){for(var n,i={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=Wc(o,!1),K_.test(a)&&(a=void 0)):(r&&(a=this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(n=s):a=this.readFeatureElementInternal(o,e,!1)),i[s]?(i[s]instanceof Array||(i[s]=[i[s]]),i[s].push(a)):i[s]=a;var u=o.attributes.length;if(u>0){i[s]={_content_:i[s]};for(var l=0;l<u;l++){var c=o.attributes[l].name;i[s][c]=o.attributes[l].value}}}if(r){var h=new dy(i);n&&h.setGeometryName(n);var f=t.getAttribute("fid")||function(t,e,r){return t.getAttributeNS(e,r)||""}(t,this.namespace,"id");return f&&h.setId(f),h}return i},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new ds(r,Oa)},e.prototype.readMultiPoint=function(t,e){var r=uh([],this.MULTIPOINT_PARSERS_,t,e,this);return r?new Ey(r):void 0},e.prototype.readMultiLineString=function(t,e){var r=uh([],this.MULTILINESTRING_PARSERS_,t,e,this);if(r)return new Py(r)},e.prototype.readMultiPolygon=function(t,e){var r=uh([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(r)return new Iy(r)},e.prototype.pointMemberParser_=function(t,e){sh(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){sh(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){sh(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);return r?new Sy(r,Oa):void 0},e.prototype.readFlatLinearRing_=function(t,e){var r=uh(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);return r||void 0},e.prototype.readLinearRing=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new fs(r,Oa)},e.prototype.readPolygon=function(t,e){var r=uh([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)Mi(i,r[a]),o.push(i.length);return new Ls(i,Oa,o)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return uh(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){var r=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){var r={featureType:this.featureType,featureNS:this.featureNS};return e&&An(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]},e.prototype.readProjectionFromNode=function(t){return Vn(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(W_);J_.prototype.namespace=X_,J_.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},J_.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},J_.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},J_.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Jc(J_.prototype.pointMemberParser_),pointMembers:Jc(J_.prototype.pointMemberParser_)}},J_.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Jc(J_.prototype.lineStringMemberParser_),lineStringMembers:Jc(J_.prototype.lineStringMemberParser_)}},J_.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Jc(J_.prototype.polygonMemberParser_),polygonMembers:Jc(J_.prototype.polygonMemberParser_)}},J_.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Jc(J_.prototype.readFlatCoordinatesFromNode_)}},J_.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Jc(J_.prototype.readLineString)}},J_.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Jc(J_.prototype.readPolygon)}},J_.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Qc(J_.prototype.readFlatLinearRing_)}};var Q_=J_,$_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tb={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},eb=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,r.curve_=void 0!==n.curve&&n.curve,r.multiCurve_=void 0===n.multiCurve||n.multiCurve,r.multiSurface_=void 0===n.multiSurface||n.multiSurface,r.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",r.hasZ=void 0!==n.hasZ&&n.hasZ,r}return $_(e,t),e.prototype.readMultiCurve_=function(t,e){var r=uh([],this.MULTICURVE_PARSERS_,t,e,this);return r?new Py(r):void 0},e.prototype.readMultiSurface_=function(t,e){var r=uh([],this.MULTISURFACE_PARSERS_,t,e,this);if(r)return new Iy(r)},e.prototype.curveMemberParser_=function(t,e){sh(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){sh(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return uh([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return uh([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return uh([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return uh([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var r=uh(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.exteriorParser_=function(t,e){var r=uh(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.readSurface_=function(t,e){var r=uh([null],this.SURFACE_PARSERS_,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)Mi(i,r[a]),o.push(i.length);return new Ls(i,Oa,o)}},e.prototype.readCurve_=function(t,e){var r=uh([null],this.CURVE_PARSERS_,t,e,this);return r?new Sy(r,Oa):void 0},e.prototype.readEnvelope_=function(t,e){var r=uh([null],this.ENVELOPE_PARSERS_,t,e,this);return Zr(r[1][0],r[1][1],r[2][0],r[2][1])},e.prototype.readFlatPos_=function(t,e){for(var r,n=Wc(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=i.exec(n);)o.push(parseFloat(r[1])),n=n.substr(r[0].length);if(""===n){var a=e[0].srsName,s="enu";if(a)s=Vn(a).getAxisOrientation();if("neu"===s){var u,l=void 0;for(l=0,u=o.length;l<u;l+=3){var c=o[l],h=o[l+1];o[l]=h,o[l+1]=c}}var f=o.length;if(2==f&&o.push(0),0!==f)return o}},e.prototype.readFlatPosList_=function(t,e){var r=Wc(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],i=n.srsName,o=n.srsDimension,a="enu";i&&(a=Vn(i).getAxisOrientation());var s,u,l,c=r.split(/\s+/),h=2;t.getAttribute("srsDimension")?h=wh(t.getAttribute("srsDimension")):t.getAttribute("dimension")?h=wh(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?h=wh(t.parentNode.getAttribute("srsDimension")):o&&(h=wh(o));for(var f=[],p=0,d=c.length;p<d;p+=h)s=parseFloat(c[p]),u=parseFloat(c[p+1]),l=3===h?parseFloat(c[p+2]):0,"en"===a.substr(0,2)?f.push(s,u,l):f.push(u,s,l);return f},e.prototype.writePos_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);var a=n.srsName,s="enu";a&&(s=Vn(a).getAxisOrientation());var u,l=e.getCoordinates();(u="en"===s.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],i)&&(u+=" "+(l[2]||0));Oh(t,u)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=Vn(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];r&&(i+=" "+(t[2]||0));return i},e.prototype.writePosList_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var a,s=n.srsName,u=e.getCoordinates(),l=u.length,c=new Array(l),h=0;h<l;++h)a=u[h],c[h]=this.getCoords_(a,s,i);Oh(t,c.join(" "))},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=Zc(t.namespaceURI,"pos");t.appendChild(i),this.writePos_(i,e,r)},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];ch({node:t},this.ENVELOPE_SERIALIZERS_,ih,i,r,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=Zc(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Zc(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();ch({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=Zc(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=Zc(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)}else if("Curve"===t.nodeName){var o=Zc(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();ch({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.srsName,o=n.hasZ;i&&t.setAttribute("srsName",i);var a=e.getPoints();ch({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS_,nh("pointMember"),a,r,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();ch({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeRing_=function(t,e,r){var n=Zc(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writePointMember_=function(t,e,r){var n=Zc(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeSurfacePatches_=function(t,e,r){var n=Zc(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeCurveSegments_=function(t,e,r){var n=Zc(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=An({},i);o.node=t,n=Array.isArray(e)?z_(e,i):G_(e,!0,i),ch(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=e.getProperties(),u=[],l=[];for(var c in s){var h=s[c];null!==h&&(u.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=eh(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=eh(Oh)))}var f=An({},i);f.node=t,ch(f,i.serializers,nh(void 0,o),l,r,u)},e.prototype.writeFeatureMembers_=function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a={};a[o]={},a[o][i]=eh(this.writeFeatureElement,this);var s=An({},n);s.node=t,ch(s,a,nh(i,o),e,r)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return Zc(this.namespace,tb[n.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.curve,u=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"LineString"===n&&!0===s?n="Curve":"MultiLineString"===n&&!0===u&&(n="MultiCurve"),Zc(this.namespace,n)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var r=Zc(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&An(n,e),this.writeGeometryElement(r,t,[n]),r},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Zc(this.namespace,"featureMembers");r.setAttributeNS(Yc,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&An(n,e),this.writeFeatureMembers_(r,t,[n]),r},e}(Q_);eb.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Qc(eb.prototype.readFlatPos_),posList:Qc(eb.prototype.readFlatPosList_)}},eb.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:eb.prototype.interiorParser_,exterior:eb.prototype.exteriorParser_}},eb.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Qc(Q_.prototype.readPoint),MultiPoint:Qc(Q_.prototype.readMultiPoint),LineString:Qc(Q_.prototype.readLineString),MultiLineString:Qc(Q_.prototype.readMultiLineString),LinearRing:Qc(Q_.prototype.readLinearRing),Polygon:Qc(Q_.prototype.readPolygon),MultiPolygon:Qc(Q_.prototype.readMultiPolygon),Surface:Qc(eb.prototype.readSurface_),MultiSurface:Qc(eb.prototype.readMultiSurface_),Curve:Qc(eb.prototype.readCurve_),MultiCurve:Qc(eb.prototype.readMultiCurve_),Envelope:Qc(eb.prototype.readEnvelope_)}},eb.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Jc(eb.prototype.curveMemberParser_),curveMembers:Jc(eb.prototype.curveMemberParser_)}},eb.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Jc(eb.prototype.surfaceMemberParser_),surfaceMembers:Jc(eb.prototype.surfaceMemberParser_)}},eb.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Jc(Q_.prototype.readLineString),Curve:Jc(eb.prototype.readCurve_)}},eb.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Jc(Q_.prototype.readPolygon),Surface:Jc(eb.prototype.readSurface_)}},eb.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:Qc(eb.prototype.readPatch_)}},eb.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:Qc(eb.prototype.readSegment_)}},eb.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Jc(eb.prototype.readFlatPosList_),upperCorner:Jc(eb.prototype.readFlatPosList_)}},eb.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:Qc(eb.prototype.readPolygonPatch_)}},eb.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:Qc(eb.prototype.readLineStringSegment_)}},eb.prototype.writeFeatures,eb.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:eh(eb.prototype.writeRing_),interior:eh(eb.prototype.writeRing_)}},eb.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:eh(Oh),upperCorner:eh(Oh)}},eb.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:eh(eb.prototype.writeSurfaceOrPolygonMember_),polygonMember:eh(eb.prototype.writeSurfaceOrPolygonMember_)}},eb.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:eh(eb.prototype.writePointMember_)}},eb.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:eh(eb.prototype.writeLineStringOrCurveMember_),curveMember:eh(eb.prototype.writeLineStringOrCurveMember_)}},eb.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:eh(eb.prototype.writeCurveOrLineString_),MultiCurve:eh(eb.prototype.writeMultiCurveOrLineString_),Point:eh(eb.prototype.writePoint_),MultiPoint:eh(eb.prototype.writeMultiPoint_),LineString:eh(eb.prototype.writeCurveOrLineString_),MultiLineString:eh(eb.prototype.writeMultiCurveOrLineString_),LinearRing:eh(eb.prototype.writeLinearRing_),Polygon:eh(eb.prototype.writeSurfaceOrPolygon_),MultiPolygon:eh(eb.prototype.writeMultiSurfaceOrPolygon_),Surface:eh(eb.prototype.writeSurfaceOrPolygon_),MultiSurface:eh(eb.prototype.writeMultiSurfaceOrPolygon_),Envelope:eh(eb.prototype.writeEnvelope)}};var rb=eb,nb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ib=function(t){function e(e){var r=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return r.matrixIds_=e.matrixIds,r}return nb(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(fy),ob=ib;function ab(t,e,r){var n=[],i=[],o=[],a=[],s=[],u=void 0!==r?r:[],l=t.SupportedCRS,c=Vn(l.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Vn(l),h=c.getMetersPerUnit(),f="ne"==c.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){if(!(u.length>0)||Si(u,(function(r){return e.Identifier==r.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===r.TileMatrix}))){i.push(e.Identifier);var r=28e-5*e.ScaleDenominator/h,l=e.TileWidth,c=e.TileHeight;f?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),n.push(r),a.push(l==c?l:[l,c]),s.push([e.MatrixWidth,e.MatrixHeight])}})),new ib({extent:e,origins:o,resolutions:n,matrixIds:i,tileSizes:a,sizes:s})}var sb="KVP",ub="REST";rb.prototype.writePos_=function(t,e,r){var n=e.getCoordinates();Oh(t,"".concat(n[0]," ").concat(n[1]))},rb.prototype.getCoords_=function(t,e){return"".concat(t[0]," ").concat(t[1])};var lb=function(t,e){var r=Si(t.Contents.Layer,(function(t,r,n){return t.Identifier==e.layer}));if(null===r)return null;var n,i=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?Ei(r.TileMatrixSetLink,"projection"in e?function(t,r,n){var o=Si(i,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=Vn(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Vn(o),s=Vn(e.projection);return a&&s?equivalent(a,s):o==e.projection}:function(t,r,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=r.TileMatrixSetLink[n].TileMatrixSet,a=r.TileMatrixSetLink[n].TileMatrixSetLimits,s=r.Format[0];"format"in e&&(s=e.format),(n=Ei(r.Style,(function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(n=0);var u=r.Style[n].Identifier,l={};"Dimension"in r&&r.Dimension.forEach((function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),l[n]=i}));var c,h=Si(t.Contents.TileMatrixSet,(function(t,e,r){return t.Identifier==o})),f=h.SupportedCRS;if(f&&(c=Vn(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Vn(f)),"projection"in e){var p=Vn(e.projection);p&&(c&&!equivalent(p,c)||(c=p))}var d,m,y=r.WGS84BoundingBox;if(e.extent)d=e.extent;else if(void 0!==y){var g=Vn("EPSG:4326").getExtent();m=y[0]==g[0]&&y[2]==g[2],d=transformExtent(y,"EPSG:4326",c);var v=c.getExtent();v&&(containsExtent(v,d)||(d=void 0))}var _=ab(h,d,a),b=[],w=e.requestEncoding;if(w=void 0!==w?w:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var M=t.OperationsMetadata.GetTile.DCP.HTTP.Get,S=0,x=M.length;S<x;++S)if(M[S].Constraint){var E=Si(M[S].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===w&&(w=E[0]),w!==sb)break;_i(E,sb)&&b.push(M[S].href)}else M[S].href&&(w=sb,b.push(M[S].href));return 0===b.length&&(w=ub,r.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,b.push(t.template))}))),{urls:b,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:w,tileGrid:_,style:u,dimensions:l,wrapX:m,crossOrigin:e.crossOrigin}};function cb(t){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==cb(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==cb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===cb(o)?o:String(o)),n)}var i,o}function fb(t,e){return(fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mb(t);if(e){var i=mb(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return db(this,r)}}function db(t,e){if(e&&("object"===cb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mb(t){return(mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fb(t,e)}(o,t);var e,r,n,i=pb(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).userZoom_=null,e}return e=o,(r=[{key:"setUserZoom",value:function(t){this.userZoom_=t,XU(t)||this.setZoom(t)}},{key:"getUserZoom",value:function(){return this.userZoom_}},{key:"setProjection",value:function(t){this.projection_=t}},{key:"getResolutions",value:function(){return this.get("resolutions")}},{key:"setResolutions",value:function(t){this.set("resolutions",t),this.maxResolution_=t[0],this.minResolution_=t[t.length-1],this.applyOptions_({minZoom:this.minZoom_,resolutions:t,zoomFactor:this.zoomFactor_,minResolution:this.minResolution_,maxResolution:this.maxResolution_,projection:this.projection_,center:this.getCenter()}),XU(this.userZoom_)||this.setZoom(this.userZoom_)}}])&&hb(e.prototype,r),n&&hb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ds);function gb(t){return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vb(t){return function(t){if(Array.isArray(t))return _b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _b(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bb(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */bb=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new E(i||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function f(){}function p(){}function d(){}var m={};u(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(O([])));g&&g!==e&&r.call(g,o)&&(m=g);var v=d.prototype=f.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==gb(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return P()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=M(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function M(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,M(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=d,n(v,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},_(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(v),u(v,s,"Generator"),u(v,o,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function wb(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function Mb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==gb(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===gb(o)?o:String(o)),n)}var i,o}function xb(t,e){return(xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Eb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Tb(t);if(e){var i=Tb(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ob(this,r)}}function Ob(t,e){if(e&&("object"===gb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pb(t)}function Pb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tb(t){return(Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ib=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xb(t,e)}(s,t);var e,r,n,i,o,a=Eb(s);function s(t,e){var r;return Mb(this,s),(r=a.call(this)).facadeMap_=e,r.layers_=[],r.layerGroups_=[],r.controls_=[],r.initZoom_=!0,r.userResolutions_=null,r.userBbox_=null,r.maxExtentForResolutions_=null,r.envolvedMaxExtent_=null,r._calculatedResolutions=!1,r._resolutionsEnvolvedExtent=!1,r._resolutionsBaseLayer=!1,r.currentZoom=null,r.map_=new qc({controls:[],target:t.id,view:new yb}),r.registerEvents_(),r.map_.getView().setConstrainResolution(!0),r.facadeMap_.on("completed",(function(){r.map_.updateSize()})),r.map_.on("singleclick",r.onMapClick_.bind(Pb(r))),r.map_.addInteraction(new Nu({handleEvent:function(t){return"pointermove"===t.type&&r.onMapMove_(t),!0}})),r}return e=s,(r=[{key:"getLayers",value:function(t){var e=this.getKML(t),r=this.getWMS(t),n=this.getWFS(t),i=this.getOGCAPIFeatures(t),o=this.getWMTS(t),a=this.getMVT(t),s=this.getMBTiles(t),u=this.getMBTilesVector(t),l=this.getXYZs(t),c=this.getTMS(t),h=this.getUnknowLayers_(t);return e.concat(r).concat(n).concat(i).concat(o).concat(a).concat(s).concat(u).concat(l).concat(c).concat(h)}},{key:"getBaseLayers",value:function(){return this.getLayers().filter((function(t){var e=!1;return t.type!==bp&&t.type!==Sp&&t.type!==Lp&&t.type!==Rp&&t.type!==Op||(e=!0!==t.transparent),e}))}},{key:"addLayers",value:function(t){var e=this,r=t;return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length||r.forEach((function(t){t.type===bp?e.facadeMap_.addWMS(t):t.type===Sp?e.facadeMap_.addWMTS(t):t.type===_p?e.facadeMap_.addKML(t):t.type===wp?e.facadeMap_.addWFS(t):t.type===Mp?e.facadeMap_.addOGCAPIFeatures(t):t.type===Ip?e.facadeMap_.addMVT(t):"MBTiles"===t.type?e.facadeMap_.addMBTiles(t):"MBTilesVector"===t.type?e.facadeMap_.addMBTilesVector(t):t.type===Ep?e.facadeMap_.addXYZ(t):t.type===Op?e.facadeMap_.addTMS(t):kp(t.type)||e.addUnknowLayers_([t])})),this}},{key:"removeLayers",value:function(t){var e=t.filter((function(t){return!kp(t.type)})),r=t.filter((function(t){return kp(t.type)}));return r.length>0&&(this.removeKML(r),this.removeWMS(r),this.removeWFS(r),this.removeOGCAPIFeatures(r),this.removeWMTS(r),this.removeMVT(r),this.removeMBTiles(r),this.removeMBTilesVector(r),this.removeXYZ(r),this.removeTMS(r)),e.length>0&&this.removeUnknowLayers_(e),this.facadeMap_.fire("removed:layer",[t]),this}},{key:"getKML",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===_p}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name),XU(t.extract)||(n=n&&t.extract===r.extract)),n}));e=e.concat(r)}),this),e}},{key:"addKML",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===_p&&!pq(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),null==t.getZIndex()){var n=e.layers_.length+s.Z_INDEX[_p];t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}}),this),this}},{key:"removeKML",value:function(t){var e=this;return this.getKML(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!t.equals(e)})),t.getImpl().destroy()}),this),this}},{key:"getWMS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===bp}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:t instanceof D_?n=t===r:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name),XU(t.legend)||(n=n&&t.legend===r.legend),XU(t.transparent)||(n=n&&t.transparent===r.transparent),XU(t.tiled)||(n=n&&t.tiled===r.tiled),XU(t.cql)||(n=n&&t.cql===r.cql),XU(t.version)||(n=n&&t.version===r.version)),n}));e=e.concat(r)}),this),e}},{key:"addWMS",value:function(t){var e=this,r=this.getBaseLayers().length>0,n=[];return t.forEach((function(t){if(t.type===bp&&!pq(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),n.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.setZIndex(s.Z_INDEX_BASELAYER);else if(null==t.getZIndex()){var i=e.layers_.length+s.Z_INDEX[bp];t.setZIndex(i)}})),(n.length>0&&!r||n.some((function(t){return!0!==t.transparent&&t.isVisible()})))&&this.updateResolutionsFromBaseLayer(),this}},{key:"removeWMS",value:function(t){var e=this;return this.getWMS(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!t.equals(e)})),t.getImpl().destroy()})),this}},{key:"getGeoJSON",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Pp}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name),XU(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"getWFS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===wp}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name),XU(t.namespace)||(n=n&&t.namespace===r.namespace),XU(t.legend)||(n=n&&t.legend===r.legend),XU(t.cql)||(n=n&&t.cql===r.cql),XU(t.geometry)||(n=n&&t.geometry===r.geometry),XU(t.ids)||(n=n&&t.ids===r.ids),XU(t.version)||(n=n&&t.version===r.version)),n}));e=e.concat(r)})),e}},{key:"addWFS",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===wp&&!pq(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+s.Z_INDEX[wp];t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeWFS",value:function(t){var e=this;return this.getWFS(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy()})),this}},{key:"getOGCAPIFeatures",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Mp}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name),XU(t.legend)||(n=n&&t.legend===r.legend),XU(t.cql)||(n=n&&t.cql===r.cql),XU(t.geometry)||(n=n&&t.geometry===r.geometry),XU(t.id)||(n=n&&t.id===r.id)),n}));e=e.concat(r)})),e}},{key:"addOGCAPIFeatures",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===Mp&&!pq(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+s.Z_INDEX[Mp];t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeOGCAPIFeatures",value:function(t){var e=this;return this.getOGCAPIFeatures(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy()})),this}},{key:"getWMTS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Sp}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name),XU(t.matrixSet)||(n=n&&t.matrixSet===r.matrixSet),XU(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"addWMTS",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===Sp&&!pq(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.isVisible()&&e.updateResolutionsFromBaseLayer(),t.setZIndex(s.Z_INDEX_BASELAYER);else{if(null==t.getZIndex()){var n=e.layers_.length+s.Z_INDEX[Sp];t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeWMTS",value:function(t){var e=this;return this.getWMTS(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy()})),this}},{key:"getMBTiles",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"MBTiles"===t.type}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name),XU(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"addMBTiles",value:function(t){var e=this,r=this.getBaseLayers().length>0,n=[];return t.forEach((function(t){if(t.type===Lp&&!pq(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),n.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.setZIndex(s.Z_INDEX_BASELAYER);else if(null==t.getZIndex()){var i=e.layers_.length+s.Z_INDEX.MBTiles;t.setZIndex(i)}})),(n.length>0&&!r||n.some((function(t){return!0!==t.transparent&&t.isVisible()})))&&this.updateResolutionsFromBaseLayer(),this}},{key:"removeMBTiles",value:function(t){var e=this;return this.getMBTiles(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire("removed:map",[t])})),this}},{key:"getMBTilesVector",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return"MBTilesVector"===t.type}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name),XU(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"addMBTilesVector",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===Rp&&!pq(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+s.Z_INDEX.MBTilesVector;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeMBTilesVector",value:function(t){var e=this;return this.getMBTilesVector(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire("removed:map",[t])})),this}},{key:"getUnknowLayers_",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return!kp(t.type)}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:t instanceof Fm?n=t.equals(r):(XU(t.type)||(n=n&&t.type===r.type),XU(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"addUnknowLayers_",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(!pq(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.isVisible()&&e.updateResolutionsFromBaseLayer(),t.setZIndex(s.Z_INDEX_BASELAYER);else{if(t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+s.Z_INDEX[t.type];t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeUnknowLayers_",value:function(t){var e=this;t.forEach((function(t){if(pq(e.layers_,t)&&(e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),!0!==t.transparent)){var r=e.facadeMap_.getBaseLayers();r.length>0&&r[0].setVisible(!0)}}))}},{key:"getMVT",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Ip}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"removeMVT",value:function(t){var e=this;return this.getMVT(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire("removed:map",[t])})),this}},{key:"addMVT",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===Ip&&!pq(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+s.Z_INDEX[Ip];t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"getXYZs",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Ep}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"addXYZ",value:function(t){var e=this;return t.forEach((function(t){if(t.type===Ep)if(pq(e.layers_,t)||!0!==t.transparent)t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(0);else{t.getImpl().addTo(e.facadeMap_),e.layers_.push(t);var r=e.layers_.length+s.Z_INDEX[Ep];t.setZIndex(r)}})),this}},{key:"removeXYZ",value:function(t){var e=this;return this.getXYZs(t).forEach((function(t){t.getImpl().destroy(),e.layers_=e.layers_.filter((function(e){return!e.equals(t)}))})),this}},{key:"getTMS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Op}));return XU(r)&&(r=[]),HU(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(XU(t.type)||(n=n&&t.type===r.type),XU(t.url)||(n=n&&t.url===r.url),XU(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"addTMS",value:function(t){var e=this;return t.forEach((function(t){if(t.type===Op)if(pq(e.layers_,t)||!0!==t.transparent)t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(0);else{t.getImpl().addTo(e.facadeMap_),e.layers_.push(t);var r=e.layers_.length+s.Z_INDEX[Op];t.setZIndex(r)}})),this}},{key:"removeTMS",value:function(t){var e=this;return this.getTMS(t).forEach((function(t){t.getImpl().destroy(),e.layers_=e.layers_.filter((function(e){return!e.equals(t)}))})),this}},{key:"getControls",value:function(t){var e=t,r=[],n=this.facadeMap_.getPanels().map((function(t){return t.getControls()}));n.length>0&&(n=n.reduce((function(t,e){return t.concat(e)})));var i=this.controls_.concat(n);XU(e)&&(e=[]),HU(e)||(e=[e]),0===e.length?r=i:e.forEach((function(t){r=r.concat(i.filter((function(e){var n=!1;return pq(r,e)||(QU(t)?n=t===e.name:t instanceof ep?n=t===e:JU(t)&&(n=t.name===e.name)),n})))}));var o=[];return r.forEach((function(t){o.map((function(t){return t.name})).includes(t.name)||o.push(t)})),o}},{key:"addControls",value:function(t){var e=this;return t.forEach((function(t){t instanceof gp&&e.facadeMap_.addControls(M.config.controls.default.split(",")),pq(e.controls_,t)||e.controls_.push(t)})),this}},{key:"removeControls",value:function(t){var e=this;return this.getControls(t).forEach((function(t){t.destroy(),e.controls_=e.controls_.filter((function(e){var r=e.constructor===t.constructor;return XU(e.equals)||(r=!e.equals(t)),r}))})),this}},{key:"setMaxExtent",value:function(t,e){var r=t;return XU(r)||HU(r)||!JU(r)||(r=[t.x.min,t.y.min,t.x.max,t.y.max]),this.getMapImpl().getView().set("extent",r),this.updateResolutionsFromBaseLayer(),XU(r)||!1===e||this.setBbox(r),this}},{key:"getMaxExtent",value:function(){var t=this.getMapImpl().getView().get("extent");return XU(t)?this.envolvedMaxExtent_:{x:{min:t[0],max:t[2]},y:{min:t[1],max:t[3]}}}},{key:"getCapabilities",value:(i=bb().mark((function t(e,r,n){var i,o,a,s,u,l,c,h,f;return bb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e,o=r,a=this.getProjection(),s="WMS"===n?iq(i,o):oq(i,o),t.next=6,jU(s);case 6:if(u=t.sent,l=u.xml,c="WMS"===n?new Gg:new uf,"WMS"!==n){t.next=15;break}return t.next=12,c.customRead(l);case 12:t.t0=t.sent,t.next=18;break;case 15:return t.next=17,c.read(l);case 17:t.t0=t.sent;case 18:if(h=t.t0,"WMS"!==n){t.next=26;break}return t.next=22,new ng(h,i,a);case 22:f=t.sent,this.getCapabilitiesPromise=f,t.next=28;break;case 26:try{h.Contents.Layer.forEach((function(t){var e=t.Identifier;t.Style.forEach((function(t){var r=u.text.split("Layer>").filter((function(t){return t.indexOf("Identifier>".concat(e,"<"))>-1}))[0];t.LegendURL=r.split("LegendURL")[1].split('xlink:href="')[1].split('"')[0]}))}))}catch(t){}this.getCapabilitiesPromise=h;case 28:return t.abrupt("return",this.getCapabilitiesPromise);case 29:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){wb(o,r,n,a,s,"next",t)}function s(t){wb(o,r,n,a,s,"throw",t)}a(void 0)}))},function(t,e,r){return o.apply(this,arguments)})},{key:"setBbox",value:function(t,e){var r;return XU(t)&&Af(Hf("exception").no_bbox),this.userBbox_=t,HU(t)?r=t:JU(t)&&(r=[t.x.min,t.y.min,t.x.max,t.y.max]),this.getMapImpl().getView().fit(r,e),this}},{key:"getBbox",value:function(){var t=null,e=this.getMapImpl(),r=e.getView();if(!XU(r.getCenter())){var n=r.calculateExtent(e.getSize());XU(n)||(t={x:{min:n[0],max:n[2]},y:{min:n[1],max:n[3]}})}return t}},{key:"setZoom",value:function(t){return XU(t)&&Af(Hf("exception").no_zoom),this.getMapImpl().getView().setUserZoom(t),this}},{key:"setMinZoom",value:function(t){return XU(t)&&Af(Hf("exception").no_zoom),this.getMapImpl().getView().setMinZoom(t),this}},{key:"setMaxZoom",value:function(t){return XU(t)&&Af(Hf("exception").no_zoom),this.getMapImpl().getView().setMaxZoom(t),this}},{key:"getZoom",value:function(){var t=null,e=this.getMapImpl().getView(),r=e.getResolution(),n=this.getResolutions();if(XU(n))XU(r)||(t=e.getZoomForResolution(r));else for(var i=0,o=n.length;i<o;i+=1)if(n[i]<=r){t=i;break}return t}},{key:"getMinZoom",value:function(){var t;return this.getMapImpl()&&this.getMapImpl().getView()&&(t=this.getMapImpl().getView().getMinZoom()),t}},{key:"getMaxZoom",value:function(){var t;return this.getMapImpl()&&this.getMapImpl().getView()&&(t=this.getMapImpl().getView().getMaxZoom()),t}},{key:"setCenter",value:function(t){XU(t)&&Af(Hf("exception").no_center);var e=[t.x,t.y],r=this.getMapImpl().getView(),n=r.getCenter();return XU(n)||this.getMapImpl().getView().animate({duration:250,source:n}),r.setCenter(e),this}},{key:"getCenter",value:function(){var t=null,e=this.getMapImpl().getView().getCenter();return XU(e)||(t={x:e[0],y:e[1]}),t}},{key:"getResolutions",value:function(){return this.getMapImpl().getView().getResolutions()}},{key:"setResolutions",value:function(t,e){XU(t)&&Af(Hf("exception").no_resolutions),XU(e)&&(this.userResolutions_=t);var r,n=Vn(this.getProjection().code),i=this.getMapImpl(),o=i.getView().getProperties(),a=i.getView().getUserZoom(),s=i.getView().getMinZoom(),u=i.getView().getMaxZoom(),l=i.getSize(),c=new yb({projection:n});if(c.setProperties(o),c.setResolutions(t),c.setUserZoom(a),c.setMinZoom(s),c.setMaxZoom(u),c.setConstrainResolution(!0),XU(a)){var h=this.facadeMap_.getBbox();if(!XU(h)){var f=c.getResolutionForExtent([h.x.min,h.y.min,h.x.max,h.y.max],l),p=t.map((function(t){return Math.abs(t-f)})),d=p.indexOf(Math.min.apply(Math,vb(p)));r=t[d]}}else r=t[a];return c.setResolution(r),i.setView(c),this.getWMS().forEach((function(e){e.getImpl().setResolutions(t)})),this}},{key:"getScale",value:function(){var t=this.getMapImpl().getView().getResolution(),e=this.getProjection().units,r=lq(t,e);return XU(r)||(r=r>=1e3&&r<=95e4?1e3*Math.round(r/1e3):r>=95e4?1e6*Math.round(r/1e6):Math.round(r)),r}},{key:"getExactScale",value:function(){var t=this.getMapImpl().getView().getResolution(),e=this.getProjection().units,r=lq(t,e);return Math.trunc(r)}},{key:"setProjection",value:function(t){XU(t)&&Af(Hf("exception").no_projection);var e=Vn(t.code);XU(e)&&(e=new ar(t));var r=Vn(this.getProjection().code),n=this.facadeMap_.getMaxExtent(),i=this.facadeMap_.getResolutions(),o=this.getMapImpl(),a=o.getView().getProperties(),s=o.getView().getResolution(),u=o.getView().getUserZoom(),l=o.getView().getMinZoom(),c=o.getView().getMaxZoom(),h=new yb({projection:e});h.setProperties(a),XU(i)||h.setResolutions(i),XU(s)||h.setResolution(s),h.setUserZoom(u),h.setMinZoom(l),h.setMaxZoom(c),h.setConstrainResolution(!0),o.setView(h),this.facadeMap_.getWMS().forEach((function(e){e.updateMinMaxResolution(t)})),XU(n)||(HU(n)||(n=[n.x.min,n.y.min,n.x.max,n.y.max]),this.setMaxExtent(Zy.transformExtent(n,r,e),!1)),this.updateResolutionsFromBaseLayer();var f=this.facadeMap_.getPopup();if(!XU(f)){var p=f.getCoordinate();XU(p)||(p=$n(p,r,e),f.setCoordinate(p))}var d=this.facadeMap_.getLabel();if(!XU(d)){var m=d.getCoordinate();XU(m)||(m=$n(m,r,e),d.setCoordinate(m))}return this.fire("change"),this}},{key:"getProjection",value:function(){var t=this.getMapImpl().getView().getProjection(),e=null;return XU(t)||(e={code:t.getCode(),units:t.getUnits(),getExtent:function(){return t.getExtent()}}),e}},{key:"getMapImpl",value:function(){return this.map_}},{key:"removePopup",value:function(t){if(!XU(t)){var e=t.getImpl();this.getMapImpl().removeOverlay(e)}return this}},{key:"destroy",value:function(){this.layers_.length=0,this.controls_.length=0,this.popup_=null,this.options_=null,this.map_.setTarget(null),this.map_=null}},{key:"updateResolutionsFromBaseLayer",value:function(){this.fire("completed"),this.refresh()}},{key:"addLabel",value:function(t){return this.label=t,t.show(this.facadeMap_),this}},{key:"getLabel",value:function(){return this.label}},{key:"removeLabel",value:function(){if(!XU(this.label)){var t=this.label.getPopup();this.removePopup(t),this.label=null}}},{key:"refresh",value:function(){return this.map_.updateSize(),this}},{key:"getContainer",value:function(){return this.map_.getOverlayContainerStopEvent()}},{key:"setFacadeMap",value:function(t){this.facadeMap_=t}},{key:"registerEvents_",value:function(){this.map_.on("moveend",this.zoomEvent_.bind(this))}},{key:"zoomEvent_",value:function(){this.currentZoom!==this.getZoom()&&(this.facadeMap_.fire("change:zoom",this.facadeMap_),this.currentZoom=this.getZoom())}},{key:"onMapClick_",value:function(t){var e=t.pixel,r=this.map_.getCoordinateFromPixel(e),n=this.facadeMap_.getLabel();XU(n)||n.hide(),this.facadeMap_.fire("click",[{pixel:e,coord:r,vendor:t}])}},{key:"onMapMove_",value:function(t){var e=t.pixel,r=this.map_.getCoordinateFromPixel(e);this.facadeMap_.fire("move",[{pixel:e,coord:r,vendor:t}])}}])&&Sb(e.prototype,r),n&&Sb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(vf);Ib.Z_INDEX={},Ib.Z_INDEX_BASELAYER=0,Ib.Z_INDEX[xp]=5,Ib.Z_INDEX[bp]=40,Ib.Z_INDEX[Sp]=40,Ib.Z_INDEX[_p]=40,Ib.Z_INDEX[wp]=40,Ib.Z_INDEX[Ip]=40,Ib.Z_INDEX[Tp]=40,Ib.Z_INDEX[Pp]=40,Ib.Z_INDEX[Lp]=2e3,Ib.Z_INDEX[Rp]=9999,Ib.Z_INDEX[Ep]=40,Ib.Z_INDEX[Op]=40,Ib.Z_INDEX[Mp]=40;var Lb=Ib,Rb="bottom-left",Cb="bottom-center",Ab="bottom-right",kb="center-left",Nb="center-center",jb="center-right",Fb="top-left",Db="top-center",Bb="top-right";function Gb(t){return(Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ub="element",qb="map",Vb="offset",Yb="position",Zb="positioning",Wb=function(t){function e(e){var r=t.call(this)||this;r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",r.element.style.position="absolute";var n=e.autoPan;return n&&"object"!==Gb(n)&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addEventListener(to(Ub),r.handleElementChanged),r.addEventListener(to(qb),r.handleMapChanged),r.addEventListener(to(Vb),r.handleOffsetChanged),r.addEventListener(to(Yb),r.handlePositionChanged),r.addEventListener(to(Zb),r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:Fb),void 0!==e.position&&r.setPosition(e.position),r}return zb(e,t),e.prototype.getElement=function(){return this.get(Ub)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(qb)},e.prototype.getOffset=function(){return this.get(Vb)},e.prototype.getPosition=function(){return this.get(Yb)},e.prototype.getPositioning=function(){return this.get(Zb)},e.prototype.handleElementChanged=function(){Vs(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(qs(this.element),yi(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=di(t,To,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Ub,t)},e.prototype.setMap=function(t){this.set(qb,t)},e.prototype.setOffset=function(t){this.set(Vb,t)},e.prototype.setPosition=function(t){this.set(Yb,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(Yb)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),i=this.getRect(n,[Gs(n),zs(n)]),o=void 0===t.margin?20:t.margin;if(!Ur(r,i)){var a=i[0]-r[0],s=r[2]-i[2],u=i[1]-r[1],l=r[3]-i[3],c=[0,0];if(a<0?c[0]=a-o:s<0&&(c[0]=Math.abs(s)+o),u<0?c[1]=u-o:l<0&&(c[1]=Math.abs(l)+o),0!==c[0]||0!==c[1]){var h=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(h),p=[f[0]+c[0],f[1]+c[1]],d=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(p),duration:d.duration,easing:d.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(Zb,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";i==Ab||i==jb||i==Bb?s="-100%":i!=Cb&&i!=Nb&&i!=Db||(s="-50%"),i==Rb||i==Cb||i==Ab?u="-100%":i!=kb&&i!=Nb&&i!=jb||(u="-50%");var l="translate("+s+", "+u+") translate("+o+", "+a+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l,r.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(eo);function Hb(t){return(Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Hb(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Hb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Hb(o)?o:String(o)),n)}var i,o}var Kb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"listen",value:function(){t.WIDTH=window.innerWidth,t.HEIGHT=window.innerHeight,window.addEventListener("resize",(function(e){t.WIDTH=e.target.innerWidth,t.HEIGHT=e.target.innerHeight}))}}],(r=null)&&Xb(e.prototype,r),n&&Xb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();Kb.WIDTH=window.innerWidth,Kb.HEIGHT=window.innerHeight,Kb.listen();var Jb=Kb;function Qb(t){return(Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Qb(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Qb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Qb(o)?o:String(o)),n)}var i,o}function ew(t,e){return(ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=iw(t);if(e){var i=iw(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return nw(this,r)}}function nw(t,e){if(e&&("object"===Qb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function iw(t){return(iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ow=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ew(t,e)}(o,t);var e,r,n,i=rw(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $b(this,o),(t=i.call(this,{})).panMapIfOutOfView=e.panMapIfOutOfView,void 0===t.panMapIfOutOfView&&(t.panMapIfOutOfView=!1),t.ani_opts=e.ani_opts,void 0===t.ani_opts&&(t.ani_opts={duration:250}),t.facadeMap_=null,t.cachedAniPixel_=null,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.container=e,this.content=this.getContentFromContainer(e),yq(this.content),this.setElement(this.container),t.getMapImpl().addOverlay(this)}},{key:"show",value:function(t,e){return this.setPosition(t),this.panMapIfOutOfView&&this.panIntoView(t),this.content.scrollTop=0,KU(e)&&e(),this}},{key:"centerByStatus",value:function(t,e){var r=this.getMap().getView().getResolution(),n=[].concat(e);if(t===vw.status.COLLAPSED)n[1]-=.1*Jb.HEIGHT*r;else{if(t!==vw.status.DEFAULT)return;n[1]-=.275*Jb.HEIGHT*r}var i=this.facadeMap_.getFeatureCenter();this.facadeMap_.setCenter({x:n[0],y:n[1]}),XU(i)||this.facadeMap_.drawFeatures([i])}},{key:"getContentFromContainer",value:function(t){return t.querySelector("div.m-body")}},{key:"panIntoView",value:function(t){var e=this;return this.panIntoSynchronizedAnim_().then((function(){e.isAnimating_=!0;var r=e.element.querySelector(".m-popup"),n=r.clientWidth+20,i=r.clientHeight+20+30,o=e.getMap().getSize(),a=e.getMap().getView().getCenter(),s=n-60,u=e.getOffset(),l=e.getMap().getPixelFromCoordinate(t);if(!XU(l)){var c=l[0]-60,h=o[0]-(l[0]+s),f=l[1]-(i+u[1]),p=o[1]-(l[1]+20)-u[1],d=e.getMap().getPixelFromCoordinate(a),m=d.slice();h<0?m[0]-=h:c<0&&(m[0]+=c),f<0?m[1]+=f:p<0&&(m[1]-=p),!XU(e.ani_opts)&&XU(e.ani_opts.source)&&(e.ani_opts.source=a,e.getMap().getView().animate(e.ani_opts)),m[0]===d[0]&&m[1]===d[1]||e.getMap().getView().setCenter(e.getMap().getCoordinateFromPixel(m))}e.isAnimating_=!1})),this.getMap().getView().getCenter()}},{key:"panIntoSynchronizedAnim_",value:function(){var t=this;return new Promise((function(e,r){if(!0===t.isAnimating_){var n=300;XU(t.ani_opts)||(n=t.ani_opts.duration),setTimeout(e,n)}else e()}))}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"setContainer",value:function(t){this.setElement(t),this.content=this.getContentFromContainer(t),yq(this.content)}},{key:"getContent",value:function(){return this.content}}])&&tw(e.prototype,r),n&&tw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Wb),aw=(r(226),r(56)),sw=r.n(aw);function uw(t){return(uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lw(t,e){return(lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fw(t);if(e){var i=fw(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hw(this,r)}}function hw(t,e){if(e&&("object"===uw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fw(t){return(fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==uw(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==uw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===uw(o)?o:String(o)),n)}var i,o}function dw(t,e,r){return e&&pw(t.prototype,e),r&&pw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var yw=dw((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mw(this,t),this.icon=e.icon,this.title=e.title,this.content=e.content,this.listeners=e.listeners||[]})),gw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lw(t,e)}(r,t);var e=cw(r);function r(t){var n;mw(this,r);var i=new ow(t);return(n=e.call(this,i)).coord_=null,n.tabs_=[],n.element_=null,n.status_=r.status.COLLAPSED,n}return dw(r,[{key:"getTabs",value:function(){return this.tabs_}},{key:"removeTab",value:function(t){this.tabs_=this.tabs_.filter((function(e){return e.content!==t.content})),this.update()}},{key:"addTab",value:function(t){var e=t;e instanceof yw||(e=new yw(t)),this.tabs_.push(e),this.update()}},{key:"addTo",value:function(t,e){if(this.map_=t,XU(this.element_)){var r=sp(sw.a,{jsonp:!0,vars:{tabs:this.tabs_}});this.tabs_.length>0&&(this.element_=r,this.addEvents(r),this.getImpl().addTo(t,r),this.show(e))}else this.getImpl().addTo(t,this.element_),this.show(e)}},{key:"update",value:function(){if(!XU(this.map_)){var t=sp(sw.a,{jsonp:!0,vars:{tabs:this.tabs_}});this.tabs_.length>0&&(this.element_=t,this.addEventTabs(this.tabs_[0],t),this.addEvents(t),this.getImpl().setContainer(t),this.show(this.coord_))}}},{key:"show",value:function(t){var e=this;this.coord_=t,this.getImpl().show(this.coord_,(function(){e.fire("show")}))}},{key:"hide",value:function(t){XU(t)||t.preventDefault(),this.getImpl().hide()}},{key:"switchTab",value:function(t){if(this.tabs_.length>t){var e=this.tabs_[t];this.setContent_(e.content),this.addEventTabs(e,this.getContent()),this.show(this.coord_)}}},{key:"addEventTabs",value:function(t,e){t.listeners.forEach((function(t){!0===t.all?e.querySelectorAll(t.selector).forEach((function(e){e.addEventListener(t.type,(function(e){return t.callback(e)}))})):e.querySelector(t.selector).addEventListener(t.type,(function(e){return t.callback(e)}))}))}},{key:"setContent_",value:function(t){this.getContent().innerHTML=t}},{key:"getContent",value:function(){return this.getImpl().getContent()}},{key:"addEvents",value:function(t){var e,n=this,i=t,o=i.querySelectorAll("div.m-tab");Array.prototype.forEach.call(o,(function(t){t.addEventListener("click",(function(r){r.preventDefault();var i=r.clientY;if("click"===r.type||Math.abs(e-i)<5){Array.prototype.forEach.call(o,(function(t){t.classList.remove("m-activated")})),t.classList.add("m-activated");var a=t.getAttribute("data-index");n.switchTab(a)}})),t.addEventListener("touchend",(function(r){r.preventDefault();var i=r.clientY;if("touchend"===r.type||Math.abs(e-i)<5){Array.prototype.forEach.call(o,(function(t){t.classList.remove("m-activated")})),t.classList.add("m-activated");var a=t.getAttribute("data-index");n.switchTab(a)}}))}));var a=i.querySelector("a.m-popup-closer");a.addEventListener("click",this.hide.bind(this),!1),a.addEventListener("touchend",this.hide.bind(this),!1);var s=i.querySelector("div.m-tabs");if(XU(s)&&(s=i.querySelector("div.m-content > div.m-header")),!XU(s)){var u;s.addEventListener("touchstart",(function(t){t.preventDefault(),e=t.touches[0].clientY,n.status_===r.status.COLLAPSED?u=.9*Jb.HEIGHT:n.status_===r.status.DEFAULT?u=.45*Jb.HEIGHT:n.status_===r.status.FULL&&(u=0),i.classList.add("m-no-animation")}),!1),s.addEventListener("touchmove",(function(t){t.preventDefault(),n.touchY=t.touches[0].clientY;var r=n.touchY-e;i.style.top="".concat(u+r,"px")}),!1),s.addEventListener("touchend",(function(t){t.preventDefault(),n.manageCollapsiblePopup_(e,n.touchY)}),!1);var l=window.matchMedia("(max-width: 768px)");setTimeout((function(){return n.manageTransform(l,i)}),10),l.addEventListener("change",(function(t){n.manageTransform(t,i)})),s.addEventListener("mouseup",(function(t){t.preventDefault(),n.tabs_.length<=1&&(n.status_===r.status.COLLAPSED?n.setStatus_(r.status.DEFAULT):n.status_===r.status.DEFAULT?n.setStatus_(r.status.FULL):n.setStatus_(r.status.COLLAPSED))}))}}},{key:"setStatus_",value:function(t){t!==this.status_&&(this.element_.classList.remove(this.status_),this.status_=t,this.element_.classList.add(this.status_),this.element_.style.top="",this.element_.classList.remove("m-no-animation"),Jb.WIDTH<=M.config.MOBILE_WIDTH&&this.getImpl().centerByStatus(t,this.coord_))}},{key:"manageTransform",value:function(t,e){e&&e.parentElement&&(t.matches?e.parentElement.classList.add("unsetTransform"):e.parentElement.classList.remove("unsetTransform"))}},{key:"manageCollapsiblePopup_",value:function(t,e){var n=100*e/Jb.HEIGHT;100*Math.abs(t-e)/Jb.HEIGHT>10?this.status_===r.status.COLLAPSED?n<45?this.setStatus_(r.status.FULL):n<85?this.setStatus_(r.status.DEFAULT):this.setStatus_(r.status.COLLAPSED):this.status_===r.status.DEFAULT?n>45?this.setStatus_(r.status.COLLAPSED):n<45?this.setStatus_(r.status.FULL):this.setStatus_(r.status.DEFAULT):this.status_===r.status.FULL&&(n>45?this.setStatus_(r.status.COLLAPSED):n>0?this.setStatus_(r.status.DEFAULT):this.setStatus_(r.status.FULL)):this.setStatus_(this.status_)}},{key:"getCoordinate",value:function(){return this.coord_}},{key:"setCoordinate",value:function(t){this.coord_=t,XU(this.element_)||this.getImpl().show(t)}},{key:"destroy",value:function(){this.tabs_.length=0,this.coord_=null,this.fire("destroy")}}]),r}(zf);gw.status={},gw.status.COLLAPSED="m-collapsed",gw.status.DEFAULT="m-default",gw.status.FULL="m-full";var vw=gw,_w=r(203),bw=r.n(_w);function ww(t){return(ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ww(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ww(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ww(o)?o:String(o)),n)}var i,o}var Sw=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text_=e,this.coord_=[r.x,r.y],this.popup_=null,this.facadeMap_=null,this.panMapIfOutOfView=n}var e,r,n;return e=t,(r=[{key:"show",value:function(t){this.facadeMap_=t;var e=sp(bw.a,{vars:{info:this.text_},parseToHtml:!1});t.removePopup(),this.popup_=new vw({panMapIfOutOfView:this.panMapIfOutOfView}),this.popup_.addTab({icon:"g-cartografia-comentarios",title:"Información",content:e}),t.addPopup(this.popup_,this.coord_)}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"getPopup",value:function(){return this.popup_}},{key:"getCoordinate",value:function(){var t=this.coord;return XU(t)&&(t=this.getPopup().getCoordinate()),t}},{key:"setCoordinate",value:function(t){var e=this.getPopup();XU(e)||e.setCoordinate(t)}}])&&Mw(e.prototype,r),n&&Mw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xw(t){return(xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ew(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==xw(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===xw(o)?o:String(o)),n)}var i,o}function Ow(t,e){return(Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Iw(t);if(e){var i=Iw(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Tw(this,r)}}function Tw(t,e){if(e&&("object"===xw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Iw(t){return(Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}(o,t);var e,r,n,i=Pw(o);function o(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=new Sw(t,e,r);return i.call(this,n)}return e=o,(r=[{key:"hide",value:function(){this.getImpl().hide()}},{key:"show",value:function(t){this.getImpl().show(t)}},{key:"getPopup",value:function(){return this.getImpl().getPopup()}},{key:"getCoordinate",value:function(){return this.getImpl().getCoordinate()}},{key:"setCoordinate",value:function(t){this.getImpl().coordinate=t}}])&&Ew(e.prototype,r),n&&Ew(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf);Lw.POPUP_TEMPLATE="label_popup.html";var Rw=Lw;function Cw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==kw(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===kw(o)?o:String(o)),n)}var i,o}function Aw(t,e,r){return e&&Cw(t.prototype,e),r&&Cw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kw(t){return(kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Nw=function t(e){var r;return QU(e)?r=document.getElementById(e):JU(e)?XU(e.id)?XU(e.container)?Af(Hf("exception").no_container):r=t(e.container):r=document.getElementById(e.id):Af("El tipo del parámetro container no es válido: ".concat(kw(e))),XU(r)&&Af(Hf("exception").no_id_container),r},jw=function(t){var e;return QU(t)?e=eq("layers",t):JU(t)?e=t.layers:Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},Fw=function(t){var e;return QU(t)?(e=eq("wmc",t),XU(e)&&(e=eq("wmcfile",t)),XU(e)&&(e=eq("wmcfiles",t))):JU(t)?(e=t.wmc,XU(e)&&(e=t.wmcfile),XU(e)&&(e=t.wmcfiles)):Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},Dw=function(t){var e;return QU(t)?e=eq("wms",t):JU(t)?e=t.wms:Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},Bw=function(t){var e;return QU(t)?e=eq("wmts",t):JU(t)?e=t.wmts:Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},Gw=function(t){var e;return QU(t)?e=eq("kml",t):JU(t)?e=t.kml:Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},zw=function(t){var e;return QU(t)?e=eq("controls",t):JU(t)?e=t.controls:Af("El tipo del parámetro controls no es válido: ".concat(kw(t))),e},Uw=function(t){var e;return QU(t)?e=eq("getfeatureinfo",t):JU(t)?(e=t.getfeatureinfo,!YU(e)&&XU(e)&&(e="plain")):Af("El tipo del parámetro controls no es válido: ".concat(kw(t))),e},qw=function(t){var e;return QU(t)?(e=eq("maxExtent",t),XU(e)&&(e=eq("maxextent",t))):JU(t)?(e=t.maxExtent,XU(e)&&(e=t.maxextent)):Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},Vw=function(t){var e;return QU(t)?e=eq("bbox",t):JU(t)?e=t.bbox:Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},Yw=function(t){var e;return QU(t)?e=eq("zoom",t):JU(t)?e=t.zoom:Af("El tipo del parámetro zoom no es válido: ".concat(kw(t))),e},Zw=function(t){var e;return QU(t)?e=eq("maxZoom",t):JU(t)?e=t.maxZoom:Af("El tipo del parámetro maxZoom no es válido: ".concat(kw(t))),e},Ww=function(t){var e;return QU(t)?e=eq("minZoom",t):JU(t)?e=t.minZoom:Af("El tipo del parámetro minZoom no es válido: ".concat(kw(t))),e},Hw=function(t){var e;return QU(t)?e=eq("center",t):JU(t)?e=t.center:Af("El tipo del parámetro center no es válido: ".concat(kw(t))),e},Xw=function(t){var e;return QU(t)?e=eq("ticket",t):JU(t)?e=t.ticket:Af("El tipo del parámetro ticket no es válido: ".concat(kw(t))),e},Kw=function(t){var e;return QU(t)?e=eq("resolutions",t):JU(t)?e=t.resolutions:Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},Jw=function(t){var e;return QU(t)?e=eq("projection",t):JU(t)?e=t.projection:Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},Qw=function(t){var e;return QU(t)?e=eq("label",t):JU(t)?e=t.label:Af("El tipo del parámetro container no es válido: ".concat(kw(t))),e},$w=Aw((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),XU(e)&&Af(Hf("exception").no_param),this.container=Nw(e),this.layers=jw(e),this.wmc=Fw(e),this.wms=Dw(e),this.wmts=Bw(e),this.kml=Gw(e),this.controls=zw(e),this.getfeatureinfo=Uw(e),this.maxExtent=qw(e),this.bbox=Vw(e),this.zoom=Yw(e),this.minZoom=Ww(e),this.maxZoom=Zw(e),this.center=Hw(e),this.resolutions=Kw(e),this.projection=Jw(e),this.label=Qw(e),this.ticket=Xw(e)}));function tM(t){return(tM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eM(t){return function(t){if(Array.isArray(t))return rM(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return rM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rM(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==tM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===tM(o)?o:String(o)),n)}var i,o}function iM(t,e){return(iM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=sM(t);if(e){var i=sM(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return aM(this,r)}}function aM(t,e){if(e&&("object"===tM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sM(t){return(sM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iM(t,e)}(o,t);var e,r,n,i=oM(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,e)).options_=t,r.canvas_=document.createElement("canvas"),r.updateCanvasPromise_=null,r.layer_=null,r}return e=o,n=[{key:"setValue",value:function(t,e,r){var n=r,i=t,a=HU(e)?e:e.split("."),s=a.length,u=a[0];1===s?(HU(n)?n=eM(n):JU(n)&&(n=Object.assign({},n)),i[u]=n):s>1&&(XU(i[u])&&(i[u]={}),o.setValue(i[u],a.slice(1,s),n))}},{key:"deserialize",value:function(t){var e=decodeURIComponent(escape(window.atob(t.replace(" ","+")))),r=JSON.parse(e),n=r.parameters,i=r.deserializedMethod;return new Function("serializedParams","return ".concat(i,"(serializedParams)"))(n)}}],(r=[{key:"canvas",get:function(){return this.canvas_}},{key:"apply",value:function(t){this.layer_=t,this.getImpl().applyToLayer(t),this.updateCanvas()}},{key:"unapply",value:function(t){}},{key:"get",value:function(t){var e;if(e=this.options_[t],XU(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return XU(t)||(r=t[e],t instanceof o&&(r=t.get(e))),r}),this))}return e}},{key:"set",value:function(t,e){var r=this.get(t);return o.setValue(this.options_,t,e),XU(this.layer_)||this.getImpl().updateFacadeOptions(this.options_),XU(this.feature_)||this.applyToFeature(this.feature_),this.fire("change",[t,r,e]),this.refresh(),this}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;XU(t)||(this.layer_=t),XU(this.layer_)||(this.apply(this.layer_),this.updateCanvas())}},{key:"getOptions",value:function(){return this.options_}},{key:"toImage",value:function(){var t,e=this;if(XU(this.updateCanvasPromise_))if(XU(this.options_.icon)||XU(this.options_.icon.src))t=this.canvas_.toDataURL("png");else{var r=new Image;r.crossOrigin="Anonymous";var n=this.canvas_;r.onload=function(){n.getContext("2d").drawImage(e,0,0,50,50)},r.src=this.options_.icon.src,t=this.canvas_.toDataURL("png")}else t=this.updateCanvasPromise_.then((function(){return e.canvas_.toDataURL("png")}));return t}},{key:"updateCanvas",value:function(){this.updateCanvasPromise_=this.getImpl().updateCanvas(this.canvas_)}},{key:"equals",value:function(t){return this.constructor===t.constructor}},{key:"clone",value:function(){var t={};Mq(t,this.options_);var e=new(0,this.getImpl().constructor)(t);return new this.constructor(t,e)}},{key:"toJSON",value:function(){return{parameters:[Oq(this.getOptions())],deserializedMethod:this.getDeserializedMethod_()}}},{key:"serialize",value:function(){return window.btoa(unescape(encodeURIComponent(JSON.stringify(this))))}}])&&nM(e.prototype,r),n&&nM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf),lM=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return br()},t.prototype.getImage=function(t){return br()},t.prototype.getHitDetectionImage=function(t){return br()},t.prototype.getImageState=function(){return br()},t.prototype.getImageSize=function(){return br()},t.prototype.getHitDetectionImageSize=function(){return br()},t.prototype.getOrigin=function(){return br()},t.prototype.getSize=function(){return br()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){br()},t.prototype.load=function(){br()},t.prototype.unlistenImageChange=function(t){br()},t}(),cM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hM=function(t){function e(e){var r=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(r=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.anchor_=null,r.size_=null,r.imageSize_=null,r.hitDetectionImageSize_=null,r.render(),r}return cM(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return bc},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e="round",r="round",n=0,i=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t="#000"),t=Kl(t),void 0===(a=this.stroke_.getWidth())&&(a=1),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(r=this.stroke_.getLineJoin())&&(r="round"),void 0===(e=this.stroke_.getLineCap())&&(e="round"),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var s=2*(this.radius_+a)+1,u={strokeStyle:t,strokeWidth:a,size:s,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:r,miterLimit:n},l=Bs(s,s);this.canvas_=l.canvas;var c=s=this.canvas_.width,h=this.getDisplacement();this.draw_(u,l,0,0),this.createHitDetectionCanvas_(u),this.anchor_=[s/2-h[0],s/2+h[1]],this.size_=[s,s],this.imageSize_=[c,c]},e.prototype.draw_=function(t,e,r,n){var i,o,a;e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(s*=2),i=0;i<=s;i++)o=2*i*Math.PI/s-Math.PI/2+this.angle_,a=i%2==0?this.radius_:u,e.lineTo(t.size/2+a*Math.cos(o),t.size/2+a*Math.sin(o))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l="#000"),e.fillStyle=Kl(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=Vl(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var n=Bs(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,r,n){e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var i=this.points_;if(i===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(i*=2);var a=void 0,s=void 0,u=void 0;for(a=0;a<=i;a++)u=2*a*Math.PI/i-Math.PI/2+this.angle_,s=a%2==0?this.radius_:o,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(lM),fM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pM=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return fM(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(hM),dM=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),mM=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();function yM(t){return(yM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var gM=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=wM,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===yM(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=wM,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();var vM=null;function _M(t,e){if(!vM){var r=new dM({color:"rgba(255,255,255,0.4)"}),n=new mM({color:"#3399CC",width:1.25});vM=[new gM({image:new pM({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return vM}function bM(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t[mr.POLYGON]=[new gM({fill:new dM({color:[255,255,255,.5]})})],t[mr.MULTI_POLYGON]=t[mr.POLYGON],t[mr.LINE_STRING]=[new gM({stroke:new mM({color:e,width:5})}),new gM({stroke:new mM({color:r,width:3})})],t[mr.MULTI_LINE_STRING]=t[mr.LINE_STRING],t[mr.CIRCLE]=t[mr.POLYGON].concat(t[mr.LINE_STRING]),t[mr.POINT]=[new gM({image:new pM({radius:6,fill:new dM({color:r}),stroke:new mM({color:e,width:1.5})}),zIndex:1/0})],t[mr.MULTI_POINT]=t[mr.POINT],t[mr.GEOMETRY_COLLECTION]=t[mr.POLYGON].concat(t[mr.LINE_STRING],t[mr.POINT]),t}function wM(t){return t.getGeometry()}var MM=gM,SM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xM="renderOrder",EM=function(t){function e(e){var r=this,n=e||{},i=An({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return SM(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(xM)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(xM,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:_M,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var r;if(Array.isArray(t))r=t;else Or("function"==typeof t.getZIndex,41),r=[t];e=function(){return r}}return e}(this.style_),this.changed()},e}(wu),OM={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},PM=[OM.FILL],TM=[OM.STROKE],IM=[OM.BEGIN_PATH],LM=[OM.CLOSE_PATH],RM=OM,CM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AM=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=r,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return CM(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,r,n,i,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=n);var u,l,c,h=t[e],f=t[e+1],p=this.tmpCoordinate_,d=!0;for(u=e+n;u<r;u+=n)p[0]=t[u],p[1]=t[u+1],(c=Vr(s,p))!==l?(d&&(this.coordinates[a++]=h,this.coordinates[a++]=f),this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):c===Cr?(this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):d=!0,h=p[0],f=p[1],l=c;return(i&&d||u===e+n)&&(this.coordinates[a++]=h,this.coordinates[a++]=f),a},e.prototype.drawCustomCoordinates_=function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],u=this.appendFlatCoordinates(t,e,s,n,!1,!1);i.push(u),e=s}return e},e.prototype.drawCustom=function(t,e,r){this.beginGeometry(t,e);var n,i,o,a,s,u=t.getType(),l=t.getStride(),c=this.coordinates.length;if(u==mr.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var f=0,p=h.length;f<p;++f){var d=[];s=this.drawCustomCoordinates_(n,s,h[f],l,d),a.push(d)}this.instructions.push([RM.CUSTOM,c,a,t,r,os])}else u==mr.POLYGON||u==mr.MULTI_LINE_STRING?(o=[],n=u==mr.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),l,o),this.instructions.push([RM.CUSTOM,c,o,t,r,is])):u==mr.LINE_STRING||u==mr.MULTI_POINT?(n=t.getFlatCoordinates(),i=this.appendFlatCoordinates(n,0,n.length,l,!1,!1),this.instructions.push([RM.CUSTOM,c,i,t,r,ns])):u==mr.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),i=this.coordinates.length,this.instructions.push([RM.CUSTOM,c,i,t,r]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var r=t.getExtent();this.beginGeometryInstruction1_=[RM.BEGIN_GEOMETRY,e,0,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[RM.BEGIN_GEOMETRY,e,0,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,i=e.length,o=-1;for(t=0;t<i;++t)(n=(r=e[t])[0])==RM.END_GEOMETRY?o=t:n==RM.BEGIN_GEOMETRY&&(r[2]=t,wi(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=Kl(n||"#000")}else r.fillStyle=void 0;if(e){var i=e.getColor();r.strokeStyle=Kl(i||"#000");var o=e.getLineCap();r.lineCap=void 0!==o?o:"round";var a=e.getLineDash();r.lineDash=a?a.slice():Ql;var s=e.getLineDashOffset();r.lineDashOffset=s||0;var u=e.getLineJoin();r.lineJoin=void 0!==u?u:"round";var l=e.getWidth();r.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,r=[RM.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[RM.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,n=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||i!=t.currentLineDash&&!xi(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[RM.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Br(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Dr(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Jl),kM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NM=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return kM(e,t),e.prototype.drawCoordinates_=function(t,e,r,n){return this.appendFlatCoordinates(t,e,r,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,n);this.instructions.push([RM.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([RM.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,n);this.instructions.push([RM.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([RM.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),n=t.getSize(),i=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=r[0],this.anchorY_=r[1],this.declutterGroups_=e,this.hitDetectionImage_=i,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(AM),jM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),FM=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return jM(e,t),e.prototype.drawFlatCoordinates_=function(t,e,r,n){var i=this.coordinates.length,o=this.appendFlatCoordinates(t,e,r,n,!1,!1),a=[RM.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r},e.prototype.drawLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([RM.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],IM);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(TM),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([RM.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],IM);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(a,u,o[l],s);this.hitDetectionInstructions.push(TM),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(TM),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(TM),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(IM)},e}(AM),DM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BM=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return DM(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,r,n){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=r.length;this.instructions.push(IM),this.hitDetectionInstructions.push(IM);for(var u=0;u<s;++u){var l=r[u],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,l,n,!0,!a),f=[RM.MOVE_TO_LINE_TO,c,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(LM),this.hitDetectionInstructions.push(LM)),e=l}return o&&(this.instructions.push(PM),this.hitDetectionInstructions.push(PM)),a&&(this.instructions.push(TM),this.hitDetectionInstructions.push(TM)),e},e.prototype.drawCircle=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([RM.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([RM.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,a,!1,!1);var u=[RM.CIRCLE,s];this.instructions.push(IM,u),this.hitDetectionInstructions.push(IM,u),void 0!==r.fillStyle&&(this.instructions.push(PM),this.hitDetectionInstructions.push(PM)),void 0!==r.strokeStyle&&(this.instructions.push(TM),this.hitDetectionInstructions.push(TM)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([RM.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([RM.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([RM.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([RM.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(a,u,o[l],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,n=0,i=r.length;n<i;++n)r[n]=us(r[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(AM);function GM(t,e,r,n,i){var o,a,s,u,l,c,h,f,p,d=r,m=r,y=0,g=0,v=r;for(o=r;o<n;o+=i){var _=e[o],b=e[o+1];void 0!==u&&(f=_-u,p=b-l,s=Math.sqrt(f*f+p*p),void 0!==c&&(g+=a,Math.acos((c*f+h*p)/(a*s))>t&&(g>y&&(y=g,d=v,m=o),g=0,v=o-i)),a=s,c=f,h=p),u=_,l=b}return(g+=s)>y?[v,o]:[d,m]}var zM="point",UM="line",qM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VM={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},YM={Circle:BM,Default:AM,Image:NM,LineString:FM,Polygon:BM,Text:function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return qM(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var r=this.textFillState_,n=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(r||n)){var o,a,s=this.coordinates.length,u=t.getType(),l=null,c=2,h=2;if(i.placement===UM){if(!mn(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(l=t.getFlatCoordinates(),h=t.getStride(),u==mr.LINE_STRING)f=[l.length];else if(u==mr.MULTI_LINE_STRING)f=t.getEnds();else if(u==mr.POLYGON)f=t.getEnds().slice(0,1);else if(u==mr.MULTI_POLYGON){var p=t.getEndss();for(f=[],o=0,a=p.length;o<a;++o)f.push(p[o][0])}this.beginGeometry(t,e);for(var d=i.textAlign,m=0,y=void 0,g=0,v=f.length;g<v;++g){if(null==d){var _=GM(i.maxAngle,l,m,f[g],h);m=_[0],y=_[1]}else y=f[g];for(o=m;o<y;o+=h)this.coordinates.push(l[o],l[o+1]);c=this.coordinates.length,m=f[g];var b=this.declutterGroups_?0===g?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(s,c,b),s=c}this.endGeometry(e)}else{var w=null;switch(i.overflow||(w=[]),u){case mr.POINT:case mr.MULTI_POINT:c=(l=t.getFlatCoordinates()).length;break;case mr.LINE_STRING:l=t.getFlatMidpoint();break;case mr.CIRCLE:l=t.getCenter();break;case mr.MULTI_LINE_STRING:c=(l=t.getFlatMidpoints()).length;break;case mr.POLYGON:l=t.getFlatInteriorPoint(),i.overflow||w.push(l[2]/this.resolution),h=3;break;case mr.MULTI_POLYGON:var M=t.getFlatInteriorPoints();for(l=[],o=0,a=M.length;o<a;o+=3)i.overflow||w.push(M[o+2]/this.resolution),l.push(M[o],M[o+1]);if(0==(c=l.length))return}c=this.appendFlatCoordinates(l,0,c,h,!1,!1),this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var S=this.pixelRatio;this.instructions.push([RM.DRAW_IMAGE,s,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,i.padding==$l?$l:i.padding.map((function(t){return t*S})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.hitDetectionInstructions.push([RM.DRAW_IMAGE,s,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,i.padding,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||"center",textBaseline:e.textBaseline||"middle",scale:e.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,e,r){var n=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,l=VM[i.textBaseline],c=this.textOffsetY_*u,h=this.text_,f=i.scale,p=n?n.lineWidth*f/2:0;this.instructions.push([RM.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,u,c,o,p*u,h,a,1]),this.hitDetectionInstructions.push([RM.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,1,c,o,p,h,a,1/u])},e.prototype.setTextStyle=function(t,e){var r,n,i;if(t){this.declutterGroups_=e;var o=t.getFill();o?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=Kl(o.getColor()||"#000")):(n=null,this.textFillState_=n);var a=t.getStroke();if(a){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var s=a.getLineDash(),u=a.getLineDashOffset(),l=a.getWidth(),c=a.getMiterLimit();i.lineCap=a.getLineCap()||"round",i.lineDash=s?s.slice():Ql,i.lineDashOffset=void 0===u?0:u,i.lineJoin=a.getLineJoin()||"round",i.lineWidth=void 0===l?1:l,i.miterLimit=void 0===c?10:c,i.strokeStyle=Kl(a.getColor()||"#000")}else i=null,this.textStrokeState_=i;r=this.textState_;var h=t.getFont()||"10px sans-serif";sc(h);var f=t.getScale();r.overflow=t.getOverflow(),r.font=h,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||"middle",r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||$l,r.scale=void 0===f?1:f;var p=t.getOffsetX(),d=t.getOffsetY(),m=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0===y?0:y,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:Mr(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Mr(n.fillStyle):""}else this.text_=""},e}(AM)},ZM=function(){function t(t,e,r,n,i){this.declutter_=i,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[[1/0,1/0,-1/0,-1/0]],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var i=r[n].finish();t[e][n]=i}}return t},t.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var i=n[e];void 0===i&&(i=new(0,YM[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=i);return i},t}();function WM(t,e,r,n,i,o,a,s,u,l,c){for(var h,f,p=[],d=t[e]>t[r-n],m=i.length,y=t[e],g=t[e+1],v=t[e+=n],_=t[e+1],b=0,w=Math.sqrt(Math.pow(v-y,2)+Math.pow(_-g,2)),M=!1,S=0;S<m;++S){for(var x=i[h=d?m-S-1:S],E=s*u(l,x,c),O=o+E/2;e<r-n&&b+w<O;)y=v,g=_,v=t[e+=n],_=t[e+1],b+=w,w=Math.sqrt(Math.pow(v-y,2)+Math.pow(_-g,2));var P=O-b,T=Math.atan2(_-g,v-y);if(d&&(T+=T>0?-Math.PI:Math.PI),void 0!==f){var I=T-f;if(M=M||0!==I,I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>a)return null}f=T;var L=P/w,R=dr(y,v,L),C=dr(g,_,L);p[h]=[R,C,E/2,T,x],o+=E}return M?p:[[p[0][0],p[0][1],p[0][2],p[0][3],i]]}var HM=r(32),XM=r.n(HM),KM=[1/0,1/0,-1/0,-1/0],JM=[1,0,0,1,0,0],QM=[],$M=[],tS=[],eS=[],rS=function(){function t(t,e,r,n){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,n){var i=t+e+r+n;if(this.labels_[i])return this.labels_[i];var o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[e],u=this.pixelRatio,l=s.scale*u,c=VM[s.textAlign||"center"],h=n&&o.lineWidth?o.lineWidth:0,f=t.split("\n"),p=f.length,d=[],m=function(t,e,r){for(var n=e.length,i=0,o=0;o<n;++o){var a=cc(t,e[o]);i=Math.max(i,a),r.push(a)}return i}(s.font,f,d),y=uc(s.font),g=y*p,v=m+h,_=[],b={width:Math.ceil((v+2)*l),height:Math.ceil((g+h)*l),contextInstructions:_};(1!=l&&_.push("scale",[l,l]),_.push("font",s.font),n)&&(_.push("strokeStyle",o.strokeStyle),_.push("lineWidth",h),_.push("lineCap",o.lineCap),_.push("lineJoin",o.lineJoin),_.push("miterLimit",o.miterLimit),(yo?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(_.push("setLineDash",[o.lineDash]),_.push("lineDashOffset",o.lineDashOffset)));r&&_.push("fillStyle",a.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");var w,M=.5-c,S=c*v+M*h;if(n)for(w=0;w<p;++w)_.push("strokeText",[f[w],S+M*d[w],.5*(h+y)+w*y]);if(r)for(w=0;w<p;++w)_.push("fillText",[f[w],S+M*d[w],.5*(h+y)+w*y]);return this.labels_[i]=b,b},t.prototype.replayTextBackground_=function(t,e,r,n,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,m,y,g){var v=y||g;e-=i*=f,r-=o*=f;var _=d+l>n.width?n.width-l:d,b=s+c>n.height?n.height-c:s,w=m[3]+_*f+m[1],M=m[0]+b*f+m[2],S=e-m[3],x=r-m[0];(v||0!==h)&&(QM[0]=S,eS[0]=S,QM[1]=x,$M[1]=x,$M[0]=S+w,tS[0]=$M[0],tS[1]=x+M,eS[1]=tS[1]);var E=null;if(0!==h){var O=e+i,P=r+o;E=Da(JM,O,P,1,1,h,-O,-P),ja(JM,QM),ja(JM,$M),ja(JM,tS),ja(JM,eS),Zr(Math.min(QM[0],$M[0],tS[0],eS[0]),Math.min(QM[1],$M[1],tS[1],eS[1]),Math.max(QM[0],$M[0],tS[0],eS[0]),Math.max(QM[1],$M[1],tS[1],eS[1]),KM)}else Zr(S,x,S+w,x+M,KM);var T=t.canvas,I=g?g[2]*f/2:0,L=KM[0]-I<=T.width&&KM[2]+I>=0&&KM[1]-I<=T.height&&KM[3]+I>=0;if(p&&(e=Math.round(e),r=Math.round(r)),a){if(!L&&1==a[4])return;Jr(a,KM);var R=L?[t,E?E.slice(0):null,u,n,l,c,_,b,e,r,f]:null;R&&(v&&R.push(y,g,QM.slice(0),$M.slice(0),tS.slice(0),eS.slice(0)),a.push(R))}else L&&(v&&this.replayTextBackground_(t,QM,$M,tS,eS,y,g),pc(t,E,u,n,l,c,_,b,e,r,f))},t.prototype.fill_=function(t){if(this.alignFill_){var e=ja(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,r,n){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new XM.a(9)),!n.collides(o)){n.insert(o);for(var a=5,s=t.length;a<s;++a){var u=t[a],l=u[0],c=l.globalAlpha;c!==r&&(l.globalAlpha=r),u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),pc.apply(void 0,u),c!==r&&(l.globalAlpha=c)}}t.length=5,Wr(t)}}return n},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,n){var i=this.textStates[e],o=this.createLabel(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,u=VM[i.textAlign||"center"],l=VM[i.textBaseline||"middle"],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:u*(o.width/s-2*i.scale)+2*(.5-u)*c,anchorY:l*o.height/s+2*(.5-l)*c}},t.prototype.execute_=function(t,e,r,n,i,o){var a,s,u;this.declutterItems.length=0,this.pixelCoordinates_&&xi(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Ia(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),s=this.renderedTransform_,u=e,s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5]);for(var l,c,h,f,p,d,m,y,g,v,_,b,w,M,S,x,E,O=0,P=r.length,T=0,I=0,L=0,R=null,C=null,A=this.coordinateCache_,k=this.viewRotation_,N=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,j={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},F=this.instructions!=r||this.overlaps?0:200;O<P;){var D=r[O];switch(D[0]){case RM.BEGIN_GEOMETRY:(S=D[1]).getGeometry()?void 0===o||mn(o,D[3])?++O:O=D[2]+1:O=D[2];break;case RM.BEGIN_PATH:I>F&&(this.fill_(t),I=0),L>F&&(t.stroke(),L=0),I||L||(t.beginPath(),f=NaN,p=NaN),++O;break;case RM.CIRCLE:var B=a[T=D[1]],G=a[T+1],z=a[T+2]-B,U=a[T+3]-G,q=Math.sqrt(z*z+U*U);t.moveTo(B+q,G),t.arc(B,G,q,0,2*Math.PI,!0),++O;break;case RM.CLOSE_PATH:t.closePath(),++O;break;case RM.CUSTOM:T=D[1],l=D[2];var V=D[3],Y=D[4],Z=6==D.length?D[5]:void 0;j.geometry=V,j.feature=S,O in A||(A[O]=[]);var W=A[O];Z?Z(a,T,l,2,W):(W[0]=a[T],W[1]=a[T+1],W.length=2),Y(W,j),++O;break;case RM.DRAW_IMAGE:T=D[1],l=D[2],v=D[3],c=D[4],h=D[5],g=i?null:D[6];var H=D[7],X=D[8],K=D[9],J=D[10],Q=D[11],$=D[12],tt=D[13],et=D[14];if(!v&&D.length>=19){_=D[18],b=D[19],w=D[20],M=D[21];var rt=this.drawLabelWithPointPlacement_(_,b,w,M);v=rt.label,D[3]=v;var nt=D[22];c=(rt.anchorX-nt)*this.pixelRatio,D[4]=c;var it=D[23];h=(rt.anchorY-it)*this.pixelRatio,D[5]=h,H=v.height,D[7]=H,et=v.width,D[14]=et}var ot=void 0;D.length>24&&(ot=D[24]);var at=void 0,st=void 0,ut=void 0;D.length>16?(at=D[15],st=D[16],ut=D[17]):(at=$l,st=!1,ut=!1),Q&&N?$+=k:Q||N||($-=k);for(var lt=0,ct=0;T<l;T+=2)if(!(ot&&ot[lt++]<et/this.pixelRatio)){if(g){var ht=Math.floor(ct);g.length<ht+1&&((y=[1/0,1/0,-1/0,-1/0]).push(g[0][4]),g.push(y)),y=g[ht]}this.replayImageOrLabel_(t,a[T],a[T+1],v,c,h,y,H,X,K,J,$,tt,n,et,at,st?R:null,ut?C:null),y&&(ct===Math.floor(ct)&&this.declutterItems.push(this,y,S),ct+=1/y[4])}++O;break;case RM.DRAW_CHARS:var ft=D[1],pt=D[2],dt=D[3];y=i?null:D[4];var mt=D[5];M=D[6];var yt=D[7],gt=D[8],vt=D[9];w=D[10];var _t=D[11];_=D[12],b=D[13];var bt=D[14],wt=this.textStates[b],Mt=wt.font,St=wt.scale*gt,xt=void 0;Mt in this.widths_?xt=this.widths_[Mt]:(xt={},this.widths_[Mt]=xt);var Et=wy(a,ft,pt,2),Ot=St*hc(Mt,_,xt);if(mt||Ot<=Et){var Pt=this.textStates[b].textAlign,Tt=WM(a,ft,pt,2,_,(Et-Ot)*VM[Pt],yt,St,hc,Mt,xt);if(Tt){var It=void 0,Lt=void 0,Rt=void 0,Ct=void 0,At=void 0;if(w)for(It=0,Lt=Tt.length;It<Lt;++It)Rt=(At=Tt[It])[4],Ct=this.createLabel(Rt,b,"",w),c=At[2]+_t,h=dt*Ct.height+2*(.5-dt)*_t-vt,this.replayImageOrLabel_(t,At[0],At[1],Ct,c,h,y,Ct.height,1,0,0,At[3],bt,!1,Ct.width,$l,null,null);if(M)for(It=0,Lt=Tt.length;It<Lt;++It)Rt=(At=Tt[It])[4],Ct=this.createLabel(Rt,b,M,""),c=At[2],h=dt*Ct.height-vt,this.replayImageOrLabel_(t,At[0],At[1],Ct,c,h,y,Ct.height,1,0,0,At[3],bt,!1,Ct.width,$l,null,null)}}this.declutterItems.push(this,y,S),++O;break;case RM.END_GEOMETRY:if(void 0!==i){var kt=i(S=D[1]);if(kt)return kt}++O;break;case RM.FILL:F?I++:this.fill_(t),++O;break;case RM.MOVE_TO_LINE_TO:for(T=D[1],l=D[2],x=a[T],m=(E=a[T+1])+.5|0,(d=x+.5|0)===f&&m===p||(t.moveTo(x,E),f=d,p=m),T+=2;T<l;T+=2)d=(x=a[T])+.5|0,m=(E=a[T+1])+.5|0,T!=l-2&&d===f&&m===p||(t.lineTo(x,E),f=d,p=m);++O;break;case RM.SET_FILL_STYLE:R=D,this.alignFill_=D[2],I&&(this.fill_(t),I=0,L&&(t.stroke(),L=0)),t.fillStyle=D[1],++O;break;case RM.SET_STROKE_STYLE:C=D,L&&(t.stroke(),L=0),this.setStrokeStyle_(t,D),++O;break;case RM.STROKE:F?L++:t.stroke(),++O;break;default:++O}}I&&this.fill_(t),L&&t.stroke()},t.prototype.execute=function(t,e,r,n){this.viewRotation_=r,this.execute_(t,e,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,r,n,i){return this.viewRotation_=r,this.execute_(t,e,this.hitDetectionInstructions,!0,n,i)},t}(),nS=[Pc,Sc,Oc,Ec,Tc,xc],iS=function(){function t(t,e,r,n,i,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(i)}return t.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);var n=t[e];for(var i in n){var o=n[i];r[i]=new rS(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,i=t.length;n<i;++n)if(t[n]in r)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o){var a=2*(n=Math.round(n))+1,s=Da(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Bs(a,a));var u,l=this.hitDetectionContext_;l.canvas.width!==a||l.canvas.height!==a?(l.canvas.width=a,l.canvas.height=a):l.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(Qr(u=[1/0,1/0,-1/0,-1/0],t),Dr(u,e*(this.renderBuffer_+n),u));var c,h=function(t){if(void 0!==oS[t])return oS[t];for(var e=2*t+1,r=new Array(e),n=0;n<e;n++)r[n]=new Array(e);var i=t,o=0,a=0;for(;i>=o;)aS(r,t+i,t+o),aS(r,t+o,t+i),aS(r,t-o,t+i),aS(r,t-i,t+o),aS(r,t-i,t-o),aS(r,t-o,t-i),aS(r,t+o,t-i),aS(r,t+i,t-o),o++,2*((a+=1+2*o)-i)+1>0&&(a+=1-2*(i-=1));return oS[t]=r,r}(n);function f(t){for(var e=l.getImageData(0,0,a,a).data,r=0;r<a;r++)for(var n=0;n<a;n++)if(h[r][n]&&e[4*(n*a+r)+3]>0){var s=void 0;return(!o||c!=Ec&&c!=Tc||-1!==o.indexOf(t))&&(s=i(t)),s||void l.clearRect(0,0,a,a)}}var p,d,m,y,g,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(vi),p=v.length-1;p>=0;--p){var _=v[p].toString();for(m=this.executorsByZIndex_[_],d=nS.length-1;d>=0;--d)if(void 0!==(y=m[c=nS[d]])&&(g=y.executeHitDetection(l,s,r,f,u)))return g}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],i=e[2],o=e[3],a=[r,n,r,o,i,o,i,n];return Ia(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return jn(this.executorsByZIndex_)},t.prototype.execute=function(t,e,r,n,i,o){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(vi),this.maxExtent_&&(t.save(),this.clip(t,e));var s,u,l,c,h,f,p=i||nS;for(s=0,u=a.length;s<u;++s){var d=a[s].toString();for(h=this.executorsByZIndex_[d],l=0,c=p.length;l<c;++l){var m=p[l];if(void 0!==(f=h[m]))if(!o||m!=Ec&&m!=Tc)f.execute(t,e,r,n);else{var y=o[d];y?y.push(f,e.slice(0)):o[d]=[f,e.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),oS={0:[[!0]]};function aS(t,e,r){var n,i=Math.floor(t.length/2);if(e>=i)for(n=i;n<e;n++)t[n][r]=!0;else if(e<i)for(n=e+1;n<i;n++)t[n][r]=!0}function sS(t,e,r,n,i,o){for(var a=Object.keys(t).map(Number).sort(vi),s=0,u=a.length;s<u;++s)for(var l=t[a[s].toString()],c=void 0,h=0,f=l.length;h<f;){var p=l[h++];p!==c&&(c=p,o.push({items:p.declutterItems,opacity:n}));var d=l[h++];p.execute(e,d,r,i)}}var uS=iS,lS="fraction",cS="pixels",hS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fS=function(t){function e(e,r,n,i,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==i&&(s.image_.crossOrigin=i),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=n,s.src_=r,s.tainted_,s}return hS(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&this.imageState_===bc){t||(t=Bs(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Ai)},e.prototype.handleImageError_=function(){this.imageState_=wc,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=bc,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],r=this.size_[1],n=Bs(e,r);n.fillRect(0,0,e,r),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==vc){this.imageState_=_c;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Xg(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var r=t.getImageData(0,0,this.image_.width,this.image_.height),n=r.data,i=this.color_[0]/255,o=this.color_[1]/255,a=this.color_[2]/255,s=0,u=n.length;s<u;s+=4)n[s]*=i,n[s+1]*=o,n[s+2]*=a;t.putImageData(r,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Ci);var pS="bottom-left",dS="bottom-right",mS="top-left",yS="top-right",gS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vS=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.opacity?n.opacity:1,o=void 0!==n.rotation?n.rotation:0,a=void 0!==n.scale?n.scale:1,s=void 0!==n.rotateWithView&&n.rotateWithView;(r=t.call(this,{opacity:i,rotation:o,scale:a,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:s})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:mS,r.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:lS,r.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:lS,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var u=void 0!==n.img?n.img:null,l=void 0!==n.imgSize?n.imgSize:null,c=n.src;Or(!(void 0!==c&&u),4),Or(!u||u&&l,5),void 0!==c&&0!==c.length||!u||(c=u.src||Mr(u)),Or(void 0!==c&&c.length>0,6);var h=void 0!==n.src?vc:bc;return r.color_=void 0!==n.color?Vl(n.color):null,r.iconImage_=function(t,e,r,n,i,o){var a=Xl.get(e,n,o);return a||(a=new fS(t,e,r,n,i,o),Xl.set(e,n,o,a)),a}(u,c,l,r.crossOrigin_,h,r.color_),r.offset_=void 0!==n.offset?n.offset:[0,0],r.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:mS,r.origin_=null,r.size_=void 0!==n.size?n.size:null,r}return gS(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==lS||this.anchorYUnits_==lS){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==lS&&(t[0]*=e[0]),this.anchorYUnits_==lS&&(t[1]*=e[1])}if(this.anchorOrigin_!=mS){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=yS&&this.anchorOrigin_!=dS||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=pS&&this.anchorOrigin_!=dS||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=mS){var r=this.getSize(),n=this.iconImage_.getSize();if(!r||!n)return null;t=t.slice(),this.offsetOrigin_!=yS&&this.offsetOrigin_!=dS||(t[0]=n[0]-r[0]-t[0]),this.offsetOrigin_!=pS&&this.offsetOrigin_!=dS||(t[1]=n[1]-r[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Ai,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Ai,t)},e}(lM);function _S(t,e,r,n,i,o,a){var s=Bs(t[0]/2,t[1]/2);s.imageSmoothingEnabled=!1;for(var u=s.canvas,l=new gc(s,.5,i,null,a),c=r.length,h=Math.floor(16777215/c),f={},p=1;p<=c;++p){var d=r[p-1],m=d.getStyleFunction()||n;if(n){var y=m(d,o);if(y){Array.isArray(y)||(y=[y]);for(var g="#"+("000000"+(p*h).toString(16)).slice(-6),v=0,_=y.length;v<_;++v){var b=y[v],w=b.clone(),M=w.getFill();M&&M.setColor(g);var S=w.getStroke();S&&S.setColor(g),w.setText(void 0);var x=b.getImage();if(x){var E=x.getImageSize();if(!E)continue;var O=document.createElement("canvas");O.width=E[0],O.height=E[1];var P=O.getContext("2d",{alpha:!1});P.fillStyle=g;var T=P.canvas;P.fillRect(0,0,T.width,T.height),Bs(E?E[0]:T.width,E?E[1]:T.height).drawImage(T,0,0),w.setImage(new vS({img:T,imgSize:E,anchor:x.getAnchor(),anchorXUnits:cS,anchorYUnits:cS,offset:x.getOrigin(),size:x.getSize(),opacity:x.getOpacity(),scale:x.getScale(),rotation:x.getRotation(),rotateWithView:x.getRotateWithView()}))}var I=Number(w.getZIndex());(A=f[I])||(A={},f[I]=A,A[mr.POLYGON]=[],A[mr.CIRCLE]=[],A[mr.LINE_STRING]=[],A[mr.POINT]=[]);var L=w.getGeometryFunction()(d);L&&mn(i,L.getExtent())&&A[L.getType().replace("Multi","")].push(L,w)}}}}for(var R=Object.keys(f).map(Number).sort(vi),C=(p=0,R.length);p<C;++p){var A=f[R[p]];for(var k in A){var N=A[k];for(v=0,_=N.length;v<_;v+=2){l.setStyle(N[v+1]);for(var j=0,F=e.length;j<F;++j)l.setTransform(e[j]),l.drawGeometry(N[v])}}}return document.body.appendChild(s.canvas),s.getImageData(0,0,u.width,u.height)}function bS(t,e,r){var n=[];if(r){var i=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*r.width),o=r.data[i],a=r.data[i+1],s=r.data[i+2]+256*(a+256*o),u=Math.floor(16777215/e.length);s&&s%u==0&&n.push(e[s/u-1])}return n}var wS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MS=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r}return wS(e,t),e.prototype.useContainer=function(e,r,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,r,n)},e.prototype.renderFrame=function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,r){Na(t,e,0,0,r,0,0)}(this.pixelTransform,1/r,1/r),Ba(this.inversePixelTransform,this.pixelTransform);var i=Ga(this.pixelTransform);this.useContainer(e,i,n.opacity);var o=this.context,a=o.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&a.width>0&&(a.width=0),this.container;var u=Math.round(t.size[0]*r),l=Math.round(t.size[1]*r);a.width!=u||a.height!=l?(a.width=u,a.height=l,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,u,l),this.preRender(o,t);var c=t.extent,h=t.viewState,f=h.center,p=h.resolution,d=h.projection,m=h.rotation,y=d.getExtent(),g=this.getLayer().getSource(),v=!1;if(n.extent){var _=li(n.extent,d);(v=!Ur(_,t.extent)&&mn(_,t.extent))&&this.clip(o,t,_)}var b=t.viewHints,w=!(b[ea]||b[ra]),M=this.getRenderTransform(f,p,m,r,u,l,0),S=this.getLayer().getDeclutter()?{}:null;if(s.execute(o,M,m,w,void 0,S),g.getWrapX()&&d.canWrapX()&&!Ur(y,c)){for(var x=c[0],E=dn(y),O=0,P=void 0;x<y[0];){P=E*--O;var T=this.getRenderTransform(f,p,m,r,u,l,P);s.execute(o,T,m,w,void 0,S),x+=E}for(O=0,x=c[2];x>y[2];){P=E*++O;var I=this.getRenderTransform(f,p,m,r,u,l,P);s.execute(o,I,m,w,void 0,S),x-=E}}if(S){var L=t.viewHints;sS(S,o,m,1,!(L[ea]||L[ra]),t.declutterItems)}v&&o.restore(),this.postRender(o,t);var R=n.opacity,C=this.container;return R!==parseFloat(C.style.opacity)&&(C.style.opacity=1===R?"":R),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,r){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];ja(this.pixelTransform,n);var i=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,u=this.renderedExtent_,l=this.getLayer(),c=[],h=n[0]/2,f=n[1]/2;c.push(this.getRenderTransform(i,o,a,.5,h,f,0).slice());var p=l.getSource(),d=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!Ur(d,u)){for(var m=u[0],y=dn(d),g=0,v=void 0;m<d[0];)v=y*--g,c.push(this.getRenderTransform(i,o,a,.5,h,f,v).slice()),m+=y;for(g=0,m=u[2];m>d[2];)v=y*++g,c.push(this.getRenderTransform(i,o,a,.5,h,f,v).slice()),m-=y}this.hitDetectionImageData_=_S(n,c,this.renderedFeatures_,l.getStyleFunction(),u,o,a)}e(bS(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(this.replayGroup_){var o=e.viewState.resolution,a=e.viewState.rotation,s=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,a,r,(function(t){var e=Mr(t);if(!(e in u))return u[e]=!0,n(t,s)}),s.getDeclutter()?i:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource();if(!r)return!1;var n=t.viewHints[ea],i=t.viewHints[ra],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!a&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,u=t.viewState,l=u.projection,c=u.resolution,h=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=Lc);var m=u.center.slice(),y=Dr(s,p*c),g=[y.slice()],v=l.getExtent();if(r.getWrapX()&&l.canWrapX()&&!Ur(v,t.extent)){var _=dn(v),b=Math.max(dn(y)/2,_);y[0]=v[0]-b,y[2]=v[2]+b,_a(m,l);var w=_n(g[0],l);w[0]<v[0]&&w[2]<v[2]?g.push([w[0]+_,w[1],w[2]+_,w[3]]):w[0]>v[0]&&w[2]>v[2]&&g.push([w[0]-_,w[1],w[2]-_,w[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&Ur(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var M,S=new ZM(Cc(c,h),y,c,h,e.getDeclutter()),x=oi();if(x){for(var E=0,O=g.length;E<O;++E)r.loadFeatures(ui(g[E],l),c,x);M=Jn(x,l)}else for(E=0,O=g.length;E<O;++E)r.loadFeatures(g[E],c,l);var P=Rc(c,h),T=function(t){var r,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(r=n(t,c)),r){var i=this.renderFeature(t,P,r,S,M);this.dirty_=this.dirty_||i}}.bind(this),I=ui(y,l),L=r.getFeaturesInExtent(I);d&&L.sort(d);for(E=0,O=L.length;E<O;++E)T(L[E]);this.renderedFeatures_=L;var R=S.finish(),C=new uS(y,c,h,r.getOverlaps(),R,e.getRenderBuffer());return this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=y,this.renderedRotation_=u.rotation,this.renderedCenter_=m,this.renderedProjection_=l,this.replayGroup_=C,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,r,n,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=Ac(n,t,r[a],e,this.boundHandleStyleImageChange_,i)||o;else o=Ac(n,t,r,e,this.boundHandleStyleImageChange_,i);return o},e}(Hm),SS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xS=function(t){function e(e){return t.call(this,e)||this}return SS(e,t),e.prototype.createRenderer=function(){return new MS(this)},e}(EM),ES=!1;function OS(t,e,r,n){return function(i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(i,o,a):t,!0),e.getType()==U_&&(s.responseType="arraybuffer"),s.withCredentials=ES,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var o=e.getType(),u=void 0;o==q_||o==V_?u=s.responseText:o==Y_?(u=s.responseXML)||(u=(new DOMParser).parseFromString(s.responseText,"application/xml")):o==U_&&(u=s.response),u?r.call(this,e.readFeatures(u,{extent:i,featureProjection:a}),e.readProjection(u)):n.call(this)}else n.call(this)}.bind(this),s.onerror=function(){n.call(this)}.bind(this),s.send()}}function PS(t,e){return OS(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),Ti)}function TS(t,e){return[[-1/0,-1/0,1/0,1/0]]}var IS="addfeature",LS="changefeature",RS="clear",CS="removefeature",AS=function(){function t(t){this.rbush_=new XM.a(t),this.items_={}}return t.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[Mr(e)]=r},t.prototype.load=function(t,e){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var o=t[n],a=e[n],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[n]=s,this.items_[Mr(a)]=s}this.rbush_.load(r)},t.prototype.remove=function(t){var e=Mr(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},t.prototype.update=function(t,e){var r=this.items_[Mr(e)];Kr([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r},t.prototype.isEmpty=function(){return jn(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Zr(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),kS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NS=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return kS(e,t),e}(Li),jS=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{attributions:n.attributions,projection:void 0,state:iu,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=Ti,r.format_=n.format,r.overlaps_=void 0===n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&(Or(r.format_,7),r.loader_=PS(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:TS;var i,o,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=a?new AS:null,r.loadedExtentsRtree_=new AS,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(i=n.features).getArray()),a||void 0!==i||(i=new oo(o)),void 0!==o&&r.addFeaturesInternal(o),void 0!==i&&r.bindFeaturesCollection_(i),r}return kS(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Mr(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new NS(IS,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[di(e,Ai,this.handleFeatureChange_,this),di(e,pi,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var r=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=e),r&&(Or(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],n=[],i=0,o=t.length;i<o;i++){var a=Mr(u=t[i]);this.addToIndex_(a,u)&&r.push(u)}i=0;for(var s=r.length;i<s;i++){var u;a=Mr(u=r[i]);this.setupChangeEvents_(a,u);var l=u.getGeometry();if(l){var c=l.getExtent();e.push(c),n.push(u)}else this.nullGeometryFeatures_[a]=u}this.featuresRtree_&&this.featuresRtree_.load(e,n);i=0;for(var h=r.length;i<h;i++)this.dispatchEvent(new NS(IS,r[i]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(IS,(function(r){e||(e=!0,t.push(r.feature),e=!1)})),this.addEventListener(CS,(function(r){e||(e=!0,t.remove(r.feature),e=!1)})),t.addEventListener(hi,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(fi,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(yi)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new NS(RS);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,(function(r){return r.getGeometry().intersectsCoordinate(t)?e(r):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(r){if(r.getGeometry().intersectsExtent(t)){var n=e(r);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),jn(this.nullGeometryFeatures_)||Mi(t,Nn(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],n=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],u=e||Oi;return this.featuresRtree_.forEachInExtent(s,(function(t){if(u(t)){var e=t.getGeometry(),l=a;if((a=e.closestPointXY(r,n,o,a))<l){i=t;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}})),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,r=Mr(e),n=e.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new NS(LS,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Mr(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&jn(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,r){var n=this.loadedExtentsRtree_,i=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var s=i[t];n.forEachInExtent(s,(function(t){return Ur(t.extent,s)}))||(a.loader_.call(a,s,e,r),n.insert(s,{extent:s.slice()}),a.loading=a.loader_!==Ti)},a=this,s=0,u=i.length;s<u;++s)o(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,(function(r){if(Kr(r.extent,t))return e=r,!0})),e&&r.remove(e)},e.prototype.removeFeature=function(t){var e=Mr(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Mr(t);this.featureChangeKeys_[e].forEach(yi),delete this.featureChangeKeys_[e];var r=t.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new NS(CS,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Or(this.format_,7),this.setLoader(PS(t,this.format_))},e}(fv);function FS(t){return(FS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DS(t){return function(t){if(Array.isArray(t))return BS(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return BS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BS(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function GS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==FS(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==FS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===FS(o)?o:String(o)),n)}var i,o}function zS(t,e){return(zS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function US(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=VS(t);if(e){var i=VS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qS(this,r)}}function qS(t,e){if(e&&("object"===FS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function VS(t){return(VS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zS(t,e)}(o,t);var e,r,n,i=US(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).facadeVector_=null,r.features_=[],r.postComposeEvtKey_=null,r.load_=!1,r.loaded_=!1,r.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,r.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,r.visibility=!1!==t.visibility,r}return e=o,(r=[{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),t.on("change:proj",this.setProjection_.bind(this),this),this.ol3Layer=new xS(this.vendorOptions_),this.updateSource_(),this.setVisible(this.visibility),this.map.getMapImpl().addLayer(this.ol3Layer),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom)}},{key:"updateSource_",value:function(){XU(this.vendorOptions_.source)&&(XU(this.ol3Layer.getSource())&&this.ol3Layer.setSource(new jS),this.redraw(),this.loaded_=!0,this.fire(Uf,[this.features_]))}},{key:"inRange",value:function(){return!0}},{key:"addFeatures",value:function(t,e){var r=this;t.forEach((function(t){var e=r.features_.find((function(e){return e.equals(t)}));XU(e)&&r.features_.push(t)})),e&&this.updateLayer_(),this.redraw()}},{key:"updateLayer_",value:function(){var t=this.facadeVector_.getStyle();XU(t)||(t instanceof uM?this.facadeVector_.setStyle(t):t.apply(this.facadeVector_))}},{key:"getFeatures",value:function(t,e){var r=this.features_;return t||(r=e.execute(r)),r}},{key:"getFeatureById",value:function(t){return this.features_.filter((function(e){return e.getId()===t}))[0]}},{key:"removeFeatures",value:function(t){this.features_=this.features_.filter((function(e){return!t.includes(e)})),this.redraw()}},{key:"redraw",value:function(){var t=this.getOL3Layer();if(!XU(t)){var e=t.getSource();DS(e.getFeatures()).forEach(e.removeFeature,e);var r=this.facadeVector_.getFeatures();e.addFeatures(r.map(Dq.facade2OLFeature))}}},{key:"getFeaturesExtent",value:function(t,e){var r=this.getFeatures(t,e),n=Zy.getFeaturesExtent(r,this.map.getProjection().code);return null===n&&(n=this.map.getProjection().getExtent()),n}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!XU(n)){var i=n.getAttribute("vendor.mapea.click");KU(i)&&i(r,n)}}},{key:"unselectFeatures",value:function(){}},{key:"setFacadeObj",value:function(t){this.facadeVector_=t}},{key:"setProjection_",value:function(t,e){if(t.code!==e.code){var r=Vn(t.code),n=Vn(e.code);this.facadeVector_.getFeatures().forEach((function(t){return t.getImpl().getOLFeature().getGeometry().transform(r,n)}))}}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&this.constructor===t.constructor&&(e=!0),e}},{key:"refresh",value:function(){this.getOL3Layer().getSource().clear()}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"destroy",value:function(){var t=this.map.getMapImpl();XU(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}}])&&GS(e.prototype,r),n&&GS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(tg),ZS=(r(227),r(204)),WS=r.n(ZS),HS=function(t){t.parentElement.removeChild(t)},XS=function(){var t=document.querySelectorAll("div.m-dialog");Array.prototype.forEach.call(t,(function(t){t.parentElement.removeChild(t)}))},KS=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,i={message:t,title:e,severity:r,order:n},o=sp(WS.a,{vars:i}),a=document.querySelector("div.m-mapea-container"),s=o.querySelector("div.m-button > button");s.addEventListener("click",(function(t){return HS(o)})),a.appendChild(o)},JS=function(t,e,r){var n=e;XU(n)&&(n=Hf("dialog").info),KS(t,n,"info",r)},QS=function(t,e,r){var n=e;XU(n)&&(n=Hf("dialog").error),KS(t,n,"error",r)},$S=function(t,e,r){var n=e;XU(n)&&(n=Hf("dialog").success),KS(t,n,"success",r)},tx={};function ex(t){return(ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ex(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ex(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ex(o)?o:String(o)),n)}var i,o}var nx=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"getFunctionFilter",value:function(){}},{key:"execute",value:function(t){}},{key:"toCQL",value:function(){}}])&&rx(e.prototype,r),n&&rx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ix(t){return(ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ox(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ax(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ix(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ix(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ix(o)?o:String(o)),n)}var i,o}function sx(t,e){return(sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ux(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=cx(t);if(e){var i=cx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lx(this,r)}}function lx(t,e){if(e&&("object"===ix(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function cx(t){return(cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sx(t,e)}(o,t);var e,r,n,i=ux(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ox(this,o);var r=0;return e.stroke&&(r=e.stroke.getWidth()),t=i.call(this,{radius:e.radius,fill:e.fill,rotation:e.rotation,rotateWithView:e.rotateWithView}),"number"==typeof e.opacity&&t.setOpacity(e.opacity),t.color_=e.color,t.fontSize_=e.fontSize||1,t.stroke_=e.stroke,t.fill_=e.fill,t.radius_=e.radius-r,t.form_=e.form||"none",t.gradient_=e.gradient,t.offset_=[e.offsetX?e.offsetX:0,e.offsetY?e.offsetY:0],t.glyph_=t.getGlyph(e.glyph)||"",t.renderMaker(),t}return e=o,n=[{key:"addDefs",value:function(t,e){var r=t;if("string"==typeof t&&(r={font:t,name:t,copyright:""}),!r.font||"string"!=typeof r.font)throw new Error("bad font def");var n=r.font;o.defs.fonts[n]=r,Object.keys(e).forEach((function(t){var n=e[t];"string"==typeof n&&1===n.length&&(n={char:n}),o.defs.glyphs[t]={font:r.font,char:n.char||"".concat(String.fromCharCode(n.code))||"",theme:n.theme||r.name,name:n.name||t,search:n.search||""}}))}}],(r=[{key:"clone",value:function(){var t=new o({glyph:"",color:this.color_,fontSize:this.fontSize_,stroke:this.stroke_,fill:this.fill_,radius:this.radius_+(this.stroke_?this.stroke_.getWidth():0),form:this.form_,gradient:this.gradient_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setScale(this.getScale()),t.setGlyph(this.getGlyph()),t.renderMaker(),t}},{key:"setGlyph",value:function(t){this.glyph_=t}},{key:"getFill",value:function(){return this.fill_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getGlyph",value:function(t){var e=this.glyph_;return t&&(e=(e=o.defs.glyphs[t])||{font:"none",char:t.charAt(0),theme:"none",name:"none",search:""}),e}},{key:"getGlyphName",value:function(){var t=this,e="";return Object.keys(o.defs.glyphs).forEach((function(r){o.defs.glyph[r]===t.glyph_&&(e=r)})),e}},{key:"getFontInfo",value:function(t){return o.defs.fonts[t.font]}},{key:"renderMaker",value:function(t){var e,r=0;this.stroke_&&(e=Bl(this.stroke_.getColor()),r=this.stroke_.getWidth());var n=this.getImage(),i={strokeStyle:e,strokeWidth:r,size:n.width},o=n.getContext("2d");o.clearRect(0,0,n.width,n.height),this.drawMarker_(i,o,0,0);var a=this.getAnchor();a[0]=n.width/2-this.offset_[0],a[1]=n.width/2-this.offset_[1]}},{key:"drawPath_",value:function(t,e){var r=e,n=2*this.radius_+t.strokeWidth+1,i=t.strokeWidth/2,o=t.size/2,a={fac:1,posX:t.size/2,posY:t.size/2};r.lineJoin="round",r.beginPath();var s=Math.PI;switch(this.form_){case"none":a.fac=1;break;case"circle":case"ban":r.arc(o,o,n/2,0,2*Math.PI,!0);break;case"poi":r.arc(o,o-.4*this.radius_,.6*this.radius_,.15*s,.85*s,!0),r.lineTo(o-.89*.05*n,(.95+.45*.05)*n+i),r.arc(o,.95*n+i,.05*n,.85*Math.PI,.15*Math.PI,!0),a={fac:.45,posX:o,posY:o-.35*this.radius_};break;case"bubble":r.arc(o,o-.2*this.radius_,.8*this.radius_,.4*s,.6*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"marker":r.arc(o,o-.2*this.radius_,.8*this.radius_,.25*s,.75*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"coma":r.moveTo(o+.8*this.radius_,o-.2*this.radius_),r.quadraticCurveTo(.95*n+i,.75*n+i,.5*n+i,n+i),r.arc(o,o-.2*this.radius_,.8*this.radius_,.45*s,0,!1),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;default:var u;switch(this.form_){case"shield":u=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0],a.posY=.45*n+i;break;case"blazon":u=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0],a.fac=.8,a.posY=.4*n+i;break;case"bookmark":u=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0],a.fac=.9,a.posY=.4*n+i;break;case"hexagon":u=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2],a.fac=.9,a.posY=.5*n+i;break;case"diamond":u=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0],a.fac=.75,a.posY=.35*n+i;break;case"triangle":u=[0,0,1,0,.5,1,0,0],a.fac=.6,a.posY=.3*n+i;break;case"sign":u=[.5,.05,1,.95,0,.95,.5,.05],a.fac=.7,a.posY=.65*n+i;break;case"lozenge":u=[.5,0,1,.5,.5,1,0,.5,.5,0],a.fac=.7;break;default:u=[0,0,1,0,1,1,0,1,0,0]}for(var l=0;l<u.length;l+=2)r.lineTo(u[l]*n+i,u[l+1]*n+i)}return r.closePath(),a}},{key:"drawMarker_",value:function(t,e,r,n){var i=e,o=this.fill_?this.fill_.getColor():"#000",a=this.stroke_?this.stroke_.getColor():"#000";"none"===this.form_&&this.stroke_&&this.fill_&&(a=this.fill_.getColor(),o=this.stroke_.getColor()),i.setTransform(1,0,0,1,0,0),i.translate(r,n);var s=this.drawPath_(t,i);if(this.fill_){if(this.gradient_&&"none"!==this.form_){var u=i.createLinearGradient(0,0,t.size/2,t.size);u.addColorStop(1,Bl(o)),u.addColorStop(0,Bl(a)),i.fillStyle=u}else i.fillStyle=Bl(o);i.fill()}if(this.stroke_&&t.strokeWidth&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.stroke()),this.glyph_.char){i.font="".concat(2*s.fac*this.radius_*this.fontSize_,"px ").concat(this.glyph_.font),i.strokeStyle=i.fillStyle,i.lineWidth=t.strokeWidth*("none"===this.form_?2:1),i.fillStyle=Bl(this.color_||a),i.textAlign="center",i.textBaseline="middle";var l=this.glyph_.char;t.strokeWidth&&"transparent"!==a&&i.strokeText(l,s.posX,s.posY),i.fillText(l,s.posX,s.posY)}if("ban"===this.form_&&this.stroke_&&t.strokeWidth){i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth;var c=this.radius_+t.strokeWidth,h=this.radius_*Math.cos(Math.PI/4);i.moveTo(c+h,c-h),i.lineTo(c-h,c+h),i.stroke()}}},{key:"getChecksum",value:function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!==this.checksums_[1]||e!==this.checksums_[2]||this.radius_!==this.checksums_[3]||"".concat(this.form_,"-").concat(this.glyphs_!==this.checksums_[4])){var r="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[r,t,e,this.radius_,"".concat(this.form_,"-").concat(this.glyphs_)]}return this.checksums_[0]}}])&&ax(e.prototype,r),n&&ax(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(hM);hx.defs={fonts:{},glyphs:{}},hx.addDefs({font:"g-cartografia",name:"g-cartografia",prefix:"g-cartografia-"},{"g-cartografia-spinner":{font:"g-cartografia",code:59663,name:"spinner",search:"spinner"},"g-cartografia-posicion3":{font:"g-cartografia",code:59661,name:"posicion3",search:"posicion3"},"g-cartografia-brujula-norte":{font:"g-cartografia",code:59648,name:"brujula-norte",search:"brujula-norte"},"g-cartografia-capas2":{font:"g-cartografia",code:59649,name:"capas2",search:"capas2"},"g-cartografia-comentarios":{font:"g-cartografia",code:59650,name:"comentarios",search:"comentarios"},"g-cartografia-escala3":{font:"g-cartografia",code:59651,name:"escala3",search:"escala3"},"g-cartografia-flecha":{font:"g-cartografia",code:59652,name:"flecha",search:"flecha"},"g-cartografia-flecha-abajo":{font:"g-cartografia",code:59653,name:"flecha-abajo",search:"flecha-abajo"},"g-cartografia-flecha-arriba":{font:"g-cartografia",code:59654,name:"flecha-arriba",search:"flecha-arriba"},"g-cartografia-flecha-derecha":{font:"g-cartografia",code:59655,name:"flecha-derecha",search:"flecha-derecha"},"g-cartografia-flecha-izquierda":{font:"g-cartografia",code:59656,name:"flecha-izquierda",search:"flecha-izquierda"},"g-cartografia-gps2":{font:"g-cartografia",code:59657,name:"gps2",search:"gps2"},"g-cartografia-info":{font:"g-cartografia",code:59658,name:"info",search:"info"},"g-cartografia-papelera":{font:"g-cartografia",code:59659,name:"papelera",search:"papelera"},"g-cartografia-pin":{font:"g-cartografia",code:59660,name:"pin",search:"pin"},"g-cartografia-zoom-extension":{font:"g-cartografia",code:59662,name:"zoom-extension",search:"zoom-extension"}});var fx=hx;function px(t){return(px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==px(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==px(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===px(o)?o:String(o)),n)}var i,o}var yx=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dx(this,t),this.options_=e,this.layer_=null,this.updateFacadeOptions(e)}var e,r,n;return e=t,n=[{key:"getCanvasSize",value:function(){return[100,100]}}],(r=[{key:"updateFacadeOptions",value:function(){}},{key:"applyToLayer",value:function(t){this.layer_=t,t.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"updateCanvas",value:function(e){var r=t.getCanvasSize(),n=kc(e.getContext("2d"),{size:r});n.setStyle(this.olStyleFn_()[0]),this.drawGeometryToCanvas(n)}},{key:"drawGeometryToCanvas",value:function(t){}},{key:"clone",value:function(){return new t(Object.assign({},this.options_))}}])&&mx(e.prototype,r),n&&mx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gx(t){return(gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==gx(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===gx(o)?o:String(o)),n)}var i,o}function bx(t,e){return(bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Sx(t);if(e){var i=Sx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Mx(this,r)}}function Mx(t,e){if(e&&("object"===gx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sx(t){return(Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bx(t,e)}(o,t);var e,r,n,i=wx(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return vx(this,o),(t=i.call(this,e)).updateFacadeOptions(e),t}return e=o,n=[{key:"getValue",value:function(t,e,r){var n=/^\{\{([^}]+)\}\}$/,i=t;if(n.test(t)||KU(t))if(e instanceof dy||e instanceof by){var o=Dq.olFeature2Facade(e,!1);if(n.test(t)){var a=t.replace(n,"$1");i=o.getAttribute(a)}else if(KU(t)){var s;XU(r)||(s=r.getImpl().getMap()),i=t(o,s)}}else i=void 0;return XU(i)&&(i=void 0),i}}],(r=[{key:"olStyleFn",get:function(){return this.olStyleFn_}},{key:"applyToLayer",value:function(t){this.layer_=t;var e=t.getImpl().getOL3Layer();XU(e)||e.setStyle(this.olStyleFn_)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}}])&&_x(e.prototype,r),n&&_x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(yx),Ex=r(2),Ox=r.n(Ex),Px="left",Tx="center",Ix="right",Lx="justify",Rx="top",Cx="middle",Ax="bottom",kx="alphabetic",Nx="hanging",jx="ideographic",Fx=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new dM({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:zM,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();function Dx(t){return(Dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Dx(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Dx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Dx(o)?o:String(o)),n)}var i,o}function zx(t,e){return(zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ux(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Vx(t);if(e){var i=Vx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qx(this,r)}}function qx(t,e){if(e&&("object"===Dx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Vx(t){return(Vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zx(t,e)}(o,t);var e,r,n,i=Ux(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Bx(this,o),(t=i.call(this,e)).textOverflow_=void 0!==e.textOverflow?e.textOverflow:"",t.minWidth_=e.minWidth||0,t}return e=o,(r=[{key:"getTextOverflow",value:function(){return this.textOverflow_}},{key:"getMinWidth",value:function(){return this.minWidth_}}])&&Gx(e.prototype,r),n&&Gx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fx);function Zx(t){return(Zx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Zx(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Zx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Zx(o)?o:String(o)),n)}var i,o}function Xx(t,e){return(Xx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Kx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qx(t);if(e){var i=Qx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Jx(this,r)}}function Jx(t,e){if(e&&("object"===Zx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qx(t){return(Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xx(t,e)}(o,t);var e,r,n,i=Kx(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Wx(this,o),i.call(this,{anchor:t.anchor?t.anchor.slice():void 0,anchorOrigin:t.anchorOrigin,anchorXUnits:t.anchorXUnits,anchorYUnits:t.anchorYUnits,crossOrigin:t.crossOrigin||null,color:t.color&&t.color.slice?t.color.slice():t.color||void 0,src:t.src,offset:t.offset?t.offset.slice():void 0,offsetOrigin:t.offsetOrigin,size:t.size?t.size.slice():void 0,imgSize:t.imgSize,opacity:t.opacity,scale:t.scale,snapToPixel:t.snapToPixel,rotation:t.rotation,rotateWithView:t.rotateWithView})}return e=o,(r=[{key:"clone",value:function(){return new o({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}},{key:"size",set:function(t){this.size_=Array.isArray(t)?t:null}},{key:"anchor",set:function(t){this.anchor_=Array.isArray(t)?t:null}},{key:"origin",set:function(t){this.origin_=Array.isArray(t)?t:null}}])&&Hx(e.prototype,r),n&&Hx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vS);function tE(t){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==tE(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===tE(o)?o:String(o)),n)}var i,o}function rE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nE(t,e){return(nE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=aE(t);if(e){var i=aE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return oE(this,r)}}function oE(t,e){if(e&&("object"===tE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function aE(t){return(aE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nE(t,e)}(o,t);var e,r,n,i=iE(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rE(this,o);var e=t;return t.anchor||(e.anchor=[]),t.offset||(e.offset=[]),i.call(this,{glyph:t.glyph,color:t.color,fontSize:t.fontSize,stroke:t.stroke,fill:t.fill,radius:t.radius,form:t.form,gradient:t.gradient,offsetX:t.offset[0],offsetY:t.offset[1],opacity:t.opacity,rotation:t.rotation,rotateWithView:t.rotateWithView})}return e=o,r&&eE(e.prototype,r),n&&eE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(fx);function uE(t){return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==uE(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==uE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===uE(o)?o:String(o)),n)}var i,o}function hE(t,e){return(hE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=dE(t);if(e){var i=dE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pE(this,r)}}function pE(t,e){if(e&&("object"===uE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dE(t){return(dE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hE(t,e)}(o,t);var e,r,n,i=fE(o);function o(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};lE(this,o);var n=document.createElement("canvas"),a=Number(r.scale)>0?Number(r.scale):1,s=a*mo||mo,u=n.getContext("2d");if(r.image){r.image.load();var l=r.image.getImage();l.width?(n.width=Math.round(l.width*s),n.height=Math.round(l.height*s),u.globalAlpha="number"==typeof r.opacity?r.opacity:1,u.drawImage(l,0,0,l.width,l.height,0,0,n.width,n.height),e=u.createPattern(n,"repeat")):(e=[0,0,0,0],l.onload=function(){n.width=Math.round(l.width*s),n.height=Math.round(l.height*s),u.globalAlpha="number"==typeof r.opacity?r.opacity:1,u.drawImage(l,0,0,l.width,l.height,0,0,n.width,n.height),e=u.createPattern(n,"repeat"),this.color_=e,this.checksum_=void 0,r.layer&&r.layer.refresh()})}else{var c=o.getPattern(r);if(n.width=Math.round(c.width*s),n.height=Math.round(c.height*s),u.beginPath(),r.fill&&(u.fillStyle=Bl(r.fill.getColor()),u.fillRect(0,0,n.width,n.height)),u.scale(s,s),u.lineCap="round",u.lineWidth=c.stroke||1,u.fillStyle=Bl(r.color||"#000"),u.strokeStyle=Bl(r.color||"#000"),c.circles)for(var h=0;h<c.circles.length;h+=1){var f=c.circles[h];u.beginPath(),u.arc(f[0],f[1],f[2],0,2*Math.PI),c.fill&&u.fill(),c.stroke&&u.stroke()}if(c.repeat||(c.repeat=[[0,0]]),c.char&&(u.font=c.font||"".concat(c.width,"px Arial"),u.textAlign="center",u.textBaseline="middle",c.angle?(u.fillText(c.char,c.width/4,c.height/4),u.fillText(c.char,5*c.width/4,5*c.height/4),u.fillText(c.char,c.width/4,5*c.height/4),u.fillText(c.char,5*c.width/4,c.height/4),u.fillText(c.char,3*c.width/4,3*c.height/4),u.fillText(c.char,-c.width/4,-c.height/4),u.fillText(c.char,3*c.width/4,-c.height/4),u.fillText(c.char,-c.width/4,3*c.height/4)):u.fillText(c.char,c.width/2,c.height/2)),c.lines)for(var p=0;p<c.lines.length;p+=1)for(var d=0;d<c.repeat.length;d+=1){var m=c.lines[p];u.beginPath(),u.moveTo(m[0]+c.repeat[d][0],m[1]+c.repeat[d][1]);for(var y=2;y<m.length;y+=2)u.lineTo(m[y]+c.repeat[d][0],m[y+1]+c.repeat[d][1]);c.fill&&u.fill(),c.stroke&&u.stroke(),u.save(),u.strokeStyle="red",u.strokeWidth=.1,u.restore()}if(e=u.createPattern(n,"repeat"),r.offset){var g=r.offset;if("number"==typeof g&&(g=[g,g]),g instanceof Array){var v=Math.round(g[0]*s),_=Math.round(g[1]*s);u.scale(1/s,1/s),u.clearRect(0,0,n.width,n.height),u.translate(v,_),u.fillStyle=e,u.fillRect(-v,-_,n.width,n.height),e=u.createPattern(n,"repeat")}}}return(t=i.call(this,{color:e})).canvas_=n,t.options_=r,t}return e=o,n=[{key:"getPattern",value:function(t){var e=t,r=o.patterns[e.pattern]||o.patterns.dot,n=Math.round(e.spacing)||10;switch(e.pattern){case"dot":case"circle":var i=0===e.size?0:e.size/2||2;e.angle?(n=Math.round(1.4*n),r.width=n,r.height=n,r.circles=[[n/4,n/4,i],[3*n/4,3*n/4,i]],"circle"===e.pattern&&(r.circles=r.circles.concat([[n/4+n,n/4,i],[n/4,n/4+n,i],[3*n/4-n,3*n/4,i],[3*n/4,3*n/4-n,i],[n/4+n,n/4+n,i],[3*n/4-n,3*n/4-n,i]]))):(r.width=n,r.height=n,r.circles=[[n/2,n/2,i]],"circle"===e.pattern&&(r.circles=r.circles.concat([[n/2+n,n/2,i],[n/2-n,n/2,i],[n/2,n/2+n,i],[n/2,n/2-n,i],[n/2+n,n/2+n,i],[n/2+n,n/2-n,i],[n/2-n,n/2+n,i],[n/2-n,n/2-n,i]])));break;case"tile":case"square":i=0===e.size?0:e.size/2||2,e.angle?(r.width=n,r.height=n,r.lines=[[n/2-i,n/2,n/2,n/2-i,n/2+i,n/2,n/2,n/2+i,n/2-i,n/2]]):(r.width=n,r.height=n,r.lines=[[n/2-i,n/2-i,n/2+i,n/2-i,n/2+i,n/2+i,n/2-i,n/2+i,n/2-i,n/2-i]]),"square"===e.pattern&&(r.repeat=[[0,0],[0,n],[n,0],[0,-n],[-n,0],[-n,-n],[n,n],[-n,n],[n,-n]]);break;case"cross":case"hatch":"cross"===e.pattern&&e.angle&&(e.angle=45);var a=Math.round(((e.angle||0)-90)%360);a>180&&(a-=360),a*=Math.PI/180;var s=Math.cos(a),u=Math.sin(a);if(Math.abs(u)<1e-4)r.width=n,r.height=n,r.lines=[[0,.5,n,.5]],r.repeat=[[0,0],[0,n]];else if(Math.abs(s)<1e-4)r.height=n,r.width=n,r.lines=[[.5,0,.5,n]],r.repeat=[[0,0],[n,0]],"cross"===e.pattern&&(r.lines.push([0,.5,n,.5]),r.repeat.push([0,n]));else{r.width=Math.round(Math.abs(n/u))||1,r.height=Math.round(Math.abs(n/s))||1;var l=r.width,c=r.height;"cross"===e.pattern?(r.lines=[[-l,-c,2*l,2*c],[2*l,-c,-l,2*c]],r.repeat=[[0,0]]):s*u>0?(r.lines=[[-l,-c,2*l,2*c]],r.repeat=[[0,0],[l,0],[0,c]]):(r.lines=[[2*l,-c,-l,2*c]],r.repeat=[[0,0],[-l,0],[0,c]])}r.stroke=0===e.size?0:e.size||4}return r}},{key:"addPattern",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.patterns[t||e.char]={width:e.width||e.size||10,height:e.height||e.size||10,font:e.font,char:e.char,circles:e.circles,lines:e.lines,repeat:e.repeat,stroke:e.stroke,angle:e.angle,fill:e.fill}}}],(r=[{key:"clone",value:function(){return new o(this.options_)}},{key:"getImage",value:function(){return this.canvas_}}])&&cE(e.prototype,r),n&&cE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(dM);mE.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:30,height:20,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],stroke:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}};var yE=mE;function gE(t){return(gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==gE(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===gE(o)?o:String(o)),n)}var i,o}function bE(t,e){return(bE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=SE(t);if(e){var i=SE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ME(this,r)}}function ME(t,e){if(e&&("object"===gE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function SE(t){return(SE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bE(t,e)}(o,t);var e,r,n,i=wE(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return vE(this,o),i.call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager})}return e=o,(r=[{key:"clone",value:function(){var t=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t}}])&&_E(e.prototype,r),n&&_E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(pM);function EE(t){return(EE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==EE(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==EE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===EE(o)?o:String(o)),n)}var i,o}function TE(){return(TE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=IE(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function IE(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kE(t)););return t}function LE(t,e){return(LE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function RE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=kE(t);if(e){var i=kE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return CE(this,r)}}function CE(t,e){if(e&&("object"===EE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return AE(t)}function AE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kE(t){return(kE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var NE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LE(t,e)}(o,t);var e,r,n,i=RE(o);function o(){var t,e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};OE(this,o),t=i.call(this,n);var a=document.createElement("canvas");t.canvas_=document.createElement("canvas");var s=Number(n.scale)>0?Number(n.scale):1,u=s*mo||mo,l=a.getContext("2d");if(n.image){n.image.load();var c=n.image.getImage();if(c.width)a.width=Math.round(c.width*u),a.height=Math.round(c.height*u),l.globalAlpha="number"==typeof n.opacity?n.opacity:1,l.drawImage(c,0,0,c.width,c.height,0,0,a.width,a.height),e=l.createPattern(a,"repeat");else{var h=AE(t);e=[0,0,0,0],c.onload=function(){a.width=Math.round(c.width*u),a.height=Math.round(c.height*u),l.globalAlpha="number"==typeof n.opacity?n.opacity:1,l.drawImage(c,0,0,c.width,c.height,0,0,a.width,a.height),e=l.createPattern(a,"repeat"),h.setColor(e),n.layer&&n.layer.refresh()}}}else{var f=t.getPattern_(n);if(a.width=Math.round(f.width*u),a.height=Math.round(f.height*u),l.beginPath(),n.fill&&(l.fillStyle=Bl(n.fill.getColor()),l.fillRect(0,0,a.width,a.height)),l.scale(u,u),l.lineCap="round",l.lineWidth=f.stroke||1,l.fillStyle=Bl(n.color||"#000"),l.strokeStyle=Bl(n.color||"#000"),f.circles)for(r=0;r<f.circles.length;r+=1){var p=f.circles[r];l.beginPath(),l.arc(p[0],p[1],p[2],0,2*Math.PI),f.fill&&l.fill(),f.stroke&&l.stroke()}if(f.repeat||(f.repeat=[[0,0]]),f.char&&(l.font="".concat(f.font||f.width," px Arial"),l.textAlign="center",l.textBaseline="middle",f.angle?(l.fillText(f.char,f.width/4,f.height/4),l.fillText(f.char,5*f.width/4,5*f.height/4),l.fillText(f.char,f.width/4,5*f.height/4),l.fillText(f.char,5*f.width/4,f.height/4),l.fillText(f.char,3*f.width/4,3*f.height/4),l.fillText(f.char,-f.width/4,-f.height/4),l.fillText(f.char,3*f.width/4,-f.height/4),l.fillText(f.char,-f.width/4,3*f.height/4)):l.fillText(f.char,f.width/2,f.height/2)),f.lines)for(r=0;r<f.lines.length;r+=1)for(var d=0;d<f.repeat.length;d+=1){var m=f.lines[r];l.beginPath(),l.moveTo(m[0]+f.repeat[d][0],m[1]+f.repeat[d][1]);for(var y=2;y<m.length;y+=2)l.lineTo(m[y]+f.repeat[d][0],m[y+1]+f.repeat[d][1]);f.fill&&l.fill(),f.stroke&&l.stroke(),l.save(),l.strokeStyle="red",l.strokeWidth=.1,l.restore()}if(e=l.createPattern(a,"repeat"),n.offset){var g=n.offset;if("number"==typeof g&&(g=[g,g]),g instanceof Array){var v=Math.round(g[0]*u),_=Math.round(g[1]*u);l.scale(1/u,1/u),l.clearRect(0,0,a.width,a.height),l.translate(v,_),l.fillStyle=e,l.fillRect(-v,-_,a.width,a.height),e=l.createPattern(a,"repeat")}}}return t.setColor(e),t}return e=o,(r=[{key:"clone",value:function(){var t=TE(kE(o.prototype),"clone",this).call(this);return t.canvas_=this.canvas_,t}},{key:"getImage",value:function(){return this.canvas_}},{key:"getPattern_",value:function(t){var e,r=yE.patterns[t.pattern]||yE.patterns.dot,n=Math.round(t.spacing)||10;switch(t.pattern){case"dot":case"circle":e=0===t.size?0:t.size/2||2,t.angle?(n=Math.round(1.4*n),r.width=Math.round(1.4*n),r.height=Math.round(1.4*n),r.circles=[[n/4,n/4,e],[3*n/4,3*n/4,e]],"circle"===t.pattern&&(r.circles=r.circles.concat([[n/4+n,n/4,e],[n/4,n/4+n,e],[3*n/4-n,3*n/4,e],[3*n/4,3*n/4-n,e],[n/4+n,n/4+n,e],[3*n/4-n,3*n/4-n,e]]))):(r.width=n,r.height=n,r.circles=[[n/2,n/2,e]],"circle"===t.pattern&&(r.circles=r.circles.concat([[n/2+n,n/2,e],[n/2-n,n/2,e],[n/2,n/2+n,e],[n/2,n/2-n,e],[n/2+n,n/2+n,e],[n/2+n,n/2-n,e],[n/2-n,n/2+n,e],[n/2-n,n/2-n,e]])));break;case"tile":case"square":e=0===t.size?0:t.size/2||2,t.angle?(r.width=n,r.height=n,r.lines=[[n/2-e,n/2,n/2,n/2-e,n/2+e,n/2,n/2,n/2+e,n/2-e,n/2]]):(r.width=n,r.height=n,r.lines=[[n/2-e,n/2-e,n/2+e,n/2-e,n/2+e,n/2+e,n/2-e,n/2+e,n/2-e,n/2-e]]),"square"===t.pattern&&(r.repeat=[[0,0],[0,n],[n,0],[0,-n],[-n,0],[-n,-n],[n,n],[-n,n],[n,-n]]);break;case"cross":t.angle&&(t.angle=45);case"hatch":var i=Math.round(((t.angle||0)-90)%360);i>180&&(i-=360),i*=Math.PI/180;var o=Math.cos(i),a=Math.sin(i);if(Math.abs(a)<1e-4)r.width=n,r.height=n,r.lines=[[0,.5,n,.5]],r.repeat=[[0,0],[0,n]];else if(Math.abs(o)<1e-4)r.width=n,r.height=n,r.lines=[[.5,0,.5,n]],r.repeat=[[0,0],[n,0]],"cross"===t.pattern&&(r.lines.push([0,.5,n,.5]),r.repeat.push([0,n]));else{var s=Math.round(Math.abs(n/a))||1;r.width=Math.round(Math.abs(n/a))||1;var u=Math.round(Math.abs(n/o))||1;r.height=Math.round(Math.abs(n/o))||1,"cross"===t.pattern?(r.lines=[[-s,-u,2*s,2*u],[2*s,-u,-s,2*u]],r.repeat=[[0,0]]):o*a>0?(r.lines=[[-s,-u,2*s,2*u]],r.repeat=[[0,0],[s,0],[0,u]]):(r.lines=[[2*s,-u,-s,2*u]],r.repeat=[[0,0],[-s,0],[0,u]])}r.stroke=0===t.size?0:t.size||4}return r}}])&&PE(e.prototype,r),n&&PE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(mM),jE=function(t,e,r){var n;if(!XU(t.fill)){var i=xx.getValue(t.fill.color,e,r),o=xx.getValue(t.fill.opacity,e,r);o||0===o||(o=1),XU(i)||(n=new dM({color:Ox()(i).alpha(o).css()}))}return n},FE=function(t,e,r){var n;if(!XU(t.stroke)){var i=xx.getValue(t.stroke.color,e,r),o=xx.getValue(t.stroke.opacity,e,r);if(o||0===o||(o=1),!XU(i)){var a=t.stroke.linedashoffset;n=new mM({color:Ox()(i).alpha(o).css(),width:xx.getValue(t.stroke.width,e,r),lineDash:xx.getValue(t.stroke.linedash,e,r),lineDashOffset:xx.getValue(a,e,r),lineCap:xx.getValue(t.stroke.linecap,e,r),lineJoin:xx.getValue(t.stroke.linejoin,e,r),miterLimit:xx.getValue(t.stroke.miterlimit,e,r)})}}return n},DE=function(t,e,r){var n="rgba(0,0,0,1)";XU(t.stroke.pattern.color)||(n=xx.getValue(t.stroke.pattern.color,e,r));var i=new dM({color:t.stroke.color?t.stroke.color:"rgba(0,0,0,0)",opacity:t.stroke.opacity?t.stroke.opacity:1});return new NE({pattern:(xx.getValue(t.stroke.pattern.name,e,r)||"").toLowerCase(),color:n,width:xx.getValue(t.stroke.width,e,r),size:xx.getValue(t.stroke.pattern.size,e,r),spacing:xx.getValue(t.stroke.pattern.spacing,e,r),image:"Image"===xx.getValue(t.stroke.pattern.name,e,r)?new vS({src:xx.getValue(t.stroke.pattern.src,e,r),crossOrigin:"anonymous"}):void 0,angle:xx.getValue(t.stroke.pattern.rotation,e,r),scale:xx.getValue(t.stroke.pattern.scale,e,r),offset:xx.getValue(t.stroke.pattern.offset,e,r),fill:i,layer:r})},BE=function(t,e,r){var n;if(t.label){var i=xx.getValue(t.label.text,e,r),o=xx.getValue(t.label.align,e,r),u=xx.getValue(t.label.baseline,e,r);if(n=new Fx({font:xx.getValue(t.label.font,e,r),rotateWithView:xx.getValue(t.label.rotate,e,r),scale:xx.getValue(t.label.scale,e,r),offsetX:xx.getValue(t.label.offset?t.label.offset[0]:void 0,e,r),offsetY:xx.getValue(t.label.offset?t.label.offset[1]:void 0,e,r),fill:new dM({color:xx.getValue(t.label.color||"#000",e,r)}),textAlign:Object.values(a).includes(o)?o:"center",textBaseline:Object.values(s).includes(u)?u:"top",text:void 0===i?void 0:String(i),rotation:xx.getValue(t.label.rotation,e,r)}),!XU(t.label.stroke)){var l=t.label.stroke,c=l.miterlimit,h=l.linedashoffset;n.setStroke(new mM({color:xx.getValue(t.label.stroke.color,e,r),width:xx.getValue(t.label.stroke.width,e,r),lineCap:xx.getValue(t.label.stroke.linecap,e,r),lineJoin:xx.getValue(t.label.stroke.linejoin,e,r),lineDash:xx.getValue(t.label.stroke.linedash,e,r),lineDashOffset:xx.getValue(h,e,r),miterLimit:xx.getValue(c,e,r)}))}}return n},GE={},zE=function(t,e,r){var n=xx.getValue(t.icon.anchor,e,r),i=xx.getValue(t.icon.anchorxunits,e,r),o=xx.getValue(t.icon.anchoryunits,e,r),a=xx.getValue(t.icon.src,e,r),s=xx.getValue(t.icon.opacity,e,r),u=xx.getValue(t.icon.scale,e,r),l=xx.getValue(t.icon.rotation,e,r),c=xx.getValue(t.icon.rotate,e,r),h=xx.getValue(t.icon.snaptopixel,e,r),f=xx.getValue(t.icon.offsetorigin,e,r),p=xx.getValue(t.icon.offset,e,r),d=xx.getValue(t.icon.crossorigin,e,r),m=xx.getValue(t.icon.anchororigin,e,r),y=a+n+i+o+s+u+l+c+h+f+p+d+m+m+xx.getValue(t.icon.size,e,r),g=GE[y];return g||(g=new $x({anchor:xx.getValue(t.icon.anchor,e,r),anchorXUnits:xx.getValue(t.icon.anchorxunits,e,r),anchorYUnits:xx.getValue(t.icon.anchoryunits,e,r),src:xx.getValue(t.icon.src,e,r),opacity:xx.getValue(t.icon.opacity,e,r),scale:xx.getValue(t.icon.scale,e,r),rotation:xx.getValue(t.icon.rotation,e,r),rotateWithView:xx.getValue(t.icon.rotate,e,r),snapToPixel:xx.getValue(t.icon.snaptopixel,e,r),offsetOrigin:xx.getValue(t.icon.offsetorigin,e,r),offset:xx.getValue(t.icon.offset,e,r),crossOrigin:xx.getValue(t.icon.crossorigin,e,r),anchorOrigin:xx.getValue(t.icon.anchororigin,e,r),size:xx.getValue(t.icon.size,e,r)}),GE[y]=g),g},UE=function(t,e,r){return new sE({form:XU(xx.getValue(t.icon.form,e,r))?"":xx.getValue(t.icon.form,e,r).toLowerCase(),gradient:xx.getValue(t.icon.gradient,e,r),glyph:xx.getValue(t.icon.class,e,r),fontSize:xx.getValue(t.icon.fontsize,e,r),radius:xx.getValue(t.icon.radius,e,r),rotation:xx.getValue(t.icon.rotation,e,r),rotateWithView:xx.getValue(t.icon.rotate,e,r),offsetX:xx.getValue(t.icon.offset?t.icon.offset[0]:void 0,e,r),offsetY:xx.getValue(t.icon.offset?t.icon.offset[1]:void 0,e,r),fill:new dM({color:xx.getValue(void 0!==t.icon.fill?t.icon.fill:"#FFFFFF",e,r)}),stroke:t.icon.color?new mM({color:xx.getValue(t.icon.color,e,r),width:1}):void 0,anchor:xx.getValue(t.icon.anchor,e,r),anchorXUnits:xx.getValue(t.icon.anchorxunits,e,r),anchorYUnits:xx.getValue(t.icon.anchoryunits,e,r),src:xx.getValue(t.icon.src,e,r),opacity:xx.getValue(t.icon.opacity,e,r),scale:xx.getValue(t.icon.scale,e,r),snapToPixel:xx.getValue(t.icon.snaptopixel,e,r),offsetOrigin:xx.getValue(t.icon.offsetorigin,e,r),offset:xx.getValue(t.icon.offset,e,r),crossOrigin:xx.getValue(t.icon.crossorigin,e,r),anchorOrigin:xx.getValue(t.icon.anchororigin,e,r),size:xx.getValue(t.icon.size,e,r)})},qE=function(t,e,r,n){var i="rgba(0,0,0,1)";if(!XU(t.fill.pattern.color)){var o=xx.getValue(t.fill.pattern.opacity,e,r)||1;o||0===o||(o=1),i=Ox()(t.fill.pattern.color).alpha(o).css()}return"LineString"===e.getGeometry().getType()||"MultiLineString"===e.getGeometry().getType()?new NE({pattern:(xx.getValue(t.fill.pattern.name,e,r)||"").toLowerCase(),color:i,width:xx.getValue(t.fill.width,e,r),size:xx.getValue(t.fill.pattern.size,e,r),spacing:xx.getValue(t.fill.pattern.spacing,e,r),image:"Image"===xx.getValue(t.fill.pattern.name,e,r)?new vS({src:xx.getValue(t.fill.pattern.src,e,r),crossOrigin:"anonymous"}):void 0,angle:xx.getValue(t.fill.pattern.rotation,e,r),scale:xx.getValue(t.fill.pattern.scale,e,r),offset:xx.getValue(t.fill.pattern.offset,e,r),fill:n,layer:r}):new yE({pattern:(xx.getValue(t.fill.pattern.name,e,r)||"").toLowerCase(),color:i,size:xx.getValue(t.fill.pattern.size,e,r),spacing:xx.getValue(t.fill.pattern.spacing,e,r),image:"IMAGE"===xx.getValue(t.fill.pattern.name,e,r)?new vS({src:xx.getValue(t.fill.pattern.src,e,r)}):void 0,angle:xx.getValue(t.fill.pattern.rotation,e,r),scale:xx.getValue(t.fill.pattern.scale,e,r),offset:xx.getValue(t.fill.pattern.offset,e,r),fill:n,layer:r})},VE=function(t,e,r){var n;if(!XU(t.fill)){var i=xx.getValue(t.fill.color,e,r),o=xx.getValue(t.fill.opacity,e,r);o||0===o||(o=1);var a=xx.getValue(t.fill.width,e,r);XU(i)||(n=new mM({color:Ox()(i).alpha(o).css(),width:a}))}return n},YE=function(t,e,r){var n,i=t.label;if(!XU(i)){var o={text:void 0===xx.getValue(i.text,e)?void 0:String(xx.getValue(i.text,e)),font:xx.getValue(i.font,e),fill:new dM({color:xx.getValue(i.color||"#000",e)}),textBaseline:(xx.getValue(i.baseline,e)||"").toLowerCase(),textAlign:xx.getValue(i.align,e),scale:xx.getValue(i.scale,e),rotateWithView:xx.getValue(i.rotate,e)||!1,overflow:xx.getValue(i.textoverflow,e)||!1,minWidth:xx.getValue(i.minwidth,e)||0,geometry:xx.getValue(i.geometry,e),offsetX:xx.getValue(t.label.offset?t.label.offset[0]:void 0,e),offsetY:xx.getValue(t.label.offset?t.label.offset[1]:void 0,e)};n=new Yx(o),XU(i.stroke)||n.setStroke(new mM({color:xx.getValue(i.stroke.color,e),width:xx.getValue(i.stroke.width,e),lineCap:xx.getValue(i.stroke.linecap,e),lineJoin:xx.getValue(i.stroke.linejoin,e),lineDash:xx.getValue(i.stroke.linedash,e),lineDashOffset:xx.getValue(i.stroke.linedashoffset,e),miterLimit:xx.getValue(i.stroke.miterlimit,e)}))}return n},ZE=function(t,e,r){var n=t||{},i=jE(n,e,r),o=FE(n,e,r),a=new xE({fill:i,stroke:o,radius:xx.getValue(n.radius,e,r),snapToPixel:xx.getValue(n.snapToPixel,e,r)}),s=new MM({image:a}),u=new MM;if(!XU(n.icon)){var l,c=xx.getValue(n.icon.src,e,r);XU(c)?XU(n.icon.form)||(l=UE(n,e,r),u.setImage(l)):(l=zE(n,e,r),u.setImage(l))}var h=BE(n,e,r);return XU(n.label)||YU(h.getText())||s.setText(h),[s,u]},WE=function(t,e,r){var n=t||{},i=FE(n,e,r),o=VE(n,e,r),a=YE(n,e);n.fill&&!XU(n.fill.pattern)&&(o=qE(n,e,r,o));var s=new MM,u=new MM;XU(n.label)||(!0===xx.getValue(n.label.path,e)&&(s.textPath=a,!XU(n.label.smooth)&&!0===n.label.smooth&&KU(e.getGeometry)&&s.setGeometry(e.getGeometry().cspline()),a.setPlacement("line")),s.setText(a));return s.setStroke(i),u.setStroke(o),[s,u]},HE=function(t,e,r){var n=t||{},i=new MM,o=FE(n,e,r);n.stroke&&!XU(n.stroke.pattern)&&(o=DE(n,e,r));var a=jE(n,e,r),s=BE(n,e,r);return n.fill&&!XU(n.fill.pattern)&&(a=qE(n,e,r,a)),i.setFill(a),i.setStroke(o),i.setText(s),[i]};function XE(t){return(XE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==XE(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==XE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===XE(o)?o:String(o)),n)}var i,o}function QE(t,e){return(QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=eO(t);if(e){var i=eO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return tO(this,r)}}function tO(t,e){if(e&&("object"===XE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function eO(t){return(eO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rO={Point:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return ZE(e[0].point,e[1],e[2])},LineString:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return WE(e[0].line,e[1],e[2])},Polygon:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return HE(e[0].polygon,e[1],e[2])},MultiPoint:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return ZE(e[0].point,e[1],e[2])},MultiLineString:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return WE(e[0].line,e[1],e[2])},MultiPolygon:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return HE(e[0].polygon,e[1],e[2])}},nO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QE(t,e)}(o,t);var e,r,n,i=$E(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return KE(this,o),(t=i.call(this,e)).styles_={},t}return e=o,(r=[{key:"toImage",value:function(){var t=this,e=null,r=null,n=null,i=Lq(),o=[];YU(this.options_.point)||(e=function(e){return new Promise((function(r,n){var i=new Image;if(i.onload=function(){return r(i)},i.onerror=n,i.width=30,i.height=30,!0===Tq(t.options_.point))i.src=e;else{var o=(0,rO.Point)(t.options_,t,t.layer_);o[0].getImage().setRadius(5);var a=o[0].getImage().getImage(1).toDataURL();i.src=a}}))},o.push(e(i))),YU(this.options_.polygon)||(r=function(e){return new Promise((function(r,n){var i=new Image;if(i.onload=function(){return r(i)},i.onerror=n,!0===Tq(t.options_.polygon))i.src=e,i.width=30,i.height=30;else{var o=(0,rO.Polygon)(t.options_,t,t.layer_),a=document.createElement("canvas");a.width=30,a.height=30;var s=kc(a.getContext("2d"));s.setStyle(o[0],0,0);var u=[25,15],l=Math.floor(u[0]),c=Math.floor(u[1]),h=u[0]-l,f=u[1]-c;s.drawGeometry(new Ls([[[h+3,f+3],[l-3,f+3],[l-3,c-3],[h+3,c-3],[h+3,f+3]]])),i.src=a.toDataURL()}}))},o.push(r(i))),YU(this.options_.line)||(n=function(e){return new Promise((function(r,n){var i=new Image;if(i.onload=function(){return r(i)},i.onerror=n,!0===Tq(t.options_.line))i.src=e,i.width=30,i.height=30;else{var o=(0,rO.LineString)(t.options_,t,t.layer_),a=document.createElement("canvas");a.width=30,a.height=30;var s=kc(a.getContext("2d"));s.setStyle(o[0],0,0);var u=YU(o[0].getStroke())?1.5:o[0].getStroke().getWidth();s.drawGeometry(new Sy([[0+u/2,0+u/2],[25/3,7.5-u/2],[50/3,0+u/2],[25-u/2,7.5-u/2]])),i.src=a.toDataURL()}}))},o.push(n(i)));var a=document.createElement("canvas");a.width=200,a.height=50;var s=a.getContext("2d"),u=[0,60,120],l=0;return Promise.all(o).then((function(t){return t.forEach((function(t){s.drawImage(t,u[l],0),l+=1})),a.toDataURL()}))}},{key:"updateFacadeOptions",value:function(t){var e=this;this.olStyleFn_=function(r){var n=JSON.stringify(r.getProperties()),i=[];e.styles_=[];var o=r;if(o instanceof dy||o instanceof by){var a=o.getGeometry().getType(),s=rO[a];KU(s)&&(i=s(t,o,e.layer_),e.styles_[n]=i)}else o=e;return i}}},{key:"drawGeometryToCanvas",value:function(t){}},{key:"updateCanvas",value:function(t){}},{key:"getCanvasSize",value:function(){return 0}},{key:"getRadius_",value:function(t){return t instanceof vS?25:t instanceof fx?t.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&JE(e.prototype,r),n&&JE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(xx);function iO(t){return(iO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==iO(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==iO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===iO(o)?o:String(o)),n)}var i,o}function aO(t,e){return(aO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=lO(t);if(e){var i=lO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uO(this,r)}}function uO(t,e){if(e&&("object"===iO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function lO(t){return(lO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aO(t,e)}(o,t);var e,r,n,i=sO(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).feature_=null,r}return e=o,(r=[{key:"applyToFeature",value:function(t){var e=this;this.feature_=t;var r=t.getStyle().getOptions();r.point&&(r=r.point),r.icon&&r.icon.src&&"string"==typeof r.icon.src&&r.icon.src.endsWith(".svg")&&(r.icon.fill||r.icon.stroke)?Nq(r.icon.src,r).then((function(t){r.icon.src=t,e.applyToFeature(e.feature_)})):this.getImpl().applyToFeature(t)}}])&&oO(e.prototype,r),n&&oO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(uM);function hO(t){return(hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fO(t){return function(t){if(Array.isArray(t))return pO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return pO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pO(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==hO(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===hO(o)?o:String(o)),n)}var i,o}function yO(){return(yO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=gO(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function gO(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wO(t)););return t}function vO(t,e){return(vO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wO(t);if(e){var i=wO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bO(this,r)}}function bO(t,e){if(e&&("object"===hO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wO(t){return(wO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vO(t,e)}(o,t);var e,r,n,i=_O(o);function o(){return dO(this,o),i.apply(this,arguments)}return e=o,n=[{key:"deserialize",value:function(t,e){var r=Pq(t),n=r.map((function(t,e){return"arg".concat(e)})),i=n.reduce((function(t,e){return t.concat(", ").concat(e)}));return new Function(n,"return new ".concat(e,"(").concat(i,")")).apply(void 0,fO(r))}}],(r=[{key:"apply",value:function(t,e,r){var n=this;this.layer_=t,this.getImpl().applyToLayer(t),!0===e&&(r?t.getFeatures().forEach((function(t){t.style=null})):t.getFeatures().forEach((function(t){t.setStyle(n.clone())}))),this.updateCanvas()}},{key:"toImage",value:function(){var t=yO(wO(o.prototype),"toImage",this).call(this),e={fill:this.options_.fill,stroke:this.options_.stroke};return!0===Tq(e)&&(t=Lq(this.canvas_)),t}},{key:"ORDER",get:function(){return 1}}])&&mO(e.prototype,r),n&&mO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(cO);function SO(t){return(SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function EO(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xO(Object(r),!0).forEach((function(e){OO(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xO(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function OO(t,e,r){return(e=TO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TO(n.key),n)}}function TO(t){var e=function(t,e){if("object"!==SO(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==SO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===SO(e)?e:String(e)}function IO(t,e){return(IO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=CO(t);if(e){var i=CO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return RO(this,r)}}function RO(t,e){if(e&&("object"===SO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function CO(t){return(CO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IO(t,e)}(o,t);var e,r,n,i=LO(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;e=XU(e)?o.DEFAULT_NULL:Mq(e,o.DEFAULT),e=Mq({},e);var r=new nO(e);return i.call(this,e,r)}return e=o,(r=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Generic'))"}}])&&PO(e.prototype,r),n&&PO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(MO);AO.DEFAULT={point:{radius:5}},AO.PARAMS_DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},AO.DEFAULT_NULL={point:EO(EO({},AO.PARAMS_DEFAULT_NULL),{},{radius:5}),line:EO({},AO.PARAMS_DEFAULT_NULL),polygon:EO({},AO.PARAMS_DEFAULT_NULL)};var kO=AO;function NO(t){return(NO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function FO(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jO(Object(r),!0).forEach((function(e){DO(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function DO(t,e,r){return(e=zO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zO(n.key),n)}}function zO(t){var e=function(t,e){if("object"!==NO(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==NO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===NO(e)?e:String(e)}function UO(t,e){return(UO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=YO(t);if(e){var i=YO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return VO(this,r)}}function VO(t,e){if(e&&("object"===NO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function YO(t){return(YO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ZO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UO(t,e)}(o,t);var e,r,n,i=qO(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;BO(this,o);var s=a||new YS(r,n);return t=i.call(this,e,s),YU(YS)&&Af(Hf("exception").vectorlayer_method),t.style_=null,t.filter_=null,t.minZoom=e.minZoom,t.maxZoom=e.maxZoom,t.setStyle(r.style),s.on(Uf,(function(e){return t.fire(Uf,[e])})),t}return e=o,(r=[{key:"type",get:function(){return Tp},set:function(t){YU(t)||XU(t)||t===Tp||Af("El tipo de capa debe ser '".concat(Tp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"getFilter",value:function(){return this.filter_}},{key:"removeFilter",value:function(){this.setFilter(null)}},{key:"addFeatures",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t;XU(r)||(HU(r)||(r=[r]),this.getImpl().addFeatures(r,e))}},{key:"getFeatures",value:function(t){var e=t;return XU(this.getFilter())&&(e=!0),this.getImpl().getFeatures(e,this.filter_)}},{key:"getFeatureById",value:function(t){var e=null;return XU(t)?QS(Hf("dialog").id_feature):e=this.getImpl().getFeatureById(t),e}},{key:"removeFeatures",value:function(t){var e=t;HU(e)||(e=[e]),this.getImpl().removeFeatures(e)}},{key:"clear",value:function(){this.removeFilter(),this.removeFeatures(this.getFeatures(!0))}},{key:"refresh",value:function(){this.getImpl().refresh(!0),this.redraw()}},{key:"redraw",value:function(){this.getImpl().redraw()}},{key:"getFeaturesExtent",value:function(t){return this.getImpl().getFeaturesExtent(!0,this.filter_)}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"setStyle",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;this.getImpl().isLoaded()?(XU(this.getStyle())&&this.applyStyle_(n,r),XU(t)||this.applyStyle_(t,r)):this.once(Uf,(function(){XU(e.getStyle())&&e.applyStyle_(n,r),XU(t)||e.applyStyle_(t,r)}))}},{key:"applyStyle_",value:function(t,e){var r=this,n=t;if(QU(n)?n=uM.deserialize(n):n instanceof uM||(n=new kO(n)),n instanceof uM){var i=n.getOptions();i.point&&(i=i.point),i.icon&&i.icon.src&&"string"==typeof i.icon.src&&i.icon.src.endsWith(".svg")&&(i.icon.fill||i.icon.stroke)?Nq(i.icon.src,i).then((function(n){i.icon.src=n,r.applyStyle_(t,e)})):n instanceof uM&&(!XU(this.style_)&&this.style_ instanceof uM&&this.style_.unapply(this),n.apply(this,e),this.style_=n,this.fire("change:style",[n,this]))}this.fire("change:style",[n,this])}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null),this.getFeatures().forEach((function(t){return t.clearStyle()}))}},{key:"getLegendURL",value:function(){var t=this.getImpl().getLegendURL();return-1!==t.indexOf(Fm.LEGEND_DEFAULT)&&-1===t.indexOf(Fm.LEGEND_ERROR)&&this.style_ instanceof uM&&(t=this.style_.toImage()),t}},{key:"getGeometryType",value:function(){var t=null;if(!XU(this.getFeatures())){var e=this.getFeatures()[0];XU(e)||XU(e.getGeometry())||(t=e.getGeometry().type)}return t}},{key:"getMaxExtent",value:function(){return this.getFeaturesExtent()}},{key:"calculateMaxExtent",value:function(){return this.getImpl().getFeaturesExtentPromise(!0,this.filter_)}},{key:"setFilter",value:function(t){if(XU(t)||t instanceof nx){this.filter_=t;var e=this.style_;e instanceof aT&&e.getImpl().deactivateChangeEvent(),this.redraw(),e instanceof aT&&(e.getImpl().activateChangeEvent(),e.refresh())}else QS(Hf("dialog").vector_filter)}},{key:"toGeoJSON",value:function(){var t=this.map_.getProjection().code,e=this.getFeatures().map((function(t){return t.getGeoJSON()}));return{type:"FeatureCollection",features:Yy(e,t)}}}])&&GO(e.prototype,r),n&&GO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fm);ZO.DEFAULT_PARAMS={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},ZO.DEFAULT_OPTIONS_STYLE={point:FO(FO({},ZO.DEFAULT_PARAMS),{},{radius:5}),line:FO({},ZO.DEFAULT_PARAMS),polygon:FO({},ZO.DEFAULT_PARAMS)};var WO=ZO,HO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),XO=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return r.resolution=void 0,r.distance=void 0!==e.distance?e.distance:20,r.features=[],r.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Or(e.getType()==mr.POINT,10),e},r.boundRefresh_=r.refresh.bind(r),r.setSource(e.source||null),r}return HO(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(Ai,this.boundRefresh_),this.source=t,t&&t.addEventListener(Ai,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,o=r.length;i<o;i++){var a=r[i];if(!(Mr(a)in n)){var s=this.geometryFunction(a);if(s){Hr(s.getCoordinates(),t),Dr(t,e,t);var u=this.source.getFeaturesInExtent(t);u=u.filter((function(t){var e=Mr(t);return!(e in n)&&(n[e]=!0,!0)})),this.features.push(this.createCluster(u))}}}},e.prototype.createCluster=function(t){for(var e=[0,0],r=t.length-1;r>=0;--r){var n=this.geometryFunction(t[r]);n?ua(e,n.getCoordinates()):t.splice(r,1)}da(e,1/t.length);var i=new dy(new ds(e));return i.set("features",t),i},e}(jS);function KO(t){return(KO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==KO(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==KO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===KO(o)?o:String(o)),n)}var i,o}function $O(){return($O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=tP(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function tP(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oP(t)););return t}function eP(t,e){return(eP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=oP(t);if(e){var i=oP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return nP(this,r)}}function nP(t,e){if(e&&("object"===KO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return iP(t)}function iP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oP(t){return(oP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eP(t,e)}(o,t);var e,r,n,i=rP(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JO(this,o),(t=i.call(this,e)).styleCluster_=e.style,t.oldCluster_=new jS,t.clusters_=[],t.animation_={start:!1},t.set("animationDuration","number"==typeof e.animationDuration?e.animationDuration:700),t.set("animationMethod",e.animationMethod||wa),t.getSource().on("change",t.saveCluster_.bind(iP(t))),t.on("prerender",t.animate.bind(iP(t))),t.on("postrender",t.postanimate.bind(iP(t))),t.setStyle(e.style),t}return e=o,n=[{key:"getClusterForFeature",value:function(t,e){return e.find((function(e){var r,n=e.get("features");return XU(n)||(r=n.find((function(e){return e===t}))),r}))}}],(r=[{key:"saveCluster_",value:function(){if(this.oldCluster_.clear(),this.get("animationDuration")){var t=this.getSource().getFeatures();t.length&&t[0].get("features")&&(this.oldCluster_.addFeatures(this.clusters_),this.clusters_=t.slice(0),this.sourceChanged=!0)}}},{key:"animate",value:function(t){var e=this,r=t,n=this.get("animationDuration");if(n){if(this.animation_.resolution!==r.frameState.viewState.resolution&&this.sourceChanged){var i=r.frameState.viewState.resolution,o=r.frameState.extent;this.animation_.reverse=this.animation_.resolution>=i,this.prepareAnimation_(o,r.frameState.viewState.resolution),r.frameState.time=this.animation_.start}var a=this.animation_.clustersFrom.length;if(a>0&&a<=1e3&&this.animation_.start){var s=Nc(r),u=(r.frameState.time-this.animation_.start)/n;u>1&&(this.animation_.start=!1,u=1),u=this.get("animationMethod")(u),r.context.save(),r.context.globalAlpha=this.getOpacity(),this.animation_.clustersFrom.forEach((function(t,n){var i=t.getGeometry().getCoordinates(),o=e.animation_.clustersTo[n].getGeometry().getCoordinates();e.animation_.reverse?(i[0]=o[0]+u*(i[0]-o[0]),i[1]=o[1]+u*(i[1]-o[1])):(i[0]+=u*(o[0]-i[0]),i[1]+=u*(o[1]-i[1]));var a=e.getStyle()(t,r.frameState.viewState.resolution),l=new ds(i);XU(a)||a.forEach((function(t){var e=t.getImage();XU(e)||(null==e.getOrigin()&&(e.origin_=[]),null==e.getAnchor()&&(e.normalizedAnchor_=[]),null==e.getSize()&&(e.size_=[])),s.setStyle(t),s.drawGeometry(l)}))})),r.context.restore(),r.frameState.animate=!0,r.context.save(),r.context.beginPath(),r.context.rect(0,0,0,0),r.context.clip(),this.clip_=!0}else this.animation_.clustersFrom.length=0,this.animation_.clustersTo.length=0,this.animation_.start=!1}}},{key:"prepareAnimation_",value:function(t,e){var r=this;this.animation_.clustersFrom=[],this.animation_.clustersTo=[];var n=Dr(t,100*e),i=this.oldCluster_.getFeaturesInExtent(n),a=this.getSource().getFeaturesInExtent(n),s=this.animation_.reverse?a:i,u=this.animation_.reverse?i:a;s.forEach((function(t){var e=t.get("features");if(!XU(e)){var n=o.getClusterForFeature(e[0],u);XU(n)||!1===n||(r.animation_.clustersFrom.push(t),r.animation_.clustersTo.push(n))}})),this.animation_.resolution=e,this.sourceChanged=!1,this.animation_.start=(new Date).getTime()}},{key:"postanimate",value:function(t){this.clip_&&(t.context.restore(),this.clip_=!1)}},{key:"setStyle",value:function(t){$O(oP(o.prototype),"setStyle",this).call(this,this.styleCluster_)}}])&&QO(e.prototype,r),n&&QO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(xS),sP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uP="select",lP=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.selected=r,o.deselected=n,o.mapBrowserEvent=i,o}return sP(e,t),e}(Li),cP={};function hP(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),r=this.removeCondition_(t),n=this.toggleCondition_(t),i=!e&&!r&&!n,o=t.map,a=this.getFeatures(),s=[],u=[];if(i){kn(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return u.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var c=a.item(l),h=u.indexOf(c);h>-1?u.splice(h,1):(a.remove(c),s.push(c))}0!==u.length&&a.extend(u)}else{o.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.filter_(t,i))return!e&&!n||_i(a.getArray(),t)?(r||n)&&_i(a.getArray(),t)&&(s.push(t),this.removeFeatureLayerAssociation_(t)):(u.push(t),this.addFeatureLayerAssociation_(t,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=s.length-1;f>=0;--f)a.remove(s[f]);a.extend(u)}return(u.length>0||s.length>0)&&this.dispatchEvent(new lP(uP,u,s,t)),!0}var fP=function(t){function e(e){var r,n,i=t.call(this,{handleEvent:hP})||this,o=e||{};if(i.boundAddFeature_=i.addFeature_.bind(i),i.boundRemoveFeature_=i.removeFeature_.bind(i),i.condition_=o.condition?o.condition:Yu,i.addCondition_=o.addCondition?o.addCondition:Vu,i.removeCondition_=o.removeCondition?o.removeCondition:Vu,i.toggleCondition_=o.toggleCondition?o.toggleCondition:Wu,i.multi_=!!o.multi&&o.multi,i.filter_=o.filter?o.filter:Oi,i.hitTolerance_=o.hitTolerance?o.hitTolerance:0,i.style_=void 0!==o.style?o.style:(Mi((r=bM())[mr.POLYGON],r[mr.LINE_STRING]),Mi(r[mr.GEOMETRY_COLLECTION],r[mr.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.features_=o.features||new oo,o.layers)if("function"==typeof o.layers)n=o.layers;else{var a=o.layers;n=function(t){return _i(a,t)}}else n=Oi;return i.layerFilter_=n,i.featureLayerAssociation_={},i}return sP(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[Mr(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[Mr(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(hi,this.boundAddFeature_),this.features_.addEventListener(fi,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(hi,this.boundAddFeature_),this.features_.removeEventListener(fi,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var e=t.element;this.style_&&this.applySelectedStyle_(e)},e.prototype.removeFeature_=function(t){var e=t.element;this.style_&&this.restorePreviousStyle_(e)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=Mr(t);e in cP||(cP[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){var r=Mr(t),n=this.getMap().getInteractions().getArray().filter((function(r){return r instanceof e&&r.getStyle()&&-1!==r.getFeatures().getArray().indexOf(t)}));n.length>0?t.setStyle(n[n.length-1].getStyle()):(t.setStyle(cP[r]),delete cP[r])},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Mr(t)]},e}(Nu);function pP(t){return(pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==pP(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pP(o)?o:String(o)),n)}var i,o}function yP(t,e){return(yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bP(t);if(e){var i=bP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vP(this,r)}}function vP(t,e){if(e&&("object"===pP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _P(t)}function _P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bP(t){return(bP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yP(t,e)}(o,t);var e,r,n,i=gP(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dP(this,o);var r=e,n=new xS({source:new jS({features:new oo,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:r.featureStyle});return e.layers.push(n),r.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))},(t=i.call(this,r)).map=r.map,t.pointRadius=r.pointRadius||12,t.circleMaxObjects=r.circleMaxObjects||10,t.maxObjects=r.maxObjects||60,t.spiral=!1!==r.spiral,t.animate=r.animate,t.animationDuration=r.animationDuration||500,t.selectCluster_=!1!==r.selectCluster,t.maxFeaturesToSelect=r.maxFeaturesToSelect,t.facadeLayer_=r.fLayer,t.style_=r.style,t.filter_=r.filter,t.overlayLayer_=n,t.originalHandleEvent=t.handleEvent,t.on("select",t.selectCluster.bind(_P(t)),_P(t)),t}return e=o,(r=[{key:"setMap",value:function(t){var e=this;this.getMap()&&(this.getMap().getView()&&this.getMap().getView().un("change:resolution",this.clear.bind(this)),this.getMap().removeLayer(this.overlayLayer_)),fP.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&t.getView()&&t.getView().on("change:resolution",this.clear.bind(this)),this.handleEvent=function(t){return e.originalHandleEvent.apply(e,[t]),!0}}},{key:"clear",value:function(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()}},{key:"getLayer",value:function(){return this.overlayLayer_}},{key:"refreshViewEvents",value:function(){this.getMap()&&this.getMap().getView()&&this.getMap().getView().on("change:resolution",this.clear.bind(this))}},{key:"selectCluster",value:function(t){if(t.selected.length){var e=t.selected[0];if(!e.get("selectclusterfeature")){var r=e.get("features");if(r&&1!==r.length)if(r&&!(r.length>this.maxFeaturesToSelect)||this.facadeLayer_.getImpl().getNumZoomLevels()-this.map.getZoom()==1){this.selectCluster_||this.getFeatures().clear();var n=e.getGeometry().getCoordinates(),i=this.getMap().getView().getResolution(),o=i*this.pointRadius*(.5+r.length/4);!this.spiral||r.length<=this.circleMaxObjects?(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInCircle_(r,i,o,n)):(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInSpiral_(r,i,n)),this.animate&&this.animateCluster_(n)}else{var a=Zy.getFeaturesExtent(r,this.map.getProjection().code);this.map.setBbox(a)}}}else this.clear()}},{key:"drawFeaturesAndLinsInCircle_",value:function(t,e,r,n){for(var i=Math.min(t.length,this.circleMaxObjects),o=0;o<i;o+=1){var a=2*Math.PI*(o/i);2!==i&&4!==i||(a+=Math.PI/4);var s=[n[0]+r*Math.sin(a),n[1]+r*Math.cos(a)];this.drawAnimatedFeatureAndLink_(t[o],e,n,s)}}},{key:"drawFeaturesAndLinsInSpiral_",value:function(t,e,r){for(var n,i=0,o=2*this.pointRadius,a=Math.min(this.maxObjects,t.length),s=0;s<a;s+=1){i+=(o+.1)/(n=o/2+o*i/(2*Math.PI));var u=e*n*Math.sin(i),l=e*n*Math.cos(i),c=[r[0]+u,r[1]+l];this.drawAnimatedFeatureAndLink_(t[s],e,r,c)}}},{key:"drawAnimatedFeatureAndLink_",value:function(t,e,r,n){var i=new dy;t.getKeys().forEach((function(e){i.set(e,t.get(e))}));var o=t.getStyle();o||(o=this.facadeLayer_.getStyle().getImpl().oldOL3Layer.getStyle());var a=o(t,e),s=a.map?a.map((function(t){return t.clone()})):[a.clone()];i.setId(t.getId()),i.setStyle(s),i.set("features",[t]);var u=!0===["Point","MultiPoint"].includes(t.getGeometry().getType())?new ds(n):t.getGeometry(),l=!0===["Point","MultiPoint"].includes(t.getGeometry().getType())?new Sy([r,n]):new Sy([r,Zy.getCentroid(t.getGeometry())]);i.set("geometry",u),this.overlayLayer_.getSource().addFeature(i);var c=new dy({selectclusterlink:!0,geometry:l});this.overlayLayer_.getSource().addFeature(c)}},{key:"animateCluster_",value:function(t,e){var r=this;this.listenerKey_&&(this.overlayLayer_.setVisible(!0),Hi(this.listenerKey_));var n=this.overlayLayer_.getSource().getFeatures();if(n.length){this.overlayLayer_.setVisible(!1);var i=this.animationDuration||500,o=(new Date).getTime();this.listenerKey_=this.facadeLayer_.getImpl().getOL3Layer().on(["postrender","postcompose"],(function(e){for(var a=Nc(e),s=r.getMap().getView().getResolution(),u=wa((e.frameState.time-o)/i),l=0;l<n.length;l+=1){if(n[l].get("features")){var c=n[l],h=c.get("features")[0],f=c.getGeometry().getCoordinates();f[0]=t[0]+u*(f[0]-t[0]),f[1]=t[1]+u*(f[1]-t[1]);for(var p=new ds(f),d=r.overlayLayer_.getStyle()(h,s).map((function(t){return t.clone()})),m=0;m<d.length;m+=1){var y=d[m];y.getImage().size||(y.getImage().size=[42,42]),a.setStyle(y),a.drawLineString(new Sy([t,f]))}var g=h.getStyle();g||(g=r.facadeLayer_.getStyle().getImpl().oldOL3Layer.getStyle());for(var v=g(h,s),_=v.map?v.map((function(t){return t.clone()})):[v.clone()],b=0;b<_.length;b+=1){var w=_[b],M=w.getImage();if(M instanceof $x){var S=null==M.getOrigin()?[0,0]:M.getOrigin(),x=null==M.getAnchor()?[0,0]:M.getAnchor(),E=null==M.getSize()?[42,42]:M.getSize();M.size=E,M.anchor=x,M.origin=S,w.setImage(M)}a.setStyle(w),a.drawGeometry(p)}}if(u>1)return Hi(r.listenerKey_),r.overlayLayer_.setVisible(!0),void r.overlayLayer_.changed();e.frameState.animate=!0}}),this)}}}])&&mP(e.prototype,r),n&&mP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(fP);function MP(t){return(MP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==MP(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==MP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===MP(o)?o:String(o)),n)}var i,o}function EP(t,e){return(EP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=TP(t);if(e){var i=TP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PP(this,r)}}function PP(t,e){if(e&&("object"===MP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function TP(t){return(TP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EP(t,e)}(o,t);var e,r,n,i=OP(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return SP(this,o),i.call(this,t)}return e=o,(r=[{key:"clone",value:function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new o({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}}])&&xP(e.prototype,r),n&&xP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(MM),LP=function(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(t[1]-r[1])*(e[0]-r[0])<=0},RP=function(t){t.sort((function(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}));for(var e=[],r=0;r<t.length;r+=1){for(;e.length>=2&&LP(e[e.length-2],e[e.length-1],t[r]);)e.pop();e.push(t[r])}for(var n=[],i=t.length-1;i>=0;i-=1){for(;n.length>=2&&LP(n[n.length-2],n[n.length-1],t[i]);)n.pop();n.push(t[i])}return n.pop(),e.pop(),e.concat(n)};function CP(t){return(CP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AP(t){return function(t){if(Array.isArray(t))return kP(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return kP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kP(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function NP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==CP(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==CP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===CP(o)?o:String(o)),n)}var i,o}function jP(t,e){return(jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=BP(t);if(e){var i=BP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return DP(this,r)}}function DP(t,e){if(e&&("object"===CP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function BP(t){return(BP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jP(t,e)}(a,t);var e,r,i,o=FP(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,{})).convexHullLayer_=null,r.oldOL3Layer_=null,r.optionsVendor_=e,r.options_=t,r.clusterLayer_=null,r.selectClusterInteraction_=null,r.hoverInteraction_=null,r}return e=a,i=[{key:"updateRangeImpl",value:function(t,e,r,n,i){var o=i.getOptions().ranges.find((function(r){return r.min===t&&r.max===e}))||!1;return o&&(o.style=r),o}}],(r=[{key:"applyToLayer",value:function(t,e){this.layer_=t,this.options_=this.updateLastRange_(),XU(this.selectClusterInteraction_)||this.selectClusterInteraction_.clear(),this.updateCanvas();var r=t.getFeatures();r.length>0?this.clusterize_(r):this.layer_.on(Uf,this.clusterize_.bind(this),this)}},{key:"selectClusterInteraction",get:function(){return this.selectClusterInteraction_}},{key:"clusterize_",value:function(t){var e=t.map((function(t){return t.getImpl().getOLFeature()}));this.clusterLayer_=new aP({name:"Cluster",source:new XO({distance:this.options_.distance,geometryFunction:function(t){return new ds(sn(t.getGeometry().getExtent()))},source:new jS({features:e})}),animationDuration:this.optionsVendor_.animationDuration,style:this.clusterStyleFn_.bind(this),animationMethod:n[this.optionsVendor_.animationMethod]}),!1===this.options_.animated&&this.clusterLayer_.set("animationDuration",void 0),this.clusterLayer_.setZIndex(99999);var r=this.layer_.getImpl().getOL3Layer();r instanceof aP||(this.oldOL3Layer_=r),this.clusterLayer_.setMaxResolution(this.oldOL3Layer_.getMaxResolution()),this.clusterLayer_.setMinResolution(this.oldOL3Layer_.getMinResolution()),this.layer_.getImpl().setOL3Layer(this.clusterLayer_),XU(this.options_.ranges)&&(this.options_.ranges=this.getDefaultRanges_()),!1!==this.options_.hoverInteraction&&this.addCoverInteraction_(),!1!==this.options_.selectInteraction&&this.addSelectInteraction_()}},{key:"setRanges",value:function(t){XU(t)?this.options_.ranges=this.getDefaultRanges_():this.options_.ranges=t}},{key:"updateLastRange_",value:function(){var t=Mq({},this.options_);if(!XU(this.options_)&&!XU(this.options_.ranges)){var e=t.ranges;if(e.length>0){var r=(e=e.sort((function(t,e){return t.min-e.min}))).pop();if(XU(r.max)){var n=this.layer_.getFeatures().length;r.max=n}t.ranges.push(r)}}return t}},{key:"setAnimated",value:function(t,e,r){return r.getOptions().animated=t,!1===t?this.clusterLayer_.set("animationDuration",void 0):this.clusterLayer_.set("animationDuration",this.optionsVendor_.animationDuration),this}},{key:"addSelectInteraction",value:function(){this.addSelectInteraction_()}},{key:"addSelectInteraction_",value:function(){var t=this,e=this.layer_.getImpl().getMap();this.selectClusterInteraction_=new wP({fLayer:this.layer_,map:e,maxFeaturesToSelect:this.options_.maxFeaturesToSelect,pointRadius:this.optionsVendor_.distanceSelectFeatures,animate:!0,layers:[this.clusterLayer_]}),this.selectClusterInteraction_.on("select",this.selectClusterFeature_.bind(this),this),e.getMapImpl().addInteraction(this.selectClusterInteraction_),e.getMapImpl().on("change:view",(function(e){return t.selectClusterInteraction_.refreshViewEvents(e)}))}},{key:"removeSelectInteraction",value:function(){this.removeSelectInteraction_()}},{key:"removeSelectInteraction_",value:function(){this.layer_.getImpl().getMap().getMapImpl().removeInteraction(this.selectClusterInteraction_)}},{key:"hoverFeatureFn_",value:function(t,e){if(!XU(t)){var r=[];t.forEach((function(t){t instanceof Qq?r=r.concat(t.getAttribute("features")):r.push(t)}));var n=r.map((function(t){return t.getImpl().getOLFeature().getGeometry().getCoordinates()})),i=RP(n);if(i.length>2){var o=new dy(new Ls([i])),a=Dq.olFeature2Facade(o);XU(this.convexHullLayer_)?(this.convexHullLayer_=new WO({name:"cluster_cover_".concat(this.layer_.name),extract:!1},{displayInLayerSwitcher:!1,style:new kO({polygon:this.optionsVendor_.convexHullStyle})}),this.convexHullLayer_.addFeatures(a),this.layer_.getImpl().getMap().addLayers(this.convexHullLayer_),this.layer_.getImpl().getMap().getMapImpl().getView().on("change:resolution",this.clearConvexHull.bind(this),this),this.convexHullLayer_.setStyle(new kO({polygon:this.optionsVendor_.convexHullStyle})),this.convexHullLayer_.setZIndex(99990)):(this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures()),this.convexHullLayer_.addFeatures(a))}}}},{key:"leaveFeatureFn_",value:function(t,e){XU(this.convexHullLayer_)||this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures())}},{key:"addCoverInteraction_",value:function(){this.hoverKey_=this.layer_.on("hover:features",this.hoverFeatureFn_.bind(this)),this.leaveKey_=this.layer_.on("leave:features",this.leaveFeatureFn_.bind(this))}},{key:"removeCoverInteraction_",value:function(){this.layer_.unByKey("hover:features",this.hoverKey_),this.layer_.unByKey("leave:features",this.leaveKey_)}},{key:"clusterStyleFn_",value:function(t,e,r){var n,i=t.get("features");if(!i)return new IP;var o=i.length,a=this.options_.ranges.find((function(t){return t.min<=o&&t.max>=o}));if(XU(a)){if(1===o){var s=i[0].getStyle();s||(s=this.oldOL3Layer_.getStyle()),n=s(i[0],e),HU(n)||(n=[n]),n[0].setGeometry(i[0].getGeometry())}}else{var u=a.style.clone();if(u instanceof kO||(u=new kO({point:u.getOptions()})),r)u.set("point.fill.opacity",.33);else if(this.options_.displayAmount){u.set("point.label",this.options_.label);var l=u.get("point.label.color");if(XU(l)){var c=u.get("point.fill.color");l=XU(c)?"#000":wq(c),u.set("point.label.color",l)}}n=u.getImpl().olStyleFn(t,e)}return n}},{key:"getDefaultRanges_",value:function(){var t=this.layer_.getFeatures().length,e=Math.floor(t/3),r=[{min:2,max:e=Math.max(e,3),style:new kO({point:aT.RANGE_1_DEFAULT})},{min:e,max:2*e,style:new kO({point:aT.RANGE_2_DEFAULT})},{min:2*e,max:t+1,style:new kO({point:aT.RANGE_3_DEFAULT})}];return this.options_.ranges=r,r}},{key:"selectClusterFeature_",value:function(t){this.clearConvexHull()}},{key:"unapply",value:function(){XU(this.clusterLayer_)?XU(this.layer_)||this.layer_.un(Uf,this.clusterize_.bind(this),this):(this.layer_.getImpl().setOL3Layer(this.oldOL3Layer_),this.oldOL3Layer_.setMaxResolution(this.clusterLayer_.getMaxResolution()),this.oldOL3Layer_.setMinResolution(this.clusterLayer_.getMinResolution()),this.removeCoverInteraction_(),this.removeSelectInteraction_(),this.clearConvexHull(),this.deactivateChangeResolutionEvent(),this.layer_.redraw(),this.deactivateChangeEvent())}},{key:"clearConvexHull",value:function(){null!==this.convexHullLayer_&&(this.layer_.getImpl().getMap().removeLayers(this.convexHullLayer_),this.convexHullLayer_=null)}},{key:"updateCanvas",value:function(){}},{key:"activateChangeEvent",value:function(){if(null!==this.clusterLayer_){var t=this.clusterLayer_.getSource(),e=XO.prototype.refresh;t.getSource().on("change",e)}}},{key:"deactivateChangeEvent",value:function(){if(null!==this.clusterLayer_){var t=this.clusterLayer_.getSource();Hi({bindTo:void 0,callOnce:!1,listener:XO.prototype.refresh,target:t.getSource(),type:"change"})}}},{key:"deactivateChangeResolutionEvent",value:function(){if(!XU(this.layer_)&&!XU(this.layer_.getImpl())){var t=this.layer_.getImpl().getMap();if(!XU(t)&&!XU(t.getMapImpl())){var e=t.getMapImpl().getView();Hi({type:"change:resolution",bindTo:void 0,listener:this.clearConvexHull,target:e,callOnce:!1})}}}},{key:"deactivateTemporarilyChangeEvent",value:function(t,e){this.deactivateChangeEvent(),KU(t)&&(null==e?t():t.apply(void 0,AP(e)))}},{key:"oldOL3Layer",get:function(){return this.oldOL3Layer_}}])&&NP(e.prototype,r),i&&NP(e,i),Object.defineProperty(e,"prototype",{writable:!1}),a}(yx);function zP(t){return(zP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==zP(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===zP(o)?o:String(o)),n)}var i,o}function qP(t,e){return(qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function VP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ZP(t);if(e){var i=ZP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return YP(this,r)}}function YP(t,e){if(e&&("object"===zP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ZP(t){return(ZP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qP(t,e)}(o,t);var e,r,n,i=VP(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).styles_=[],r}return e=o,(r=[{key:"apply",value:function(t){this.layer_=t,XU(t)||this.updateInternal_(t)}},{key:"add",value:function(t){var e=this,r=t,n=this.layer_;return this.unapplyInternal(this.layer_),HU(r)||(r=[r]),(r=r.filter((function(t){return t.constructor!==e.constructor}))).forEach((function(t){e.styles_=e.styles_.filter((function(e){return e.constructor!==t.constructor}))})),this.styles_=this.styles_.concat(r),XU(n)||this.updateInternal_(n),this}},{key:"remove",value:function(t){var e=t,r=this.layer_;HU(e)||(e=[e]),XU(this.layer_)||this.unapplyInternal(this.layer_),this.styles_=this.styles_.filter((function(t){return!e.includes(t)})),r.setStyle(this.oldStyle_,!0),r.setStyle(this)}},{key:"getStyles",value:function(){return this.styles_}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"clear",value:function(){this.remove(this.styles_)}},{key:"unapplyInternal",value:function(t){this.styles_.concat(this).sort((function(t,e){return xq(e,t)})).forEach((function(e){e instanceof o&&e.unapplySoft(t)}))}},{key:"unapplySoft",value:function(t){}},{key:"unapply",value:function(t){this.unapplyInternal(t),this.layer_=null}},{key:"updateInternal_",value:function(t){this.styles_.concat(this).sort((function(t,e){return xq(t,e)})).forEach((function(e){e instanceof o?e.applyInternal(t):e instanceof uM&&e.apply(t,!0)}))}}])&&UP(e.prototype,r),n&&UP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(uM);function HP(t){return(HP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return KP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KP(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function JP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==HP(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==HP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===HP(o)?o:String(o)),n)}var i,o}function $P(){return($P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=tT(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function tT(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iT(t)););return t}function eT(t,e){return(eT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=iT(t);if(e){var i=iT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return nT(this,r)}}function nT(t,e){if(e&&("object"===HP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function iT(t){return(iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eT(t,e)}(o,t);var e,r,n,i=rT(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};JP(this,o);var n=new GP(e,r);return t=i.call(this,e,n),Mq(e,o.DEFAULT),Mq(r,o.DEFAULT_VENDOR),t.optsVendor_=r,t.oldStyle_=null,t}return e=o,n=[{key:"deserialize",value:function(t){var e=XP(t,3),r=e[0],n=e[1],i=e[2],o=r;o.ranges.forEach((function(t){t.style=uM.deserialize(t.style)})),o=Pq(r);var a=Pq(n),s=new Function(["options","optsVendor"],"return new M.style.Cluster(options, optsVendor)")(o,a),u=i.map((function(t){return uM.deserialize(t)}));return s.add(u),s}}],(r=[{key:"apply",value:function(t){$P(iT(o.prototype),"apply",this).call(this,t);var e=t.getStyle();this.oldStyle_=e instanceof o?e.getOldStyle():e}},{key:"unapplySoft",value:function(t){this.getImpl().unapply()}},{key:"add",value:function(t){return XU(this.layer_)||this.unapplySoft(this.layer_),$P(iT(o.prototype),"add",this).call(this,t)}},{key:"applyInternal",value:function(t){this.layer_=t,this.getImpl().applyToLayer(t),this.updateCanvas()}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"getRanges",value:function(){return this.options_.ranges}},{key:"getOptions",value:function(){return this.options_}},{key:"setRanges",value:function(t){return this.getImpl().ranges=t,this.unapply(this.layer_),this.layer_.style=this,this}},{key:"getRange",value:function(t,e){return this.options_.ranges.find((function(r){return r.min===t&&r.max===e}))}},{key:"updateRange",value:function(t,e,r){return GP.updateRangeImpl(t,e,r,this.layer_,this),this.unapply(this.layer_),this.layer_.style=this,this}},{key:"setAnimated",value:function(t){return this.getImpl().setAnimated(t,this.layer_,this)}},{key:"isAnimated",value:function(){return this.options_.animated}},{key:"toImage",value:function(){return this.oldStyle_ instanceof uM?this.oldStyle_.toImage():$P(iT(o.prototype),"toImage",this).call(this)}},{key:"refresh",value:function(){if(!XU(this.layer_)){var t=this.layer_;this.unapply(this.layer_),this.apply(t),this.updateCanvas()}}},{key:"ORDER",get:function(){return 4}},{key:"addSelectInteraction",value:function(){this.getImpl().addSelectInteraction()}},{key:"removeSelectInteraction",value:function(){this.getImpl().removeSelectInteraction()}},{key:"toJSON",value:function(){var t=Mq({},this.getOptions());t.ranges=this.getRanges().map((function(t){var e=Mq({},t);return e.style=t.style.serialize(),e})),t=Oq(t);var e=Mq({},this.optsVendor_);return{parameters:[t,e=Oq(e),this.getStyles().map((function(t){return t.serialize()}))],deserializedMethod:"M.style.Cluster.deserialize"}}}])&&QP(e.prototype,r),n&&QP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WP);oT.DEFAULT={ranges:[],hoverInteraction:!0,displayAmount:!0,selectInteraction:!0,distance:60,animated:!0,maxFeaturesToSelect:15,label:{text:function(t){var e,r=t.getAttribute("features");return r.length&&(e=r.length.toString()),e},color:"#fff",font:"bold 15px Arial",baseline:"middle",align:"center"}},oT.DEFAULT_VENDOR={animationDuration:250,animationMethod:"linear",distanceSelectFeatures:15,convexHullStyle:{fill:{color:"#fff",opacity:.25},stroke:{color:"#7b98bc"}}},oT.RANGE_1_DEFAULT={fill:{color:"#81c89a"},stroke:{color:"#6eb988",width:3},radius:15},oT.RANGE_2_DEFAULT={fill:{color:"#85b9d2"},stroke:{color:"#6da4be",width:3},radius:20},oT.RANGE_3_DEFAULT={fill:{color:"#938fcf"},stroke:{color:"#827ec5",width:3},radius:25};var aT=oT;function sT(t){return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==sT(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===sT(o)?o:String(o)),n)}var i,o}function lT(t,e){return(lT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fT(t);if(e){var i=fT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hT(this,r)}}function hT(t,e){if(e&&("object"===sT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fT(t){return(fT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lT(t,e)}(o,t);var e,r,n,i=cT(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new yT;return(t=i.call(this,e)).id_=nq("mapea","render_feature"),t}return e=o,(r=[{key:"getId",value:function(){return this.id_}},{key:"getGeometry",value:function(){return null}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"getType",value:function(){return this.getImpl().getType()}},{key:"getAttribute",value:function(t){var e;if(e=this.getImpl().getAttribute(t),XU(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return XU(t)||(r=t instanceof o?t.getAttribute(e):t[e]),r}),this))}return e}},{key:"equals",value:function(t){return this.getId()===t.getId()}}])&&uT(e.prototype,r),n&&uT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf);function dT(t){return(dT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==dT(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===dT(o)?o:String(o)),n)}var i,o}var yT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olFeature_=null}var e,r,n;return e=t,n=[{key:"olFeature2Facade",value:function(t,e){var r=null;return XU(t)||(r=new pT).getImpl().setOLFeature(t),r}},{key:"facade2OLFeature",value:function(t){return t.getImpl().getOLFeature()}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"getType",value:function(){return this.getOLFeature().getType()}},{key:"setOLFeature",value:function(t){XU(t)||(this.olFeature_=t)}},{key:"getAttributes",value:function(){return this.olFeature_.getProperties()}},{key:"getAttribute",value:function(t){return this.olFeature_.get(t)}},{key:"setFacadeObj",value:function(t){this.facadeFeature_=t}},{key:"getCentroid",value:function(){}}])&&mT(e.prototype,r),n&&mT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gT(t){return(gT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==gT(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===gT(o)?o:String(o)),n)}var i,o}var bT=function(t,e){var r,n=t.getId();return XU(n)||(r=e.getFeatureById(n)),XU(r)&&t instanceof by&&(r=yT.olFeature2Facade(t)),r},wT=function(){function t(){vT(this,t),this.map_=null,this.defaultCursor_=void 0}var e,r,n;return e=t,(r=[{key:"addTo",value:function(t){this.map_=t}},{key:"getFeaturesByLayer",value:function(t,e){var r=[];if(!XU(e)&&e.isVisible()&&!XU(e.getImpl().getOL3Layer())){var n=e.getImpl().getOL3Layer();this.map_.getMapImpl().forEachFeatureAtPixel(t.pixel,(function(t,n){if(n instanceof aP&&!XU(t.get("features"))){var i=t.get("features").map((function(t){return bT(t,e)}));if(1===i.length)r.push(i[0]);else{var o=e.getStyle();o instanceof aT||(o=o.getStyles().find((function(t){return t instanceof aT}))),r.push(new Qq(i,{ranges:o.getRanges(),hoverInteraction:o.getOptions().hoverInteraction,maxFeaturesToSelect:o.getOptions().maxFeaturesToSelect,distance:o.getOptions().distance}))}}else Object.prototype.hasOwnProperty.call(t.getProperties(),"selectclusterlink")||r.push(bT(t,e))}),{layerFilter:function(t){var r=!1;return e.getStyle()instanceof aT&&e.getStyle().getOptions().selectInteraction&&(r=t===e.getStyle().getImpl().selectClusterInteraction.getLayer()),r=r||t===n}})}return r}},{key:"addCursorPointer",value:function(){var t=this.map_.getMapImpl().getViewport();"pointer"!==t.style.cursor&&(this.defaultCursor_=t.style.cursor),t.style.cursor="pointer"}},{key:"removeCursorPointer",value:function(){this.map_.getMapImpl().getViewport().style.cursor=this.defaultCursor_}},{key:"destroy",value:function(){this.map_.un("click",this.onMapClick_,this),this.map_=null}}])&&_T(e.prototype,r),n&&_T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function MT(t){return(MT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ST(t){return function(t){if(Array.isArray(t))return xT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return xT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xT(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ET(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==MT(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==MT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===MT(o)?o:String(o)),n)}var i,o}function PT(t,e){return(PT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function TT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=LT(t);if(e){var i=LT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return IT(this,r)}}function IT(t,e){if(e&&("object"===MT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function LT(t){return(LT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var RT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PT(t,e)}(o,t);var e,r,n,i=TT(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wT(e);return ET(this,o),(t=i.call(this,r)).map_=null,t.layers_=[],t.activated_=!1,t.prevSelectedFeatures_={},t.prevHoverFeatures_={},KU(r.addTo)||Af(Hf("exception").addto_method),KU(r.getFeaturesByLayer)||Af(Hf("exception").getfeaturesbylayer_method),t}return e=o,(r=[{key:"addTo",value:function(t){this.map_=t,this.map_.on("move",this.moveOverMap_.bind(this)),this.map_.on("click",this.clickOnMap_.bind(this)),this.getImpl().addTo(this.map_),this.fire("added:map")}},{key:"clickOnMap_",value:function(t){var e=this;if(!0===this.activated_){var r=this.getImpl();this.map_.removePopup(),this.layers_.forEach((function(n,i){var o=r.getFeaturesByLayer(t,n),a=ST(e.prevSelectedFeatures_[n.name]);if(a[0]===o[0]&&1===i&&o!==[]&&e.selectFeatures(a,n,t),0===o.length&&a.length>0)e.unselectFeatures(a,n,t);else if(o.length>0&&void 0!==o[0]){var s=o.filter((function(t){return!a.some((function(e){return e.equals(t)}))})),u=a.filter((function(t){return!o.some((function(e){return e.equals(t)}))}));u.length>0&&e.unselectFeatures(u,n,t),s.length>0&&e.selectFeatures(s,n,t)}}))}}},{key:"moveOverMap_",value:function(t){var e=this;if(!0===this.activated_){var r=this.getImpl();this.layers_.forEach((function(n){var i=r.getFeaturesByLayer(t,n),o=ST(e.prevHoverFeatures_[n.name]);if(0===i.length&&o.length>0)e.leaveFeatures_(o,n,t);else if(i.length>0){var a=i.filter((function(t){return t instanceof Yq&&!o.some((function(e){return e.equals(t)}))})),s=o.filter((function(t){return!i.some((function(e){return e.equals(t)}))}));s.length>0&&e.leaveFeatures_(s,n,t),a.length>0&&e.hoverFeatures_(a,n,t)}}))}}},{key:"selectFeatures",value:function(t,e,r){this.prevSelectedFeatures_[e.name]=this.prevSelectedFeatures_[e.name].concat(t);var n=e.getImpl();KU(n.selectFeatures)&&n.selectFeatures(t,r.coord,r),e.fire("select:features",[t,r])}},{key:"unselectFeatures",value:function(t,e,r){this.prevSelectedFeatures_[e.name]=this.prevSelectedFeatures_[e.name].filter((function(e){return!t.some((function(t){return t.equals(e)}))}));var n=e.getImpl();KU(n.unselectFeatures)&&n.unselectFeatures(t,r.coord),e.fire("unselect:features",[t,r.coord])}},{key:"hoverFeatures_",value:function(t,e,r){this.prevHoverFeatures_[e.name]=this.prevHoverFeatures_[e.name].concat(t),e.fire("hover:features",[t,r]),this.getImpl().addCursorPointer()}},{key:"leaveFeatures_",value:function(t,e,r){this.prevHoverFeatures_[e.name]=this.prevHoverFeatures_[e.name].filter((function(e){return!t.some((function(t){return t.equals(e)}))})),e.fire("leave:features",[t,r.coord]),this.getImpl().removeCursorPointer()}},{key:"activate",value:function(){!1===this.activated_&&(this.activated_=!0,this.fire("activated"))}},{key:"deactivate",value:function(){!0===this.activated_&&(this.activated_=!1,this.fire("deactivated"))}},{key:"addLayer",value:function(t){pq(this.layers_,t)||(this.layers_.push(t),this.prevSelectedFeatures_[t.name]=[],this.prevHoverFeatures_[t.name]=[])}},{key:"removeLayer",value:function(t){this.layers_=this.layers_.filter((function(e){return!e.equals(t)})),this.prevSelectedFeatures_[t.name]=null,this.prevHoverFeatures_[t.name]=null,delete this.prevSelectedFeatures_[t.name],delete this.prevHoverFeatures_[t.name]}},{key:"destroy",value:function(){}},{key:"clearSelectedFeatures",value:function(){var t=this;Object.keys(this.prevSelectedFeatures_).forEach((function(e){t.prevSelectedFeatures_[e]=[]}))}},{key:"clearHoverFeatures",value:function(){var t=this;Object.keys(this.prevHoverFeatures_).forEach((function(e){t.prevHoverFeatures_[e]=[]}))}}])&&OT(e.prototype,r),n&&OT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf),CT=(r(228),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),AT={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},kT=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[X_].featureMember=Jc(r.readFeaturesInternal),r.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",r}return CT(e,t),e.prototype.readFlatCoordinates_=function(t,e){var r=Wc(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,i="enu";if(n){var o=Vn(n);o&&(i=o.getAxisOrientation())}for(var a=r.trim().split(/\s+/),s=[],u=0,l=a.length;u<l;u++){var c=a[u].split(/,+/),h=parseFloat(c[0]),f=parseFloat(c[1]),p=3===c.length?parseFloat(c[2]):0;"en"===i.substr(0,2)?s.push(h,f,p):s.push(f,h,p)}return s},e.prototype.readBox_=function(t,e){var r=uh([null],this.BOX_PARSERS_,t,e,this);return Zr(r[1][0],r[1][1],r[1][3],r[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var r=uh(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.outerBoundaryIsParser_=function(t,e){var r=uh(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve"),Zc("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=e.getProperties(),u=[],l=[];for(var c in s){var h=s[c];null!==h&&(u.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=eh(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=eh(Oh)))}var f=An({},i);f.node=t,ch(f,i.serializers,nh(void 0,o),l,r,u)},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)}else if("Curve"===t.nodeName){var o=Zc(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();ch({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=An({},i);o.node=t,n=Array.isArray(e)?z_(e,i):G_(e,!0,i),ch(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=Zc(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,r){for(var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=e.getCoordinates(),s=a.length,u=new Array(s),l=0;l<s;++l){var c=a[l];u[l]=this.getCoords_(c,o,i)}Oh(t,u.join(" "))},e.prototype.writeCurveSegments_=function(t,e,r){var n=Zc(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();ch({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=Zc(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Zc(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,r){var n=Zc(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeRing_=function(t,e,r){var n=Zc(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=Vn(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];r&&(i+=","+(t[2]||0));return i},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();Oh(a,this.getCoords_(s,o,i))},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();ch({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS_,nh("pointMember"),a,r,void 0,this)},e.prototype.writePointMember_=function(t,e,r){var n=Zc(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();ch({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];ch({node:t},this.ENVELOPE_SERIALIZERS_,ih,i,r,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return Zc("http://www.opengis.net/gml",AT[n.nodeName])},e}(Q_);kT.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Qc(kT.prototype.readFlatCoordinates_)}},kT.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:kT.prototype.innerBoundaryIsParser_,outerBoundaryIs:kT.prototype.outerBoundaryIsParser_}},kT.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Jc(kT.prototype.readFlatCoordinates_)}},kT.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Qc(Q_.prototype.readPoint),MultiPoint:Qc(Q_.prototype.readMultiPoint),LineString:Qc(Q_.prototype.readLineString),MultiLineString:Qc(Q_.prototype.readMultiLineString),LinearRing:Qc(Q_.prototype.readLinearRing),Polygon:Qc(Q_.prototype.readPolygon),MultiPolygon:Qc(Q_.prototype.readMultiPolygon),Box:Qc(kT.prototype.readBox_)}},kT.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:eh(kT.prototype.writeCurveOrLineString_),MultiCurve:eh(kT.prototype.writeMultiCurveOrLineString_),Point:eh(kT.prototype.writePoint_),MultiPoint:eh(kT.prototype.writeMultiPoint_),LineString:eh(kT.prototype.writeCurveOrLineString_),MultiLineString:eh(kT.prototype.writeMultiCurveOrLineString_),LinearRing:eh(kT.prototype.writeLinearRing_),Polygon:eh(kT.prototype.writeSurfaceOrPolygon_),MultiPolygon:eh(kT.prototype.writeMultiSurfaceOrPolygon_),Surface:eh(kT.prototype.writeSurfaceOrPolygon_),MultiSurface:eh(kT.prototype.writeMultiSurfaceOrPolygon_),Envelope:eh(kT.prototype.writeEnvelope)}},kT.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:eh(kT.prototype.writeLineStringOrCurveMember_),curveMember:eh(kT.prototype.writeLineStringOrCurveMember_)}},kT.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:eh(kT.prototype.writeRing_),innerBoundaryIs:eh(kT.prototype.writeRing_)}},kT.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:eh(kT.prototype.writePointMember_)}},kT.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:eh(kT.prototype.writeSurfaceOrPolygonMember_),polygonMember:eh(kT.prototype.writeSurfaceOrPolygonMember_)}},kT.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:eh(Oh),upperCorner:eh(Oh)}};var NT=kT,jT=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}(),FT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),DT=function(t){function e(e,r){var n=t.call(this,e)||this;return n.conditions=r,Or(n.conditions.length>=2,57),n}return FT(e,t),e}(jT),BT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GT=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return BT(e,t),e}(DT),zT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),UT=function(t){function e(e,r,n){var i=t.call(this,"BBOX")||this;if(i.geometryName=e,i.extent=r,4!==r.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return i.srsName=n,i}return zT(e,t),e}(jT),qT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VT=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.geometryName=r||"the_geom",o.geometry=n,o.srsName=i,o}return qT(e,t),e}(jT),YT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZT=function(t){function e(e,r,n){return t.call(this,"Contains",e,r,n)||this}return YT(e,t),e}(VT),WT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),HT=function(t){function e(e,r){var n=t.call(this,e)||this;return n.propertyName=r,n}return WT(e,t),e}(jT),XT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),KT=function(t){function e(e,r,n){var i=t.call(this,"During",e)||this;return i.begin=r,i.end=n,i}return XT(e,t),e}(HT),JT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QT=function(t){function e(e,r,n,i){var o=t.call(this,e,r)||this;return o.expression=n,o.matchCase=i,o}return JT(e,t),e}(HT),$T=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tI=function(t){function e(e,r,n){return t.call(this,"PropertyIsEqualTo",e,r,n)||this}return $T(e,t),e}(QT),eI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rI=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThan",e,r)||this}return eI(e,t),e}(QT),nI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iI=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,r)||this}return nI(e,t),e}(QT),oI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aI=function(t){function e(e,r,n){return t.call(this,"Intersects",e,r,n)||this}return oI(e,t),e}(VT),sI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uI=function(t){function e(e,r,n){var i=t.call(this,"PropertyIsBetween",e)||this;return i.lowerBoundary=r,i.upperBoundary=n,i}return sI(e,t),e}(HT),lI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cI=function(t){function e(e,r,n,i,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=r,s.wildCard=void 0!==n?n:"*",s.singleChar=void 0!==i?i:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return lI(e,t),e}(HT),hI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fI=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return hI(e,t),e}(HT),pI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dI=function(t){function e(e,r){return t.call(this,"PropertyIsLessThan",e,r)||this}return pI(e,t),e}(QT),mI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yI=function(t){function e(e,r){return t.call(this,"PropertyIsLessThanOrEqualTo",e,r)||this}return mI(e,t),e}(QT),gI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vI=function(t){function e(e){var r=t.call(this,"Not")||this;return r.condition=e,r}return gI(e,t),e}(jT),_I=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bI=function(t){function e(e,r,n){return t.call(this,"PropertyIsNotEqualTo",e,r,n)||this}return _I(e,t),e}(QT),wI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MI=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return wI(e,t),e}(DT),SI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xI=function(t){function e(e,r,n){return t.call(this,"Within",e,r,n)||this}return SI(e,t),e}(VT);function EI(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(GT,e))}function OI(t,e,r){return new UT(t,e,r)}var PI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TI={"http://www.opengis.net/gml":{boundedBy:th(Q_.prototype.readGeometryElement,"bounds")}},II={"http://www.opengis.net/wfs":{totalInserted:th(bh),totalUpdated:th(bh),totalDeleted:th(bh)}},LI={"http://www.opengis.net/wfs":{TransactionSummary:th((function(t,e){return uh({},II,t,e)}),"transactionSummary"),InsertResults:th((function(t,e){return uh([],BI,t,e)}),"insertIds")}},RI={"http://www.opengis.net/wfs":{PropertyName:eh(Oh)}},CI={"http://www.opengis.net/wfs":{Insert:eh((function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a=n.gmlVersion,s=Zc(o,i);t.appendChild(s),2===a?NT.prototype.writeFeatureElement(s,e,r):rb.prototype.writeFeatureElement(s,e,r)})),Update:eh((function(t,e,r){var n=r[r.length-1];Or(void 0!==e.getId(),27);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=zI(o,i),u=e.getGeometryName();t.setAttribute("typeName",s),t.setAttributeNS(AI,"xmlns:"+o,a);var l=e.getId();if(void 0!==l){for(var c=e.getKeys(),h=[],f=0,p=c.length;f<p;f++){var d=e.get(c[f]);if(void 0!==d){var m=c[f];d&&"function"==typeof d.getSimplifiedGeometry&&(m=u),h.push({name:m,value:d})}}ch({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},CI,nh("Property"),h,r),GI(t,l,r)}})),Delete:eh((function(t,e,r){var n=r[r.length-1];Or(void 0!==e.getId(),26);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=zI(o,i);t.setAttribute("typeName",s),t.setAttributeNS(AI,"xmlns:"+o,a);var u=e.getId();void 0!==u&&GI(t,u,r)})),Property:eh((function(t,e,r){var n=Zc(NI,"Name"),i=r[r.length-1].gmlVersion;if(t.appendChild(n),Oh(n,e.name),void 0!==e.value&&null!==e.value){var o=Zc(NI,"Value");t.appendChild(o),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===i?NT.prototype.writeGeometryElement(o,e.value,r):rb.prototype.writeGeometryElement(o,e.value,r):Oh(o,e.value)}})),Native:eh((function(t,e,r){e.vendorId&&t.setAttribute("vendorId",e.vendorId);void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore));void 0!==e.value&&Oh(t,e.value)}))}},AI="http://www.w3.org/2000/xmlns/",kI="http://www.opengis.net/ogc",NI="http://www.opengis.net/wfs",jI={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},FI=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType_=n.featureType,r.featureNS_=n.featureNS,r.gmlFormat_=n.gmlFormat?n.gmlFormat:new rb,r.schemaLocation_=n.schemaLocation?n.schemaLocation:jI["1.1.0"],r}return PI(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var r={node:t};An(r,{featureType:this.featureType_,featureNS:this.featureNS_}),An(r,this.getReadOptions(t,e||{}));var n=[r];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[X_].featureMember=Jc(Q_.prototype.readFeaturesInternal);var i=uh([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=Xc(t);return this.readTransactionResponseFromDocument(e)}return Hc(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=Xc(t);return this.readFeatureCollectionMetadataFromDocument(e)}return Hc(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},r=wh(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=r,uh(e,TI,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return uh({},LI,t,[])},e.prototype.writeGetFeature=function(t){var e,r=Zc(NI,"GetFeature");if(r.setAttribute("service","WFS"),r.setAttribute("version","1.1.0"),t&&(t.handle&&r.setAttribute("handle",t.handle),t.outputFormat&&r.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&r.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&r.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&r.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&r.setAttribute("count",String(t.count)),void 0!==t.viewParams&&r.setAttribute("viewParams",t.viewParams),e=t.filter,t.bbox)){Or(t.geometryName,12);var n=OI(t.geometryName,t.bbox,t.srsName);e=e?EI(e,n):n}r.setAttributeNS(Yc,"xsi:schemaLocation",this.schemaLocation_);var i={node:r};return An(i,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),Or(Array.isArray(t.featureTypes),11),function(t,e,r){var n=r[r.length-1],i=An({},n);i.node=t,ch(i,UI,nh("Query"),e,r)}(r,t.featureTypes,[i]),r},e.prototype.writeTransaction=function(t,e,r,n){var i,o,a=[],s=Zc(NI,"Transaction"),u=n.version?n.version:"1.1.0",l="1.0.0"===u?2:3;s.setAttribute("service","WFS"),s.setAttribute("version",u),n&&(i=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle));var c=jI[u];s.setAttributeNS(Yc,"xsi:schemaLocation",c);var h=n.featurePrefix?n.featurePrefix:"feature";return t&&(o=An({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,hasZ:n.hasZ,srsName:n.srsName}),An(o,i),ch(o,CI,nh("Insert"),t,a)),e&&(o=An({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,hasZ:n.hasZ,srsName:n.srsName}),An(o,i),ch(o,CI,nh("Update"),e,a)),r&&ch({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,srsName:n.srsName},CI,nh("Delete"),r,a),n.nativeElements&&ch({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,srsName:n.srsName},CI,nh("Native"),n.nativeElements,a),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var r=[{}];return this.gmlFormat_.readGeometryElement(e,r),Vn(r.pop().srsName)}return null},e}(W_);var DI={"http://www.opengis.net/ogc":{FeatureId:Jc((function(t,e){return t.getAttribute("fid")}))}};var BI={"http://www.opengis.net/wfs":{Feature:function(t,e){sh(DI,t,e)}}};function GI(t,e,r){var n=Zc(kI,"Filter"),i=Zc(kI,"FeatureId");n.appendChild(i),i.setAttribute("fid",e),t.appendChild(n)}function zI(t,e){var r=(t=t||"feature")+":";return 0===e.indexOf(r)?e:r+e}var UI={"http://www.opengis.net/wfs":{Query:eh((function(t,e,r){var n,i=r[r.length-1],o=i.featurePrefix,a=i.featureNS,s=i.propertyNames,u=i.srsName;n=o?zI(o,e):e;t.setAttribute("typeName",n),u&&t.setAttribute("srsName",u);a&&t.setAttributeNS(AI,"xmlns:"+o,a);var l=An({},i);l.node=t,ch(l,RI,nh("PropertyName"),s,r);var c=i.filter;if(c){var h=Zc(kI,"Filter");t.appendChild(h),qI(h,c,r)}}))},"http://www.opengis.net/ogc":{During:eh((function(t,e,r){var n=Zc("http://www.opengis.net/fes","ValueReference");Oh(n,e.propertyName),t.appendChild(n);var i=Zc(X_,"TimePeriod");t.appendChild(i);var o=Zc(X_,"begin");i.appendChild(o),XI(o,e.begin);var a=Zc(X_,"end");i.appendChild(a),XI(a,e.end)})),And:eh(VI),Or:eh(VI),Not:eh((function(t,e,r){var n={node:t},i=e.condition;ch(n,UI,nh(i.getTagName()),[i],r)})),BBOX:eh((function(t,e,r){r[r.length-1].srsName=e.srsName,WI(t,e.geometryName),rb.prototype.writeGeometryElement(t,e.extent,r)})),Contains:eh((function(t,e,r){r[r.length-1].srsName=e.srsName,WI(t,e.geometryName),rb.prototype.writeGeometryElement(t,e.geometry,r)})),Intersects:eh((function(t,e,r){r[r.length-1].srsName=e.srsName,WI(t,e.geometryName),rb.prototype.writeGeometryElement(t,e.geometry,r)})),Within:eh((function(t,e,r){r[r.length-1].srsName=e.srsName,WI(t,e.geometryName),rb.prototype.writeGeometryElement(t,e.geometry,r)})),PropertyIsEqualTo:eh(YI),PropertyIsNotEqualTo:eh(YI),PropertyIsLessThan:eh(YI),PropertyIsLessThanOrEqualTo:eh(YI),PropertyIsGreaterThan:eh(YI),PropertyIsGreaterThanOrEqualTo:eh(YI),PropertyIsNull:eh((function(t,e,r){WI(t,e.propertyName)})),PropertyIsBetween:eh((function(t,e,r){WI(t,e.propertyName);var n=Zc(kI,"LowerBoundary");t.appendChild(n),HI(n,""+e.lowerBoundary);var i=Zc(kI,"UpperBoundary");t.appendChild(i),HI(i,""+e.upperBoundary)})),PropertyIsLike:eh((function(t,e,r){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString());WI(t,e.propertyName),HI(t,""+e.pattern)}))}};function qI(t,e,r){ch({node:t},UI,nh(e.getTagName()),[e],r)}function VI(t,e,r){for(var n={node:t},i=e.conditions,o=0,a=i.length;o<a;++o){var s=i[o];ch(n,UI,nh(s.getTagName()),[s],r)}}function YI(t,e,r){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),WI(t,e.propertyName),HI(t,""+e.expression)}function ZI(t,e,r){var n=Zc(kI,t);Oh(n,r),e.appendChild(n)}function WI(t,e){ZI("PropertyName",t,e)}function HI(t,e){ZI("Literal",t,e)}function XI(t,e){var r=Zc(X_,"TimeInstant");t.appendChild(r);var n=Zc(X_,"timePosition");r.appendChild(n),Oh(n,e)}var KI=FI,JI=r(205),QI=r.n(JI),$I=r(206),tL=r.n($I);function eL(t){return(eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==eL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==eL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===eL(o)?o:String(o)),n)}var i,o}function nL(t,e){return(nL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=aL(t);if(e){var i=aL(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return oL(this,r)}}function oL(t,e){if(e&&("object"===eL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function aL(t){return(aL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nL(t,e)}(o,t);var e,r,n,i=iL(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{})).facadeMap_=null,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,mu.call(this,{element:e,target:null}),t.getMapImpl().addControl(this)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"getElement",value:function(){return this.element}}])&&rL(e.prototype,r),n&&rL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(mu);function uL(t){return(uL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lL(t){return function(t){if(Array.isArray(t))return cL(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return cL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cL(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==uL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==uL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===uL(o)?o:String(o)),n)}var i,o}function fL(t,e){return(fL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mL(t);if(e){var i=mL(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return dL(this,r)}}function dL(t,e){if(e&&("object"===uL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mL(t){return(mL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fL(t,e)}(a,t);var e,r,n,i=pL(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).userFormats=["text/html","text/plain","application/vnd.ogc.gml"],r.featureCount=e.featureCount,XU(r.featureCount)&&(r.featureCount=10),r.buffer=e.buffer||5,r.element=document.createElement("div"),r.activated=t,r.currentFormat=0,r}return e=a,n=[{key:"insert",value:function(t,e){var r=!1;switch(e){case"text/html":var n=document.createElement("div");n.innerHTML=t;var i="";Array.prototype.forEach.call(n.querySelectorAll("body"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("div"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("table"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("b"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("span"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("input"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("a"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("img"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("p"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("ul"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("li"),(function(t){i+=t.innerHTML.trim()})),i.length>0&&!/WMS\s+server\s+error/i.test(t)&&(r=!0);break;case"application/vnd.ogc.gml":r=(new KI).readFeatures(t).length>0;break;case"text/plain":/returned\s+no\s+results/i.test(t)||/features\s+were\s+found/i.test(t)||/:$/i.test(t)||(r=!0)}return r}},{key:"unsupportedFormat",value:function(t,e){var r=!1;return"text/html"===e&&(r=a.regExs.msUnsupportedFormat.test(t)),r}}],(r=[{key:"addTo",value:function(t,e){!1===t.getMapImpl().getControls().getArray().some((function(t){return t instanceof a}))&&(this.facadeMap_=t,t.getMapImpl().addControl(this),this.addOnClickEvent_())}},{key:"deleteOnClickEvent_",value:function(){Hi(this.clickEventKey_)}},{key:"addOnClickEvent_",value:function(){var t=this,e=this.facadeMap_.getMapImpl();!0===this.activated&&(this.clickEventKey_=e.on("singleclick",(function(e){return t.buildUrl_(o,e)})))}},{key:"buildUrl_",value:function(t,e){this.evt=e;var r=this.facadeMap_.getMapImpl(),n=this.buildWMSInfoURL(this.facadeMap_.getWMS()),i=this.buildWMTSInfoURL(this.facadeMap_.getWMTS()),o=[].concat(lL(i),lL(n)).filter((function(t){return!XU(t)}));o.length>0?this.showInfoFromURL_(o,e.coordinate,r):t.info("No existen capas consultables")}},{key:"buildWMSInfoURL",value:function(t){var e=this,r=this.facadeMap_.getMapImpl().getView().getResolution(),n=this.facadeMap_.getProjection().code;return t.map((function(t){var i,o=t.getImpl().getOL3Layer();if(t.isVisible()&&t.isQueryable()&&!XU(o)){i={};var a={INFO_FORMAT:e.userFormats[e.currentFormat],FEATURE_COUNT:e.featureCount},s=o.getSource(),u=e.evt.coordinate;/buffer/i.test(t.url)||(a.BUFFER=e.buffer);var l=s.getFeatureInfoUrl(u,r,n,a);i={layer:t.legend||t.name,url:l}}return i}))}},{key:"buildWMTSInfoURL",value:function(t){var e=this;return t.map((function(t){var r;if(t.isVisible()&&t.isQueryable()){r={};var n=e.userFormats[e.currentFormat],i=e.evt.coordinate,o=t.getFeatureInfoUrl(i,e.facadeMap_.getZoom(),n);r={layer:t.legend||t.name,url:o}}return r}))}},{key:"formatInfo",value:function(t,e,r){var n=null;switch(e){case"text/html":n=t;break;case"application/vnd.ogc.gml":var i=(new KI).readFeatures(t);n="",i.forEach((function(t){var e=t.getKeys();n+="<div class='divinfo'>",n+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>' ".concat(hq(r)," '</td></tr>'");for(var i=0,o=e.length;i<o;i+=1){var a=e[i],s=t.get(a);n+='<tr><td class="key"><b>',n+=hq(a),n+='</b></td><td class="value">',n+=s,n+="</td></tr>"}n+="</tbody></table></div>"}));break;case"text/plain":n=a.regExs.gsResponse.test(t)?this.txtToHtmlGeoserver(t,r):this.txtToHtmlMapserver(t,r)}return n}},{key:"txtToHtmlGeoserver",value:function(t,e){var r=t,n=(r=(r=r.replace(/[\w\s\S]*':/i,"")).replace(/---(-*)(n+)---(-*)/g,"#newfeature#")).split("\n"),i="<div class='divinfo'>";i+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(hq(e),"</td></tr>");for(var o=0,s=n.length;o<s;o+=1){var u=n[o].trim();if(-1!==u.indexOf("=")){var l=u.split("="),c=l[0].trim(),h="-";l.length>1&&(0!==(h=l[1].trim()).length&&"null"!==h||(h="-")),!1===a.regExs.gsGeometry.test(c)&&(i+='<tr><td class="key"><b>',i+=hq(c),i+='</b></td><td class="value">',i+=h,i+="</td></tr>")}else a.regExs.gsNewFeature.test(u)&&(i+='<tr><td class="header" colspan="3">'.concat(hq(e),"</td></tr>"))}return i+="</tbody></table></div>"}},{key:"txtToHtmlMapserver",value:function(t){for(var e=t,r=(e=e.replace(/[\w\s\S]*(layer)/i,"$1")).replace(/layer(\s*)'(\w+)'[\w\s\S]*/i,"$2"),n=(e=(e=(e=(e=e.replace(/layer(\s*)'(\w+)'([\w\s\S]*)/i,"$3")).replace(/feature(\s*)(\w*)(\s*)(:)([\w\s\S]*)/i,"$5")).replace(/'/g,"")).replace(/=/g,";")).split("\n"),i="",o="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(hq(r),"</td></tr>"),s=0,u=n.length;s<u;s+=1){var l=n[s].trim(),c=n[s]?n[s].trim():"",h=l.split(";"),f=h[0].trim(),p="-";h.length>1&&0===(p=h[1].trim()).length&&(p="-"),f.length>0&&(a.regExs.msNewFeature.test(f)?c.length>0&&!a.regExs.msNewFeature.test(c)&&(i+="<tr><td class='header' colspan='3'>".concat(hq(r),"</td><td></td></tr>")):(i+='<tr><td class="key"><b>',i+=hq(f),i+='</b></td><td class="value">',i+=p,i+="</td></tr>"))}return i.length>0&&(i="".concat(o+i,"</tbody></table>")),i}},{key:"showInfoFromURL_",value:function(t,e,r){var n=this,i=sp(QI.a,{vars:{info:a.LOADING_MESSAGE},parseToHtml:!1}),s=[],u=this.userFormats[this.currentFormat],l=0,c={icon:"g-cartografia-info",title:a.POPUP_TITLE,content:i},h=this.facadeMap_.getPopup();XU(h)?((h=new vw).addTab(c),this.facadeMap_.addPopup(h,e)):h.getTabs().some((function(t){return t.title!==a.POPUP_TITLE}))?h.addTab(c):(this.facadeMap_.removePopup(),(h=new vw).addTab(c),this.facadeMap_.addPopup(h,e)),t.forEach((function(e){var r=e.url,i=e.layer;jU(r).then((function(e){if(h=n.facadeMap_.getPopup(),200===e.code&&!1===e.error){var r=e.text;if(!0===a.insert(r,u)){var f=n.formatInfo(r,u,i);s.push({formatedInfo:f,layerName:i})}else if(a.unsupportedFormat(r,u)){if(!(n.currentFormat>2))return n.currentFormat+=1,void n.buildUrl_(o,n.evt);s.push({formatedInfo:Hf("getfeatureinfo").any_format,layerName:i})}}if(l+=1,t.length===l&&!XU(h))if(h.removeTab(c),0===s.length)h.addTab({icon:"g-cartografia-info",title:a.POPUP_TITLE,content:Hf("getfeatureinfo").no_info});else{var p=sp(tL.a,{vars:{layers:s,info_of:Hf("getfeatureinfo").info_of},parseToHtml:!1}).replace(/(.*)(<a href=.*)(>.*<\/a.*)/g,'$1$2 target="_blank"$3');h.addTab({icon:"g-cartografia-info",title:a.POPUP_TITLE,content:p,listeners:[{selector:".m-getfeatureinfo-content-info div.m-arrow-right",all:!0,type:"click",callback:function(t){return n.toogleSection(t)}}]})}}))})),this.popup_=h}},{key:"toogleSection",value:function(t){var e=t.target,r=e.parentElement.parentElement.querySelector(".m-getfeatureinfo-content-info-body");if(r.classList.contains("m-content-collapsed")){r.classList.remove("m-content-collapsed"),e.classList.remove("m-arrow-right"),e.classList.add("m-arrow-down");var n=this.popup_.getCoordinate();XU(this.popup_.getImpl().panIntoView)||this.popup_.getImpl().panIntoView(n)}else r.classList.add("m-content-collapsed"),e.classList.add("m-arrow-right"),e.classList.remove("m-arrow-down")}}])&&hL(e.prototype,r),n&&hL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(sL);yL.LOADING_MESSAGE="Obteniendo información...",yL.POPUP_TITLE=Hf("getfeatureinfo").info,yL.regExs={gsResponse:/^results[\w\s\S]*'http:/i,msNewFeature:/feature(\s*)(\w+)(\s*):/i,gsNewFeature:/#newfeature#/,gsGeometry:/geom$/i,msGeometry:/boundedby$/i,msUnsupportedFormat:/error(.*)unsupported(.*)info_format/i};var gL=yL;function vL(t){return(vL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==vL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===vL(o)?o:String(o)),n)}var i,o}function wL(t,e){return(wL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ML(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xL(t);if(e){var i=xL(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return SL(this,r)}}function SL(t,e){if(e&&("object"===vL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xL(t){return(xL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var EL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wL(t,e)}(o,t);var e,r,n,i=ML(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_L(this,o);var n=new gL(t,r);return e=i.call(this,n,o.NAME),YU(gL)&&Af(Hf("exception").getfeatureinfo_method),e}return e=o,(r=[{key:"createView",value:function(t){return""}},{key:"getActivationButton",value:function(t){return null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}}])&&bL(e.prototype,r),n&&bL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ep);EL.NAME="getfeatureinfo";var OL=EL,PL=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TL="accuracy",IL="accuracyGeometry",LL="altitude",RL="altitudeAccuracy",CL="heading",AL="position",kL="projection",NL="speed",jL="tracking",FL="trackingOptions",DL=function(t){function e(e){var r=t.call(this,ki)||this;return r.code=e.code,r.message=e.message,r}return PL(e,t),e}(Li),BL=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.position_=null,r.transform_=Un,r.watchId_=void 0,r.addEventListener(to(kL),r.handleProjectionChanged_),r.addEventListener(to(jL),r.handleTrackingChanged_),void 0!==n.projection&&r.setProjection(n.projection),void 0!==n.trackingOptions&&r.setTrackingOptions(n.trackingOptions),r.setTracking(void 0!==n.tracking&&n.tracking),r}return PL(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Jn(Vn("EPSG:4326"),t),this.position_&&this.set(AL,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(TL,e.accuracy),this.set(LL,null===e.altitude?void 0:e.altitude),this.set(RL,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(CL,null===e.heading?void 0:fr(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var r=this.transform_(this.position_);this.set(AL,r),this.set(NL,null===e.speed?void 0:e.speed);var n=Rs(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(IL,n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new DL(t))},e.prototype.getAccuracy=function(){return this.get(TL)},e.prototype.getAccuracyGeometry=function(){return this.get(IL)||null},e.prototype.getAltitude=function(){return this.get(LL)},e.prototype.getAltitudeAccuracy=function(){return this.get(RL)},e.prototype.getHeading=function(){return this.get(CL)},e.prototype.getPosition=function(){return this.get(AL)},e.prototype.getProjection=function(){return this.get(kL)},e.prototype.getSpeed=function(){return this.get(NL)},e.prototype.getTracking=function(){return this.get(jL)},e.prototype.getTrackingOptions=function(){return this.get(FL)},e.prototype.setProjection=function(t){this.set(kL,Vn(t))},e.prototype.setTracking=function(t){this.set(jL,t)},e.prototype.setTrackingOptions=function(t){this.set(FL,t)},e}(eo);function GL(t){return(GL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==GL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==GL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===GL(o)?o:String(o)),n)}var i,o}function UL(){return(UL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=qL(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function qL(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WL(t)););return t}function VL(t,e){return(VL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function YL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=WL(t);if(e){var i=WL(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ZL(this,r)}}function ZL(t,e){if(e&&("object"===GL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function WL(t){return(WL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var HL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VL(t,e)}(o,t);var e,r,n,i=YL(o);function o(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(a=i.call(this,n)).vendorOptions_=n,a.geolocation_=null,a.accuracyFeature_=Dq.olFeature2Facade(new dy),a.tracking_=t,a.highAccuracy_=e,a.maximumAge_=r,a.activated_=!1,a.positionFeature_=Dq.olFeature2Facade(new dy({style:o.POSITION_STYLE})),a}return e=o,(r=[{key:"activate",value:function(){var t=this;if(this.element.classList.add("m-locating"),XU(this.geolocation_)){var e=Vn(this.facadeMap_.getProjection().code);this.geolocation_=new BL(dq({projection:e,tracking:this.tracking_,trackingOptions:{enableHighAccuracy:this.highAccuracy_,maximumAge:this.maximumAge_}},this.vendorOptions_,!0)),this.geolocation_.on("change:accuracyGeometry",(function(e){var r=e.target.get(e.key);t.accuracyFeature_.getImpl().getOLFeature().setGeometry(r)})),this.geolocation_.once("change:position",(function(e){var r=e.target.get(e.key),n=XU(r)?null:new ds(r);t.positionFeature_.getImpl().getOLFeature().setGeometry(n),t.facadeMap_.setCenter(r),t.element.classList.contains("m-locating")&&t.facadeMap_.setZoom(o.ZOOM),t.element.classList.remove("m-locating"),t.element.classList.add("m-located"),t.geolocation_.setTracking(t.tracking_)}))}this.geolocation_.setTracking(!0),this.facadeMap_.drawFeatures([this.accuracyFeature_])}},{key:"removePositions_",value:function(){XU(this.accuracyFeature_)||this.facadeMap_.removeFeatures([this.accuracyFeature_]),XU(this.positionFeature_)||this.facadeMap_.removeFeatures([this.positionFeature_]),this.geolocation_.setTracking(!1)}},{key:"deactivate",value:function(){this.removePositions_(),this.element.classList.remove("m-located"),this.element.classList.remove("m-locating"),this.geolocation_=null}},{key:"setTracking",value:function(t){this.tracking_=t,this.geolocation_.setTracking(t)}},{key:"destroy",value:function(){this.removePositions_(),UL(WL(o.prototype),"destroy",this).call(this)}}])&&zL(e.prototype,r),n&&zL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(sL);HL.POSITION_STYLE=new MM({image:new pM({radius:6,fill:new dM({color:"#3399CC"}),stroke:new mM({color:"#fff",width:2})})}),HL.ZOOM=16;var XL=HL,KL=r(207),JL=r.n(KL);r(229);function QL(t){return(QL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==QL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==QL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===QL(o)?o:String(o)),n)}var i,o}function eR(t,e){return(eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=iR(t);if(e){var i=iR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return nR(this,r)}}function nR(t,e){if(e&&("object"===QL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function iR(t){return(iR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eR(t,e)}(o,t);var e,r,n,i=rR(o);function o(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$L(this,o),YU(XL)&&Af(Hf("exception").location_method);var n=new XL(t,e,6e4,r);return i.call(this,n,o.NAME)}return e=o,(r=[{key:"createView",value:function(t){return sp(JL.a,{vars:{title:Hf("location").title}})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-location-button")}},{key:"equals",value:function(t){var e=t instanceof o;return e}},{key:"setTracking",value:function(t){this.getImpl().tracking=t}}])&&tR(e.prototype,r),n&&tR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ep);oR.NAME="location";var aR=oR,sR=(r(57),r(208)),uR=r.n(sR);function lR(t){return(lR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==lR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===lR(o)?o:String(o)),n)}var i,o}function fR(){return(fR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=pR(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function pR(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gR(t)););return t}function dR(t,e){return(dR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=gR(t);if(e){var i=gR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yR(this,r)}}function yR(t,e){if(e&&("object"===lR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function gR(t){return(gR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vR=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},_R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dR(t,e)}(o,t);var e,r,n,i=mR(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return cR(this,o),(t=i.call(this)).facadeMap_=null,t.exactScale=e.exactScale||!1,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.scaleContainer_=e.querySelector("#".concat("m-scale-span")),this.element=e,this.render=this.renderCB,this.target_=null,t.getMapImpl().addControl(this)}},{key:"renderCB",value:function(t){var e=t.frameState;XU(e)||function(t,e,r,n){var i,o=e;r.getWMTS().length>0||r.getWMTS().length<=0&&!0===n?i=Zy.getWMTSScale(r,n):r.getWMTS().length<=0&&1==!n&&(i=r.getScale()),XU(i)||(o.innerHTML=vR(i));var a=document.querySelector("#m-level-number");null!==a&&(a.innerHTML=Math.round(r.getZoom(),2))}(e.viewState,this.scaleContainer_,this.facadeMap_,this.exactScale)}},{key:"destroy",value:function(){fR(gR(o.prototype),"destroy",this).call(this),this.scaleContainer_=null}}])&&hR(e.prototype,r),n&&hR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(sL);function bR(t){return(bR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==bR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==bR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===bR(o)?o:String(o)),n)}var i,o}function SR(t,e){return(SR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=OR(t);if(e){var i=OR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ER(this,r)}}function ER(t,e){if(e&&("object"===bR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function OR(t){return(OR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var PR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SR(t,e)}(o,t);var e,r,n,i=xR(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wR(this,o);var r=new _R(e);return t=i.call(this,r,o.NAME),YU(_R)&&Af(Hf("exception").scale_method),t.order=e.order,t}return e=o,(r=[{key:"createView",value:function(t){return sp(uR.a,{vars:{title:Hf("scale").title,scale:Hf("scale").scale,level:Hf("scale").level,order:this.order}})}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&MR(e.prototype,r),n&&MR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ep);PR.NAME="scale";var TR=PR;r(230);function IR(t){return(IR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==IR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==IR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===IR(o)?o:String(o)),n)}var i,o}function RR(){return(RR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=CR(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function CR(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jR(t)););return t}function AR(t,e){return(AR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jR(t);if(e){var i=jR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return NR(this,r)}}function NR(t,e){if(e&&("object"===IR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jR(t){return(jR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var FR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AR(t,e)}(o,t);var e,r,n,i=kR(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){var r=this;RR(jR(o.prototype),"addTo",this).call(this,t,e);var n=t.getMapImpl();this.panel=e,this.panel.querySelector("button").addEventListener("click",(function(){n.getView().setRotation(0)})),this.addRotationEvent(n),n.on("change:view",(function(t){r.addRotationEvent(t.target)}))}},{key:"addRotationEvent",value:function(t){var e=this;t.getView().on("change:rotation",(function(t){var r=t.target.getRotation(),n="rotate(".concat(360*r/(2*Math.PI),"deg)");e.panel.querySelector("button").style.transform=n}))}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&LR(e.prototype,r),n&&LR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(sL);FR.PANEL_ID="m-layerswitcher-panel";var DR=FR,BR=r(209),GR=r.n(BR);function zR(t){return(zR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==zR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===zR(o)?o:String(o)),n)}var i,o}function qR(t,e){return(qR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function VR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ZR(t);if(e){var i=ZR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return YR(this,r)}}function YR(t,e){if(e&&("object"===zR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ZR(t){return(ZR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qR(t,e)}(o,t);var e,r,n,i=VR(o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),YU(DR)&&Af("La implementación usada no puede crear controles Scale");var t=new DR;return i.call(this,t,o.NAME)}return e=o,(r=[{key:"createView",value:function(t){return sp(GR.a,{vars:{title:Hf("rotate").title}})}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&UR(e.prototype,r),n&&UR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ep);WR.NAME="rotate";var HR=WR,XR=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),KR="degrees",JR="imperial",QR="nautical",$R="metric",tC="us",eC=[1,2,5];function rC(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}var nC=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(r=t.call(this,{element:document.createElement("div"),render:n.render||rC,target:n.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=i+"-inner",r.element.className=i+" ol-unselectable",r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==n.minWidth?n.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addEventListener(to("units"),r.handleUnitsChanged_),r.setUnits(n.units||$R),r.scaleBar_=n.bar||!1,r.scaleBarSteps_=n.steps||4,r.scaleBarText_=n.text||!1,r}return XR(e,t),e.prototype.getUnits=function(){return this.get("units")},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set("units",t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n==KR?or.DEGREES:or.METERS,o=Yn(r,t.resolution,e,i),a=this.minWidth_*o,s="";if(n==KR){var u=ir[or.DEGREES];(a*=u)<u/60?(s="″",o*=3600):a<u?(s="′",o*=60):s="°"}else n==JR?a<.9144?(s="in",o/=.0254):a<1609.344?(s="ft",o/=.3048):(s="mi",o/=1609.344):n==QR?(o/=1852,s="nm"):n==$R?a<.001?(s="μm",o*=1e6):a<1?(s="mm",o*=1e3):a<1e3?s="m":(s="km",o/=1e3):n==tC?a<.9144?(s="in",o*=39.37):a<1609.344?(s="ft",o/=.30480061):(s="mi",o/=1609.3472):Or(!1,33);for(var l,c,h,f,p=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){h=Math.floor(p/3);var d=Math.pow(10,h);if(l=eC[(p%3+3)%3]*d,c=Math.round(l/o),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;++p}f=this.scaleBar_?this.createScaleBar(c,l,s):l.toFixed(h<0?-h:0)+" "+s,this.renderedHTML_!=f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,r){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,r):"")+"</div>"),s===this.scaleBarSteps_-1&&i.push(this.createStepText(s+1,t,!0,e,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,r,n,i){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(r?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=this.getMap().getView().getResolution(),e=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*e*39.37*(25.4/.28)},e}(mu);function iC(t){return(iC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==iC(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==iC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===iC(o)?o:String(o)),n)}var i,o}function aC(t,e){return(aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=lC(t);if(e){var i=lC(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uC(this,r)}}function uC(t,e){if(e&&("object"===iC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function lC(t){return(lC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cC="degrees",hC="imperial",fC="nautical",pC="metric",dC="us",mC=[1,2,5],yC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aC(t,e)}(o,t);var e,r,n,i=sC(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,yi(this),di(this,to("units"),this.handleUnitsChanged,this),t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"handleUnitsChanged_",value:function(){this.updateElement_()}},{key:"updateElement_",value:function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n===cC?or.DEGREES:or.METERS,o=Yn(r,t.resolution,e,i);r.getUnits()!==or.DEGREES&&r.getMetersPerUnit()&&i===or.METERS&&(o*=r.getMetersPerUnit()),"d"===r.getUnits()&&(o/=12e4);var a=this.minWidth_*o,s="";if(n===cC){var u=ir[or.DEGREES];r.getUnits()===or.DEGREES?a*=u:o/=u,a<u/60?(s="″",o*=3600):a<u?(s="′",o*=60):s="°"}else n===hC?a<.9144?(s="in",o/=.0254):a<1609.344?(s="ft",o/=.3048):(s="mi",o/=1609.344):n===fC?(o/=1852,s="nm"):n===pC?a<.001?(s="μm",o*=1e6):a<1?(s="mm",o*=1e3):a<1e3?s="m":(s="km",o/=1e3):n===dC?a<.9144?(s="in",o*=39.37):a<1609.344?(s="ft",o/=.30480061):(s="mi",o/=1609.3472):Or(!1,33);for(var l,c,h=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){if(l=mC[(h%3+3)%3]*Math.pow(10,Math.floor(h/3)),c=Math.round(l/o),Number.isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;h+=1}var f=l.toString().concat(" ").concat(s);this.renderedHTML_!==f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!==c&&(this.innerElement_.style.width=c.toString().concat("px"),this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}}])&&oC(e.prototype,r),n&&oC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(nC),gC=r(210),vC=r.n(gC);function _C(t){return(_C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==_C(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_C(o)?o:String(o)),n)}var i,o}function MC(t,e){return(MC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function SC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=EC(t);if(e){var i=EC(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xC(this,r)}}function xC(t,e){if(e&&("object"===_C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function EC(t){return(EC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MC(t,e)}(o,t);var e,r,n,i=SC(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bC(this,o);var r=new yC(e);return t=i.call(this,r,o.NAME),YU(yC)&&Af(Hf("exception").scaleline_method),t}return e=o,(r=[{key:"createView",value:function(t){return sp(vC.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&wC(e.prototype,r),n&&wC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ep);OC.NAME="scaleline";var PC=OC,TC=r(211),IC=r.n(TC);function LC(t){return(LC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==LC(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==LC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===LC(o)?o:String(o)),n)}var i,o}function CC(t,e){return(CC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function AC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=NC(t);if(e){var i=NC(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kC(this,r)}}function kC(t,e){if(e&&("object"===LC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function NC(t){return(NC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CC(t,e)}(o,t);var e,r,n,i=AC(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&RC(e.prototype,r),n&&RC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Iu);function FC(t){return(FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==FC(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==FC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===FC(o)?o:String(o)),n)}var i,o}function GC(t,e){return(GC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qC(t);if(e){var i=qC(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return UC(this,r)}}function UC(t,e){if(e&&("object"===FC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function qC(t){return(qC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var VC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GC(t,e)}(o,t);var e,r,n,i=zC(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DC(this,o);var r=new jC(e);return t=i.call(this,r,o.NAME),YU(jC)&&Af(Hf("exception").panzoom_method),t}return e=o,(r=[{key:"createView",value:function(t){return sp(IC.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&BC(e.prototype,r),n&&BC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ep);VC.NAME="panzoom";var YC=VC,ZC=r(212),WC=r.n(ZC),HC=(r(231),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),XC=function(t){function e(e){var r=this,n=void 0!==e.requestEncoding?e.requestEncoding:sb,i=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=lv(e.url)),(r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:uv,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",r.format_=void 0!==e.format?e.format:"image/jpeg",r.dimensions_=void 0!==e.dimensions?e.dimensions:{},r.layer_=e.layer,r.matrixSet_=e.matrixSet,r.style_=e.style,r.requestEncoding_=n,r.setKey(r.getKeyForDimensions_()),o&&o.length>0&&(r.tileUrlFunction=sv(o.map(JC.bind(r)))),r}return HC(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(sv(t.map(JC.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var r in this.dimensions_)e[t++]=r+"-"+this.dimensions_[r];return e.join("/")},e.prototype.updateDimensions=function(t){An(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(Iv);function KC(t,e){var r=Si(t.Contents.Layer,(function(t,r,n){return t.Identifier==e.layer}));if(null===r)return null;var n,i=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?Ei(r.TileMatrixSetLink,"projection"in e?function(t,r,n){var o=Si(i,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=Vn(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Vn(o),s=Vn(e.projection);return a&&s?Kn(a,s):o==e.projection}:function(t,r,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=r.TileMatrixSetLink[n].TileMatrixSet,a=r.TileMatrixSetLink[n].TileMatrixSetLimits,s=r.Format[0];"format"in e&&(s=e.format),(n=Ei(r.Style,(function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(n=0);var u=r.Style[n].Identifier,l={};"Dimension"in r&&r.Dimension.forEach((function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),l[n]=i}));var c,h=Si(t.Contents.TileMatrixSet,(function(t,e,r){return t.Identifier==o})),f=h.SupportedCRS;if(f&&(c=Vn(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Vn(f)),"projection"in e){var p=Vn(e.projection);p&&(c&&!Kn(p,c)||(c=p))}var d=h.TileMatrix[0],m=28e-5*d.ScaleDenominator,y=c===Vn("EPSG:4326")?[d.TopLeftCorner[1],d.TopLeftCorner[0]]:d.TopLeftCorner,g=d.TileWidth*m,v=d.TileHeight*m,_=[y[0],y[1]-v*d.MatrixHeight,y[0]+g*d.MatrixWidth,y[1]];null===c.getExtent()&&c.setExtent(_);var b=ab(h,_,a),w=[],M=e.requestEncoding;if(M=void 0!==M?M:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var S=t.OperationsMetadata.GetTile.DCP.HTTP.Get,x=0,E=S.length;x<E;++x)if(S[x].Constraint){var O=Si(S[x].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===M&&(M=O[0]),M!==sb)break;_i(O,sb)&&w.push(S[x].href)}else S[x].href&&(M=sb,w.push(S[x].href));return 0===w.length&&(M=ub,r.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,w.push(t.template))}))),{urls:w,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:M,tileGrid:b,style:u,dimensions:l,wrapX:!1,crossOrigin:e.crossOrigin}}function JC(t){var e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==sb&&An(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==sb?kv(t,r):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t}));var n=this.tileGrid,i=this.dimensions_;return function(r,o,a){if(r){var s={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};An(s,i);var u=t;return u=e==sb?kv(u,s):u.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]}))}}}function QC(t){return(QC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $C(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */$C=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new E(i||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function f(){}function p(){}function d(){}var m={};u(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(O([])));g&&g!==e&&r.call(g,o)&&(m=g);var v=d.prototype=f.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==QC(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return P()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=M(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function M(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,M(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=d,n(v,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},_(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(v),u(v,s,"Generator"),u(v,o,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function tA(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function eA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==QC(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==QC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===QC(o)?o:String(o)),n)}var i,o}function nA(t,e){return(nA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=aA(t);if(e){var i=aA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return oA(this,r)}}function oA(t,e){if(e&&("object"===QC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function aA(t){return(aA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nA(t,e)}(s,t);var e,r,n,i,o,a=iA(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return eA(this,s),(t=a.call(this,e,r)).facadeLayer_=null,t.capabilitiesOptionsPromise=null,t.getCapabilitiesPromise_=null,t.minZoom=e.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=e.maxZoom||Number.POSITIVE_INFINITY,t.options=e,t.useCapabilities=!1!==e.useCapabilities,t}return e=s,(r=[{key:"addTo",value:function(t){var e=this;if(this.map=t,this.fire("added:map"),!WU(this.options)&&!WU(this.options.minScale)&&!WU(this.options.maxScale)){var r=this.map.getMapImpl().getView().getProjection().getUnits();this.options.minResolution=sq(this.options.minScale,r),this.options.maxResolution=sq(this.options.maxScale,r)}this.useCapabilities?this.getCapabilitiesOptions_().then((function(t){return e.addLayer_(t)})):this.addLayerNotCapabilities_()}},{key:"setResolutions",value:function(t){var e=this;if(XU(this.vendorOptions_.source)){var r=this.facadeLayer_.getMaxExtent(),n=Vn(this.map.getProjection().code);this.getCapabilities().then((function(i){var o=i.getMatrixSet(e.name),a=i.getMatrixIds(e.name),s=i.getFormat(e.name),u=new XC({url:e.url,layer:e.name,matrixSet:o,format:s,projection:n,tileGrid:new ob({origin:on(r),resolutions:t,matrixIds:a}),extent:r});e.ol3Layer.setSource(u)}))}}},{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().filter((function(t){return!t.equals(e)&&t.isVisible()})).forEach((function(t){return t.setVisible(!1)})),XU(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),XU(r)||this.map.setBbox(r)}else XU(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addLayer_",value:function(t){var e=this;if(!XU(this.map)){var r=this.facadeLayer_.getMaxExtent(),n=t,i=this.options.minResolution,o=this.options.maxResolution;n.format=this.options.format||t.format;var a=new XC(dq(n,{extent:r},!0));this.facadeLayer_.setFormat(n.format),this.ol3Layer=new $m(dq({visible:this.visibility,source:a,minResolution:i,maxResolution:o},this.vendorOptions_,!0));var s=this.zIndex_;this.map.getMapImpl().addLayer(this.ol3Layer),setTimeout((function(){e.ol3Layer.setMaxZoom(e.maxZoom),e.ol3Layer.setMinZoom(e.minZoom)}),500),null!==s&&this.setZIndex(s),this.ol3Layer.set("animated",!0),this.fire("added:map",this)}}},{key:"addLayerNotCapabilities_",value:function(){var t=this;if(!XU(this.map)){for(var e=this.facadeLayer_.getMaxExtent(),r=this.options.minResolution,n=this.options.maxResolution,i=this.options.format?this.options.format:"image/png",o=dn(e)/256,a=new Array(19),s=new Array(19),u=0;u<19;++u)a[u]=o/Math.pow(2,u),s[u]=u;var l=new ob({origin:fn(e),resolutions:a,matrixIds:s}),c=new XC({attributions:" https://www.ign.es/",url:this.url,layer:this.name,matrixSet:this.options.matrixSet,format:this.options.format,projection:Vn(this.map.getProjection().code),tileGrid:l},e,!0);this.facadeLayer_.setFormat(i),this.ol3Layer=new $m(dq({visible:this.visibility,source:c,minResolution:r,maxResolution:n},this.vendorOptions_,!0));var h=this.zIndex_;this.map.getMapImpl().addLayer(this.ol3Layer),setTimeout((function(){t.ol3Layer.setMaxZoom(t.maxZoom),t.ol3Layer.setMinZoom(t.minZoom)}),500),null!==h&&this.setZIndex(h),this.ol3Layer.set("animated",!0),this.fire("added:map",this)}}},{key:"setMaxExtent",value:function(t){this.getOL3Layer().setExtent(t)}},{key:"getCapabilitiesOptions_",value:(i=$C().mark((function t(){var e,r,n,i,o,a,s,u,l,c,h,f=this;return $C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!XU(this.capabilitiesOptionsPromise)){t.next=21;break}return(e=this.map.collectionCapabilities.find((function(t){return t.url===f.url}))).capabilities?this.capabilitiesOptionsPromise=e.capabilities:this.capabilitiesOptionsPromise=this.getCapabilities(),t.next=5,this.capabilitiesOptionsPromise;case 5:return r=t.sent,n=this.name,i=this.matrixSet,XU(i)&&(i=this.map.getProjection().code),o=r.Contents.Layer,HU(o)&&(o=o.filter((function(t){return t.Identifier===f.facadeLayer_.name}))[0]),o.Style.length>0&&void 0!==o.Style[0].LegendURL&&(this.legendUrl_=o.Style[0].LegendURL.replaceAll("&amp;","&")),a=XU(o.Abstract)?"":o.Abstract,s=XU(o.Style)?"":o.Style,u=this.facadeLayer_.getMaxExtent(),l=XU(r.ServiceProvider)?"":r.ServiceProvider,c=lb(r,{layer:n,matrixSet:i,extent:u}),h={abstract:a,attribution:l,style:s},c.tileGrid.extent=u,void 0===this.facadeLayer_.capabilitiesMetadata&&(this.facadeLayer_.capabilitiesMetadata=h),t.abrupt("return",c);case 21:return t.abrupt("return",this.capabilitiesOptionsPromise);case 22:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){tA(o,r,n,a,s,"next",t)}function s(t){tA(o,r,n,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"getCapabilities",value:function(){var t=this,e=this.map.collectionCapabilities.find((function(e){return e.url===t.url}));return e.capabilities?this.getCapabilitiesPromise=e.capabilities:XU(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=new Promise((function(e,r){var n=oq(t.url),i=new uf;jU(n).then((function(r){var n=r.xml,o=i.read(n);try{o.Contents.Layer.forEach((function(t){var e=t.Identifier;t.Style.forEach((function(t){var n=r.text.split("Layer>").filter((function(t){return t.indexOf("Identifier>".concat(e,"<"))>-1}))[0];t.LegendURL=n.split("LegendURL")[1].split('xlink:href="')[1].split('"')[0]}))}))}catch(t){}e.call(t,o)}))})),e.capabilities=this.getCapabilitiesPromise_),this.getCapabilitiesPromise_}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"destroy",value:function(){var t=this.map.getMapImpl();XU(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof s&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.matrixSet===t.matrixSet),e}},{key:"getFeatureInfoUrl",value:function(t,e,r){var n=this.getTileColTileRow(t,e),i=this.getRelativeTileCoordInPixel_(t,e),o=this.name,a=this.matrixSet,s=r,u=n[0],l=n[1],c=i[0],h=i[1],f=e;return this.matrixSet.indexOf(":4326")>-1&&(f="".concat(this.matrixSet,":").concat(f)),rq(this.url,{service:"WMTS",request:"GetFeatureInfo",version:"1.0.0",layer:o,tilematrixset:a,tilematrix:f,tilerow:l,tilecol:u,J:h,I:c,infoFormat:s})}},{key:"getTileColTileRow",value:function(t,e){var r=null;if(!XU(this.ol3Layer)){var n=this.ol3Layer.getSource();XU(n)||(r=n.tileGrid.getTileCoordForCoordAndZ(t,e))}return r.slice(1)}},{key:"getRelativeTileCoordInPixel_",value:function(t,e){var r;if(!XU(this.ol3Layer)){var n=this.ol3Layer.getSource();if(!XU(n)){var i=n.tileGrid,o=i.getTileCoordForCoordAndZ(t,e),a=i.getTileCoordExtent(o,[]),s=i.getResolution(o[0]);r=[Math.floor((t[0]-a[0])/s),Math.floor((a[3]-t[1])/s)]}}return r}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}}])&&rA(e.prototype,r),n&&rA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(tg);function uA(t){return(uA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cA(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lA(Object(r),!0).forEach((function(e){hA(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lA(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hA(t,e,r){return(e=dA(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dA(n.key),n)}}function dA(t){var e=function(t,e){if("object"!==uA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==uA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===uA(e)?e:String(e)}function mA(t,e){return(mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=vA(t);if(e){var i=vA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gA(this,r)}}function gA(t,e){if(e&&("object"===uA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vA(t){return(vA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mA(t,e)}(o,t);var e,r,n,i=yA(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fA(this,o);var a=Tm(t,Sp),s=cA(cA({},r),a);void 0!==t.minZoom&&(s.minZoom=t.minZoom),void 0!==t.maxZoom&&(s.maxZoom=t.maxZoom);var u=new sA(s,n);return e=i.call(this,a,u),YU(sA)&&Af(Hf("exception").wmts_method),XU(t)&&Af(Hf("exception").no_param),e.matrixSet=a.matrixSet,e.legend=a.legend,e.transparent=a.transparent,e.options=s,e.useCapabilities=!1!==a.useCapabilities,XU(n.capabilitiesMetadata)||(e.capabilitiesMetadata=n.capabilitiesMetadata),e}return e=o,(r=[{key:"type",get:function(){return Sp},set:function(t){YU(t)||XU(t)||t===Sp||Af("El tipo de capa debe ser '".concat(Sp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"matrixSet",get:function(){return this.getImpl().matrixSet},set:function(t){this.getImpl().matrixSet=t}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){XU(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}},{key:"getCapabilities",value:function(){return XU(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.matrixSet===t.matrixSet),e}},{key:"getFeatureInfoUrl",value:function(t,e,r){return this.getImpl().getFeatureInfoUrl(t,e,r)}},{key:"getTileColTileRow",value:function(t,e){return this.getImpl().getTileColTileRow(t,e)}},{key:"setFormat",value:function(t){this.options.format=t}}])&&pA(e.prototype,r),n&&pA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fm),bA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wA=function(t){function e(e){var r=e||{},n=void 0!==r.projection?r.projection:"EPSG:3857",i=void 0!==r.tileGrid?r.tileGrid:dv({extent:gv(n),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:r.opaque,projection:n,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return bA(e,t),e}(Iv);function MA(t){return(MA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==MA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==MA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===MA(o)?o:String(o)),n)}var i,o}function EA(t,e){return(EA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=TA(t);if(e){var i=TA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PA(this,r)}}function PA(t,e){if(e&&("object"===MA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function TA(t){return(TA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EA(t,e)}(o,t);var e,r,n,i=OA(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return SA(this,o),(e=i.call(this,r,n)).url=t.url,e.tileSize_="number"==typeof t.tileSize?t.tileSize:256,e.opacity_="number"==typeof r.opacity?r.opacity:1,e.zIndex_=Lb.Z_INDEX[Ep],e.visibility=!1!==t.visibility||t.visibility,e.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,e.tileGridMaxZoom=t.tileGridMaxZoom,e.displayInLayerSwitcher=!1!==t.displayInLayerSwitcher,e}return e=o,(r=[{key:"setVisible",value:function(t){if(this.visibility=t,!0===t&&!0!==this.transparent){XU(this.ol3Layer)||this.ol3Layer.setVisible(t);var e=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),XU(e)||this.map.setZoom(e)}else XU(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){this.map=t;var e=Vn("EPSG:3857").getExtent();this.ol3Layer=new $m({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:e}),this.map.getMapImpl().addLayer(this.ol3Layer);var r=new wA({projection:this.map.getProjection().code,url:this.url,tileSize:this.getTileSize()});this.ol3Layer.setSource(r),void 0!==this.tileGridMaxZoom&&this.tileGridMaxZoom>0?this.ol3Layer.getSource().tileGrid.maxZoom=this.tileGridMaxZoom:(this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom))}},{key:"setTileUrlFunction",value:function(t){this.ol3Layer.getSource().setTileUrlFunction(t)}},{key:"getTileUrlFunction",value:function(){this.ol3Layer.getSource().getTileUrlFunction()}},{key:"getTileSize",value:function(){return this.tileSize_}},{key:"destroy",value:function(){var t=this.map.getMapImpl();XU(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}}])&&xA(e.prototype,r),n&&xA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(tg);function LA(t){return(LA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==LA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==LA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===LA(o)?o:String(o)),n)}var i,o}function AA(t,e){return(AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jA(t);if(e){var i=jA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return NA(this,r)}}function NA(t,e){if(e&&("object"===LA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jA(t){return(jA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var FA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AA(t,e)}(o,t);var e,r,n,i=kA(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return RA(this,o),(e=i.call(this,t,r,n)).zIndex_=Lb.Z_INDEX[Op],e.displayInLayerSwitcher=!1!==t.displayInLayerSwitcher,e}return e=o,(r=[{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}}])&&CA(e.prototype,r),n&&CA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(IA);function DA(t){return(DA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==DA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==DA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===DA(o)?o:String(o)),n)}var i,o}function zA(t,e){return(zA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function UA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=VA(t);if(e){var i=VA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qA(this,r)}}function qA(t,e){if(e&&("object"===DA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function VA(t){return(VA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zA(t,e)}(o,t);var e,r,n,i=UA(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};BA(this,o),YU(FA)&&Af(Hf("exception").tms_method);var a=Tm(t,Op),s=new FA(a,r,n);return(e=i.call(this,a,s)).url=a.url,e.name=a.name,e.legend=a.legend,e.minZoom=a.minZoom,e.maxZoom=a.maxZoom,e.tileGridMaxZoom=a.tileGridMaxZoom,e.options=r,e}return e=o,(r=[{key:"type",get:function(){return Op},set:function(t){YU(t)||XU(t)||t===Op||Af("El tipo de capa debe ser '".concat(Op).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}}])&&GA(e.prototype,r),n&&GA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fm);function ZA(t){return(ZA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ZA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ZA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ZA(o)?o:String(o)),n)}var i,o}function HA(t,e){return(HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=JA(t);if(e){var i=JA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return KA(this,r)}}function KA(t,e){if(e&&("object"===ZA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function JA(t){return(JA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HA(t,e)}(o,t);var e,r,n,i=XA(o);function o(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var a=new sL;return n=i.call(this,a,o.NAME),t.getBaseLayers().forEach((function(e){e.on(Uf,t.removeLayers(e))})),n.layers=M.config.backgroundlayers.slice(0,5).map((function(t){return{id:t.id,title:t.title,layers:t.layers.map((function(t){return/WMTS.*/.test(t)?new _A(t):/TMS.*/.test(t)?new YA(t):new D_(t)}))}})),n.flattedLayers=n.layers.reduce((function(t,e){return t.concat(e.layers)}),[]),n.activeLayer=-1,n.idLayer=null==e?0:e,n.visible=null==r||r,n}return e=o,(r=[{key:"createView",value:function(t){var e=this;return this.map=t,new Promise((function(t,r){var n=sp(WC.a,{vars:{layers:e.layers}});e.html=n,e.listen(n),e.uniqueButton=e.html.querySelector("#m-baselayerselector-unique-btn"),e.uniqueButton.innerHTML=e.layers[0].title,e.on("added:map",(function(){var t=e.visible;e.idLayer>-1&&(window.innerWidth>M.config.MOBILE_WIDTH&&(e.activeLayer=e.idLayer),e.showBaseLayer({target:{parentElement:n}},e.layers[e.activeLayer],e.activeLayer)),!1===t&&e.map_.removeLayers(e.map_.getBaseLayers())})),t(n)}))}},{key:"equals",value:function(t){return t instanceof o}},{key:"showBaseLayer",value:function(t,e,r){var n=this.handlerClickDesktop.bind(this);window.innerWidth<=M.config.MOBILE_WIDTH&&(n=this.handlerClickMobile.bind(this)),n(t,e,r)}},{key:"changeStyleResponsive",value:function(t){M.config.MOBILE_WIDTH=t?"2000":"768",document.querySelectorAll(".m-plugin-baselayer .m-panel-controls #div-contenedor button").forEach((function(e){e.classList.contains("m-background-unique-btn")?e.style.display=t?"block":"none":e.style.display=t?"none":"block"}))}},{key:"handlerClickDesktop",value:function(t,e,r){this.removeLayers(),this.visible=!1;var n=e.layers,i=e.title,o=t.target.parentElement.querySelector("#m-baselayerselector-".concat(e.id)).classList.contains("activeBaseLayerButton");n.forEach((function(t,e,r){return t.setZIndex(e-r.length)})),t.target.parentElement.querySelectorAll('button[id^="m-baselayerselector-"]').forEach((function(t){t.classList.contains("activeBaseLayerButton")&&t.classList.remove("activeBaseLayerButton")})),o||(this.visible=!0,this.activeLayer=r,t.target.parentElement.querySelector("#m-baselayerselector-unique-btn").innerText=i,t.target.parentElement.querySelector("#m-baselayerselector-".concat(e.id)).classList.add("activeBaseLayerButton"),this.map.addLayers(n))}},{key:"handlerClickMobile",value:function(t){this.removeLayers(),this.activeLayer+=1,this.activeLayer=this.activeLayer%this.layers.length;var e=this.layers[this.activeLayer],r=e.layers,n=e.id,i=e.title;r.forEach((function(t,e,r){return t.setZIndex(e-r.length)})),t.target.parentElement.querySelectorAll('button[id^="m-baselayerselector-"]').forEach((function(t){t.classList.contains("activeBaseLayerButton")&&t.classList.remove("activeBaseLayerButton")})),t.target.innerHTML=i,t.target.parentElement.querySelector("#m-baselayerselector-".concat(n)).classList.add("activeBaseLayerButton"),this.map.addLayers(r)}},{key:"removeLayers",value:function(){this.map.removeLayers(this.flattedLayers),this.map.removeLayers(this.map.getBaseLayers())}},{key:"listen",value:function(t){var e=this;t.querySelectorAll("button.m-background-group-btn").forEach((function(t,r){return t.addEventListener("click",(function(t){return e.showBaseLayer(t,e.layers[r],r)}))})),t.querySelector("#m-baselayerselector-unique-btn").addEventListener("click",(function(t){return e.showBaseLayer(t)}))}}])&&WA(e.prototype,r),n&&WA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(ep);QA.NAME="backgroundlayers";var $A=QA,tk=r(213),ek=r.n(tk);function rk(t){return(rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==rk(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==rk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===rk(o)?o:String(o)),n)}var i,o}function ik(t,e){return(ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ok(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=sk(t);if(e){var i=sk(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ak(this,r)}}function ak(t,e){if(e&&("object"===rk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sk(t){return(sk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ik(t,e)}(o,t);var e,r,n,i=ok(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.url_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){e.loadInternal_(i).then((function(e){t(e)}))}}},{key:"loadInternal_",value:function(t){var e=this;return new Promise((function(t,r){jU(e.url_).then((function(r){var n=e.map_.getProjection().code;if(XU(r.text))Af(Hf("exception").no_kml_response);else{var i=e.format_.readCustomFeatures(r.text,{featureProjection:n}),o=e.format_.getScreenOverlay(),a=i.map((function(t){var e=new Yq(t.getId(),{geometry:{coordinates:t.getGeometry().getCoordinates(),type:t.getGeometry().getType()},properties:t.getProperties()});return e.getImpl().getOLFeature().setStyle(t.getStyle()),e}));t({features:a,screenOverlay:o})}}))}))}}])&&nk(e.prototype,r),n&&nk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vf);function lk(t){return(lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ck,hk,fk,pk,dk,mk,yk,gk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vk=["http://www.google.com/kml/ext/2.2"],_k=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],bk={fraction:lS,pixels:cS,insetPixels:cS},wk=ah(_k,{ExtendedData:dN,Region:mN,MultiGeometry:th(oN,"geometry"),LineString:th(rN,"geometry"),LinearRing:th(nN,"geometry"),Point:th(aN,"geometry"),Polygon:th(uN,"geometry"),Style:th(cN),StyleMap:function(t,e){var r=Uk.call(this,t,e);if(!r)return;var n=e[e.length-1];Array.isArray(r)?n.Style=r:"string"==typeof r?n.styleUrl=r:Or(!1,38)},address:th(Mh),description:th(Mh),name:th(Mh),open:th(mh),phoneNumber:th(Mh),styleUrl:th(Bk),visibility:th(mh)},ah(vk,{MultiTrack:th((function(t,e){var r=uh([],Xk,t,e);if(!r)return;return new Py(r)}),"geometry"),Track:th(Jk,"geometry")})),Mk=ah(_k,{ExtendedData:dN,Region:mN,Link:function(t,e){sh(Sk,t,e)},address:th(Mh),description:th(Mh),name:th(Mh),open:th(mh),phoneNumber:th(Mh),visibility:th(mh)}),Sk=ah(_k,{href:th(Bk)}),xk=ah(_k,{LatLonAltBox:function(t,e){var r=uh({},vN,t,e);if(!r)return;var n=e[e.length-1],i=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];n.extent=i,n.altitudeMode=r.altitudeMode,n.minAltitude=parseFloat(r.minAltitude),n.maxAltitude=parseFloat(r.maxAltitude)},Lod:function(t,e){var r=uh({},_N,t,e);if(!r)return;var n=e[e.length-1];n.minLodPixels=parseFloat(r.minLodPixels),n.maxLodPixels=parseFloat(r.maxLodPixels),n.minFadeExtent=parseFloat(r.minFadeExtent),n.maxFadeExtent=parseFloat(r.maxFadeExtent)}}),Ek=ah(_k,["Document","Placemark"]),Ok=ah(_k,{Document:eh((function(t,e,r){ch({node:t},xN,EN,e,r,void 0,this)})),Placemark:eh(XN)}),Pk=null;var Tk,Ik=null;var Lk,Rk=null;var Ck=null;var Ak=null;var kk,Nk=null;var jk=function(t){function e(e){var r=t.call(this)||this,n=e||{};return Nk||(Pk=new dM({color:ck=[255,255,255,1]}),Ik=new vS({anchor:hk=[20,2],anchorOrigin:pS,anchorXUnits:fk=cS,anchorYUnits:pk=cS,crossOrigin:"anonymous",rotation:0,scale:yk=.5,size:dk=[64,64],src:mk="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),Tk="NO_IMAGE",Rk=new mM({color:ck,width:1}),Lk=new mM({color:[51,51,51,1],width:2}),Ck=new Fx({font:"bold 16px Helvetica",fill:Pk,stroke:Lk,scale:.8}),Ak=new MM({fill:Pk,image:Ik,text:Ck,stroke:Rk,zIndex:0}),Nk=[Ak]),r.dataProjection=Vn("EPSG:4326"),r.defaultStyle_=n.defaultStyle?n.defaultStyle:Nk,r.extractStyles_=void 0===n.extractStyles||n.extractStyles,r.writeStyles_=void 0===n.writeStyles||n.writeStyles,r.sharedStyles_={},r.showPointNames_=void 0===n.showPointNames||n.showPointNames,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r}return gk(e,t),e.prototype.readDocumentOrFolder_=function(t,e){var r=uh([],ah(_k,{Document:Kc(this.readDocumentOrFolder_,this),Folder:Kc(this.readDocumentOrFolder_,this),Placemark:Jc(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this);return r||void 0},e.prototype.readPlacemark_=function(t,e){var r=uh({geometry:null},wk,t,e,this);if(r){var n=new dy,i=t.getAttribute("id");null!==i&&n.setId(i);var o=e[0],a=r.geometry;if(a&&G_(a,!1,o),n.setGeometry(a),delete r.geometry,this.extractStyles_){var s=function(t,e,r,n,i){return function(o,a){var s=i,u="",l=[];if(s){var c=o.getGeometry();if(c){var h=c.getType();s=h===mr.GEOMETRY_COLLECTION?(l=c.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===mr.POINT||e===mr.MULTI_POINT}))).length>0:h===mr.POINT||h===mr.MULTI_POINT}}s&&(u=o.get("name"),(s=s&&!!u)&&u.search(/&[^&]+;/)>-1&&(kk||(kk=document.createElement("textarea")),kk.innerHTML=u,u=kk.value));var f=r;if(t?f=t:e&&(f=function t(e,r,n){return Array.isArray(e)?e:"string"==typeof e?(!(e in n)&&"#"+e in n&&(e="#"+e),t(n[e],r,n)):r}(e,r,n)),s){var p=function(t,e){var r=[0,0],n="start",i=t.getImage();if(i){var o=i.getImageSize();if(null===o&&(o=dk),2==o.length){var a=i.getScale();r[0]=a*o[0]/2,r[1]=-a*o[1]/2,n="left"}}var s=t.getText();s?((s=s.clone()).setFont(s.getFont()||Ck.getFont()),s.setScale(s.getScale()||Ck.getScale()),s.setFill(s.getFill()||Ck.getFill()),s.setStroke(s.getStroke()||Lk)):s=Ck.clone();return s.setText(e),s.setOffsetX(r[0]),s.setOffsetY(r[1]),s.setTextAlign(n),new MM({image:i,text:s})}(f[0],u);return l.length>0?(p.setGeometry(new Cy(l)),[p,new MM({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null})].concat(f.slice(1))):p}return f}}(r.Style,r.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(s)}return delete r.Style,n.setProperties(r,!0),n}},e.prototype.readSharedStyle_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=cN.call(this,t,e);if(n){var i=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readSharedStyleMap_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=Uk.call(this,t,e);if(n){var i,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readFeatureFromNode=function(t,e){if(!_i(_k,t.namespaceURI))return null;var r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){if(!_i(_k,t.namespaceURI))return[];var r,n=t.localName;if("Document"==n||"Folder"==n)return(r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){var i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==n){r=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&Mi(r,a)}return r}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=Xc(t);return this.readNameFromDocument(e)}return Hc(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(e);if(r)return r}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(_i(_k,e.namespaceURI)&&"name"==e.localName)return Mh(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var r=e.localName;if(_i(_k,e.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(e);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var r=Xc(t);Mi(e,this.readNetworkLinksFromDocument(r))}else Hc(t)?Mi(e,this.readNetworkLinksFromDocument(t)):Mi(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Mi(e,this.readNetworkLinksFromNode(r));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(_i(_k,r.namespaceURI)&&"NetworkLink"==r.localName){var n=uh({},Mk,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!_i(_k,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||Mi(e,this.readNetworkLinksFromNode(r))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var r=Xc(t);Mi(e,this.readRegionFromDocument(r))}else Hc(t)?Mi(e,this.readRegionFromDocument(t)):Mi(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Mi(e,this.readRegionFromNode(r));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(_i(_k,r.namespaceURI)&&"Region"==r.localName){var n=uh({},xk,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!_i(_k,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||Mi(e,this.readRegionFromNode(r))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Zc(_k[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",vk[0]),r.setAttributeNS(n,"xmlns:xsi",Yc),r.setAttributeNS(Yc,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:r},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=Ek[r.namespaceURI],s=oh(o,a);return ch(i,Ok,ih,s,[e],a,this),r},e}(W_);function Fk(t){var e=Wc(t,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(r){var n=r[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function Dk(t){for(var e,r=Wc(t,!1),n=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=i.exec(r);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;n.push(o,a,s),r=r.substr(e[0].length)}if(""===r)return n}function Bk(t){var e=Wc(t,!1).trim(),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(e,r).href:e}function Gk(t){return vh(t)}var zk=ah(_k,{Pair:function(t,e){var r=uh({},yN,t,e,this);if(!r)return;var n=r.key;if(n&&"normal"==n){var i=r.styleUrl;i&&(e[e.length-1]=i);var o=r.Style;o&&(e[e.length-1]=o)}}});function Uk(t,e){return uh(void 0,zk,t,e,this)}var qk=ah(_k,{Icon:th((function(t,e){var r=uh({},Qk,t,e);return r||null})),color:th(Fk),heading:th(vh),hotSpot:th((function(t){var e,r=t.getAttribute("xunits"),n=t.getAttribute("yunits");return e="insetPixels"!==r?"insetPixels"!==n?pS:mS:"insetPixels"!==n?dS:yS,{x:parseFloat(t.getAttribute("x")),xunits:bk[r],y:parseFloat(t.getAttribute("y")),yunits:bk[n],origin:e}})),scale:th(Gk)});var Vk=ah(_k,{color:th(Fk),scale:th(Gk)});var Yk=ah(_k,{color:th(Fk),width:th(vh)});var Zk=ah(_k,{color:th(Fk),fill:th(mh),outline:th(mh)});var Wk=ah(_k,{coordinates:Qc(Dk)});function Hk(t,e){return uh(null,Wk,t,e)}var Xk=ah(vk,{Track:Jc(Jk)});var Kk=ah(_k,{when:function(t,e){var r=e[e.length-1].whens,n=Wc(t,!1),i=Date.parse(n);r.push(isNaN(i)?0:i)}},ah(vk,{coord:function(t,e){var r=e[e.length-1].flatCoordinates,n=Wc(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);r.push(o,a,s,0)}else r.push(0,0,0,0)}}));function Jk(t,e){var r=uh({flatCoordinates:[],whens:[]},Kk,t,e);if(r){for(var n=r.flatCoordinates,i=r.whens,o=0,a=Math.min(n.length,i.length);o<a;++o)n[4*o+3]=i[o];return new Sy(n,Ta)}}var Qk=ah(_k,{href:th(Bk)},ah(vk,{x:th(vh),y:th(vh),w:th(vh),h:th(vh)}));var $k=ah(_k,{coordinates:Qc(Dk)});function tN(t,e){return uh(null,$k,t,e)}var eN=ah(_k,{extrude:th(mh),tessellate:th(mh),altitudeMode:th(Mh)});function rN(t,e){var r=uh({},eN,t,e),n=tN(t,e);if(n){var i=new Sy(n,Oa);return i.setProperties(r,!0),i}}function nN(t,e){var r=uh({},eN,t,e),n=tN(t,e);if(n){var i=new Ls(n,Oa,[n.length]);return i.setProperties(r,!0),i}}var iN=ah(_k,{LineString:Jc(rN),LinearRing:Jc(nN),MultiGeometry:Jc(oN),Point:Jc(aN),Polygon:Jc(uN)});function oN(t,e){var r,n=uh([],iN,t,e);if(!n)return null;if(0===n.length)return new Cy(n);for(var i=!0,o=n[0].getType(),a=1,s=n.length;a<s;++a)if(n[a].getType()!=o){i=!1;break}if(i){var u=void 0,l=void 0;if(o==mr.POINT){var c=n[0];u=c.getLayout(),l=c.getFlatCoordinates();for(a=1,s=n.length;a<s;++a)Mi(l,n[a].getFlatCoordinates());hN(r=new Ey(l,u),n)}else o==mr.LINE_STRING?hN(r=new Py(n),n):o==mr.POLYGON?hN(r=new Iy(n),n):o==mr.GEOMETRY_COLLECTION?r=new Cy(n):Or(!1,37)}else r=new Cy(n);return r}function aN(t,e){var r=uh({},eN,t,e),n=tN(t,e);if(n){var i=new ds(n,Oa);return i.setProperties(r,!0),i}}var sN=ah(_k,{innerBoundaryIs:function(t,e){var r=uh(void 0,bN,t,e);if(r){e[e.length-1].push(r)}},outerBoundaryIs:function(t,e){var r=uh(void 0,wN,t,e);if(r){e[e.length-1][0]=r}}});function uN(t,e){var r=uh({},eN,t,e),n=uh([null],sN,t,e);if(n&&n[0]){for(var i=n[0],o=[i.length],a=1,s=n.length;a<s;++a)Mi(i,n[a]),o.push(i.length);var u=new Ls(i,Oa,o);return u.setProperties(r,!0),u}}var lN=ah(_k,{IconStyle:function(t,e){var r=uh({},qk,t,e);if(r){var n,i,o,a,s=e[e.length-1],u="Icon"in r?r.Icon:{},l=!("Icon"in r)||Object.keys(u).length>0,c=u.href;c?n=c:l&&(n=mk);var h,f=pS,p=r.hotSpot;p?(i=[p.x,p.y],o=p.xunits,a=p.yunits,f=p.origin):n===mk?(i=hk,o=fk,a=pk):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(i=[.5,0],o=lS,a=lS);var d,m=u.x,y=u.y;void 0!==m&&void 0!==y&&(h=[m,y]);var g,v=u.w,_=u.h;void 0!==v&&void 0!==_&&(d=[v,_]);var b=r.heading;void 0!==b&&(g=fr(b));var w=r.scale,M=r.color;if(l){n==mk&&(d=dk,void 0===w&&(w=yk));var S=new vS({anchor:i,anchorOrigin:f,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.crossOrigin_,offset:h,offsetOrigin:pS,rotation:g,scale:w,size:d,src:n,color:M});s.imageStyle=S}else s.imageStyle=Tk}},LabelStyle:function(t,e){var r=uh({},Vk,t,e);if(r){var n=e[e.length-1],i=new Fx({fill:new dM({color:"color"in r?r.color:ck}),scale:r.scale});n.textStyle=i}},LineStyle:function(t,e){var r=uh({},Yk,t,e);if(r){var n=e[e.length-1],i=new mM({color:"color"in r?r.color:ck,width:"width"in r?r.width:1});n.strokeStyle=i}},PolyStyle:function(t,e){var r=uh({},Zk,t,e);if(r){var n=e[e.length-1],i=new dM({color:"color"in r?r.color:ck});n.fillStyle=i;var o=r.fill;void 0!==o&&(n.fill=o);var a=r.outline;void 0!==a&&(n.outline=a)}}});function cN(t,e){var r=uh({},lN,t,e,this);if(!r)return null;var n,i="fillStyle"in r?r.fillStyle:Pk,o=r.fill;void 0===o||o||(i=null),"imageStyle"in r?r.imageStyle!=Tk&&(n=r.imageStyle):n=Ik;var a="textStyle"in r?r.textStyle:Ck,s="strokeStyle"in r?r.strokeStyle:Rk,u=r.outline;return void 0===u||u?[new MM({fill:i,image:n,stroke:s,text:a,zIndex:void 0})]:[new MM({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===mr.GEOMETRY_COLLECTION?new Cy(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e!==mr.POLYGON&&e!==mr.MULTI_POLYGON}))):r!==mr.POLYGON&&r!==mr.MULTI_POLYGON?e:void 0},fill:i,image:n,stroke:s,text:a,zIndex:void 0}),new MM({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===mr.GEOMETRY_COLLECTION?new Cy(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===mr.POLYGON||e===mr.MULTI_POLYGON}))):r===mr.POLYGON||r===mr.MULTI_POLYGON?e:void 0},fill:i,stroke:null,zIndex:void 0})]}function hN(t,e){var r,n,i,o=e.length,a=new Array(e.length),s=new Array(e.length),u=new Array(e.length);r=!1,n=!1,i=!1;for(var l=0;l<o;++l){var c=e[l];a[l]=c.get("extrude"),s[l]=c.get("tessellate"),u[l]=c.get("altitudeMode"),r=r||void 0!==a[l],n=n||void 0!==s[l],i=i||u[l]}r&&t.set("extrude",a),n&&t.set("tessellate",s),i&&t.set("altitudeMode",u)}var fN=ah(_k,{displayName:th(Mh),value:th(Mh)});var pN=ah(_k,{Data:function(t,e){var r=t.getAttribute("name");sh(fN,t,e);var n=e[e.length-1];r&&n.displayName?n[r]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==r?n[r]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){sh(gN,t,e)}});function dN(t,e){sh(pN,t,e)}function mN(t,e){sh(xk,t,e)}var yN=ah(_k,{Style:th(cN),key:th(Mh),styleUrl:th(Bk)});var gN=ah(_k,{SimpleData:function(t,e){var r=t.getAttribute("name");if(null!==r){var n=Mh(t);e[e.length-1][r]=n}}});var vN=ah(_k,{altitudeMode:th(Mh),minAltitude:th(vh),maxAltitude:th(vh),north:th(vh),south:th(vh),east:th(vh),west:th(vh)});var _N=ah(_k,{minLodPixels:th(vh),maxLodPixels:th(vh),minFadeExtent:th(vh),maxFadeExtent:th(vh)});var bN=ah(_k,{LinearRing:Qc(Hk)});var wN=ah(_k,{LinearRing:Qc(Hk)});function MN(t,e){for(var r=Vl(e),n=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],i=0;i<4;++i){var o=Math.floor(n[i]).toString(16);n[i]=1==o.length?"0"+o:o}Oh(t,n.join(""))}var SN=ah(_k,{Data:eh((function(t,e,r){t.setAttribute("name",e.name);var n={node:t},i=e.value;"object"==lk(i)?(null!==i&&i.displayName&&ch(n,SN,ih,[i.displayName],r,["displayName"]),null!==i&&i.value&&ch(n,SN,ih,[i.value],r,["value"])):ch(n,SN,ih,[i],r,["value"])})),value:eh((function(t,e){Oh(t,e)})),displayName:eh((function(t,e){!function(t,e){t.appendChild(ph().createCDATASection(e))}(t,e)}))});var xN=ah(_k,{Placemark:eh(XN)}),EN=function(t,e,r){return Zc(e[e.length-1].node.namespaceURI,"Placemark")};var ON=nh("Data");var PN=ah(_k,["href"],ah(vk,["x","y","w","h"])),TN=ah(_k,{href:eh(Oh)},ah(vk,{x:eh(xh),y:eh(xh),w:eh(xh),h:eh(xh)})),IN=function(t,e,r){return Zc(vk[0],"gx:"+r)};var LN=ah(_k,["scale","heading","Icon","color","hotSpot"]),RN=ah(_k,{Icon:eh((function(t,e,r){var n={node:t},i=r[r.length-1].node,o=PN[i.namespaceURI],a=oh(e,o);ch(n,TN,ih,a,r,o),a=oh(e,o=PN[vk[0]]),ch(n,TN,IN,a,r,o)})),color:eh(MN),heading:eh(xh),hotSpot:eh((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:eh(oj)});var CN=ah(_k,["color","scale"]),AN=ah(_k,{color:eh(MN),scale:eh(oj)});var kN=ah(_k,["color","width"]),NN=ah(_k,{color:eh(MN),width:eh(xh)});var jN={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},FN=function(t,e,r){if(t)return Zc(e[e.length-1].node.namespaceURI,jN[t.getType()])},DN=nh("Point"),BN=nh("LineString"),GN=nh("LinearRing"),zN=nh("Polygon"),UN=ah(_k,{LineString:eh(QN),Point:eh(QN),Polygon:eh(nj),GeometryCollection:eh(qN)});function qN(t,e,r){var n,i={node:t},o=e.getType(),a=[];o===mr.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach((function(t){var e=t.getType();e===mr.MULTI_POINT?a=a.concat(t.getPoints()):e===mr.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===mr.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===mr.POINT||e===mr.LINE_STRING||e===mr.POLYGON?a.push(t):Or(!1,39)})),n=FN):o===mr.MULTI_POINT?(a=e.getPoints(),n=DN):o===mr.MULTI_LINE_STRING?(a=e.getLineStrings(),n=BN):o===mr.MULTI_POLYGON?(a=e.getPolygons(),n=zN):Or(!1,39),ch(i,UN,n,a,r)}var VN=ah(_k,{LinearRing:eh(QN)});function YN(t,e,r){ch({node:t},VN,GN,[e],r)}var ZN=ah(_k,{ExtendedData:eh((function(t,e,r){for(var n={node:t},i=e.names,o=e.values,a=i.length,s=0;s<a;s++)ch(n,SN,ON,[{name:i[s],value:o[s]}],r)})),MultiGeometry:eh(qN),LineString:eh(QN),LinearRing:eh(QN),Point:eh(QN),Polygon:eh(nj),Style:eh((function(t,e,r){var n={node:t},i={};if(e.pointStyles.length){var o=e.pointStyles[0].getText();o&&(i.LabelStyle=o);var a=e.pointStyles[0].getImage();a&&"function"==typeof a.getSrc&&(i.IconStyle=a)}if(e.lineStyles.length){(s=e.lineStyles[0].getStroke())&&(i.LineStyle=s)}if(e.polyStyles.length){var s;(s=e.polyStyles[0].getStroke())&&!i.LineStyle&&(i.LineStyle=s),i.PolyStyle=e.polyStyles[0]}var u=r[r.length-1].node,l=aj[u.namespaceURI],c=oh(i,l);ch(n,sj,ih,c,r,l)})),address:eh(Oh),description:eh(Oh),name:eh(Oh),open:eh(Sh),phoneNumber:eh(Oh),styleUrl:eh(Oh),visibility:eh(Sh)}),WN=ah(_k,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),HN=nh("ExtendedData");function XN(t,e,r){var n={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter((function(t){return!o[t]})),s=e.getStyleFunction();if(s){var u=s(e,0);if(u){var l=Array.isArray(u)?u:[u],c=l;if(e.getGeometry()&&(c=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===mr.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===mr.POINT||e===mr.MULTI_POINT})).length:n===mr.POINT||n===mr.MULTI_POINT}}))),this.writeStyles_){var h=l,f=l;e.getGeometry()&&(h=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===mr.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===mr.LINE_STRING||e===mr.MULTI_LINE_STRING})).length:n===mr.LINE_STRING||n===mr.MULTI_LINE_STRING}})),f=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===mr.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===mr.POLYGON||e===mr.MULTI_POLYGON})).length:n===mr.POLYGON||n===mr.MULTI_POLYGON}}))),i.Style={pointStyles:c,lineStyles:h,polyStyles:f}}if(c.length&&void 0===i.name){var p=c[0].getText();p&&(i.name=p.getText())}}}var d=r[r.length-1].node,m=WN[d.namespaceURI],y=oh(i,m);if(ch(n,ZN,ih,y,r,m),a.length>0){var g=oh(i,a);ch(n,ZN,HN,[{names:a,values:g}],r)}var v=r[0],_=e.getGeometry();_&&(_=G_(_,!0,v)),ch(n,ZN,FN,[_],r)}var KN=ah(_k,["extrude","tessellate","altitudeMode","coordinates"]),JN=ah(_k,{extrude:eh(Sh),tessellate:eh(Sh),altitudeMode:eh(Oh),coordinates:eh((function(t,e,r){var n,i=r[r.length-1],o=i.layout,a=i.stride;o==Ea||o==Pa?n=2:o==Oa||o==Ta?n=3:Or(!1,34);var s=e.length,u="";if(s>0){u+=e[0];for(var l=1;l<n;++l)u+=","+e[l];for(var c=a;c<s;c+=a){u+=" "+e[c];for(l=1;l<n;++l)u+=","+e[c+l]}}Oh(t,u)}))});function QN(t,e,r){var n=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=n;var a=r[r.length-1].node,s=KN[a.namespaceURI],u=oh(o,s);ch(i,JN,ih,u,r,s)}var $N=ah(_k,["color","fill","outline"]),tj=ah(_k,{outerBoundaryIs:eh(YN),innerBoundaryIs:eh(YN)}),ej=nh("innerBoundaryIs"),rj=nh("outerBoundaryIs");function nj(t,e,r){var n=e.getLinearRings(),i=n.shift(),o={node:t};ch(o,tj,ej,n,r),ch(o,tj,rj,[i],r)}var ij=ah(_k,{color:eh(MN),fill:eh(Sh),outline:eh(Sh)});function oj(t,e){xh(t,Math.round(1e6*e)/1e6)}var aj=ah(_k,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),sj=ah(_k,{IconStyle:eh((function(t,e,r){var n={node:t},i={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),u={href:o};if(a){u.w=a[0],u.h=a[1];var l=e.getAnchor(),c=e.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(u.x=c[0],u.y=s[1]-(c[1]+a[1])),l&&(l[0]!==a[0]/2||l[1]!==a[1]/2)){var h={x:l[0],xunits:cS,y:a[1]-l[1],yunits:cS};i.hotSpot=h}}i.Icon=u;var f=e.getScale();1!==f&&(i.scale=f);var p=e.getRotation();0!==p&&(i.heading=p);var d=e.getColor();d&&(i.color=d);var m=r[r.length-1].node,y=LN[m.namespaceURI],g=oh(i,y);ch(n,RN,ih,g,r,y)})),LabelStyle:eh((function(t,e,r){var n={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var a=e.getScale();a&&1!==a&&(i.scale=a);var s=r[r.length-1].node,u=CN[s.namespaceURI],l=oh(i,u);ch(n,AN,ih,l,r,u)})),LineStyle:eh((function(t,e,r){var n={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},o=r[r.length-1].node,a=kN[o.namespaceURI],s=oh(i,a);ch(n,NN,ih,s,r,a)})),PolyStyle:eh((function(t,e,r){var n={node:t},i=e.getFill(),o=e.getStroke(),a={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},s=r[r.length-1].node,u=$N[s.namespaceURI],l=oh(a,u);ch(n,ij,ih,l,r,u)}))});var uj=jk;function lj(t){return(lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==lj(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===lj(o)?o:String(o)),n)}var i,o}function fj(t,e){return(fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mj(t);if(e){var i=mj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return dj(this,r)}}function dj(t,e){if(e&&("object"===lj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mj(t){return(mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fj(t,e)}(o,t);var e,r,n,i=pj(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return cj(this,o),(t=i.call(this)).screenOverlay_=null,t.label_=void 0===e.label||e.label,t}return e=o,(r=[{key:"readCustomFeatures",value:function(t,e){var r=this,n=this.readFeatures(t,e).map((function(t){var e=t.getStyle()(t);if(!1===r.label_){var n=[e[0]];t.setStyle(n)}return Array.isArray(e)||(e=[e]),e.forEach((function(t){if(t.getImage()instanceof vS){var e=t.getImage();e.getImage().removeAttribute("crossorigin"),t.setImage(e)}})),t.set("name",_q(t.get("name"))),t}));return this.readScreenOverlay(t),n}},{key:"readScreenOverlay",value:function(t){var e=Xc(t).querySelector("ScreenOverlay");if(null!==e){var r,n,i,a,s,u,l=e.querySelector("Icon"),c=null!==l?l.querySelector("href").innerHTML:o.DEFAULT_NO_IMAGE_STYLE,h=e.querySelector("overlayXY");null!==h&&(r=[parseFloat(h.getAttribute("x")),parseFloat(h.getAttribute("y"))],n=h.getAttribute("xunits"),i=h.getAttribute("yunits"));var f,p,d,m=e.querySelector("screenXY");null!==m?(a=[parseFloat(m.getAttribute("x")),parseFloat(m.getAttribute("y"))],s=m.getAttribute("xunits"),u=m.getAttribute("yunits")):c===o.DEFAULT_IMAGE_STYLE_SRC?(a=o.DEFAULT_IMAGE_STYLE_ANCHOR,s=o.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,u=o.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(c)&&(a=[.5,0],s=lS,u=lS);var y,g,v,_=e.querySelector("rotationXY");if(null!==_){var b=parseFloat(_.getAttribute("x"));f=Math.PI/180*b,p=_.getAttribute("xunits"),d=_.getAttribute("yunits")}var w=e.querySelector("size");null!==w&&(y=[parseFloat(w.getAttribute("x")),parseFloat(w.getAttribute("y"))],g=w.getAttribute("xunits"),v=w.getAttribute("yunits")),this.screenOverlay_={screenXY:a,screenXUnits:s,screenYUnits:u,overlayXY:r,overlayXUnits:n,overlayYUnits:i,rotationXY:f,rotationXUnits:p,rotationYUnits:d,size:y,sizeXUnits:g,sizeYUnits:v,src:c}}}},{key:"getScreenOverlay",value:function(){return this.screenOverlay_}}])&&hj(e.prototype,r),n&&hj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(uj);yj.DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",yj.DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",yj.DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],yj.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",yj.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels";var gj=yj;function vj(t){return(vj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==vj(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===vj(o)?o:String(o)),n)}var i,o}function bj(t,e){return(bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Sj(t);if(e){var i=Sj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Mj(this,r)}}function Mj(t,e){if(e&&("object"===vj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sj(t){return(Sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bj(t,e)}(o,t);var e,r,n,i=wj(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).popup_=null,r.tabPopup_=null,r.loadFeaturesPromise_=null,r.screenOverlayImg_=null,r.label_=t.label,r.visibility=null==t.visibility||t.visibility,r}return e=o,(r=[{key:"setVisible",value:function(t){if(this.visibility=t,XU(this.ol3Layer)||this.ol3Layer.setVisible(t),!XU(this.screenOverlayImg_)){var e="none";!0===t&&(e="inherit"),this.screenOverlayImg_.style[e]=e}}},{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),t.on("change:proj",this.setProjection_.bind(this),this),this.formater_=new gj({label:this.label_}),this.loader_=new uk(this.map,this.url,this.formater_),this.ol3Layer=new xS(dq({},this.vendorOptions_,!0)),this.updateSource_(),this.setVisible(this.visibility),null!==this.zIndex_&&this.setZIndex(this.zIndex_),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&!XU(n)){var i=n.getAttribute("name"),o=n.getAttribute("description"),a=n.getImpl().getOLFeature().getGeometry().getFirstCoordinate(),s=sp(ek.a,{vars:{name:i,desc:o},parseToHtml:!1});this.tabPopup_={icon:"g-cartografia-comentarios",title:i,content:s};var u=this.map.getPopup();XU(u)?(this.popup_=new vw,this.popup_.addTab(this.tabPopup_),this.map.addPopup(this.popup_,a)):u.addTab(this.tabPopup_)}}},{key:"unselectFeatures",value:function(){XU(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"updateSource_",value:function(){var t=this;XU(this.vendorOptions_.source)&&this.requestFeatures_().then((function(e){t.ol3Layer.setSource(new jS({loader:function(){var r=e.screenOverlay;if(t.facadeVector_.clear(),t.facadeVector_.addFeatures(e.features),t.fire(Uf,[e.features]),!XU(r)){var n=Zy.addOverlayImage(r,t.map);t.setScreenOverlayImg(n)}}})),t.facadeVector_.addFeatures(e.features)}))}},{key:"setScreenOverlayImg",value:function(t){this.screenOverlayImg_=t}},{key:"destroy",value:function(){var t=this.map.getMapImpl();XU(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.removePopup(),this.options=null,this.map=null}},{key:"removePopup",value:function(){XU(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return Zy.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=Zy.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=Zy.getFeaturesExtent(t.features,i);n(e)}))}))}},{key:"requestFeatures_",value:function(){var t=this;return XU(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise((function(e){t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Vn(t.map.getProjection().code))}))),this.loadFeaturesPromise_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&_j(e.prototype,r),n&&_j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(YS);function Ej(t){return(Ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ej(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ej(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ej(o)?o:String(o)),n)}var i,o}function Tj(t,e){return(Tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ij(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Rj(t);if(e){var i=Rj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Lj(this,r)}}function Lj(t,e){if(e&&("object"===Ej(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Rj(t){return(Rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tj(t,e)}(o,t);var e,r,n,i=Ij(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Oj(this,o);var a=Tm(t,_p),s=r;s.label=a.label,s.visibility=a.visibility;var u=new xj(s,n);return e=i.call(this,a,r,void 0,u),YU(xj)&&Af(Hf("exception").kmllayer_method),XU(t)&&Af(Hf("exception").no_param),e.extract=a.extract,e.options=r,e.label=a.label,e}return e=o,(r=[{key:"type",get:function(){return _p},set:function(t){YU(t)||XU(t)||t===_p||Af("El tipo de capa debe ser '".concat(_p).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){XU(t)?this.getImpl().extract=!1:QU(t)?this.getImpl().extract="true"===tq(t):this.getImpl().extract=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&Pj(e.prototype,r),n&&Pj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WO),Aj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function kj(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var Nj=function(t){function e(){return t.call(this)||this}return Aj(e,t),e.prototype.getType=function(){return q_},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(kj(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(kj(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return br()},e.prototype.readFeaturesFromObject=function(t,e){return br()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(kj(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return br()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(kj(t))},e.prototype.readProjectionFromObject=function(t){return br()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return br()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return br()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return br()},e}(B_),jj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Fj(t,e){if(!t)return null;var r;switch(t.type){case mr.POINT:r=function(t){return new ds(t.coordinates)}(t);break;case mr.LINE_STRING:r=function(t){return new Sy(t.coordinates)}(t);break;case mr.POLYGON:r=function(t){return new Ls(t.coordinates)}(t);break;case mr.MULTI_POINT:r=function(t){return new Ey(t.coordinates)}(t);break;case mr.MULTI_LINE_STRING:r=function(t){return new Py(t.coordinates)}(t);break;case mr.MULTI_POLYGON:r=function(t){return new Iy(t.coordinates)}(t);break;case mr.GEOMETRY_COLLECTION:r=function(t,e){var r=t.geometries.map((function(t){return Fj(t,e)}));return new Cy(r)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return G_(r,!1,e)}function Dj(t,e){var r,n=(t=G_(t,!0,e)).getType();switch(n){case mr.POINT:r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case mr.LINE_STRING:r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case mr.POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case mr.MULTI_POINT:r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case mr.MULTI_LINE_STRING:r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case mr.MULTI_POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case mr.GEOMETRY_COLLECTION:r=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var r=An({},e);return delete r.featureProjection,Dj(t,r)}))}}(t,e);break;case mr.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}var Bj=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).dataProjection=Vn(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(r.defaultFeatureProjection=Vn(n.featureProjection)),r.geometryName_=n.geometryName,r.extractGeometryName_=n.extractGeometryName,r}return jj(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=null,n=Fj((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new dy;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(n),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var n=t.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],e))}else r=[this.readFeatureFromObject(t,e)];return r},e.prototype.readGeometryFromObject=function(t,e){return Fj(t,e)},e.prototype.readProjectionFromObject=function(t){var e,r=t.crs;return r?"name"==r.type?e=Vn(r.properties.name):"EPSG"===r.type?e=Vn("EPSG:"+r.properties.code):Or(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(r.id=n);var i=t.getGeometry();i&&(r.geometry=Dj(i,e));var o=t.getProperties();return delete o[t.getGeometryName()],jn(o)||(r.properties=o),r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,e){return Dj(t,this.adaptOptions(e))},e}(Nj);function Gj(t){return(Gj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Gj(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Gj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Gj(o)?o:String(o)),n)}var i,o}function qj(){return(qj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Vj(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Vj(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hj(t)););return t}function Yj(t,e){return(Yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Hj(t);if(e){var i=Hj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Wj(this,r)}}function Wj(t,e){if(e&&("object"===Gj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Hj(t){return(Hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yj(t,e)}(o,t);var e,r,n,i=Zj(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zj(this,o),i.call(this,t)}return e=o,n=[{key:"readProjectionFromObject",value:function(t){var e,r=t.crs;if(r)if("name"===r.type)e=Vn(r.properties.name);else{if("EPSG"!==r.type)throw e=null,new Error("Unknown crs.type: ".concat(r.type));e=Vn("EPSG:".concat(r.properties.code))}else e="EPSG:4326";return e}},{key:"applyIcon",value:function(t,e){var r,n=document.createElement("IMG");n.src=e.url,n.width=e.width,n.height=e.height,n.crossOrigin="anonymous",e.anchor&&e.anchor.x&&e.anchor.y&&(r=[e.anchor.x,e.anchor.y]),t.setStyle(new MM({image:new vS({img:n,imgSize:[e.width,e.height],anchor:r})}))}}],(r=[{key:"readFeatureFromObject",value:function(t,e){var r=t,n=qj(Hj(o.prototype),"readFeatureFromObject",this).call(this,r,e);return this.geometryName_&&n.setGeometryName(this.geometryName_),XU(r.id)?n.setId(nq("geojson_")):n.setId(r.id),r.properties&&n.setProperties(r.properties),r.click&&(n.click=r.click),r.properties&&r.properties.vendor&&r.properties.vendor.mapea&&r.properties.vendor.mapea.icon&&o.applyIcon(n,r.properties.vendor.mapea.icon),n}},{key:"writeFeatureObject",value:function(t,e){var r=e,n={type:"Feature"},i=t.getId();i&&(n.id=i);var a=t.getGeometry();n.geometry=a?qj(Hj(o.prototype),"writeGeometryObject",this).call(this,a,r):null;var s=t.getProperties();return delete s[t.getGeometryName()],XU(s)?n.properties=null:n.properties=s,XU(t.click)||(n.click=t.click),n}},{key:"write",value:function(t){var e=this;return t.map((function(t){return e.writeFeatureObject(t.getImpl().getOLFeature())}))}},{key:"read",value:function(t,e,r){var n=r.code;XU(n)&&(n=XU(r.featureProjection)?Vn(r.getCode()):Vn(r.featureProjection.getCode()));var i=o.readProjectionFromObject(t);return e.map((function(t){var e=t.id,r=new Yq(e,t),o=r.getImpl().getOLFeature();if(null!==o.getGeometry()){var a=o.getGeometry().transform(i,n);o.setGeometry(a)}return r}))}}])&&Uj(e.prototype,r),n&&Uj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Bj);function Kj(t){return(Kj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Kj(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Kj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Kj(o)?o:String(o)),n)}var i,o}function $j(t,e){return($j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rF(t);if(e){var i=rF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return eF(this,r)}}function eF(t,e){if(e&&("object"===Kj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function rF(t){return(rF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$j(t,e)}(o,t);var e,r,n,i=tF(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Jj(this,o);var r=new Xj(e);return t=i.call(this,r),YU(Xj)&&Af(Hf("exception").geojson_method),t}return e=o,(r=[{key:"write",value:function(t){var e=t;return HU(e)||(e=[e]),this.getImpl().write(e)}},{key:"read",value:function(t,e){var r=t,n=[];if(!XU(r)){QU(r)&&(r=JSON.parse(r));var i=[];"FeatureCollection"===r.type?i=r.features:"Feature"===r.type&&(i=[r]),n=this.getImpl().read(r,i,e)}return n}}])&&Qj(e.prototype,r),n&&Qj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf),iF=r(18),oF=r.n(iF),aF=rb;aF.prototype.writeFeatures,aF.prototype.writeFeaturesNode;var sF=aF;function uF(t){return(uF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==uF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==uF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===uF(o)?o:String(o)),n)}var i,o}function cF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hF(t,e){return(hF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=dF(t);if(e){var i=dF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pF(this,r)}}function pF(t,e){if(e&&("object"===uF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dF(t){return(dF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hF(t,e)}(o,t);var e,r,n,i=fF(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return cF(this,o),i.call(this,t)}return e=o,r&&lF(e.prototype,r),n&&lF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(sF);function yF(t){return(yF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==yF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===yF(o)?o:String(o)),n)}var i,o}var vF=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.typeName_=e,this.outputFormat_=r,this.projection_=n,this.gmlFormatter_=new mF({outputFormat:r,featureType:e,srsName:this.projection_.code})}var e,r,n;return e=t,(r=[{key:"read",value:function(t){var e,r=this,n={};if(/json/gi.test(this.outputFormat_))try{e=JSON.parse(t.text)}catch(t){throw t}return e||(e=this.gmlFormatter_.read(t.text)),n.featureNS=e.targetNamespace,n.featurePrefix=e.targetPrefix,e.featureTypes.some((function(t){return t.typeName===r.typeName_&&(n.properties=t.properties,n.properties.some((function(t){return vq(t.localType)&&(n.geometryName=t.name),vq(t.localType)}))),t.typeName===r.typeName_})),n}}])&&gF(e.prototype,r),n&&gF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _F(t){return(_F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==_F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_F(o)?o:String(o)),n)}var i,o}var wF=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url_=e.url,this.namespace_=e.namespace,this.name_=e.name,this.typeName_=this.name_,XU(this.namespace_)||(this.typeName_=this.namespace_.concat(":").concat(this.name_)),this.version_=e.version,this.ids_=e.ids,this.cql_=e.cql,this.projection_=e.projection,this.getFeatureOutputFormat_=e.getFeatureOutputFormat,XU(this.getFeatureOutputFormat_)&&(this.getFeatureOutputFormat_="application/json"),this.describeFeatureTypeOutputFormat_=e.describeFeatureTypeOutputFormat,this.getFeatureVendor_={},XU(r)||XU(r.getFeature)||(this.getFeatureVendor_=r.getFeature),this.describeFeatureTypeVendor_={},XU(r)||XU(r.describeFeatureType)||(this.describeFeatureTypeVendor_=r.describeFeatureType)}var e,r,n;return e=t,(r=[{key:"getDescribeFeatureType",value:function(){var t={service:"WFS",version:this.version_,request:"DescribeFeatureType",typename:this.typeName_};XU(this.describeFeatureTypeOutputFormat_)||(t.outputFormat=this.describeFeatureTypeOutputFormat_);var e=rq(this.url_,t),r=rq(e,this.describeFeatureTypeVendor_),n=this.describeFeatureTypeOutputFormat_,i=new vF(this.name_,n,this.projection_);return new Promise((function(t,e){jU(r).then((function(e){t(i.read(e))}))}))}},{key:"getFeatureUrl",value:function(t,e){var r=this,n={service:"WFS",version:this.version_,request:"GetFeature",typename:this.typeName_,outputFormat:this.getFeatureOutputFormat_,srsname:e.getCode()};return XU(this.ids_)||(n.featureId=this.ids_.map((function(t){return r.name_.concat(".").concat(t)}))),XU(this.cql_)?XU(t)||(n.bbox="".concat(t.join(","),",").concat(e.getCode())):n.CQL_FILTER=this.cql_,rq(rq(this.url_,n),this.getFeatureVendor_)}}])&&bF(e.prototype,r),n&&bF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function MF(t){return(MF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==MF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==MF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===MF(o)?o:String(o)),n)}var i,o}function xF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EF(t,e){return(EF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=TF(t);if(e){var i=TF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PF(this,r)}}function PF(t,e){if(e&&("object"===MF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function TF(t){return(TF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EF(t,e)}(o,t);var e,r,n,i=OF(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xF(this,o),i.call(this,t)}return e=o,r&&SF(e.prototype,r),n&&SF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(sF);function LF(t){return(LF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==LF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==LF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===LF(o)?o:String(o)),n)}var i,o}function CF(t,e){return(CF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function AF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=NF(t);if(e){var i=NF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kF(this,r)}}function kF(t,e){if(e&&("object"===LF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function NF(t){return(NF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CF(t,e)}(o,t);var e,r,n,i=AF(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.service_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){var o=e.getRequestUrl_(r,i);e.loadInternal_(o,i).then(t.bind(e))}}},{key:"loadInternal_",value:function(t,e){var r=this;return new Promise((function(n,i){jU(t).then((function(t){if(!XU(t.text)&&t.text.indexOf("ServiceExceptionReport")<0){var i=r.format_.read(t.text,e);n(i)}else 401===t.code?QS(Hf("dialog").unauthorized_user):t.text.indexOf("featureId and cql_filter")>=0?QS(Hf("dialog").only_one_filter):Af(Hf("exception").no_getfeature_response)}))}))}},{key:"getRequestUrl_",value:function(t,e){return this.service_.getFeatureUrl(null,e)}}])&&RF(e.prototype,r),n&&RF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vf);function FF(t){return(FF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==FF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==FF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===FF(o)?o:String(o)),n)}var i,o}function GF(){return(GF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=zF(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function zF(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=YF(t)););return t}function UF(t,e){return(UF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=YF(t);if(e){var i=YF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return VF(this,r)}}function VF(t,e){if(e&&("object"===FF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function YF(t){return(YF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ZF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UF(t,e)}(o,t);var e,r,n,i=qF(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return DF(this,o),(t=i.call(this,e,r)).describeFeatureType_=null,t.formater_=null,t.loader_=null,t.service_=null,t.loaded_=!1,t.popup_=null,XU(t.options.getFeatureOutputFormat)&&(t.options.getFeatureOutputFormat="application/json"),t}return e=o,(r=[{key:"addTo",value:function(t){var e=this;GF(YF(o.prototype),"addTo",this).call(this,t),this.updateSource_(),t.getImpl().on("change",(function(){return e.refresh()}))}},{key:"refresh",value:function(t){t&&this.facadeVector_.removeFeatures(this.facadeVector_.getFeatures(!0)),this.updateSource_(t)}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&(this.unselectFeatures(),!XU(n))){var i=n.getAttribute("vendor.mapea.click");if(KU(i))i(r,n);else{var o=sp(oF.a,{vars:this.parseFeaturesForTemplate_(t),parseToHtml:!1}),a={icon:"g-cartografia-pin",title:this.name,content:o},s=this.map.getPopup();XU(s)?((s=new vw).addTab(a),this.map.addPopup(s,e)):s.addTab(a)}}}},{key:"parseFeaturesForTemplate_",value:function(t){var e=this,r={features:[]};return t.forEach((function(t){var n=t.getAttributes(),i=Object.keys(n),o=[];i.forEach((function(t){var r=!0;XU(e.showAttributes_)?XU(e.hiddenAttributes_)||(r=!pq(e.hiddenAttributes_,t)):r=pq(e.showAttributes_,t),r&&o.push({key:t,value:n[t]})}));var a={id:t.getId(),attributes:o};r.features.push(a)})),r}},{key:"updateSource_",value:function(t){var e=this;if(XU(this.vendorOptions_.source)){this.service_=new wF({url:this.url,namespace:this.namespace,name:this.name,version:this.version,ids:this.ids,cql:this.cql,projection:this.map.getProjection(),getFeatureOutputFormat:this.options.getFeatureOutputFormat,describeFeatureTypeOutputFormat:this.options.describeFeatureTypeOutputFormat},this.options.vendor),/json/gi.test(this.options.getFeatureOutputFormat)?this.formater_=new nF({defaultDataProjection:Vn(this.map.getProjection().code)}):this.formater_=new IF(this.name,this.version,this.map.getProjection()),this.loader_=new jF(this.map,this.service_,this.formater_);var r=this.ol3Layer.getSource();this.requestFeatures_().then((function(n){if(!0===t||XU(r)){var i=new jS({loader:function(){e.loaded_=!0,e.facadeVector_.addFeatures(n),e.fire(Uf,[n]),e.facadeVector_.redraw()}});e.ol3Layer.setSource(i)}else r.set("format",e.formater_),r.set("loader",e.loader_.getLoaderFn((function(t){e.loaded_=!0,e.facadeVector_.addFeatures(t),e.fire(Uf,[t]),e.facadeVector_.redraw()}))),r.set("strategy",TS),r.changed()}))}}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return Zy.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=Zy.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=Zy.getFeaturesExtent(t,i);n(e)}))}))}},{key:"setCQL",value:function(t){this.cql=t,this.refresh(!0)}},{key:"getDescribeFeatureType",value:function(){var t=this;return XU(this.describeFeatureType_)&&(this.describeFeatureType_=this.service_.getDescribeFeatureType().then((function(e){return XU(e)||(t.formater_=new Xj({geometryName:e.geometryName,defaultDataProjection:Vn(t.map.getProjection().code)})),e}))),this.describeFeatureType_}},{key:"getDefaultValue",value:function(t){return"dateTime"===t?"0000-00-00T00:00:00":"date"===t?"0000-00-00":"time"===t?"00:00:00":"duration"===t?"P0Y":"int"===t||"number"===t||"float"===t||"double"===t||"decimal"===t||"short"===t||"byte"===t||"integer"===t||"long"===t||"negativeInteger"===t||"nonNegativeInteger"===t||"nonPositiveInteger"===t||"positiveInteger"===t||"unsignedLong"===t||"unsignedInt"===t||"unsignedShort"===t||"unsignedByte"===t?0:"hexBinary"===t?null:"-"}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"requestFeatures_",value:function(){var t=this;return new Promise((function(e){t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Vn(t.map.getProjection().code))}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.namespace===t.namespace,e=e&&this.name===t.name,e=e&&this.ids===t.ids,e=e&&this.cql===t.cql,e=e&&this.version===t.version,e=e&&this.extract===t.extract),e}}])&&BF(e.prototype,r),n&&BF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(YS),WF="POINT",HF="LINE",XF="POLYGON",KF="MPOINT",JF="MLINE",QF="MPOLYGON",$F={},tD=function(t){var e=tq(t,!0);return u[e]};function eD(t){return(eD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nD(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rD(Object(r),!0).forEach((function(e){iD(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function iD(t,e,r){return(e=sD(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sD(n.key),n)}}function sD(t){var e=function(t,e){if("object"!==eD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==eD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eD(e)?e:String(e)}function uD(){return(uD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=lD(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function lD(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pD(t)););return t}function cD(t,e){return(cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=pD(t);if(e){var i=pD(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fD(this,r)}}function fD(t,e){if(e&&("object"===eD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pD(t){return(pD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cD(t,e)}(o,t);var e,r,n,i=hD(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ZF(r,n);oD(this,o);var s=Tm(t,wp);return e=i.call(this,s,r,void 0,a),YU(ZF)&&Af(Hf("exception").wfslayer_method),XU(t)&&Af(Hf("exception").no_param),e.namespace=s.namespace,e.legend=s.legend,e.cql=s.cql,e.geometry=s.geometry,e.ids=s.ids,e.version=s.version,e.extract=s.extract||!1,e.options=r,e}return e=o,(r=[{key:"type",get:function(){return wp},set:function(t){YU(t)||XU(t)||t===wp||Af("El tipo de capa debe ser '".concat(wp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){XU(t)?this.getImpl().extract=!1:QU(t)?this.getImpl().extract="true"===tq(t):this.getImpl().extract=t}},{key:"namespace",get:function(){return this.getImpl().namespace},set:function(t){this.getImpl().namespace=t}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){XU(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"cql",get:function(){return this.getImpl().cql},set:function(t){this.getImpl().cql=t}},{key:"geometry",get:function(){return this.getImpl().geometry},set:function(t){if(!XU(t)){var e=tD(t);XU(e)&&Af("El tipo de capa WFS <b>".concat(t,"</b> no se reconoce. Los tipos disponibles son: POINT, LINE, POLYGON, MPOINT, MLINE, MPOLYGON")),this.getImpl().geometry=e}}},{key:"ids",get:function(){return this.getImpl().ids},set:function(t){XU(t)?this.getImpl().ids=this.ids:this.getImpl().ids=t}},{key:"version",get:function(){return this.getImpl().version},set:function(t){XU(t)?this.getImpl().version="1.0.0":this.getImpl().version=t}},{key:"setCQL",value:function(t){var e=this,r=t;this.getImpl().getDescribeFeatureType().then((function(t){if(!XU(r)){var n=t.geometryName;r=r.replace(/{{geometryName}}/g,n)}e.getImpl().cql!==r&&e.getImpl().setCQL(r)}))}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;uD(pD(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.namespace===t.namespace,e=e&&this.name===t.name,e=e&&this.ids===t.ids,e=e&&this.cql===t.cql,e=e&&this.version===t.version,e=e&&this.extract===t.extract),e}}])&&aD(e.prototype,r),n&&aD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WO);dD.DEFAULT_PARAMS={fill:{color:"rgba(103, 175, 19, 0.2)",opacity:.4},stroke:{color:"#67af13",width:1}},dD.DEFAULT_OPTIONS_STYLE={point:nD(nD({},dD.DEFAULT_PARAMS),{},{radius:5}),line:nD({},dD.DEFAULT_PARAMS),polygon:nD({},dD.DEFAULT_PARAMS)};var mD=dD,yD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gD=[],vD=function(t){function e(e,r,n,i){var o=t.call(this,e,r,{transition:0})||this;return o.context_={},o.executorGroups={},o.loadingSourceTiles=0,o.errorSourceTileKeys={},o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=null,o.wantedResolution,o.getSourceTiles=i.bind(void 0,o),o.sourceZ=-1,o.hifi=!1,o.wrappedTileCoord=n,o}return yD(e,t),e.prototype.getContext=function(t){var e=Mr(t);return e in this.context_||(this.context_[e]=Bs(1,1,gD)),this.context_[e]},e.prototype.hasContext=function(t){return Mr(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=Mr(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)gD.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(Yg),_D=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bD=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.extent=null,s.format_=i,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=o,s.url_=n,s}return _D(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==Go&&(this.setState(zo),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(qo)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(Uo)},e.prototype.setLoader=function(t){this.loader_=t},e}(Yg),wD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MD=function(t){function e(e){var r=this,n=e.projection||"EPSG:3857",i=e.extent||gv(n),o=e.tileGrid||dv({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:SD,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.loadingTiles_={},r.sourceTileCache=new ev(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:bD,r.tileGrids_={},r}return wD(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],r=this.tileCache;if(0===r.getCount())return e;var n=ly(r.peekFirstKey())[0],i=this.tileGrid;return r.forEach((function(r){if(r.tileCoord[0]===n&&r.getState()===Uo)for(var o=r.getSourceTiles(),a=0,s=o.length;a<s;++a){var u=o[a],l=u.tileCoord;if(mn(t,i.getTileCoordExtent(l))){var c=u.getFeatures();if(c)for(var h=0,f=c.length;h<f;++h){var p=c[h],d=p.getGeometry();mn(t,d.getExtent())&&e.push(p)}}}})),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,r){t.prototype.expireCache.call(this,e,r),this.sourceTileCache.expireCache({})},e.prototype.getSourceTiles=function(t,e,r){var n=r.wrappedTileCoord,i=this.getTileGridForProjection(e),o=i.getTileCoordExtent(n),a=n[0],s=i.getResolution(a);Dr(o,-s,o);var u=this.tileGrid,l=u.getExtent();l&&hn(o,l,o);var c,h,f,p=u.getZForResolution(s,1),d=u.getMinZoom(),m=r.sourceTiles;if(m&&m.length>0&&m[0].tileCoord[0]===p)c=m,h=!0,f=p;else{c=[],f=p+1;do{--f,h=!0,u.forEachTileCoord(o,f,function(n){var i,o=this.tileUrlFunction(n,t,e);if(void 0!==o)if(this.sourceTileCache.containsKey(o)){var a=(i=this.sourceTileCache.get(o)).getState();if(a===Uo||a===qo||a===Vo)return void c.push(i)}else f===p&&((i=new this.tileClass(n,Go,o,this.format_,this.tileLoadFunction)).extent=u.getTileCoordExtent(n),i.projection=e,i.resolution=u.getResolution(n[0]),this.sourceTileCache.set(o,i),i.addEventListener(Ai,this.handleTileChange.bind(this)),i.load());h=h&&i&&i.getState()===Uo,i&&i.getState()!==Vo&&r.getState()===Go&&(r.loadingSourceTiles++,i.addEventListener(Ai,(function t(){var e=i.getState(),n=i.getKey();if(e===Uo||e===qo){e===Uo?(i.removeEventListener(Ai,t),r.loadingSourceTiles--,delete r.errorSourceTileKeys[n]):e===qo&&(r.errorSourceTileKeys[n]=!0);var o=Object.keys(r.errorSourceTileKeys).length;r.loadingSourceTiles-o==0&&(r.hifi=0===o,r.sourceZ=p,r.setState(Uo))}})))}.bind(this)),h||(c.length=0)}while(!h&&f>d)}return r.getState()===Go&&r.setState(zo),h&&(r.hifi=p===f,r.sourceZ=f,r.getState()<Uo?r.setState(Uo):m&&xi(c,m)||(r.sourceTiles=c)),c},e.prototype.getTile=function(t,e,r,n,i){var o,a=sy(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var u=[t,e,r],l=this.getTileCoordForTileUrlFunction(u,i),c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(i);if(l&&c){var f=h.getTileCoordExtent(l);Dr(f,-h.getResolution(t),f),mn(c,f)||(l=null)}var p=!0;if(null!==l){var d=this.tileGrid,m=h.getResolution(t),y=d.getZForResolution(m,1),g=h.getTileCoordExtent(l);Dr(g,-m,g),d.forEachTileCoord(g,y,function(t){p=p&&!this.tileUrlFunction(t,n,i)}.bind(this))}var v=new vD(u,p?Vo:Go,l,this.getSourceTiles.bind(this,n,i));return v.key=s,o?(v.interimTile=o,v.refreshInterimChain(),this.tileCache.replace(a,v)):this.tileCache.set(a,v),v},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){var n=this.tileGrid;r=yv(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=r}return r},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,r){var n=hu(this.getTileGridForProjection(r).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(Ov);function SD(t,e){var r=OS(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(r)}var xD="image",ED="hybrid",OD="vector",PD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TD={image:[Pc,Sc,Oc,Ec,Tc],hybrid:[Pc,Oc],vector:[]},ID={image:[xc],hybrid:[Ec,Tc,xc],vector:[Pc,Sc,Oc,Ec,Tc,xc]},LD=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=[1,0,0,1,0,0],r}return PD(e,t),e.prototype.prepareTile=function(t,e,r,n){var i,o=Mr(t),a=t.getState();return(a===Uo&&t.hifi||a===qo)&&o in this.tileListenerKeys_&&(yi(this.tileListenerKeys_[o]),delete this.tileListenerKeys_[o]),a!==Uo&&a!==qo||(this.updateExecutorGroup_(t,e,r),this.tileImageNeedsRender_(t,e,r)&&(i=!0,n&&(this.renderTileImageQueue_[o]=t))),i},e.prototype.getTile=function(e,r,n,i){var o=i.pixelRatio,a=i.viewState,s=a.resolution,u=a.projection,l=this.getLayer(),c=l.getSource().getTile(e,r,n,o,u);if(c.getState()<Uo){c.wantedResolution=s;var h=Mr(c);if(!(h in this.tileListenerKeys_)){var f=di(c,Ai,this.prepareTile.bind(this,c,o,u,!0));this.tileListenerKeys_[h]=f}}else{var p=i.viewHints;!!(p[ea]||p[ra])&&c.wantedResolution||(c.wantedResolution=s),this.prepareTile(c,o,u,!1)&&l.getRenderMode()!==OD&&this.renderTileImage_(c,i)}return t.prototype.getTile.call(this,e,r,n,i)},e.prototype.isDrawableTile=function(e){var r=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&r.getRenderMode()===OD||e.hasContext(r)},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,r){var n=this.getLayer(),i=n.getRevision(),o=n.getRenderOrder()||null,a=t.wantedResolution,s=t.getReplayState(n);if(s.dirty||s.renderedResolution!==a||s.renderedRevision!=i||s.renderedRenderOrder!=o||s.renderedZ!==t.sourceZ){var u=n.getSource(),l=u.getTileGrid(),c=u.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),h=u.getSourceTiles(e,r,t),f=Mr(n);delete t.hitDetectionImageData[f],t.executorGroups[f]=[];for(var p=function(r,i){var p=h[r];if(p.getState()!=Uo)return"continue";var m=p.tileCoord,y=l.getTileCoordExtent(m),g=hn(c,y),v=Kr(y,g)?null:Dr(g,n.getRenderBuffer()*a,d.tmpExtent);s.dirty=!1;var _=new ZM(0,g,a,e,n.getDeclutter()),b=Rc(a,e),w=function(t){var e,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(e=r(t,a)),e){var i=this.renderFeature(t,b,e,_);this.dirty_=this.dirty_||i,s.dirty=s.dirty||i}},M=p.getFeatures();o&&o!==s.renderedRenderOrder&&M.sort(o);for(var S=0,x=M.length;S<x;++S){var E=M[S];v&&!mn(v,E.getGeometry().getExtent())||w.call(d,E)}var O=_.finish(),P=n.getRenderMode()!==OD&&n.getDeclutter()&&1===h.length?null:g,T=new uS(P,a,e,u.getOverlaps(),O,n.getRenderBuffer());t.executorGroups[f].push(T)},d=this,m=0,y=h.length;m<y;++m)p(m);s.renderedRevision=i,s.renderedZ=t.sourceZ,s.renderedRenderOrder=o,s.renderedResolution=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){var o=e.viewState.resolution,a=e.viewState.rotation;r=null==r?0:r;var s,u,l,c=this.getLayer(),h=c.getDeclutter(),f=c.getSource().getTileGridForProjection(e.viewState.projection),p={},d=this.renderedTiles,m=function(){var e=d[u],l=zr(f.getTileCoordExtent(e.wrappedTileCoord),t);if(!h&&!l)return"continue";for(var m=e.executorGroups[Mr(c)],y=0,g=m.length;y<g;++y){var v=m[y];s=s||v.forEachFeatureAtCoordinate(t,o,a,r,(function(t){if(l||i&&-1!==i.indexOf(t)){var e=t.getId();if(void 0===e&&(e=Mr(t)),!(e in p))return p[e]=!0,n(t,c)}}),c.getDeclutter()?i:null)}};for(u=0,l=d.length;u<l;++u)m();return s},e.prototype.getFeatures=function(t){return new Promise(function(e,r){for(var n,i=this.getLayer(),o=Mr(i),a=i.getSource(),s=this.renderedProjection,u=s.getExtent(),l=this.renderedResolution,c=a.getTileGridForProjection(s),h=ja(this.renderedPixelToCoordinateTransform_,t.slice()),f=c.getTileCoordForCoordAndResolution(h,l),p=0,d=this.renderedTiles.length;p<d;++p)if(f.toString()===this.renderedTiles[p].tileCoord.toString()){if((n=this.renderedTiles[p]).getState()===Uo&&n.hifi){var m=c.getTileCoordExtent(n.tileCoord);a.getWrapX()&&s.canWrapX()&&!Ur(u,m)&&_a(h,s);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var y=fn(c.getTileCoordExtent(n.wrappedTileCoord)),g=[(h[0]-y[0])/l,(y[1]-h[1])/l],v=n.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),_=n.hitDetectionImageData[o];if(!_&&!this.animatingOrInteracting_){var b=hu(c.getTileSize(c.getZForResolution(l))),w=[b[0]/2,b[1]/2],M=this.renderedRotation_;_=_S(b,[this.getRenderTransform(c.getTileCoordCenter(n.wrappedTileCoord),l,0,.5,w[0],w[1],0)],v,i.getStyleFunction(),c.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(i).renderedResolution,M),n.hitDetectionImageData[o]=_}e(bS(g,v,_))}}.bind(this))},e.prototype.handleFontsChanged=function(){kn(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,r){var n=e.viewHints,i=!(n[ea]||n[ra]);this.renderQueuedTileImages_(i,e),t.prototype.renderFrame.call(this,e,r),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var o=this.getLayer(),a=o.getRenderMode();if(a===xD)return this.container;var s=o.getSource(),u=e.usedTiles[Mr(s)];for(var l in this.renderTileImageQueue_)u&&l in u||delete this.renderTileImageQueue_[l];for(var c=this.context,h=o.getDeclutter()?{}:null,f=ID[a],p=e.pixelRatio,d=e.viewState,m=d.center,y=d.resolution,g=d.rotation,v=e.size,_=Math.round(v[0]*p),b=Math.round(v[1]*p),w=this.renderedTiles,M=s.getTileGridForProjection(e.viewState.projection),S=[],x=[],E=w.length-1;E>=0;--E)for(var O=w[E],P=O.tileCoord,T=M.getTileCoordExtent(O.wrappedTileCoord),I=M.getTileCoordExtent(P,this.tmpExtent)[0]-T[0],L=ka(Fa(this.inversePixelTransform.slice(),1/p,1/p),this.getRenderTransform(m,y,g,p,_,b,I)),R=O.executorGroups[Mr(o)],C=!1,A=0,k=R.length;A<k;++A){var N=R[A];if(N.hasExecutors(f)){var j=O.tileCoord[0],F=void 0;if(!h&&!C){F=N.getClipCoords(L),c.save();for(var D=0,B=S.length;D<B;++D){var G=S[D];j<x[D]&&(c.beginPath(),c.moveTo(F[0],F[1]),c.lineTo(F[2],F[3]),c.lineTo(F[4],F[5]),c.lineTo(F[6],F[7]),c.moveTo(G[6],G[7]),c.lineTo(G[4],G[5]),c.lineTo(G[2],G[3]),c.lineTo(G[0],G[1]),c.clip())}}N.execute(c,L,g,i,f,h),h||C||(c.restore(),S.push(F),x.push(j),C=!0)}}h&&sS(h,c,g,e.layerStatesArray[e.layerIndex].opacity,i,e.declutterItems);return this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var r in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,r,n){if(!r)return!1;var i=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)i=Ac(n,t,r[o],e,this.boundHandleStyleImageChange_)||i;else i=Ac(n,t,r,e,this.boundHandleStyleImageChange_);return i},e.prototype.tileImageNeedsRender_=function(t,e,r){var n=this.getLayer(),i=t.getReplayState(n),o=n.getRevision(),a=t.sourceZ,s=t.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==o||i.renderedTileZ!==a},e.prototype.renderTileImage_=function(t,e){var r=this.getLayer(),n=t.getReplayState(r),i=r.getRevision(),o=t.executorGroups[Mr(r)];n.renderedTileRevision=i,n.renderedTileZ=t.sourceZ;var a=t.wrappedTileCoord,s=a[0],u=r.getSource(),l=e.pixelRatio,c=e.viewState.projection,h=u.getTileGridForProjection(c),f=h.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*f,d=h.getResolution(s),m=t.getContext(r);l=Math.max(l,p/l);var y=u.getTilePixelSize(s,l,c);m.canvas.width=y[0],m.canvas.height=y[1];var g=l/p;if(1!==g){var v=Aa(this.tmpTransform_);Fa(v,g,g),m.setTransform.apply(m,v)}var _=h.getTileCoordExtent(a,this.tmpExtent),b=p/d,w=Aa(this.tmpTransform_);Fa(w,b,-b),function(t,e,r){ka(t,Na(Ca,1,0,0,1,e,r))}(w,-_[0],-_[3]);for(var M=0,S=o.length;M<S;++M){o[M].execute(m,w,0,!0,TD[r.getRenderMode()])}n.renderedTileResolution=t.wantedResolution},e}(Jm),RD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CD=function(t){function e(e){var r=this,n=e||{},i=An({},n);delete i.preload,delete i.useInterimTilesOnError,r=t.call(this,i)||this;var o=n.renderMode||ED;return Or(null==o||o==xD||o==ED||o==OD,28),r.renderMode_=o,r.setPreload(n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return RD(e,t),e.prototype.createRenderer=function(){return new LD(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(Dm)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Bm)},e.prototype.setPreload=function(t){this.set(Dm,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Bm,t)},e}(EM),AD=r(214),kD=r.n(AD),ND=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function jD(t,e,r){if(3===t){var n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(FD,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function FD(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1===(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(n)}}function DD(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[i]=o}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function BD(t,e,r){t.pos=e.features[r];var n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(DD,i,n),i}var GD=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=new ar({code:"",units:or.TILE_PIXELS}),r.featureClass_=n.featureClass?n.featureClass:by,r.geometryName_=n.geometryName,r.layerName_=n.layerName?n.layerName:"layer",r.layers_=n.layers?n.layers:null,r.idProperty_=n.idProperty,r}return ND(e,t),e.prototype.readRawGeometry_=function(t,e,r,n){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,u=0,l=0,c=0;t.pos<i;){if(!a){var h=t.readVarint();o=7&h,a=h>>3}a--,1===o||2===o?(s+=t.readSVarint(),u+=t.readSVarint(),1===o&&l>c&&(n.push(l),c=l),r.push(s,u),l+=2):7===o?l>c&&(r.push(r[c],r[c+1]),l+=2):Or(!1,59)}l>c&&(n.push(l),c=l)},e.prototype.createFeature_=function(t,e,r){var n,i=e.type;if(0===i)return null;var o,a=e.properties;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=e.id,a[this.layerName_]=e.layer.name;var s=[],u=[];this.readRawGeometry_(t,e,s,u);var l=function(t,e){var r;1===t?r=1===e?mr.POINT:mr.MULTI_POINT:2===t?r=1===e?mr.LINE_STRING:mr.MULTI_LINE_STRING:3===t&&(r=mr.POLYGON);return r}(i,u.length);if(this.featureClass_===by)(n=new this.featureClass_(l,s,u,a,o)).transform(r.dataProjection,r.featureProjection);else{var c=void 0;if(l==mr.POLYGON){for(var h=[],f=0,p=0,d=0,m=u.length;d<m;++d){var y=u[d];xs(s,f,y,2)||(h.push(u.slice(p,d)),p=d),f=y}c=h.length>1?new Iy(s,Ea,h):new Ls(s,Ea,u)}else c=l===mr.POINT?new ds(s,Ea):l===mr.LINE_STRING?new Sy(s,Ea):l===mr.POLYGON?new Ls(s,Ea,u):l===mr.MULTI_POINT?new Ey(s,Ea):l===mr.MULTI_LINE_STRING?new Py(s,Ea,u):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var g=G_(c,!1,r);n.setGeometry(g),n.setId(o),n.setProperties(a,!0)}return n},e.prototype.getType=function(){return U_},e.prototype.readFeatures=function(t,e){var r=this.layers_,n=this.adaptOptions(e),i=Vn(n.dataProjection);i.setWorldExtent(n.extent),n.dataProjection=i;var o=new kD.a(t),a=o.readFields(jD,{}),s=[];for(var u in a)if(!r||-1!=r.indexOf(u)){var l=a[u],c=l?[0,0,l.extent,l.extent]:null;i.setExtent(c);for(var h=0,f=l.length;h<f;++h){var p=BD(o,l,h);s.push(this.createFeature_(o,p,n))}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(B_);function zD(t){return(zD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==zD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===zD(o)?o:String(o)),n)}var i,o}function qD(t,e){return(qD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function VD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ZD(t);if(e){var i=ZD(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return YD(this,r)}}function YD(t,e){if(e&&("object"===zD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ZD(t){return(ZD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qD(t,e)}(o,t);var e,r,n,i=VD(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,r)).formater_=null,n.popup_=null,n.lastZoom_=-1,n.projection_=t.projection||"EPSG:3857",n.features_=[],n.mode_=t.mode,n.loaded_=!1,n.opacity_=t.opacity||1,n.visibility_=!1!==t.visibility,n.layers_=t.layers,n.extract=t.extract,n}return e=o,(r=[{key:"addTo",value:function(t){var e=this;this.map=t,this.fire("added:map"),void 0!==this.layers_?this.formater_=new GD({layers:this.layers_,featureClass:this.mode_===sB.FEATURE?dy:by}):this.formater_=new GD({featureClass:this.mode_===sB.FEATURE?dy:by});var r=this.facadeVector_.getMaxExtent(),n=new MD({format:this.formater_,url:this.url,projection:this.projection_});n.on(xv,(function(t){return e.checkAllTilesLoaded_(t)})),this.ol3Layer=new CD(dq({source:n,extent:r},this.vendorOptions_,!0)),this.setOpacity(this.opacity_),this.setVisible(this.visibility_),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.on("change:zoom",(function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}})),this.map.on("move",(function(t){if(e.map){var r=e.map.getContainer().parentElement.parentElement.id;document.getElementById(r).style.cursor="inherit",e.map.getMapImpl().forEachFeatureAtPixel(t.pixel,(function(t){t&&(document.getElementById(r).style.cursor="pointer")}))}})),setTimeout((function(){var t=e.map.getLayers().filter((function(t){var r=void 0===t.getImpl().layers_||t.getImpl().layers_===e.layers_;return t.url===e.url&&r}));t.length>0&&null!==t[0].getStyle()&&t[0].setStyle(t[0].getStyle())}),10)}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&(this.unselectFeatures(),!XU(n))){var i=sp(oF.a,{vars:this.parseFeaturesForTemplate_(t),parseToHtml:!1}),o={icon:"g-cartografia-pin",title:this.name,content:i},a=this.map.getPopup();XU(a)?((a=new vw).addTab(o),this.map.addPopup(a,e)):a.addTab(o)}}},{key:"parseFeaturesForTemplate_",value:function(t){var e={features:[]};return t.forEach((function(t){var r=t.getAttributes(),n=Object.keys(r),i=[];n.forEach((function(t){i.push({key:t,value:r[t]})}));var o={id:t.getId(),attributes:i};e.features.push(o)})),e}},{key:"unselectFeatures",value:function(){XU(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"removePopup",value:function(){XU(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeatures",value:function(t,e){var r=[];if(this.ol3Layer){var n=this.ol3Layer.getSource().tileCache;if(0===n.getCount())return r;var i=ly(n.peekFirstKey())[0];n.forEach((function(t){if(t.tileCoord[0]===i&&t.getState()===Uo)for(var e=t.getSourceTiles(),n=0,o=e.length;n<o;n+=1){var a=e[n].getFeatures();a&&(r=r.concat(a))}}))}return r}},{key:"checkAllTilesLoaded_",value:function(t){var e=t.tile.getTileCoord(),r=Vn(this.projection_);this.ol3Layer.getSource().getTileCacheForProjection(r).getValues().every((function(t){var r=t.getTileCoord(),n=t.getState();return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]||n!==zo}))&&!this.loaded_&&(this.loaded_=!0,this.facadeVector_.fire(Uf))}},{key:"isLoaded",value:function(){return!0}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&UD(e.prototype,r),n&&UD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(YS);function HD(t){return(HD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function KD(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?XD(Object(r),!0).forEach((function(e){JD(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XD(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function JD(t,e,r){return(e=tB(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tB(n.key),n)}}function tB(t){var e=function(t,e){if("object"!==HD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==HD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===HD(e)?e:String(e)}function eB(){return(eB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=rB(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function rB(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aB(t)););return t}function nB(t,e){return(nB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=aB(t);if(e){var i=aB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return oB(this,r)}}function oB(t,e){if(e&&("object"===HD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function aB(t){return(aB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sB={RENDER:"render",FEATURE:"feature"},uB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nB(t,e)}(o,t);var e,r,n,i=iB(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;QD(this,o);var s=a||new WD(e,r,n);return t=i.call(this,e,r,n,s),YU(WD)&&Af("La implementación usada no puede crear capas Vector"),t.extract=e.extract,t}return e=o,(r=[{key:"type",get:function(){return Ip},set:function(t){YU(t)||XU(t)||t===Ip||Af("El tipo de capa debe ser '".concat(Ip).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){XU(t)?this.getImpl().extract=!1:QU(t)?this.getImpl().extract="true"===tq(t):this.getImpl().extract=t}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return XU(t)&&(t=this.map_.userMaxExtent,XU(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return e(t.getMaxExtent())}))}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;eB(aB(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var t=null,e=this.getFeatures();if(!XU(e)){var r=e[0];XU(r)||(t=r.getType())}return t}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures().map((function(t){return yT.olFeature2Facade(t)}))}},{key:"setFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}}])&&$D(e.prototype,r),n&&$D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WO);uB.DEFAULT_PARAMS_STYLE={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2}},uB.DEFAULT_OPTIONS_STYLE={point:KD(KD({},uB.DEFAULT_PARAMS_STYLE),{},{radius:5}),line:KD({},uB.DEFAULT_PARAMS_STYLE),polygon:KD({},uB.DEFAULT_PARAMS_STYLE)};var lB=uB;function cB(t){return(cB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==cB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==cB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===cB(o)?o:String(o)),n)}var i,o}var fB=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url_=e.url,this.name_=e.name,this.format_=e.format,this.limit_=e.limit,this.offset_=e.offset,this.id_=e.id,this.bbox_=e.bbox,this.cql_=r.cql,this.conditional_=e.conditional,this.projection_=e.projection,this.getFeatureOutputFormat_=e.getFeatureOutputFormat,XU(this.getFeatureOutputFormat_)&&(this.getFeatureOutputFormat_="application/json"),this.describeFeatureTypeOutputFormat_=e.describeFeatureTypeOutputFormat,this.getFeatureVendor_={},XU(r)||XU(r.getFeature)||(this.getFeatureVendor_=r.getFeature),this.describeFeatureTypeVendor_={},XU(r)||XU(r.describeFeatureType)||(this.describeFeatureTypeVendor_=r.describeFeatureType)}var e,r,n;return e=t,(r=[{key:"getDescribeFeatureType",value:function(){var t={service:"OGCAPIFeatures",request:"DescribeFeatureType"};XU(this.describeFeatureTypeOutputFormat_)||(t.outputFormat=this.describeFeatureTypeOutputFormat_);var e=rq(this.url_,t),r=rq(e,this.describeFeatureTypeVendor_),n=this.describeFeatureTypeOutputFormat_,i=new vF(this.name_,n,this.projection_);return new Promise((function(t,e){jU(r).then((function(e){t(i.read(e))}))}))}},{key:"getFeatureUrl",value:function(){var t,e=this,r={};if(XU(this.name_)||(this.url_="".concat(this.url_).concat(this.name_,"/items/")),XU(this.format_)||(r.f=this.format_),XU(this.id_)){if(this.url_="".concat(this.url_,"?"),XU(this.limit_)||(r.limit=this.limit_),XU(this.offset_)||(r.offset=this.offset_),XU(this.bbox_)||(r.bbox=this.bbox_),t=rq(rq(this.url_,r),this.getFeatureVendor_),XU(this.cql_)||(r.filter=this.cql_,t+="filter=".concat(encodeURIComponent(this.cql_))),!XU(this.conditional_)){var n="";Object.keys(this.conditional_).forEach((function(t){var r="&".concat(t,"=").concat(e.conditional_[t],"&");n+=r})),r.conditional=n,t+=r.conditional}}else this.url_="".concat(this.url_).concat(this.id_,"?"),t=rq(rq(this.url_,r),this.getFeatureVendor_);return t=t.replaceAll(" ","%20")}}])&&hB(e.prototype,r),n&&hB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pB(t){return(pB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==pB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pB(o)?o:String(o)),n)}var i,o}function yB(){return(yB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=gB(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function gB(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wB(t)););return t}function vB(t,e){return(vB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wB(t);if(e){var i=wB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bB(this,r)}}function bB(t,e){if(e&&("object"===pB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wB(t){return(wB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vB(t,e)}(o,t);var e,r,n,i=_B(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return dB(this,o),(t=i.call(this,e,r)).describeFeatureType_=null,t.formater_=null,t.loader_=null,t.service_=null,t.loaded_=!1,t.bbox=e.bbox,XU(t.options.getFeatureOutputFormat)&&(t.options.getFeatureOutputFormat="application/json"),t}return e=o,(r=[{key:"addTo",value:function(t){var e=this;yB(wB(o.prototype),"addTo",this).call(this,t),this.updateSource_(),t.getImpl().on("change",(function(){return e.refresh()}))}},{key:"refresh",value:function(t){t&&this.facadeVector_.removeFeatures(this.facadeVector_.getFeatures(!0)),this.updateSource_(t)}},{key:"setCQL",value:function(t){this.vendorOptions_.cql=t,this.refresh(!0)}},{key:"updateSource_",value:function(t){var e=this;if(XU(this.vendorOptions_.source)){this.service_=new fB({url:this.url,namespace:this.namespace,name:this.name,limit:this.limit,offset:this.offset,format:this.format||"json",id:this.id,bbox:this.bbox,conditional:this.conditional,projection:this.map.getProjection(),getFeatureOutputFormat:this.options.getFeatureOutputFormat,describeFeatureTypeOutputFormat:this.options.describeFeatureTypeOutputFormat},this.vendorOptions_),/json/gi.test(this.options.getFeatureOutputFormat)?this.formater_=new nF({defaultDataProjection:Vn(this.map.getProjection().code)}):this.formater_=new IF(this.name,this.version,this.map.getProjection()),this.loader_=new jF(this.map,this.service_,this.formater_);var r=this.ol3Layer.getSource();this.requestFeatures_().then((function(n){if(!0===t||XU(r)){var i=new jS({loader:function(){e.loaded_=!0,e.facadeVector_.addFeatures(n),e.fire(Uf,[n]),e.facadeVector_.redraw()}});e.ol3Layer.setSource(i)}else r.set("format",e.formater_),r.set("loader",e.loader_.getLoaderFn((function(t){e.loaded_=!0,e.facadeVector_.addFeatures(t),e.fire(Uf,[t]),e.facadeVector_.redraw()}))),r.set("strategy",TS),r.changed()}))}}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return Zy.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=Zy.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=Zy.getFeaturesExtent(t,i);n(e)}))}))}},{key:"getDescribeFeatureType",value:function(){var t=this;return XU(this.describeFeatureType_)&&(this.describeFeatureType_=this.service_.getDescribeFeatureType().then((function(e){return XU(e)||(t.formater_=new Xj({geometryName:e.geometryName,defaultDataProjection:Vn(t.map.getProjection().code)})),e}))),this.describeFeatureType_}},{key:"getDefaultValue",value:function(t){return"dateTime"===t?"0000-00-00T00:00:00":"date"===t?"0000-00-00":"time"===t?"00:00:00":"duration"===t?"P0Y":"int"===t||"number"===t||"float"===t||"double"===t||"decimal"===t||"short"===t||"byte"===t||"integer"===t||"long"===t||"negativeInteger"===t||"nonNegativeInteger"===t||"nonPositiveInteger"===t||"positiveInteger"===t||"unsignedLong"===t||"unsignedInt"===t||"unsignedShort"===t||"unsignedByte"===t?0:"hexBinary"===t?null:"-"}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"requestFeatures_",value:function(){var t=this;return new Promise((function(e){t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Vn(t.map.getProjection().code))}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.limit===t.limit,e=e&&this.offset===t.offset,e=e&&this.format===t.format,e=e&&this.bbox===t.bbox,e=e&&this.id===t.id,e=e&&this.getFeatureOutputFormat===t.getFeatureOutputFormat,e=e&&this.describeFeatureTypeOutputFormat===t.describeFeatureTypeOutputFormat),e}}])&&mB(e.prototype,r),n&&mB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(YS);function SB(t){return(SB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function EB(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xB(Object(r),!0).forEach((function(e){OB(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xB(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function OB(t,e,r){return(e=IB(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IB(n.key),n)}}function IB(t){var e=function(t,e){if("object"!==SB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==SB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===SB(e)?e:String(e)}function LB(){return(LB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=RB(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function RB(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NB(t)););return t}function CB(t,e){return(CB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function AB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=NB(t);if(e){var i=NB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kB(this,r)}}function kB(t,e){if(e&&("object"===SB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function NB(t){return(NB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CB(t,e)}(o,t);var e,r,n,i=AB(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};PB(this,o);var a=Tm(t,Mp),s=new MB(r,n);return e=i.call(this,a,r,void 0,s),YU(MB)&&Af(Hf("exception").OGCAPIFeatureslayer_method),XU(t)&&Af(Hf("exception").no_param),e.legend=a.legend,e.url=a.url,e.name=a.name,e.limit=a.limit,e.bbox=a.bbox,e.format=a.format,e.offset=a.offset,e.id=a.id,e.predefinedStyles=YU(r.predefinedStyles)?[]:r.predefinedStyles,YU(r.style)?e.predefinedStyles.unshift(new kO(o.DEFAULT_OPTS_STYLE)):e.predefinedStyles.unshift(r.style),e.cql=n.cql,e.conditional=a.conditional,e.crs=a.crs,e.geometry=a.geometry,e.opt=r,e}return e=o,(r=[{key:"type",get:function(){return Mp},set:function(t){YU(t)||XU(t)||t===Mp||Af("El tipo de capa debe ser '".concat(Mp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){XU(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"name",get:function(){return this.getImpl().name},set:function(t){XU(t)?this.getImpl().name=this.name:this.getImpl().name=t}},{key:"limit",get:function(){return this.getImpl().limit},set:function(t){XU(t)?this.getImpl().limit=this.limit:this.getImpl().limit=t}},{key:"bbox",get:function(){return this.getImpl().bbox},set:function(t){XU(t)?this.getImpl().bbox=this.bbox:this.getImpl().bbox=t}},{key:"format",get:function(){return this.getImpl().format},set:function(t){XU(t)&&(this.getImpl().format=this.format),this.getImpl().format=t}},{key:"offset",get:function(){return this.getImpl().offset},set:function(t){XU(t)?this.getImpl().offset=this.offset:this.getImpl().offset=t}},{key:"id",get:function(){return this.getImpl().id},set:function(t){XU(t)?this.getImpl().id=this.id:this.getImpl().id=t}},{key:"conditional",get:function(){return this.getImpl().conditional},set:function(t){XU(t)?this.getImpl().conditional=this.conditional:this.getImpl().conditional=t}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTS_STYLE;LB(NB(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.legend===t.legend,e=e&&this.limit===t.limit,e=e&&this.format===t.format,e=e&&this.offset===t.offset,e=e&&this.bbox===t.bbox,e=e&&this.id===t.id,e=e&&this.predefinedStyles===t.predefinedStyles),e}}])&&TB(e.prototype,r),n&&TB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WO);jB.DEFAULT_PARAMS={fill:{color:"rgba(103, 175, 19, 0.2)",opacity:.4},stroke:{color:"#67af13",width:1}},jB.DEFAULT_OPTS_STYLE={point:EB(EB({},jB.DEFAULT_PARAMS),{},{radius:5}),line:EB({},jB.DEFAULT_PARAMS),polygon:EB({},jB.DEFAULT_PARAMS)};var FB=jB,DB=(r(232),r(215)),BB=r.n(DB),GB=".m-top.m-left",zB=".m-top.m-right",UB=".m-bottom.m-left",qB=".m-bottom.m-right";function VB(t){return(VB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==VB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==VB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===VB(o)?o:String(o)),n)}var i,o}function WB(t,e){return(WB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=KB(t);if(e){var i=KB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return XB(this,r)}}function XB(t,e){if(e&&("object"===VB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function KB(t){return(KB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WB(t,e)}(o,t);var e,r,n,i=HB(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return YB(this,o),(e=i.call(this)).name=t,e._map=null,e._controls=[],e._buttonPanel=null,e._collapsible=!1,XU(r.collapsible)||(e._collapsible=r.collapsible),e.position=GB,XU(r.position)||(e.position=r.position),e._collapsed=e._collapsible,XU(r.collapsed)||(e._collapsed=r.collapsed&&!0===e._collapsible),e._multiActivation=!1,XU(r.multiActivation)||(e._multiActivation=r.multiActivation),e._className=null,XU(r.className)||(e._className=r.className),e._collapsedButtonClass=null,XU(r.collapsedButtonClass)?e.position===GB||e.position===UB?e._collapsedButtonClass="g-cartografia-flecha-derecha":e.position!==zB&&e.position!==qB||(e._collapsedButtonClass="g-cartografia-flecha-izquierda"):e._collapsedButtonClass=r.collapsedButtonClass,e._openedButtonClass=null,XU(r.openedButtonClass)?e.position===GB||e.position===UB?e._openedButtonClass="g-cartografia-flecha-izquierda":e.position!==zB&&e.position!==qB||(e._openedButtonClass="g-cartografia-flecha-derecha"):e._openedButtonClass=r.openedButtonClass,e._element=null,e._areaContainer=null,e._controlsContainer=null,e._tooltip=null,XU(r.tooltip)||(e._tooltip=r.tooltip),XU(r.order)||(e._order=r.order),e}return e=o,(r=[{key:"destroy",value:function(){null!=this._element&&this._areaContainer.removeChild(this._element),this._controlsContainer=null}},{key:"addTo",value:function(t,e){var r=this;this._map=t,this._areaContainer=e;var n=sp(BB.a),i=n.querySelector(".m-panel-btn");i.setAttribute("type","button"),this._element=n,i.setAttribute("role","button"),i.setAttribute("aria-label","Plugin ".concat(this.name)),this._order?(this._element.style.setProperty("order",this._order,"important"),i.setAttribute("tabIndex",this._order)):i.setAttribute("tabIndex","300"),this._tabAccessibility(),XU(this._tooltip)||this._element.setAttribute("title",this._tooltip),this._buttonPanel=n.querySelector("button.m-panel-btn"),XU(this._className)||this._className.split(/\s+/).forEach((function(t){n.classList.add(t)})),!0===this._collapsed?this.collapse():this.open(),!0!==this._collapsible&&n.classList.add("no-collapsible"),this._controlsContainer=n.querySelector("div.m-panel-controls"),e.appendChild(n),this._buttonPanel.addEventListener("click",(function(t){t.preventDefault(),!1===r._collapsed?r.collapse():r.open()})),this.addControls(this._controls),this.fire("added:map",n)}},{key:"_tabAccessibility",value:function(){document.body.addEventListener("keyup",(function(t){var e=t.key,r=t.target;"Tab"===e&&(document.querySelector(".focusStyle")&&document.querySelector(".focusStyle").classList.remove("focusStyle"),r.classList.add("focusStyle"))})),document.body.addEventListener("click",(function(){document.querySelector(".focusStyle")&&document.querySelector(".focusStyle").classList.remove("focusStyle")}))}},{key:"_collapse",value:function(t){t.classList.remove("opened"),this._buttonPanel.classList.remove(this._openedButtonClass),t.classList.add("collapsed"),this._buttonPanel.classList.add(this._collapsedButtonClass),this._collapsed=!0,this.fire("hide")}},{key:"_open",value:function(t){t.classList.remove("collapsed"),this._buttonPanel.classList.remove(this._collapsedButtonClass),t.classList.add("opened"),this._buttonPanel.classList.add(this._openedButtonClass),this._collapsed=!1,this.fire("show")}},{key:"open",value:function(){this._open(this._element)}},{key:"collapse",value:function(){this._collapse(this._element)}},{key:"getControls",value:function(){return this._controls}},{key:"addControls",value:function(t){var e=this;this.contador=0;var r=t;XU(r)||(HU(r)||(r=[r]),r.forEach((function(t,r){t instanceof ep&&(e.hasControl(t)||(e._controls.push(t),t.setPanel(e),t.on("destroy",e._removeControl.bind(e),e)),XU(e._controlsContainer)||(t.on("added:map",e._moveControlView.bind(e),e),e._map.addControls(t)),t.on("activated",e._manageActivation.bind(e),e)),t.on("added:map",(function(){}))})))}},{key:"hasControl",value:function(t){var e=!1;return XU(t)||(QU(t)?e=null!=this._controls.filter((function(e){return e.name===t}))[0]:t instanceof ep&&(e=pq(this._controls,t))),e}},{key:"removeControls",value:function(t){var e=this,r=t;XU(r)||(HU(r)||(r=[r]),r.forEach((function(t){var r=t;r instanceof ep&&e.hasControl(r)&&(e._controls=e._controls.filter((function(t){return!r.equals(t)})),r.setPanel(null))}),this),0===this._controls.length&&this._map.removePanel(this))}},{key:"_removeControl",value:function(t){var e=this;this._map.controls(t).forEach((function(t){var r=e._controls.indexOf(t);-1!==r&&e._controls.splice(r,1)}))}},{key:"removeClassName",value:function(t){XU(this._element)?this._className=this._className.replace(new RegExp("s* ".concat(t," s*")),""):this._element.classList.remove(t)}},{key:"addClassName",value:function(t){XU(this._element)?this._className=this._className.concat(" ").concat(t):this._element.classList.add(t)}},{key:"_moveControlView",value:function(t){var e=t.getElement();XU(this._controlsContainer)||this._controlsContainer.appendChild(e),t.fire("added:panel")}},{key:"_manageActivation",value:function(t){!0!==this._multiActivation&&this._controls.forEach((function(e){!e.equals(t)&&e.activated&&e.deactivate()}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=t.name===this.name),e}},{key:"getTemplatePanel",value:function(){return this._element}},{key:"getButtonPanel",value:function(){return this._buttonPanel}},{key:"isCollapsed",value:function(){return this._collapsed}},{key:"getControlsContainer",value:function(){return this._controlsContainer}}])&&ZB(e.prototype,r),n&&ZB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vf);function QB(t){return(QB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==QB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==QB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===QB(o)?o:String(o)),n)}var i,o}function tG(t,e){return(tG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=nG(t);if(e){var i=nG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rG(this,r)}}function rG(t,e){if(e&&("object"===QB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nG(t){return(nG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tG(t,e)}(o,t);var e,r,n,i=eG(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.url_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){e.loadInternal_(i).then((function(r){t.apply(e,r)}))}}},{key:"loadInternal_",value:function(t){var e=this;return new Promise((function(r){jU(e.url_).then((function(n){if(XU(n.text))Af(Hf("exception").no_service_response);else{var i=n.text.replace("urn:ogc:def:crs:OGC:1.3:CRS84","urn:ogc:def:crs:EPSG::4326"),o=e.format_.read(i,{featureProjection:t});r.call(e,[o])}}))}))}}])&&$B(e.prototype,r),n&&$B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vf);function oG(t){return(oG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==oG(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===oG(o)?o:String(o)),n)}var i,o}function sG(){return(sG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=uG(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function uG(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fG(t)););return t}function lG(t,e){return(lG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fG(t);if(e){var i=fG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hG(this,r)}}function hG(t,e){if(e&&("object"===oG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fG(t){return(fG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lG(t,e)}(o,t);var e,r,n,i=cG(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,r)).popup_=null,n.formater_=null,n.loader_=null,n.loadFeaturesPromise_=null,n.loaded_=!1,n.hiddenAttributes_=[],XU(e.hide)||(n.hiddenAttributes_=e.hide),n.showAttributes_=[],XU(e.show)||(n.showAttributes_=e.show),n}return e=o,(r=[{key:"addTo",value:function(t){this.formater_=new nF({defaultDataProjection:Vn(t.getProjection().code)}),XU(this.url)||(this.loader_=new iG(t,this.url,this.formater_)),sG(fG(o.prototype),"addTo",this).call(this,t)}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.formater_.write(this.facadeVector_.getFeatures()),r=this.map.getProjection().code.split(":")[1],n={type:"FeatureCollection",features:e,crs:{properties:{code:r},type:"EPSG"}};JU(t)&&(n=t),this.source=n,this.updateSource_()}},{key:"setSource",value:function(t){this.source=t,XU(this.map)||this.updateSource_()}},{key:"requestFeatures_",value:function(){var t=this;return XU(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise((function(e){if(t.source){var r=t.formater_.read(t.source,t.map.getProjection());e(r)}else t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Vn(t.map.getProjection().code))}))),this.loadFeaturesPromise_}},{key:"updateSource_",value:function(){var t=this;XU(this.vendorOptions_.source)&&this.requestFeatures_().then((function(e){t.ol3Layer&&t.ol3Layer.setSource(new jS({loader:function(r,n,i){t.loaded_=!0,t.facadeVector_.clear(),t.facadeVector_.addFeatures(e),t.fire(Uf,[e])}})),t.facadeVector_.addFeatures(e)}))}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return Zy.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=Zy.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=Zy.getFeaturesExtent(t,i);n(e)}))}))}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&(this.unselectFeatures(),!XU(n))){var i=n.getAttribute("vendor.mapea.click");if(KU(i))i(r,n);else{var o=sp(oF.a,{vars:this.parseFeaturesForTemplate_(t),parseToHtml:!1}),a={icon:"g-cartografia-pin",title:this.name,content:o},s=this.map.getPopup();XU(s)?((s=new vw).addTab(a),this.map.addPopup(s,e)):s.addTab(a)}}}},{key:"parseFeaturesForTemplate_",value:function(t){var e=this,r={features:[]};return t.forEach((function(t){var n=t.getAttributes(),i=Object.keys(n),o=[];i.forEach((function(t){var r=!0;XU(e.showAttributes_)?XU(e.hiddenAttributes_)||(r=!pq(e.hiddenAttributes_,t)):r=pq(e.showAttributes_,t),r&&o.push({key:t,value:n[t]})}));var a={id:t.getId(),attributes:o};r.features.push(a)})),r}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&aG(e.prototype,r),n&&aG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(YS);function dG(t){return(dG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mG(Object(r),!0).forEach((function(e){gG(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mG(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gG(t,e,r){return(e=bG(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bG(n.key),n)}}function bG(t){var e=function(t,e){if("object"!==dG(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===dG(e)?e:String(e)}function wG(){return(wG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=MG(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function MG(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=OG(t)););return t}function SG(t,e){return(SG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=OG(t);if(e){var i=OG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return EG(this,r)}}function EG(t,e){if(e&&("object"===dG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function OG(t){return(OG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var PG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SG(t,e)}(o,t);var e,r,n,i=xG(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;vG(this,o);var a=new pG(t,r,n);return e=i.call(this,t,r,void 0,a),YU(pG)&&Af(Hf("exception").geojsonlayer_method),XU(t)&&Af(Hf("exception").no_param),QU(t)?e.url=t:HU(t)?e.source=t:(e.url=t.url,e.name=t.name,e.source=t.source,QU(e.source)&&(e.source=e.deserialize(e.source)),e.extract=t.extract||!1,XU(t.crs)||(XU(e.source)&&(e.source={type:"FeatureCollection",features:[]}),e.source.crs={type:"EPSG",properties:{code:t.crs}})),e.options=r,e}return e=o,(r=[{key:"type",get:function(){return Pp},set:function(t){YU(t)||XU(t)||t===Pp||Af("El tipo de capa debe ser '".concat(Pp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"source",get:function(){return this.getImpl().source},set:function(t){this.getImpl().source=t}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){XU(t)?this.getImpl().extract=!1:QU(t)?this.getImpl().extract="true"===tq(t):this.getImpl().extract=t}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name,e=e&&this.extract===t.extract),e}},{key:"setSource",value:function(t){this.source=t,this.getImpl().refresh(t)}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;wG(OG(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"serialize",value:function(){return window.btoa(unescape(encodeURIComponent(JSON.stringify(this.source))))}},{key:"deserialize",value:function(t){return JSON.parse(decodeURIComponent(escape(window.atob(t.replace(" ","+")))))}}])&&_G(e.prototype,r),n&&_G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WO);PG.DEFAULT_PARAMS={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},PG.DEFAULT_OPTIONS_STYLE={point:yG(yG({},PG.DEFAULT_PARAMS),{},{radius:5}),line:yG({},PG.DEFAULT_PARAMS),polygon:yG({},PG.DEFAULT_PARAMS)};var TG=PG;function IG(t){return(IG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==IG(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==IG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===IG(o)?o:String(o)),n)}var i,o}function CG(t,e){return(CG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function AG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=NG(t);if(e){var i=NG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kG(this,r)}}function kG(t,e){if(e&&("object"===IG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function NG(t){return(NG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CG(t,e)}(o,t);var e,r,n,i=AG(o);function o(){return LG(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"toImage",value:function(t){var e=null,r={fill:this.options_.fill,stroke:this.options_.stroke,icon:this.options_.icon};if(!0===Tq(r))e=Lq(t);else{if(XU(this.olStyleFn_))return null;var n=this.olStyleFn_()[1];if(n.getImage&&null!=n.getImage()&&n.getImage()instanceof lM){if(n.getImage()instanceof sE){var i=n.getImage().getImage();null!=i&&i&&(e=i.toDataURL())}else if(n.getImage()instanceof $x){var a=n.getImage();if(!XU(a)&&!(e=a.getSrc()).startsWith(window.location.origin)){var s=fq([M.config.PROXY_URL,"/image"]);e=rq(s,{url:e})}}}else{null!=(n=this.olStyleFn_()[0]).getImage()&&null!=n.getImage().getStroke()&&(n.getImage().getStroke().getWidth()>o.DEFAULT_WIDTH_POINT&&n.getImage().getStroke().setWidth(o.DEFAULT_WIDTH_POINT),n.getImage().render());var u=n.getImage().getImage();null!=u&&(e=u.toDataURL())}}return e}},{key:"updateFacadeOptions",value:function(t){var e=this;this.olStyleFn_=function(r){var n=r;n instanceof dy||r instanceof by||(n=e);var i,o,u=new IP({zIndex:xx.getValue(t.zindex,n,e.layer_),geometry:function(t){var e=Zy.getCentroid(t.getGeometry()),r=new ds(e);if("MultiPoint"===t.getGeometry().getType()||"Point"===t.getGeometry().getType()&&t instanceof by)if(t instanceof by){for(var n=t.getFlatCoordinates(),i=[],o=0;o<n.length;o+=2)i.push(n.slice(o,o+2));r=new Ey(i)}else r=new Ey(t.getGeometry().getCoordinates());return r}}),l=new IP({zIndex:xx.getValue(t.zindex,n,e.layer_),geometry:function(t){var e=Zy.getCentroid(t.getGeometry()),r=new ds(e);if("MultiPoint"===t.getGeometry().getType()||"Point"===t.getGeometry().getType()&&t instanceof by)if(t instanceof by){for(var n=t.getFlatCoordinates(),i=[],o=0;o<n.length;o+=2)i.push(n.slice(o,o+2));r=new Ey(i)}else r=new Ey(t.getGeometry().getCoordinates());return r}});if(!XU(t.fill)){var c=xx.getValue(t.fill.color,n,e.layer_),h=xx.getValue(t.fill.opacity,n,e.layer_);h||0===h||(h=1),XU(c)||(i=new dM({color:Ox()(c).alpha(h).css()}))}if(!XU(t.stroke)){var f=xx.getValue(t.stroke.color,n,e.layer_),p=xx.getValue(t.stroke.opacity,n,e.layer_);if(p||0===p||(p=1),!XU(f)){var d=t.stroke.linedashoffset;o=new mM({color:Ox()(f).alpha(p).css(),width:xx.getValue(t.stroke.width,n,e.layer_),lineDash:xx.getValue(t.stroke.linedash,n,e.layer_),lineDashOffset:xx.getValue(d,n,e.layer_),lineCap:xx.getValue(t.stroke.linecap,n,e.layer_),lineJoin:xx.getValue(t.stroke.linejoin,n,e.layer_),miterLimit:xx.getValue(t.stroke.miterlimit,n,e.layer_)})}}if(!XU(t.label)){var m=xx.getValue(t.label.text,n,e.layer_),y=xx.getValue(t.label.align,n,e.layer_),g=xx.getValue(t.label.baseline,n,e.layer_),v=new Fx({font:xx.getValue(t.label.font,n,e.layer_),rotateWithView:xx.getValue(t.label.rotate,n,e.layer_),scale:xx.getValue(t.label.scale,n,e.layer_),offsetX:xx.getValue(t.label.offset?t.label.offset[0]:void 0,n,e.layer_),offsetY:xx.getValue(t.label.offset?t.label.offset[1]:void 0,n,e.layer_),fill:new dM({color:xx.getValue(t.label.color||"#000000",n,e.layer_)}),textAlign:Object.values(a).includes(y)?y:"center",textBaseline:Object.values(s).includes(g)?g:"top",text:void 0===m?void 0:String(m),rotation:xx.getValue(t.label.rotation,n,e.layer_)});if(!XU(t.label.stroke)){var _=t.label.stroke,b=_.miterlimit,w=_.linedashoffset;v.setStroke(new mM({color:xx.getValue(t.label.stroke.color,n,e.layer_),width:xx.getValue(t.label.stroke.width,n,e.layer_),lineCap:xx.getValue(t.label.stroke.linecap,n,e.layer_),lineJoin:xx.getValue(t.label.stroke.linejoin,n,e.layer_),lineDash:xx.getValue(t.label.stroke.linedash,n,e.layer_),lineDashOffset:xx.getValue(w,n,e.layer_),miterLimit:xx.getValue(b,n,e.layer_)}))}u.setText(v)}var M=xx.getValue(t.radius,n,e.layer_);return HU(t.radius)&&(M=xx.getValue((function(e,r){var n=t.radius.find((function(t){return t.zoom===r.getZoom()}));return YU(n)&&(n=t.radius.find((function(t){return"default"===t.zoom}))),n?n.value:5}),n,e.layer_)),u.setImage(new xE({fill:i,stroke:o,radius:M,snapToPixel:xx.getValue(t.snapToPixel,n,e.layer_)})),XU(t.icon)||(XU(t.icon.src)?XU(t.icon.form)||l.setImage(new sE({form:XU(xx.getValue(t.icon.form,n,e.layer_))?"":xx.getValue(t.icon.form,n,e.layer_).toLowerCase(),gradient:xx.getValue(t.icon.gradient,n,e.layer_),glyph:xx.getValue(t.icon.class,n,e.layer_),fontSize:xx.getValue(t.icon.fontsize,n,e.layer_),radius:xx.getValue(t.icon.radius,n,e.layer_),rotation:xx.getValue(t.icon.rotation,n,e.layer_),rotateWithView:xx.getValue(t.icon.rotate,n,e.layer_),offsetX:xx.getValue(t.icon.offset?t.icon.offset[0]:void 0,n,e.layer_),offsetY:xx.getValue(t.icon.offset?t.icon.offset[1]:void 0,n,e.layer_),fill:new dM({color:xx.getValue(void 0!==t.icon.fill?t.icon.fill:"#FFFFFF",n,e.layer_)}),stroke:t.icon.color?new mM({color:xx.getValue(t.icon.color,n,e.layer_),width:1}):void 0,anchor:xx.getValue(t.icon.anchor,n,e.layer_),anchorXUnits:xx.getValue(t.icon.anchorxunits,n,e.layer_),anchorYUnits:xx.getValue(t.icon.anchoryunits,n,e.layer_),src:xx.getValue(t.icon.src,n,e.layer_),opacity:xx.getValue(t.icon.opacity,n,e.layer_),scale:xx.getValue(t.icon.scale,n,e.layer_),snapToPixel:xx.getValue(t.icon.snaptopixel,n,e.layer_),offsetOrigin:xx.getValue(t.icon.offsetorigin,n,e.layer_),offset:xx.getValue(t.icon.offset,n,e.layer_),crossOrigin:xx.getValue(t.icon.crossorigin,n,e.layer_),anchorOrigin:xx.getValue(t.icon.anchororigin,n,e.layer_),size:xx.getValue(t.icon.size,n,e.layer_)})):l.setImage(new $x({anchor:xx.getValue(t.icon.anchor,n,e.layer_),anchorXUnits:xx.getValue(t.icon.anchorxunits,n,e.layer_),anchorYUnits:xx.getValue(t.icon.anchoryunits,n,e.layer_),src:xx.getValue(t.icon.src,n,e.layer_),opacity:xx.getValue(t.icon.opacity,n,e.layer_),scale:xx.getValue(t.icon.scale,n,e.layer_),rotation:xx.getValue(t.icon.rotation,n,e.layer_),rotateWithView:xx.getValue(t.icon.rotate,n,e.layer_),snapToPixel:xx.getValue(t.icon.snaptopixel,n,e.layer_),offsetOrigin:xx.getValue(t.icon.offsetorigin,n,e.layer_),offset:xx.getValue(t.icon.offset,n,e.layer_),crossOrigin:xx.getValue(t.icon.crossorigin,n,e.layer_),anchorOrigin:xx.getValue(t.icon.anchororigin,n,e.layer_),size:xx.getValue(t.icon.size,n,e.layer_)}))),[u,l]}}},{key:"drawGeometryToCanvas",value:function(t){this.olStyleFn_()[1].getImage()instanceof fx?t.drawGeometry(new ds([10,10])):t.drawCircle(new Ny([this.getCanvasSize()[0]/2,this.getCanvasSize()[1]/2],this.getRadius_()))}},{key:"updateCanvas",value:function(t){var e=this,r=this.options_;if(r.point&&(r=r.point),r.icon&&r.icon.src&&"string"==typeof r.icon.src&&r.icon.src.endsWith(".svg")&&(r.icon.fill||r.icon.stroke))Nq(r.icon.src,r).then((function(){e.updateCanvas(t)}));else if(this.updateFacadeOptions(r),!Tq(r)){var n=this.getCanvasSize(),i=kc(t.getContext("2d"),{size:n}),o=this.olStyleFn_()[0];XU(o.getText())||o.setText(null),!XU(this.olStyleFn_()[1])&&this.olStyleFn_()[1].getImage()instanceof fx&&(o=this.olStyleFn_()[1]);var a=o.getImage().getStroke();XU(a)||XU(a.getWidth())||a.setWidth(3),i.setStyle(o),this.drawGeometryToCanvas(i)}}},{key:"getCanvasSize",value:function(){var t,e=this.olStyleFn_()[1].getImage();if(e instanceof fx)t=[90,90];else{var r=this.getRadius_(e);t=[2*r+4,2*r+4]}return t}},{key:"getRadius_",value:function(t){return t instanceof vS?25:t instanceof fx?t.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&RG(e.prototype,r),n&&RG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(xx);jG.DEFAULT_WIDTH_POINT=3,jG.getFonts=function(){var t=[],e=fx.defs.fonts;return Object.keys(e).forEach((function(e){t.push(e)})),t},jG.getFontsIcons=function(t){var e=[],r=fx.defs.glyphs;return Object.entries(r).forEach((function(r){r[1].font===t&&e.push(r[0])})),e};var FG=jG;function DG(t){return(DG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==DG(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==DG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===DG(o)?o:String(o)),n)}var i,o}function GG(t,e){return(GG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qG(t);if(e){var i=qG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return UG(this,r)}}function UG(t,e){if(e&&("object"===DG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function qG(t){return(qG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var VG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GG(t,e)}(o,t);var e,r,n,i=zG(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;e=XU(e)?o.DEFAULT_NULL:Mq(e,o.DEFAULT),e=Mq({},e);var r=new FG(e);return i.call(this,e,r)}return e=o,(r=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Point'))"}}])&&BG(e.prototype,r),n&&BG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(MO);VG.DEFAULT={radius:5},VG.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5},radius:5},VG.getFonts=function(){return FG.getFonts()},VG.getFontsIcons=function(t){return FG.getFontsIcons(t)};var YG=VG,ZG=r(216),WG=r.n(ZG),HG=r(217);function XG(t){return(XG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==XG(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==XG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===XG(o)?o:String(o)),n)}var i,o}var JG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAQAAAD2e2DtAAABu0lEQVR42u3SQREAAAzCsOHf9F6oIJXQS07TxQIABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAgAACwAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAAsAEAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAKg9kK0BATSHu+YAAAAASUVORK5CYII=",QG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tiles_={},this.db_=null,this.init(e)}var e,r,n;return e=t,(r=[{key:"init",value:function(t){var e=this;this.initPromise_=new Promise((function(r,n){WG()({locateFile:function(t){return"".concat(M.config.SQL_WASM_URL).concat(t)}}).then((function(n){Aq(t).then((function(t){e.db_=new n.Database(t),r(e.db_)}))})).catch((function(t){n(t)}))}))}},{key:"executeQuery",value:function(t){return this.initPromise_.then((function(e){return e.exec(t)[0]}))}},{key:"getTile",value:function(t){var e="select tile_data from tiles where zoom_level={z} and tile_column={x} and tile_row={y}".replace("{z}",t[0]).replace("{x}",t[1]).replace("{y}",t[2]),r=this.tiles_[t]||null,n=JG;if(this.db_&&XU(r)){var i=this.db_.exec(e)[0];if(!XU(i)){var o=i.values[0][0];n=Cq(o),this.setTile(t,n)}}else n=r;return n}},{key:"getVectorTile",value:function(t){var e,r=this,n="select tile_data from tiles where zoom_level={z} and tile_column={x} and tile_row={y}".replace("{z}",t[0]).replace("{x}",t[1]).replace("{y}",t[2]),i=this.tiles_[t]||null;return i=i?new Promise((function(t){return t(i)})):this.executeQuery(n).then((function(n){return XU(n)||(e=n.values[0][0],e=Object(HG.inflate)(e)),r.setTile(t,e),e}))}},{key:"setTile",value:function(t,e){this.tiles_[t]=e}},{key:"getExtent",value:function(){var t=null;return this.executeQuery('select value from metadata where name="bounds"').then((function(e){if(e){var r=e.values[0][0];t=r.split(",").map(Number.parseFloat)}return t}))}},{key:"getFormat",value:function(){var t="png";return this.executeQuery('select value from metadata where name="format"').then((function(e){return e&&(t=e.values[0][0]),t}))}},{key:"getMaxZoomLevel",value:function(){var t=16;return this.executeQuery("select * from (select zoom_level from tiles group by zoom_level order by zoom_level DESC LIMIT 1)").then((function(e){return e&&(t=e.values[0][0]),t}))}}])&&KG(e.prototype,r),n&&KG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $G(t){return($G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ez(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==$G(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===$G(o)?o:String(o)),n)}var i,o}function rz(t,e){return(rz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=oz(t);if(e){var i=oz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return iz(this,r)}}function iz(t,e){if(e&&("object"===$G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function oz(t){return(oz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var az=function(t,e,r){for(var n=dn(t)/e,i=new Array(r+1),o=0;o<r+1;o+=1)i[o]=n/Math.pow(2,o);return i},sz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rz(t,e)}(o,t);var e,r,n,i=nz(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return tz(this,o),(e=i.call(this,r,n)).tileLoadFunction=t.tileLoadFunction||null,e.url_=t.url,e.source_=t.source,e.maxExtent_=t.maxExtent||null,e.opacity_="number"==typeof t.opacity?t.opacity:1,e.zIndex_=Lb.Z_INDEX.MBTiles,e.maxZoomLevel_=t.maxZoomLevel||null,e.visibility=!1!==t.visibility||t.visibility,e}return e=o,(r=[{key:"setVisible",value:function(t){var e=this;this.visibility=t,!0===t&&!0!==this.transparent?(this.map.getBaseLayers().forEach((function(t){!t.equals(e.facadeLayer_)&&t.isVisible()&&t.setVisible(!1)})),XU(this.ol3Layer)||this.ol3Layer.setVisible(t),this.map.getImpl().updateResolutionsFromBaseLayer()):XU(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"getExtentFromProvider",value:function(){var t=this;return new Promise((function(e){t.fetchSource().then((function(r){r.getExtent().then((function(r){var n,i=t.map.getProjection().code;r&&(n=ti(r,"EPSG:4326",i)),e(n)}))}))}))}},{key:"getMaxZoomLevel",value:function(){return this.maxZoomLevel_}},{key:"addTo",value:function(t){var e=this;this.map=t;var r=Vn(this.map.getProjection().code),n=r.getExtent();if(this.tileLoadFunction){var i=az(n,256,this.maxZoomLevel_||28);this.ol3Layer=this.createLayer({resolutions:i,extent:n,sourceExtent:n,projection:r}),this.map.getMapImpl().addLayer(this.ol3Layer)}else this.fetchSource().then((function(t){t.getMaxZoomLevel().then((function(i){e.maxZoomLevel_||(e.maxZoomLevel_=i);var o=az(n,256,e.maxZoomLevel_);e.getExtentFromProvider().then((function(i){e.ol3Layer=e.createLayer({tileProvider:t,resolutions:o,extent:i||n,sourceExtent:n,projection:r}),e.map.getMapImpl().addLayer(e.ol3Layer)}))}))}))}},{key:"createLayer",value:function(t){var e=this,r=this.loadTileWithProvider;return this.tileLoadFunction&&(r=this.loadTile),new $m({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:this.maxExtent_||t.sourceExtent,source:new wA({url:"{z},{x},{y}",projection:t.projection,tileLoadFunction:function(n){return r(n,t.tileProvider,e)},tileGrid:new fy({extent:t.sourceExtent,origin:on(t.sourceExtent),resolutions:t.resolutions})})})}},{key:"loadTile",value:function(t,e,r){var n=t,i=t.getTileCoord();r.tileLoadFunction(i[0],i[1],-i[2]-1).then((function(t){n.getImage().src=t||JG}))}},{key:"loadTileWithProvider",value:function(t,e){var r=t,n=t.getTileCoord(),i=e.getTile([n[0],n[1],-n[2]-1]);r.getImage().src=i}},{key:"fetchSource",value:function(){var t=this;return new Promise((function(e,r){if(t.tileProvider_)e(t.tileProvider_);else if(t.source_){var n=new QG(t.source_);t.tileProvider_=n,e(n)}else t.url_?window.fetch(t.url_).then((function(r){t.source=r;var n=new QG(r);t.tileProvider_=n,e(n)})):r(new Error(Hf("exception").no_source))}))}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this.map.getMapImpl();XU(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new $m(e)}return t}}])&&ez(e.prototype,r),n&&ez(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(tg);function uz(t){return(uz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==uz(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==uz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===uz(o)?o:String(o)),n)}var i,o}function hz(t,e){return(hz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=dz(t);if(e){var i=dz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pz(this,r)}}function pz(t,e){if(e&&("object"===uz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dz(t){return(dz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hz(t,e)}(o,t);var e,r,n,i=fz(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};lz(this,o),YU(sz)&&Af(Hf("exception").mbtiles_method);var a=Tm(t,Lp),s=new sz(a,r,n);return(e=i.call(this,a,s)).name=a.name,e.legend=a.legend,e.source=a.source,e.url=a.url,e.options=r,e}return e=o,(r=[{key:"legend",get:function(){return this.getImpl().legend},set:function(t){XU(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"type",get:function(){return Lp},set:function(t){YU(t)||XU(t)||t===Lp||Af("El tipo de capa debe ser '".concat(Lp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.source===t.source,e=e&&this.legend===t.legend,e=e&&this.name===t.name,e=e&&this.options===t.options),e}}])&&cz(e.prototype,r),n&&cz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fm);function yz(t){return(yz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==yz(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===yz(o)?o:String(o)),n)}var i,o}function _z(t,e){return(_z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Mz(t);if(e){var i=Mz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wz(this,r)}}function wz(t,e){if(e&&("object"===yz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mz(t){return(Mz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sz=function(t,e,r){for(var n=dn(t)/e,i=new Array(r),o=0;o<r;o+=1)i[o]=n/Math.pow(2,o);return i},xz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_z(t,e)}(o,t);var e,r,n,i=bz(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return gz(this,o),(e=i.call(this,r,n)).tileLoadFunction_=t.tileLoadFunction||null,e.url_=t.url,e.source_=t.source,e.style_=t.style,e.tileSize_="number"==typeof t.tileSize?t.tileSize:256,e.maxExtent_=t.maxExtent||null,e.maxZoomLevel_="number"==typeof t.maxZoomLevel?t.maxZoomLevel:0,e.opacity_="number"==typeof r.opacity?r.opacity:1,e.zIndex_=Lb.Z_INDEX.MBTilesVector,e.visibility=!1!==t.visibility||t.visibility,e}return e=o,(r=[{key:"setVisible",value:function(t){this.visibility=t,XU(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){var e=this;this.map=t;var r=this.map.getProjection().code,n=Vn(r),i=n.getExtent();if(this.tileLoadFunction_){var o=Sz(i,256,this.maxZoomLevel_||28);this.ol3Layer=this.createLayer({resolutions:o,extent:i,sourceExtent:i,projection:n}),this.ol3Layer.getSource().on("tileloaderror",(function(t){return e.checkAllTilesLoaded_(t)})),this.ol3Layer.getSource().on("tileloadend",(function(t){return e.checkAllTilesLoaded_(t)})),this.map.on("change:zoom",(function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}})),this.map.getMapImpl().addLayer(this.ol3Layer)}else this.fetchSource().then((function(t){t.getMaxZoomLevel().then((function(o){e.maxZoomLevel_||(e.maxZoomLevel_=o);var a=Sz(i,256,e.maxZoomLevel_);e.tileProvider_=t,e.tileProvider_.getExtent().then((function(o){var s=o;s&&(s=ti(o,"EPSG:4326",r)),e.tileProvider_.getFormat().then((function(r){e.ol3Layer=e.createLayer({tileProvider:t,resolutions:a,extent:s,sourceExtent:i,projection:n,format:r}),e.ol3Layer.getSource().on("tileloaderror",(function(t){return e.checkAllTilesLoaded_(t)})),e.ol3Layer.getSource().on("tileloadend",(function(t){return e.checkAllTilesLoaded_(t)})),e.map.on("change:zoom",(function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}})),e.map.getMapImpl().addLayer(e.ol3Layer)}))}))}))}))}},{key:"createLayer",value:function(t){var e=this,r=this.loadVectorTileWithProvider;this.tileLoadFunction_&&(r=this.loadVectorTile);var n=new GD;return new CD({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:this.maxExtent_||t.sourceExtent,source:new MD({projection:t.projection,url:"{z},{x},{y}",tileLoadFunction:function(i){return r(i,n,t,e)},tileGrid:new fy({extent:t.sourceExtent,origin:on(t.sourceExtent),resolutions:t.resolutions})})})}},{key:"loadVectorTile",value:function(t,e,r,n){t.setState(1),t.setLoader((function(r,i,o){var a=t.getTileCoord();n.tileLoadFunction_(a[0],a[1],-a[2]-1).then((function(n){if(n)try{var i=new Uint8Array(n),a=e.readFeatures(i,{extent:r,featureProjection:o});t.setFeatures(a),t.setState(2)}catch(e){t.setState(3)}else t.setState(3)}))}))}},{key:"loadVectorTileWithProvider",value:function(t,e,r){t.setState(1),t.setLoader((function(n,i,o){var a=t.getTileCoord();r.tileProvider.getVectorTile([a[0],a[1],-a[2]-1]).then((function(r){if(r){var i=e.readFeatures(r,{extent:n,featureProjection:o});t.setFeatures(i),t.setState(2)}else t.setState(3)}))}))}},{key:"fetchSource",value:function(){var t=this;return new Promise((function(e,r){if(t.tileProvider_)e(t.tileProvider_);else if(t.source_){var n=new QG(t.source_);e(n)}else t.url_?window.fetch(t.url_).then((function(r){t.source=r;var n=new QG(r);t.tileProvider_=n,e(n)})):r(new Error(Hf("exception").no_source))}))}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this.map.getMapImpl();XU(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"getFeatures",value:function(){var t=[];if(this.ol3Layer){var e=this.ol3Layer.getSource().tileCache;if(0===e.getCount())return t;var r=e.peekFirstKey().split("/").map(Number)[0];e.forEach((function(e){if(e.tileCoord[0]===r&&2===e.getState())for(var n=e.getSourceTiles(),i=0,o=n.length;i<o;i+=1){var a=n[i].getFeatures();a&&(t=t.concat(a))}}))}return t}},{key:"checkAllTilesLoaded_",value:function(t){var e=this.map.getProjection().code,r=t.tile.getTileCoord(),n=Vn(e);this.ol3Layer.getSource().getTileCacheForProjection(n).getValues().some((function(t){var e=t.getTileCoord(),n=t.getState();return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]||1!==n}))&&!this.loaded_&&(this.loaded_=!0,this.facadeLayer_.fire(Uf))}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new $m(e)}return t}}])&&vz(e.prototype,r),n&&vz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(YS);function Ez(t){return(Ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oz(Object(r),!0).forEach((function(e){Tz(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oz(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tz(t,e,r){return(e=Rz(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Iz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rz(n.key),n)}}function Rz(t){var e=function(t,e){if("object"!==Ez(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ez(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ez(e)?e:String(e)}function Cz(){return(Cz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Az(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Az(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fz(t)););return t}function kz(t,e){return(kz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Nz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Fz(t);if(e){var i=Fz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return jz(this,r)}}function jz(t,e){if(e&&("object"===Ez(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Fz(t){return(Fz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kz(t,e)}(o,t);var e,r,n,i=Nz(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Iz(this,o);var a=Tm(e,Rp),s=new xz(a,r,n);return t=i.call(this,a,r,n,s),YU(xz)&&Af(Hf("exception").mbtilesvector_method),t}return e=o,(r=[{key:"type",get:function(){return Rp},set:function(t){YU(t)||XU(t)||t===Rp||Af("El tipo de capa debe ser '".concat(Rp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return XU(t)&&(t=this.map_.userMaxExtent,XU(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return e(t.getMaxExtent())}))}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;Cz(Fz(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var t=null,e=this.getFeatures();if(!XU(e)){var r=e[0];XU(r)||(t=r.getType())}return t}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures().map((function(t){return yT.olFeature2Facade(t)}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.source===t.source,e=e&&this.legend===t.legend,e=e&&this.name===t.name,e=e&&this.options===t.options),e}},{key:"setFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}}])&&Lz(e.prototype,r),n&&Lz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WO);Dz.DEFAULT_PARAMS={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2},radius:5},Dz.DEFAULT_OPTIONS_STYLE={point:Pz({},Dz.DEFAULT_PARAMS),line:Pz({},Dz.DEFAULT_PARAMS),polygon:Pz({},Dz.DEFAULT_PARAMS)};var Bz=Dz;function Gz(t){return(Gz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Gz(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Gz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Gz(o)?o:String(o)),n)}var i,o}function qz(t,e){return(qz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Zz(t);if(e){var i=Zz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Yz(this,r)}}function Yz(t,e){if(e&&("object"===Gz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Zz(t){return(Zz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qz(t,e)}(o,t);var e,r,n,i=Vz(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};zz(this,o),YU(IA)&&Af(Hf("exception").xyz_method);var a=Tm(t,Ep),s=new IA(t,r,n);return(e=i.call(this,a,s)).url=a.url,e.name=a.name,e.legend=a.legend,e.minZoom=a.minZoom,e.maxZoom=a.maxZoom,e.tileGridMaxZoom=a.tileGridMaxZoom,e.options=r,e}return e=o,(r=[{key:"type",get:function(){return Ep},set:function(t){YU(t)||XU(t)||t===Ep||Af("El tipo de capa debe ser '".concat(Ep).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}}])&&Uz(e.prototype,r),n&&Uz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fm),Hz=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xz='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Kz=function(t){function e(e){var r,n=e||{};r=void 0!==n.attributions?n.attributions:[Xz];var i=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",o=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,cacheSize:n.cacheSize,crossOrigin:i,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:o,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return Hz(e,t),e}(wA);function Jz(t){return(Jz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Jz(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Jz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Jz(o)?o:String(o)),n)}var i,o}function tU(t,e){return(tU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=nU(t);if(e){var i=nU(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rU(this,r)}}function rU(t,e){if(e&&("object"===Jz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nU(t){return(nU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tU(t,e)}(o,t);var e,r,n,i=eU(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Qz(this,o),(e=i.call(this,r,n)).resolutions_=null,e.facadeLayer_=null,e.hasAttributtion=!1,e.haveOSMorMapboxLayer=!1,!1===r.visibility&&(e.visibility=!1),e.zIndex_=Lb.Z_INDEX[xp],e}return e=o,(r=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().forEach((function(t){!t.equals(e)&&t.isVisible()&&t.setVisible(!1)})),XU(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),XU(r)||this.map.setBbox(r)}else XU(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){var e=this;this.map=t,this.fire("added:map"),this.ol3Layer=new $m(dq({},this.vendorOptions_,!0)),this.updateSource_(),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(t){t instanceof xu&&(e.hasAttributtion=!0)}),this),this.hasAttributtion||(this.map.getMapImpl().addControl(new xu({className:"ol-attribution ol-unselectable ol-control ol-collapsed m-attribution",collapsible:!0})),this.hasAttributtion=!1),this.map.getMapImpl().updateSize();var r=this.map.getMapImpl().getSize(),n=this.map.getProjection().units;this.resolutions_=uq(this.facadeLayer_.getMaxExtent(),r,16,n),this.isVisible()&&!this.inRange()&&this.setVisible(!1),null!==this.zIndex_&&this.setZIndex(this.zIndex_),null!==this.resolutions_&&this.setResolutions(this.resolutions_);var i=!1===this.transparent||!0===this.options.animated;this.ol3Layer.set("animated",i),this.map.on("change:proj",(function(){return e.updateSource_()}))}},{key:"setResolutions",value:function(t){this.resolutions_=t,this.updateSource_(t)}},{key:"updateSource_",value:function(t){if(XU(t)&&!XU(this.map)){this.map.getMapImpl().updateSize();var e=this.map.getMapImpl().getSize(),r=this.map.getProjection().units;this.resolutions_=uq(this.facadeLayer_.getMaxExtent(),e,16,r)}if(!XU(this.ol3Layer)&&XU(this.vendorOptions_.source)){var n=this.facadeLayer_.getMaxExtent(),i=new Kz({});this.ol3Layer.setSource(i),this.ol3Layer.setExtent(n)}}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this,e=this.map.getMapImpl();XU(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map.getLayers().forEach((function(e){e instanceof fU&&(t.haveOSMorMapboxLayer=!0)})),this.haveOSMorMapboxLayer||this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(e){e instanceof xu&&t.map.getImpl().getMapImpl().removeControl(e)})),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name),e}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new $m(e)}return t}}])&&$z(e.prototype,r),n&&$z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(tg);function oU(t){return(oU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==oU(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===oU(o)?o:String(o)),n)}var i,o}function uU(t,e){return(uU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hU(t);if(e){var i=hU(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cU(this,r)}}function cU(t,e){if(e&&("object"===oU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hU(t){return(hU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uU(t,e)}(o,t);var e,r,n,i=lU(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};aU(this,o);var a=t;YU(iU)&&Af(Hf("exception").osm_method),XU(a)&&(a="OSM");var s=new iU(a,r,n),u=Tm(a,xp);return XU(u.name)&&(u.name="osm"),(e=i.call(this,u,s)).name=u.name,e.legend=u.legend,XU(u.legend)&&(e.legend="OpenStreetMap"),e.transparent=u.transparent,e.options=r,e}return e=o,(r=[{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){XU(t)?this.getImpl().transparent=!1:this.getImpl().transparent=t}},{key:"type",get:function(){return xp},set:function(t){YU(t)||XU(t)||t===xp||Af("El tipo de capa debe ser '".concat(xp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}}])&&sU(e.prototype,r),n&&sU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Fm);function pU(t){return(pU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return mU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mU(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==pU(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pU(o)?o:String(o)),n)}var i,o}function vU(){return(vU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=_U(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function _U(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xU(t)););return t}function bU(t,e){return(bU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xU(t);if(e){var i=xU(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return MU(this,r)}}function MU(t,e){if(e&&("object"===pU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return SU(t)}function SU(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xU(t){return(xU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var EU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bU(t,e)}(a,t);var e,r,n,o=wU(a);function a(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yU(this,a);var n=new $w(t);e=o.call(this);var i=new Lb(n.container,SU(e),r);if(e.setImpl(i),XU(t)&&Af(Hf("exception").no_param),YU(Lb)&&Af(Hf("exception").constructor_impl),e._panels=[],e._plugins=[],e._areasContainer=null,e.popup_=null,e._defaultProj=!0,e.panel={LEFT:null,RIGHT:"null"},e._userZoom=null,e.userCenter_=null,e._finishedInitCenter=!0,e._finishedMaxExtent=!0,e._finishedMapImpl=!1,e._finishedMap=!1,e.centerFeature_=null,e.drawLayer_=null,e.userMaxExtent=null,e.collectionCapabilities=[],n.container.classList.add("m-mapea-container"),i.on("completed",(function(){e._finishedMapImpl=!0,e._checkCompleted()})),e.createMainPanels_(),e.featuresHandler_=new RT,e.featuresHandler_.addTo(SU(e)),e.featuresHandler_.activate(),e.drawLayer_=new WO({name:"__draw__"},{displayInLayerSwitcher:!1}),e.drawLayer_.setStyle(new YG(a.DRAWLAYER_STYLE)),e.drawLayer_.setZIndex(Lb.Z_INDEX[wp]+999),e.addLayers(e.drawLayer_),XU(n.projection)?e.setProjection(M.config.DEFAULT_PROJ,!0):e.setProjection(n.projection),XU(n.bbox)||e.setBbox(n.bbox),XU(n.resolutions)||e.setResolutions(n.resolutions),!XU(n.maxExtent)){var s=XU(n.zoom)&&XU(n.bbox);e.setMaxExtent(n.maxExtent,s)}return XU(n.layers)||e.addLayers(n.layers),XU(n.wms)||e.addWMS(n.wms),XU(n.wmts)||e.addWMTS(n.wmts),XU(n.kml)||e.addKML(n.kml),XU(n.controls)||e.addControls(n.controls),XU(n.layers)&&!HU(n.layers)&&e.addTMS(M.config.tms.base),XU(n.center)||e.setCenter(n.center),XU(n.zoom)?XU(n.bbox)&&e.setZoom(0):e.setZoom(n.zoom),XU(n.minZoom)||e.setMinZoom(n.minZoom),XU(n.maxZoom)||e.setMaxZoom(n.maxZoom),XU(n.label)||e.addLabel(n.label),XU(n.ticket)||e.setTicket(n.ticket),XU(n.bbox)&&XU(n.zoom)&&XU(n.center)&&e.zoomToMaxExtent(!0),XU(n.center)&&XU(n.bbox)&&(e._finishedInitCenter=!1,e.getInitCenter_().then((function(t){XU(e.userCenter_)&&e.setCenter(t),e._finishedInitCenter=!0,e._checkCompleted()}))),e}return e=a,n=[{key:"LAYER_SORT",value:function(t,e){return XU(t)||XU(e)?0:t.getZIndex()-e.getZIndex()}}],(r=[{key:"getLayers",value:function(t){var e=t;YU(Lb.prototype.getLayers)&&Af(Hf("exception").getlayers_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Tm)),this.getImpl().getLayers(r).sort(a.LAYER_SORT)}},{key:"getRootLayers",value:function(t){return this.getLayers(t).filter((function(t){return XU(t.group)}))}},{key:"getBaseLayers",value:function(){return YU(Lb.prototype.getBaseLayers)&&Af(Hf("exception").getbaselayers_method),this.getImpl().getBaseLayers().sort(a.LAYER_SORT)}},{key:"getFeatureHandler",value:function(){return this.featuresHandler_}},{key:"addLayers",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addLayers)&&Af(Hf("exception").addlayers_method),HU(r)||(r=[r]),this.collectorCapabilities_(r);var n=r.map((function(t){var r;if(t instanceof Fm)r=t;else{var n=Tm(t);if(XU(n.type))QS(Hf("dialog").invalid_type_layer);else switch(n.type){case"WFS":r=new mD(t,{style:n.style});break;case"WMS":r=new D_(t);break;case"GeoJSON":r=new TG(n,{style:n.style});break;case"KML":r=new Cj(t);break;case"Vector":r=new WO(t);break;case"WMTS":r=new _A(t);break;case"MVT":r=new lB(t);break;case"MBTiles":r=new mz(n);break;case"MBTilesVector":r=new Bz(n,{style:n.style});break;case"XYZ":r=new Wz(n);break;case"TMS":r=new YA(n);break;case"OSM":r=new fU(t);break;case"OGCAPIFeatures":r=new FB(t,{style:n.style});break;default:QS(Hf("dialog").invalid_type_layer)}}return!(r instanceof WO)||r instanceof mD||r instanceof FB||e.featuresHandler_.addLayer(r),r.setMap(e),r}));this.getImpl().addLayers(n),this.fire("added:layer",[n])}return this}},{key:"collectorCapabilities_",value:function(t){var e=this,r=t;if(HU(r)||(r=[r]),"__draw__"!==r[0].name){var n=[];r.forEach((function(t){var r="",o="",a=!0;if("string"==typeof t){var s=dU(t.split("*"),1)[0],u=Tm(t,i[s]);r=u.type,o=u.url,a=u.useCapabilities}else"object"===pU(t)&&(r=t.type,o=t.url,a=t.useCapabilities);e.collectionCapabilities.filter((function(t){return t.url===o})).length>0||"WMS"!==r&&"WMTS"!==r||!a||0===n.filter((function(t){return t.url===o})).length&&e.collectionCapabilities.push({type:r,url:o,capabilities:!1})}))}}},{key:"removeLayers",value:function(t){var e=this;if(!XU(t)){YU(Lb.prototype.removeLayers)&&Af(Hf("exception").removelayers_method);var r=this.getLayers(t);r.forEach((function(t){t instanceof WO&&e.featuresHandler_.removeLayer(t)})),this.getImpl().removeLayers(r)}return this}},{key:"getKML",value:function(t){var e=t;YU(Lb.prototype.getKML)&&Af(Hf("exception").getkml_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Tm(t,_p)}))),this.getImpl().getKML(r).sort(a.LAYER_SORT)}},{key:"addKML",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addKML)&&Af(Hf("exception").addkml_method),HU(r)||(r=[r]);var n=[];r.forEach((function(t){var r;JU(t)&&t instanceof Cj?r=t:t instanceof Fm||(r=new Cj(t,t.options)),!0===r.extract&&e.featuresHandler_.addLayer(r),n.push(r)})),this.getImpl().addKML(n),this.fire("added:layer",[n]),this.fire("added:kml",[n])}return this}},{key:"removeKML",value:function(t){var e=this;if(!XU(t)){YU(Lb.prototype.removeKML)&&Af(Hf("exception").removekml_method);var r=this.getKML(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeKML(r))}return this}},{key:"getWMS",value:function(t){var e=t;YU(Lb.prototype.getWMS)&&Af(Hf("exception").getwms_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Tm(t,bp)}))),this.getImpl().getWMS(r).sort(a.LAYER_SORT)}},{key:"addWMS",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addWMS)&&Af(Hf("exception").addwms_method),HU(r)||(r=[r]),this.collectorCapabilities_(r);var n=[];r.forEach((function(t){var r=t;t instanceof D_||(r=new D_(t,t.options)),r.setMap(e),n.push(r)})),this.getImpl().addWMS(n),this.fire("added:layer",[n]),this.fire("added:wms",[n])}return this}},{key:"removeWMS",value:function(t){if(!XU(t)){YU(Lb.prototype.removeWMS)&&Af(Hf("exception").removewms_method);var e=this.getWMS(t);e.length>0&&this.getImpl().removeWMS(e)}return this}},{key:"getWFS",value:function(t){var e=t;YU(Lb.prototype.getWFS)&&Af(Hf("exception").getwfs_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Tm(t,wp)}))),this.getImpl().getWFS(r).sort(a.LAYER_SORT)}},{key:"getGeoJSON",value:function(t){var e=t;return YU(Lb.prototype.getGeoJSON)&&Af(Hf("exception").getgeojson_method),WU(e)?e=[]:HU(e)||(e=[e]),this.getImpl().getGeoJSON(e).sort(a.LAYER_SORT)}},{key:"addWFS",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addWFS)&&Af(Hf("exception").addwfs_method),HU(r)||(r=[r]);var n=[];r.forEach((function(t){var r;if(JU(t)&&t instanceof mD)r=t;else if(!(t instanceof Fm))try{r=new mD(t,t.options)}catch(t){throw QS(t.toString()),t}e.featuresHandler_.addLayer(r),n.push(r)})),this.getImpl().addWFS(n),this.fire("added:layer",[n]),this.fire("added:wfs",[n])}return this}},{key:"removeWFS",value:function(t){var e=this;if(!XU(t)){YU(Lb.prototype.removeWFS)&&Af(Hf("exception").removewfs_method);var r=this.getWFS(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeWFS(r))}return this}},{key:"getOGCAPIFeatures",value:function(t){var e=t;YU(Lb.prototype.getOGCAPIFeatures)&&Af(Hf("exception").getogcapif_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Tm(t,Mp)}))),this.getImpl().getOGCAPIFeatures(r).sort(a.LAYER_SORT)}},{key:"addOGCAPIFeatures",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addOGCAPIFeatures)&&Af(Hf("exception").addogcapif_method),HU(r)||(r=[r]);var n=[];r.forEach((function(t){var r;if(JU(t)&&t instanceof FB)r=t;else if(!(t instanceof Fm))try{r=new FB(t,t.options)}catch(t){throw QS(t.toString()),t}e.featuresHandler_.addLayer(r),n.push(r)})),this.getImpl().addOGCAPIFeatures(n),this.fire("added:layer",[n]),this.fire("added:ogcapifeatures",[n])}return this}},{key:"removeOGCAPIFeatures",value:function(t){var e=this;if(!XU(t)){YU(Lb.prototype.removeOGCAPIFeatures)&&Af(Hf("exception").removeogcapif_method);var r=this.getOGCAPIFeatures(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeOGCAPIFeatures(r))}return this}},{key:"getWMTS",value:function(t){var e=t;YU(Lb.prototype.getWMTS)&&Af(Hf("exception").getwmts_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Tm(t,Sp)}))),this.getImpl().getWMTS(r).sort(a.LAYER_SORT)}},{key:"addWMTS",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addWMTS)&&Af(Hf("exception").addwmts_method),HU(r)||(r=[r]),this.collectorCapabilities_(r);var n=[];r.forEach((function(t){if(JU(t)&&t instanceof _A)t.setMap(e),n.push(t);else if(!(t instanceof Fm)){var r=new _A(t,t.options);r.setMap(e),n.push(r)}})),this.getImpl().addWMTS(n),this.fire("added:layer",[n]),this.fire("added:wmts",[n])}return this}},{key:"removeWMTS",value:function(t){if(!XU(t)){YU(Lb.prototype.removeWMTS)&&Af(Hf("exception").removewmts_method);var e=this.getWMTS(t);e.length>0&&this.getImpl().removeWMTS(e)}return this}},{key:"getMVT",value:function(t){var e=t;YU(Lb.prototype.getMVT)&&Af("La implementación usada no posee el método getWFS"),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Tm(t,Ip)}))),this.getImpl().getMVT(r).sort(a.LAYER_SORT)}},{key:"removeMVT",value:function(t){var e=this;if(!XU(t)){YU(Lb.prototype.removeMVT)&&Af("La implementación usada no posee el método removeWFS");var r=this.getMVT(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeMVT(r))}return this}},{key:"addMVT",value:function(t){var e=t;if(!XU(e)){YU(Lb.prototype.addMVT)&&Af("La implementación usada no posee el método addWFS"),HU(e)||(e=[e]);var r=[];e.forEach((function(t){var e;if(JU(t)&&t instanceof lB)e=t;else if(!(t instanceof Fm))try{e=new lB(t,t.options)}catch(t){throw QS(t.toString()),t}r.push(e)})),this.getImpl().addMVT(r),this.fire("added:layer",[r]),this.fire("added:vectortile",[r])}return this}},{key:"getMBTiles",value:function(t){var e=t;WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Tm(t,Lp)}))),this.getImpl().getMBTiles(r).sort(a.LAYER_SORT)}},{key:"addMBTiles",value:function(t){var e=this,r=t;if(!XU(r)){HU(r)||(r=[r]);var n=[];r.forEach((function(t){var r=t;t instanceof mz||(r=new mz(t,t.options)),r.setMap(e),n.push(r)})),this.getImpl().addMBTiles(n),this.fire("added:layer",[n]),this.fire("added:mbtiles",[n])}return this}},{key:"removeMBTiles",value:function(t){if(!XU(t)){var e=this.getMBTiles(t);e.length>0&&this.getImpl().removeMBTiles(e)}return this}},{key:"getMBTilesVector",value:function(t){var e=t;YU(Lb.prototype.getMBTilesVector)&&Af(Hf("exception").getmbtiles_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Tm(t,Rp)}))),this.getImpl().getMBTilesVector(r).sort(a.LAYER_SORT)}},{key:"addMBTilesVector",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addMBTilesVector)&&Af(Hf("exception").addmbtiles_method),HU(r)||(r=[r]);var n=[];r.forEach((function(t){JU(t)&&t instanceof Bz&&(t.setMap(e),n.push(t))})),this.getImpl().addMBTilesVector(n),this.fire("added:layer",[n]),this.fire("added:mbtilesvector",[n])}return this}},{key:"removeMBTilesVector",value:function(t){if(!XU(t)){YU(Lb.prototype.removeMBTilesVector)&&Af(Hf("exception").removembtiles_method);var e=this.getMBTilesVector(t);e.length>0&&this.getImpl().removeMBTilesVector(e)}return this}},{key:"getXYZs",value:function(t){var e=t;YU(Lb.prototype.getXYZs)&&Af(Hf("exception").getxyzs_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Tm)),this.getImpl().getXYZs(r).sort(a.LAYER_SORT)}},{key:"addXYZ",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addXYZ)&&Af(Hf("exception").addxyz_method),HU(r)||(r=[r]);var n=[];r.forEach((function(t){if(JU(t)&&t instanceof Wz)t.setMap(e),n.push(t);else if(!(t instanceof Fm)){var r=new Wz(t,t.options);r.setMap(e),n.push(r)}})),this.getImpl().addXYZ(n),this.fire("added:layer",[n]),this.fire("added:xyz",[n])}return this}},{key:"removeXYZ",value:function(t){if(!XU(t)){YU(Lb.prototype.removeXYZ)&&Af(Hf("exception").removexyz_method);var e=this.getXYZs(t);e.length>0&&this.getImpl().removeXYZ(e)}return this}},{key:"getTMS",value:function(t){var e=t;YU(Lb.prototype.getTMS)&&Af(Hf("exception").gettms_method),WU(e)?e=[]:HU(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Tm)),this.getImpl().getTMS(r).sort(a.LAYER_SORT)}},{key:"addTMS",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addTMS)&&Af(Hf("exception").addtms_method),HU(r)||(r=[r]);var n=[];r.forEach((function(t){if(JU(t)&&t instanceof YA)t.setMap(e),n.push(t);else if(!(t instanceof Fm)){var r=new YA(t,t.options);r.setMap(e),n.push(r)}})),this.getImpl().addTMS(n),this.fire("added:layer",[n]),this.fire("added:tms",[n])}return this}},{key:"removeTMS",value:function(t){if(!XU(t)){YU(Lb.prototype.removeTMS)&&Af(Hf("exception").removetms_method);var e=this.getTMS(t);e.length>0&&this.getImpl().removeTMS(e)}return this}},{key:"getControls",value:function(t){var e=t;return YU(Lb.prototype.getControls)&&Af(Hf("exception").getcontrols_method),WU(e)?e=[]:HU(e)||(e=[e]),this.getImpl().getControls(e)}},{key:"addControls",value:function(t){var e=this,r=t;if(!XU(r)){YU(Lb.prototype.addControls)&&Af(Hf("exception").addcontrols_method),HU(r)||(r=[r]);var n=[];r.forEach((function(t){var r,i,o=t;if(QU(o))switch((o=tq(o).split("*"))[0]){case TR.NAME:var a={};o.forEach((function(t){"true"===t&&(a.exactScale=Boolean(t)),isNaN(t)||(a.order=Number(t))})),r=new TR(a),i=e.getPanels("map-info")[0],XU(i)&&(i=new JB("map-info",{collapsible:!1,className:"m-map-info",position:qB,order:a.order?a.order:null})).on("added:map",(function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")})),i.addClassName("m-with-scale");break;case PC.NAME:r=new PC,(i=new JB(PC.NAME,{collapsible:!1,className:"m-scaleline",position:UB,tooltip:"Línea de escala"})).on("added:map",(function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")}));break;case gp.NAME:r=new gp,i=new JB(gp.NAME,{collapsible:!1,className:"m-panzoombar",position:GB,tooltip:"Nivel de zoom"});break;case YC.NAME:r=new YC,i=new JB(YC.NAME,{collapsible:!1,className:"m-panzoom",position:GB});break;case aR.NAME:r=new aR,i=new JB(aR.NAME,{collapsible:!1,className:"m-location",position:qB});break;case OL.NAME:r=new OL(!0);break;case HR.NAME:r=new HR,i=new JB(HR.name,{collapsible:!1,className:"m-rotate",position:zB});break;case $A.NAME:r=new $A(e),i=new JB($A.NAME,{collapsible:!1,position:zB,className:"m-plugin-baselayer"});break;default:if(/backgroundlayers\*([0-9])+\*(true|false)/.test(o)){var s=o.match(/backgroundlayers\*([0-9])+\*(true|false)/)[1],u="true"===o.match(/backgroundlayers\*([0-9])+\*(true|false)/)[2];r=new $A(e,Number.parseInt(s,10),u),i=new JB($A.NAME,{collapsible:!1,position:zB,className:"m-plugin-baselayer"})}else{var l=fq([M.config.MAPEA_URL,"/api/actions/controls"]);QS("El control ".concat(o," no está definido. Consulte los controles disponibles <a href='").concat(l,'\' target="_blank">aquí</a>'))}}else o instanceof ep?r=o:Af('El control "'.concat(o).concat('" no es un control válido.'));XU(i)||i.hasControl(r)?(r.addTo(e),n.push(r)):(i.addControls(r),e.addPanels(i))})),this.getImpl().addControls(n)}return this}},{key:"removeControls",value:function(t){XU(t)&&Af(Hf("exception").remove_control),YU(Lb.prototype.removeControls)&&Af(Hf("exception").removecontrol_method);var e=this.getControls(t);return(e=[].concat(e)).length>0&&(e.forEach((function(t){XU(t.getPanel())||t.getPanel().removeControls(t)})),this.getImpl().removeControls(e)),this}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return XU(t)&&(t=this.getProjection().getExtent()),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){var r=t.userMaxExtent;if(XU(r)){var n=t.getLayers().filter((function(t){return"__draw__"!==t.name})).map((function(t){return t.calculateMaxExtent()}));Promise.all(n).then((function(n){r=Rq(n),XU(r)&&(r=t.getProjection().getExtent()),XU(t.userMaxExtent)||(r=t.userMaxExtent),e(r)}))}else e(r)}))}},{key:"setMaxExtent",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];XU(t)&&this.resetMaxExtent(),YU(Lb.prototype.setMaxExtent)&&Af(Hf("exception").setmaxextent_method);try{var r=qp(t);!HU(r)&&JU(r)&&(r=[r.x.min,r.y.min,r.x.max,r.y.max]),this.userMaxExtent=r,this.getImpl().setMaxExtent(r,e)}catch(t){throw QS(t.toString()),t}return this}},{key:"resetMaxExtent",value:function(){var t=this;return this.userMaxExtent=null,this.calculateMaxExtent().then((function(e){var r=qp(e);t.getImpl().setMaxExtent(r,!0)})),this}},{key:"getBbox",value:function(){return YU(Lb.prototype.getBbox)&&Af(Hf("exception").getbbox_method),this.getImpl().getBbox()}},{key:"setBbox",value:function(t,e){XU(t)&&Af(Hf("exception").no_bbox),YU(Lb.prototype.setBbox)&&Af(Hf("exception").setbbox_method);try{var r=qp(t);this.getImpl().setBbox(r,e)}catch(t){throw QS(Hf("exception").incorrect_format_bbox),t}return this}},{key:"getZoom",value:function(){return YU(Lb.prototype.getZoom)&&Af(Hf("exception").getzoom_method),this.getImpl().getZoom()}},{key:"getMinZoom",value:function(){return YU(Lb.prototype.getMinZoom)&&Af(Hf("exception").getzoom_method),this.getImpl().getMinZoom()}},{key:"getMaxZoom",value:function(){return YU(Lb.prototype.getMaxZoom)&&Af(Hf("exception").getzoom_method),this.getImpl().getMaxZoom()}},{key:"setZoom",value:function(t){XU(t)&&Af(Hf("exception").no_zoom),YU(Lb.prototype.setZoom)&&Af(Hf("exception").setzoom_method);try{var e=Zp(t);this._userZoom=e,this.getImpl().setZoom(e)}catch(t){throw QS(t.toString()),t}return this}},{key:"setMinZoom",value:function(t){XU(t)&&Af(Hf("exception").no_zoom),YU(Lb.prototype.setMinZoom)&&Af(Hf("exception").setzoom_method);var e=Wp(t);return this.minZoom=e,this.getImpl().setMinZoom(e),this}},{key:"setMaxZoom",value:function(t){XU(t)&&Af(Hf("exception").no_zoom),YU(Lb.prototype.setMaxZoom)&&Af(Hf("exception").setzoom_method);var e=Hp(t);return this.userMaxZoom_=e,this.getImpl().setMaxZoom(e),this}},{key:"getCenter",value:function(){return YU(Lb.prototype.getCenter)&&Af(Hf("exception").getcenter_method),this.getImpl().getCenter()}},{key:"setCenter",value:function(t){var e=this;XU(t)&&Af(Hf("exception").no_center),YU(Lb.prototype.setCenter)&&Af(Hf("exception").setcenter_method);var r=zp(t);return this.getImpl().setCenter(r),this.userCenter_=r,!0===r.draw&&(this.drawLayer_.clear(),this.centerFeature_=new Yq("__mapeacenter__",{type:"Feature",geometry:{type:"Point",coordinates:[r.x,r.y]},properties:{vendor:{mapea:{click:function(t){var r=e.getLabel();XU(r)||r.show(e)}}}}}),this.drawFeatures([this.centerFeature_])),this}},{key:"getFeatureCenter",value:function(){return this.centerFeature_}},{key:"removeCenter",value:function(){this.removeFeatures(this.centerFeature_),this.centerFeature_=null,this.zoomToMaxExtent()}},{key:"getResolutions",value:function(){return YU(Lb.prototype.getResolutions)&&Af(Hf("exception").getresolutions_method),this.getImpl().getResolutions()}},{key:"setResolutions",value:function(t){XU(t)&&Af(Hf("exception").no_resolutions),YU(Lb.prototype.setResolutions)&&Af(Hf("exception").setresolutions_method);var e=Yp(t);return this.getImpl().setResolutions(e),this}},{key:"getScale",value:function(){return YU(Lb.prototype.getScale)&&Af(Hf("exception").getscale_method),this.getImpl().getScale()}},{key:"getExactScale",value:function(){return YU(Lb.prototype.getExactScale)&&Af("La implementación usada no posee el método getScale"),this.getImpl().getExactScale()}},{key:"getProjection",value:function(){return YU(Lb.prototype.getProjection)&&Af(Hf("exception").getprojection_method),this.getImpl().getProjection()}},{key:"setProjection",value:function(t,e){var r=t;XU(r)&&Af(Hf("exception").no_projection),YU(Lb.prototype.setProjection)&&Af(Hf("exception").setprojection_method);try{var n=this.getProjection();r=Vp(r),this.getImpl().setProjection(r),this._defaultProj=this._defaultProj&&!0===e,this.fire("change:proj",[n,r])}catch(t){QS(t.toString()),String(t).indexOf("El formato del parámetro projection no es correcto")>=0&&this.setProjection(M.config.DEFAULT_PROJ,!0)}return this}},{key:"getPlugins",value:function(t){var e=this,r=t;WU(r)?r=[]:HU(r)||(r=[r]);var n=[];return 0===r.length?n=this._plugins:r.forEach((function(t){n=n.concat(e._plugins.filter((function(e){return t===e.name})))})),n}},{key:"addPlugin",value:function(t){return XU(t)&&Af(Hf("exception").no_plugins),YU(t.addTo)&&Af(Hf("exception").no_add_plugin_to_map),this._plugins.push(t),t.addTo(this),this}},{key:"removePlugins",value:function(t){var e=this,r=t;return XU(r)&&Af(Hf("exception").no_plugin_to_remove),HU(r)||(r=[r]),(r=[].concat(r)).length>0&&r.forEach((function(t){t.destroy(),e._plugins=e._plugins.filter((function(e){return t.name!==e.name}))})),this}},{key:"getEnvolvedExtent",value:function(){var t=this;return new Promise((function(e){var r=t.getBaseLayers().find((function(t){return t.isVisible()}));if(XU(r)){var n=t.getLayers().filter((function(t){return"__draw__"!==t.name}));Promise.all(n.map((function(t){return t.calculateMaxExtent()}))).then((function(r){var n=XU(r)?[t.getProjection().getExtent()]:r,i=Rq(n);e(i)}))}else r.getMaxExtent(e)}))}},{key:"zoomToMaxExtent",value:function(t){var e=this;return this.calculateMaxExtent().then((function(r){(!0!==t||XU(e._userZoom))&&e.setBbox(r),e._finishedMaxExtent=!0,e._checkCompleted()})),this}},{key:"setTicket",value:function(t){return XU(t)||(-1===M.config.PROXY_POST_URL.indexOf("ticket=")&&M.config("PROXY_POST_URL",rq(M.config.PROXY_POST_URL,{ticket:t})),-1===M.config.PROXY_URL.indexOf("ticket=")&&M.config("PROXY_URL",rq(M.config.PROXY_URL,{ticket:t}))),this}},{key:"getInitCenter_",value:function(){var t=this;return new Promise((function(e,r){t.calculateMaxExtent().then((function(t){var r;r=HU(t)?{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}:{x:(t.x.max+t.x.min)/2,y:(t.y.max+t.y.min)/2},e(r)}))}))}},{key:"destroy",value:function(){return YU(Lb.prototype.destroy)&&Af(Hf("exception").destroy_method),this.getImpl().destroy(),this}},{key:"addLabel",value:function(t,e){var r=this,n=void 0===t.panMapIfOutOfView||t.panMapIfOutOfView;XU(t)&&Af(Hf("exception").no_projection),YU(Lb.prototype.addLabel)&&Af(Hf("exception").addlabel_method);var i=null,o=null;if(JU(t)?(i=mq(t.text),o=t.coord):(i=mq(t),o=e),o=XU(o)?this.getCenter():zp(o),XU(o))this.getInitCenter_().then((function(t){var e=new Rw(i,t,n);r.getImpl().addLabel(e)}));else{var a=new Rw(i,o,n);this.getImpl().addLabel(a)}return this}},{key:"getLabel",value:function(){return this.getImpl().getLabel()}},{key:"removeLabel",value:function(){return this.getImpl().removeLabel()}},{key:"drawPoints",value:function(t){var e=t;XU(e)&&Af(Hf("exception").no_point),HU(e)||(e=[e]);var r=e.map((function(t){var e={type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},properties:{}};return KU(t.click)&&(e.properties.vendor={mapea:{click:t.click}}),new Yq(null,e)}));this.drawLayer_.addFeatures(r)}},{key:"drawFeatures",value:function(t){return this.drawLayer_.addFeatures(t),this}},{key:"removeFeatures",value:function(t){return this.drawLayer_.removeFeatures(t),this}},{key:"addPanels",value:function(t){var e=this,r=t;return XU(r)||(HU(r)||(r=[r]),r.forEach((function(t){var r=e._panels.some((function(e){return e.equals(t)}));if(t instanceof JB&&!r){e._panels.push(t);var n="div.m-area".concat(t.position),i=e._areasContainer.querySelector(n);t.addTo(e,i)}}))),this}},{key:"removePanel",value:function(t){return t.getControls().length>0&&Af(Hf("exception").remove_control_from_panel),t instanceof JB&&(t.destroy(),this._panels=this._panels.filter((function(e){return!e.equals(t)}))),this}},{key:"getPanels",value:function(t){var e=this,r=t,n=[];return XU(r)?n=this._panels:(HU(r)||(r=[r]),r.forEach((function(t){e._panels.filter((function(e){return e.name===t})).forEach((function(t){XU(t)||n.push(t)}))}))),n}},{key:"createMainPanels_",value:function(){this._areasContainer=document.createElement("div"),this._areasContainer.classList.add("m-areas");var t=document.createElement("div");t.classList.add("m-area"),t.classList.add("m-top"),t.classList.add("m-left");var e=document.createElement("div");e.classList.add("m-area"),e.classList.add("m-top"),e.classList.add("m-right");var r=document.createElement("div");r.classList.add("m-area"),r.classList.add("m-bottom"),r.classList.add("m-left");var n=document.createElement("div");n.classList.add("m-area"),n.classList.add("m-bottom"),n.classList.add("m-right"),this._areasContainer.appendChild(t),this._areasContainer.appendChild(e),this._areasContainer.appendChild(r),this._areasContainer.appendChild(n),this.getContainer().appendChild(this._areasContainer)}},{key:"getContainer",value:function(){return YU(Lb.prototype.getContainer)&&Af(Hf("exception").getcontainer_method),this.getImpl().getContainer()}},{key:"getMapImpl",value:function(){return YU(Lb.prototype.getMapImpl)&&Af(Hf("exception").getmapimpl_method),this.getImpl().getMapImpl()}},{key:"getPopup",value:function(){return this.popup_}},{key:"removePopup",value:function(){return YU(Lb.prototype.removePopup)&&Af(Hf("exception").removepopup_method),XU(this.popup_)||(this.getImpl().removePopup(this.popup_),this.popup_.destroy(),this.popup_=null),this}},{key:"addPopup",value:function(t,e){return XU(t)&&Af(Hf("exception").no_popup),t instanceof vw||Af(Hf("exception").invalid_popup),XU(this.popup_)||this.removePopup(),this.popup_=t,this.popup_.addTo(this,e),this}},{key:"_checkCompleted",value:function(){this._finishedInitCenter&&this._finishedMaxExtent&&this._finishedMapImpl&&(this._finishedMap=!0,this.fire("completed"))}},{key:"on",value:function(t,e,r){vU(xU(a.prototype),"on",this).call(this,t,e,r),"completed"===t&&!0===this._finishedMap&&this.fire("completed")}},{key:"refresh",value:function(){return!YU(this.getImpl().refresh)&&KU(this.getImpl().refresh)&&this.getImpl().refresh(),this.getLayers().forEach((function(t){return t.refresh()})),this}},{key:"defaultProj",get:function(){return this._defaultProj}},{key:"isFinished",value:function(){return this._finishedMap}},{key:"areasContainer",get:function(){return this._areasContainer}}])&&gU(e.prototype,r),n&&gU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(zf);EU.DRAWLAYER_STYLE={fill:{color:"#009e00"},stroke:{color:"#fcfcfc",width:2},radius:7};var OU=EU;r(332);function PU(t){return(PU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}[].includes||(Array.prototype.includes=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i,o=parseInt(arguments[1])||0;for(o>=0?n=o:(n=r+o)<0&&(n=0);n<r;){if(t===(i=e[n])||Object.equals(t,i)||t!=t&&i!=i)return!0;n++}return!1}),[].remove||(Array.prototype.remove=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i=parseInt(arguments[1])||0;i>=0?n=i:(n=r+i)<0&&(n=0);for(var o,a=[];n<r;)(t===(o=e[n])||Object.equals(t,o)||t!=t&&o!=o)&&a.push(n),n++;var s=0;a.forEach((function(t){t+=s,e.splice(t,1),s--}))}),Object.equals||(Object.equals=function(t,e){if(null!==t.equals&&"function"==typeof t.equals&&t.equals.call)return t.equals(e);if(null!==e.equals&&"function"==typeof e.equals&&e.equals.call)return e.equals(t);var r,n=[],i=[];if(isNaN(t)&&isNaN(e)&&"number"==typeof t&&"number"==typeof e)return!0;if(t===e)return!0;if("function"==typeof t&&"function"==typeof e||t instanceof Date&&e instanceof Date||t instanceof RegExp&&e instanceof RegExp||t instanceof String&&e instanceof String||t instanceof Number&&e instanceof Number)return t.toString()===e.toString();if(!(t instanceof Object&&e instanceof Object))return!1;if(t.isPrototypeOf(e)||e.isPrototypeOf(t))return!1;if(t.constructor!==e.constructor)return!1;if(t.prototype!==e.prototype)return!1;if(n.indexOf(t)>-1||i.indexOf(e)>-1)return!1;for(r in e){if(e.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;if(PU(e[r])!==PU(t[r]))return!1}for(r in t){if(e.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;if(PU(e[r])!==PU(t[r]))return!1;switch(PU(t[r])){case"object":case"function":if(n.push(t),i.push(e),!Object.equals(t[r],e[r]))return!1;n.pop(),i.pop();break;default:if(t[r]!==e[r])return!1}}return!0});var TU=!0;function IU(t){return(IU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==IU(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==IU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===IU(o)?o:String(o)),n)}var i,o}var RU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=null,this.xml=null,this.headers={},this.error=!1,this.code=0}var e,r,n;return e=t,(r=[{key:"parseXmlHttp",value:function(t){var e=this;this.text=t.responseText,this.xml=t.responseXML,this.code=t.status,this.error="OK"!==t.statusText;var r=t.getAllResponseHeaders();(r=r.split("\n")).forEach((function(t){var r=t,n=(r=r.trim()).replace(/^([^:]+):(.+)$/,"$1").trim(),i=r.replace(/^([^:]+):(.+)$/,"$2").trim();""!==n&&(e.headers[n]=i)}))}},{key:"parseProxy",value:function(t){var e=this;if(this.code=t.code,this.error=t.error,200===this.code&&!0!==this.error){this.text=t.content.trim();try{var r=t.headers["Content-Type"];"undefined"!=typeof DOMParser&&/text\/html/i.test(r)?this.xml=(new DOMParser).parseFromString(this.text,"text/html"):/xml/i.test(r)&&(this.xml=(new DOMParser).parseFromString(this.text,"text/xml"))}catch(t){this.xml=null,this.error=!0}}Object.keys(t.headers).forEach((function(r){e.headers[r]=t.headers[r]}))}}])&&LU(e.prototype,r),n&&LU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),CU={GET:"GET",POST:"POST"},AU=function(t,e){var r=M.config.PROXY_URL;return e===CU.POST&&(r=M.config.PROXY_POST_URL),r=rq(r,{url:t})},kU=function(t,e,r){var n=t;XU(e)||(n=rq(n,e)),TU&&(n=AU(n,CU.GET));var i=nq("mapea_jsonphandler_");n=rq(n,{callback:i});var o=new Promise((function(t,e){var r=t;new Promise((function(t){window[i]=t})).then((function(t){delete window[i],function(t){var e=document.getElementById(t);e.parentNode.removeChild(e)}(i);var e=new RU;e.parseProxy(t),r(e)}))}));return function(t,e){var r=document.createElement("script");r.type="text/javascript",r.id=e,r.src=t,r.setAttribute("async",""),window.document.body.appendChild(r)}(n,i),o},NU=function(t,e,r,n){var i=t,o=e;return!1!==n&&!0===TU&&(i=AU(i,r)),JU(o)&&(o=JSON.stringify(o)),new Promise((function(t,e){var n;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){if(4===n.readyState){var e=new RU;e.parseXmlHttp(n),t(e)}},n.open(r,i,!0),n.send(o)}))},jU=function(t,e,r){return!0===((XU(r)||!1!==r.jsonp)&&!1!==TU)?kU(t,e):NU(t,e,CU.GET,!1)},FU=r(218),DU=r.n(FU),BU=r(219),GU=.0254000508001016,zU={inches:1,in:1,Inch:1,ft:12,mi:63360,m:39.3701,dd:4374754,yd:36,d:4374754,degrees:4374754,nmi:72913.4252,Meter:1/GU,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.0254/GU,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:.91439523/GU,IndianYd62:.9143988/GU,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:.3047996/GU,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:1852/GU,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:.1/GU,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:1.0000135965/GU,CaGrid:.999738/GU,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:3.778266898/GU,CapeFoot:.3047972615/GU,Brealey:375/GU,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500,mm:1/GU/1e3,cm:.3937,dm:1/GU*100,km:39370,kmi:72913.4252,fath:71.999856,ch:791.998416,link:7.91998416,"us-in":1,"us-ft":12,"us-yd":36,"us-ch":792.0000000000001,"us-mi":63360,"ind-yd":.91439523/GU,"ind-ft":11.9999134017,"ind-ch":791.9942845122};function UU(t){return function(t){if(Array.isArray(t))return qU(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return qU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qU(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function VU(t){return(VU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var YU=function(t){return void 0===t},ZU=function(t){var e=!1;return null===t||YU(t)||(e="boolean"==typeof t),e},WU=function(t){var e=!1;return ZU(t)||"number"==typeof t||(YU(t)?e=!0:t?null===t&&(e=!0):e=!0),e},HU=function(t){var e=!1;return WU(t)||(e=Object.prototype.toString.call(t)===Object.prototype.toString.call([])),e},XU=function t(e){var r=!1;return WU(e)?r=!0:HU(e)?(r=!0,e.length>0&&(r=!e.some((function(e){return!t(e)})))):"string"==typeof e&&0===e.trim().length&&(r=!0),r},KU=function(t){var e=!1;return WU(t)||(e="function"==typeof t&&!YU(t.call)),e},JU=function(t){var e=!1;return WU(t)||(e="object"===VU(t)&&!YU(t.toString)),e},QU=function(t){var e=!1;return WU(t)||(e="string"==typeof t),e},$U=function(t){var e=!1;return!WU(t)&&QU(t)&&(e=/(https?:\/\/[^*]+)/.test(t)),e},tq=function(t,e){var r=t;return!XU(r)&&QU(r)&&(r=r.trim(),r=e?r.toUpperCase():r.toLowerCase()),r},eq=function(t,e){var r=null,n=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=e,o=i.indexOf("?");-1!==o&&(i=i.substring(o),null!==(r=new RegExp("[\\?&]".concat(n,"=([^&#]*)")).exec(i))&&(r=decodeURIComponent(r[1].replace(/\+/g," "))));return r},rq=function(t,e){var r=t;-1===r.indexOf("?")?r+="?":"?"!==r.charAt(r.length-1)&&(r+="&");var n="";JU(e)?(Object.keys(e).forEach((function(t){var r=e[t];n+=t,n+="=",n+=encodeURIComponent(r),n+="&"})),n=n.substring(0,n.length-1)):QU(e)&&(n=e);return r+=n},nq=function(t,e){var r="";return XU(t)||(r=t),r=r.concat(Math.random()).replace(/0\./,""),XU(e)||(r=r.concat(e)),r},iq=function(t,e){var r=t;return r=rq(r,"request=GetCapabilities"),r=rq(r,"service=WMS"),r=rq(r,{version:e})},oq=function(t,e){var r=t;return r=rq(r,"request=GetCapabilities"),r=rq(r,"service=WMTS"),XU(e)||(r=rq(r,{version:e})),r},aq=function(t,e,r){var n=t,i=e,o=new Array(r);n=Number.parseFloat(n),i=Number.parseFloat(i);var a=2;Number.isNaN(n)||(a=Math.pow(i/n,1/(r-1)));for(var s=0;s<r;s+=1)o[s]=i/Math.pow(a,s);return o.sort((function(t,e){return e-t})),o},sq=function(t,e){var r,n=e;XU(t)||(WU(n)&&(n="degrees"),r=1/((t>1?1/t:t)*zU[n]*72));return r},uq=function(t,e,r,n){var i=t,o=null,a=null;HU(i)?(o=i[2]-i[0],a=i[3]-i[1]):JU(i)?(o=i.x.max-i.x.min,a=i.y.max-i.y.min):QU(i)&&(o=(i=i.split(","))[2]-i[0],a=i[3]-i[1]);var s=o/e[0],u=a/e[1],l=Math.max(s,u);return aq(null,l,r)},lq=function(t,e){var r=e;return XU(r)&&(r="degrees"),t*zU[r]*72},cq=function(t){var e;if(!XU(t)){var r=document.createElement("div");r.innerHTML=t,e=r.children[0]}return e},hq=function(t){var e=t;if(e&&(e=e.trim()).length>0){var r=e.indexOf(":");-1!==r&&(r+=1,e=e.substring(r,e.length))}return e},fq=function(t){var e=null;if(!XU(t)){e=(e=t[0]).replace(/\/+\s*$/,"");for(var r=1,n=t.length;r<n;r+=1){var i=t[r];0!==i.indexOf("/")&&(e=e.concat("/")),e=e.concat(i)}}return e},pq=function(t,e,r){var n=Object(t),i=parseInt(n.length,10)||0;if(0===i)return!1;var o,a,s=parseInt(r,10)||0;for(s>=0?o=s:(o=i+s)<0&&(o=0);o<i;){if(e===(a=n[o])||Object.equals(e,a))return!0;o+=1}return!1},dq=function t(e,r,n){var i=e;return Object.keys(r).forEach((function(e){YU(i[e])?i[e]=r[e]:Object.getPrototypeOf(i[e])===Object.prototype?t(i[e],r[e],n):!0===n&&(i[e]=r[e])})),i},mq=function(t){return t.replace(/(<\s*script[^>]*>)+[^<]*(<\s*\/\s*script[^>]*>)+/gi,"").replace(/(('|')\s*\+\s*)?\s*eval\s*\(.*\)\s*(\+\s*('|'))?/gi,"")},yq=function(t){var e=t;if("ontouchstart"in document){var r=0;e.addEventListener("touchstart",(function(t){r=e.scrollTop+t.touches[0].pageY})),e.addEventListener("touchmove",(function(t){e.scrollTop=r-t.touches[0].pageY}))}},gq=function(t,e){var r=t.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1"),n=e.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1");return r.toLowerCase()===n.toLowerCase()},vq=function(t){var e=["Geometry".toLowerCase(),"GeometryPropertyType".toLowerCase(),"Point".toLowerCase(),"LineString".toLowerCase(),"LinearRing".toLowerCase(),"Polygon".toLowerCase(),"MultiPoint".toLowerCase(),"MultiLineString".toLowerCase(),"MultiPolygon".toLowerCase(),"GeometryCollection".toLowerCase(),"Circle".toLowerCase(),"pointpropertytype","polygonpropertytype","linestringpropertytype","geometrypropertytype","multisurfacepropertytype","multilinestringpropertytype","surfacepropertytype","geometrypropertytype","geometryarraypropertytype","multigeometrypropertytype","multipolygonpropertytype","multipointpropertytype","abstractgeometricaggregatetype","pointarraypropertytype","curvearraypropertytype","solidpropertytype","solidarraypropertytype"],r=t.toLowerCase();return-1!==e.indexOf(r)},_q=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},bq=function(t){var e=t;!QU(t)&&t.outerHTML&&(e=t.outerHTML);var r=document.createElement("DIV");return r.innerHTML=e,r.textContent||r.innerText||""},wq=function(t){var e;if(QU(t)){var r=Ox()(t).hex();r=r.replace(/^#/,"0x"),e=Ox()(16777215-r).hex()}return e},Mq=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;return XU(r)||Object.keys(r).forEach((function(e){var i=r[e];HU(i)?i=UU(i):JU(i)&&(i=t({},i)),XU(n[e])?n[e]=i:JU(n[e])&&t(n[e],i)})),n},Sq=function(t,e){var r=UU(t);if(t.length<e){for(var n=(t[0]+t[1])/(e-1),i=1;i<e-1;i+=1)r[i]=n*i;r=[].concat(UU(r),[t[1]])}return r},xq=function(t,e){return t.ORDER-e.ORDER},Eq=function(t){var e=new Image;return new Promise((function(r,n){e.onload=function(){return r(e)},e.src=t}))},Oq=function t(e){var r;return HU(e)?r=(r=UU(e)).map(t):JU(e)?(r=Mq({},e),Object.keys(r).forEach((function(e){var n=r[e];KU(n)?r[e]="{{f}}".concat(n.toString()):JU(n)&&(r[e]=t(n))}))):r=KU(e)?"{{f}}".concat(e.toString()):e,r},Pq=function t(e){var r=e;if(/^\{\{f\}\}/.test(e)){var n=e.replace(/^\{\{f\}\}(.+)/,"$1");r=new Function("f","return ".concat(n))()}else Object.keys(r).forEach((function(e){var n=r[e];if(/^\{\{f\}\}/.test(n)){var i=n.replace(/^\{\{f\}\}(.+)/,"$1");r[e]=new Function("f","return ".concat(i))()}else JU(n)&&t(n)}));return r},Tq=function t(e){var r=!1;return Array.isArray(e)||"object"!==VU(e)||XU(e)?("function"==typeof e||"string"==typeof e&&/\{\{.*\}\}/.test(e))&&(r=!0):r=Object.values(e).some((function(e){return t(e)})),r},Iq=BU,Lq=function(t){return Iq},Rq=function(t){var e=null;return XU(t)||(e=[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],t.forEach((function(t){XU(t)||(e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[2]),e[3]=Math.max(e[3],t[3]))}))),e},Cq=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i="",o=t.length;for(e=2;e<o;e+=3)i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4|t[e-1]>>4],i+=n[(15&t[e-1])<<2|t[e]>>6],i+=n[63&t[e]];return e===o+1&&(i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4],i+="=="),e===o&&(i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4|t[e-1]>>4],i+=n[(15&t[e-1])<<2],i+="="),"data:".concat(r,";base64,").concat(i)},Aq=function t(e){return new Promise((function(r,n){var i=new Uint8Array;e instanceof ArrayBuffer?(i=new Uint8Array(e),r(i)):e instanceof File?e.arrayBuffer().then((function(t){i=new Uint8Array(t),r(i)})):e instanceof Response?r(e.arrayBuffer().then(t)):e instanceof Uint8Array?r(e):r(i)}))},kq=function(t,e){return Ox.a.scale(t).colors(e)},Nq=function(t,e){return jU(t).then((function(t){var r="";try{var n=e.icon.tag?e.icon.tag:["path","circle","ellipse","line","polygon","polyline","rect","foreignObject"],i=Array.from(t.xml.getElementsByTagName("svg"))[0],o=e.icon.stroke&&e.icon.stroke.width?e.icon.stroke.width:1,a=i.getAttribute("width")?i.getAttribute("width").replace(/[^0-9.]/g,""):null,s=i.getAttribute("height")?i.getAttribute("height").replace(/[^0-9.]/g,""):null;if(i.getAttribute("viewBox")){var u=i.getAttribute("viewBox").split(" ");a||(i.setAttribute("width",u[2]),a=u[2]),s||(i.setAttribute("height",u[3]),s=u[3])}if(e.icon.stroke&&o&&a&&s)if(i.getAttribute("viewBox")){var l=i.getAttribute("viewBox").split(" ");i.setAttribute("viewBox","".concat(-o," ").concat(-o," ").concat(Math.ceil(Number(l[2]))+2*o," ").concat(Number(l[3])+2*o))}else i.setAttribute("viewBox","".concat(-o," ").concat(-o," ").concat(Math.ceil(Number(a))+2*o," ").concat(Number(s)+2*o));n.forEach((function(r){Array.from(t.xml.getElementsByTagName(r)).forEach((function(t){var r;(r=t.classList).remove.apply(r,UU(t.classList)),e.icon.fill&&e.icon.fill.color&&t.setAttribute("fill",e.icon.fill.color),e.icon.fill&&e.icon.fill.opacity&&t.setAttribute("fill-opacity",e.icon.fill.opacity),e.icon.stroke&&e.icon.stroke.color&&t.setAttribute("stroke",e.icon.stroke.color),e.icon.stroke&&o&&t.setAttribute("stroke-width",o)}))})),Array.from(t.xml.getElementsByTagName("g")).forEach((function(t){e.icon.stroke&&o&&t.removeAttribute("clip-path")})),r="data:image/svg+xml,".concat(encodeURIComponent((new XMLSerializer).serializeToString(t.xml,"text/xml")))}catch(t){}return r}))};function jq(t){return(jq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==jq(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===jq(o)?o:String(o)),n)}var i,o}var Dq=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=r;this.facadeFeature_=null,this.formatter_=new Xj,XU(r)?this.olFeature_=new dy:(XU(r.type)&&(i.type="Feature"),this.olFeature_=this.formatter_.readFeature(i)),XU(e)?XU(this.olFeature_.getId())&&this.olFeature_.setId(nq("mapea_feature_")):this.olFeature_.setId(e)}var e,r,n;return e=t,n=[{key:"olFeature2Facade",value:function(t,e){var r=null;return XU(t)||(r=new Yq).getImpl().setOLFeature(t,e),r}},{key:"olRenderFeature2Facade",value:function(e,r,n){var i=Zy.olRenderFeature2olFeature(e,r,n);return t.olFeature2Facade(i)}},{key:"facade2OLFeature",value:function(t){return t.getImpl().getOLFeature()}},{key:"getGeometry",value:function(t){var e,r=t.geometry.type;return"circle"===r?e=new Ny(t.geometry.coordinates):"geometry"===r?e=new qa(t.geometry.coordinates):"linestring"===r?e=new Sy(t.geometry.coordinates):"multilinestring"===r?e=new Py(t.geometry.coordinates):"multipoint"===r?e=new Ey(t.geometry.coordinates):"multipolygon"===r?e=new Iy(t.geometry.coordinates):"point"===r?e=new ds(t.geometry.coordinates):"polygon"===r&&(e=new Ls(t.geometry.coordinates)),e}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"setOLFeature",value:function(t,e){XU(t)||(this.olFeature_=t,!1!==e&&XU(this.olFeature_.getId())&&this.olFeature_.setId(nq("mapea_feature_")))}},{key:"getAttributes",value:function(){var t=this.olFeature_.getProperties(),e=t.geometry;return!XU(e)&&e instanceof qa&&delete t.geometry,t}},{key:"getId",value:function(){return this.olFeature_.getId()}},{key:"setId",value:function(t){this.olFeature_.setId(t)}},{key:"setAttributes",value:function(t){this.olFeature_.setProperties(t)}},{key:"getAttribute",value:function(t){return this.olFeature_.get(t)}},{key:"setAttribute",value:function(t,e){return this.olFeature_.set(t,e)}},{key:"setGeometry",value:function(t){var e=t.type.toLowerCase();"circle"===e?this.olFeature_.setGeometry(new Ny(t.coordinates)):"geometry"===e?this.olFeature_.setGeometry(new qa(t.coordinates)):"linestring"===e?this.olFeature_.setGeometry(new Sy(t.coordinates)):"multilinestring"===e?this.olFeature_.setGeometry(new Py(t.coordinates)):"multipoint"===e?this.olFeature_.setGeometry(new Ey(t.coordinates)):"multipolygon"===e?this.olFeature_.setGeometry(new Iy(t.coordinates)):"point"===e?this.olFeature_.setGeometry(new ds(t.coordinates)):"polygon"===e&&this.olFeature_.setGeometry(new Ls(t.coordinates))}},{key:"setFacadeObj",value:function(t){this.facadeFeature_=t}},{key:"getCentroid",value:function(){var e,r=this.getOLFeature().getGeometry(),n=Zy.getCentroid(r);if(!XU(n)){var i=new ds;i.setCoordinates(n),e=new dy({geometry:i,name:"centroid"})}return e=e||t.olFeature2Facade(e)}},{key:"clearStyle",value:function(){this.olFeature_.setStyle(null)}}])&&Fq(e.prototype,r),n&&Fq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bq(t){return(Bq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Bq(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Bq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Bq(o)?o:String(o)),n)}var i,o}function zq(t,e){return(zq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Uq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Vq(t);if(e){var i=Vq(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qq(this,r)}}function qq(t,e){if(e&&("object"===Bq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Vq(t){return(Vq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zq(t,e)}(o,t);var e,r,n,i=Uq(o);function o(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var a=new Dq(t,e,r);return(n=i.call(this,a)).style_=null,n.formatGeoJSON_=new nF,n.setStyle(r),n}return e=o,(r=[{key:"setId",value:function(t){this.getImpl().setId(t)}},{key:"getId",value:function(){return this.getImpl().getId()}},{key:"getGeometry",value:function(){return this.getGeoJSON().geometry}},{key:"setGeometry",value:function(t){this.getImpl().setGeometry(t)}},{key:"getGeoJSON",value:function(){return this.formatGeoJSON_.write(this)[0]}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"setAttributes",value:function(t){"object"===Bq(t)?this.getImpl().setAttributes(t):JS(Hf("feature").incorrect_attributes)}},{key:"getAttribute",value:function(t){var e;if(e=this.getImpl().getAttribute(t),XU(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return XU(t)||(r=t instanceof o?t.getAttribute(e):t[e]),r}),this))}return e}},{key:"setAttribute",value:function(t,e){return this.getImpl().setAttribute(t,e)}},{key:"setStyle",value:function(t){!XU(t)&&t instanceof cO?(this.style_=t,this.style_.applyToFeature(this)):XU(t)&&(this.style_=null,this.getImpl().clearStyle()),this.fire("change:style",[t,this])}},{key:"equals",value:function(t){return this.getId()===t.getId()}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null)}},{key:"getCentroid",value:function(){var t=this.getId(),e=this.getAttributes(),r=new YG({stroke:{color:"#67af13",width:2},radius:8,fill:{color:"#67af13",opacity:.2}}),n=this.getImpl().getCentroid();return XU(n)||(n.id("".concat(t," centroid}")),n.attributes(e),n.style=r),n}}])&&Gq(e.prototype,r),n&&Gq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf);function Zq(t){return(Zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Zq(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Zq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Zq(o)?o:String(o)),n)}var i,o}function Hq(t,e){return(Hq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Jq(t);if(e){var i=Jq(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Kq(this,r)}}function Kq(t,e){if(e&&("object"===Zq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jq(t){return(Jq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hq(t,e)}(o,t);var e,r,n,i=Xq(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,nq("_mapea_cluster_"))).setAttributes(e),r.setAttribute("features",t),r}return e=o,r&&Wq(e.prototype,r),n&&Wq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(Yq);function $q(t){return($q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==$q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===$q(o)?o:String(o)),n)}var i,o}function rV(t,e){return(rV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=oV(t);if(e){var i=oV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return iV(this,r)}}function iV(t,e){if(e&&("object"===$q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function oV(t){return(oV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rV(t,e)}(o,t);var e,r,n,i=nV(o);function o(){return tV(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"addTo",value:function(t){var e=this;XU(t)&&Af(Hf("exception").no_map);var r=this.getImpl();YU(r.addTo)&&Af(Hf("exception").addto_method);var n=this.createView(t);n instanceof Promise?n.then((function(n){r.addTo(t,n),e.fire("added:map")})):(r.addTo(t,n),this.fire("added:map"))}},{key:"createView",value:function(t){}},{key:"getControls",value:function(){}}])&&eV(e.prototype,r),n&&eV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf);function sV(t){return(sV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==sV(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===sV(o)?o:String(o)),n)}var i,o}function cV(t,e){return(cV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=pV(t);if(e){var i=pV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fV(this,r)}}function fV(t,e){if(e&&("object"===sV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pV(t){return(pV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cV(t,e)}(o,t);var e,r,n,i=hV(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return uV(this,o),(e=i.call(this)).filterFunction_=t,e.cqlFilter_="",XU(r.cqlFilter)||(e.cqlFilter_=r.cqlFilter),e}return e=o,(r=[{key:"setFunction",value:function(t){this.filterFunction_=t}},{key:"getFunctionFilter",value:function(){return this.filterFunction_}},{key:"execute",value:function(t){return t.filter(this.filterFunction_)}},{key:"toCQL",value:function(){return this.cqlFilter_}}])&&lV(e.prototype,r),n&&lV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(nx);function mV(t){return(mV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==mV(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===mV(o)?o:String(o)),n)}var i,o}function gV(t,e){return(gV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bV(t);if(e){var i=bV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _V(this,r)}}function _V(t,e){if(e&&("object"===mV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bV(t){return(bV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gV(t,e)}(o,t);var e,r,n,i=vV(o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);return i.call(this,(function(e,r){var n=null;return XU(e)||(n=e.getGeometry()),t(n,r)}),e)}return e=o,r&&yV(e.prototype,r),n&&yV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(dV),MV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function SV(t){return"string"==typeof t?t:""}var xV=function(t){function e(){return t.call(this)||this}return MV(e,t),e.prototype.getType=function(){return V_},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(SV(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return br()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(SV(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return br()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(SV(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return br()},e.prototype.readProjection=function(t){return this.readProjectionFromText(SV(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return br()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return br()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return br()},e}(B_),EV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),OV={POINT:ds,LINESTRING:Sy,POLYGON:Ls,MULTIPOINT:Ey,MULTILINESTRING:Py,MULTIPOLYGON:Iy},PV=1,TV=2,IV=3,LV=4,RV=5,CV=6,AV={};for(var kV in mr)AV[kV]=mr[kV].toUpperCase();var NV=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),r=this.index_,n=e;if("("==e)t=TV;else if(","==e)t=RV;else if(")"==e)t=IV;else if(this.isNumeric_(e)||"-"==e)t=LV,n=this.readNumber_();else if(this.isAlpha_(e))t=PV,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=CV}return{position:r,value:n,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,r=!1,n=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),jV=function(){function t(t){this.lexer_=t,this.token_,this.layout_=Ea}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=Ea,e=this.token_;if(this.isTokenType(PV)){var r=e.value;"Z"===r?t=Oa:"M"===r?t=Pa:"ZM"===r&&(t=Ta),t!==Ea&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(TV)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(RV));if(this.match(IV))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(TV)){var t=this.parsePoint_();if(this.match(IV))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(TV)){var t=this.parsePointList_();if(this.match(IV))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(TV)){var t=this.parseLineStringTextList_();if(this.match(IV))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){if(this.match(TV)){var t=void 0;if(t=this.token_.type==TV?this.parsePointTextList_():this.parsePointList_(),this.match(IV))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(TV)){var t=this.parseLineStringTextList_();if(this.match(IV))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(TV)){var t=this.parsePolygonTextList_();if(this.match(IV))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,r=0;r<e;++r){var n=this.token_;if(!this.match(LV))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(RV);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(RV);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(RV);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(RV);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(PV)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(PV)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var r=this.parseGeometryCollectionText_();return new Cy(r)}var n=OV[e];if(!n)throw new Error("Invalid geometry type: "+e);var i=void 0;switch(e){case"POINT":i=this.parsePointText_();break;case"LINESTRING":i=this.parseLineStringText_();break;case"POLYGON":i=this.parsePolygonText_();break;case"MULTIPOINT":i=this.parseMultiPointText_();break;case"MULTILINESTRING":i=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":i=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return i||(i=n===OV.POINT?[NaN,NaN]:[]),new n(i,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),FV=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,r}return EV(e,t),e.prototype.parse_=function(t){var e=new NV(t);return new jV(e).parse()},e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);if(r){var n=new dy;return n.setGeometry(r),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var r=[],n=this.readGeometryFromText(t,e),i=[],o=0,a=(r=this.splitCollection_&&n.getType()==mr.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;o<a;++o){var s=new dy;s.setGeometry(r[o]),i.push(s)}return i},e.prototype.readGeometryFromText=function(t,e){var r=this.parse_(t);return r?G_(r,!1,e):null},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(t[n].getGeometry());var o=new Cy(r);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return UV(G_(t,!0,e))},e}(xV);function DV(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function BV(t){for(var e=t.getCoordinates(),r=[],n=0,i=e.length;n<i;++n)r.push(e[n].join(" "));return r.join(",")}function GV(t){for(var e=[],r=t.getLinearRings(),n=0,i=r.length;n<i;++n)e.push("("+BV(r[n])+")");return e.join(",")}var zV={Point:DV,LineString:BV,Polygon:GV,MultiPoint:function(t){for(var e=[],r=t.getPoints(),n=0,i=r.length;n<i;++n)e.push("("+DV(r[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],r=t.getLineStrings(),n=0,i=r.length;n<i;++n)e.push("("+BV(r[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],r=t.getPolygons(),n=0,i=r.length;n<i;++n)e.push("("+GV(r[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],r=t.getGeometries(),n=0,i=r.length;n<i;++n)e.push(UV(r[n]));return e.join(",")}};function UV(t){var e=t.getType(),r=(0,zV[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(t){var e=t.getLayout(),r="";return e!==Oa&&e!==Ta||(r+="Z"),e!==Pa&&e!==Ta||(r+="M"),r}(t);n.length>0&&(e+=" "+n)}return 0===r.length?e+" EMPTY":e+"("+r+")"}var qV=FV;function VV(t){return(VV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ZV(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?YV(Object(r),!0).forEach((function(e){WV(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YV(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function WV(t,e,r){return(e=KV(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KV(n.key),n)}}function KV(t){var e=function(t,e){if("object"!==VV(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==VV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===VV(e)?e:String(e)}function JV(t,e){return(JV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function QV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tY(t);if(e){var i=tY(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $V(this,r)}}function $V(t,e){if(e&&("object"===VV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tY(t){return(tY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eY=function(t){return{dataProjection:Vn(t.dataProjection),featureProjection:Vn(t.featureProjection)}},rY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JV(t,e)}(o,t);var e,r,n,i=QV(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return HV(this,o),(t=i.call(this,e)).gjFormat_=new Xj,t.formatter_=new qV(ZV({splitCollection:!0},e)),t}return e=o,(r=[{key:"getFormatter",value:function(){return this.formatter_}},{key:"read",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=eY(e),n=e.id,i=this.formatter_.readFeatureFromText(t,r),o=Dq.olFeature2Facade(i);return null!=n&&o.setId(n),o}},{key:"readCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=eY(e),n=e.ids,i=this.formatter_.readFeaturesFromText(t,r),o=i.map((function(t){return Dq.olFeature2Facade(t)}));return null!=n&&n.length===o.length&&o.forEach((function(t,e){return t.setId(n[e])})),o}},{key:"write",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=eY(e),n=Dq.facade2OLFeature(t),i=this.formatter_.writeFeatureText(n,r);return i}},{key:"writeFeature",value:function(t){var e=this.gjFormat_.readGeometryFromObject(t);if("point"===e.getType().toLowerCase()){var r=e.getCoordinates();e.setCoordinates([r[0],r[1]])}return this.formatter_.writeGeometryText(e)}},{key:"writeCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=eY(e),n=t.map((function(t){return Dq.facade2OLFeature(t)})),i=this.formatter_.writeFeaturesText(n,r);return i}}])&&XV(e.prototype,r),n&&XV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vf);function nY(t){return(nY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==nY(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===nY(o)?o:String(o)),n)}var i,o}function aY(t,e){return(aY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sY(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=lY(t);if(e){var i=lY(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uY(this,r)}}function uY(t,e){if(e&&("object"===nY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function lY(t){return(lY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aY(t,e)}(o,t);var e,r,n,i=sY(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};iY(this,o);var r=new rY(e);return t=i.call(this,r),YU(rY)&&Af(Hf("exception").wkt_method),t}return e=o,(r=[{key:"read",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getImpl().read(t,e);return r}},{key:"readCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getImpl().readCollection(t,e);return r}},{key:"write",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getImpl().write(t,e);return r}},{key:"writeFeature",value:function(t){return this.getImpl().writeFeature(t)}},{key:"writeCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getImpl().writeCollection(t,e);return r}}])&&oY(e.prototype,r),n&&oY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(zf);function hY(t){return(hY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==hY(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===hY(o)?o:String(o)),n)}var i,o}function pY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dY(t,e){return(dY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mY(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=gY(t);if(e){var i=gY(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yY(this,r)}}function yY(t,e){if(e&&("object"===hY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function gY(t){return(gY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dY(t,e)}(o,t);var e,r,n,i=mY(o);function o(){return pY(this,o),i.apply(this,arguments)}return e=o,r&&fY(e.prototype,r),n&&fY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(yx);function _Y(t){return(_Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return wY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wY(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==_Y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_Y(o)?o:String(o)),n)}var i,o}function xY(t,e){return(xY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EY(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=PY(t);if(e){var i=PY(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return OY(this,r)}}function OY(t,e){if(e&&("object"===_Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function PY(t){return(PY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TY=function(t){var e=t;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.filter((function(t){return null!=t})).forEach((function(t){return Object.keys(t).forEach((function(r){Object.prototype.hasOwnProperty.call(t,r)&&!Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=t[r])}))})),r},IY=function(t,e,r,n){var i;return i="0"===(i="function"==typeof t.text?t.text(n,r.data,e):"".concat(xx.getValue(t.text,e))||"")?"":i},LY=function(t,e,r){var n=0,i=null,o=e.variables,a=e.data,s=t.concat(e.data.map((function(s,u){var l=o.length===a.length?o[u]:o[0],c=l.label||{};if(!l.label)return null;var h=IY(c,r,e,s),f=xx.getValue(c.font,r);XU(i)?i=t[0].getImage().getImage().height/2-6:i-=15,n=n+9+6;var p=-t[0].getImage().getImage().width/2-(1+e.offsetX)||0;return new IP({text:new Fx({text:"string"==typeof h?"".concat(h):"",offsetY:i+e.offsetY||0,offsetX:p,textBaseline:"middle",rotateWithView:!1,textAlign:"center",stroke:c.stroke?new mM({}):void 0,font:"9px ".concat(f),scale:"number"==typeof c.scale?xx.getValue(c.scale,r):void 0,fill:new dM({color:e.scheme[u%e.scheme.length]})})})}))),u=s.filter((function(t){return null!=t}));n=Math.max(n,1);var l=-t[0].getImage().getImage().width/2+10+e.offsetX,c=t[0].getImage().getImage().height/2+e.offsetY,h=new vS({anchor:[l,c],anchorOrigin:"bottom-right",offsetOrigin:"bottom-left",anchorXUnits:"pixels",anchorYUnits:"pixels",rotateWithView:!1,src:"data:image/svg+xml;base64,".concat(window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(t[0].getImage().getImage().width/2,'" height="').concat(n,'"><rect width="').concat(s[0].getImage().getImage().width/2,'" height="').concat(n,'" fill="rgba(255, 255, 255, 0.75)" stroke-width="0" stroke="rgba(0, 0, 0, 0.34)"/></svg>'))),size:[s[0].getImage().getImage().width/2,n]});return u.push(new MM({image:h})),u},RY=function(t,e,r){var n=0,i=e.data.reduce((function(t,e){return t+e})),o=e.variables,a=e.data;return t.concat(e.data.map((function(t,s){var u=o.length===a.length?o[s]:o[0],l=u.label||{},c=l.radius?l.radius:e.radius,h=(2*n+t)/i*Math.PI-Math.PI/2;if(n+=t,!u.label)return null;var f="number"==typeof l.radiusIncrement?l.radiusIncrement:3,p="function"==typeof l.textAlign?l.textAlign(h):null;XU(p)&&(p=l.textAlign||(h<Math.PI/2?"left":"right"));var d=IY(l,r,e,t),m=xx.getValue(l.font,r),y=new dM({color:xx.getValue(l.fill,r)||"#000"}),g=new mM({color:xx.getValue(l.stroke.color,r)||"#000",width:xx.getValue(l.stroke.width,r)||1}),v=Math.cos(h)*(c+f+e.offsetX)||0,_=Math.sin(h)*(c+f+e.offsetY)||0,b=new Fx({text:"string"==typeof d?"".concat(d):"",offsetX:"number"==typeof l.offsetX?xx.getValue(l.offsetX,r):v,offsetY:"number"==typeof l.offsetY?xx.getValue(l.offsetY,r):_,textAlign:xx.getValue(p,r),textBaseline:xx.getValue(l.textBaseline,r)||"middle",stroke:l.stroke?g:void 0,font:/^([1-9])[0-9]*px ./.test(m)?m:"12px ".concat(m),scale:"number"==typeof l.scale?xx.getValue(l.scale,r):void 0,fill:y});return new IP({text:b})}))).filter((function(t){return null!=t}))},CY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xY(t,e)}(o,t);var e,r,n,i=EY(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return MY(this,o),TY(e,QY.DEFAULT),(t=i.call(this,e)).variables_=e.variables||[],t.colorsScheme_=e.scheme||[],t}return e=o,(r=[{key:"updateCanvas",value:function(t){if(!XU(t)){var e=t.getContext("2d");this.drawGeometryToCanvas(e)}}},{key:"drawGeometryToCanvas",value:function(t){var e=this,r=t;if(!XU(r)&&!XU(r.canvas)){var n=o.CANVAS_PROPS.fixedProps,i=o.CANVAS_PROPS.width;r.canvas.setAttribute("width",i),r.width=i;var a=[],s={};Object.keys(o.CANVAS_PROPS.percentages).forEach((function(t){s[t]=i*(o.CANVAS_PROPS.percentages[t]/100)}));var u=[s.left_right_content,n.top_content],l=u[0],c=u[1],h=function(t,i,o){var u=bY(t,2),l=u[0],c=u[1];c+=n.item_top_margin,a.push(function(t){var e=t.context;e.beginPath(),e.strokeStyle=t.strokeColor,e.lineWidth=t.width,e.fillStyle=t.color,e.rect(t.x,t.y,t.rectSize,t.rectSize),e.closePath(),e.stroke(),e.fill()}.bind(e,{context:r,strokeColor:"#000",width:n.rect_border_width,color:o,x:l,y:c,rectSize:n.rect_size})),l+=s.item_side_margin+n.rect_size;var h=(c+=n.rect_size/1.5)+n.item_top_margin,f=function(t,i,o,s,u){var l=o.split(" "),c="",h=i[0],f=i[1];return a.push(function(t){var e=t.context;e.font="".concat(t.fontSize,"px ").concat(t.fontFamily),e.strokeStyle=t.strokeColor,e.strokeWidth=t.strokeWidth,e.fillStyle=t.textColor}.bind(e,{context:r,fontSize:n.font_size,fontFamily:n.font_family,strokeColor:n.text_stroke_color,strokeWidth:n.text_stroke_width,textColor:n.text_color})),l.forEach((function(t,n){r.measureText("".concat(c+t)).width>s&&n>0?(a.push(function(t,e,r,n){t.strokeText(e,r,n),t.fillText(e,r,n)}.bind(e,r,c,h,f)),c="".concat(t," "),f+=u):c="".concat(c+t," ")})),a.push(function(t,e,r,n){t.strokeText(e,r,n),t.fillText(e,r,n)}.bind(e,r,c,h,f)),[h,f]}(0,[l,c],i,s.max_text_width,s.max_text_line_height);return[f[0],f[1]>h?f[1]:h]};this.variables_.forEach((function(t,r){var n=XU(t.legend)?t.attribute:t.legend,i=XU(t.fillColor)?e.colorsScheme_[r%e.colorsScheme_.length]||e.colorsScheme_[0]:t.fillColor,o=bY(h([l,c],n,i),2);l=o[0],c=o[1],l=s.left_right_content})),c+=n.top_content,r.canvas.setAttribute("height",c),r.save(),a.forEach((function(t){return t()})),r.restore()}}},{key:"updateFacadeOptions",value:function(t){var e=this,r=t;r.rotateWithView=!1,this.olStyleFn_=function(t,n){var i=t;i instanceof dy||(i=e);var o=e.formatDataRecursively_(r,i),u=[];if(e.variables_.forEach((function(t){var e=i.get(t.attribute);e=parseFloat(e),u=u.concat(e instanceof Array?e:[e]).filter((function(t){return null!=t}))})),0===u.length)throw new Error("cannot draw an empty data chart");o.data=u,XU(r.stroke)||(o.stroke=new mM(r.stroke));var l=[new IP({geometry:function(t){var e=Zy.getCentroid(t.getGeometry());return new ds(e)},image:new aZ(o)})];return"bar"!==o.type?1!==r.variables.length&&r.variables.length!==u.length||(l=l.concat(RY(l,o,i))):"bar"===o.type&&(l=l.concat(LY(l,o,i))),function(t,e,r){if(!XU(t.label)){var n=new MM,i=xx.getValue(t.label.text,r),o=xx.getValue(t.label.align,r),u=xx.getValue(t.label.baseline,r),l=t.label.offset?t.label.offset[0]:void 0,c=t.label.offset?t.label.offset[1]:void 0,h=new dM({color:xx.getValue(t.label.color||"#000000",r)}),f=new Fx({font:xx.getValue(t.label.font,r),rotateWithView:xx.getValue(t.label.rotate,r),scale:xx.getValue(t.label.scale,r),offsetX:xx.getValue(l,r),offsetY:xx.getValue(c,r),fill:h,textAlign:Object.values(a).includes(o)?o:"center",textBaseline:Object.values(s).includes(u)?u:"top",text:void 0===i?void 0:String(i),rotation:xx.getValue(t.label.rotation,r)});XU(t.label.stroke)||f.setStroke(new mM({color:xx.getValue(t.label.stroke.color,r),width:xx.getValue(t.label.stroke.width,r),lineCap:xx.getValue(t.label.stroke.linecap,r),lineJoin:xx.getValue(t.label.stroke.linejoin,r),lineDash:xx.getValue(t.label.stroke.linedash,r),lineDashOffset:xx.getValue(t.label.stroke.linedashoffset,r),miterLimit:xx.getValue(t.label.stroke.miterlimit,r)})),n.setText(f),e.push(n)}}(o,l,i),l}}},{key:"applyToLayer",value:function(t){t.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"formatDataRecursively_",value:function(t,e){var r=this;return Object.keys(t).reduce((function(n,i,o){var a=n;return"object"!==_Y(n)&&(a={},"object"!==_Y(t[n])&&r.setVal(a,t,n,e)),r.setVal(a,t,i),a}))}},{key:"setVal",value:function(t,e,r,n){var i=t;i[r]=xx.getValue(e[r],n),!JU(e[r])||e[r]instanceof Array||(i[r]=this.formatDataRecursively_(e[r],n))}}])&&SY(e.prototype,r),n&&SY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vY);CY.CANVAS_PROPS={width:200,percentages:{left_right_content:5,item_side_margin:5,max_text_width:70},fixedProps:{rect_border_width:2,font_size:10,font_family:"sans-serif",text_stroke_color:"#fff",text_stroke_width:1,text_color:"#000",top_content:10,item_top_margin:10,text_line_height:15,rect_size:15}};var AY=CY;function kY(t){return(kY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==kY(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===kY(o)?o:String(o)),n)}var i,o}var FY=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};NY(this,t),this.attributeName_=e.attribute||null,this.label_=e.label||null,this.fillColor_=e.fill||null,this.legend_=e.legend||null}var e,r,n;return e=t,(r=[{key:"attribute",get:function(){return this.attributeName_},set:function(t){this.attributeName_=t}},{key:"label",get:function(){return this.label_},set:function(t){this.label_=t}},{key:"fillColor",get:function(){return this.fillColor_},set:function(t){this.fillColor_=t}},{key:"legend",get:function(){return this.legend_},set:function(t){this.legend_=t}}])&&jY(e.prototype,r),n&&jY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),DY={DONUT:"donut",PIE_3D:"pie3D",PIE:"pie",BAR:"bar"},BY={Custom:"m.style.chart.types.custom_scheme",Classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],Dark:["#960","#003","#900","#060","#099","#909","#990","#090"],Pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],Pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],Neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]};function GY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||UY(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zY(t){return function(t){if(Array.isArray(t))return qY(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||UY(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UY(t,e){if(t){if("string"==typeof t)return qY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qY(t,e):void 0}}function qY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function VY(t){return(VY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==VY(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==VY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===VY(o)?o:String(o)),n)}var i,o}function WY(t,e){return(WY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HY(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=KY(t);if(e){var i=KY(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return XY(this,r)}}function XY(t,e){if(e&&("object"===VY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function KY(t){return(KY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WY(t,e)}(o,t);var e,r,n,i=HY(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};YY(this,o);var e=t,r=e.variables||null;if(Object.values(DY).includes(e.type)||(e.type=o.DEFAULT.type),XU(r)||(r instanceof Array?e.variables=r.filter((function(t){return null!=t})).map((function(t){return o.formatVariable(t)})):"string"==typeof r||"object"===VY(r)?e.variables=[o.formatVariable(r)]:e.variables=[]),XU(e.scheme))e.scheme=o.DEFAULT.scheme;else if("string"==typeof e.scheme){var n=e.variables.some((function(t){return null!=t.fillColor}));e.scheme===BY.Custom&&n?e.scheme=e.variables.map((function(t){return t.fillColor?t.fillColor:""})):e.scheme=BY[e.scheme]||o.DEFAULT.scheme}else e.scheme instanceof Array&&e.scheme.every((function(t){return"string"==typeof t}))||(e.scheme=o.DEFAULT.scheme);var a=new AY(e);return i.call(this,e,a)}return e=o,n=[{key:"formatVariable",value:function(t){return null==t?null:t instanceof FY?t:new FY("string"==typeof t?{attribute:t}:t)}},{key:"deserialize",value:function(t){var e=GY(t,1)[0],r=e;return r.variables=e.variables.map((function(t){return new FY(Pq(t))})),new Function(["options"],"return new M.style.Chart(options)")(r)}}],(r=[{key:"updateCanvas",value:function(){XU(this.getImpl())&&XU(this.canvas_)||this.getImpl().updateCanvas(this.canvas_)}},{key:"apply",value:function(t){var e=this;this.layer_=t,t.getFeatures().forEach((function(t){return t.setStyle(e.clone())})),this.updateCanvas()}},{key:"ORDER",get:function(){return 1}},{key:"toJSON",value:function(){var t=this.getOptions();return{parameters:[{type:t.type,radius:t.radius,donutRadio:t.donutRadio,offsetX:t.offsetX,offsetY:t.offsetY,stroke:XU(t.stroke)?void 0:Mq({},t.stroke),fill3DColor:t.fill3DColor,scheme:HU(t.scheme)?zY(t.scheme):t.scheme,label:XU(t.label)?void 0:Mq({},t.label),rotateWithView:t.rotateWithView,variables:t.variables.map((function(t){var e;return XU(t.label)||(e=Mq({},t.label),e=Oq(e)),{attribute:t.attribute,legend:t.legend,fill:t.fillColor,label:e}}))}],deserializedMethod:"M.style.Chart.deserialize"}}}])&&ZY(e.prototype,r),n&&ZY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(cO);JY.DEFAULT={shadow3dColor:"#369",type:DY.PIE,scheme:BY.Classic,radius:20,donutRatio:.5,offsetX:0,offsetY:0,animationStep:1};var QY=JY;function $Y(t){return($Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==$Y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===$Y(o)?o:String(o)),n)}var i,o}function rZ(t,e){return(rZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nZ(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=oZ(t);if(e){var i=oZ(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return iZ(this,r)}}function iZ(t,e){if(e&&("object"===$Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function oZ(t){return(oZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rZ(t,e)}(o,t);var e,r,n,i=nZ(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tZ(this,o);var r=XU(e.stroke)?0:e.stroke.getWidth();return t=i.call(this,{radius:("number"==typeof e.radius?e.radius:0)+r,fill:new dM({color:[0,0,0]}),rotation:"number"==typeof e.rotation?e.rotation:0,snapToPixel:"boolean"==typeof e.snapToPixel&&e.snapToPixel}),e.scale&&t.setScale(e.scale),t.variables_=e.variables||[],t.stroke_=e.stroke||null,t.radius_=e.radius||0,t.donutRatio_=e.donutRatio||0,t.type_=e.type||null,t.offset_=[e.offsetX?e.offsetX:0,e.offsetY?e.offsetY:0],t.animation_={animate:"number"==typeof e.animation,step:"number"==typeof e.animation?e.animation:QY.DEFAULT.animationStep},t.data_=e.data||null,t.colors_=e.scheme instanceof Array?e.scheme:[],t.fill3DColor_=e.fill3DColor||"#000",t.rotateWithView_=e.rotateWithView||!1,t.renderChart_(),t}return e=o,(r=[{key:"clone",value:function(){var t=new o({type:this.type_,radius:this.radius_,colors:this.colors_,rotation:this.getRotation(),scale:this.getScale(),donutRatio:this.donutRatio_,data:this.data_,stroke:this.stroke_,scheme:this.colors_,offsetX:this.offset_[0],offsetY:this.offset_[1],animation:this.animation_,fill3DColor:this.fill3DColor_,rotateWithView:this.rotateWithView_});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t}},{key:"data",get:function(){return this.data_},set:function(t){this.data_=t,this.renderChart_()}},{key:"radius",get:function(){return this.radius_},set:function(t){this.radius_=t,this.renderChart_()}},{key:"setRadius",value:function(t,e){this.donutRatio_=e||this.donutRatio_,this.radius=t}},{key:"setAnimation",value:function(t){if(!1===t){if(!1===this.animation_.animate)return;this.animation_.animate=!1}else{if(this.animation_.step===t)return;this.animation_.animate=!0,this.animation_.step=t}this.renderChart_()}},{key:"getChecksum",value:function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-";if(null===this.checksums_||t!==this.checksums_[1]||void 0!==this.checksums_[2]||this.radius_!==this.checksums_[3]||this.data_.join("|")!==this.checksums_[4]){var e=this.radius_?this.radius_.toString():"-",r="c".concat(t).concat(void 0).concat(e).concat(this.data_.join("|"));this.checksums_=[r,t,void 0,this.radius_,this.data_.join("|")]}return this.checksums_[0]}},{key:"renderChart_",value:function(t){switch(this.type_){case DY.DONUT:case DY.PIE_3D:case DY.PIE:this.renderCircleChart();break;default:this.renderBarChart()}}},{key:"renderBarChart",value:function(){var t,e=this,r=this.getImage(1),n=r.getContext("2d"),i=0,o=this.animation_.animate?this.animation_.step:1;this.stroke_&&(t=Bl(this.stroke_.getColor()),i=this.stroke_.getWidth());var a,s=Math.max.apply(null,this.data_)||0,u=Math.min(5,2*this.radius_/this.data_.length),l=r.width-(i||0),c=r.width/2,h=c-this.data_.length*u/2;t&&(n.strokeStyle=t,n.lineWidth=i),this.data_.sort((function(t,e){return t-e})).forEach((function(r,i){n.beginPath(),n.fillStyle=e.colors_[i%e.colors_.length],a=h+u;var c=r/s*2*e.radius_*o;n.rect(h,l-c,u,c),n.closePath(),n.fill(),t&&n.stroke(),h=a}));var f=this.getAnchor();f[0]=c-this.offset_[0],f[1]=c-this.offset_[1]}},{key:"renderCircleChart",value:function(){var t,e=0;this.stroke_&&(t=Bl(this.stroke_.getColor()),e=this.stroke_.getWidth());var r=this.getImage(1),n=r.getContext("2d");n.clearRect(0,0,r.width,r.height),n.lineJoin="round";var i=0;!XU(this.data_)&&this.data_.length>0&&(i=this.data_.reduce((function(t,e){return t+e}))),n.setTransform(1,0,0,1,0,0),n.translate(0,0);var o=this.animation_.animate?this.animation_.step:1,a=Math.PI*(o-1.5),s=r.width/2;t&&(n.strokeStyle=t,n.lineWidth=e),n.save(),this.type_===DY.PIE_3D?this.drawPie3D(n,a,s,o,t,i):this.type_===DY.DONUT?this.drawDonut(n,a,s,o,t,e,i):this.drawPie(n,a,s,o,t,i),n.restore();var u=this.getAnchor();u[0]=s-this.offset_[0],u[1]=s-this.offset_[1]}},{key:"drawDonut",value:function(t,e,r,n,i,o,a){var s=t;s.save(),s.beginPath(),s.rect(0,0,2*r,2*r),s.arc(r,r,this.radius_*n*this.donutRatio_,0,2*Math.PI),s.clip("evenodd");var u=this.drawPie(s,e,r,n,i,a);s.restore(),s.beginPath(),s.strokeStyle=i,s.lineWidth=o;var l=this.radius_;s.arc(r,r,l*n*this.donutRatio_,Math.PI*(n-1.5),u),i&&s.stroke()}},{key:"drawPie3D",value:function(t,e,r,n,i,o){var a=t;a.translate(0,.3*r),a.scale(1,.7),a.beginPath(),a.fillStyle=this.fill3DColor_,a.arc(r,1.4*r,this.radius_*n,0,2*Math.PI),a.fill(),i&&a.stroke(),this.drawPie(t,e,r,n,i,o)}},{key:"drawPie",value:function(t,e,r,n,i,o){var a,s=this,u=e,l=t;return this.data_.forEach((function(t,e){l.beginPath(),l.moveTo(r,r),l.fillStyle=s.colors_[e%s.colors_.length],a=u+2*Math.PI*t/(o*n),l.arc(r,r,s.radius_*n,u,a),l.closePath(),l.fill(),i&&l.stroke(),u=a})),u}}])&&eZ(e.prototype,r),n&&eZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(hM);function sZ(t){return(sZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==sZ(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===sZ(o)?o:String(o)),n)}var i,o}var cZ=function(){function t(){uZ(this,t),this.parser=new uf,this.capabilities=null}var e,r,n;return e=t,(r=[{key:"read",value:function(t){return this.capabilities=this.parser.read(t),this}},{key:"getMatrixSet",value:function(t,e){for(var r,n=0;n<this.capabilities.Contents.Layer.length&&void 0===r;n+=1){var i=this.capabilities.Contents.Layer[n];i.Identifier===t&&(XU(e)||(r=i.TileMatrixSetLink.filter((function(t){return t.contains(e)}))[0]),void 0===r&&(r=i.TileMatrixSetLink[0].TileMatrixSet))}return r}},{key:"getMatrixIds",value:function(t,e){var r=[],n=this.getMatrixSet(t,e),i=this.capabilities.Contents.TileMatrixSet.filter((function(t){return t.Identifier===n}))[0];return null!=i&&i.length>0&&(r=i.TileMatrix.map((function(t){return t.Identifier}))),r}},{key:"getFormat",value:function(t){var e,r=this.capabilities.Contents.Layer.filter((function(e){return e.Identifier===t}))[0];return null!=r&&(e=r.Format[0]),e}},{key:"getOptionsFromCapabilities",value:function(t,e){return KC(this.capabilities,{layer:t,matrixSet:e})}}])&&lZ(e.prototype,r),n&&lZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hZ(t){return(hZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==hZ(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===hZ(o)?o:String(o)),n)}var i,o}var dZ=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fZ(this,t),this.rootPrefix=null,this.namespaces={ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema",ogc:"http://www.opengis.net/ogc"},this.options=e}var e,r,n;return e=t,n=[{key:"getChildValue",value:function(t,e){var r=e||"";if(t)for(var n=t.firstChild;n;n=n.nextSibling)switch(n.nodeType){case 3:case 4:r+=n.nodeValue}return r}}],(r=[{key:"read",value:function(t){var e=t;QU(t)&&(e=Xc(t)),9!==e.nodeType&&Af(Hf("exception").must_be_document);var r={};return this.readRoot(r,e),r}},{key:"readRoot",value:function(t,e){var r=t,n=e.documentElement;this.rootPrefix=n.prefix,r.version=n.getAttribute("version"),this.runChildNodes(r,n)}},{key:"runChildNodes",value:function(t,e){for(var r,n,i,o,a=e.childNodes,s=0,u=a.length;s<u;s+=1)1===(r=a[s]).nodeType&&(i=this.getNamespacePrefix(r.namespaceURI),o=r.nodeName.split(":").pop(),(n=this["read".concat(i).concat(o)])&&n.apply(this,[t,r]))}},{key:"getNamespacePrefix",value:function(t){var e=null;if(null===t)e=this.namespaces[this.defaultPrefix];else for(var r=Object.keys(this.namespaces),n=0;n<r.length&&(e=r[n],this.namespaces[e]!==t);n+=1);return e}},{key:"getAttributeNS",value:function(t,e,r){var n="";if(t.getAttributeNS)n=t.getAttributeNS(e,r)||"";else{var i=this.getAttributeNodeNS(t,e,r);i&&(n=i.nodeValue)}return n}}])&&pZ(e.prototype,r),n&&pZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mZ(t){return(mZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==mZ(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===mZ(o)?o:String(o)),n)}var i,o}function gZ(t,e){return(gZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vZ(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bZ(t);if(e){var i=bZ(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _Z(this,r)}}function _Z(t,e){if(e&&("object"===mZ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bZ(t){return(bZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wZ,MZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gZ(t,e)}(o,t);var e,r,n,i=vZ(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).geojsonFormatter_=new Xj,t.name="drawLayer",t.selectedFeatures_=[],t}return e=o,(r=[{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),this.ol3Layer=new xS({source:new jS({}),style:new MM({fill:new dM({color:"rgba(0, 158, 0, 0.1)"}),stroke:new mM({color:"#fcfcfc",width:2}),image:new pM({radius:7,fill:new dM({color:"#009E00"}),stroke:new mM({color:"#fcfcfc",width:2})})}),zIndex:Lb.Z_INDEX.WFS+999}),!1!==this.options.visibility&&this.setVisible(this.inRange()),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(t){this.selectedFeatures_=t,KU(this.selectedFeatures_[0].click)&&this.selectedFeatures_[0].click()}},{key:"unselectFeatures",value:function(){this.selectedFeatures_.length>0&&(this.selectedFeatures_.length=0,this.map.removePopup())}},{key:"drawPoints",value:function(t){var e=t;XU(e)&&Af(Hf("exception").no_point),HU(e)||(e=[e]);var r=this.pointsToGeoJSON_(e);this.drawGeoJSON(r)}},{key:"drawGeoJSON",value:function(t){var e=this,r=t;XU(r)&&Af(Hf("exception").no_geojson),HU(r)||(r=[r]);var n=Vn(this.map.getProjection().code),i=[];r.forEach((function(t){var r=e.geojsonFormatter_.readFeatures(t,{dataProjection:n});i=i.concat(r)})),this.ol3Layer.getSource().addFeatures(i)}},{key:"drawFeatures",value:function(t){var e=t;XU(e)||(HU(e)||(e=[e]),this.ol3Layer.getSource().addFeatures(e))}},{key:"removeFeatures",value:function(t){var e=t;if(!XU(e)){HU(e)||(e=[e]);var r=this.ol3Layer.getSource();e.forEach((function(t){try{r.removeFeature(t)}catch(t){throw t}}))}}},{key:"getPoints",value:function(t){var e=[],r=this.ol3Layer.getSource();return e=XU(t)?r.getFeatures():r.getFeaturesAtCoordinate(t),this.featuresToPoints_(e)}},{key:"destroy",value:function(){var t=this.map.getMapImpl();XU(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.options=null,this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=e&&this.name===t.name),e}},{key:"pointsToGeoJSON_",value:function(t){var e=this,r=Vn(this.map.getProjection().code);return t.map((function(t){var n=t.data,i=new ds([t.x,t.y]);return{type:"Feature",geometry:e.geojsonFormatter_.writeGeometryObject(i,{dataProjection:r}),properties:n,click:t.click,showPopup:t.showPopup}}))}},{key:"featuresToPoints_",value:function(t){return[]}}])&&yZ(e.prototype,r),n&&yZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(tg),SZ=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function xZ(t,e){for(var r=SZ.length,n=0;n<r;++n)try{var i=t.getContext(SZ[n],e);if(i)return i}catch(t){}return null}var EZ=35044;function OZ(t){switch(t){case 34962:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}var PZ=function(){function t(t,e){this.array=null,this.type=t,Or(34962===t||34963===t,62),this.usage=void 0!==e?e:EZ}return t.prototype.ofSize=function(t){this.array=new(OZ(this.type))(t)},t.prototype.fromArray=function(t){this.array=OZ(this.type).from(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(OZ(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),TZ="webglcontextlost",IZ="webglcontextrestored";function LZ(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var RZ=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,n,r[0],r[1],0,i,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e){var r=this.getGL(),n=t.size;r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,n[0],n[1]),r.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(t),r.drawArrays(r.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(i.location,e)}))},t}(),CZ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AZ="u_projectionMatrix",kZ="u_offsetScaleMatrix",NZ="u_offsetRotateMatrix",jZ="u_time",FZ="u_zoom",DZ="u_resolution",BZ={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function GZ(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*zZ(n.type)}return e}function zZ(t){switch(t){case BZ.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case BZ.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case BZ.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case BZ.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var UZ=function(t){function e(e){var r=t.call(this)||this,n=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvas_=document.createElement("canvas"),r.canvas_.style.position="absolute",r.canvas_.style.left="0",r.gl_=xZ(r.canvas_);var i=r.getGL();if(r.bufferCache_={},r.currentProgram_=null,Or(_i(function(){if(!wZ){var t=xZ(document.createElement("canvas"));t&&(wZ=t.getSupportedExtensions())}return wZ}(),"OES_element_index_uint"),63),i.getExtension("OES_element_index_uint"),r.canvas_.addEventListener(TZ,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener(IZ,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=[1,0,0,1,0,0],r.offsetScaleMatrix_=[1,0,0,1,0,0],r.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],n.uniforms)for(var o in n.uniforms)r.uniforms_.push({name:o,value:n.uniforms[o]});return r.postProcessPasses_=n.postProcesses?n.postProcesses.map((function(t){return new RZ({webGlContext:i,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new RZ({webGlContext:i})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return CZ(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),r=Mr(t),n=this.bufferCache_[r];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[r]=n);e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=Mr(t),n=this.bufferCache_[r];e.isContextLost()||e.deleteBuffer(n.buffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(TZ,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(IZ,this.boundHandleWebGLContextRestored_)},e.prototype.prepareDraw=function(t){var e=this.getGL(),r=this.getCanvas(),n=t.size,i=t.pixelRatio;r.width=n[0]*i,r.height=n[1]*i,r.style.width=n[0]+"px",r.style.height=n[1]+"px",e.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);e.bindTexture(e.TEXTURE_2D,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),i=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL(),n=r.UNSIGNED_INT,i=e-t,o=4*t;r.drawElements(r.TRIANGLES,i,n,o)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.postProcessPasses_.length;e++)this.postProcessPasses_[e].apply(t,this.postProcessPasses_[e+1]||null)},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=Aa(this.offsetScaleMatrix_);Fa(n,2/e[0],2/e[1]);var i,o,a,s,u=Aa(this.offsetRotateMatrix_);0!==r&&(i=u,o=-r,a=Math.cos(o),s=Math.sin(o),ka(i,Na(Ca,a,s,-s,a,0,0))),this.setUniformMatrixValue(kZ,LZ(this.tmpMat4_,n)),this.setUniformMatrixValue(NZ,LZ(this.tmpMat4_,u)),this.setUniformFloatValue(jZ,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(FZ,t.viewState.zoom),this.setUniformFloatValue(DZ,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&i.prevValue!==e&&(i.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(i.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,LZ(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(n)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n"+r.getShaderInfoLog(n)),r.getShaderInfoLog(i)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n"+r.getShaderInfoLog(i));var o=r.createProgram();return r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),o},e.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return Aa(e),Da(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,r,!1,n,i))},e.prototype.enableAttributes=function(t){for(var e=GZ(t),r=0,n=0;n<t.length;n++){var i=t[n];this.enableAttributeArray_(i.name,i.size,i.type||5126,e,r),r+=i.size*zZ(i.type)}},e.prototype.handleWebGLContextLost=function(){kn(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(gi),qZ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VZ="GENERATE_BUFFERS",YZ=function(t){function e(e,r){var n=t.call(this,e)||this,i=r||{};return n.helper=new UZ({postProcesses:i.postProcesses,uniforms:i.uniforms}),n}return qZ(e,t),e.prototype.disposeInternal=function(){this.helper.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getShaderCompileErrors=function(){return this.helper.getShaderCompileErrors()},e}(Zm);var ZZ=YZ,WZ=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),HZ=URL.createObjectURL(WZ);var XZ=new Uint8Array(4),KZ=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){xi(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return XZ[0]=0,XZ[1]=0,XZ[2]=0,XZ[3]=0,XZ;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return XZ[0]=this.data_[4*r],XZ[1]=this.data_[4*r+1],XZ[2]=this.data_[4*r+2],XZ[3]=this.data_[4*r+3],XZ},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}(),JZ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QZ=function(t){function e(e,r){var n=this,i=r.uniforms||{},o=[1,0,0,1,0,0];i[AZ]=o,(n=t.call(this,e,{uniforms:i,postProcesses:r.postProcesses})||this).sourceRevision_=-1,n.verticesBuffer_=new PZ(34962,35048),n.hitVerticesBuffer_=new PZ(34962,35048),n.indicesBuffer_=new PZ(34963,35048),n.program_=n.helper.getProgram(r.fragmentShader,r.vertexShader),n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(r.hitFragmentShader,r.hitVertexShader);var a=r.attributes?r.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:BZ.FLOAT}})):[];n.attributes=[{name:"a_position",size:2,type:BZ.FLOAT},{name:"a_index",size:1,type:BZ.FLOAT}].concat(a),n.hitDetectionAttributes=[{name:"a_position",size:2,type:BZ.FLOAT},{name:"a_index",size:1,type:BZ.FLOAT},{name:"a_hitColor",size:4,type:BZ.FLOAT},{name:"a_featureUid",size:1,type:BZ.FLOAT}].concat(a),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=[1/0,1/0,-1/0,-1/0],n.currentTransform_=o,n.renderTransform_=[1,0,0,1,0,0],n.invertRenderTransform_=[1,0,0,1,0,0],n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new KZ(n.helper),n.worker_=new Worker(HZ),n.worker_.addEventListener("message",function(t){var e=t.data;if(e.type===VZ){var r=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,Ba(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):this.renderInstructions_=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var s=n.getLayer().getSource();return n.sourceListenKeys_=[di(s,IS,n.handleSourceFeatureAdded_,n),di(s,LS,n.handleSourceFeatureChanged_,n),di(s,CS,n.handleSourceFeatureDelete_,n),di(s,RS,n.handleSourceFeatureClear_,n)],s.forEachFeature(function(t){this.featureCache_[Mr(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}.bind(n)),n}return JZ(e,t),e.prototype.handleSourceFeatureAdded_=function(t){var e=t.feature;this.featureCache_[Mr(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++},e.prototype.handleSourceFeatureChanged_=function(t){var e=t.feature;this.featureCache_[Mr(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.handleSourceFeatureDelete_=function(t){var e=t.feature;delete this.featureCache_[Mr(e)],this.featureCount_--},e.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},e.prototype.renderFrame=function(t){var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e),this.helper.finalizeDraw(t);var r=this.helper.getCanvas(),n=t.layerStatesArray[t.layerIndex].opacity;return n!==parseFloat(r.style.opacity)&&(r.style.opacity=n),this.hitDetectionEnabled_&&(this.renderHitDetection(t),this.hitRenderTarget_.clearCachedData()),r},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource(),n=t.viewState,i=!t.viewHints[ea]&&!t.viewHints[ra],o=!Kr(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),i&&(o||a)){var s=n.projection,u=n.resolution,l=e instanceof EM?e.getRenderBuffer():0,c=Dr(t.extent,l*u);r.loadFeatures(c,u,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),ka(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},e.prototype.rebuildBuffers_=function(t){var e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);var r,n,i=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o))}var a,s,u,l=[],c=[],h=0,f=0;for(var p in this.featureCache_)if((n=(r=this.featureCache_[p]).geometry)&&n.getType()===mr.POINT){l[0]=n.getFlatCoordinates()[0],l[1]=n.getFlatCoordinates()[1],ja(e,l),s=f+6,u=void 0,(u=c||[])[0]=Math.floor(s/256/256/256)/255,u[1]=Math.floor(s/256/256)%256/255,u[2]=Math.floor(s/256)%256/255,u[3]=s%256/255,a=u,this.renderInstructions_[h++]=l[0],this.renderInstructions_[h++]=l[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=l[0],this.hitRenderInstructions_[f++]=l[1],this.hitRenderInstructions_[f++]=a[0],this.hitRenderInstructions_[f++]=a[1],this.hitRenderInstructions_[f++]=a[2],this.hitRenderInstructions_[f++]=a[3],this.hitRenderInstructions_[f++]=Number(p));for(var d=void 0,m=0;m<this.customAttributes.length;m++)d=this.customAttributes[m].callback(r.feature,r.properties),this.renderInstructions_[h++]=d,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=d)}var y={type:VZ,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(y.projectionTransform=e,this.worker_.postMessage(y,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var g={type:VZ,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};g.projectionTransform=e,g.hitDetection=!0,this.worker_.postMessage(g,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(Or(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=ja(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=function(t){var e=0;return e+=Math.round(256*t[0]*256*256*255),e+=Math.round(256*t[1]*256*255),e+=Math.round(256*t[2]*255),e+=Math.round(255*t[3])}([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),u=this.hitRenderInstructions_[s],l=Math.floor(u).toString(),c=this.getLayer().getSource().getFeatureByUid(l);return c?n(c,this.getLayer()):void 0}},e.prototype.renderHitDetection=function(t){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){yi(t)})),this.sourceListenKeys_=null,t.prototype.disposeInternal.call(this)},e}(ZZ),$Z=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tW="blur",eW="gradient",rW="radius",nW=["#00f","#0ff","#0f0","#ff0","#f00"];var iW=function(t){function e(e){var r=this,n=e||{},i=An({},n);delete i.gradient,delete i.radius,delete i.blur,delete i.weight,(r=t.call(this,i)||this).gradient_=null,r.addEventListener(to(eW),r.handleGradientChanged_),r.setGradient(n.gradient?n.gradient:nW),r.setBlur(void 0!==n.blur?n.blur:15),r.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";return r.weightFunction_="string"==typeof o?function(t){return t.get(o)}:o,r.setRenderOrder(null),r}return $Z(e,t),e.prototype.getBlur=function(){return this.get(tW)},e.prototype.getGradient=function(){return this.get(eW)},e.prototype.getRadius=function(){return this.get(rW)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Bs(1,256),r=e.createLinearGradient(0,0,1,256),n=1/(t.length-1),i=0,o=t.length;i<o;++i)r.addColorStop(i*n,t[i]);return e.fillStyle=r,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(tW,t)},e.prototype.setGradient=function(t){this.set(eW,t)},e.prototype.setRadius=function(t){this.set(rW,t)},e.prototype.createRenderer=function(){return new QZ(this,{attributes:[{name:"weight",callback:function(t){var e=this.weightFunction_(t);return void 0!==e?sr(e,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(rW)+this.get(tW))}.bind(this),u_blurSlope:function(){return this.get(rW)/Math.max(1,this.get(tW))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},e}(xS);function oW(t){return(oW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==oW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===oW(o)?o:String(o)),n)}var i,o}function uW(t,e){return(uW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hW(t);if(e){var i=hW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cW(this,r)}}function cW(t,e){if(e&&("object"===oW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hW(t){return(hW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fW,pW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uW(t,e)}(o,t);var e,r,n,i=lW(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};aW(this,o),t=i.call(this,e);var r,n=e.weight?e.weight:"weight";if("string"==typeof n){var a=1,s=t.getWeights(e);s.length>0?(a=s.reduce((function(t,e){return Math.max(t,e)})),t.maxWeight_=a,t.minWeight_=s.reduce((function(t,e){return Math.min(t,e)})),r=function(t){var e;return t instanceof dy?e=t.get(n):t instanceof Yq&&(e=t.getAttribute(n)),parseFloat(e/a)}):e.weight&&JS(Hf("heatmap").features,Hf("heatmap").name)}else r=n;return t.setStyle((function(e,n){var i=xx.getValue(r,e),o=void 0!==i?sr(i,0,1):1,a=255*o||0,s=t.styleCache_[a];return s||(s=[new MM({image:new vS({opacity:o,src:t.circleImage_})})],t.styleCache_[a]=s),s})),t}return e=o,(r=[{key:"getMinWeight",value:function(){return this.minWeight_}},{key:"getMaxWeight",value:function(){return this.maxWeight_}},{key:"getWeights",value:function(t){var e=[],r=this.getSource();if(null!==r){var n=r.getFeatures();n.length>0&&(e=n.map((function(e){return e.get(t.weight)})).filter((function(t){return null!=t})))}return e}}])&&sW(e.prototype,r),n&&sW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(iW),dW=void 0,mW=function(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)},yW=function(t,e){return t[0]===e[0]&&t[1]===e[1]};!function(){function t(t,e){for(var r,n=t.length-1;n>0;n-=1)(t[n][0]>e&&t[n-1][0]<e||t[n][0]<e&&t[n-1][0]>e)&&(r=[e,(e-t[n][0])/(t[n-1][0]-t[n][0])*(t[n-1][1]-t[n][1])+t[n][1]],t.splice(n,0,r))}function e(t,e){for(var r,n=t.length-1;n>0;n-=1)(t[n][1]>e&&t[n-1][1]<e||t[n][1]<e&&t[n-1][1]>e)&&(r=[(e-t[n][1])/(t[n-1][1]-t[n][1])*(t[n-1][0]-t[n][0])+t[n][0],e],t.splice(n,0,r))}fW=function(r,n){var i="Polygon"===n.getType();if(!i&&"MultiPolygon"!==n.getType())return null;var o=n.getCoordinates();return i&&(o=[o]),o.forEach((function(n){n.forEach((function(n){t(n,r[0]),t(n,r[2]),e(n,r[1]),e(n,r[3])}))})),o.forEach((function(t){t.forEach((function(t){t.forEach((function(t){var e=t;e[0]<r[0]?e[0]=r[0]:e[0]>r[2]&&(e[0]=r[2]),e[1]<r[1]?e[1]=r[1]:e[1]>r[3]&&(e[1]=r[3])}))}))})),i?new Ls(o[0]):new Iy(o)}}();var gW=function(t,e,r,n){var i=[];!1!==n&&i.push(t);var o=mW(t,e);if(o){var a=Math.round(o/r);if(a>1)for(var s=(e[0]-t[0])/a,u=(e[1]-t[1])/a,l=1;l<a;l+=1)i.push([t[0]+s*l,t[1]+u*l])}return i.push(e),i};Sy.prototype.sampleAt=function(t){for(var e=dW.getCoordinates(),r=[],n=1;n<e.length;n+=1)r=r.concat(gW(e[n-1],e[n],t,1===n));return new Sy(r)},Py.prototype.sampleAt=function(t){var e=dW.getCoordinates(),r=[];return e.forEach((function(e){for(var n=[],i=1;i<e.length;i+=1)n=n.concat(gW(e[i-1],e[i],t,1===i));r.push(n)})),new Py(r)},Ls.prototype.sampleAt=function(t){var e=dW.getCoordinates(),r=[];return e.forEach((function(e){for(var n=[],i=1;i<e.length;i+=1)n=n.concat(gW(e[i-1],e[i],t,1===i));r.push(n)})),new Ls(r)},Iy.prototype.sampleAt=function(t){var e=dW.getCoordinates(),r=[];return e.forEach((function(e){var n=[];r.push(n),e.forEach((function(e){for(var r=[],i=1;i<e.length;i+=1)r=r.concat(gW(e[i-1],e[i],t,1===i));n.push(r)}))})),new Iy(r)},Ny.prototype.intersection=function(t,e){if(t.sampleAt){var r=Dr(dW.getCenter().concat(dW.getCenter()),dW.getRadius());t=fW(r,t).simplify(e);var n=dW.getCenter(),i=dW.getRadius(),o=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":o=[o];case"MultiPolygon":var a=!1,s=[];return o.forEach((function(t){var e=[];s.push(e),t.forEach((function(t){var r=[];e.push(r),t.forEach((function(t){var e=mW(n,t);e>i?(a=!0,r.push([n[0]+i/e*(t[0]-n[0]),n[1]+i/e*(t[1]-n[1])])):r.push(t)}))}))})),a?"Polygon"===t.getType()?new Ls(s[0]):new Iy(s):t}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: ".concat(t.getType()));return t};var vW=void 0;function _W(t){return(_W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==_W(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_W(o)?o:String(o)),n)}var i,o}function MW(t,e){return(MW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function SW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=OW(t);if(e){var i=OW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xW(this,r)}}function xW(t,e){if(e&&("object"===_W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return EW(t)}function EW(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OW(t){return(OW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Sy.prototype.splitAt=function(t,e){var r,n=e;if(!t)return[vW];if(e||(n=1e-10),t.length&&t[0].length){var i=[vW];for(r=0;r<t.length;r+=1){for(var o=[],a=0;a<i.length;a+=1){var s=i[a].splitAt(t[r],n);o=o.concat(s)}i=o}return i}if(yW(t,vW.getFirstCoordinate())||yW(t,vW.getLastCoordinate()))return[vW];var u=vW.getCoordinates(),l=[u[0]],c=[];for(r=0;r<u.length-1;r+=1){if(yW(t,u[r+1]))l.push(u[r+1]),c.push(new Sy(l)),l=[];else if(!yW(t,u[r])){var h=void 0,f=void 0,p=!1;u[r][0]===u[r+1][0]?(h=(u[r][1]-t[1])/(u[r][1]-u[r+1][1]),p=u[r][0]===t[0]&&h>0&&h<=1):u[r][1]===u[r+1][1]?(h=(u[r][0]-t[0])/(u[r][0]-u[r+1][0]),p=u[r][1]===t[1]&&h>0&&h<=1):(h=(u[r][0]-t[0])/(u[r][0]-u[r+1][0]),f=(u[r][1]-t[1])/(u[r][1]-u[r+1][1]),p=Math.abs(h-f)<=n&&h>0&&h<=1),p&&(l.push(t),c.push(new Sy(l)),l=[t])}yW(u[r],u[r+1])||l.push(u[r+1])}return l.length>1&&c.push(new Sy(l)),c.length?c:[vW]};var PW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MW(t,e)}(o,t);var e,r,n,i=SW(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return bW(this,o),(t=i.call(this,{stroke:e.stroke,text:e.text,zIndex:e.zIndex,geometry:e.geometry})).setRenderer(t._render.bind(EW(t))),t._visible=!1!==e.visible,"function"==typeof e.width?t._widthFn=e.width:t.setWidth(e.width),t.setWidth2(e.width2),"function"==typeof e.color?t._colorFn=e.color:t.setColor(e.color),t.setColor2(e.color2),t.setLineCap(e.lineCap),t.setArrow(e.arrow),t.setArrowSize(e.arrowSize),t.setArrowColor(e.arrowColor),t._offset=[0,0],t.setOffset(e.offset0,0),t.setOffset(e.offset1,1),t._noOverlap=e.noOverlap,t}return e=o,(r=[{key:"setWidth",value:function(t){this._width=t||0}},{key:"setWidth2",value:function(t){this._width2=t}},{key:"getOffset",value:function(t){return this._offset[t]}},{key:"setOffset",value:function(t,e){var r=Math.max(0,parseFloat(t));switch(e){case 0:this._offset[0]=r;break;case 1:this._offset[1]=r}}},{key:"setLineCap",value:function(t){this._lineCap="round"===t?"round":"butt"}},{key:"getWidth",value:function(t,e){if(this._widthFn)return this._widthFn(t,e);var r="number"==typeof this._width2?this._width2:this._width;return this._width+(r-this._width)*e}},{key:"setColor",value:function(t){try{this._color=Vl(t)}catch(t){this._color=[0,0,0,1]}}},{key:"setColor2",value:function(t){try{this._color2=Vl(t)}catch(t){this._color2=null}}},{key:"setArrowColor",value:function(t){try{this._acolor=Bl(t)}catch(t){this._acolor=null}}},{key:"getColor",value:function(t,e){if(this._colorFn)return Bl(this._colorFn(t,e));var r=this._color,n=this._color2||this._color;return"rgba(".concat(+Math.round(r[0]+(n[0]-r[0])*e),",\n      ").concat(Math.round(r[1]+(n[1]-r[1])*e),",\n      ").concat(Math.round(r[2]+(n[2]-r[2])*e),",\n      ").concat(r[3]+(n[3]-r[3])*e,"\n      )")}},{key:"getArrow",value:function(){return this._arrow}},{key:"setArrow",value:function(t){this._arrow=parseInt(t,0),(this._arrow<-1||this._arrow>2)&&(this._arrow=0)}},{key:"getArrowSize",value:function(){return this._arrowSize||[16,16]}},{key:"setArrowSize",value:function(t){Array.isArray(t)?this._arrowSize=t:"number"==typeof t&&(this._arrowSize=[t,t])}},{key:"drawArrow",value:function(t,e,r,n,i){var o=this.getArrowSize()[0]*i,a=mW(e,r),s=(e[0]-r[0])/a,u=(e[1]-r[1])/a,l=Math.max(this.getArrowSize()[1]/2,n/2)*i;t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[0]-o*s+l*u,e[1]-o*u-l*s),t.lineTo(e[0]-o*s-l*u,e[1]-o*u+l*s),t.lineTo(e[0],e[1]),t.fill()}},{key:"_render",value:function(t,e){if("LineString"===e.geometry.getType()){var r,n,i,o=e.context;if(!this._visible){var a=e.pixelRatio/e.resolution,s=Math.cos(e.rotation),u=Math.sin(e.rotation);n=e.geometry.getCoordinates();var l=t[0][0]-n[0][0]*a*s-n[0][1]*a*u,c=t[0][1]-n[0][0]*a*u+n[0][1]*a*s;for(t=[],r=0;i=n[r];r+=1)t[r]=[l+i[0]*a*s+i[1]*a*u,c+i[0]*a*u-i[1]*a*s,i[2]]}var h=this.getArrowSize()[0]*e.pixelRatio;o.save(),this.getOffset(0)&&this._splitAsize(t,this.getOffset(0)*e.pixelRatio),this.getOffset(1)&&this._splitAsize(t,this.getOffset(1)*e.pixelRatio,!0),t.length>1&&(-1===this.getArrow()||2===this.getArrow())&&(i=this._splitAsize(t,h),this._acolor?o.fillStyle=this._acolor:o.fillStyle=this.getColor(e.feature,0),this.drawArrow(o,i[0],i[1],this.getWidth(e.feature,0),e.pixelRatio)),t.length>1&&this.getArrow()>0&&(i=this._splitAsize(t,h,!0),this._acolor?o.fillStyle=this._acolor:o.fillStyle=this.getColor(e.feature,1),this.drawArrow(o,i[0],i[1],this.getWidth(e.feature,1),e.pixelRatio));var f=this._splitInto(t,255,2),p=0,d=f.length;if(o.lineJoin="round",o.lineCap=this._lineCap||"butt",f.length>1)for(p=0;p<f.length;p+=1){var m=p/d;for(n=f[p],o.lineWidth=this.getWidth(e.feature,m)*e.pixelRatio,o.strokeStyle=this.getColor(e.feature,m),o.beginPath(),o.moveTo(n[0][0],n[0][1]),r=1;i=n[r];r+=1)o.lineTo(i[0],i[1]);o.stroke()}o.restore()}}},{key:"_splitAsize",value:function(t,e,r){var n,i,o,a,s=0;for(n=o=r?t.pop():t.shift();t.length;){if(i=r?t.pop():t.shift(),s+(a=mW(n,i))>e){n=[n[0]+(i[0]-n[0])*(e-s)/a,n[1]+(i[1]-n[1])*(e-s)/a],a=mW(n,o),r?(t.push(i),t.push(n),t.push([n[0]+(o[0]-n[0])/a,n[1]+(o[1]-n[1])/a])):(t.unshift(i),t.unshift(n),t.unshift([n[0]+(o[0]-n[0])/a,n[1]+(o[1]-n[1])/a]));break}s+=a,n=i}return[o,n]}},{key:"_splitInto",value:function(t,e,r){var n,i,o,a=this._noOverlap?1:.9,s=[],u=0;for(n=1;i=t[n];n+=1)u+=mW(t[n-1],i);var l=Math.max(r||2,u/(e||255)),c=t[0];u=0;var h=[c];for(n=1,i=t[1];n<t.length;){var f=i[0]-c[0],p=i[1]-c[1];if(u+(o=Math.sqrt(f*f+p*p))>l){var d=(l-u)/o;h.push([c[0]+f*d,c[1]+p*d]),s.push(h),h=[c=[c[0]+f*d*a,c[1]+p*d*a]],u=0}else u+=o,c=i,h.push(c),i=t[n+=1]}return s.push(h),s}}])&&wW(e.prototype,r),n&&wW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(MM);qa.prototype.cspline=function(t){var e;return this.calcCSpline?this.csplineGeometryRevision===this.getRevision()&&this.csplineOption===JSON.stringify(t)||(this.csplineGeometry_=this.calcCSpline(t),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(t),e=this.csplineGeometry_):e=this,e},Cy.prototype.calcCSpline=function(t){var e=[];return this.getGeometries().forEach((function(t){return e.push(t.cspline())})),new Cy(e)},Py.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new Py(e)},Ls.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new Ls(e)},Iy.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new Iy(e)};var TW=function(t,e,r,n){var i=r-t,o=n-e;return Math.sqrt(i*i+o*o)};function IW(t){return(IW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==IW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==IW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===IW(o)?o:String(o)),n)}var i,o}function RW(){return(RW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=CW(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function CW(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jW(t)););return t}function AW(t,e){return(AW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jW(t);if(e){var i=jW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return NW(this,r)}}function NW(t,e){if(e&&("object"===IW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jW(t){return(jW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Sy.prototype.calcCSpline=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=this.getCoordinates(),m="number"==typeof p.tension?p.tension:.5,y=p.resolution||this.getLength()/d.length/(p.pointsPerSeg||10),g=[],v=d.slice(0);for(d.length>2&&d[0][0]===d[d.length-1][0]&&d[0][1]===d[d.length-1][1]?(v.unshift(d[d.length-2]),v.push(d[1])):(v.unshift(d[0]),v.push(d[d.length-1])),f=1;f<v.length-2;f+=1){var _=TW(v[f][0],v[f][1],v[f+1][0],v[f+1][1]),b=Math.round(_/y),w=1;if(p.normalize){var M=TW(v[f+1][0],v[f+1][1],v[f-1][0],v[f-1][1]),S=TW(v[f+2][0],v[f+2][1],v[f][0],v[f][1]);w=M<S?M/S:S/M}for(r=(v[f+1][0]-v[f-1][0])*m*w,n=(v[f+2][0]-v[f][0])*m*w,i=(v[f+1][1]-v[f-1][1])*m*w,o=(v[f+2][1]-v[f][1])*m*w,h=0;h<=b;h+=1)c=h/b,a=2*Math.pow(c,3)-3*Math.pow(c,2)+1,s=-2*Math.pow(c,3)+3*Math.pow(c,2),u=Math.pow(c,3)-2*Math.pow(c,2)+c,l=Math.pow(c,3)-Math.pow(c,2),t=a*v[f][0]+s*v[f+1][0]+u*r+l*n,e=a*v[f][1]+s*v[f+1][1]+u*i+l*o,g.push([t,e])}return new Sy(g)};var FW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AW(t,e)}(o,t);var e,r,n,i=kW(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).olStyleFn_=e.updateFacadeOptions(t),e}return e=o,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof dy||r instanceof by||(n=e);var i,o=t.stroke,a=t.label,s=new IP,u=new IP,l=xx.getValue;if(!XU(o)){var c=l(o.color,n)||"#000000",h=l(o.opacity,n);h||0===h||(h=1),s.setStroke(new mM({color:Ox()(c).alpha(h).css(),width:l(o.width,n),lineDash:l(o.linedash,n),lineDashOffset:l(o.linedashoffset,n),lineCap:l(o.linecap,n),lineJoin:l(o.linejoin,n),miterLimit:l(o.miterlimit,n)}))}if(!XU(a)){var f={text:void 0===l(a.text,n)?void 0:String(l(a.text,n)),font:l(a.font,n),fill:new dM({color:l(a.color||"#000000",n)}),textBaseline:(l(a.baseline,n)||"").toLowerCase(),textAlign:l(a.align,n),scale:l(a.scale,n),rotateWithView:l(a.rotate,n)||!1,overflow:l(a.textoverflow,n)||!1,minWidth:l(a.minwidth,n)||0,geometry:l(a.geometry,n),offsetX:l(t.label.offset?t.label.offset[0]:void 0,n),offsetY:l(t.label.offset?t.label.offset[1]:void 0,n)},p=new Yx(f);XU(a.stroke)||p.setStroke(new mM({color:l(a.stroke.color,n),width:l(a.stroke.width,n),lineCap:l(a.stroke.linecap,n),lineJoin:l(a.stroke.linejoin,n),lineDash:l(a.stroke.linedash,n),lineDashOffset:l(a.stroke.linedashoffset,n),miterLimit:l(a.stroke.miterlimit,n)}));var d=l(a.path,n);"boolean"==typeof d&&d&&(s.textPath=p,!XU(a.smooth)&&!0===a.smooth&&KU(n.getGeometry)&&s.setGeometry(n.getGeometry().cspline()),p.setPlacement("line")),s.setText(p)}if(!XU(t.fill)){var m=xx.getValue(t.fill.color,n,e.layer_),y=xx.getValue(t.fill.opacity,n,e.layer_);y||0===y||(y=1);var g=xx.getValue(t.fill.width,n,e.layer_);if(XU(m)||(i=new mM({color:Ox()(m).alpha(y).css(),width:g})),!XU(t.fill.pattern)){var v="rgba(0,0,0,1)";XU(t.fill.pattern.color)||(v=xx.getValue(t.fill.pattern.color,n,e.layer_)),i=new NE({pattern:(xx.getValue(t.fill.pattern.name,n,e.layer_)||"").toLowerCase(),image:"Image"===xx.getValue(t.fill.pattern.name,n,e.layer_)?new vS({src:xx.getValue(t.fill.pattern.src,n,e.layer_),crossOrigin:"anonymous"}):void 0,color:v,width:g,size:xx.getValue(t.fill.pattern.size,n,e.layer_),spacing:xx.getValue(t.fill.pattern.spacing,n,e.layer_),angle:xx.getValue(t.fill.pattern.rotation,n,e.layer_),scale:xx.getValue(t.fill.pattern.scale,n,e.layer_),offset:xx.getValue(t.fill.pattern.offset,n,e.layer_),fill:i,layer:e.layer_})}}return u.setStroke(i),[s,u]}}},{key:"applyToLayer",value:function(t){RW(jW(o.prototype),"applyToLayer",this).call(this,t);var e=t.getImpl().getOL3Layer();XU(e)||(this.postComposeEvtKey_=e.on("postcompose",JW,e))}},{key:"unapply",value:function(){Hi(this.postComposeEvtKey_)}},{key:"drawGeometryToCanvas",value:function(t,e,r,n){var i=o.getCanvasSize()[0],a=o.getCanvasSize()[1];if(t.drawGeometry(new Sy([[0+n/2,0+n/2],[i/3,a/2-n/2],[2*i/3,0+n/2],[i-n/2,a/2-n/2]])),!XU(r)){var s=r.width,u=e.getContext("2d");u.lineWidth=r.width,i=e.width,a=e.height,u.strokeStyle=r.color,u.beginPath(),u.lineTo(0+s,0+s),u.lineTo(i/3,a/2-s),u.lineTo(2*i/3,0+s),u.lineTo(i-s,a/2-s),u.stroke()}}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var e,r=o.getCanvasSize(),n=kc(t.getContext("2d"),{size:r}),i=this.olStyleFn_()[1];XU(i)||XU(i.getStroke())||(e={color:i.getStroke().getColor(),width:1});var a=this.olStyleFn_()[0];XU(a.getText())||a.setText(null);var s,u=a.getStroke();XU(u)||(XU(u.getWidth())?s=1:(s=u.getWidth(),u.getWidth()>o.DEFAULT_WIDTH_LINE&&(s=o.DEFAULT_WIDTH_LINE)),e={color:a.getStroke().getColor(),width:s},a.getStroke().setWidth(s),n.setStyle(a)),this.drawGeometryToCanvas(n,t,e,s)}}])&&LW(e.prototype,r),n&&LW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(xx);FW.DEFAULT_WIDTH_LINE=3;var DW=FW;function BW(t){return(BW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==BW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==BW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===BW(o)?o:String(o)),n)}var i,o}function zW(t,e){return(zW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function UW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=VW(t);if(e){var i=VW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qW(this,r)}}function qW(t,e){if(e&&("object"===BW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function VW(t){return(VW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zW(t,e)}(o,t);var e,r,n,i=UW(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;XU(e)&&(e=o.DEFAULT_NULL),e=Mq({},e);var r=new DW(e);return i.call(this,e,r)}return e=o,(r=[{key:"unapply",value:function(t){this.getImpl().unapply(t)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Line'))"}}])&&GW(e.prototype,r),n&&GW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(MO);YW.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};var ZW=YW;function WW(t){return(WW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==WW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==WW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===WW(o)?o:String(o)),n)}var i,o}var XW=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"render",value:function(t,e){for(var r=t,n=this,i=0,o=0,a=2,s=function(t,e,r,n){var i=r-t,o=n-e;return Math.sqrt(i*i+o*o)},u=function(t,e){if(!i||o+i<e)for(;a<t.length&&(i=s(t[a-2],t[a-1],t[a],t[a+1]),!(o+i>e))&&!((a+=2)>=t.length);)o+=i;var r=e-o;return a>=t.length&&(a=t.length-2),[r?t[a-2]+(t[a]-t[a-2])*r/i:t[a-2],r?t[a-1]+(t[a+1]-t[a-1])*r/i:t[a-1],Math.atan2(t[a+1]-t[a-1],t[a]-t[a-2])]},l=.25*n.measureText(" ").width,c=0,h=0,f=2;f<e.length;f+=2)h+=s(e[f-2],e[f-1],e[f],e[f+1]);if(!(h<n.minWidth)){var p=r.split(" ").length-1;if("visible"!==n.textOverflow&&h<n.measureText(r).width+(r.length-(1+p))*l){var d="ellipsis"===n.textOverflow?"…":n.textOverflow;do{p=r.split(" ").length-1,r=r.slice(0,r.length-1)}while(r&&h<n.measureText(r+d).width+(r.length+(d.length-1)+p)*l);r+=d}switch(n.textJustify||n.textAlign){case!0:case"center":case"end":case"right":n.textJustify?(c=0,l=(h-n.measureText(r).width)/(t.length-(1+p))):(c=h-n.measureText(r).width-(r.length+p)*l,"center"===n.textAlign&&(c/=2))}for(var m=0;m<r.length;m+=1){var y=r[m],g=n.measureText(y).width,v=u(e,c+g/2);n.save(),n.textAlign="center",n.translate(v[0],v[1]),n.rotate(v[2]),n.lineWidth&&n.strokeText(y,0,0),n.fillText(y,0,0),n.restore(),c+=g+l*(" "===y?2:1)}}}},{key:"getPath_",value:function(t,e,r){var n=[];if(e.forEach((function(e){n.push(t[0]*e[0]+t[1]*e[1]+t[4]),n.push(t[2]*e[0]+t[3]*e[1]+t[5])})),r&&n[0]>n[n.length-2]){for(var i=[],o=n.length-2;o>=0;o-=2)i.push(n[o]),i.push(n[o+1]);return i}return n}},{key:"formatStyle",value:function(t){var e=t;return null==e?null:(void 0===e&&(e=[new MM({text:new Fx})]),"function"==typeof e?e:function(){return[e]})}},{key:"draw",value:function(e,r,n,i){var o=this.getPath_(r,i,n.getRotateWithView());e.font=n.getFont(),e.textBaseline=n.getTextBaseline(),e.textAlign=n.getTextAlign(),e.lineWidth=n.getStroke()&&n.getStroke().getWidth()||t.DEFAULT.lineWidth,e.strokeStyle=n.getStroke()&&n.getStroke().getColor()||t.DEFAULT.lineColor,e.fillStyle=n.getFill()&&n.getFill().getColor()||t.DEFAULT.fillColor,e.textJustify="justify"===n.getTextAlign(),e.textOverflow=n.getTextOverflow?n.getTextOverflow():t.DEFAULT.textOverflow,e.minWidth=n.getMinWidth?n.getMinWidth():t.DEFAULT.minWidth,"function"==typeof e.textPath&&e.textPath(n.getText(),o),e.restore()}}],(r=null)&&HW(e.prototype,r),n&&HW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();XW.DEFAULT={lineWidth:0,lineColor:"#fff",fillColor:"#000",textOverflow:"",minWidth:0};var KW=XW,JW=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(YU(window.CanvasRenderingContext2D.prototype.textPath)&&(window.CanvasRenderingContext2D.prototype.textPath=KW.render),!(e.frameState.viewState.resolution>this.textPathMaxResolution_)){var r=e.frameState.extent,n=e.context;n.save(),n.scale(e.frameState.pixelRatio,e.frameState.pixelRatio);var i=null!=this.getSource()&&0===this.getSource().getFeatures().length;i||(this.getSource().getFeaturesInExtent(r).forEach((function(r){var i=null!=r.getStyle()?r.getStyle():t.getStyle(),o="function"==typeof i?i(r,e.frameState.viewState.resolution):i;o instanceof Array||(o=[o]),o.forEach((function(t){var i,o=(t instanceof ZW?t.getOptions().geometry:t.getGeometry())||r.getGeometry();switch("function"==typeof o&&(o=o(r)),o.getType()){case"MultiLineString":i=o.getLineString(0).getCoordinates();break;default:i=o.getCoordinates()}var a=t instanceof ZW?t.getOptions().text:t.textPath;null!=a&&a instanceof Yx&&KW.draw(n,e.frameState.coordinateToPixelTransform,a,i)}))})),n.restore())}};function QW(t){return(QW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==QW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==QW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===QW(o)?o:String(o)),n)}var i,o}function tH(){return(tH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=eH(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function eH(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oH(t)););return t}function rH(t,e){return(rH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nH(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=oH(t);if(e){var i=oH(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return iH(this,r)}}function iH(t,e){if(e&&("object"===QW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function oH(t){return(oH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rH(t,e)}(o,t);var e,r,n,i=nH(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).olStyleFn_=e.updateFacadeOptions(t),e}return e=o,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof dy||r instanceof by||(n=e);var i=t,o=new PW,a=xx.getValue;return XU(i)||(o.setColor(a(i.color,n)),o.setColor2(a(i.color2,n)),o.setArrowColor(a(i.arrowColor,n)),o.setWidth(a(i.width,n)),o.setWidth2(a(i.width2,n)),o.setArrow(a(i.arrow,n)),o.setLineCap(a(i.lineCap,n)),o.setOffset(a(i.offset0,n),0),o.setOffset(a(i.offset1,n),1)),[o]}}},{key:"applyToLayer",value:function(t){tH(oH(o.prototype),"applyToLayer",this).call(this,t);var e=t.getImpl().getOL3Layer();XU(e)||(this.postComposeEvtKey_=e.on("postcompose",JW,e))}},{key:"unapply",value:function(){Hi(this.postComposeEvtKey_)}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var e=o.getCanvasSize(),r=kc(t.getContext("2d"),{size:e}),n=this.olStyleFn_()[0];r.setStyle(n)}}])&&$W(e.prototype,r),n&&$W(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(xx);function sH(t){return(sH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==sH(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===sH(o)?o:String(o)),n)}var i,o}function lH(t,e){return(lH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cH(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fH(t);if(e){var i=fH(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hH(this,r)}}function hH(t,e){if(e&&("object"===sH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fH(t){return(fH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lH(t,e)}(o,t);var e,r,n,i=cH(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,{})).heatmapLayer_=null,n.attribute_=t,n.opt_options_=Mq(e,r),n.opt_options_.zIndex=999999,n.oldOLLayer_=null,n}return e=o,(r=[{key:"applyToLayer",value:function(t){if(this.layer_=t,!XU(t)){var e=this.layer_.getImpl().getOL3Layer();e instanceof iW||(this.oldOLLayer_=e);var r=this.layer_.getFeatures().map((function(t){return t.getImpl().getOLFeature()}));r.forEach((function(t){return t.setStyle(null)})),this.createHeatmapLayer_(r),this.layer_.getImpl().setOL3Layer(this.heatmapLayer_)}}},{key:"unapply",value:function(t){XU(this.oldOLLayer_)||(this.layer_.getImpl().setOL3Layer(this.oldOLLayer_),this.layer_.redraw(),this.layer_=null,this.oldOLLayer_=null,this.heatmapLayer_=null)}},{key:"createHeatmapLayer_",value:function(t){this.opt_options_.source=new jS({features:t}),this.opt_options_.name=this.layer_.name,this.heatmapLayer_=new pW(this.opt_options_)}},{key:"setOptions",value:function(t,e){this.opt_options_=Mq(t,e)}},{key:"getMinWeight",value:function(){return this.heatmapLayer_.getMinWeight()}},{key:"getMaxWeight",value:function(){return this.heatmapLayer_.getMaxWeight()}}])&&uH(e.prototype,r),n&&uH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(yx);function dH(t){return(dH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==dH(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===dH(o)?o:String(o)),n)}var i,o}function gH(t,e){return(gH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vH(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bH(t);if(e){var i=bH(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _H(this,r)}}function _H(t,e){if(e&&("object"===dH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bH(t){return(bH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gH(t,e)}(o,t);var e,r,n,i=vH(o);function o(){return mH(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"getImageSize",value:function(){return this.iconImage_.getSize()}}])&&yH(e.prototype,r),n&&yH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(vS);function MH(t){return(MH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==MH(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==MH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===MH(o)?o:String(o)),n)}var i,o}function xH(t,e){return(xH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EH(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=PH(t);if(e){var i=PH(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return OH(this,r)}}function OH(t,e){if(e&&("object"===MH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function PH(t){return(PH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xH(t,e)}(o,t);var e,r,n,i=EH(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).olStyleFn_=e.updateFacadeOptions(t),e}return e=o,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof dy||r instanceof by||(n=e);var i=new IP;if(XU(t.stroke)||XU(t.stroke.pattern)){if(!XU(t.stroke)){var o=xx.getValue(t.stroke.color||"#000000",n,e.layer_),u=xx.getValue(t.stroke.opacity,n,e.layer_);u||0===u||(u=1),i.setStroke(new mM({color:Ox()(o).alpha(u).css(),width:xx.getValue(t.stroke.width,n,e.layer_),lineDash:xx.getValue(t.stroke.linedash,n,e.layer_),lineDashOffset:xx.getValue(t.stroke.linedashoffset,n,e.layer_),lineCap:xx.getValue(t.stroke.linecap,n,e.layer_),lineJoin:xx.getValue(t.stroke.linejoin,n,e.layer_),miterLimit:xx.getValue(t.stroke.miterlimit,n,e.layer_)}))}}else{var l;if(!XU(t.stroke.color)){var c=xx.getValue(t.stroke.color,n,e.layer_),h=xx.getValue(t.stroke.opacity,n,e.layer_);h||0===h||(h=1),XU(c)||(l=new dM({color:Ox()(c).alpha(h).css()}))}i.setStroke(new NE({width:xx.getValue(t.stroke.width,n,e.layer_),pattern:(xx.getValue(t.stroke.pattern.name,n,e.layer_)||"").toLowerCase(),image:"Image"===xx.getValue(t.stroke.pattern.name,n,e.layer_)?new vS({src:xx.getValue(t.stroke.pattern.src,n,e.layer_),crossOrigin:"anonymous"}):void 0,color:XU(t.stroke.pattern.color)?"rgba(0,0,0,1)":xx.getValue(t.stroke.pattern.color,n,e.layer_),size:xx.getValue(t.stroke.pattern.size,n,e.layer_),spacing:xx.getValue(t.stroke.pattern.spacing,n,e.layer_),angle:xx.getValue(t.stroke.pattern.rotation,n,e.layer_),scale:xx.getValue(t.stroke.pattern.scale,n,e.layer_),offset:xx.getValue(t.stroke.pattern.offset,n,e.layer_),fill:l,layer:e.layer_}))}if(!XU(t.label)){var f=xx.getValue(t.label.text,n,e.layer_),p=xx.getValue(t.label.align,n,e.layer_),d=xx.getValue(t.label.baseline,n,e.layer_),m=!!XU(t.label.overflow,e.layer_)||t.label.overflow;i.setText(new Fx({font:xx.getValue(t.label.font,n,e.layer_),rotateWithView:xx.getValue(t.label.rotate,n,e.layer_),scale:xx.getValue(t.label.scale,n,e.layer_),offsetX:xx.getValue(t.label.offset?t.label.offset[0]:void 0,n,e.layer_),offsetY:xx.getValue(t.label.ofsset?t.label.offset[1]:void 0,n,e.layer_),fill:new dM({color:xx.getValue(t.label.color||"#000000",n,e.layer_)}),textAlign:Object.values(a).includes(p)?p:"center",textBaseline:Object.values(s).includes(d)?d:"top",text:void 0===f?void 0:String(f),rotation:xx.getValue(t.label.rotation,n,e.layer_),overflow:xx.getValue(m,n,e.layer_)})),XU(t.label.stroke)||i.getText().setStroke(new mM({color:xx.getValue(t.label.stroke.color,n,e.layer_),width:xx.getValue(t.label.stroke.width,n,e.layer_),lineCap:xx.getValue(t.label.stroke.linecap,n,e.layer_),lineJoin:xx.getValue(t.label.stroke.linejoin,n,e.layer_),lineDash:xx.getValue(t.label.stroke.linedash,n,e.layer_),lineDashOffset:xx.getValue(t.label.stroke.linedashoffset,n,e.layer_),miterLimit:xx.getValue(t.label.stroke.miterlimit,n,e.layer_)}))}if(!XU(t.fill)){var y,g=xx.getValue(t.fill.color,n,e.layer_),v=xx.getValue(t.fill.opacity,n,e.layer_);if(v||0===v||(v=1),XU(g)||(y=new dM({color:Ox()(g).alpha(v).css()})),XU(t.fill.pattern))i.setFill(y);else{var _="rgba(0,0,0,1)";if(!XU(t.fill.pattern.color)){var b=xx.getValue(t.fill.pattern.opacity,n,e.layer_)||1;b||0===b||(b=1),_=Ox()(t.fill.pattern.color).alpha(b).css()}i.setFill(new yE({pattern:(xx.getValue(t.fill.pattern.name,n,e.layer_)||"").toLowerCase(),color:_,size:xx.getValue(t.fill.pattern.size,n,e.layer_),spacing:xx.getValue(t.fill.pattern.spacing,n,e.layer_),image:"Image"===xx.getValue(t.fill.pattern.name,n,e.layer_)?new vS({src:xx.getValue(t.fill.pattern.src,n,e.layer_)}):void 0,angle:xx.getValue(t.fill.pattern.rotation,n,e.layer_),scale:xx.getValue(t.fill.pattern.scale,n,e.layer_),offset:xx.getValue(t.fill.pattern.offset,n,e.layer_),fill:y,layer:e.layer_}))}}if(t.renderer){var w=new dM,M=new mM({color:xx.getValue(t.renderer.stroke.color,n,e.layer_),width:xx.getValue(t.renderer.stroke.width,n,e.layer_)});i.setRenderer((function(r,i,o){var a=new Image,s=xx.getValue(t.renderer.property,n,e.layer_),u=n.get(s).src?n.get(s).src:n.get(s);a.onload=function(){n.set(s,a)},a.src=u;var l=i.context,c=i.geometry.clone();c.setCoordinates(r);var h=c.getExtent(),f=dn(h),p=cn(h),d=i.feature.get(s).src?i.feature.get(s):void 0;if(!(!d||p<1||f<1)){l.save();var m=kc(l,{pixelRatio:1});m.setFillStrokeStyle(w,M),m.drawGeometry(c),l.clip();var y=on(h),g=y[0],v=y[1];l.drawImage(d,g,v,f,p),l.restore()}}))}return[i]}}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var e=o.getCanvasSize(),r=kc(t.getContext("2d"),{size:e}),n=this.olStyleFn_()[0];XU(n.getText())||n.setText(null);var i=n.getStroke();XU(i)||XU(i.getWidth())||i.getWidth()>o.DEFAULT_WIDTH_POLYGON&&n.getStroke().setWidth(o.DEFAULT_WIDTH_POLYGON),r.setStyle(n),this.drawGeometryToCanvas(r)}},{key:"drawGeometryToCanvas",value:function(t){var e=o.getCanvasSize(),r=Math.floor(e[0]),n=Math.floor(e[1]),i=e[0]-r,a=e[1]-n;t.drawGeometry(new Ls([[[i+3,a+3],[r-3,a+3],[r-3,n-3],[i+3,n-3],[i+3,a+3]]]))}}])&&SH(e.prototype,r),n&&SH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(xx);TH.DEFAULT_WIDTH_POLYGON=3;var IH=TH,LH=function(t,e,r){return function t(e,r,n){var i=null;if(!XU(e))if(HU(e))for(var o=0;o<e.length&&null===i;o+=1)i=t(e[o],r,n);else if(JU(e)&&(XU(r)||e.Identifier===r)){i=e.WGS84BoundingBox;var a=Vn("EPSG:4326"),s=Vn(n);i=Zy.transformExtent(i,a,s)}return i}(t.Layer,e,r)};function RH(t){return(RH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var CH=/MBTiles\*.*/,AH=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(QU(e)&&t.test(e)){var l=e.split("*")[o];XU(l)||(s=u[n](l))}else JU(e)?s=e[r]:Af("El parámetro no es de un tipo soportado: ".concat(RH(e)));return QU(s)&&(s=s.trim()),!0===a&&(s=tq(s)),s}},kH=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e,r=AH({parameter:t,type:"string",attr:"name"}),n=AH({parameter:t,type:"string",attr:"url"}),i=AH({parameter:t,type:"string",attr:"legend"});return(CH.test(t)||JU(t))&&(e={type:"MBTiles",name:r(CH,3),url:n(CH,2),legend:i(CH,1)}),e})),HU(t)||(e=e[0]),e};function NH(t){return(NH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var jH=/MBTiles\*. */,FH=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(QU(e)&&t.test(e)){var l=e.split("*")[o];XU(l)||(s=u[n](l))}else JU(e)?s=e[r]:Af("El parámetro no es de un tipo soportado: ".concat(NH(e)));return QU(s)&&(s=s.trim()),!0===a&&(s=tq(s)),s}},DH=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e,r=FH({parameter:t,type:"string",attr:"name"}),n=FH({parameter:t,type:"string",attr:"url"}),i=FH({parameter:t,type:"string",attr:"legend"});return(jH.test(t)||JU(t))&&(e={type:"MBTilesVector",name:r(jH,3),url:n(jH,2),legend:i(jH,1)}),e})),HU(t)||(e=e[0]),e};function BH(t){return(BH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var GH=/TMS\*.*/,zH=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(QU(e)&&t.test(e)){var l=e.split("*")[o];XU(l)||(s=u[n](l))}else JU(e)?s=e[r]:Af("El parámetro no es de un tipo soportado: ".concat(BH(e)));return QU(s)&&(s=s.trim()),!0===a&&(s=tq(s)),s}},UH=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e,r=Op,n=zH({parameter:t,type:"string",attr:"name"}),i=zH({parameter:t,type:"string",attr:"url"}),o=zH({parameter:t,type:"string",attr:"legend"}),a=zH({parameter:t,type:"boolean",attr:"displayInLayerSwitcher"});return(GH.test(t)||JU(t))&&(e={type:r,name:n(GH,3),url:i(GH,2),legend:o(GH,1),displayInLayerSwitcher:a(GH,4)}),e})),HU(t)||(e=e[0]),e};function qH(t){return(qH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var VH=/XYZ\*.*/,YH=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(QU(e)&&t.test(e)){var l=e.split("*")[o];XU(l)||(s=u[n](l))}else JU(e)?s=e[r]:Af("El parámetro no es de un tipo soportado: ".concat(qH(e)));return QU(s)&&(s=s.trim()),!0===a&&(s=tq(s)),s}},ZH=function(t){var e=[];XU(t)&&Af(Hf("exception").no_param);var r=t;return HU(r)||(r=[r]),e=r.map((function(t){var e,r=Ep,n=YH({parameter:t,type:"string",attr:"name"}),i=YH({parameter:t,type:"string",attr:"url"}),o=YH({parameter:t,type:"string",attr:"legend"}),a=YH({parameter:t,type:"boolean",attr:"displayInLayerSwitcher"});return(VH.test(t)||JU(t))&&(e={type:r,name:n(VH,3),url:i(VH,2),legend:o(VH,1),displayInLayerSwitcher:a(VH,4)}),e})),HU(t)||(e=e[0]),e},WH=function(t){var e=[];return t.forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),e},HH=function(t){for(var e=0;e<t.length;e+=1)if(t[e]<0)return!0;return!1},XH=function(t){for(var e=0;e<t.length;e+=1)if(0===parseFloat(t[e]))return!0;return!1},KH=function(t){for(var e=0,r=0;r<t.length;r+=1)e+=parseFloat(t[r]);return parseFloat(e/t.length)},JH=function(t){for(var e=0,r=KH(t),n=0;n<t.length;n+=1)e+=Math.pow(t[n]-r,2);return Math.sqrt(e/t.length)},QH=function(t,e){for(var r=[],n=[],i=0,o=0;o<t.length+1;o+=1){for(var a=[],s=[],u=0;u<e+1;u+=1)a.push(0),s.push(0);r.push(a),n.push(s)}for(var l=1;l<e+1;l+=1){r[1][l]=1,n[1][l]=0;for(var c=2;c<t.length+1;c+=1)n[c][l]=1/0}for(var h=2;h<t.length+1;h+=1){for(var f=0,p=0,d=0,m=0,y=1;y<h+1;y+=1){var g=h-y+1,v=t[g-1];if(d+=1,f+=v,i=(p+=v*v)-Math.pow(f,2)/d,0!==(m=g-1))for(var _=2;_<e+1;_+=1)n[h][_]>=i+n[m][_-1]&&(r[h][_]=g,n[h][_]=i+n[m][_-1])}r[h][1]=1,n[h][1]=i}return{lowerClassLimits:r,varianceCombinations:n}},$H=function(t,e,r){var n=t.length-1,i=[],o=r;for(i[r]=t[t.length-1],i[0]=t[0];o>1;)i[o-1]=t[e[n][o]-2],n=e[n][o]-1,o-=1;return i},tX=function(t){var e=t;e=e||5;var r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=WH(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));var o=QH(t,i),a=o.lowerClassLimits,s=$H(t,a,i),u=s.slice(1,s.length);return u};return Object.defineProperty(r,"name",{value:"jenks"}),r},eX=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=WH(t),i=n.length<=r?n.length-1:r,o=t.length;t.sort((function(t,e){return t-e}));for(var a=o/i,s=[],u=0;u<i;u+=1){var l=t.slice(u*a,(u+1)*a);u===i-1&&(l=t.slice(u*a));var c=a%1==0?l.slice(-1)[0]:l.slice(0)[0];0===u&&a%1!=0||s.push(c)}return a%1!=0&&s.push(t[t.length-1]),s};return Object.defineProperty(r,"name",{value:"quantile"}),r},rX=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=WH(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));for(var o=t[0],a=t[t.length-1],s=(a-o)/i,u=[],l=o,c=0;c<i;c+=1)l+=s,c===i-1&&(l=a),u.push(l);return u};return Object.defineProperty(r,"name",{value:"equal_interval"}),r},nX=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=WH(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));var o=t[t.length-1],a=t[0],s=JH(t),u=KH(t),l=[];if(i%2==1){var c=Math.floor(i/2),h=c+1;l[c]=u-s,l[h]=u+s;for(var f=c-1;f>0;f-=1)l[f]=l[f+1]-s;for(var p=h+1;p<i;p+=1)l[p]=l[p-1]+s}else{var d=i/2;l[d]=u;for(var m=d-1;m>0;m-=1)l[m]=l[m+1]-s;for(var y=d+1;y<i;y+=1)l[y]=l[y-1]+s}l[0]=a,l[i]=o;var g=l.slice(1,l.length+1);return g};return Object.defineProperty(r,"name",{value:"media_sigma"}),r},iX=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=WH(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));for(var o=0,a=1;a<=i;a+=1)o+=a;for(var s=t[0],u=t[t.length-1],l=(u-s)/o,c=[],h=s,f=1;f<=i;f+=1)h+=f*l,f===i&&(h=u),c.push(h);return c};return Object.defineProperty(r,"name",{value:"arithmetic_progression"}),r},oX=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=WH(t);if(HH(n)||XH(n))return[];var i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));for(var o=t[0],a=t[t.length-1],s=Math.log(o)/Math.LN10,u=Math.log(a)/Math.LN10,l=(u-s)/i,c=[],h=s,f=1;f<i;f+=1)h+=l,c.push(Math.pow(10,h));return c.push(a),c};return Object.defineProperty(r,"name",{value:"geometric_progression"}),r},aX=function(t,e){return new dV((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)<=e}),{cqlFilter:"".concat(t," <= '").concat(e,"'")})};function sX(t){return(sX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uX(t){return function(t){if(Array.isArray(t))return hX(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||cX(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lX(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||cX(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cX(t,e){if(t){if("string"==typeof t)return hX(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hX(t,e):void 0}}function hX(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==sX(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===sX(o)?o:String(o)),n)}var i,o}function dX(){return(dX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=mX(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function mX(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_X(t)););return t}function yX(t,e){return(yX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gX(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_X(t);if(e){var i=_X(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vX(this,r)}}function vX(t,e){if(e&&("object"===sX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _X(t){return(_X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bX=function(t){var e=Math.pow(10,2);return Math.round(t*e)/e},wX=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yX(t,e)}(o,t);var e,r,n,i=gX(o);function o(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tX(),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return fX(this,o),r=i.call(this,a,{}),XU(t)&&Af(Hf("exception").no_attr_name),r.attributeName_=t,r.choroplethStyles_=e,r.quantification_=n,r.breakPoints_=[],r.borderColor=a.borderColor,r}return e=o,n=[{key:"DEFAULT_STYLE",value:function(t,e){return new kO({point:{fill:{color:t,opacity:1},stroke:{color:e||"black",width:1},radius:5},line:{fill:{color:t,opacity:1},stroke:{color:e||"black",width:1}},polygon:{fill:{color:t,opacity:1},stroke:{color:e||"black",width:1}}})}},{key:"deserialize",value:function(t){var e,r=lX(t,5),n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=n,l=i.map((function(t){return uM.deserialize(t)}));e="jenks"===o?tX():"quantile"===o?eX():"equal_interval"===o?rX():"geometric_progression"===o?oX():"arithmetic_progression"===o?iX():"media_sigma"===o?nX():Pq(o);var c=Pq(a),h=new Function(["attributeName","styles","quantification","options"],"return new M.style.Choropleth(attributeName, styles, quantification, options)")(u,l,e,c),f=s.map((function(t){return uM.deserialize(t)}));return h.add(f),h}}],(r=[{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this.refresh(),this}},{key:"getQuantification",value:function(){return this.quantification_}},{key:"setQuantification",value:function(t){if(this.quantification_=t,!this.choroplethStyles_.some((function(t){return QU(t)}))){if(this.choroplethStyles_.length<this.quantification_().length){var e=lX(this.choroplethStyles_,2),r=e[0],n=e[1],i=r.get("fill.color"),o=n.get("fill.color");XU(i)&&(i=r.get("stroke.color")),XU(o)&&(o=n.get("stroke.color")),this.choroplethStyles_=[i,o]}else this.choroplethStyles_=this.choroplethStyles_.slice(0,this.quantification_().length);this.update_(),this.refresh()}return this}},{key:"getChoroplethStyles",value:function(){return this.choroplethStyles_}},{key:"setStyles",value:function(t){var e=t;return HU(e)||(e=[e]),this.choroplethStyles_=e,this.update_(),this.refresh(),this}},{key:"updateCanvas",value:function(){var t=this;if(!XU(this.choroplethStyles_)&&this.breakPoints_.length>0){var e=[];this.updateCanvasPromise_=new Promise((function(r,n){return t.loadCanvasImages_(0,e,r)}))}}},{key:"loadCanvasImages_",value:function(t,e,r){var n=this;if(t===this.choroplethStyles_.length)this.drawGeometryToCanvas(e,r);else{var i=-1;t>0&&(i=Number(this.breakPoints_[t-1].toFixed(1)));var o=Number(this.breakPoints_[t].toFixed(1)),a=new Image;a.crossOrigin="Anonymous",a.onload=function(){e.push({image:a,startLimit:bX(i),endLimit:bX(o)}),n.loadCanvasImages_(t+1,e,r)},a.onerror=function(){e.push({startLimit:bX(i),endLimit:bX(o)}),n.loadCanvasImages_(t+1,e,r)},this.choroplethStyles_[t].updateCanvas();var s=this.choroplethStyles_[t].toImage();QU(s)?a.src=s:s.then((function(t){a.src=t}))}}},{key:"drawGeometryToCanvas",value:function(t,e){var r=this,n=t.map((function(t){return t.image.height})),i=t.map((function(t){return t.image.width})),o=this.canvas_.getContext("2d");o.canvas.height=n.reduce((function(t,e){return t+e+5})),o.textBaseline="middle";var a=Math.max.apply(i,i);t.forEach((function(t,e){var i=t.image,s=t.startLimit,u=t.endLimit,l=0,c=n.slice(0,e);XU(c)||(l=c.reduce((function(t,e){return t+e+5})),l+=5);var h=0;XU(i)||(h=i.height,o.drawImage(i,0,l)),s<0?o.fillText(" x  <=  ".concat(u),a+5,l+h/2):"media_sigma"===r.quantification_.name&&u===Number(Math.max.apply(Math,uX(r.getValues())).toFixed(1))?o.fillText("".concat(s," <= x"),a+5,l+h/2):o.fillText("".concat(s," <  x  <=  ").concat(u),a+5,l+h/2)}),this),e()}},{key:"getValues",value:function(){var t=this,e=[];return XU(this.layer_)||this.layer_.getFeatures().forEach((function(r){try{var n=parseFloat(r.getAttribute(t.attributeName_));Number.isNaN(n)||e.push(n)}catch(t){}}),this),e}},{key:"update_",value:function(){var t,e,r=this;if(!XU(this.layer_)){var n=this.layer_.getFeatures();if(!XU(n)){var i=this.getValues();if(XU(this.choroplethStyles_)||!XU(this.choroplethStyles_)&&(QU(this.choroplethStyles_[0])||QU(this.choroplethStyles_[1]))){this.breakPoints_=this.quantification_(i);var a=this.choroplethStyles_||[];YU(a[0])&&a.push(o.START_COLOR_DEFAULT),YU(a[1])&&a.push(o.END_COLOR_DEFAULT);var s=this.breakPoints_.length,u=kq(a,s);HU(u)||(u=[u]),this.choroplethStyles_=(t=u,e=o.DEFAULT_STYLE,t.map((function(t){return e(t,r.borderColor)})))}else this.breakPoints_=this.quantification_(i,this.choroplethStyles_.length)}for(var l=function(t){new aX(r.attributeName_,r.breakPoints_[t]).execute(n).forEach((function(e){return e.setStyle(r.choroplethStyles_[t])}))},c=this.breakPoints_.length-1;c>-1;c-=1)l(c);this.updateCanvas()}}},{key:"add",value:function(t){var e=t;return HU(e)||(e=[e]),e=e.filter((function(t){return t instanceof aT||t instanceof jX})),dX(_X(o.prototype),"add",this).call(this,e)}},{key:"ORDER",get:function(){return 2}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getChoroplethStyles().map((function(t){return t.serialize()})),r=this.getQuantification();r=XU(r.name)?Oq(r):r.name;var n=Mq({},this.getOptions());return{parameters:[t,e,r,n=Oq(n),this.getStyles().map((function(t){return t.serialize()}))],deserializedMethod:"M.style.Choropleth.deserialize"}}}])&&pX(e.prototype,r),n&&pX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WP);wX.START_COLOR_DEFAULT="red",wX.END_COLOR_DEFAULT="brown";var MX=wX;function SX(t){return(SX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xX(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return EX(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EX(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EX(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function OX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==SX(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==SX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===SX(o)?o:String(o)),n)}var i,o}function TX(t,e){return(TX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function IX(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=RX(t);if(e){var i=RX(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return LX(this,r)}}function LX(t,e){if(e&&("object"===SX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function RX(t){return(RX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CX=function(t,e){var r=void 0,n=void 0,i=t.filter((function(t){return![NaN,void 0,null].includes(t.getAttribute(e))})).map((function(t){return parseInt(t.getAttribute(e),10)})),o=1;if(!XU(i))for(r=i[0],n=i[0];o<i.length-1;){var a=i[o+1];r=r<a?r:a,n=n<a?a:n,o+=1}return[r,n]},AX=function(t,e,r,n,i){var o=.57*Math.log(t);return Math.exp(o)/(Math.exp(.57*Math.log(r))/i)},kX=function(t,e,r,n,i){return(t-e)*(i-n)/(r-e)+n},NX=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TX(t,e)}(o,t);var e,r,n,i=IX(o);function o(t,e,r,n,a){var s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return OX(this,o),s=i.call(this,u,{}),XU(t)&&Af(Hf("exception").no_attr_name),s.attributeName_=t,s.minRadius_=parseInt(e,10)||5,s.maxRadius_=parseInt(r,10)||15,s.style_=n,s.proportionalFunction_=a||(!0===s.options_.flannery?AX:kX),s.maxRadius_<s.minRadius_&&(s.minRadius_=r,s.maxRadius_=e),XU(s.style_)||s.styles_.push(s.style_),s}return e=o,n=[{key:"getSizeAttribute",value:function(t){var e="radius";return XU(t.get("icon"))||(e=XU(t.get("icon.src"))?"icon.radius":"icon.scale"),e}},{key:"deserialize",value:function(t){var e=xX(t,6),r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=r,l=n,c=i,h=Pq(a),f=Pq(s),p=new Function(["attributeName","minRadius","maxRadius","style","proportionalFunction","options"],"return new M.style.Proportional(attributeName,\n    minRadius, maxRadius, style, proportionalFunction, options)")(u,l,c,void 0,h,f),d=o.map((function(t){return uM.deserialize(t)}));return p.add(d),p}}],(r=[{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"applyToFeature",value:function(t,e){var r=this.style_;if(XU(r)&&(r=t.getStyle()?t.getStyle():this.layer_.getStyle()),!XU(r)){r instanceof kO?r=new YG(r.getOptions().point):!(r instanceof YG)&&r instanceof MO||r instanceof MX?r=new YG(r.getOptions()):r instanceof WP&&(r=new YG(r.getOldStyle().getOptions()));var n=this.calculateStyle_(t,{minRadius:this.minRadius_,maxRadius:this.maxRadius_,minValue:this.minValue_,maxValue:this.maxValue_},r);t.setStyle(n)}}},{key:"update_",value:function(){var t=this;if(!XU(this.layer_)){XU(this.style_)||this.layer_.setStyle(this.style_,!0),this.layer_.getStyle()instanceof MX?this.oldStyle_=this.layer_.getStyle():this.layer_.getStyle()instanceof WP?this.oldStyle_=this.layer_.getStyle().getOldStyle():this.oldStyle_=this.layer_.getStyle();var e=xX(CX(this.layer_.getFeatures(),this.attributeName_),2);this.minValue_=e[0],this.maxValue_=e[1],this.layer_.getFeatures().forEach((function(e){return t.applyToFeature(e,1)}));var r=this.oldStyle_.clone();r instanceof MO&&(r.set("zindex",(function(e){return t.maxValue_-parseFloat(e.getAttribute(t.attributeName_))})),r.set(o.getSizeAttribute(r),(function(e){var r=o.SCALE_PROPORTION,n=e.getAttribute(t.attributeName_),i=[n,t.minValue_,t.maxValue_,t.minRadius_,t.maxRadius_],a=t.proportionalFunction_.apply(t,i);if("icon.scale"===o.getSizeAttribute(t.oldStyle_)){var s=t.minRadius_/r,u=t.maxRadius_/r,l=[n,t.minValue_,t.maxValue_,s,u];a=t.proportionalFunction_.apply(t,l)}return a})),this.updateCanvas())}}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this}},{key:"getStyle",value:function(){return console.warn("Deprecated function: Use getStyles instead."),this.style_}},{key:"setStyle",value:function(t){return this.style_=t,this.update_(),this}},{key:"getMinRadius",value:function(){return this.minRadius_}},{key:"setProportionalFunction",value:function(t){this.proportionalFunction_=t,this.update_()}},{key:"getProportionalFunction",value:function(){return this.proportionalFunction_}},{key:"setMinRadius",value:function(t){return this.minRadius_=parseInt(t,10),t>=this.maxRadius_&&Af(Hf("exception").min_gt_max),this.update_(),this}},{key:"getMaxRadius",value:function(){return this.maxRadius_}},{key:"setMaxRadius",value:function(t){return this.maxRadius_=parseInt(t,10),t<=this.minRadius_&&Af(Hf("exception").max_lt_min),this.update_(),this}},{key:"updateCanvas",value:function(){var t=this;this.updateCanvasPromise_=new Promise((function(e,r){if(!XU(t.layer_)){var n=t.styles_.filter((function(t){return t instanceof MO}))[0],i=XU(n)?t.layer_.getStyle():n;if((i=XU(i)?t.style_:i)instanceof MO){var a=i.clone();a instanceof kO?a=new YG(a.getOptions().point):a instanceof YG||(a=new YG(a.getOptions()));var s=o.getSizeAttribute(a),u=a.clone(),l=a.clone(),c=t.getMaxRadius(),h=t.getMinRadius();u.set(s,c),l.set(s,h),t.loadCanvasImage(c,u.toImage(),(function(r){t.loadCanvasImage(h,l.toImage(),(function(n){t.drawGeometryToCanvas(r,n,e)}))}))}else XU(i)||(t.canvas_=i.canvas,e())}}))}},{key:"loadCanvasImage",value:function(t,e,r){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){r({image:n,value:t})},n.onerror=function(){r({value:t})},n.src=e}},{key:"drawGeometryToCanvas",value:function(t,e,r){var n=t.image,i=e.image;this.canvas_.height=n.height+5+i.height+5;var o=this.canvas_.getContext("2d");o.textBaseline="middle";var a=0,s=0;if(XU(n)||(a=n.width+5,s=n.height/2,/^https?:\/\//i.test(n.src)?(this.canvas_.height=130,o.fillText("  max: ".concat(this.maxValue_),85,40),o.drawImage(n,0,0,80,80)):(o.fillText("  max: ".concat(this.maxValue_),a,s),o.drawImage(n,0,0))),!XU(i)){var u=0;XU(n)||(u=n.width/2-i.width/2);var l=n.height+5;s=l+i.height/2,/^https?:\/\//i.test(i.src)?(o.fillText("  min: ".concat(this.minValue_),85,105),o.drawImage(i,20,85,40,40)):(o.fillText("  min: ".concat(this.minValue_),a,s),o.drawImage(i,u,l))}r()}},{key:"calculateStyle_",value:function(t,e,r){var n=this.proportionalFunction_,i=r;if(!XU(i)){i=i.clone();var a=[e.minRadius,e.maxRadius],s=a[0],u=a[1];XU(i.get("icon.src"))||(s=e.minRadius/o.SCALE_PROPORTION,u=e.maxRadius/o.SCALE_PROPORTION);var l=t.getAttribute(this.attributeName_);null==l&&console.warn("Warning: ".concat(this.attributeName_," value is null or empty."));var c=n(l,e.minValue,e.maxValue,s,u),h=e.maxValue-parseFloat(t.getAttribute(this.attributeName_));i.set("".concat(o.getSizeAttribute(i)),c),i.set("zindex",h)}return i}},{key:"ORDER",get:function(){return 3}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getMinRadius(),r=this.getMaxRadius(),n=this.getStyles().map((function(t){return t.serialize()})),i=Oq(this.getProportionalFunction()),o=Mq({},this.getOptions());return{parameters:[t,e,r,n,i,o=Oq(o)],deserializedMethod:"M.style.Proportional.deserialize"}}}])&&PX(e.prototype,r),n&&PX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WP);NX.SCALE_PROPORTION=20;var jX=NX;function FX(t){return(FX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==FX(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==FX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===FX(o)?o:String(o)),n)}var i,o}function GX(t,e){return(GX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zX(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qX(t);if(e){var i=qX(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return UX(this,r)}}function UX(t,e){if(e&&("object"===FX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function qX(t){return(qX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var VX=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GX(t,e)}(o,t);var e,r,n,i=zX(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DX(this,o);var r=e,n=new IH(r);return t=i.call(this,r,n),XU(r)&&(r=o.DEFAULT_NULL),r=Mq({},r),t}return e=o,(r=[{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Polygon'))"}}])&&BX(e.prototype,r),n&&BX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(MO);VX.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};var YX=VX,ZX={generateStyleLayer:function(t,e){var r;switch(e.getGeometryType()){case"Point":case"MultiPoint":r=new YG(t);break;case"LineString":case"MultiLineString":r=new ZW(t);break;case"Polygon":case"MultiPolygon":r=new YX(t);break;default:return null}return r},generateRandomGenericStyle:function(t){var e=t.radius,r=Ox.a.random().hex(),n=t.strokeColor,i=t.strokeWidth;return new kO({point:{radius:e,fill:{color:r},stroke:{color:n,width:i}},line:{fill:{color:r},stroke:{color:n,width:i}},polygon:{fill:{color:r},stroke:{color:n,width:i}}})}};function WX(t){return(WX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HX(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return XX(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XX(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XX(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==WX(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==WX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===WX(o)?o:String(o)),n)}var i,o}function QX(){return(QX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=$X(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function $X(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nK(t)););return t}function tK(t,e){return(tK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eK(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=nK(t);if(e){var i=nK(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rK(this,r)}}function rK(t,e){if(e&&("object"===WX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nK(t){return(nK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iK=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tK(t,e)}(o,t);var e,r,n,i=eK(o);function o(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return KX(this,o),r=i.call(this,n,{}),XU(t)&&Af(Hf("exception").no_attr_name),r.attributeName_=t,r.categoryStyles_=e,r}return e=o,n=[{key:"deserialize",value:function(t){var e=HX(t,4),r=e[0],n=e[1],i=e[2],o=e[3],a=r,s=n;Object.keys(n).forEach((function(t){s[t]=uM.deserialize(n[t])}));var u=Pq(i),l=new Function(["attributeName","categoryStyles","options"],"return new M.style.Category(attributeName, categoryStyles, options)")(a,s,u),c=o.map((function(t){return uM.deserialize(t)}));return l.add(c),l}}],(r=[{key:"ORDER",get:function(){return 2}},{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this.refresh(),this}},{key:"getCategories",value:function(){return this.categoryStyles_}},{key:"setCategories",value:function(t){return this.categoryStyles_=t,this.update_(),this.refresh(),this}},{key:"getStyleForCategory",value:function(t){return this.categoryStyles_[t]}},{key:"setStyleForCategory",value:function(t,e){return this.categoryStyles_[t]=e,this.update_(),this.refresh(),this}},{key:"updateCanvas",value:function(){var t=this,e=[];this.updateCanvasPromise_=new Promise((function(r,n){return t.loadCanvasImages_(0,e,r)}))}},{key:"loadCanvasImages_",value:function(t,e,r){var n=this,i=this.getCategories(),o=Object.keys(i);if(t===o.length)this.drawGeometryToCanvas(e,r);else{var a=o[t],s=this.getStyleForCategory(a),u=new Image;if(u.crossOrigin="Anonymous",u.onload=function(){e.push({image:u,categoryName:a}),n.loadCanvasImages_(t+1,e,r)},u.onerror=function(){e.push({categoryName:a}),n.loadCanvasImages_(t+1,e,r)},s.updateCanvas(),s.get("icon.src"))Eq(s.get("icon.src")).then((function(t){u.width=s.get("icon.scale")?t.width*s.get("icon.scale"):t.width,u.height=s.get("icon.scale")?t.height*s.get("icon.scale"):t.height,s.toImage().then((function(t){u.src=t}))}));else{var l=s.toImage();l instanceof Promise?l.then((function(t){u.src=t})):u.src=l}}}},{key:"drawGeometryToCanvas",value:function(t,e){var r=t.map((function(t){return t.image.height})),n=t.map((function(t){return t.image.width})),i=this.canvas_.getContext("2d");i.canvas.height=r.reduce((function(t,e){return t+e+5})),i.textBaseline="middle";var o=Math.max.apply(n,n);t.forEach((function(t,e){var n=t.image,a=t.categoryName,s=0,u=r.slice(0,e);XU(u)||(s=u.reduce((function(t,e){return t+e+5})),s+=5);var l=0;if(!XU(n)){l=n.height;var c=(o-n.width)/2;i.drawImage(n,c,s,n.width,n.height)}i.fillText(a,o+5,s+l/2)})),e()}},{key:"update_",value:function(){var t=this;if(!XU(this.layer_)){(XU(this.categoryStyles_)||0===Object.keys(this.categoryStyles_).length)&&(this.categoryStyles_=this.generateRandomCategories_());var e=this.categoryStyles_.other;this.layer_.getFeatures().forEach((function(r){var n=r.getAttribute(t.attributeName_),i=t.categoryStyles_[n];XU(i)?XU(e)||r.setStyle(e):r.setStyle(i)})),this.updateCanvas()}}},{key:"add",value:function(t){var e=t;return HU(e)||(e=[e]),e=e.filter((function(t){return t instanceof aT||t instanceof jX})),QX(nK(o.prototype),"add",this).call(this,e)}},{key:"generateRandomCategories_",value:function(){var t=this,e={};return XU(this.layer_)||this.layer_.getFeatures().forEach((function(r){var n=r.getAttribute(t.attributeName_);Object.prototype.hasOwnProperty.call(e,n)||(e[n]=ZX.generateRandomGenericStyle({radius:o.RANDOM_RADIUS_OPTION,strokeColor:o.RANDOM_STROKE_COLOR_OPTION,strokeWidth:o.RANDOM_STROKE_WIDTH_OPTION}))})),e}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getCategories(),r={};Object.keys(e).forEach((function(t){r[t]=e[t].serialize()}));var n=Mq({},this.getOptions());n=Oq(n);var i=this.getStyles().map((function(t){return t.serialize()}));return{parameters:[t,r,n,i],deserializedMethod:"M.style.Category.deserialize"}}}])&&JX(e.prototype,r),n&&JX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(WP);iK.RANDOM_RADIUS_OPTION=10,iK.RANDOM_STROKE_WIDTH_OPTION=1,iK.RANDOM_STROKE_COLOR_OPTION="black";var oK=iK;function aK(t){return(aK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==aK(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==aK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===aK(o)?o:String(o)),n)}var i,o}function uK(t,e){return(uK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lK(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hK(t);if(e){var i=hK(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cK(this,r)}}function cK(t,e){if(e&&("object"===aK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hK(t){return(hK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fK=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uK(t,e)}(o,t);var e,r,n,i=lK(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;XU(e)&&(e=o.DEFAULT_NULL),e=Mq({},e);var r=new aH(e);return i.call(this,e,r)}return e=o,(r=[{key:"unapply",value:function(t){this.getImpl().unapply(t)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.FlowLine'))"}}])&&sK(e.prototype,r),n&&sK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(MO);fK.DEFAULT_NULL={color:"red",color2:"yellow",arrowColor:"",width:2,width2:25,arrow:0,lineCap:"butt"};var pK=fK;function dK(t){return(dK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==dK(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===dK(o)?o:String(o)),n)}var i,o}var yK=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"addSymbol",value:function(t,e){return fx.addDefs(t,e)}}],(r=null)&&mK(e.prototype,r),n&&mK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gK(t){return(gK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vK(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||bK(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _K(t){return function(t){if(Array.isArray(t))return wK(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||bK(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bK(t,e){if(t){if("string"==typeof t)return wK(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wK(t,e):void 0}}function wK(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==gK(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===gK(o)?o:String(o)),n)}var i,o}function xK(t,e){return(xK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EK(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=PK(t);if(e){var i=PK(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return OK(this,r)}}function OK(t,e){if(e&&("object"===gK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function PK(t){return(PK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TK=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xK(t,e)}(o,t);var e,r,n,i=EK(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};MK(this,o);var a=r,s=n;if(!t||QU(t)||KU(t)||Af(Hf("exception").no_empty),XU(a.gradient)||HU(a.gradient)||(a.gradient=[a.gradient]),a.gradient=a.gradient||o.DEFAULT_OPTIONS.gradient,a.gradient.length<2){var u=wq(a.gradient[0]);a.gradient.push(u)}a.blur=XU(a.blur)?o.DEFAULT_OPTIONS.blur:parseFloat(a.blur),a.radius=XU(a.radius)?o.DEFAULT_OPTIONS.radius:parseFloat(a.radius),a.weight=t,s.opacity=Number.isNaN(parseFloat(s.opacity))?1:parseFloat(s.opacity);var l=new pH(t,a,s);return(e=i.call(this,a,l)).attribute_=t,e.options_=a,e.vendorOptions_=s,e}return e=o,n=[{key:"deserialize",value:function(t){var e=vK(t,3),r=e[0],n=e[1],i=e[2],o=r,a=Pq(n),s=Pq(i);return new Function(["attribute","options","vendorOptions"],"return new M.style.Heatmap(attribute, options, vendorOptions)")(o,a,s)}}],(r=[{key:"unapply",value:function(t){this.layer_=null,this.getImpl().unapply(t)}},{key:"getAttributeName",value:function(){return this.attribute_}},{key:"setAttributeName",value:function(t){this.attribute_=t,this.options_.weight=this.attribute_,this.update_()}},{key:"getGradient",value:function(){return this.options_.gradient}},{key:"setGradient",value:function(t){var e=t;if(HU(e)||(e=[e]),e.length<2){var r=wq(e[0]);e.push(r)}this.options_.gradient=e,this.update_()}},{key:"getRadius",value:function(){return this.options_.radius}},{key:"setRadius",value:function(t){this.options_.radius=t,this.update_()}},{key:"getBlurSize",value:function(){return this.options_.blur}},{key:"setBlurSize",value:function(t){this.options_.blur=t,this.update_()}},{key:"update_",value:function(){var t=this.getImpl();t.unapply(this.layer_),t.setOptions(this.options_,this.vendorOptions_),t.applyToLayer(this.layer_)}},{key:"drawGeometryToCanvas",value:function(){var t=[this.getImpl().getMinWeight(),this.getImpl().getMaxWeight()],e=t[0],r=t[1],n=this.canvas_.getContext("2d"),i=n.createLinearGradient(0,150,200,150),o=Sq([0,1],this.options_.gradient.length);this.options_.gradient.forEach((function(t,e){return i.addColorStop(o[e],t)})),n.fillStyle=i,n.fillRect(0,20,200,30),n.fillStyle="#000",n.font="10px sans-serif",n.fillText(e,0,60),n.fillText(r,199,60)}},{key:"updateCanvas",value:function(){this.drawGeometryToCanvas()}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getOptions();return{parameters:[t,{gradient:_K(e.gradient),blur:e.blur,radius:e.radius,weight:e.weight},this.vendorOptions_],deserializedMethod:"M.style.Heatmap.deserialize"}}}])&&SK(e.prototype,r),n&&SK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(uM);TK.DEFAULT_OPTIONS={gradient:["#00f","#0ff","#0f0","#ff0","#f00"],blur:15,radius:10};var IK=TK,LK=function(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1};class RK{constructor(t,e){this.low=e||0,this.high=t||0}static toBinaryString(t){let e,r="";for(e=2147483648;e>0;e>>>=1)r+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)r+=(t.low&e)===e?"1":"0";return r}}function CK(){}function AK(){}CK.NaN=NaN,CK.isNaN=t=>Number.isNaN(t),CK.isInfinite=t=>!Number.isFinite(t),CK.MAX_VALUE=Number.MAX_VALUE,CK.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,CK.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){const t=new Float64Array(1),e=new Int32Array(t.buffer);CK.doubleToLongBits=function(r){t[0]=r;let n=0|e[0],i=0|e[1];return 2146435072==(2146435072&i)&&0!=(1048575&i)&&0!==n&&(n=0,i=2146959360),new RK(i,n)},CK.longBitsToDouble=function(r){return e[0]=r.low,e[1]=r.high,t[0]}}():function(){const t=Math.log2,e=Math.floor,r=Math.pow,n=function(){for(let n=53;n>0;n--){const i=r(2,n)-1;if(e(t(i))+1===n)return i}return 0}();CK.doubleToLongBits=function(i){let o,a,s,u,l,c,h,f,p;if(i<0||1/i===Number.NEGATIVE_INFINITY?(c=1<<31,i=-i):c=0,0===i)return p=0,f=c,new RK(f,p);if(i===1/0)return p=0,f=2146435072|c,new RK(f,p);if(i!=i)return p=0,f=2146959360,new RK(f,p);if(u=0,p=0,o=e(i),o>1)if(o<=n)u=e(t(o)),u<=20?(p=0,f=o<<20-u&1048575):(s=u-20,a=r(2,s),p=o%a<<32-s,f=o/a&1048575);else for(s=o,p=0;a=s/2,s=e(a),0!==s;)u++,p>>>=1,p|=(1&f)<<31,f>>>=1,a!==s&&(f|=524288);if(h=u+1023,l=0===o,o=i-o,u<52&&0!==o)for(s=0;;){if(a=2*o,a>=1?(o=a-1,l?(h--,l=!1):(s<<=1,s|=1,u++)):(o=a,l?0==--h&&(u++,l=!1):(s<<=1,u++)),20===u)f|=s,s=0;else if(52===u){p|=s;break}if(1===a){u<20?f|=s<<20-u:u<52&&(p|=s<<52-u);break}}return f|=h<<20,f|=c,new RK(f,p)},CK.longBitsToDouble=function(t){let e,n,i,o;const a=t.high,s=t.low,u=a&1<<31?-1:1;for(i=((2146435072&a)>>20)-1023,o=0,n=1<<19,e=1;e<=20;e++)a&n&&(o+=r(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)s&n&&(o+=r(2,-e)),n>>>=1;if(-1023===i){if(0===o)return 0*u;i=-1022}else{if(1024===i)return 0===o?u/0:NaN;o+=1}return u*o*r(2,i)}}();class kK{getM(t){if(this.hasM()){const e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return CK.NaN}setOrdinate(t,e,r){}getZ(t){return this.hasZ()?this.getOrdinate(t,2):CK.NaN}size(){}getOrdinate(t,e){}getCoordinate(){if(1===arguments.length){}else if(2===arguments.length){}}getCoordinateCopy(t){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(t){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}get interfaces_(){return[AK]}}kK.X=0,kK.Y=1,kK.Z=2,kK.M=3;class NK{create(){if(1===arguments.length){if(arguments[0]instanceof Array){}else if(LK(arguments[0],kK)){}}else if(2===arguments.length){}else if(3===arguments.length){const t=arguments[0],e=arguments[1];return this.create(t,e)}}}class jK extends Error{constructor(t){super(t),this.name=Object.keys({Exception:jK})[0]}toString(){return this.message}}class FK extends jK{constructor(t){super(t),this.name=Object.keys({IllegalArgumentException:FK})[0]}}class DK{filter(t){}}function BK(){}function GK(){}class zK{static equalsWithTolerance(t,e,r){return Math.abs(t-e)<=r}}function UK(){}class qK extends jK{constructor(t){super(t),this.name=Object.keys({RuntimeException:qK})[0]}}class VK extends qK{constructor(){super(),VK.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)qK.constructor_.call(this);else if(1===arguments.length){const t=arguments[0];qK.constructor_.call(this,t)}}}class YK{static shouldNeverReachHere(){if(0===arguments.length)YK.shouldNeverReachHere(null);else if(1===arguments.length){const t=arguments[0];throw new VK("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length){const t=arguments[0];YK.isTrue(t,null)}else if(2===arguments.length){const t=arguments[1];if(!arguments[0])throw null===t?new VK:new VK(t)}}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];YK.equals(t,e,null)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];if(!e.equals(t))throw new VK("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))}}}const ZK=new ArrayBuffer(8),WK=new Float64Array(ZK),HK=new Int32Array(ZK);class XK{constructor(){XK.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)XK.constructor_.call(this,0,0);else if(1===arguments.length){const t=arguments[0];XK.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];XK.constructor_.call(this,t,e,XK.NULL_ORDINATE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this.x=t,this.y=e,this.z=r}}static hashCode(t){return WK[0]=t,HK[0]^HK[1]}getM(){return CK.NaN}setOrdinate(t,e){switch(t){case XK.X:this.x=e;break;case XK.Y:this.y=e;break;case XK.Z:this.setZ(e);break;default:throw new FK("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){const t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){const t=arguments[0],e=arguments[1];return!!zK.equalsWithTolerance(this.x,t.x,e)&&!!zK.equalsWithTolerance(this.y,t.y,e)}}setM(t){throw new FK("Invalid ordinate index: "+XK.M)}getZ(){return this.z}getOrdinate(t){switch(t){case XK.X:return this.x;case XK.Y:return this.y;case XK.Z:return this.getZ()}throw new FK("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||CK.isNaN(this.getZ())&&CK.isNaN(t.getZ()))}equals(t){return t instanceof XK&&this.equals2D(t)}equalInZ(t,e){return zK.equalsWithTolerance(this.getZ(),t.getZ(),e)}setX(t){this.x=t}compareTo(t){const e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}getX(){return this.x}setZ(t){this.z=t}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return YK.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new XK(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(t){const e=this.x-t.x,r=this.y-t.y,n=this.getZ()-t.getZ();return Math.sqrt(e*e+r*r+n*n)}getY(){return this.y}setY(t){this.y=t}distance(t){const e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}hashCode(){let t=17;return t=37*t+XK.hashCode(this.x),t=37*t+XK.hashCode(this.y),t}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}get interfaces_(){return[BK,AK,GK]}}class KK{constructor(){KK.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0===arguments.length)KK.constructor_.call(this,2);else if(1===arguments.length){const t=arguments[0];if(2!==t&&3!==t)throw new FK("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}static compare(t,e){return t<e?-1:t>e?1:CK.isNaN(t)?CK.isNaN(e)?0:-1:CK.isNaN(e)?1:0}compare(t,e){const r=KK.compare(t.x,e.x);if(0!==r)return r;const n=KK.compare(t.y,e.y);if(0!==n)return n;if(this._dimensionsToTest<=2)return 0;return KK.compare(t.getZ(),e.getZ())}get interfaces_(){return[UK]}}XK.DimensionalComparator=KK,XK.NULL_ORDINATE=CK.NaN,XK.X=0,XK.Y=1,XK.Z=2,XK.M=3;class JK{constructor(){JK.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof XK){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof JK){const t=arguments[0];this.init(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.init(t,e,r,n)}}static intersects(){if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];let i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),a=Math.min(t.x,e.x),s=Math.max(t.x,e.x);return!(a>o)&&(!(s<i)&&(i=Math.min(r.y,n.y),o=Math.max(r.y,n.y),a=Math.min(t.y,e.y),s=Math.max(t.y,e.y),!(a>o)&&!(s<i)))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof JK))return!1;const e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new JK;const e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new JK(e,n,r,i)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof XK){const t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof JK){const t=arguments[0];return!this.isNull()&&!t.isNull()&&(t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return!this.isNull()&&(t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy)}}intersects(){if(1===arguments.length){if(arguments[0]instanceof JK){const t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof XK){const t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof XK&&arguments[1]instanceof XK){const t=arguments[0],e=arguments[1];if(this.isNull())return!1;if((t.x<e.x?t.x:e.x)>this._maxx)return!1;if((t.x>e.x?t.x:e.x)<this._minx)return!1;if((t.y<e.y?t.y:e.y)>this._maxy)return!1;return!((t.y>e.y?t.y:e.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof XK){const t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof JK){const t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){const e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}copy(){return new JK(this)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(t){return!(!this.isNull()&&!t.isNull())||(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){const t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof JK){const t=arguments[0];return this.covers(t)}if(arguments[0]instanceof XK){const t=arguments[0];return this.covers(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.covers(t,e)}}centre(){return this.isNull()?null:new XK((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof XK){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof JK){const t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),r<n?(this._miny=r,this._maxy=n):(this._miny=n,this._maxy=r)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;let e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);let r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)}hashCode(){let t=17;return t=37*t+XK.hashCode(this._minx),t=37*t+XK.hashCode(this._maxx),t=37*t+XK.hashCode(this._miny),t=37*t+XK.hashCode(this._maxy),t}get interfaces_(){return[BK,GK]}}class QK{constructor(){QK.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===QK.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(QK.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let t;if(1===arguments.length){const e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){const e=arguments[0],r=arguments[1];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,r)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}static checkNotGeometryCollection(t){if(t.getTypeCode()===QK.TYPECODE_GEOMETRYCOLLECTION)throw new FK("This method does not support GeometryCollection arguments")}equal(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r}norm(){const t=this.copy();return t.normalize(),t}reverse(){const t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}copy(){const t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new JK(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){const r=t.iterator(),n=e.iterator();for(;r.hasNext()&&n.hasNext();){const t=r.next(),e=n.next(),i=t.compareTo(e);if(0!==i)return i}return r.hasNext()?1:n.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(t){return this.getTypeCode()==t.getTypeCode()}get interfaces_(){return[AK,BK,GK]}getClass(){return QK}static hasNonEmptyElements(t){for(let e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(let e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}QK.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},QK.TYPECODE_POINT=0,QK.TYPECODE_MULTIPOINT=1,QK.TYPECODE_LINESTRING=2,QK.TYPECODE_LINEARRING=3,QK.TYPECODE_MULTILINESTRING=4,QK.TYPECODE_POLYGON=5,QK.TYPECODE_MULTIPOLYGON=6,QK.TYPECODE_GEOMETRYCOLLECTION=7,QK.TYPENAME_POINT="Point",QK.TYPENAME_MULTIPOINT="MultiPoint",QK.TYPENAME_LINESTRING="LineString",QK.TYPENAME_LINEARRING="LinearRing",QK.TYPENAME_MULTILINESTRING="MultiLineString",QK.TYPENAME_POLYGON="Polygon",QK.TYPENAME_MULTIPOLYGON="MultiPolygon",QK.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",QK.geometryChangedFilter={get interfaces_(){return[DK]},filter(t){t.geometryChangedAction()}};class $K{filter(t){}}class tJ{}class eJ{static copyCoord(t,e,r,n){const i=Math.min(t.getDimension(),r.getDimension());for(let o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))}static isRing(t){const e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,kK.X)===t.getOrdinate(e-1,kK.X)&&t.getOrdinate(0,kK.Y)===t.getOrdinate(e-1,kK.Y))}static scroll(){if(2===arguments.length){if(LK(arguments[0],kK)&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];eJ.scroll(t,e,eJ.isRing(t))}else if(LK(arguments[0],kK)&&arguments[1]instanceof XK){const t=arguments[0],e=arguments[1],r=eJ.indexOf(e,t);if(r<=0)return null;eJ.scroll(t,r)}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];if(e<=0)return null;const n=t.copy(),i=r?t.size()-1:t.size();for(let r=0;r<i;r++)for(let o=0;o<t.getDimension();o++)t.setOrdinate(r,o,n.getOrdinate((e+r)%i,o));if(r)for(let e=0;e<t.getDimension();e++)t.setOrdinate(i,e,t.getOrdinate(0,e))}}static isEqual(t,e){const r=t.size();if(r!==e.size())return!1;const n=Math.min(t.getDimension(),e.getDimension());for(let i=0;i<r;i++)for(let r=0;r<n;r++){const n=t.getOrdinate(i,r),o=e.getOrdinate(i,r);if(t.getOrdinate(i,r)!==e.getOrdinate(i,r)&&(!CK.isNaN(n)||!CK.isNaN(o)))return!1}return!0}static minCoordinateIndex(){if(1===arguments.length){const t=arguments[0];return eJ.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let r=-1,n=null;for(let i=arguments[1];i<=e;i++){const e=t.getCoordinate(i);(null===n||n.compareTo(e)>0)&&(n=e,r=i)}return r}}static extend(t,e,r){const n=t.create(r,e.getDimension()),i=e.size();if(eJ.copy(e,0,n,0,i),i>0)for(let t=i;t<r;t++)eJ.copy(e,i-1,n,t,1);return n}static reverse(t){const e=t.size()-1,r=Math.trunc(e/2);for(let n=0;n<=r;n++)eJ.swap(t,n,e-n)}static swap(t,e,r){if(e===r)return null;for(let n=0;n<t.getDimension();n++){const i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}}static copy(t,e,r,n,i){for(let o=0;o<i;o++)eJ.copyCoord(t,e+o,r,n+o)}static ensureValidRing(t,e){const r=e.size();if(0===r)return e;if(r<=3)return eJ.createClosedRing(t,e,4);return e.getOrdinate(0,kK.X)===e.getOrdinate(r-1,kK.X)&&e.getOrdinate(0,kK.Y)===e.getOrdinate(r-1,kK.Y)?e:eJ.createClosedRing(t,e,r+1)}static indexOf(t,e){for(let r=0;r<e.size();r++)if(t.x===e.getOrdinate(r,kK.X)&&t.y===e.getOrdinate(r,kK.Y))return r;return-1}static createClosedRing(t,e,r){const n=t.create(r,e.getDimension()),i=e.size();eJ.copy(e,0,n,0,i);for(let t=i;t<r;t++)eJ.copy(e,0,n,t,1);return n}static minCoordinate(t){let e=null;for(let r=0;r<t.size();r++){const n=t.getCoordinate(r);(null===e||e.compareTo(n)>0)&&(e=n)}return e}}class rJ extends jK{constructor(t){super(t),this.name=Object.keys({UnsupportedOperationException:rJ})[0]}}class nJ{static isWhitespace(t){return t<=32&&t>=0||127===t}static toUpperCase(t){return t.toUpperCase()}}class iJ{static toDimensionSymbol(t){switch(t){case iJ.FALSE:return iJ.SYM_FALSE;case iJ.TRUE:return iJ.SYM_TRUE;case iJ.DONTCARE:return iJ.SYM_DONTCARE;case iJ.P:return iJ.SYM_P;case iJ.L:return iJ.SYM_L;case iJ.A:return iJ.SYM_A}throw new FK("Unknown dimension value: "+t)}static toDimensionValue(t){switch(nJ.toUpperCase(t)){case iJ.SYM_FALSE:return iJ.FALSE;case iJ.SYM_TRUE:return iJ.TRUE;case iJ.SYM_DONTCARE:return iJ.DONTCARE;case iJ.SYM_P:return iJ.P;case iJ.SYM_L:return iJ.L;case iJ.SYM_A:return iJ.A}throw new FK("Unknown dimension symbol: "+t)}}iJ.P=0,iJ.L=1,iJ.A=2,iJ.FALSE=-1,iJ.TRUE=-2,iJ.DONTCARE=-3,iJ.SYM_FALSE="F",iJ.SYM_TRUE="T",iJ.SYM_DONTCARE="*",iJ.SYM_P="0",iJ.SYM_L="1",iJ.SYM_A="2";class oJ{filter(t){}}class aJ{filter(t,e){}isDone(){}isGeometryChanged(){}}class sJ extends QK{constructor(){super(),sJ.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];QK.constructor_.call(this,e),this.init(t)}}computeEnvelopeInternal(){return this.isEmpty()?new JK:this._points.expandEnvelope(new JK)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new sJ(this._points.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof QK){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const r=t;if(this._points.size()!==r._points.size())return!1;for(let t=0;t<this._points.size();t++)if(!this.equal(this._points.getCoordinate(t),r._points.getCoordinate(t),e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<Math.trunc(this._points.size()/2);t++){const e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){const t=this._points.copy();eJ.reverse(t),this._points=t}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?iJ.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){const t=this._points.copy();return eJ.reverse(t),this.getFactory().createLineString(t)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return QK.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return class{static ofLine(t){const e=t.size();if(e<=1)return 0;let r=0;const n=new XK;t.getCoordinate(0,n);let i=n.x,o=n.y;for(let a=1;a<e;a++){t.getCoordinate(a,n);const e=n.x,s=n.y,u=e-i,l=s-o;r+=Math.sqrt(u*u+l*l),i=e,o=s}return r}}.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1===arguments.length){const t=arguments[0];let e=0,r=0;for(;e<this._points.size()&&r<t._points.size();){const n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==n)return n;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(LK(arguments[0],$K)){const t=arguments[0];for(let e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))}else if(LK(arguments[0],aJ)){const t=arguments[0];if(0===this._points.size())return null;for(let e=0;e<this._points.size()&&(t.filter(this._points,e),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(LK(arguments[0],oJ)){arguments[0].filter(this)}else if(LK(arguments[0],DK)){arguments[0].filter(this)}}getBoundary(){throw new rJ}isEquivalentClass(t){return t instanceof sJ}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return QK.TYPENAME_LINESTRING}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new FK("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(let e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}get interfaces_(){return[tJ]}}class uJ{}class lJ extends jK{constructor(t){super(t),this.name=Object.keys({IllegalStateException:lJ})[0]}}class cJ extends QK{constructor(){super(),cJ.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;const t=arguments[0],e=arguments[1];QK.constructor_.call(this,e),this.init(t)}computeEnvelopeInternal(){if(this.isEmpty())return new JK;const t=new JK;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new cJ(this._coordinates.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof QK){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return iJ.FALSE}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return QK.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}getX(){if(null===this.getCoordinate())throw new lJ("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){const t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(LK(arguments[0],$K)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(LK(arguments[0],aJ)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else if(LK(arguments[0],oJ)){arguments[0].filter(this)}else if(LK(arguments[0],DK)){arguments[0].filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return QK.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new lJ("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),YK.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}get interfaces_(){return[uJ]}}class hJ{static ofRing(){if(arguments[0]instanceof Array){const t=arguments[0];return Math.abs(hJ.ofRingSigned(t))}if(LK(arguments[0],kK)){const t=arguments[0];return Math.abs(hJ.ofRingSigned(t))}}static ofRingSigned(){if(arguments[0]instanceof Array){const t=arguments[0];if(t.length<3)return 0;let e=0;const r=t[0].x;for(let n=1;n<t.length-1;n++){const i=t[n].x-r,o=t[n+1].y;e+=i*(t[n-1].y-o)}return e/2}if(LK(arguments[0],kK)){const t=arguments[0],e=t.size();if(e<3)return 0;const r=new XK,n=new XK,i=new XK;t.getCoordinate(0,n),t.getCoordinate(1,i);const o=n.x;i.x-=o;let a=0;for(let s=1;s<e-1;s++)r.y=n.y,n.x=i.x,n.y=i.y,t.getCoordinate(s+1,i),i.x-=o,a+=n.x*(r.y-i.y);return a/2}}}class fJ{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class pJ extends jK{constructor(t){super(t),this.name=Object.keys({IndexOutOfBoundsException:pJ})[0]}}class dJ extends fJ{get(){}set(){}isEmpty(){}}class mJ extends jK{constructor(t){super(t),this.name=Object.keys({NoSuchElementException:mJ})[0]}}class yJ extends dJ{constructor(t){super(),this.array=[],t instanceof fJ&&this.addAll(t)}get interfaces_(){return[dJ,fJ]}ensureCapacity(){}add(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(t){for(const e of t)this.array.push(e)}set(t,e){const r=this.array[t];return this.array[t]=e,r}iterator(){return new gJ(this)}get(t){if(t<0||t>=this.size())throw new pJ;return this.array[t]}isEmpty(){return 0===this.array.length}sort(t){t?this.array.sort((e,r)=>t.compare(e,r)):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(t){for(let e=0,r=this.array.length;e<r;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}[Symbol.iterator](){return this.array.values()}}class gJ{constructor(t){this.arrayList=t,this.position=0}next(){if(this.position===this.arrayList.size())throw new mJ;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(t){return this.arrayList.set(this.position-1,t)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}}class vJ{static sort(){const t=arguments[0];if(1===arguments.length)t.sort((t,e)=>t.compareTo(e));else if(2===arguments.length)t.sort((t,e)=>arguments[1].compare(t,e));else if(3===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort();const r=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of r)t.push(e)}else if(4===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort((t,e)=>arguments[3].compare(t,e));const r=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of r)t.push(e)}}static asList(t){const e=new yJ;for(const r of t)e.add(r);return e}static copyOf(t,e){return t.slice(0,e)}}class _J{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class bJ{constructor(t){this.value=t}intValue(){return this.value}compareTo(t){return this.value<t?-1:this.value>t?1:0}static compare(t,e){return t<e?-1:t>e?1:0}static isNan(t){return Number.isNaN(t)}static valueOf(t){return new bJ(t)}}class wJ{constructor(){wJ.constructor_.apply(this,arguments)}static constructor_(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this.init(t)}else if(arguments[0]instanceof wJ){const t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){const t=arguments[0];wJ.constructor_.call(this,wJ.parse(t))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t,e)}}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];return wJ.determinant(wJ.valueOf(t),wJ.valueOf(e),wJ.valueOf(r),wJ.valueOf(n))}if(arguments[3]instanceof wJ&&arguments[2]instanceof wJ&&arguments[0]instanceof wJ&&arguments[1]instanceof wJ){const t=arguments[1],e=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(t.multiply(e))}}static sqr(t){return wJ.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){const t=arguments[0];return wJ.parse(t)}if("number"==typeof arguments[0]){return new wJ(arguments[0])}}static sqrt(t){return wJ.valueOf(t).sqrt()}static parse(t){let e=0;const r=t.length;for(;nJ.isWhitespace(t.charAt(e));)e++;let n=!1;if(e<r){const r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(n=!0))}const i=new wJ;let o=0,a=0,s=0,u=!1;for(;!(e>=r);){const r=t.charAt(e);if(e++,nJ.isDigit(r)){const t=r-"0";i.selfMultiply(wJ.TEN),i.selfAdd(t),o++}else{if("."!==r){if("e"===r||"E"===r){const r=t.substring(e);try{s=bJ.parseInt(r)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+r+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+r+"' at position "+e+" in string "+t)}a=o,u=!0}}let l=i;u||(a=o);const c=o-a-s;if(0===c)l=i;else if(c>0){const t=wJ.TEN.pow(c);l=i.divide(t)}else if(c<0){const t=wJ.TEN.pow(-c);l=i.multiply(t)}return n?l.negate():l}static createNaN(){return new wJ(CK.NaN,CK.NaN)}static copy(t){return new wJ(t)}static magnitude(t){const e=Math.abs(t),r=Math.log(e)/Math.log(10);let n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n}static stringOfChar(t,e){const r=new _J;for(let n=0;n<e;n++)r.append(t);return r.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){let r=this.abs(),n=wJ.magnitude(r._hi);const i=wJ.TEN.pow(n);r=r.divide(i),r.gt(wJ.TEN)?(r=r.divide(wJ.TEN),n+=1):r.lt(wJ.ONE)&&(r=r.multiply(wJ.TEN),n-=1);const o=n+1,a=new _J,s=wJ.MAX_PRINT_DIGITS-1;for(let e=0;e<=s;e++){t&&e===o&&a.append(".");const n=Math.trunc(r._hi);if(n<0)break;let i=!1,u=0;n>9?(i=!0,u="9"):u="0"+n,a.append(u),r=r.subtract(wJ.valueOf(n)).multiply(wJ.TEN),i&&r.selfAdd(wJ.TEN);let l=!0;const c=wJ.magnitude(r._hi);if(c<0&&Math.abs(c)>=s-e&&(l=!1),!l)break}return e[0]=n,a.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof wJ){const t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){const t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof wJ){const t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof wJ){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof wJ){const t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null,u=null,l=null;return a=this._hi/t,s=wJ.SPLIT*a,r=s-a,l=wJ.SPLIT*t,r=s-r,n=a-r,i=l-t,u=a*t,i=l-i,o=t-i,l=r*i-u+r*o+n*i+n*o,s=(this._hi-u-l+this._lo-a*e)/t,l=a+s,this._hi=l,this._lo=a-l+s,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof wJ){const t=arguments[0];let e=null,r=null,n=null,i=null,o=null,a=null,s=null,u=null;o=this._hi/t._hi,a=wJ.SPLIT*o,e=a-o,u=wJ.SPLIT*t._hi,e=a-e,r=o-e,n=u-t._hi,s=o*t._hi,n=u-n,i=t._hi-n,u=e*n-s+e*i+r*n+r*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,u=o+a;return new wJ(u,o-u+a)}if("number"==typeof arguments[0]){const t=arguments[0];return CK.isNaN(t)?wJ.createNaN():wJ.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return wJ.valueOf(1);let e=new wJ(this),r=wJ.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),n/=2,n>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r}ceil(){if(this.isNaN())return wJ.NaN;const t=Math.ceil(this._hi);let e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new wJ(t,e)}compareTo(t){const e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){if(this.isNaN())return this;return this.add(.5).floor()}setValue(){if(arguments[0]instanceof wJ){const t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){const t=arguments[0];return this.init(t),this}}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return wJ.valueOf(0);if(this.isNegative())return wJ.NaN;const t=1/Math.sqrt(this._hi),e=this._hi*t,r=wJ.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof wJ){const t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];let e=null,r=null,n=null,i=null,o=null,a=null;return n=this._hi+t,o=n-this._hi,i=n-o,i=t-o+(this._hi-i),a=i+this._lo,e=n+a,r=a+(n-e),this._hi=e+r,this._lo=r+(e-this._hi),this}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null,u=null,l=null;a=this._hi+t,i=this._lo+e,u=a-this._hi,l=i-this._lo,s=a-u,o=i-l,s=t-u+(this._hi-s),o=e-l+(this._lo-o),u=s+i,r=a+u,n=u+(a-r),u=o+n;const c=r+u,h=u+(r-c);return this._hi=c,this._lo=h,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof wJ){const t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null;a=wJ.SPLIT*this._hi,r=a-this._hi,s=wJ.SPLIT*t,r=a-r,n=this._hi-r,i=s-t,a=this._hi*t,i=s-i,o=t-i,s=r*i-a+r*o+n*i+n*o+(this._hi*e+this._lo*t);const u=a+s;r=a-u;const l=s+r;return this._hi=u,this._lo=l,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return wJ.NaN;const t=Math.floor(this._hi);let e=0;return t===this._hi&&(e=Math.floor(this._lo)),new wJ(t,e)}negate(){return this.isNaN()?this:new wJ(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof wJ){const t=arguments[0];return t.isNaN()?wJ.createNaN():wJ.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){const t=arguments[0];return CK.isNaN(t)?wJ.createNaN():wJ.copy(this).selfMultiply(t,0)}}isNaN(){return CK.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){const t=wJ.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1;let i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+wJ.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){const t=n-r.length;i=r+wJ.stringOfChar("0",t)+".0"}return this.isNegative()?"-"+i:i}reciprocal(){let t=null,e=null,r=null,n=null,i=null,o=null,a=null,s=null;i=1/this._hi,o=wJ.SPLIT*i,t=o-i,s=wJ.SPLIT*this._hi,t=o-t,e=i-t,r=s-this._hi,a=i*this._hi,r=s-r,n=this._hi-r,s=t*r-a+t*n+e*r+e*n,o=(1-a-s-i*this._lo)/this._hi;const u=i+o;return new wJ(u,i-u+o)}toSciNotation(){if(this.isZero())return wJ.SCI_NOT_ZERO;const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=wJ.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new lJ("Found leading zero: "+r);let i="";r.length>1&&(i=r.substring(1));const o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n}abs(){return this.isNaN()?wJ.NaN:this.isNegative()?this.negate():new wJ(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof wJ){const t=arguments[0];return wJ.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){const t=arguments[0];return wJ.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof wJ){const t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?wJ.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[GK,BK,AK]}}wJ.PI=new wJ(3.141592653589793,12246467991473532e-32),wJ.TWO_PI=new wJ(6.283185307179586,24492935982947064e-32),wJ.PI_2=new wJ(1.5707963267948966,6123233995736766e-32),wJ.E=new wJ(2.718281828459045,14456468917292502e-32),wJ.NaN=new wJ(CK.NaN,CK.NaN),wJ.EPS=123259516440783e-46,wJ.SPLIT=134217729,wJ.MAX_PRINT_DIGITS=32,wJ.TEN=wJ.valueOf(10),wJ.ONE=wJ.valueOf(1),wJ.SCI_NOT_EXPONENT_CHAR="E",wJ.SCI_NOT_ZERO="0.0E0";class MJ{static orientationIndex(t,e,r){const n=MJ.orientationIndexFilter(t,e,r);if(n<=1)return n;const i=wJ.valueOf(e.x).selfAdd(-t.x),o=wJ.valueOf(e.y).selfAdd(-t.y),a=wJ.valueOf(r.x).selfAdd(-e.x),s=wJ.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()}static signOfDet2x2(){if(arguments[3]instanceof wJ&&arguments[2]instanceof wJ&&arguments[0]instanceof wJ&&arguments[1]instanceof wJ){const t=arguments[1],e=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],i=wJ.valueOf(t),o=wJ.valueOf(e),a=wJ.valueOf(r),s=wJ.valueOf(n);return i.multiply(s).selfSubtract(o.multiply(a)).signum()}}static intersection(t,e,r,n){const i=new wJ(t.y).selfSubtract(e.y),o=new wJ(e.x).selfSubtract(t.x),a=new wJ(t.x).selfMultiply(e.y).selfSubtract(new wJ(e.x).selfMultiply(t.y)),s=new wJ(r.y).selfSubtract(n.y),u=new wJ(n.x).selfSubtract(r.x),l=new wJ(r.x).selfMultiply(n.y).selfSubtract(new wJ(n.x).selfMultiply(r.y)),c=o.multiply(l).selfSubtract(u.multiply(a)),h=s.multiply(a).selfSubtract(i.multiply(l)),f=i.multiply(u).selfSubtract(s.multiply(o)),p=c.selfDivide(f).doubleValue(),d=h.selfDivide(f).doubleValue();return CK.isNaN(p)||CK.isInfinite(p)||CK.isNaN(d)||CK.isInfinite(d)?null:new XK(p,d)}static orientationIndexFilter(t,e,r){let n=null;const i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),a=i-o;if(i>0){if(o<=0)return MJ.signum(a);n=i+o}else{if(!(i<0))return MJ.signum(a);if(o>=0)return MJ.signum(a);n=-i-o}const s=MJ.DP_SAFE_EPSILON*n;return a>=s||-a>=s?MJ.signum(a):2}static signum(t){return t>0?1:t<0?-1:0}}MJ.DP_SAFE_EPSILON=1e-15;class SJ{static index(t,e,r){return MJ.orientationIndex(t,e,r)}static isCCW(){if(arguments[0]instanceof Array){const t=arguments[0],e=t.length-1;if(e<3)throw new FK("Ring has fewer than 4 points, so orientation cannot be determined");let r=t[0],n=0;for(let i=1;i<=e;i++){const e=t[i];e.y>r.y&&(r=e,n=i)}let i=n;do{i-=1,i<0&&(i=e)}while(t[i].equals2D(r)&&i!==n);let o=n;do{o=(o+1)%e}while(t[o].equals2D(r)&&o!==n);const a=t[i],s=t[o];if(a.equals2D(r)||s.equals2D(r)||a.equals2D(s))return!1;const u=SJ.index(a,r,s);let l=null;return l=0===u?a.x>s.x:u>0,l}if(LK(arguments[0],kK)){const t=arguments[0],e=t.size()-1;if(e<3)throw new FK("Ring has fewer than 4 points, so orientation cannot be determined");let r=t.getCoordinate(0),n=0;for(let i=1;i<=e;i++){const e=t.getCoordinate(i);e.y>r.y&&(r=e,n=i)}let i=null,o=n;do{o-=1,o<0&&(o=e),i=t.getCoordinate(o)}while(i.equals2D(r)&&o!==n);let a=null,s=n;do{s=(s+1)%e,a=t.getCoordinate(s)}while(a.equals2D(r)&&s!==n);if(i.equals2D(r)||a.equals2D(r)||i.equals2D(a))return!1;const u=SJ.index(i,r,a);let l=null;return l=0===u?i.x>a.x:u>0,l}}}SJ.CLOCKWISE=-1,SJ.RIGHT=SJ.CLOCKWISE,SJ.COUNTERCLOCKWISE=1,SJ.LEFT=SJ.COUNTERCLOCKWISE,SJ.COLLINEAR=0,SJ.STRAIGHT=SJ.COLLINEAR;class xJ{}class EJ extends QK{constructor(){super(),EJ.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],r=arguments[2];if(QK.constructor_.call(this,r),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),QK.hasNullElements(e))throw new FK("holes must not contain null elements");if(t.isEmpty()&&QK.hasNonEmptyElements(e))throw new FK("shell is empty but holes are not");this._shell=t,this._holes=e}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];const t=new Array(this.getNumPoints()).fill(null);let e=-1;const r=this._shell.getCoordinates();for(let n=0;n<r.length;n++)e++,t[e]=r[n];for(let r=0;r<this._holes.length;r++){const n=this._holes[r].getCoordinates();for(let r=0;r<n.length;r++)e++,t[e]=n[r]}return t}getArea(){let t=0;t+=hJ.ofRing(this._shell.getCoordinateSequence());for(let e=0;e<this._holes.length;e++)t-=hJ.ofRing(this._holes[e].getCoordinateSequence());return t}copyInternal(){const t=this._shell.copy(),e=new Array(this._holes.length).fill(null);for(let t=0;t<this._holes.length;t++)e[t]=this._holes[t].copy();return new EJ(t,e,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;const t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal();for(let r=0;r<5;r++){const n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;const i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}let r=t.getX(0),n=t.getY(0);for(let e=1;e<=4;e++){const i=t.getX(e),o=t.getY(e);if(i!==r===(o!==n))return!1;r=i,n=o}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof QK){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const r=t,n=this._shell,i=r._shell;if(!n.equalsExact(i,e))return!1;if(this._holes.length!==r._holes.length)return!1;for(let t=0;t<this._holes.length;t++)if(!this._holes[t].equalsExact(r._holes[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(let t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);vJ.sort(this._holes)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t.isEmpty())return null;const r=t.getCoordinateSequence(),n=eJ.minCoordinateIndex(r,0,r.size()-2);eJ.scroll(r,n,!0),SJ.isCCW(r)===e&&eJ.reverse(r)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}reverseInternal(){const t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null);for(let t=0;t<e.length;t++)e[t]=this.getInteriorRingN(t).reverse();return this.getFactory().createPolygon(t,e)}getTypeCode(){return QK.TYPECODE_POLYGON}getDimension(){return 2}getLength(){let t=0;t+=this._shell.getLength();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){let t=this._shell.getNumPoints();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}convexHull(){return this.getExteriorRing().convexHull()}normalized(t,e){const r=t.copy();return this.normalize(r,e),r}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=this._shell,r=t._shell;return e.compareToSameClass(r)}if(2===arguments.length){const t=arguments[1],e=arguments[0],r=this._shell,n=e._shell,i=r.compareToSameClass(n,t);if(0!==i)return i;const o=this.getNumInteriorRing(),a=e.getNumInteriorRing();let s=0;for(;s<o&&s<a;){const r=this.getInteriorRingN(s),n=e.getInteriorRingN(s),i=r.compareToSameClass(n,t);if(0!==i)return i;s++}return s<o?1:s<a?-1:0}}apply(){if(LK(arguments[0],$K)){const t=arguments[0];this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(LK(arguments[0],aJ)){const t=arguments[0];if(this._shell.apply(t),!t.isDone())for(let e=0;e<this._holes.length&&(this._holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(LK(arguments[0],oJ)){arguments[0].filter(this)}else if(LK(arguments[0],DK)){const t=arguments[0];t.filter(this),this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(let e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return QK.TYPENAME_POLYGON}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}get interfaces_(){return[xJ]}}class OJ extends fJ{contains(){}}class PJ extends OJ{}class TJ extends PJ{constructor(t){super(),this.array=[],t instanceof fJ&&this.addAll(t)}contains(t){for(const e of this.array)if(0===e.compareTo(t))return!0;return!1}add(t){if(this.contains(t))return!1;for(let e=0,r=this.array.length;e<r;e++){if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t)}return this.array.push(t),!0}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new rJ}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new IJ(this.array)}}class IJ{constructor(t){this.array=t,this.position=0}next(){if(this.position===this.array.length)throw new mJ;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new rJ}}class LJ extends QK{constructor(){super(),LJ.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(QK.constructor_.call(this,e),null===t&&(t=[]),QK.hasNullElements(t))throw new FK("geometries must not contain null elements");this._geometries=t}}computeEnvelopeInternal(){const t=new JK;for(let e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){const t=new Array(this.getNumPoints()).fill(null);let e=-1;for(let r=0;r<this._geometries.length;r++){const n=this._geometries[r].getCoordinates();for(let r=0;r<n.length;r++)e++,t[e]=n[r]}return t}getArea(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new LJ(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof QK){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const r=t;if(this._geometries.length!==r._geometries.length)return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].equalsExact(r._geometries[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<this._geometries.length;t++)this._geometries[t].normalize();vJ.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let t=iJ.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}reverseInternal(){const t=this._geometries.length,e=new yJ(t);for(let r=0;r<t;r++)e.add(this._geometries[r].reverse());return this.getFactory().buildGeometry(e)}getTypeCode(){return QK.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let t=iJ.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=new TJ(vJ.asList(this._geometries)),r=new TJ(vJ.asList(t._geometries));return this.compare(e,r)}if(2===arguments.length){const t=arguments[1],e=arguments[0],r=this.getNumGeometries(),n=e.getNumGeometries();let i=0;for(;i<r&&i<n;){const r=this.getGeometryN(i),n=e.getGeometryN(i),o=r.compareToSameClass(n,t);if(0!==o)return o;i++}return i<r?1:i<n?-1:0}}apply(){if(LK(arguments[0],$K)){const t=arguments[0];for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(LK(arguments[0],aJ)){const t=arguments[0];if(0===this._geometries.length)return null;for(let e=0;e<this._geometries.length&&(this._geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(LK(arguments[0],oJ)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(LK(arguments[0],DK)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}}getBoundary(){return QK.checkNotGeometryCollection(this),YK.shouldNeverReachHere(),null}getGeometryType(){return QK.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}class RJ extends LJ{constructor(){super(),RJ.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];LJ.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new RJ(t,this._factory)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof QK){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){const t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return iJ.FALSE}getTypeCode(){return QK.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return QK.TYPENAME_MULTIPOINT}get interfaces_(){return[uJ]}}class CJ extends sJ{constructor(){super(),CJ.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];sJ.constructor_.call(this,t,e),this.validateConstruction()}copyInternal(){return new CJ(this._points.copy(),this._factory)}getBoundaryDimension(){return iJ.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){const t=this._points.copy();return eJ.reverse(t),this.getFactory().createLinearRing(t)}getTypeCode(){return QK.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new FK("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<CJ.MINIMUM_VALID_SIZE)throw new FK("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return QK.TYPENAME_LINEARRING}}CJ.MINIMUM_VALID_SIZE=4;class AJ extends XK{constructor(){super(),AJ.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)XK.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof AJ){const t=arguments[0];XK.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof XK){const t=arguments[0];XK.constructor_.call(this,t.x,t.y)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];XK.constructor_.call(this,t,e,XK.NULL_ORDINATE)}}setOrdinate(t,e){switch(t){case AJ.X:this.x=e;break;case AJ.Y:this.y=e;break;default:throw new FK("Invalid ordinate index: "+t)}}getZ(){return XK.NULL_ORDINATE}getOrdinate(t){switch(t){case AJ.X:return this.x;case AJ.Y:return this.y}throw new FK("Invalid ordinate index: "+t)}setZ(t){throw new FK("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new AJ(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}AJ.X=0,AJ.Y=1,AJ.Z=-1,AJ.M=-1;class kJ extends XK{constructor(){super(),kJ.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)XK.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof kJ){const t=arguments[0];XK.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof XK){const t=arguments[0];XK.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];XK.constructor_.call(this,t,e,XK.NULL_ORDINATE),this._m=r}}getM(){return this._m}setOrdinate(t,e){switch(t){case kJ.X:this.x=e;break;case kJ.Y:this.y=e;break;case kJ.M:this._m=e;break;default:throw new FK("Invalid ordinate index: "+t)}}setM(t){this._m=t}getZ(){return XK.NULL_ORDINATE}getOrdinate(t){switch(t){case kJ.X:return this.x;case kJ.Y:return this.y;case kJ.M:return this._m}throw new FK("Invalid ordinate index: "+t)}setZ(t){throw new FK("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new kJ(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}kJ.X=0,kJ.Y=1,kJ.Z=-1,kJ.M=2;class NJ extends XK{constructor(){super(),NJ.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)XK.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof NJ){const t=arguments[0];XK.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof XK){const t=arguments[0];XK.constructor_.call(this,t),this._m=this.getM()}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];XK.constructor_.call(this,t,e,r),this._m=n}}getM(){return this._m}setOrdinate(t,e){switch(t){case XK.X:this.x=e;break;case XK.Y:this.y=e;break;case XK.Z:this.z=e;break;case XK.M:this._m=e;break;default:throw new FK("Invalid ordinate index: "+t)}}setM(t){this._m=t}getOrdinate(t){switch(t){case XK.X:return this.x;case XK.Y:return this.y;case XK.Z:return this.getZ();case XK.M:return this.getM()}throw new FK("Invalid ordinate index: "+t)}copy(){return new NJ(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}class jJ{static measures(t){return t instanceof AJ?0:t instanceof kJ||t instanceof NJ?1:0}static dimension(t){return t instanceof AJ?2:t instanceof kJ?3:t instanceof NJ?4:3}static create(){if(1===arguments.length){const t=arguments[0];return jJ.create(t,0)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return 2===t?new AJ:3===t&&0===e?new XK:3===t&&1===e?new kJ:4===t&&1===e?new NJ:new XK}}}class FJ extends yJ{constructor(){super(),FJ.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&LK(arguments[0],fJ)){const t=arguments[1];let e=!1;for(let r=arguments[0].iterator();r.hasNext();)this.add(r.next(),t),e=!0;return e}return super.addAll.apply(this,arguments)}clone(){const t=super.clone.call(this);for(let e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){if(0===arguments.length)return this.toArray(FJ.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(FJ.coordArrayType);const t=this.size(),e=new Array(t).fill(null);for(let r=0;r<t;r++)e[r]=this.get(t-r-1);return e}}add(){if(1===arguments.length){const t=arguments[0];return super.add.call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof XK&&"boolean"==typeof arguments[1]){const t=arguments[0];if(!arguments[1]&&this.size()>=1){if(this.get(this.size()-1).equals2D(t))return null}super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(arguments[2])for(let r=0;r<t.length;r++)this.add(t[r],e);else for(let r=t.length-1;r>=0;r--)this.add(t[r],e);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof XK){const t=arguments[0],e=arguments[1];if(!arguments[2]){const r=this.size();if(r>0){if(t>0){if(this.get(t-1).equals2D(e))return null}if(t<r){if(this.get(t).equals2D(e))return null}}}super.add.call(this,t,e)}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];let i=1;r>n&&(i=-1);for(let o=r;o!==n;o+=i)this.add(t[o],e);return!0}}closeRing(){if(this.size()>0){const t=this.get(0).copy();this.add(t,!1)}}}FJ.coordArrayType=new Array(0).fill(null);class DJ{static log10(t){const e=Math.log(t);return CK.isInfinite(e)||CK.isNaN(e)?e:e/DJ.LOG_10}static min(t,e,r,n){let i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){const t=arguments[1],e=arguments[2];let r=arguments[0];return t>r&&(r=t),e>r&&(r=e),r}if(4===arguments.length){const t=arguments[1],e=arguments[2],r=arguments[3];let n=arguments[0];return t>n&&(n=t),e>n&&(n=e),r>n&&(n=r),n}}static average(t,e){return(t+e)/2}}DJ.LOG_10=Math.log(10);class BJ{static arraycopy(t,e,r,n,i){let o=0;for(let a=e;a<e+i;a++)r[n+o]=t[a],o++}static getProperty(t){return{"line.separator":"\n"}[t]}}class GJ{static isRing(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}static ptNotInList(t,e){for(let r=0;r<t.length;r++){const n=t[r];if(GJ.indexOf(n,e)<0)return n}return null}static scroll(t,e){const r=GJ.indexOf(e,t);if(r<0)return null;const n=new Array(t.length).fill(null);BJ.arraycopy(t,r,n,0,t.length-r),BJ.arraycopy(t,0,n,t.length-r,r),BJ.arraycopy(n,0,t,0,t.length)}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(0!==r.compare(t[n],e[n]))return!1;return!0}}static intersection(t,e){const r=new FJ;for(let n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()}static measures(t){if(null===t||0===t.length)return 0;let e=0;for(const r of t)e=Math.max(e,jJ.measures(r));return e}static hasRepeatedPoints(t){for(let e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){if(!GJ.hasRepeatedPoints(t))return t;return new FJ(t,!1).toCoordinateArray()}static reverse(t){const e=t.length-1,r=Math.trunc(e/2);for(let n=0;n<=r;n++){const r=t[n];t[n]=t[e-n],t[e-n]=r}}static removeNull(t){let e=0;for(let r=0;r<t.length;r++)null!==t[r]&&e++;const r=new Array(e).fill(null);if(0===e)return r;let n=0;for(let e=0;e<t.length;e++)null!==t[e]&&(r[n++]=t[e]);return r}static copyDeep(){if(1===arguments.length){const t=arguments[0],e=new Array(t.length).fill(null);for(let r=0;r<t.length;r++)e[r]=t[r].copy();return e}if(5===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4];for(let o=0;o<i;o++)r[n+o]=t[e+o].copy()}}static isEqualReversed(t,e){for(let r=0;r<t.length;r++){const n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0}static envelope(t){const e=new JK;for(let r=0;r<t.length;r++)e.expandToInclude(t[r]);return e}static toCoordinateArray(t){return t.toArray(GJ.coordArrayType)}static dimension(t){if(null===t||0===t.length)return 3;let e=0;for(const r of t)e=Math.max(e,jJ.dimension(r));return e}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(let r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1}static increasingDirection(t){for(let e=0;e<Math.trunc(t.length/2);e++){const r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1}static compare(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0}static minCoordinate(t){let e=null;for(let r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e}static extract(t,e,r){e=DJ.clamp(e,0,t.length);let n=(r=DJ.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);const i=new Array(n).fill(null);if(0===n)return i;let o=0;for(let n=e;n<=r;n++)i[o++]=t[n];return i}}GJ.ForwardComparator=class{compare(t,e){const r=t,n=e;return GJ.compare(r,n)}get interfaces_(){return[UK]}},GJ.BidirectionalComparator=class{compare(t,e){const r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;const i=GJ.compare(r,n);return GJ.isEqualReversed(r,n)?0:i}OLDcompare(t,e){const r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;const i=GJ.increasingDirection(r),o=GJ.increasingDirection(n);let a=i>0?0:r.length-1,s=o>0?0:r.length-1;for(let t=0;t<r.length;t++){const t=r[a].compareTo(n[s]);if(0!==t)return t;a+=i,s+=o}return 0}get interfaces_(){return[UK]}},GJ.coordArrayType=new Array(0).fill(null);class zJ{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class UJ{constructor(){UJ.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];UJ.constructor_.call(this,t,GJ.dimension(t),GJ.measures(t))}else if(Number.isInteger(arguments[0])){const t=arguments[0];this._coordinates=new Array(t).fill(null);for(let e=0;e<t;e++)this._coordinates[e]=new XK}else if(LK(arguments[0],kK)){const t=arguments[0];if(null===t)return this._coordinates=new Array(0).fill(null),null;this._dimension=t.getDimension(),this._measures=t.getMeasures(),this._coordinates=new Array(t.size()).fill(null);for(let e=0;e<this._coordinates.length;e++)this._coordinates[e]=t.getCoordinateCopy(e)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];UJ.constructor_.call(this,t,e,GJ.measures(t))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];this._coordinates=new Array(t).fill(null),this._dimension=e;for(let r=0;r<t;r++)this._coordinates[r]=jJ.create(e)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],r=arguments[2];this._dimension=e,this._measures=r,this._coordinates=null===t?new Array(0).fill(null):t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],r=arguments[2];this._coordinates=new Array(t).fill(null),this._dimension=e,this._measures=r;for(let e=0;e<t;e++)this._coordinates[e]=this.createCoordinate()}}getM(t){return this.hasM()?this._coordinates[t].getM():CK.NaN}setOrdinate(t,e,r){switch(e){case kK.X:this._coordinates[t].x=r;break;case kK.Y:this._coordinates[t].y=r;break;default:this._coordinates[t].setOrdinate(e,r)}}getZ(t){return this.hasZ()?this._coordinates[t].getZ():CK.NaN}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case kK.X:return this._coordinates[t].x;case kK.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}getCoordinate(){if(1===arguments.length){const t=arguments[0];return this._coordinates[t]}if(2===arguments.length){const t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}getCoordinateCopy(t){const e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}createCoordinate(){return jJ.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}getMeasures(){return this._measures}expandEnvelope(t){for(let e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){const t=new Array(this.size()).fill(null);for(let e=0;e<this._coordinates.length;e++){const r=this.createCoordinate();r.setCoordinate(this._coordinates[e]),t[e]=r}return new UJ(t,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){const t=new zJ(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(let e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}get interfaces_(){return[kK,GK]}}class qJ{static instance(){return qJ.instanceObject}readResolve(){return qJ.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){return new UJ(arguments[0])}if(LK(arguments[0],kK)){return new UJ(arguments[0])}}else{if(2===arguments.length){let t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new UJ(arguments[0],t)}if(3===arguments.length){let t=arguments[2],e=arguments[1]-t;return t>1&&(t=1),e>3&&(e=3),e<2&&(e=2),new UJ(arguments[0],e+t,t)}}}get interfaces_(){return[NK,GK]}}qJ.instanceObject=new qJ;class VJ extends LJ{constructor(){super(),VJ.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];LJ.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new VJ(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof QK){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return QK.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new yJ;for(let e=0;e<this._geometries.length;e++){const r=this._geometries[e].getBoundary();for(let e=0;e<r.getNumGeometries();e++)t.add(r.getGeometryN(e))}const e=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(e))}getGeometryType(){return QK.TYPENAME_MULTIPOLYGON}get interfaces_(){return[xJ]}}class YJ{get(){}put(){}size(){}values(){}entrySet(){}}class ZJ extends OJ{constructor(t){super(),this.map=new Map,t instanceof fJ&&this.addAll(t)}contains(t){const e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}add(t){const e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new rJ}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new WJ(this.map)}[Symbol.iterator](){return this.map}}class WJ{constructor(t){this.iterator=t.values();const{done:e,value:r}=this.iterator.next();this.done=e,this.value=r}next(){if(this.done)throw new mJ;const t=this.value,{done:e,value:r}=this.iterator.next();return this.done=e,this.value=r,t}hasNext(){return!this.done}remove(){throw new rJ}}class HJ extends YJ{constructor(){super(),this.map=new Map}get(t){return this.map.get(t)||null}put(t,e){return this.map.set(t,e),e}values(){const t=new yJ,e=this.map.values();let r=e.next();for(;!r.done;)t.add(r.value),r=e.next();return t}entrySet(){const t=new ZJ;return this.map.entries().forEach(e=>t.add(e)),t}size(){return this.map.size()}}class XJ{constructor(){XJ.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=XJ.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof KJ){const t=arguments[0];this._modelType=t,t===XJ.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){const t=arguments[0];this._modelType=XJ.FIXED,this.setScale(t)}else if(arguments[0]instanceof XJ){const t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof XJ))return!1;const e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){const e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return bJ.compare(r,n)}getScale(){return this._scale}isFloating(){return this._modelType===XJ.FLOATING||this._modelType===XJ.FLOATING_SINGLE}getType(){return this._modelType}toString(){let t="UNKNOWN";return this._modelType===XJ.FLOATING?t="Floating":this._modelType===XJ.FLOATING_SINGLE?t="Floating-Single":this._modelType===XJ.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){const t=arguments[0];if(CK.isNaN(t))return t;if(this._modelType===XJ.FLOATING_SINGLE){return t}return this._modelType===XJ.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof XK){const t=arguments[0];if(this._modelType===XJ.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){let t=16;return this._modelType===XJ.FLOATING?t=16:this._modelType===XJ.FLOATING_SINGLE?t=6:this._modelType===XJ.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}get interfaces_(){return[GK,BK]}}class KJ{constructor(){KJ.constructor_.apply(this,arguments)}static constructor_(){this._name=null;const t=arguments[0];this._name=t,KJ.nameToTypeMap.put(t,this)}readResolve(){return KJ.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[GK]}}KJ.nameToTypeMap=new HJ,XJ.Type=KJ,XJ.FIXED=new KJ("FIXED"),XJ.FLOATING=new KJ("FLOATING"),XJ.FLOATING_SINGLE=new KJ("FLOATING SINGLE"),XJ.maximumPreciseValue=9007199254740992;class JJ extends LJ{constructor(){super(),JJ.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];LJ.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new JJ(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof QK){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?iJ.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return QK.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new rJ}getGeometryType(){return QK.TYPENAME_MULTILINESTRING}get interfaces_(){return[tJ]}}class QJ{constructor(){QJ.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)QJ.constructor_.call(this,new XJ,0);else if(1===arguments.length){if(LK(arguments[0],NK)){const t=arguments[0];QJ.constructor_.call(this,new XJ,0,t)}else if(arguments[0]instanceof XJ){const t=arguments[0];QJ.constructor_.call(this,t,0,QJ.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];QJ.constructor_.call(this,t,e,QJ.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=r,this._SRID=e}}static toMultiPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;const e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return qJ.instance()}static toMultiLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}createEmpty(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new FK("Invalid dimension: "+t)}}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new XK(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new XK(t.getMinX(),t.getMinY()),new XK(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new XK(t.getMinX(),t.getMinY()),new XK(t.getMinX(),t.getMaxY()),new XK(t.getMaxX(),t.getMaxY()),new XK(t.getMaxX(),t.getMinY()),new XK(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(LK(arguments[0],kK)){return new sJ(arguments[0],this)}}}createMultiLineString(){if(0===arguments.length)return new JJ(null,this);if(1===arguments.length){return new JJ(arguments[0],this)}}buildGeometry(t){let e=null,r=!1,n=!1;for(let i=t.iterator();i.hasNext();){const t=i.next(),o=t.getTypeCode();null===e&&(e=o),o!==e&&(r=!0),t instanceof LJ&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(QJ.toGeometryArray(t));const i=t.iterator().next();if(t.size()>1){if(i instanceof EJ)return this.createMultiPolygon(QJ.toPolygonArray(t));if(i instanceof sJ)return this.createMultiLineString(QJ.toLineStringArray(t));if(i instanceof cJ)return this.createMultiPoint(QJ.toPointArray(t));YK.shouldNeverReachHere("Unhandled geometry type: "+i.getGeometryType())}return i}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof XK){const t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(LK(arguments[0],kK)){return new cJ(arguments[0],this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(LK(arguments[0],kK)){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof CJ){const t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length){return new EJ(arguments[0],arguments[1],this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new LJ(null,this);if(1===arguments.length){return new LJ(arguments[0],this)}}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(LK(arguments[0],kK)){return new CJ(arguments[0],this)}}}createMultiPolygon(){if(0===arguments.length)return new VJ(null,this);if(1===arguments.length){return new VJ(arguments[0],this)}}createMultiPoint(){if(0===arguments.length)return new RJ(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){return new RJ(arguments[0],this)}if(LK(arguments[0],kK)){const t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));const e=new Array(t.size()).fill(null);for(let r=0;r<t.size();r++){const n=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());eJ.copy(t,r,n,0,1),e[r]=this.createPoint(n)}return this.createMultiPoint(e)}}}get interfaces_(){return[GK]}}const $J=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class tQ{constructor(t){this.geometryFactory=t||new QJ}read(t){let e;e="string"==typeof t?JSON.parse(t):t;const r=e.type;if(!eQ[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==$J.indexOf(r)?eQ[r].call(this,e.coordinates):"GeometryCollection"===r?eQ[r].call(this,e.geometries):eQ[r].call(this,e)}write(t){const e=t.getGeometryType();if(!rQ[e])throw new Error("Geometry is not supported");return rQ[e].call(this,t)}}const eQ={Feature:function(t){const e={};for(const r in t)e[r]=t[r];if(t.geometry){const r=t.geometry.type;if(!eQ[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=eQ.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){const e={};if(t.features){e.features=[];for(let r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(new XK(...n))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new XK(t[0],t[1]),new XK(t[2],t[1]),new XK(t[2],t[3]),new XK(t[0],t[3]),new XK(t[0],t[1])])},Point:function(t){const e=new XK(...t);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(eQ.Point.call(this,t[r]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){const e=eQ.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(eQ.LineString.call(this,t[r]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){const e=eQ.coordinates.call(this,t[0]),r=this.geometryFactory.createLinearRing(e),n=[];for(let e=1;e<t.length;++e){const r=t[e],i=eQ.coordinates.call(this,r),o=this.geometryFactory.createLinearRing(i);n.push(o)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(eQ.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},rQ={coordinate:function(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:rQ.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=rQ.Point.call(this,n);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){const e=[],r=t.getCoordinates();for(let t=0;t<r.length;++t){const n=r[t];e.push(rQ.coordinate.call(this,n))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=rQ.LineString.call(this,n);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){const e=[],r=rQ.LineString.call(this,t._shell);e.push(r.coordinates);for(let r=0;r<t._holes.length;++r){const n=t._holes[r],i=rQ.LineString.call(this,n);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=rQ.Polygon.call(this,n);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=n.getGeometryType();e.push(rQ[i].call(this,n))}return{type:"GeometryCollection",geometries:e}}};class nQ{constructor(t){this.parser=new tQ(t||new QJ)}read(t){return this.parser.read(t)}}const iQ="XY",oQ="XYZ",aQ="XYM",sQ="XYZM",uQ={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},lQ=1,cQ=2,hQ=3,fQ=4,pQ=5,dQ=6,mQ={};for(const t in uQ)mQ[t]=uQ[t].toUpperCase();class yQ{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}isWhiteSpace_(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let r,n=t;if("("==t)r=cQ;else if(","==t)r=pQ;else if(")"==t)r=hQ;else if(this.isNumeric_(t)||"-"==t)r=fQ,n=this.readNumber_();else if(this.isAlpha_(t))r=lQ,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);r=dQ}return{position:e,value:n,type:r}}readNumber_(){let t;const e=this.index_;let r=!1,n=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class gQ{constructor(t,e){this.lexer_=t,this.token_,this.layout_=iQ,this.factory=e}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){this.consume_();return this.parseGeometry_()}parseGeometryLayout_(){let t=iQ;const e=this.token_;if(this.isTokenType(lQ)){const r=e.value;"Z"===r?t=oQ:"M"===r?t=aQ:"ZM"===r&&(t=sQ),t!==iQ&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(cQ)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(pQ));if(this.match(hQ))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(cQ)){const t=this.parsePoint_();if(this.match(hQ))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(cQ)){const t=this.parsePointList_();if(this.match(hQ))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(cQ)){const t=this.parseLineStringTextList_();if(this.match(hQ))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(cQ)){let t;if(t=this.token_.type==cQ?this.parsePointTextList_():this.parsePointList_(),this.match(hQ))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(cQ)){const t=this.parseLineStringTextList_();if(this.match(hQ))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(cQ)){const t=this.parsePolygonTextList_();if(this.match(hQ))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let r=0;r<e;++r){const e=this.token_;if(!this.match(fQ))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(pQ);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(pQ);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(pQ);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(pQ);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(lQ)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.factory,e=t=>new XK(...t),r=r=>{const n=r.map(r=>t.createLinearRing(r.map(e)));return n.length>1?t.createPolygon(n[0],n.slice(1)):t.createPolygon(n[0])},n=this.token_;if(this.match(lQ)){const i=n.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==i){const e=this.parseGeometryCollectionText_();return t.createGeometryCollection(e)}switch(i){case"POINT":{const e=this.parsePointText_();return e?t.createPoint(new XK(...e)):t.createPoint()}case"LINESTRING":{const r=this.parseLineStringText_().map(e);return t.createLineString(r)}case"LINEARRING":{const r=this.parseLineStringText_().map(e);return t.createLinearRing(r)}case"POLYGON":{const e=this.parsePolygonText_();return e&&0!==e.length?r(e):t.createPolygon()}case"MULTIPOINT":{const r=this.parseMultiPointText_();if(!r||0===r.length)return t.createMultiPoint();const n=r.map(e).map(e=>t.createPoint(e));return t.createMultiPoint(n)}case"MULTILINESTRING":{const r=this.parseMultiLineStringText_().map(r=>t.createLineString(r.map(e)));return t.createMultiLineString(r)}case"MULTIPOLYGON":{const e=this.parseMultiPolygonText_();if(!e||0===e.length)return t.createMultiPolygon();const n=e.map(r);return t.createMultiPolygon(n)}default:throw new Error("Invalid geometry type: "+i)}}throw new Error(this.formatErrorMessage_())}}function vQ(t){if(t.isEmpty())return"";const e=t.getCoordinate(),r=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||r.push(e.z),void 0===e.m||Number.isNaN(e.m)||r.push(e.m),r.join(" ")}function _Q(t){const e=t.getCoordinates().map(t=>{const e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e}),r=[];for(let t=0,n=e.length;t<n;++t)r.push(e[t].join(" "));return r.join(", ")}function bQ(t){const e=[];e.push("("+_Q(t.getExteriorRing())+")");for(let r=0,n=t.getNumInteriorRing();r<n;++r)e.push("("+_Q(t.getInteriorRingN(r))+")");return e.join(", ")}const wQ={Point:vQ,LineString:_Q,LinearRing:_Q,Polygon:bQ,MultiPoint:function(t){const e=[];for(let r=0,n=t.getNumGeometries();r<n;++r)e.push("("+vQ(t.getGeometryN(r))+")");return e.join(", ")},MultiLineString:function(t){const e=[];for(let r=0,n=t.getNumGeometries();r<n;++r)e.push("("+_Q(t.getGeometryN(r))+")");return e.join(", ")},MultiPolygon:function(t){const e=[];for(let r=0,n=t.getNumGeometries();r<n;++r)e.push("("+bQ(t.getGeometryN(r))+")");return e.join(", ")},GeometryCollection:function(t){const e=[];for(let r=0,n=t.getNumGeometries();r<n;++r)e.push(MQ(t.getGeometryN(r)));return e.join(", ")}};function MQ(t){let e=t.getGeometryType();const r=wQ[e];e=e.toUpperCase();const n=function(t){let e="";if(t.isEmpty())return e;const r=t.getCoordinate();return void 0===r.z||Number.isNaN(r.z)||(e+="Z"),void 0===r.m||Number.isNaN(r.m)||(e+="M"),e}(t);if(n.length>0&&(e+=" "+n),t.isEmpty())return e+" EMPTY";return e+" ("+r(t)+")"}class SQ{constructor(t){this.geometryFactory=t||new QJ,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){const e=new yQ(t);return new gQ(e,this.geometryFactory).parse()}write(t){return MQ(t)}}class xQ{constructor(t){this.parser=new SQ(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class EQ{static toLocationSymbol(t){switch(t){case EQ.EXTERIOR:return"e";case EQ.BOUNDARY:return"b";case EQ.INTERIOR:return"i";case EQ.NONE:return"-"}throw new FK("Unknown location value: "+t)}}EQ.INTERIOR=0,EQ.BOUNDARY=1,EQ.EXTERIOR=2,EQ.NONE=-1;class OQ{static intersection(t,e,r,n){const i=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,s=t.y>e.y?t.y:e.y,u=r.x<n.x?r.x:n.x,l=r.y<n.y?r.y:n.y,c=r.x>n.x?r.x:n.x,h=r.y>n.y?r.y:n.y,f=((i>u?i:u)+(a<c?a:c))/2,p=((o>l?o:l)+(s<h?s:h))/2,d=t.x-f,m=t.y-p,y=e.x-f,g=e.y-p,v=r.x-f,_=r.y-p,b=n.x-f,w=n.y-p,M=m-g,S=y-d,x=d*g-y*m,E=_-w,O=b-v,P=v*w-b*_,T=M*O-E*S,I=(S*P-O*x)/T,L=(E*x-M*P)/T;return CK.isNaN(I)||CK.isInfinite(I)||CK.isNaN(L)||CK.isInfinite(L)?null:new XK(I+f,L+p)}}class PQ{static segmentToSegment(t,e,r,n){if(t.equals(e))return PQ.pointToSegment(t,r,n);if(r.equals(n))return PQ.pointToSegment(n,t,e);let i=!1;if(JK.intersects(t,e,r,n)){const o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{const a=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),s=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?DJ.min(PQ.pointToSegment(t,r,n),PQ.pointToSegment(e,r,n),PQ.pointToSegment(r,t,e),PQ.pointToSegment(n,t,e)):0}static pointToSegment(t,e,r){if(e.x===r.x&&e.y===r.y)return t.distance(e);const n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;if(i<=0)return t.distance(e);if(i>=1)return t.distance(r);const o=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(o)*Math.sqrt(n)}static pointToLinePerpendicular(t,e,r){const n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)}static pointToSegmentString(t,e){if(0===e.length)throw new FK("Line array must contain at least one vertex");let r=t.distance(e[0]);for(let n=0;n<e.length-1;n++){const i=PQ.pointToSegment(t,e[n],e[n+1]);i<r&&(r=i)}return r}}class TQ{constructor(){TQ.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=Array(2).fill().map(()=>Array(2)),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new XK,this._intPt[1]=new XK,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static computeEdgeDistance(t,e,r){const n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y);let o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{const r=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);o=n>i?r:a,0!==o||t.equals(e)||(o=Math.max(r,a))}return YK.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}static nonRobustComputeEdgeDistance(t,e,r){const n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return YK.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){const t=new zJ;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(()=>Array(2)),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){const t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){const t=arguments[0];for(let e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==TQ.NO_INTERSECTION}getEdgeDistance(t,e){return TQ.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===TQ.COLLINEAR_INTERSECTION}toString(){return xQ.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+xQ.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(let e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}TQ.DONT_INTERSECT=0,TQ.DO_INTERSECT=1,TQ.COLLINEAR=2,TQ.NO_INTERSECTION=0,TQ.POINT_INTERSECTION=1,TQ.COLLINEAR_INTERSECTION=2;class IQ extends TQ{constructor(){super()}static nearestEndpoint(t,e,r,n){let i=t,o=PQ.pointToSegment(t,r,n),a=PQ.pointToSegment(e,r,n);return a<o&&(o=a,i=e),a=PQ.pointToSegment(r,t,e),a<o&&(o=a,i=r),a=PQ.pointToSegment(n,t,e),a<o&&(o=a,i=n),i}isInSegmentEnvelopes(t){const e=new JK(this._inputLines[0][0],this._inputLines[0][1]),r=new JK(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{const t=arguments[0],e=arguments[1],r=arguments[2];if(this._isProper=!1,JK.intersects(e,r,t)&&0===SJ.index(e,r,t)&&0===SJ.index(r,e,t))return this._isProper=!0,(t.equals(e)||t.equals(r))&&(this._isProper=!1),this._result=TQ.POINT_INTERSECTION,null;this._result=TQ.NO_INTERSECTION}}intersection(t,e,r,n){let i=this.intersectionSafe(t,e,r,n);return this.isInSegmentEnvelopes(i)||(i=new XK(IQ.nearestEndpoint(t,e,r,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}checkDD(t,e,r,n,i){const o=MJ.intersection(t,e,r,n),a=this.isInSegmentEnvelopes(o);BJ.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&BJ.out.println("Distance = "+i.distance(o))}intersectionSafe(t,e,r,n){let i=OQ.intersection(t,e,r,n);return null===i&&(i=IQ.nearestEndpoint(t,e,r,n)),i}computeCollinearIntersection(t,e,r,n){const i=JK.intersects(t,e,r),o=JK.intersects(t,e,n),a=JK.intersects(r,n,t),s=JK.intersects(r,n,e);return i&&o?(this._intPt[0]=r,this._intPt[1]=n,TQ.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=t,this._intPt[1]=e,TQ.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||o||s?TQ.COLLINEAR_INTERSECTION:TQ.POINT_INTERSECTION):i&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||a?TQ.COLLINEAR_INTERSECTION:TQ.POINT_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||i||s?TQ.COLLINEAR_INTERSECTION:TQ.POINT_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||i||a?TQ.COLLINEAR_INTERSECTION:TQ.POINT_INTERSECTION):TQ.NO_INTERSECTION}computeIntersect(t,e,r,n){if(this._isProper=!1,!JK.intersects(t,e,r,n))return TQ.NO_INTERSECTION;const i=SJ.index(t,e,r),o=SJ.index(t,e,n);if(i>0&&o>0||i<0&&o<0)return TQ.NO_INTERSECTION;const a=SJ.index(r,n,t),s=SJ.index(r,n,e);if(a>0&&s>0||a<0&&s<0)return TQ.NO_INTERSECTION;return 0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,r,n):(0===i||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(r)||t.equals2D(n)?this._intPt[0]=t:e.equals2D(r)||e.equals2D(n)?this._intPt[0]=e:0===i?this._intPt[0]=new XK(r):0===o?this._intPt[0]=new XK(n):0===a?this._intPt[0]=new XK(t):0===s&&(this._intPt[0]=new XK(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,r,n)),TQ.POINT_INTERSECTION)}}class LQ{constructor(){LQ.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;const t=arguments[0];this._p=t}static locatePointInRing(){if(arguments[0]instanceof XK&&LK(arguments[1],kK)){const t=arguments[1],e=new LQ(arguments[0]),r=new XK,n=new XK;for(let i=1;i<t.size();i++)if(t.getCoordinate(i,r),t.getCoordinate(i-1,n),e.countSegment(r,n),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof XK&&arguments[1]instanceof Array){const t=arguments[1],e=new LQ(arguments[0]);for(let r=1;r<t.length;r++){const n=t[r],i=t[r-1];if(e.countSegment(n,i),e.isOnSegment())return e.getLocation()}return e.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){let r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){let r=SJ.index(t,e,this._p);if(r===SJ.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===SJ.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==EQ.EXTERIOR}getLocation(){return this._isPointOnSegment?EQ.BOUNDARY:this._crossingCount%2==1?EQ.INTERIOR:EQ.EXTERIOR}isOnSegment(){return this._isPointOnSegment}}class RQ{static isOnLine(){if(arguments[0]instanceof XK&&LK(arguments[1],kK)){const t=arguments[0],e=arguments[1],r=new IQ,n=new XK,i=new XK,o=e.size();for(let a=1;a<o;a++)if(e.getCoordinate(a-1,n),e.getCoordinate(a,i),r.computeIntersection(t,n,i),r.hasIntersection())return!0;return!1}if(arguments[0]instanceof XK&&arguments[1]instanceof Array){const t=arguments[0],e=arguments[1],r=new IQ;for(let n=1;n<e.length;n++){const i=e[n-1],o=e[n];if(r.computeIntersection(t,i,o),r.hasIntersection())return!0}return!1}}static locateInRing(t,e){return LQ.locatePointInRing(t,e)}static isInRing(t,e){return RQ.locateInRing(t,e)!==EQ.EXTERIOR}}class CQ{isInBoundary(t){}}class AQ{isInBoundary(t){return t%2==1}get interfaces_(){return[CQ]}}class kQ{isInBoundary(t){return t>0}get interfaces_(){return[CQ]}}class NQ{isInBoundary(t){return t>1}get interfaces_(){return[CQ]}}class jQ{isInBoundary(t){return 1===t}get interfaces_(){return[CQ]}}CQ.Mod2BoundaryNodeRule=AQ,CQ.EndPointBoundaryNodeRule=kQ,CQ.MultiValentEndPointBoundaryNodeRule=NQ,CQ.MonoValentEndPointBoundaryNodeRule=jQ,CQ.MOD2_BOUNDARY_RULE=new AQ,CQ.ENDPOINT_BOUNDARY_RULE=new kQ,CQ.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new NQ,CQ.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new jQ,CQ.OGC_SFS_BOUNDARY_RULE=CQ.MOD2_BOUNDARY_RULE;class FQ{hasNext(){}next(){}remove(){}}class DQ{constructor(){DQ.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;const t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}static isAtomic(t){return!(t instanceof LJ)}next(){if(this._atStart)return this._atStart=!1,DQ.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new mJ;const t=this._parent.getGeometryN(this._index++);return t instanceof LJ?(this._subcollectionIterator=new DQ(t),this._subcollectionIterator.next()):t}remove(){throw new rJ(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}get interfaces_(){return[FQ]}}class BQ{constructor(){BQ.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=CQ.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];if(null===t)throw new FK("Rule must be non-null");this._boundaryRule=t}}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?RQ.locateInRing(t,e.getCoordinates()):EQ.EXTERIOR}intersects(t,e){return this.locate(t,e)!==EQ.EXTERIOR}updateLocationInfo(t){t===EQ.INTERIOR&&(this._isIn=!0),t===EQ.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof cJ&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof sJ)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof EJ)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof JJ){const r=e;for(let e=0;e<r.getNumGeometries();e++){const n=r.getGeometryN(e);this.updateLocationInfo(this.locateOnLineString(t,n))}}else if(e instanceof VJ){const r=e;for(let e=0;e<r.getNumGeometries();e++){const n=r.getGeometryN(e);this.updateLocationInfo(this.locateInPolygon(t,n))}}else if(e instanceof LJ){const r=new DQ(e);for(;r.hasNext();){const n=r.next();n!==e&&this.computeLocation(t,n)}}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?EQ.INTERIOR:EQ.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return EQ.EXTERIOR;const r=e.getCoordinateSequence();return e.isClosed()||!t.equals(r.getCoordinate(0))&&!t.equals(r.getCoordinate(r.size()-1))?RQ.isOnLine(t,r)?EQ.INTERIOR:EQ.EXTERIOR:EQ.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return EQ.EXTERIOR;const r=e.getExteriorRing(),n=this.locateInPolygonRing(t,r);if(n===EQ.EXTERIOR)return EQ.EXTERIOR;if(n===EQ.BOUNDARY)return EQ.BOUNDARY;for(let r=0;r<e.getNumInteriorRing();r++){const n=e.getInteriorRingN(r),i=this.locateInPolygonRing(t,n);if(i===EQ.INTERIOR)return EQ.EXTERIOR;if(i===EQ.BOUNDARY)return EQ.BOUNDARY}return EQ.INTERIOR}locate(t,e){return e.isEmpty()?EQ.EXTERIOR:e instanceof sJ?this.locateOnLineString(t,e):e instanceof EJ?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?EQ.BOUNDARY:this._numBoundaries>0||this._isIn?EQ.INTERIOR:EQ.EXTERIOR)}}class GQ{constructor(){GQ.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(()=>Array(3)),this.setAll(iJ.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){const t=arguments[0];GQ.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof GQ){const t=arguments[0];GQ.constructor_.call(this),this._matrix[EQ.INTERIOR][EQ.INTERIOR]=t._matrix[EQ.INTERIOR][EQ.INTERIOR],this._matrix[EQ.INTERIOR][EQ.BOUNDARY]=t._matrix[EQ.INTERIOR][EQ.BOUNDARY],this._matrix[EQ.INTERIOR][EQ.EXTERIOR]=t._matrix[EQ.INTERIOR][EQ.EXTERIOR],this._matrix[EQ.BOUNDARY][EQ.INTERIOR]=t._matrix[EQ.BOUNDARY][EQ.INTERIOR],this._matrix[EQ.BOUNDARY][EQ.BOUNDARY]=t._matrix[EQ.BOUNDARY][EQ.BOUNDARY],this._matrix[EQ.BOUNDARY][EQ.EXTERIOR]=t._matrix[EQ.BOUNDARY][EQ.EXTERIOR],this._matrix[EQ.EXTERIOR][EQ.INTERIOR]=t._matrix[EQ.EXTERIOR][EQ.INTERIOR],this._matrix[EQ.EXTERIOR][EQ.BOUNDARY]=t._matrix[EQ.EXTERIOR][EQ.BOUNDARY],this._matrix[EQ.EXTERIOR][EQ.EXTERIOR]=t._matrix[EQ.EXTERIOR][EQ.EXTERIOR]}}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return e===iJ.SYM_DONTCARE||(e===iJ.SYM_TRUE&&(t>=0||t===iJ.TRUE)||(e===iJ.SYM_FALSE&&t===iJ.FALSE||(e===iJ.SYM_P&&t===iJ.P||(e===iJ.SYM_L&&t===iJ.L||e===iJ.SYM_A&&t===iJ.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){const t=arguments[1];return new GQ(arguments[0]).matches(t)}}static isTrue(t){return t>=0||t===iJ.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.INTERIOR])||GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.BOUNDARY])||GQ.isTrue(this._matrix[EQ.BOUNDARY][EQ.INTERIOR])||GQ.isTrue(this._matrix[EQ.BOUNDARY][EQ.BOUNDARY]))&&this._matrix[EQ.EXTERIOR][EQ.INTERIOR]===iJ.FALSE&&this._matrix[EQ.EXTERIOR][EQ.BOUNDARY]===iJ.FALSE}isCoveredBy(){return(GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.INTERIOR])||GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.BOUNDARY])||GQ.isTrue(this._matrix[EQ.BOUNDARY][EQ.INTERIOR])||GQ.isTrue(this._matrix[EQ.BOUNDARY][EQ.BOUNDARY]))&&this._matrix[EQ.INTERIOR][EQ.EXTERIOR]===iJ.FALSE&&this._matrix[EQ.BOUNDARY][EQ.EXTERIOR]===iJ.FALSE}set(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const r=Math.trunc(e/3),n=e%3;this._matrix[r][n]=iJ.toDimensionValue(t.charAt(e))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]=r}}isContains(){return GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.INTERIOR])&&this._matrix[EQ.EXTERIOR][EQ.INTERIOR]===iJ.FALSE&&this._matrix[EQ.EXTERIOR][EQ.BOUNDARY]===iJ.FALSE}setAtLeast(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const r=Math.trunc(e/3),n=e%3;this.setAtLeast(r,n,iJ.toDimensionValue(t.charAt(e)))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]<r&&(this._matrix[t][e]=r)}}setAtLeastIfValid(t,e,r){t>=0&&e>=0&&this.setAtLeast(t,e,r)}isWithin(){return GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.INTERIOR])&&this._matrix[EQ.INTERIOR][EQ.EXTERIOR]===iJ.FALSE&&this._matrix[EQ.BOUNDARY][EQ.EXTERIOR]===iJ.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===iJ.A&&e===iJ.A||t===iJ.L&&e===iJ.L||t===iJ.L&&e===iJ.A||t===iJ.P&&e===iJ.A||t===iJ.P&&e===iJ.L)&&(this._matrix[EQ.INTERIOR][EQ.INTERIOR]===iJ.FALSE&&(GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.BOUNDARY])||GQ.isTrue(this._matrix[EQ.BOUNDARY][EQ.INTERIOR])||GQ.isTrue(this._matrix[EQ.BOUNDARY][EQ.BOUNDARY])))}isOverlaps(t,e){return t===iJ.P&&e===iJ.P||t===iJ.A&&e===iJ.A?GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.INTERIOR])&&GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.EXTERIOR])&&GQ.isTrue(this._matrix[EQ.EXTERIOR][EQ.INTERIOR]):t===iJ.L&&e===iJ.L&&(1===this._matrix[EQ.INTERIOR][EQ.INTERIOR]&&GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.EXTERIOR])&&GQ.isTrue(this._matrix[EQ.EXTERIOR][EQ.INTERIOR]))}isEquals(t,e){return t===e&&(GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.INTERIOR])&&this._matrix[EQ.INTERIOR][EQ.EXTERIOR]===iJ.FALSE&&this._matrix[EQ.BOUNDARY][EQ.EXTERIOR]===iJ.FALSE&&this._matrix[EQ.EXTERIOR][EQ.INTERIOR]===iJ.FALSE&&this._matrix[EQ.EXTERIOR][EQ.BOUNDARY]===iJ.FALSE)}toString(){const t=new zJ("123456789");for(let e=0;e<3;e++)for(let r=0;r<3;r++)t.setCharAt(3*e+r,iJ.toDimensionSymbol(this._matrix[e][r]));return t.toString()}setAll(t){for(let e=0;e<3;e++)for(let r=0;r<3;r++)this._matrix[e][r]=t}get(t,e){return this._matrix[t][e]}transpose(){let t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new FK("Should be length 9: "+t);for(let e=0;e<3;e++)for(let r=0;r<3;r++)if(!GQ.matches(this._matrix[e][r],t.charAt(3*e+r)))return!1;return!0}add(t){for(let e=0;e<3;e++)for(let r=0;r<3;r++)this.setAtLeast(e,r,t.get(e,r))}isDisjoint(){return this._matrix[EQ.INTERIOR][EQ.INTERIOR]===iJ.FALSE&&this._matrix[EQ.INTERIOR][EQ.BOUNDARY]===iJ.FALSE&&this._matrix[EQ.BOUNDARY][EQ.INTERIOR]===iJ.FALSE&&this._matrix[EQ.BOUNDARY][EQ.BOUNDARY]===iJ.FALSE}isCrosses(t,e){return t===iJ.P&&e===iJ.L||t===iJ.P&&e===iJ.A||t===iJ.L&&e===iJ.A?GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.INTERIOR])&&GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.EXTERIOR]):t===iJ.L&&e===iJ.P||t===iJ.A&&e===iJ.P||t===iJ.A&&e===iJ.L?GQ.isTrue(this._matrix[EQ.INTERIOR][EQ.INTERIOR])&&GQ.isTrue(this._matrix[EQ.EXTERIOR][EQ.INTERIOR]):t===iJ.L&&e===iJ.L&&0===this._matrix[EQ.INTERIOR][EQ.INTERIOR]}get interfaces_(){return[AK]}}class zQ{static isNorthern(t){return t===zQ.NE||t===zQ.NW}static isOpposite(t,e){if(t===e)return!1;return 2===(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;const r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r}static isInHalfPlane(t,e){return e===zQ.SE?t===zQ.SE||t===zQ.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new FK("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?zQ.NE:zQ.SE:e>=0?zQ.NW:zQ.SW}if(arguments[0]instanceof XK&&arguments[1]instanceof XK){const t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new FK("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?zQ.NE:zQ.SE:e.y>=t.y?zQ.NW:zQ.SW}}}zQ.NE=0,zQ.NW=1,zQ.SW=2,zQ.SE=3;class UQ{constructor(){UQ.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){const t=arguments[0];this._edge=t}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];UQ.constructor_.call(this,t,e,r,null)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];UQ.constructor_.call(this,t),this.init(e,r),this._label=n}}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:SJ.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){const e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){const e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){const t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=zQ.quadrant(this._dx,this._dy),YK.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}get interfaces_(){return[BK]}}class qQ{static opposite(t){return t===qQ.LEFT?qQ.RIGHT:t===qQ.RIGHT?qQ.LEFT:t}}qQ.ON=0,qQ.LEFT=1,qQ.RIGHT=2;class VQ{constructor(){VQ.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){const t=arguments[0];this.init(1),this.location[qQ.ON]=t}else if(arguments[0]instanceof VQ){const t=arguments[0];if(this.init(t.location.length),null!==t)for(let e=0;e<this.location.length;e++)this.location[e]=t.location[e]}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this.init(3),this.location[qQ.ON]=t,this.location[qQ.LEFT]=e,this.location[qQ.RIGHT]=r}}setAllLocations(t){for(let e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]!==EQ.NONE)return!1;return!0}setAllLocationsIfNull(t){for(let e=0;e<this.location.length;e++)this.location[e]===EQ.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){const t=new Array(3).fill(null);t[qQ.ON]=this.location[qQ.ON],t[qQ.LEFT]=EQ.NONE,t[qQ.RIGHT]=EQ.NONE,this.location=t}for(let e=0;e<this.location.length;e++)this.location[e]===EQ.NONE&&e<t.location.length&&(this.location[e]=t.location[e])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;const t=this.location[qQ.LEFT];this.location[qQ.LEFT]=this.location[qQ.RIGHT],this.location[qQ.RIGHT]=t}toString(){const t=new _J;return this.location.length>1&&t.append(EQ.toLocationSymbol(this.location[qQ.LEFT])),t.append(EQ.toLocationSymbol(this.location[qQ.ON])),this.location.length>1&&t.append(EQ.toLocationSymbol(this.location[qQ.RIGHT])),t.toString()}setLocations(t,e,r){this.location[qQ.ON]=t,this.location[qQ.LEFT]=e,this.location[qQ.RIGHT]=r}get(t){return t<this.location.length?this.location[t]:EQ.NONE}isArea(){return this.location.length>1}isAnyNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]===EQ.NONE)return!0;return!1}setLocation(){if(1===arguments.length){const t=arguments[0];this.setLocation(qQ.ON,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(EQ.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(let e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}class YQ{constructor(){YQ.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){const t=arguments[0];this.elt[0]=new VQ(t),this.elt[1]=new VQ(t)}else if(arguments[0]instanceof YQ){const t=arguments[0];this.elt[0]=new VQ(t.elt[0]),this.elt[1]=new VQ(t.elt[1])}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[0]=new VQ(EQ.NONE),this.elt[1]=new VQ(EQ.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this.elt[0]=new VQ(t,e,r),this.elt[1]=new VQ(t,e,r)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.elt[0]=new VQ(EQ.NONE,EQ.NONE,EQ.NONE),this.elt[1]=new VQ(EQ.NONE,EQ.NONE,EQ.NONE),this.elt[t].setLocations(e,r,n)}}static toLineLabel(t){const e=new YQ(EQ.NONE);for(let r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e}getGeometryCount(){let t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){const t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(let e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new VQ(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){const t=arguments[0];return this.elt[t].get(qQ.ON)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){const t=new _J;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){const t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setLocation(qQ.ON,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this.elt[t].setLocation(e,r)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new VQ(this.elt[t].location[0]))}}class ZQ{createEdgeEndForNext(t,e,r,n){const i=r.segmentIndex+1;if(i>=t.getNumPoints()&&null===n)return null;let o=t.getCoordinate(i);null!==n&&n.segmentIndex===r.segmentIndex&&(o=n.coord);const a=new UQ(t,r.coord,o,new YQ(t.getLabel()));e.add(a)}createEdgeEndForPrev(t,e,r,n){let i=r.segmentIndex;if(0===r.dist){if(0===i)return null;i--}let o=t.getCoordinate(i);null!==n&&n.segmentIndex>=i&&(o=n.coord);const a=new YQ(t.getLabel());a.flip();const s=new UQ(t,r.coord,o,a);e.add(s)}computeEdgeEnds(){if(1===arguments.length){const t=arguments[0],e=new yJ;for(let r=t;r.hasNext();){const t=r.next();this.computeEdgeEnds(t,e)}return e}if(2===arguments.length){const t=arguments[0],e=arguments[1],r=t.getEdgeIntersectionList();r.addEndpoints();const n=r.iterator();let i=null,o=null;if(!n.hasNext())return null;let a=n.next();do{i=o,o=a,a=null,n.hasNext()&&(a=n.next()),null!==o&&(this.createEdgeEndForPrev(t,e,o,i),this.createEdgeEndForNext(t,e,o,a))}while(null!==o)}}}class WQ{constructor(){WQ.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._label=t}}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){YK.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}}class HQ extends WQ{constructor(){super(),HQ.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;const t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new YQ(0,EQ.NONE)}isIncidentEdgeInResult(){for(let t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){let r=EQ.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){const n=t.getLocation(e);r!==EQ.BOUNDARY&&(r=n)}return r}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{const t=arguments[0],e=arguments[1];null===this._label?this._label=new YQ(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof HQ){const t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof YQ){const t=arguments[0];for(let e=0;e<2;e++){const r=this.computeMergedLocation(t,e);this._label.getLocation(e)===EQ.NONE&&this._label.setLocation(e,r)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;let e=EQ.NONE;null!==this._label&&(e=this._label.getLocation(t));let r=null;switch(e){case EQ.BOUNDARY:r=EQ.INTERIOR;break;case EQ.INTERIOR:default:r=EQ.BOUNDARY}this._label.setLocation(t,r)}}class XQ extends YJ{}function KQ(t){return null==t?0:t.color}function JQ(t){return null==t?null:t.parent}function QQ(t,e){null!==t&&(t.color=e)}function $Q(t){return null==t?null:t.left}function t$(t){return null==t?null:t.right}class e$ extends XQ{constructor(){super(),this.root_=null,this.size_=0}get(t){let e=this.root_;for(;null!==e;){const r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null}put(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let r,n,i=this.root_;do{if(r=i,n=t.compareTo(i.key),n<0)i=i.left;else{if(!(n>0)){const t=i.value;return i.value=e,t}i=i.right}}while(null!==i);const o={key:t,left:null,right:null,value:e,parent:r,color:0,getValue(){return this.value},getKey(){return this.key}};return n<0?r.left=o:r.right=o,this.fixAfterInsertion(o),this.size_++,null}fixAfterInsertion(t){let e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)JQ(t)===$Q(JQ(JQ(t)))?(e=t$(JQ(JQ(t))),1===KQ(e)?(QQ(JQ(t),0),QQ(e,0),QQ(JQ(JQ(t)),1),t=JQ(JQ(t))):(t===t$(JQ(t))&&(t=JQ(t),this.rotateLeft(t)),QQ(JQ(t),0),QQ(JQ(JQ(t)),1),this.rotateRight(JQ(JQ(t))))):(e=$Q(JQ(JQ(t))),1===KQ(e)?(QQ(JQ(t),0),QQ(e,0),QQ(JQ(JQ(t)),1),t=JQ(JQ(t))):(t===$Q(JQ(t))&&(t=JQ(t),this.rotateRight(t)),QQ(JQ(t),0),QQ(JQ(JQ(t)),1),this.rotateLeft(JQ(JQ(t)))));this.root_.color=0}values(){const t=new yJ;let e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=e$.successor(e));)t.add(e.value);return t}entrySet(){const t=new ZJ;let e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=e$.successor(e));)t.add(e);return t}rotateLeft(t){if(null!=t){const e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}rotateRight(t){if(null!=t){const e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}getFirstEntry(){let t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}static successor(t){let e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}{e=t.parent;let r=t;for(;null!==e&&r===e.right;)r=e,e=e.parent;return e}}size(){return this.size_}containsKey(t){let e=this.root_;for(;null!==e;){const r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return!0;e=e.right}}return!1}}class r${constructor(){r$.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new e$,this.nodeFact=null;const t=arguments[0];this.nodeFact=t}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof XK){const t=arguments[0];let e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof HQ){const t=arguments[0],e=this.nodeMap.get(t.getCoordinate());return null===e?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}}print(t){for(let e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){const e=new yJ;for(let r=this.iterator();r.hasNext();){const n=r.next();n.getLabel().getLocation(t)===EQ.BOUNDARY&&e.add(n)}return e}add(t){const e=t.getCoordinate();this.addNode(e).add(t)}}class n$ extends qK{constructor(t,e){super(e?t+" [ "+e+" ]":t),this.pt=e?new XK(e):void 0,this.name=Object.keys({TopologyException:n$})[0]}getCoordinate(){return this.pt}}class i${locate(t){}}class o${constructor(){o$.constructor_.apply(this,arguments)}static constructor_(){this._geom=null;const t=arguments[0];this._geom=t}static locatePointInPolygon(t,e){if(e.isEmpty())return EQ.EXTERIOR;const r=e.getExteriorRing(),n=o$.locatePointInRing(t,r);if(n!==EQ.INTERIOR)return n;for(let r=0;r<e.getNumInteriorRing();r++){const n=e.getInteriorRingN(r),i=o$.locatePointInRing(t,n);if(i===EQ.BOUNDARY)return EQ.BOUNDARY;if(i===EQ.INTERIOR)return EQ.EXTERIOR}return EQ.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?RQ.locateInRing(t,e.getCoordinates()):EQ.EXTERIOR}static containsPointInPolygon(t,e){return EQ.EXTERIOR!==o$.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof EJ)return o$.locatePointInPolygon(t,e);if(e instanceof LJ){const r=new DQ(e);for(;r.hasNext();){const n=r.next();if(n!==e){const e=o$.locateInGeometry(t,n);if(e!==EQ.EXTERIOR)return e}}}return EQ.EXTERIOR}static isContained(t,e){return EQ.EXTERIOR!==o$.locate(t,e)}static locate(t,e){return e.isEmpty()?EQ.EXTERIOR:e.getEnvelopeInternal().intersects(t)?o$.locateInGeometry(t,e):EQ.EXTERIOR}locate(t){return o$.locate(t,this._geom)}get interfaces_(){return[i$]}}class a${constructor(){a$.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new e$,this._edgeList=null,this._ptInAreaLocation=[EQ.NONE,EQ.NONE]}getNextCW(t){this.getEdges();const e=this._edgeList.indexOf(t);let r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)}propagateSideLabels(t){let e=EQ.NONE;for(let r=this.iterator();r.hasNext();){const n=r.next().getLabel();n.isArea(t)&&n.getLocation(t,qQ.LEFT)!==EQ.NONE&&(e=n.getLocation(t,qQ.LEFT))}if(e===EQ.NONE)return null;let r=e;for(let e=this.iterator();e.hasNext();){const n=e.next(),i=n.getLabel();if(i.getLocation(t,qQ.ON)===EQ.NONE&&i.setLocation(t,qQ.ON,r),i.isArea(t)){const e=i.getLocation(t,qQ.LEFT),o=i.getLocation(t,qQ.RIGHT);if(o!==EQ.NONE){if(o!==r)throw new n$("side location conflict",n.getCoordinate());e===EQ.NONE&&YK.shouldNeverReachHere("found single null side (at "+n.getCoordinate()+")"),r=e}else YK.isTrue(i.getLocation(t,qQ.LEFT)===EQ.NONE,"found single null side"),i.setLocation(t,qQ.RIGHT,r),i.setLocation(t,qQ.LEFT,r)}}}getCoordinate(){const t=this.iterator();if(!t.hasNext())return null;return t.next().getCoordinate()}print(t){BJ.out.println("EdgeEndStar:   "+this.getCoordinate());for(let e=this.iterator();e.hasNext();){e.next().print(t)}}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){const e=this.getEdges();if(e.size()<=0)return!0;const r=e.size()-1,n=e.get(r).getLabel().getLocation(t,qQ.LEFT);YK.isTrue(n!==EQ.NONE,"Found unlabelled area edge");let i=n;for(let e=this.iterator();e.hasNext();){const r=e.next().getLabel();YK.isTrue(r.isArea(t),"Found non-area edge");const n=r.getLocation(t,qQ.LEFT),o=r.getLocation(t,qQ.RIGHT);if(n===o)return!1;if(o!==i)return!1;i=n}return!0}findIndex(t){this.iterator();for(let e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new yJ(this._edgeMap.values())),this._edgeList}getLocation(t,e,r){return this._ptInAreaLocation[t]===EQ.NONE&&(this._ptInAreaLocation[t]=o$.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]}toString(){const t=new _J;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(let e=this.iterator();e.hasNext();){const r=e.next();t.append(r),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(let e=this.iterator();e.hasNext();){e.next().computeLabel(t)}}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);const e=[!1,!1];for(let t=this.iterator();t.hasNext();){const r=t.next().getLabel();for(let t=0;t<2;t++)r.isLine(t)&&r.getLocation(t)===EQ.BOUNDARY&&(e[t]=!0)}for(let r=this.iterator();r.hasNext();){const n=r.next(),i=n.getLabel();for(let r=0;r<2;r++)if(i.isAnyNull(r)){let o=EQ.NONE;if(e[r])o=EQ.EXTERIOR;else{const e=n.getCoordinate();o=this.getLocation(r,e,t)}i.setAllLocationsIfNull(r,o)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}}class s${constructor(){s$.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;const t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}}class u${constructor(){u$.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._eventType=u$.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._eventType=u$.INSERT,this._label=t,this._xValue=e,this._obj=r}}isDelete(){return this._eventType===u$.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){const e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===u$.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}get interfaces_(){return[BK]}}u$.INSERT=1,u$.DELETE=2;const l$={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return l$.sort(t),t.get(0)},sort:function(t,e){const r=t.toArray();e?vJ.sort(r,e):vJ.sort(r);const n=t.iterator();for(let t=0,e=r.length;t<e;t++)n.next(),n.set(r[t])},singletonList:function(t){const e=new yJ;return e.add(t),e}};var c$=l$;class h${constructor(){h$.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;const t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(h$.isAdjacentSegments(e,n))return!0;if(t.isClosed()){const r=t.getNumPoints()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(let r=e.iterator();r.hasNext();){const e=r.next().getCoordinate();if(t.isIntersection(e))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;const i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}}class f$ extends class{}{constructor(){super(),f$.constructor_.apply(this,arguments)}static constructor_(){this.events=new yJ,this.nOverlaps=null}prepareEvents(){c$.sort(this.events);for(let t=0;t<this.events.size();t++){const e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){const t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let e=0;e<this.events.size();e++){const r=this.events.get(e);if(r.isInsert()&&this.processOverlaps(e,r.getDeleteEventIndex(),r,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof h$&&LK(arguments[0],dJ)&&LK(arguments[1],dJ)){const t=arguments[0],e=arguments[1],r=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(r)}else if("boolean"==typeof arguments[2]&&LK(arguments[0],dJ)&&arguments[1]instanceof h$){const t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){const r=t.getMonotoneChainEdge(),n=r.getStartIndexes();for(let t=0;t<n.length-1;t++){const n=new s$(r,t),i=new u$(e,r.getMinX(t),n);this.events.add(i),this.events.add(new u$(r.getMaxX(t),i))}}processOverlaps(t,e,r,n){const i=r.getObject();for(let o=t;o<e;o++){const t=this.events.get(o);if(t.isInsert()){const e=t.getObject();r.isSameLabel(t)||(i.computeIntersections(e,n),this.nOverlaps++)}}}addEdges(){if(1===arguments.length){for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.addEdge(e,e)}}else if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const r=e.next();this.addEdge(r,t)}}}}class p${visitItem(t){}}class d${constructor(){d$.constructor_.apply(this,arguments)}static constructor_(){this._min=CK.POSITIVE_INFINITY,this._max=CK.NEGATIVE_INFINITY}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return xQ.toLineString(new XK(this._min,0),new XK(this._max,0))}}d$.NodeComparator=class{compare(t,e){const r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0}get interfaces_(){return[UK]}};class m$ extends d${constructor(){super(),m$.constructor_.apply(this,arguments)}static constructor_(){this._item=null;const t=arguments[0],e=arguments[1],r=arguments[2];this._min=t,this._max=e,this._item=r}query(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)}}class y$ extends d${constructor(){super(),y$.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;const t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)}}class g${constructor(){g$.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new yJ,this._root=null,this._level=0}buildTree(){c$.sort(this._leaves,new d$.NodeComparator);let t=this._leaves,e=null,r=new yJ;for(;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}}insert(t,e,r){if(null!==this._root)throw new lJ("Index cannot be added to once it has been queried");this._leaves.add(new m$(t,e,r))}query(t,e,r){if(this.init(),null===this._root)return null;this._root.query(t,e,r)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){BJ.out.println(xQ.toLineString(new XK(t._min,this._level),new XK(t._max,this._level)))}init(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(let r=0;r<t.size();r+=2){const n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{const n=new y$(t.get(r),t.get(r+1));e.add(n)}}}}class v${constructor(){v$.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0===arguments.length)v$.constructor_.call(this,new XK,new XK);else if(1===arguments.length){const t=arguments[0];v$.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];v$.constructor_.call(this,new XK(t,e),new XK(r,n))}}static midPoint(t,e){return new XK((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof v$){const t=arguments[0],e=SJ.index(this.p0,this.p1,t.p0),r=SJ.index(this.p0,this.p1,t.p1);return e>=0&&r>=0||e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof XK){const t=arguments[0];return SJ.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof v$))return!1;const e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){const e=new IQ;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof XK){const t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new XK(t);const e=this.projectionFactor(t),r=new XK;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof v$){const t=arguments[0],e=this.projectionFactor(t.p0),r=this.projectionFactor(t.p1);if(e>=1&&r>=1)return null;if(e<=0&&r<=0)return null;let n=this.project(t.p0);e<0&&(n=this.p0),e>1&&(n=this.p1);let i=this.project(t.p1);return r<0&&(i=this.p0),r>1&&(i=this.p1),new v$(n,i)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return PQ.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return v$.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;const e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;if(n<=0)return CK.NaN;return((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n}closestPoints(t){const e=this.intersection(t);if(null!==e)return[e,e];const r=new Array(2).fill(null);let n=CK.MAX_VALUE,i=null;const o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;const a=this.closestPoint(t.p1);i=a.distance(t.p1),i<n&&(n=i,r[0]=a,r[1]=t.p1);const s=t.closestPoint(this.p0);i=s.distance(this.p0),i<n&&(n=i,r[0]=this.p0,r[1]=s);const u=t.closestPoint(this.p1);return i=u.distance(this.p1),i<n&&(n=i,r[0]=this.p1,r[1]=u),r}closestPoint(t){const e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);return this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){const e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)}reverse(){const t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){return OQ.intersection(this.p0,this.p1,t.p0,t.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){const r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o);let s=0,u=0;if(0!==e){if(a<=0)throw new lJ("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new XK(r-u,n+s)}setCoordinates(){if(1===arguments.length){const t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){let e=this.projectionFactor(t);return e<0?e=0:(e>1||CK.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}reflect(t){const e=this.p1.getY()-this.p0.getY(),r=this.p0.getX()-this.p1.getX(),n=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),i=e*e+r*r,o=e*e-r*r,a=t.getX(),s=t.getY();return new XK((-o*a-2*e*r*s-2*e*n)/i,(o*s-2*e*r*a-2*r*n)/i)}distance(){if(arguments[0]instanceof v$){const t=arguments[0];return PQ.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof XK){const t=arguments[0];return PQ.pointToSegment(t,this.p0,this.p1)}}pointAlong(t){const e=new XK;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){let t=CK.doubleToLongBits(this.p0.x);t^=31*CK.doubleToLongBits(this.p0.y);const e=Math.trunc(t)^Math.trunc(t>>32);let r=CK.doubleToLongBits(this.p1.x);r^=31*CK.doubleToLongBits(this.p1.y);return e^(Math.trunc(r)^Math.trunc(r>>32))}get interfaces_(){return[BK,GK]}}class _${constructor(){_$.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){const t=arguments[0];this._lines=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}}static getGeometry(){if(1===arguments.length){const t=arguments[0];return t.getFactory().buildGeometry(_$.getLines(t))}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(_$.getLines(t,e))}}static getLines(){if(1===arguments.length){const t=arguments[0];return _$.getLines(t,!1)}if(2===arguments.length){if(LK(arguments[0],fJ)&&LK(arguments[1],fJ)){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const r=e.next();_$.getLines(r,t)}return t}if(arguments[0]instanceof QK&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1],r=new yJ;return t.apply(new _$(r,e)),r}if(arguments[0]instanceof QK&&LK(arguments[1],fJ)){const t=arguments[0],e=arguments[1];return t instanceof sJ?e.add(t):t.apply(new _$(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&LK(arguments[0],fJ)&&LK(arguments[1],fJ)){const t=arguments[1],e=arguments[2];for(let r=arguments[0].iterator();r.hasNext();){const n=r.next();_$.getLines(n,t,e)}return t}if("boolean"==typeof arguments[2]&&arguments[0]instanceof QK&&LK(arguments[1],fJ)){const t=arguments[1],e=arguments[2];return arguments[0].apply(new _$(t,e)),t}}}filter(t){if(this._isForcedToLineString&&t instanceof CJ){const e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof sJ&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}get interfaces_(){return[DK]}}class b${constructor(){b$.constructor_.apply(this,arguments)}static constructor_(){this._items=new yJ}visitItem(t){this._items.add(t)}getItems(){return this._items}get interfaces_(){return[p$]}}class w${constructor(){w$.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;const t=arguments[0];if(!(LK(t,xJ)||t instanceof CJ))throw new FK("Argument must be Polygonal or LinearRing");this._geom=t}locate(t){null===this._index&&(this._index=new S$(this._geom),this._geom=null);const e=new LQ(t),r=new M$(e);return this._index.query(t.y,t.y,r),e.getLocation()}get interfaces_(){return[i$]}}class M${constructor(){M$.constructor_.apply(this,arguments)}static constructor_(){this._counter=null;const t=arguments[0];this._counter=t}visitItem(t){const e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}get interfaces_(){return[p$]}}class S${constructor(){S$.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new g$;const t=arguments[0];t.isEmpty()?this._isEmpty=!0:this.init(t)}init(t){for(let e=_$.getLines(t).iterator();e.hasNext();){const t=e.next().getCoordinates();this.addLine(t)}}addLine(t){for(let e=1;e<t.length;e++){const r=new v$(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}}query(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this._isEmpty)return new yJ;const r=new b$;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];if(this._isEmpty)return null;this._index.query(t,e,r)}}}w$.SegmentVisitor=M$,w$.IntervalIndexedGeometry=S$;class x${constructor(){x$.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;const t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new XK(t),this.segmentIndex=e,this.dist=r}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){const e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}get interfaces_(){return[BK]}}class E${constructor(){E$.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new e$,this.edge=null;const t=arguments[0];this.edge=t}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();const e=this.iterator();let r=e.next();for(;e.hasNext();){const n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}}addEndpoints(){const t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){let r=e.segmentIndex-t.segmentIndex+2;const n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;const o=new Array(r).fill(null);let a=0;o[a++]=new XK(t.coord);for(let r=t.segmentIndex+1;r<=e.segmentIndex;r++)o[a++]=this.edge.pts[r];return i&&(o[a]=e.coord),new L$(o,new YQ(this.edge._label))}add(t,e,r){const n=new x$(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)}isIntersection(t){for(let e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1}}class O${constructor(){O$.constructor_.apply(this,arguments)}static constructor_(){if(this._data=null,this._size=0,0===arguments.length)O$.constructor_.call(this,10);else if(1===arguments.length){const t=arguments[0];this._data=new Array(t).fill(null)}}size(){return this._size}addAll(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),BJ.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}ensureCapacity(t){if(t<=this._data.length)return null;const e=Math.max(t,2*this._data.length);this._data=vJ.copyOf(this._data,e)}toArray(){const t=new Array(this._size).fill(null);return BJ.arraycopy(this._data,0,t,0,this._size),t}add(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}class P${static toIntArray(t){const e=new Array(t.size()).fill(null);for(let r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e}getChainStartIndices(t){let e=0;const r=new O$(Math.trunc(t.length/2));r.add(e);do{const n=this.findChainEnd(t,e);r.add(n),e=n}while(e<t.length-1);return r.toArray()}findChainEnd(t,e){const r=zQ.quadrant(t[e],t[e+1]);let n=e+1;for(;n<t.length;){if(zQ.quadrant(t[n-1],t[n])!==r)break;n++}return n-1}OLDgetChainStartIndices(t){let e=0;const r=new yJ;r.add(e);do{const n=this.findChainEnd(t,e);r.add(n),e=n}while(e<t.length-1);return P$.toIntArray(r)}}class T${constructor(){T$.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;const t=arguments[0];this.e=t,this.pts=t.getCoordinates();const e=new P$;this.startIndex=e.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(t){const e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r}getMinX(t){const e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r}computeIntersectsForChain(){if(4===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4],o=arguments[5];if(e-t==1&&i-n==1)return o.addIntersections(this.e,t,r.e,n),null;if(!this.overlaps(t,e,r,n,i))return null;const a=Math.trunc((t+e)/2),s=Math.trunc((n+i)/2);t<a&&(n<s&&this.computeIntersectsForChain(t,a,r,n,s,o),s<i&&this.computeIntersectsForChain(t,a,r,s,i,o)),a<e&&(n<s&&this.computeIntersectsForChain(a,e,r,n,s,o),s<i&&this.computeIntersectsForChain(a,e,r,s,i,o))}}overlaps(t,e,r,n,i){return JK.intersects(this.pts[t],this.pts[e],r.pts[n],r.pts[i])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(let r=0;r<this.startIndex.length-1;r++)for(let n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)}}class I${constructor(){I$.constructor_.apply(this,arguments)}static constructor_(){this._depth=Array(2).fill().map(()=>Array(3));for(let t=0;t<2;t++)for(let e=0;e<3;e++)this._depth[t][e]=I$.NULL_VALUE}static depthAtLocation(t){return t===EQ.EXTERIOR?0:t===EQ.INTERIOR?1:I$.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,r){this._depth[t][e]=r}isNull(){if(0===arguments.length){for(let t=0;t<2;t++)for(let e=0;e<3;e++)if(this._depth[t][e]!==I$.NULL_VALUE)return!1;return!0}if(1===arguments.length){const t=arguments[0];return this._depth[t][1]===I$.NULL_VALUE}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this._depth[t][e]===I$.NULL_VALUE}}normalize(){for(let t=0;t<2;t++)if(!this.isNull(t)){let e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(let r=1;r<3;r++){let n=0;this._depth[t][r]>e&&(n=1),this._depth[t][r]=n}}}getDelta(t){return this._depth[t][qQ.RIGHT]-this._depth[t][qQ.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?EQ.EXTERIOR:EQ.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<2;e++)for(let r=1;r<3;r++){const n=t.getLocation(e,r);n!==EQ.EXTERIOR&&n!==EQ.INTERIOR||(this.isNull(e,r)?this._depth[e][r]=I$.depthAtLocation(n):this._depth[e][r]+=I$.depthAtLocation(n))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1];arguments[2]===EQ.INTERIOR&&this._depth[t][e]++}}}I$.NULL_VALUE=-1;class L$ extends WQ{constructor(){super(),L$.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new E$(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new I$,this._depthDelta=0,1===arguments.length){const t=arguments[0];L$.constructor_.call(this,t,null)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.pts=t,this._label=e}}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof GQ&&arguments[0]instanceof YQ))return super.updateIM.apply(this,arguments);{const t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,qQ.ON),t.getLocation(1,qQ.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,qQ.LEFT),t.getLocation(1,qQ.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,qQ.RIGHT),t.getLocation(1,qQ.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){const t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];return new L$(t,YQ.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof L$))return!1;const e=t;if(this.pts.length!==e.pts.length)return!1;let r=!0,n=!0,i=this.pts.length;for(let t=0;t<this.pts.length;t++)if(this.pts[t].equals2D(e.pts[t])||(r=!1),this.pts[t].equals2D(e.pts[--i])||(n=!1),!r&&!n)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){const t=arguments[0];return this.pts[t]}}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){L$.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(let e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new T$(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new JK;for(let t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,r,n){const i=new XK(t.getIntersection(n));let o=e,a=t.getEdgeDistance(r,n);const s=o+1;if(s<this.pts.length){const t=this.pts[s];i.equals2D(t)&&(o=s,a=0)}this.eiList.add(i,o,a)}toString(){const t=new zJ;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(let e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,r){for(let n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)}}class R$ extends UQ{constructor(){super(),R$.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];const t=arguments[0],e=arguments[1];if(UQ.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{const e=t.getNumPoints()-1;this.init(t.getCoordinate(e),t.getCoordinate(e-1))}this.computeDirectedLabel()}static depthFactor(t,e){return t===EQ.EXTERIOR&&e===EQ.INTERIOR?1:t===EQ.INTERIOR&&e===EQ.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new YQ(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new n$("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){let t=!0;for(let e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,qQ.LEFT)===EQ.INTERIOR&&this._label.getLocation(e,qQ.RIGHT)===EQ.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[qQ.LEFT]+"/"+this._depth[qQ.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){const t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,EQ.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,EQ.EXTERIOR);return t&&e&&r}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){let r=this.getEdge().getDepthDelta();this._isForward||(r=-r);let n=1;t===qQ.LEFT&&(n=-1);const i=qQ.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}}class C${createNode(t){return new HQ(t,null)}}class A${constructor(){A$.constructor_.apply(this,arguments)}static constructor_(){if(this._edges=new yJ,this._nodes=null,this._edgeEndList=new yJ,0===arguments.length)this._nodes=new r$(new C$);else if(1===arguments.length){const t=arguments[0];this._nodes=new r$(t)}}static linkResultDirectedEdges(t){for(let e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}printEdges(t){t.println("Edges:");for(let e=0;e<this._edges.size();e++){t.println("edge "+e+":");const r=this._edges.get(e);r.print(t),r.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof HQ){const t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof XK){const t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}debugPrintln(t){BJ.out.println(t)}isBoundaryNode(t,e){const r=this._nodes.find(e);if(null===r)return!1;const n=r.getLabel();return null!==n&&n.getLocation(t)===EQ.BOUNDARY}linkAllDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}}matchInSameDirection(t,e,r,n){return!!t.equals(r)&&(SJ.index(t,e,n)===SJ.COLLINEAR&&zQ.quadrant(t,e)===zQ.quadrant(r,n))}getEdgeEnds(){return this._edgeEndList}debugPrint(t){BJ.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(let r=0;r<this._edges.size();r++){const n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return n;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return n}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(let e=this.getEdgeEnds().iterator();e.hasNext();){const r=e.next();if(r.getEdge()===t)return r}return null}addEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._edges.add(t);const r=new R$(t,!0),n=new R$(t,!1);r.setSym(n),n.setSym(r),this.add(r),this.add(n)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(let r=0;r<this._edges.size();r++){const n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null}}class k$ extends A${constructor(){super(),k$.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new HJ,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new BQ,2===arguments.length){const t=arguments[0],e=arguments[1];k$.constructor_.call(this,t,e,CQ.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=r,null!==e&&this.add(e)}}static determineBoundary(t,e){return t.isInBoundary(e)?EQ.BOUNDARY:EQ.INTERIOR}insertBoundaryPoint(t,e){const r=this._nodes.addNode(e).getLabel();let n=1,i=EQ.NONE;i=r.getLocation(t,qQ.ON),i===EQ.BOUNDARY&&n++;const o=k$.determineBoundary(this._boundaryNodeRule,n);r.setLocation(t,o)}computeSelfNodes(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){const t=arguments[1],e=arguments[2],r=new h$(arguments[0],!0,!1);r.setIsDoneIfProperInt(e);const n=this.createEdgeSetIntersector(),i=this._parentGeom instanceof CJ||this._parentGeom instanceof EJ||this._parentGeom instanceof VJ,o=t||!i;return n.computeIntersections(this._edges,r,o),this.addSelfIntersectionNodes(this._argIndex),r}}computeSplitEdges(t){for(let e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}}computeEdgeIntersections(t,e,r){const n=new h$(e,r,!0);n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());return this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof cJ){const t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,EQ.INTERIOR)}else if(arguments[0]instanceof XK){const t=arguments[0];this.insertPoint(this._argIndex,t,EQ.INTERIOR)}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),EQ.EXTERIOR,EQ.INTERIOR);for(let e=0;e<t.getNumInteriorRing();e++){const r=t.getInteriorRingN(e);this.addPolygonRing(r,EQ.INTERIOR,EQ.EXTERIOR)}}addEdge(t){this.insertEdge(t);const e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],EQ.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],EQ.BOUNDARY)}addLineString(t){const e=GJ.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;const r=new L$(e,new YQ(this._argIndex,EQ.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),YK.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){const t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null);let r=0;for(let n=t.iterator();n.hasNext();){const t=n.next();e[r++]=t.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,r){if(this.isBoundaryNode(t,e))return null;r===EQ.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)}addPolygonRing(t,e,r){if(t.isEmpty())return null;const n=GJ.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;let i=e,o=r;SJ.isCCW(n)&&(i=r,o=e);const a=new L$(n,new YQ(this._argIndex,EQ.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],EQ.BOUNDARY)}insertPoint(t,e,r){const n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new YQ(t,r):i.setLocation(t,r)}createEdgeSetIntersector(){return new f$}addSelfIntersectionNodes(t){for(let e=this._edges.iterator();e.hasNext();){const r=e.next(),n=r.getLabel().getLocation(t);for(let e=r.eiList.iterator();e.hasNext();){const r=e.next();this.addSelfIntersectionNode(t,r.coord,n)}}}add(){if(!(1===arguments.length&&arguments[0]instanceof QK))return super.add.apply(this,arguments);{const t=arguments[0];if(t.isEmpty())return null;if(t instanceof VJ&&(this._useBoundaryDeterminationRule=!1),t instanceof EJ)this.addPolygon(t);else if(t instanceof sJ)this.addLineString(t);else if(t instanceof cJ)this.addPoint(t);else if(t instanceof RJ)this.addCollection(t);else if(t instanceof JJ)this.addCollection(t);else if(t instanceof VJ)this.addCollection(t);else{if(!(t instanceof LJ))throw new rJ(t.getGeometryType());this.addCollection(t)}}}addCollection(t){for(let e=0;e<t.getNumGeometries();e++){const r=t.getGeometryN(e);this.add(r)}}locate(t){return LK(this._parentGeom,xJ)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new w$(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof sJ){const t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}}class N$ extends UQ{constructor(){super(),N$.constructor_.apply(this,arguments)}static constructor_(){if(this._edgeEnds=new yJ,1===arguments.length){const t=arguments[0];N$.constructor_.call(this,null,t)}else if(2===arguments.length){const t=arguments[1];UQ.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new YQ(t.getLabel())),this.insert(t)}}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(let e=this.iterator();e.hasNext();){e.next().print(t),t.println()}}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,e){let r=0,n=!1;for(let e=this.iterator();e.hasNext();){const i=e.next().getLabel().getLocation(t);i===EQ.BOUNDARY&&r++,i===EQ.INTERIOR&&(n=!0)}let i=EQ.NONE;n&&(i=EQ.INTERIOR),r>0&&(i=k$.determineBoundary(e,r)),this._label.setLocation(t,i)}computeLabelSide(t,e){for(let r=this.iterator();r.hasNext();){const n=r.next();if(n.getLabel().isArea()){const r=n.getLabel().getLocation(t,e);if(r===EQ.INTERIOR)return this._label.setLocation(t,e,EQ.INTERIOR),null;r===EQ.EXTERIOR&&this._label.setLocation(t,e,EQ.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,qQ.LEFT),this.computeLabelSide(t,qQ.RIGHT)}updateIM(t){L$.updateIM(this._label,t)}computeLabel(t){let e=!1;for(let t=this.iterator();t.hasNext();){t.next().getLabel().isArea()&&(e=!0)}this._label=e?new YQ(EQ.NONE,EQ.NONE,EQ.NONE):new YQ(EQ.NONE);for(let r=0;r<2;r++)this.computeLabelOn(r,t),e&&this.computeLabelSides(r)}}class j$ extends a${constructor(){super()}updateIM(t){for(let e=this.iterator();e.hasNext();){e.next().updateIM(t)}}insert(t){let e=this._edgeMap.get(t);null===e?(e=new N$(t),this.insertEdgeEnd(t,e)):e.insert(t)}}class F$ extends HQ{constructor(){super(),F$.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];HQ.constructor_.call(this,t,e)}updateIMFromEdges(t){this._edges.updateIM(t)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}}class D$ extends C${constructor(){super()}createNode(t){return new F$(t,new j$)}}class B${constructor(){B$.constructor_.apply(this,arguments)}static constructor_(){this._li=new IQ,this._ptLocator=new BQ,this._arg=null,this._nodes=new r$(new D$),this._im=null,this._isolatedEdges=new yJ,this._invalidPoint=null;const t=arguments[0];this._arg=t}insertEdgeEnds(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._nodes.add(t)}}computeProperIntersectionIM(t,e){const r=this._arg[0].getGeometry().getDimension(),n=this._arg[1].getGeometry().getDimension(),i=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===r&&2===n?i&&e.setAtLeast("212101212"):2===r&&1===n?(i&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===r&&2===n?(i&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===r&&1===n&&o&&e.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,e){for(let r=this._arg[t].getEdgeIterator();r.hasNext();){const t=r.next();t.isIsolated()&&(this.labelIsolatedEdge(t,e,this._arg[e].getGeometry()),this._isolatedEdges.add(t))}}labelIsolatedEdge(t,e,r){if(r.getDimension()>0){const n=this._ptLocator.locate(t.getCoordinate(),r);t.getLabel().setAllLocations(e,n)}else t.getLabel().setAllLocations(e,EQ.EXTERIOR)}computeIM(){const t=new GQ;if(t.set(EQ.EXTERIOR,EQ.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);const e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);const r=new ZQ,n=r.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(n);const i=r.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}labelNodeEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}}copyNodesAndLabels(t){for(let e=this._arg[t].getNodeIterator();e.hasNext();){const r=e.next();this._nodes.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}}labelIntersectionNodes(t){for(let e=this._arg[t].getEdgeIterator();e.hasNext();){const r=e.next(),n=r.getLabel().getLocation(t);for(let e=r.getEdgeIntersectionList().iterator();e.hasNext();){const r=e.next(),i=this._nodes.find(r.coord);i.getLabel().isNull(t)&&(n===EQ.BOUNDARY?i.setLabelBoundary(t):i.setLabel(t,EQ.INTERIOR))}}}labelIsolatedNode(t,e){const r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,r)}computeIntersectionNodes(t){for(let e=this._arg[t].getEdgeIterator();e.hasNext();){const r=e.next(),n=r.getLabel().getLocation(t);for(let e=r.getEdgeIntersectionList().iterator();e.hasNext();){const r=e.next(),i=this._nodes.addNode(r.coord);n===EQ.BOUNDARY?i.setLabelBoundary(t):i.getLabel().isNull(t)&&i.setLabel(t,EQ.INTERIOR)}}}labelIsolatedNodes(){for(let t=this._nodes.iterator();t.hasNext();){const e=t.next(),r=e.getLabel();YK.isTrue(r.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}}updateIM(t){for(let e=this._isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(let e=this._nodes.iterator();e.hasNext();){const r=e.next();r.updateIM(t),r.updateIMFromEdges(t)}}computeDisjointIM(t){const e=this._arg[0].getGeometry();e.isEmpty()||(t.set(EQ.INTERIOR,EQ.EXTERIOR,e.getDimension()),t.set(EQ.BOUNDARY,EQ.EXTERIOR,e.getBoundaryDimension()));const r=this._arg[1].getGeometry();r.isEmpty()||(t.set(EQ.EXTERIOR,EQ.INTERIOR,r.getDimension()),t.set(EQ.EXTERIOR,EQ.BOUNDARY,r.getBoundaryDimension()))}}class G${constructor(){G$.constructor_.apply(this,arguments)}static constructor_(){if(this._li=new IQ,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){const t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new k$(0,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];G$.constructor_.call(this,t,e,CQ.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new k$(0,t,r),this._arg[1]=new k$(1,e,r)}}getArgGeometry(t){return this._arg[t].getGeometry()}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}}class z${constructor(){z$.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null;const t=arguments[0];this._rectEnv=t.getEnvelopeInternal()}static contains(t,e){return new z$(t).contains(e)}isContainedInBoundary(t){if(t instanceof EJ)return!1;if(t instanceof cJ)return this.isPointContainedInBoundary(t);if(t instanceof sJ)return this.isLineStringContainedInBoundary(t);for(let e=0;e<t.getNumGeometries();e++){const r=t.getGeometryN(e);if(!this.isContainedInBoundary(r))return!1}return!0}isLineSegmentContainedInBoundary(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(t){const e=t.getCoordinateSequence(),r=new XK,n=new XK;for(let t=0;t<e.size()-1;t++)if(e.getCoordinate(t,r),e.getCoordinate(t+1,n),!this.isLineSegmentContainedInBoundary(r,n))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof cJ){const t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof XK){const t=arguments[0];return t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX()||t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()}}contains(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}}class U${constructor(){U$.constructor_.apply(this,arguments)}static constructor_(){this._li=new IQ,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;const t=arguments[0];this._rectEnv=t,this._diagUp0=new XK(t.getMinX(),t.getMinY()),this._diagUp1=new XK(t.getMaxX(),t.getMaxY()),this._diagDown0=new XK(t.getMinX(),t.getMaxY()),this._diagDown1=new XK(t.getMaxX(),t.getMinY())}intersects(t,e){const r=new JK(t,e);if(!this._rectEnv.intersects(r))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){const r=t;t=e,e=r}let n=!1;return e.y>t.y&&(n=!0),n?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}}class q${constructor(){q$.constructor_.apply(this,arguments)}static constructor_(){this._isDone=!1}applyTo(t){for(let e=0;e<t.getNumGeometries()&&!this._isDone;e++){const r=t.getGeometryN(e);if(r instanceof LJ)this.applyTo(r);else if(this.visit(r),this.isDone())return this._isDone=!0,null}}}class V${constructor(){V$.constructor_.apply(this,arguments)}static constructor_(){this._rectangle=null,this._rectEnv=null;const t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()}static intersects(t,e){return new V$(t).intersects(e)}intersects(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;const e=new Y$(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;const r=new Z$(this._rectangle);if(r.applyTo(t),r.containsPoint())return!0;const n=new W$(this._rectangle);return n.applyTo(t),!!n.intersects()}}class Y$ extends q${constructor(){super(),Y$.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._intersects=!1;const t=arguments[0];this._rectEnv=t}isDone(){return!0===this._intersects}visit(t){const e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)||e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()||e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}intersects(){return this._intersects}}class Z$ extends q${constructor(){super(),Z$.constructor_.apply(this,arguments)}static constructor_(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;const t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()}isDone(){return!0===this._containsPoint}visit(t){if(!(t instanceof EJ))return null;const e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;const r=new XK;for(let n=0;n<4;n++)if(this._rectSeq.getCoordinate(n,r),e.contains(r)&&o$.containsPointInPolygon(r,t))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}}class W$ extends q${constructor(){super(),W$.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new XK,this._p1=new XK;const t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new U$(this._rectEnv)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(t){const e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;const r=_$.getLines(t);this.checkIntersectionWithLineStrings(r)}checkIntersectionWithLineStrings(t){for(let e=t.iterator();e.hasNext();){const t=e.next();if(this.checkIntersectionWithSegments(t),this._hasIntersection)return null}}checkIntersectionWithSegments(t){const e=t.getCoordinateSequence();for(let t=1;t<e.size();t++)if(e.getCoordinate(t-1,this._p0),e.getCoordinate(t,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}}class H$ extends G${constructor(){super(),H$.constructor_.apply(this,arguments)}static constructor_(){if(this._relate=null,2===arguments.length){const t=arguments[0],e=arguments[1];G$.constructor_.call(this,t,e),this._relate=new B$(this._arg)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],r=arguments[2];G$.constructor_.call(this,t,e,r),this._relate=new B$(this._arg)}}static covers(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new H$(t,e).getIntersectionMatrix().isCovers())))}static intersects(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return V$.intersects(t,e);if(e.isRectangle())return V$.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(let r=0;r<t.getNumGeometries();r++)for(let n=0;n<e.getNumGeometries();n++)if(t.getGeometryN(r).intersects(e.getGeometryN(n)))return!0;return!1}return new H$(t,e).getIntersectionMatrix().isIntersects()}static touches(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new H$(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())}static equalsTopo(t,e){return!!t.getEnvelopeInternal().equals(e.getEnvelopeInternal())&&H$.relate(t,e).isEquals(t.getDimension(),e.getDimension())}static relate(){if(2===arguments.length){return new H$(arguments[0],arguments[1]).getIntersectionMatrix()}if(3===arguments.length){return new H$(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix()}}static overlaps(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new H$(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())}static crosses(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new H$(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())}static contains(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?z$.contains(t,e):new H$(t,e).getIntersectionMatrix().isContains())))}getIntersectionMatrix(){return this._relate.computeIM()}}function X$(t){return function(t){if(Array.isArray(t))return K$(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return K$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K$(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var J$=function(t){var e=t,r=[];return e instanceof WO?r=X$(e.getFeatures().map((function(t){return t.getGeometry()}))):(HU(e)||(e=[e]),r=e.map((function(t){var e;return t instanceof Yq?e=t.getGeometry():JU(t)&&(e=t),e}))),r},Q$=function(t,e){var r="",n=new cY;return e.forEach((function(e,i){0!==i&&(r+=" OR ");var o=e;"point"===o.type.toLowerCase()&&(o.coordinates.length=2);var a=n.writeFeature(o);r+="".concat(t,"({{geometryName}}, ").concat(a,")")})),r},$$=(r(337),r(220)),t0=r.n($$),e0=function(t){var e=t.parentElement;e.removeChild(t),e.children&&0!==e.children.length||e.remove()},r0=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4e3,o={message:t,severity:e,icon:r,order:n,translations:{close:Hf("toast").close}},a=sp(t0.a,{vars:o}),s=document.querySelector("div.m-mapea-container"),u=document.querySelector("div.m-toasts-container");u||((u=document.createElement("div")).classList.add("m-toasts-container"),s.appendChild(u));var l=setTimeout((function(){e0(a)}),i),c=a.querySelector("button.m-toast-button");c.addEventListener("click",(function(){e0(a),clearTimeout(l)})),u.appendChild(a)},n0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i0=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],o0="enterfullscreen",a0="leavefullscreen";function s0(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function u0(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function l0(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var c0=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).cssClassName_=void 0!==n.className?n.className:"ol-full-screen";var i=void 0!==n.label?n.label:"⤢";r.labelNode_="string"==typeof i?document.createTextNode(i):i;var o=void 0!==n.labelActive?n.labelActive:"×";r.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,r.button_=document.createElement("button");var a=n.tipLabel?n.tipLabel:"Toggle full-screen";r.setClassName_(r.button_,u0()),r.button_.setAttribute("type","button"),r.button_.title=a,r.button_.appendChild(r.labelNode_),r.button_.addEventListener(ji,r.handleClick_.bind(r),!1);var s=r.cssClassName_+" ol-unselectable ol-control "+(s0()?"":"ol-unsupported"),u=r.element;return u.className=s,u.appendChild(r.button_),r.keys_=void 0!==n.keys&&n.keys,r.source_=n.source,r}return n0(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(s0()){var t=this.getMap();if(t)if(u0())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=void 0;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():l0(t)}(e):l0(e)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();u0()?(this.setClassName_(this.button_,!0),Us(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(o0)):(this.setClassName_(this.button_,!1),Us(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(a0)),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var r=this.cssClassName_+"-true",n=this.cssClassName_+"-false",i=e?r:n;t.classList.remove(r),t.classList.remove(n),t.classList.add(i)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var r=0,n=i0.length;r<n;++r)this.listenerKeys.push(di(document,i0[r],this.handleFullScreenChange_,this))},e}(mu),h0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function f0(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var p0=function(t){function e(e){var r=this,n=e||{},i=document.createElement("div");return i.className=void 0!==n.className?n.className:"ol-mouse-position",(r=t.call(this,{element:i,render:n.render||f0,target:n.target})||this).addEventListener(to("projection"),r.handleProjectionChanged_),n.coordinateFormat&&r.setCoordinateFormat(n.coordinateFormat),n.projection&&r.setProjection(n.projection),r.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=i.innerHTML,r.mapProjection_=null,r.transform_=null,r}return h0(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get("projection")},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(di(r,Mo,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(di(r,Eo,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set("projection",Vn(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?Jn(this.mapProjection_,r):Un}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var i=oi();i&&(this.transform_=Jn(this.mapProjection_,i)),this.transform_(n,n);var o=this.getCoordinateFormat();e=o?o(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(mu),d0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d0(e,t),e.prototype.createRenderer=function(){return new zc(this)},e}(pu);function y0(t){this.validateExtent_(),this.updateBox_()}var g0=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||y0,target:n.target})||this).boundHandleRotationChanged_=r.handleRotationChanged_.bind(r),r.collapsed_=void 0===n.collapsed||n.collapsed,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1),r.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,r.viewExtent_=void 0;var i=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"«";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"»";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(ji,r.handleClick_.bind(r),!1),r.ovmapDiv_=document.createElement("div"),r.ovmapDiv_.className="ol-overviewmap-map",r.view_=n.view,r.ovmap_=new m0({view:n.view});var c=r.ovmap_;n.layers&&n.layers.forEach((function(t){c.addLayer(t)}));var h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",r.boxOverlay_=new Wb({position:[0,0],positioning:Nb,element:h}),r.ovmap_.addOverlay(r.boxOverlay_);var f=i+" ol-unselectable ol-control"+(r.collapsed_&&r.collapsible_?" ol-collapsed":"")+(r.collapsible_?"":" ol-uncollapsible"),p=r.element;p.className=f,p.appendChild(r.ovmapDiv_),p.appendChild(l);var d=r,m=r.boxOverlay_,y=r.boxOverlay_.getElement(),g=function(t){var e,r={clientX:(e=t).clientX,clientY:e.clientY},n=c.getEventCoordinateInternal(r);m.setPosition(n)},v=function t(e){var r=c.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(r),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",t)};return y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)})),r}return d0(e,t),e.prototype.setMap=function(e){var r=this.getMap();if(e!==r){if(r){var n=r.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(di(e,pi,this.handleMapPropertyChange_,this));var i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===ko){var e=t.oldValue;e&&this.unbindView_(e);var r=this.getMap().getView();this.bindView_(r)}},e.prototype.bindView_=function(t){if(!this.view_){var e=new Ds({projection:t.getProjection()});this.ovmap_.setView(e)}t.addEventListener(to(oa),this.boundHandleRotationChanged_),this.handleRotationChanged_()},e.prototype.unbindView_=function(t){t.removeEventListener(to(oa),this.boundHandleRotationChanged_)},e.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView().calculateExtentInternal(r);if(!this.viewExtent_||!Kr(n,this.viewExtent_)){this.viewExtent_=n;var i=e.getSize(),o=e.getView().calculateExtentInternal(i),a=e.getPixelFromCoordinateInternal(fn(n)),s=e.getPixelFromCoordinateInternal(an(n)),u=Math.abs(a[0]-s[0]),l=Math.abs(a[1]-s[1]),c=i[0],h=i[1];u<.1*c||l<.1*h||u>.75*c||l>.75*h?this.resetExtent_():Ur(o,n)||this.recenter_()}}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getSize(),n=t.getView().calculateExtentInternal(r),i=e.getView(),o=Math.log(7.5)/Math.LN2;gn(n,1/(.1*Math.pow(2,o/2))),i.fitInternal(Cs(n))},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenterInternal(r.getCenterInternal())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView(),i=e.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),u=n.getCenterInternal(),l=n.getResolution(),c=i.getResolution(),h=r[0]*l/c,f=r[1]*l/c;if(a.setPosition(u),s){s.style.width=h+"px",s.style.height=f+"px";var p="rotate("+o+"rad)";s.style.transform=p}}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Us(this.collapseLabel_,this.label_):Us(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),mi(t,To,(function(t){this.updateBox_()}),this)}},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.setRotateWithView=function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(mu),v0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_0=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var i=void 0!==n.className?n.className:"ol-zoom-extent",o=void 0!==n.label?n.label:"E",a=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(ji,r.handleClick_.bind(r),!1);var u=i+" ol-unselectable ol-control",l=r.element;return l.className=u,l.appendChild(s),r}return v0(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Cs(e))},e}(mu),b0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),w0={};w0[mr.POINT]=function(t){var e;e=void 0!==t.m&&void 0!==t.z?new ds([t.x,t.y,t.z,t.m],Ta):void 0!==t.z?new ds([t.x,t.y,t.z],Oa):void 0!==t.m?new ds([t.x,t.y,t.m],Pa):new ds([t.x,t.y]);return e},w0[mr.LINE_STRING]=function(t){var e=x0(t);return new Sy(t.paths[0],e)},w0[mr.POLYGON]=function(t){var e=x0(t);return new Ls(t.rings,e)},w0[mr.MULTI_POINT]=function(t){var e=x0(t);return new Ey(t.points,e)},w0[mr.MULTI_LINE_STRING]=function(t){var e=x0(t);return new Py(t.paths,e)},w0[mr.MULTI_POLYGON]=function(t){var e=x0(t);return new Iy(t.rings,e)};var M0={};function S0(t,e){var r,n,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=mr.POINT;else if(t.points)i=mr.MULTI_POINT;else if(t.paths){i=1===t.paths.length?mr.LINE_STRING:mr.MULTI_LINE_STRING}else if(t.rings){var o=t,a=x0(o),s=function(t,e){var r,n,i=[],o=[],a=[];for(r=0,n=t.length;r<n;++r){i.length=0,es(i,0,t[r],e.length),xs(i,0,i.length,e.length)?o.push([t[r]]):a.push(t[r])}for(;a.length;){var s=a.shift(),u=!1;for(r=o.length-1;r>=0;r--){var l=o[r][0];if(Ur(new fs(l).getExtent(),new fs(s).getExtent())){o[r].push(s),u=!0;break}}u||o.push([s.reverse()])}return o}(o.rings,a);1===s.length?(i=mr.POLYGON,t=Object.assign({},t,((r={}).rings=s[0],r))):(i=mr.MULTI_POLYGON,t=Object.assign({},t,((n={}).rings=s,n)))}return G_((0,w0[i])(t),!1,e)}function x0(t){var e=Ea;return!0===t.hasZ&&!0===t.hasM?e=Ta:!0===t.hasZ?e=Oa:!0===t.hasM&&(e=Pa),e}function E0(t){var e=t.getLayout();return{hasZ:e===Oa||e===Ta,hasM:e===Pa||e===Ta}}function O0(t,e){return(0,M0[t.getType()])(G_(t,!0,e),e)}M0[mr.POINT]=function(t,e){var r,n=t.getCoordinates(),i=t.getLayout();i===Oa?r={x:n[0],y:n[1],z:n[2]}:i===Pa?r={x:n[0],y:n[1],m:n[2]}:i===Ta?r={x:n[0],y:n[1],z:n[2],m:n[3]}:i===Ea?r={x:n[0],y:n[1]}:Or(!1,34);return r},M0[mr.LINE_STRING]=function(t,e){var r=E0(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:[t.getCoordinates()]}},M0[mr.POLYGON]=function(t,e){var r=E0(t);return{hasZ:r.hasZ,hasM:r.hasM,rings:t.getCoordinates(!1)}},M0[mr.MULTI_POINT]=function(t,e){var r=E0(t);return{hasZ:r.hasZ,hasM:r.hasM,points:t.getCoordinates()}},M0[mr.MULTI_LINE_STRING]=function(t,e){var r=E0(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:t.getCoordinates()}},M0[mr.MULTI_POLYGON]=function(t,e){for(var r=E0(t),n=t.getCoordinates(!1),i=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)i.push(n[o][a]);return{hasZ:r.hasZ,hasM:r.hasM,rings:i}};var P0=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).geometryName_=n.geometryName,r}return b0(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=t,n=S0(r.geometry,e),i=new dy;return this.geometryName_&&i.setGeometryName(this.geometryName_),i.setGeometry(n),e&&e.idField&&r.attributes[e.idField]&&i.setId(r.attributes[e.idField]),r.attributes&&i.setProperties(r.attributes,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=e||{};if(t.features){var n=[],i=t.features;r.idField=t.objectIdFieldName;for(var o=0,a=i.length;o<a;++o)n.push(this.readFeatureFromObject(i[o],r));return n}return[this.readFeatureFromObject(t,r)]},e.prototype.readGeometryFromObject=function(t,e){return S0(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?Vn("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return O0(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={},n=t.getGeometry();n&&(r.geometry=O0(n,e),e&&e.featureProjection&&(r.geometry.spatialReference={wkid:Number(Vn(e.featureProjection).getCode().split(":").pop())}));var i=t.getProperties();return delete i[t.getGeometryName()],jn(i)?r.attributes={}:r.attributes=i,r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{features:r}},e}(Nj),T0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),I0=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).schemaLocation=n.schemaLocation?n.schemaLocation:r.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",r}return T0(e,t),e}(rb);I0.prototype.namespace="http://www.opengis.net/gml/3.2",I0.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Qc(rb.prototype.readFlatPos_),posList:Qc(rb.prototype.readFlatPosList_)}},I0.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:rb.prototype.interiorParser_,exterior:rb.prototype.exteriorParser_}},I0.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Qc(Q_.prototype.readPoint),MultiPoint:Qc(Q_.prototype.readMultiPoint),LineString:Qc(Q_.prototype.readLineString),MultiLineString:Qc(Q_.prototype.readMultiLineString),LinearRing:Qc(Q_.prototype.readLinearRing),Polygon:Qc(Q_.prototype.readPolygon),MultiPolygon:Qc(Q_.prototype.readMultiPolygon),Surface:Qc(I0.prototype.readSurface_),MultiSurface:Qc(rb.prototype.readMultiSurface_),Curve:Qc(I0.prototype.readCurve_),MultiCurve:Qc(rb.prototype.readMultiCurve_),Envelope:Qc(I0.prototype.readEnvelope_)}},I0.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{curveMember:Jc(rb.prototype.curveMemberParser_),curveMembers:Jc(rb.prototype.curveMemberParser_)}},I0.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:Jc(rb.prototype.surfaceMemberParser_),surfaceMembers:Jc(rb.prototype.surfaceMemberParser_)}},I0.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:Jc(Q_.prototype.readLineString),Curve:Jc(rb.prototype.readCurve_)}},I0.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:Jc(Q_.prototype.readPolygon),Surface:Jc(rb.prototype.readSurface_)}},I0.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{patches:Qc(rb.prototype.readPatch_)}},I0.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{segments:Qc(rb.prototype.readSegment_)}},I0.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:Jc(rb.prototype.readFlatPosList_),upperCorner:Jc(rb.prototype.readFlatPosList_)}},I0.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml/3.2":{PolygonPatch:Qc(rb.prototype.readPolygonPatch_)}},I0.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml/3.2":{LineStringSegment:Qc(rb.prototype.readLineStringSegment_)}},I0.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml/3.2":{pointMember:Jc(Q_.prototype.pointMemberParser_),pointMembers:Jc(Q_.prototype.pointMemberParser_)}},I0.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:Jc(Q_.prototype.lineStringMemberParser_),lineStringMembers:Jc(Q_.prototype.lineStringMemberParser_)}},I0.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml/3.2":{polygonMember:Jc(Q_.prototype.polygonMemberParser_),polygonMembers:Jc(Q_.prototype.polygonMemberParser_)}},I0.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Point:Jc(Q_.prototype.readFlatCoordinatesFromNode_)}},I0.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:Jc(Q_.prototype.readLineString)}},I0.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:Jc(Q_.prototype.readPolygon)}},I0.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Qc(Q_.prototype.readFlatLinearRing_)}},I0.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{exterior:eh(rb.prototype.writeRing_),interior:eh(rb.prototype.writeRing_)}},I0.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:eh(Oh),upperCorner:eh(Oh)}},I0.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:eh(rb.prototype.writeSurfaceOrPolygonMember_),polygonMember:eh(rb.prototype.writeSurfaceOrPolygonMember_)}},I0.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{pointMember:eh(rb.prototype.writePointMember_)}},I0.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:eh(rb.prototype.writeLineStringOrCurveMember_),curveMember:eh(rb.prototype.writeLineStringOrCurveMember_)}},I0.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{Curve:eh(rb.prototype.writeCurveOrLineString_),MultiCurve:eh(rb.prototype.writeMultiCurveOrLineString_),Point:eh(I0.prototype.writePoint_),MultiPoint:eh(rb.prototype.writeMultiPoint_),LineString:eh(rb.prototype.writeCurveOrLineString_),MultiLineString:eh(rb.prototype.writeMultiCurveOrLineString_),LinearRing:eh(rb.prototype.writeLinearRing_),Polygon:eh(rb.prototype.writeSurfaceOrPolygon_),MultiPolygon:eh(rb.prototype.writeMultiSurfaceOrPolygon_),Surface:eh(rb.prototype.writeSurfaceOrPolygon_),MultiSurface:eh(rb.prototype.writeMultiSurfaceOrPolygon_),Envelope:eh(rb.prototype.writeEnvelope)}};var L0=I0,R0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),C0=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],A0={rte:s1,trk:u1,wpt:l1},k0=ah(C0,{rte:Jc(s1),trk:Jc(u1),wpt:Jc(l1)}),N0=ah(C0,{text:th(Mh,"linkText"),type:th(Mh,"linkType")}),j0=ah(C0,{rte:eh((function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==mr.LINE_STRING){var s=G_(a,!0,n);o.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates()}var u=r[r.length-1].node,l=Z0[u.namespaceURI],c=oh(i,l);ch(o,W0,ih,c,r,l)})),trk:eh((function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==mr.MULTI_LINE_STRING){var s=G_(a,!0,n);i.trkseg=s.getLineStrings()}var u=r[r.length-1].node,l=X0[u.namespaceURI],c=oh(i,l);ch(o,K0,ih,c,r,l)})),wpt:eh((function(t,e,r){var n=r[0],i=r[r.length-1];i.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==mr.POINT){var a=G_(o,!0,n);i.geometryLayout=a.getLayout(),h1(t,a.getCoordinates(),r)}}))}),F0=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Vn("EPSG:4326"),r.readExtensions_=n.readExtensions,r}return R0(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,r=t.length;e<r;++e){var n=t[e];if(this.readExtensions_){var i=n.get("extensionsNode_")||null;this.readExtensions_(n,i)}n.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!_i(C0,t.namespaceURI))return null;var r=A0[t.localName];if(!r)return null;var n=r(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},e.prototype.readFeaturesFromNode=function(t,e){if(!_i(C0,t.namespaceURI))return[];if("gpx"==t.localName){var r=uh([],k0,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Zc("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Yc),r.setAttributeNS(Yc,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),ch({node:r},j0,r1,t,[e]),r},e}(W_),D0=ah(C0,{name:th(Mh),cmt:th(Mh),desc:th(Mh),src:th(Mh),link:o1,number:th(bh),extensions:a1,type:th(Mh),rtept:function(t,e){var r=uh({},B0,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;n1(i,o,t,r)}}}),B0=ah(C0,{ele:th(vh),time:th(gh)}),G0=ah(C0,{name:th(Mh),cmt:th(Mh),desc:th(Mh),src:th(Mh),link:o1,number:th(bh),type:th(Mh),extensions:a1,trkseg:function(t,e){var r=e[e.length-1];sh(z0,t,e);var n=r.flatCoordinates;r.ends.push(n.length)}}),z0=ah(C0,{trkpt:function(t,e){var r=uh({},U0,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;n1(i,o,t,r)}}}),U0=ah(C0,{ele:th(vh),time:th(gh)}),q0=ah(C0,{ele:th(vh),time:th(gh),magvar:th(vh),geoidheight:th(vh),name:th(Mh),cmt:th(Mh),desc:th(Mh),src:th(Mh),link:o1,sym:th(Mh),type:th(Mh),fix:th(Mh),sat:th(bh),hdop:th(vh),vdop:th(vh),pdop:th(vh),ageofdgpsdata:th(vh),dgpsid:th(bh),extensions:a1}),V0=["text","type"],Y0=ah(C0,{text:eh(Oh),type:eh(Oh)}),Z0=ah(C0,["name","cmt","desc","src","link","number","type","rtept"]),W0=ah(C0,{name:eh(Oh),cmt:eh(Oh),desc:eh(Oh),src:eh(Oh),link:eh(c1),number:eh(Eh),type:eh(Oh),rtept:rh(eh(h1))}),H0=ah(C0,["ele","time"]),X0=ah(C0,["name","cmt","desc","src","link","number","type","trkseg"]),K0=ah(C0,{name:eh(Oh),cmt:eh(Oh),desc:eh(Oh),src:eh(Oh),link:eh(c1),number:eh(Eh),type:eh(Oh),trkseg:rh(eh((function(t,e,r){var n={node:t};n.geometryLayout=e.getLayout(),n.properties={},ch(n,Q0,J0,e.getCoordinates(),r)})))}),J0=nh("trkpt"),Q0=ah(C0,{trkpt:eh(h1)}),$0=ah(C0,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),t1=ah(C0,{ele:eh(xh),time:eh((function(t,e){var r=new Date(1e3*e),n=r.getUTCFullYear()+"-"+aa(r.getUTCMonth()+1,2)+"-"+aa(r.getUTCDate(),2)+"T"+aa(r.getUTCHours(),2)+":"+aa(r.getUTCMinutes(),2)+":"+aa(r.getUTCSeconds(),2)+"Z";t.appendChild(ph().createTextNode(n))})),magvar:eh(xh),geoidheight:eh(xh),name:eh(Oh),cmt:eh(Oh),desc:eh(Oh),src:eh(Oh),link:eh(c1),sym:eh(Oh),type:eh(Oh),fix:eh(Oh),sat:eh(Eh),hdop:eh(xh),vdop:eh(xh),pdop:eh(xh),ageofdgpsdata:eh(xh),dgpsid:eh(Eh)}),e1={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function r1(t,e,r){var n=t.getGeometry();if(n){var i=e1[n.getType()];if(i)return Zc(e[e.length-1].node.namespaceURI,i)}}function n1(t,e,r,n){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function i1(t,e,r){var n=Ea,i=2;if(t.hasZ&&t.hasM?(n=Ta,i=4):t.hasZ?(n=Oa,i=3):t.hasM&&(n=Pa,i=3),4!==i){for(var o=0,a=e.length/4;o<a;o++)e[o*i]=e[4*o],e[o*i+1]=e[4*o+1],t.hasZ&&(e[o*i+2]=e[4*o+2]),t.hasM&&(e[o*i+2]=e[4*o+3]);if(e.length=e.length/4*i,r)for(o=0,a=r.length;o<a;o++)r[o]=r[o]/4*i}return n}function o1(t,e){var r=e[e.length-1],n=t.getAttribute("href");null!==n&&(r.link=n),sh(N0,t,e)}function a1(t,e){e[e.length-1].extensionsNode_=t}function s1(t,e){var r=e[0],n=uh({flatCoordinates:[],layoutOptions:{}},D0,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var a=i1(o,i),s=new Sy(i,a);G_(s,!1,r);var u=new dy(s);return u.setProperties(n,!0),u}}function u1(t,e){var r=e[0],n=uh({flatCoordinates:[],ends:[],layoutOptions:{}},G0,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var s=i1(a,i,o),u=new Py(i,s,o);G_(u,!1,r);var l=new dy(u);return l.setProperties(n,!0),l}}function l1(t,e){var r=e[0],n=uh({},q0,t,e);if(n){var i={},o=n1([],i,t,n),a=i1(i,o),s=new ds(o,a);G_(s,!1,r);var u=new dy(s);return u.setProperties(n,!0),u}}function c1(t,e,r){t.setAttribute("href",e);var n=r[r.length-1].properties,i=[n.linkText,n.linkType];ch({node:t},Y0,ih,i,r,V0)}function h1(t,e,r){var n=r[r.length-1],i=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case Ta:0!==e[3]&&(o.time=e[3]);case Oa:0!==e[2]&&(o.ele=e[2]);break;case Pa:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?H0[i]:$0[i],s=oh(o,a);ch({node:t,properties:o},t1,ih,s,r,a)}var f1=F0,p1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d1="barometric",m1="gps",y1="none",g1=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,v1=/^H.([A-Z]{3}).*?:(.*)/,_1=/^HFDTE(\d{2})(\d{2})(\d{2})/,b1=/\r\n|\r|\n/,w1=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Vn("EPSG:4326"),r.altitudeMode_=n.altitudeMode?n.altitudeMode:y1,r}return p1(e,t),e.prototype.readFeatureFromText=function(t,e){var r,n,i=this.altitudeMode_,o=t.split(b1),a={},s=[],u=2e3,l=0,c=1,h=-1;for(r=0,n=o.length;r<n;++r){var f=o[r],p=void 0;if("B"==f.charAt(0)){if(p=g1.exec(f)){var d=parseInt(p[1],10),m=parseInt(p[2],10),y=parseInt(p[3],10),g=parseInt(p[4],10)+parseInt(p[5],10)/6e4;"S"==p[6]&&(g=-g);var v=parseInt(p[7],10)+parseInt(p[8],10)/6e4;if("W"==p[9]&&(v=-v),s.push(v,g),i!=y1){var _=void 0;_=i==m1?parseInt(p[11],10):i==d1?parseInt(p[12],10):0,s.push(_)}var b=Date.UTC(u,l,c,d,m,y);b<h&&(b=Date.UTC(u,l,c+1,d,m,y)),s.push(b/1e3),h=b}}else"H"==f.charAt(0)&&((p=_1.exec(f))?(c=parseInt(p[1],10),l=parseInt(p[2],10)-1,u=2e3+parseInt(p[3],10)):(p=v1.exec(f))&&(a[p[1]]=p[2].trim()))}if(0===s.length)return null;var w=new Sy(s,i==y1?Pa:Ta),M=new dy(G_(w,!1,e));return M.setProperties(a,!0),M},e.prototype.readFeaturesFromText=function(t,e){var r=this.readFeatureFromText(t,e);return r?[r]:[]},e}(xV),M1="version1",S1="version2",x1="version3",E1={};E1[M1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},E1[S1]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},E1[x1]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},E1.none={none:{supports:[],formats:[],qualities:[]}};var O1=new RegExp("^https?://library.stanford.edu/iiif/image-api/(1.1/)?compliance.html#level[0-2]$"),P1=new RegExp("^https?://iiif.io/api/image/2/level[0-2](.json)?$"),T1=new RegExp("(^https?://iiif.io/api/image/3/level[0-2](.json)?$)|(^level[0-2]$)");var I1={};I1[M1]=function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=E1[M1].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),supports:e.supports,formats:e.formats.concat([void 0===t.imageInfo.formats?[]:t.imageInfo.formats]),qualities:e.qualities.concat([void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},I1[S1]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=r&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=r&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=r&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:e.supports.concat(n),formats:e.formats.concat(i),qualities:e.qualities.concat(o)}},I1[x1]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=void 0===t.imageInfo.extraFormats?e.formats:e.formats.concat(t.imageInfo.extraFormats),n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return["jpg","png","gif"].includes(t)})).reduce((function(t,e){return void 0===t&&r.includes(e)?e:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:e.supports.concat(t.imageInfo.extraFeatures),formats:r,qualities:void 0===t.imageInfo.extraQualities?e.qualities:e.qualities.concat(t.imageInfo.extraQualities),preferredFormat:n}};var L1=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return M1;case"http://iiif.io/api/image/2/context.json":return S1;case"http://iiif.io/api/image/3/context.json":return x1;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(M1)&&this.imageInfo.identifier)return M1}Or(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case M1:if(O1.test(this.imageInfo.profile))return this.imageInfo.profile;break;case x1:if(T1.test(this.imageInfo.profile))return this.imageInfo.profile;break;case S1:if("string"==typeof this.imageInfo.profile&&P1.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&P1.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var r=e.match(/level[0-2](\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?E1.none.none:E1[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},r=this.getImageApiVersion();if(void 0!==r){var n=void 0===r?void 0:I1[r](this);if(void 0!==n)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==e.format&&n.formats.includes(e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort((function(t,e){return e-t})):void 0,tileSize:n.tileSize}}},t}(),R1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),C1=[null],A1=ah(C1,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:F1}),k1=ah(C1,{node:function(t,e){var r=e[0],n=e[e.length-1],i=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.nodes[i]=o;var a=uh({tags:{}},j1,t,e);if(!jn(a.tags)){var s=new ds(o);G_(s,!1,r);var u=new dy(s);u.setId(i),u.setProperties(a.tags,!0),n.features.push(u)}},way:function(t,e){var r=uh({id:t.getAttribute("id"),ndrefs:[],tags:{}},A1,t,e);e[e.length-1].ways.push(r)}}),N1=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=Vn("EPSG:4326"),e}return R1(e,t),e.prototype.readFeaturesFromNode=function(t,e){var r=this.getReadOptions(t,e);if("osm"==t.localName){for(var n=uh({nodes:{},ways:[],features:[]},k1,t,[r]),i=0;i<n.ways.length;i++){for(var o=n.ways[i],a=[],s=0,u=o.ndrefs.length;s<u;s++){Mi(a,n.nodes[o.ndrefs[s]])}var l=void 0;G_(l=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ls(a,Ea,[a.length]):new Sy(a,Ea),!1,r);var c=new dy(l);c.setId(o.id),c.setProperties(o.tags,!0),n.features.push(c)}if(n.features)return n.features}return[]},e}(W_),j1=ah(C1,{tag:F1});function F1(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var D1=N1;function B1(t,e,r,n,i,o){var a,s;void 0!==i?(a=i,s=void 0!==o?o:0):(a=[],s=0);for(var u=e;u<r;){var l=t[u++];a[s++]=t[u++],a[s++]=l;for(var c=2;c<n;++c)a[s++]=t[u++]}return a.length=s,a}var G1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function z1(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=0,s=t.length;a<s;)for(n=0;n<e;++n,++a){var u=t[a],l=u-o[n];o[n]=u,t[a]=l}return q1(t,i)}function U1(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=V1(t,i),s=0,u=a.length;s<u;)for(n=0;n<e;++n,++s)o[n]+=a[s],a[s]=o[n];return a}function q1(t,e){for(var r=e||1e5,n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*r);return function(t){for(var e=0,r=t.length;e<r;++e){var n=t[e];t[e]=n<0?~(n<<1):n<<1}return function(t){for(var e="",r=0,n=t.length;r<n;++r)e+=Y1(t[r]);return e}(t)}(t)}function V1(t,e){for(var r=e||1e5,n=function(t){for(var e=function(t){for(var e=[],r=0,n=0,i=0,o=t.length;i<o;++i){var a=t.charCodeAt(i)-63;r|=(31&a)<<n,a<32?(e.push(r),r=0,n=0):n+=5}return e}(t),r=0,n=e.length;r<n;++r){var i=e[r];e[r]=1&i?~(i>>1):i>>1}return e}(t),i=0,o=n.length;i<o;++i)n[i]/=r;return n}function Y1(t){for(var e,r="";t>=32;)e=63+(32|31&t),r+=String.fromCharCode(e),t>>=5;return e=t+63,r+=String.fromCharCode(e)}var Z1=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Vn("EPSG:4326"),r.factor_=n.factor?n.factor:1e5,r.geometryLayout_=n.geometryLayout?n.geometryLayout:Ea,r}return G1(e,t),e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);return new dy(r)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var r=Ya(this.geometryLayout_),n=U1(t,r,this.factor_);B1(n,0,n.length,r,n);var i=ns(n,0,n.length,r);return G_(new Sy(i,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):(Or(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var r=(t=G_(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return B1(r,0,r.length,n,r),z1(r,n,this.factor_)},e}(xV),W1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H1=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.layerName_=n.layerName,r.layers_=n.layers?n.layers:null,r.dataProjection=Vn(n.dataProjection?n.dataProjection:"EPSG:4326"),r}return W1(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var r=t,n=void 0,i=null,o=null;r.transform&&(i=(n=r.transform).scale,o=n.translate);var a=r.arcs;n&&function(t,e,r){for(var n=0,i=t.length;n<i;++n)$1(t[n],e,r)}(a,i,o);var s=[],u=r.objects,l=this.layerName_,c=void 0;for(var h in u)this.layers_&&-1==this.layers_.indexOf(h)||("GeometryCollection"===u[h].type?(c=u[h],s.push.apply(s,J1(c,a,i,o,l,h,e))):(c=u[h],s.push(Q1(c,a,i,o,l,h,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(Nj),X1={Point:function(t,e,r){var n=t.coordinates;e&&r&&t2(n,e,r);return new ds(n)},LineString:function(t,e){var r=K1(t.arcs,e);return new Sy(r)},Polygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=K1(t.arcs[n],e);return new Ls(r)},MultiPoint:function(t,e,r){var n=t.coordinates;if(e&&r)for(var i=0,o=n.length;i<o;++i)t2(n[i],e,r);return new Ey(n)},MultiLineString:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=K1(t.arcs[n],e);return new Py(r)},MultiPolygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n){for(var o=t.arcs[n],a=[],s=0,u=o.length;s<u;++s)a[s]=K1(o[s],e);r[n]=a}return new Iy(r)}};function K1(t,e){for(var r,n,i=[],o=0,a=t.length;o<a;++o)r=t[o],o>0&&i.pop(),n=r>=0?e[r]:e[~r].slice().reverse(),i.push.apply(i,n);for(var s=0,u=i.length;s<u;++s)i[s]=i[s].slice();return i}function J1(t,e,r,n,i,o,a){for(var s=t.geometries,u=[],l=0,c=s.length;l<c;++l)u[l]=Q1(s[l],e,r,n,i,o,a);return u}function Q1(t,e,r,n,i,o,a){var s,u=t.type,l=X1[u];s="Point"===u||"MultiPoint"===u?l(t,r,n):l(t,e);var c=new dy;c.setGeometry(G_(s,!1,a)),void 0!==t.id&&c.setId(t.id);var h=t.properties;return i&&(h||(h={}),h[i]=o),h&&c.setProperties(h,!0),c}function $1(t,e,r){for(var n=0,i=0,o=0,a=t.length;o<a;++o){var s=t[o];n+=s[0],i+=s[1],s[0]=n,s[1]=i,t2(s,e,r)}}function t2(t,e,r){t[0]=t[0]*e[0]+r[0],t[1]=t[1]*e[1]+r[1]}var e2=H1,r2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n2=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureNS_="http://mapserver.gis.umn.edu/mapserver",r.gmlFormat_=new NT,r.layers_=n.layers?n.layers:null,r}return r2(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var r=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==r)for(var i=0,o=t.childNodes.length;i<o;i++){var a=t.childNodes[i];if(a.nodeType===Node.ELEMENT_NODE){var s=a,u=e[0],l=s.localName.replace("_layer","");if(!this.layers_||_i(this.layers_,l)){var c=l+"_feature";u.featureType=c,u.featureNS=this.featureNS_;var h={};h[c]=Jc(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var f=ah([u.featureNS,null],h);s.setAttribute("namespaceURI",this.featureNS_);var p=uh([],f,s,e,this.gmlFormat_);p&&Mi(n,p)}}}if("FeatureCollection"==r){var d=uh([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);d&&(n=d)}return n},e.prototype.readFeaturesFromNode=function(t,e){var r={};return e&&An(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])},e}(W_),i2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o2="addfeatures",a2=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.features=n,o.file=r,o.projection=i,o}return i2(e,t),e}(Li);function s2(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var i=e.item(r),o=new FileReader;o.addEventListener(qi,this.handleResult_.bind(this,i)),o.readAsText(i)}}function u2(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var l2=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{handleEvent:Oi})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],r.projection_=n.projection?Vn(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return i2(e,t),e.prototype.handleResult_=function(t,e){var r=e.target.result,n=this.getMap(),i=this.projection_;i||(i=n.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,u=o.length;s<u;++s){var l=new o[s];if((a=this.tryReadFeatures_(l,r,{featureProjection:i}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new a2(o2,t,a,i))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[di(e,Gi,s2,this),di(e,Di,u2,this),di(e,Bi,u2,this),di(e,Gi,u2,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(yi),this.dropListenKeys_=null)},e}(Nu),c2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h2=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).condition_=n.condition?n.condition:Wu,r.lastAngle_=void 0,r.lastMagnitude_=void 0,r.lastScaleDelta_=0,r.duration_=void 0!==n.duration?n.duration:400,r}return c2(e,t),e.prototype.handleDragEvent=function(t){if(Xu(t)){var e=t.map,r=e.getSize(),n=t.pixel,i=n[0]-r[0]/2,o=r[1]/2-n[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),u=e.getView();if(void 0!==this.lastAngle_){var l=this.lastAngle_-a;u.adjustRotationInternal(l)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&u.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!Xu(t))return!0;var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!Xu(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}($u),f2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p2="Point",d2="LineString",m2="Polygon",y2="Circle",g2="drawstart",v2="drawend",_2="drawabort",b2=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return f2(e,t),e}(Li);var w2=function(t){function e(e){var r=this,n=e;n.stopDown||(n.stopDown=Pi),(r=t.call(this,n)||this).shouldHandle_=!1,r.downPx_=null,r.downTimeout_,r.lastDragTime_,r.freehand_=!1,r.source_=e.source?e.source:null,r.features_=e.features?e.features:null,r.snapTolerance_=e.snapTolerance?e.snapTolerance:12,r.type_=e.type,r.mode_=function(t){var e;t===mr.POINT||t===mr.MULTI_POINT?e=p2:t===mr.LINE_STRING||t===mr.MULTI_LINE_STRING?e=d2:t===mr.POLYGON||t===mr.MULTI_POLYGON?e=m2:t===mr.CIRCLE&&(e=y2);return e}(r.type_),r.stopClick_=!!e.stopClick,r.minPoints_=e.minPoints?e.minPoints:r.mode_===m2?3:2,r.maxPoints_=e.maxPoints?e.maxPoints:1/0,r.finishCondition_=e.finishCondition?e.finishCondition:Oi;var i,o=e.geometryFunction;if(!o)if(r.type_===mr.CIRCLE)o=function(t,e,r){var n=e||new Ny([NaN,NaN]),i=si(t[0],r),o=ma(i,si(t[1],r));n.setCenterAndRadius(i,Math.sqrt(o));var a=oi();return a&&n.transform(r,a),n};else{var a,s=r.mode_;s===p2?a=ds:s===d2?a=Sy:s===m2&&(a=Ls),o=function(t,e,r){var n=e;return n?s===m2?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new a(t),n}}return r.geometryFunction_=o,r.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,r.overlay_=new xS({source:new jS({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=bM(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=e.geometryName,r.condition_=e.condition?e.condition:Zu,r.freehandCondition_,e.freehand?r.freehandCondition_=Uu:r.freehandCondition_=e.freehandCondition?e.freehandCondition:Wu,r.addEventListener(to(Cu),r.updateState_),r}return f2(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===Ni&&e.preventDefault(),this.freehand_=this.mode_!==p2&&this.freehandCondition_(e);var r=e.type===_o.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&e.type===_o.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===_o.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===_o.POINTERDOWN?n=!1:r?(n=e.type===_o.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===_o.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===_o.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new wo(_o.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var r=this.mode_===y2;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||r?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===p2&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],i=e[1]-r[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var r=!1,n=[this.finishCoordinate_];if(this.mode_===d2)r=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===m2){var i=this.sketchCoords_;r=i[0].length>this.minPoints_,n=[i[0][0],i[0][i[0].length-2]]}if(r)for(var o=t.map,a=0,s=n.length;a<s;a++){var u=n[a],l=o.getPixelFromCoordinate(u),c=t.pixel,h=c[0]-l[0],f=c[1]-l[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+f*f)<=p){this.finishCoordinate_=u;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new dy(new ds(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,r=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===p2?this.sketchCoords_=e.slice():this.mode_===m2?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new dy(new Sy(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,r);this.sketchFeature_=new dy,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new b2(g2,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,r,n,i=t.coordinate,o=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();(this.mode_===p2?r=this.sketchCoords_:this.mode_===m2?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(i=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=i[0],r[1]=i[1],this.geometryFunction_(this.sketchCoords_,o,a),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(i);if(o.getType()==mr.POLYGON&&this.mode_!==m2){this.sketchLine_||(this.sketchLine_=new dy);var s=o.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new Sy(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,r,n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===d2?(this.finishCoordinate_=t.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),this.geometryFunction_(r,n,i)):this.mode_===m2&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===d2?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,r),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===m2&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,r)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===d2?(e.pop(),this.geometryFunction_(e,r,n)):this.mode_===m2&&(e[0].pop(),this.geometryFunction_(e,r,n),e=r.getCoordinates()),this.type_===mr.MULTI_POINT?t.setGeometry(new Ey([e])):this.type_===mr.MULTI_LINE_STRING?t.setGeometry(new Py([e])):this.type_===mr.MULTI_POLYGON&&t.setGeometry(new Iy([e])),this.dispatchEvent(new b2(v2,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new b2(_2,t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,r=[];e===d2?r=this.sketchCoords_:e===m2&&(r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var n=r.pop(),i=0;i<t.length;i++)this.addToDrawing_(t[i]);this.addToDrawing_(n)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new b2(g2,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}($u),M2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),S2="extentchanged",x2=function(t){function e(e){var r=t.call(this,S2)||this;return r.extent=e,r}return M2(e,t),e}(Li);function E2(){var t=bM();return function(e,r){return t[mr.POINT]}}function O2(t){return function(e){return Fr([t,e])}}function P2(t,e){return t[0]==e[0]?function(r){return Fr([t,[r[0],e[1]]])}:t[1]==e[1]?function(r){return Fr([t,[e[0],r[1]]])}:null}var T2=function(t){function e(e){var r,n=this,i=e||{};return(n=t.call(this,i)||this).extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new xS({source:new jS({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(r=bM(),function(t,e){return r[mr.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new xS({source:new jS({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:E2(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return M2(e,t),e.prototype.snapToVertex_=function(t,e){var r=e.getCoordinateFromPixelInternal(t),n=this.getExtentInternal();if(n){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);i.sort((function(t,e){return ga(r,t)-ga(r,e)}));var o=i[0],a=la(r,o),s=e.getPixelFromCoordinateInternal(a);if(ya(t,s)<=this.pixelTolerance_){var u=e.getPixelFromCoordinateInternal(o[0]),l=e.getPixelFromCoordinateInternal(o[1]),c=ma(s,u),h=ma(s,l),f=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(a=c>h?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,r=t.map,n=this.snapToVertex_(e,r);n||(n=r.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Cs(t)):e.setGeometry(void 0):(e=new dy(t?Cs(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new dy(new ds(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=_o.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,r=t.map,n=this.getExtentInternal(),i=this.snapToVertex_(e,r),o=function(t){var e=null,r=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?r=n[3]:t[1]==n[3]&&(r=n[1]),null!==e&&null!==r?[e,r]:null};if(i&&n){var a=i[0]==n[0]||i[0]==n[2]?i[0]:null,s=i[1]==n[1]||i[1]==n[3]?i[1]:null;null!==a&&null!==s?this.pointerHandler_=O2(o(i)):null!==a?this.pointerHandler_=P2(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=P2(o([n[0],s]),o([n[2],s])))}else i=r.getCoordinateFromPixelInternal(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=O2(i);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtentInternal();return e&&0!==nn(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return ui(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new x2(this.extent_))},e}($u),I2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),L2=[0,0,0,0],R2=[],C2="modifystart",A2="modifyend",k2=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.features=r,i.mapBrowserEvent=n,i}return I2(e,t),e}(Li);function N2(t,e){return t.index-e.index}function j2(t,e,r){var n=e.geometry;if(n.getType()===mr.CIRCLE){var i=n;if(1===e.index){var o=oi();o&&(i=i.clone().transform(o,r));var a=ma(i.getCenter(),si(t,r)),s=Math.sqrt(a)-i.getRadius();return s*s}}var u=si(t,r);return R2[0]=si(e.segment[0],r),R2[1]=si(e.segment[1],r),ga(u,R2)}function F2(t,e,r){var n=e.geometry;if(n.getType()===mr.CIRCLE&&1===e.index){var i=n,o=oi();return o&&(i=i.clone().transform(o,r)),ai(i.getClosestPoint(si(t,r)),r)}var a=si(t,r);return R2[0]=si(e.segment[0],r),R2[1]=si(e.segment[1],r),ai(la(a,R2),r)}var D2=function(t){function e(e){var r,n,i=t.call(this,e)||this;if(i.boundHandleFeatureChange_=i.handleFeatureChange_.bind(i),i.condition_=e.condition?e.condition:Ku,i.defaultDeleteCondition_=function(t){return Bu(t)&&Yu(t)},i.deleteCondition_=e.deleteCondition?e.deleteCondition:i.defaultDeleteCondition_,i.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Uu,i.vertexFeature_=null,i.vertexSegments_=null,i.lastPixel_=[0,0],i.ignoreNextSingleClick_=!1,i.modified_=!1,i.rBush_=new AS,i.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.snappedToVertex_=!1,i.changingFeature_=!1,i.dragSegments_=[],i.overlay_=new xS({source:new jS({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(r=bM(),function(t,e){return r[mr.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i)},i.source_=null,e.source?(i.source_=e.source,n=new oo(i.source_.getFeatures()),i.source_.addEventListener(IS,i.handleSourceAdd_.bind(i)),i.source_.addEventListener(CS,i.handleSourceRemove_.bind(i))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return i.features_=n,i.features_.forEach(i.addFeature_.bind(i)),i.features_.addEventListener(hi,i.handleFeatureAdd_.bind(i)),i.features_.addEventListener(fi,i.handleFeatureRemove_.bind(i)),i.lastPointerEvent_=null,i}return I2(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var r=this.SEGMENT_WRITERS_[e.getType()];r&&r(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(Ai,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new k2(C2,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Ai,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,r=[];e.forEach((function(e){t===e.feature&&r.push(e)}));for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(Fr(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert(Fr(u),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert(Fr(u),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,geometry:e,depth:[a,n],index:l,segment:h};this.rBush_.insert(Fr(h),f)}},e.prototype.writeCircleGeometry_=function(t,e){var r=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[r,r]},i={feature:t,geometry:e,index:1,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert(Hr(r),n);var a=e,s=oi();if(s&&this.getMap()){var u=this.getMap().getView().getProjection();a=As(a=a.clone().transform(s,u)).transform(u,s)}this.rBush_.insert(a.getExtent(),i)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(t,i)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new dy(new ds(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=_o.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(r=!(e.type!=_o.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==_o.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!r);var r},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){for(var i=this.dragSegments_[r],o=i[0],a=o.depth,s=o.geometry,u=void 0,l=o.segment,c=i[1];e.length<s.getStride();)e.push(l[c][e.length]);switch(s.getType()){case mr.POINT:u=e,l[0]=e,l[1]=e;break;case mr.MULTI_POINT:(u=s.getCoordinates())[o.index]=e,l[0]=e,l[1]=e;break;case mr.LINE_STRING:(u=s.getCoordinates())[o.index+c]=e,l[c]=e;break;case mr.MULTI_LINE_STRING:case mr.POLYGON:(u=s.getCoordinates())[a[0]][o.index+c]=e,l[c]=e;break;case mr.MULTI_POLYGON:(u=s.getCoordinates())[a[1]][a[0]][o.index+c]=e,l[c]=e;break;case mr.CIRCLE:if(l[0]=e,l[1]=e,0===o.index)this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var h=t.map.getView().getProjection(),f=ya(si(s.getCenter(),h),si(e,h)),p=oi();if(p){var d=s.clone().transform(p,h);d.setRadius(f),f=d.transform(h,p).getRadius()}s.setRadius(f),this.changingFeature_=!1}}u&&this.setGeometryCoordinates_(s,u)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var n=t.map.getView().getProjection(),i=[],o=r.getGeometry().getCoordinates(),a=Fr([o]),s=this.rBush_.getInExtent(a),u={};s.sort(N2);for(var l=0,c=s.length;l<c;++l){var h=s[l],f=h.segment,p=Mr(h.feature),d=h.depth;if(d&&(p+="-"+d.join("-")),u[p]||(u[p]=new Array(2)),h.geometry.getType()!==mr.CIRCLE||1!==h.index)if(!fa(f[0],o)||u[p][0])if(!fa(f[1],o)||u[p][1])Mr(f)in this.vertexSegments_&&!u[p][0]&&!u[p][1]&&this.insertVertexCondition_(t)&&i.push([h,o]);else{if((h.geometry.getType()===mr.LINE_STRING||h.geometry.getType()===mr.MULTI_LINE_STRING)&&u[p][0]&&0===u[p][0].index)continue;this.dragSegments_.push([h,1]),u[p][1]=h}else this.dragSegments_.push([h,0]),u[p][0]=h;else fa(F2(e,h,n),o)&&!u[p][0]&&(this.dragSegments_.push([h,0]),u[p][0]=h)}i.length&&this.willModifyFeatures_(t);for(var m=i.length-1;m>=0;--m)this.insertVertex_.apply(this,i[m])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var r=this.dragSegments_[e][0],n=r.geometry;if(n.getType()===mr.CIRCLE){var i=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update(Hr(i),o);var s=n,u=oi();if(u){var l=t.map.getView().getProjection();s=As(s=s.clone().transform(u,l)).transform(l,u)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(Fr(r.segment),r)}return this.modified_&&(this.dispatchEvent(new k2(A2,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,r){var n=r||e.getCoordinateFromPixel(t),i=e.getView().getProjection(),o=ui(Dr(li(Hr(n,L2),i),e.getView().getResolution()*this.pixelTolerance_,L2),i),a=this.rBush_.getInExtent(o);if(a.length>0){a.sort((function(t,e){return j2(n,t,i)-j2(n,e,i)}));var s=a[0],u=s.segment,l=F2(n,s,i),c=e.getPixelFromCoordinate(l),h=ya(t,c);if(h<=this.pixelTolerance_){var f={};if(s.geometry.getType()===mr.CIRCLE&&1===s.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{var p=e.getPixelFromCoordinate(u[0]),d=e.getPixelFromCoordinate(u[1]),m=ma(c,p),y=ma(c,d);h=Math.sqrt(Math.min(m,y)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(l=m>y?u[1]:u[0]),this.createOrUpdateVertexFeature_(l);for(var g=1,v=a.length;g<v;++g){var _=a[g].segment;if(!(fa(u[0],_[0])&&fa(u[1],_[1])||fa(u[0],_[1])&&fa(u[1],_[0])))break;f[Mr(_)]=!0}}return f[Mr(u)]=!0,void(this.vertexSegments_=f)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var r,n=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case mr.MULTI_LINE_STRING:case mr.POLYGON:(r=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case mr.MULTI_POLYGON:(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case mr.LINE_STRING:(r=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,s,a,1);var l={segment:[n[0],e],feature:i,geometry:o,depth:a,index:s};u.insert(Fr(l.segment),l),this.dragSegments_.push([l,1]);var c={segment:[e,n[1]],feature:i,geometry:o,depth:a,index:s+1};u.insert(Fr(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=_o.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new k2(A2,this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,r,n,i,o,a,s,u,l,c,h=this.dragSegments_,f={},p=!1;for(i=h.length-1;i>=0;--i)c=Mr((l=(r=h[i])[0]).feature),l.depth&&(c+="-"+l.depth.join("-")),c in f||(f[c]={}),0===r[1]?(f[c].right=l,f[c].index=l.index):1==r[1]&&(f[c].left=l,f[c].index=l.index+1);for(c in f){switch(u=f[c].right,a=f[c].left,(s=(o=f[c].index)-1)<0&&(s=0),t=e=(n=(l=void 0!==a?a:u).geometry).getCoordinates(),p=!1,n.getType()){case mr.MULTI_LINE_STRING:e[l.depth[0]].length>2&&(e[l.depth[0]].splice(o,1),p=!0);break;case mr.LINE_STRING:e.length>2&&(e.splice(o,1),p=!0);break;case mr.MULTI_POLYGON:t=t[l.depth[1]];case mr.POLYGON:(t=t[l.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),s=t.length-1))}if(p){this.setGeometryCoordinates_(n,e);var d=[];if(void 0!==a&&(this.rBush_.remove(a),d.push(a.segment[0])),void 0!==u&&(this.rBush_.remove(u),d.push(u.segment[1])),void 0!==a&&void 0!==u){var m={depth:l.depth,feature:l.feature,geometry:l.geometry,index:s,segment:d};this.rBush_.insert(Fr(m.segment),m)}this.updateSegmentIndices_(n,o,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return p},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,r,n){this.rBush_.forEachInExtent(t.getExtent(),(function(i){i.geometry===t&&(void 0===r||void 0===i.depth||xi(i.depth,r))&&i.index>e&&(i.index+=n)}))},e}($u),B2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function G2(t){return t.feature?t.feature:t.element?t.element:void 0}var z2=[],U2=function(t){function e(e){var r=this,n=e||{},i=n;return i.handleDownEvent||(i.handleDownEvent=Oi),i.stopDown||(i.stopDown=Pi),(r=t.call(this,i)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new AS,r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r)},r}return B2(e,t),e.prototype.addFeature=function(t,e){var r=void 0===e||e,n=Mr(t),i=t.getGeometry();if(i){var o=this.SEGMENT_WRITERS_[i.getType()];o&&(this.indexedFeaturesExtents_[n]=i.getExtent([1/0,1/0,-1/0,-1/0]),o(t,i))}r&&(this.featureChangeListenerKeys_[n]=di(t,Ai,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var r=this.snapTo(e.pixel,e.coordinate,e.map);return r.snapped&&(e.coordinate=r.vertex.slice(0,2),e.pixel=r.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=G2(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=G2(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var r=Mr(e);r in this.pendingFeatures_||(this.pendingFeatures_[r]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Nn(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var r=void 0===e||e,n=Mr(t),i=this.indexedFeaturesExtents_[n];if(i){var o=this.rBush_,a=[];o.forEachInExtent(i,(function(e){t===e.feature&&a.push(e)}));for(var s=a.length-1;s>=0;--s)o.remove(a[s])}r&&(yi(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var r=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();r&&(n.forEach(yi),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(di(this.features_,hi,this.handleFeatureAdd_,this),di(this.features_,fi,this.handleFeatureRemove_,this)):this.source_&&n.push(di(this.source_,IS,this.handleFeatureAdd_,this),di(this.source_,CS,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,r){var n=Fr([r.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),i=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(i=i.filter((function(t){return t.feature.getGeometry().getType()!==mr.CIRCLE})));var o=!1,a=null,s=null;if(0===i.length)return{snapped:o,vertex:a,vertexPixel:s};for(var u,l=r.getView().getProjection(),c=si(e,l),h=1/0,f=0;f<i.length;++f){var p=i[f];z2[0]=si(p.segment[0],l),z2[1]=si(p.segment[1],l);var d=ga(c,z2);d<h&&(u=p,h=d)}var m=u.segment;if(this.vertex_&&!this.edge_){var y=r.getPixelFromCoordinate(m[0]),g=r.getPixelFromCoordinate(m[1]),v=ma(t,y),_=ma(t,g);Math.sqrt(Math.min(v,_))<=this.pixelTolerance_&&(o=!0,a=v>_?m[1]:m[0],s=r.getPixelFromCoordinate(a))}else if(this.edge_){var b=u.feature.getGeometry().getType()===mr.CIRCLE;if(b){var w=u.feature.getGeometry(),M=oi();M&&(w=w.clone().transform(M,l)),a=ai(function(t,e){var r=e.getRadius(),n=e.getCenter(),i=n[0],o=n[1],a=t[0]-i,s=t[1]-o;0===a&&0===s&&(a=1);var u=Math.sqrt(a*a+s*s);return[i+r*a/u,o+r*s/u]}(c,w),l)}else z2[0]=si(m[0],l),z2[1]=si(m[1],l),a=ai(la(c,z2),l);if(ya(t,s=r.getPixelFromCoordinate(a))<=this.pixelTolerance_&&(o=!0,this.vertex_&&!b)){y=r.getPixelFromCoordinate(m[0]),g=r.getPixelFromCoordinate(m[1]),v=ma(s,y),_=ma(s,g);Math.sqrt(Math.min(v,_))<=this.pixelTolerance_&&(a=v>_?m[1]:m[0],s=r.getPixelFromCoordinate(a))}}return o&&(s=[Math.round(s[0]),Math.round(s[1])]),{snapped:o,vertex:a,vertexPixel:s}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var r=this.getMap().getView().getProjection(),n=e,i=oi();i&&(n=n.clone().transform(i,r));var o=As(n);i&&o.transform(r,i);for(var a=o.getCoordinates()[0],s=0,u=a.length-1;s<u;++s){var l=a.slice(s,s+2),c={feature:t,segment:l};this.rBush_.insert(Fr(l),c)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i(t,r[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert(Fr(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(Fr(u),l)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,segment:h};this.rBush_.insert(Fr(h),f)}},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(Fr(u),l)}},e}($u),q2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),V2="translatestart",Y2="translating",Z2="translateend",W2=function(t){function e(e,r,n,i,o){var a=t.call(this,e)||this;return a.features=r,a.coordinate=n,a.startCoordinate=i,a.mapBrowserEvent=o,a}return q2(e,t),e}(Li),H2=function(t){function e(e){var r,n=this,i=e||{};if((n=t.call(this,i)||this).lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==i.features?i.features:null,i.layers)if("function"==typeof i.layers)r=i.layers;else{var o=i.layers;r=function(t){return _i(o,t)}}else r=Oi;return n.layerFilter_=r,n.filter_=i.filter?i.filter:Oi,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.lastFeature_=null,n.addEventListener(to(Cu),n.handleActiveChanged_),n}return q2(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new oo([this.lastFeature_]);return this.dispatchEvent(new W2(V2,e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new oo([this.lastFeature_]);return this.dispatchEvent(new W2(Z2,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],i=this.features_||new oo([this.lastFeature_]);i.forEach((function(t){var e=t.getGeometry();e.translate(r,n),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new W2(Y2,i,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||_i(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}($u);function X2(t,e,r){for(var n,i,o,a,s,u,l=[],c=t(0),h=t(1),f=e(c),p=e(h),d=[h,c],m=[p,f],y=[1,0],g={},v=1e5;--v>0&&y.length>0;)o=y.pop(),c=d.pop(),f=m.pop(),(u=o.toString())in g||(l.push(f[0],f[1]),g[u]=!0),a=y.pop(),h=d.pop(),p=m.pop(),lr((i=e(n=t(s=(o+a)/2)))[0],i[1],f[0],f[1],p[0],p[1])<r?(l.push(p[0],p[1]),g[u=a.toString()]=!0):(y.push(a,s,s,o),m.push(p,i,i,f),d.push(h,n,n,c));return l}var K2=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),J2=new mM({color:"rgba(0,0,0,0.2)"}),Q2=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],$2=function(t){function e(e){var r=this,n=e||{},i=An({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete i.maxLines,delete i.strokeStyle,delete i.targetSize,delete i.showLabels,delete i.lonLabelFormatter,delete i.latLabelFormatter,delete i.lonLabelPosition,delete i.latLabelPosition,delete i.lonLabelStyle,delete i.latLabelStyle,delete i.intervals,(r=t.call(this,i)||this).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxX_=1/0,r.maxY_=1/0,r.minX_=-1/0,r.minY_=-1/0,r.targetSize_=void 0!==n.targetSize?n.targetSize:100,r.maxLines_=void 0!==n.maxLines?n.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:J2,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.bottomLeft_=null,r.bottomRight_=null,r.topLeft_=null,r.topRight_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,n.showLabels&&(r.lonLabelFormatter_=null==n.lonLabelFormatter?ca.bind(r,"EW"):n.lonLabelFormatter,r.latLabelFormatter_=null==n.latLabelFormatter?ca.bind(r,"NS"):n.latLabelFormatter,r.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,r.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,r.lonLabelStyleBase_=new MM({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new Fx({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new dM({color:"rgba(0,0,0,1)"}),stroke:new mM({color:"rgba(255,255,255,1)",width:3})})}),r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(r),r.latLabelStyleBase_=new MM({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new Fx({font:"12px Calibri,sans-serif",textAlign:"right",fill:new dM({color:"rgba(0,0,0,1)"}),stroke:new mM({color:"rgba(255,255,255,1)",width:3})})}),r.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(r),r.meridiansLabels_=[],r.parallelsLabels_=[],r.addEventListener(jo,r.drawLabels_.bind(r))),r.intervals_=void 0!==n.intervals?n.intervals:Q2,r.setSource(new jS({loader:r.loaderFunction.bind(r),strategy:r.strategyFunction.bind(r),features:new oo,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),r.featurePool_=[],r.lineStyle_=new MM({stroke:r.strokeStyle_}),r.loadedExtent_=null,r.renderedExtent_=null,r.setRenderOrder(null),r}return K2(e,t),e.prototype.strategyFunction=function(t,e){var r,n,i,o=t.slice();return this.projection_&&this.getSource().getWrapX()&&_n(o,this.projection_),this.loadedExtent_&&(r=this.loadedExtent_,n=o,i=e,Math.abs(r[0]-n[0])<i&&Math.abs(r[2]-n[2])<i&&Math.abs(r[1]-n[1])<i&&Math.abs(r[3]-n[3])<i?o=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[o]},e.prototype.loaderFunction=function(t,e,r){this.loadedExtent_=t;var n=this.getSource(),i=hn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.renderedExtent_&&Kr(this.renderedExtent_,i)||(this.renderedExtent_=i,yn(i)))){var o=sn(i),a=e*e/4;(!this.projection_||!Kn(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(i,o,e,a);var s,u=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);u>this.featurePool_.length;)s=new dy,this.featurePool_.push(s);var l=n.getFeaturesCollection();l.clear();var c,h,f=0;for(c=0,h=this.meridians_.length;c<h;++c)(s=this.featurePool_[f++]).setGeometry(this.meridians_[c]),s.setStyle(this.lineStyle_),l.push(s);for(c=0,h=this.parallels_.length;c<h;++c)(s=this.featurePool_[f++]).setGeometry(this.parallels_[c]),s.setStyle(this.lineStyle_),l.push(s)}},e.prototype.addMeridian_=function(t,e,r,n,i,o){var a=this.getMeridian_(t,e,r,n,o);if(mn(a.getExtent(),i)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=s:this.meridiansLabels_[o]={geom:new ds([]),text:s}}this.meridians_[o++]=a}return o},e.prototype.addParallel_=function(t,e,r,n,i,o){var a=this.getParallel_(t,e,r,n,o);if(mn(a.getExtent(),i)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=s:this.parallelsLabels_[o]={geom:new ds([]),text:s}}this.parallels_[o++]=a}return o},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,r=t.frameState.extent,n=sn(r),i=r;if(e){var o=dn(r),a=cn(r),s=Math.abs(Math.cos(e)),u=Math.abs(Math.sin(e)),l=(u*a-s*o)/(u*u-s*s),c=(u*o-s*a)/(u*u-s*s);i=[n[0]-l/2,n[1]-c/2,n[0]+l/2,n[1]+c/2]}var h=0,f=0,p=this.latLabelPosition_<.5,d=this.projection_.getExtent(),m=dn(d);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Ur(d,r)&&(h=Math.floor((r[0]-d[0])/m),f=Math.ceil((r[2]-d[2])/m),p=p!==Math.abs(e)>Math.PI/2);for(var y=Nc(t),g=h;g<=f;++g){var v=this.meridians_.length+this.parallels_.length,_=void 0,b=void 0,w=void 0,M=void 0;if(this.meridiansLabels_)for(b=0,w=this.meridiansLabels_.length;b<w;++b){var S=this.meridians_[b];if(e||0!==g)(x=S.clone()).translate(g*m,0),x.rotate(-e,n),(M=this.getMeridianPoint_(x,i,b)).rotate(e,n);else M=this.getMeridianPoint_(S,r,b);(_=this.featurePool_[v++]).setGeometry(M),_.set("graticule_label",this.meridiansLabels_[b].text),y.drawFeature(_,this.lonLabelStyle_(_))}if(this.parallelsLabels_&&(g===h&&p||g===f&&!p))for(b=0,w=this.parallels_.length;b<w;++b){var x;S=this.parallels_[b];if(e||0!==g)(x=S.clone()).translate(g*m,0),x.rotate(-e,n),(M=this.getParallelPoint_(x,i,b)).rotate(e,n);else M=this.getParallelPoint_(S,r,b);(_=this.featurePool_[v++]).setGeometry(M),_.set("graticule_label",this.parallelsLabels_[b].text),y.drawFeature(_,this.latLabelStyle_(_))}}},e.prototype.createGraticule_=function(t,e,r,n){var i=this.getInterval_(r);if(-1==i)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o=!1,a=this.projection_.getExtent(),s=dn(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Ur(a,t)&&(dn(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var u=[sr(e[0],this.minX_,this.maxX_),sr(e[1],this.minY_,this.maxY_)],l=this.toLonLatTransform_(u);isNaN(l[1])&&(l[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var c,h,f,p,d=sr(l[0],this.minLon_,this.maxLon_),m=sr(l[1],this.minLat_,this.maxLat_),y=this.maxLines_,g=t;o||(g=[sr(t[0],this.minX_,this.maxX_),sr(t[1],this.minY_,this.maxY_),sr(t[2],this.minX_,this.maxX_),sr(t[3],this.minY_,this.maxY_)]);var v=vn(g,this.toLonLatTransform_,void 0,8),_=v[3],b=v[2],w=v[1],M=v[0];if(o||(zr(g,this.bottomLeft_)&&(M=this.minLon_,w=this.minLat_),zr(g,this.bottomRight_)&&(b=this.maxLon_,w=this.minLat_),zr(g,this.topLeft_)&&(M=this.minLon_,_=this.maxLat_),zr(g,this.topRight_)&&(b=this.maxLon_,_=this.maxLat_),_=sr(_,m,this.maxLat_),b=sr(b,d,this.maxLon_),w=sr(w,this.minLat_,m),M=sr(M,this.minLon_,d)),p=sr(d=Math.floor(d/i)*i,this.minLon_,this.maxLon_),h=this.addMeridian_(p,w,_,n,t,0),c=0,o)for(;(p-=i)>=M&&c++<y;)h=this.addMeridian_(p,w,_,n,t,h);else for(;p!=this.minLon_&&c++<y;)p=Math.max(p-i,this.minLon_),h=this.addMeridian_(p,w,_,n,t,h);if(p=sr(d,this.minLon_,this.maxLon_),c=0,o)for(;(p+=i)<=b&&c++<y;)h=this.addMeridian_(p,w,_,n,t,h);else for(;p!=this.maxLon_&&c++<y;)p=Math.min(p+i,this.maxLon_),h=this.addMeridian_(p,w,_,n,t,h);for(this.meridians_.length=h,this.meridiansLabels_&&(this.meridiansLabels_.length=h),f=sr(m=Math.floor(m/i)*i,this.minLat_,this.maxLat_),h=this.addParallel_(f,M,b,n,t,0),c=0;f!=this.minLat_&&c++<y;)f=Math.max(f-i,this.minLat_),h=this.addParallel_(f,M,b,n,t,h);for(f=sr(m,this.minLat_,this.maxLat_),c=0;f!=this.maxLat_&&c++<y;)f=Math.min(f+i,this.maxLat_),h=this.addParallel_(f,M,b,n,t,h);this.parallels_.length=h,this.parallelsLabels_&&(this.parallelsLabels_.length=h)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],n=-1,i=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,u=this.intervals_.length;s<u;++s){var l=sr(this.intervals_[s]/2,0,90),c=sr(r,-90+l,90-l);if(o[0]=e-l,o[1]=c-l,a[0]=e+l,a[1]=c+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;n=this.intervals_[s]}return n},e.prototype.getMeridian_=function(t,e,r,n,i){var o=function(t,e,r,n,i){return X2((function(n){return[t,e+(r-e)*n]}),Qn(Vn("EPSG:4326"),n),i)}(t,e,r,this.projection_,n),a=this.meridians_[i];return a?(a.setFlatCoordinates(Ea,o),a.changed()):(a=new Sy(o,Ea),this.meridians_[i]=a),a},e.prototype.getMeridianPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=1,o=n.length-1;n[i]>n[o]&&(i=o,o=1);var a=Math.max(e[1],n[i]),s=Math.min(e[3],n[o]),u=sr(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,s),l=[n[i-1]+(n[o-1]-n[i-1])*(u-n[i])/(n[o]-n[i]),u],c=this.meridiansLabels_[r].geom;return c.setCoordinates(l),c},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,r,n,i){var o=function(t,e,r,n,i){return X2((function(n){return[e+(r-e)*n,t]}),Qn(Vn("EPSG:4326"),n),i)}(t,e,r,this.projection_,n),a=this.parallels_[i];return a?(a.setFlatCoordinates(Ea,o),a.changed()):a=new Sy(o,Ea),a},e.prototype.getParallelPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=0,o=n.length-2;n[i]>n[o]&&(i=o,o=0);var a=Math.max(e[0],n[i]),s=Math.min(e[2],n[o]),u=sr(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,s),l=[u,n[i+1]+(n[o+1]-n[i+1])*(u-n[i])/(n[o]-n[i])],c=this.parallelsLabels_[r].geom;return c.setCoordinates(l),c},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=Vn("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];var n=Qn(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var i=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,r){for(var o=r||2,a=n(t,e,o),s=0,u=a.length;s<u;s+=o)a[s]<i&&(a[s]+=360);return a}}this.fromLonLatTransform_=Qn(e,t);var o=vn([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(sn(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(xS),t3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e3=function(t){function e(e,r,n,i,o){var a=this,s=void 0!==o?vc:bc;return(a=t.call(this,e,r,n,s)||this).loader_=void 0!==o?o:null,a.canvas_=i,a.error_=null,a}return t3(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=wc):this.state=bc,this.changed()},e.prototype.load=function(){this.state==vc&&(this.state=_c,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(Wg),r3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n3=function(t){function e(e){var r=t.call(this,e)||this;return r.vectorRenderer_=new MS(e),r.layerImageRatio_=e.getImageRatio(),r.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],r.renderedPixelToCoordinateTransform_=null,r}return r3(e,t),e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(this.vectorRenderer_){var e=ja(this.coordinateToVectorPixelTransform_,ja(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}return new Promise((function(t,e){t([])}))},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,r=t.viewState,n=r.resolution,i=t.viewHints,o=this.vectorRenderer_,a=t.extent;1!==this.layerImageRatio_&&gn(a=a.slice(0),this.layerImageRatio_);var s=dn(a)/n,u=cn(a)/n;if(!i[ea]&&!i[ra]&&!yn(a)){o.useContainer(null,null,1);var l=o.context,c=An({},t,{declutterItems:[],extent:a,size:[s,u],viewState:An({},t.viewState,{rotation:0})}),h=new e3(a,n,e,l.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.renderFrame(c,null),jc(c,null),t())}));h.addEventListener(Ai,function(){h.getState()===bc&&(this.image_=h)}.bind(this)),h.load()}if(this.image_){var f=this.image_,p=f.getResolution()*e/f.getPixelRatio();this.renderedResolution=p,this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.coordinateToVectorPixelTransform_=Da(this.coordinateToVectorPixelTransform_,s/2,u/2,1/p,-1/p,0,-r.center[0],-r.center[1])}return!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,r,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,r,n,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,r,n,i,o)},e}(ny),i3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o3=function(t){function e(e){var r=this,n=e||{},i=An({},n);return delete i.imageRatio,(r=t.call(this,i)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,r}return i3(e,t),e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new n3(this)},e}(EM);function a3(t,e,r,n){var i=document.createElement("script"),o="olc_"+Mr(e);function a(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+o;var s=setTimeout((function(){a(),r&&r()}),1e4);window[o]=function(t){clearTimeout(s),a(),e(t)},document.getElementsByTagName("head")[0].appendChild(i)}var s3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var u3=function(t){function e(e){var r=this,n=void 0!==e.hidpi&&e.hidpi;return(r=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Vn("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:nu,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this).hidpi_=n,r.culture_=void 0!==e.culture?e.culture:"en-us",r.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,r.apiKey_=e.key,r.imagerySet_=e.imagerySet,a3("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+r.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+r.apiKey_+"&c="+r.culture_,r.handleImageryMetadataResponse.bind(r),void 0,"jsonp"),r}return s3(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],r=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=gv(this.getProjection()),i=this.hidpi_?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/i:[e.imageWidth/i,e.imageHeight/i],a=dv({extent:n,minZoom:e.zoomMin,maxZoom:r,tileSize:o});this.tileGrid=a;var s=this.culture_,u=this.hidpi_;if(this.tileUrlFunction=sv(e.imageUrlSubdomains.map((function(t){var r=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,e,i){if(t){ay(t[0],t[1],t[2],r);var o=n;return u&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,r,n=t[0],i=new Array(n),o=1<<n-1;for(e=0;e<n;++e)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),i[e]=String.fromCharCode(r),o>>=1;return i.join("")}(r))}}}))),e.imageryProviders){var l=Jn(Vn("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var r=[],n=t.viewState,i=this.getTileGrid(),o=i.getZForResolution(n.resolution,this.zDirection),a=i.getTileCoordForCoordAndZ(n.center,o)[0];return e.imageryProviders.map((function(e){for(var n=!1,i=e.coverageAreas,o=0,s=i.length;o<s;++o){var u=i[o];if(a>=u.zoomMin&&a<=u.zoomMax){var c=u.bbox;if(mn(vn([c[1],c[0],c[3],c[2]],l),t.extent)){n=!0;break}}}n&&r.push(e.attribution)})),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),r}.bind(this))}this.setState(iu)}else this.setState(ou)},e}(Iv),l3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c3=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX})||this;return r.account_=e.account,r.mapId_=e.map||"",r.config_=e.config||{},r.templateCache_={},r.initializeMap_(),r}return l3(e,t),e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){An(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",e),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var r=e.target;if(!r.status||r.status>=200&&r.status<300){var n=void 0;try{n=JSON.parse(r.responseText)}catch(t){return void this.setState(ou)}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState(iu)}else this.setState(ou)},e.prototype.handleInitError_=function(t){this.setState(ou)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(wA),h3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f3="default",p3="truncated",d3=function(t){function e(e,r,n,i,o,a,s){var u=t.call(this,r,n,i,o,a,s)||this;return u.zoomifyImage_=null,u.tileSize_=e,u}return h3(e,t),e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==Uo){var r=this.tileSize_;if(e.width==r[0]&&e.height==r[1])return this.zoomifyImage_=e,e;var n=Bs(r[0],r[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e},e}(Qg),m3=function(t){function e(e){var r=this,n=e,i=n.size,o=void 0!==n.tierSizeCalculation?n.tierSizeCalculation:f3,a=n.tilePixelRatio||1,s=i[0],u=i[1],l=[],c=n.tileSize||256,h=c*a;switch(o){case f3:for(;s>h||u>h;)l.push([Math.ceil(s/h),Math.ceil(u/h)]),h+=h;break;case p3:for(var f=s,p=u;f>h||p>h;)l.push([Math.ceil(f/h),Math.ceil(p/h)]),f>>=1,p>>=1;break;default:Or(!1,53)}l.push([1,1]),l.reverse();for(var d=[a],m=[0],y=1,g=l.length;y<g;y++)d.push(a<<y),m.push(l[y-1][0]*l[y-1][1]+m[y-1]);d.reverse();var v=new fy({tileSize:c,extent:n.extent||[0,-u,s,0],resolutions:d}),_=n.url;_&&-1==_.indexOf("{TileGroup}")&&-1==_.indexOf("{tileIndex}")&&(_+="{TileGroup}/{z}-{x}-{y}.jpg");var b=lv(_),w=c*a;var M=sv(b.map((function(t){return function(e,r,n){if(e){var i=e[0],o=e[1],a=e[2],s=o+a*l[i][0],u={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+m[i])/w|0)};return t.replace(/\{(\w+?)\}/g,(function(t,e){return u[e]}))}}}))),S=d3.bind(null,hu(c*a));(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,tilePixelRatio:a,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:S,tileGrid:v,tileUrlFunction:M,transition:n.transition})||this).zDirection=n.zDirection;var x=M(v.getTileCoordForCoordAndResolution(sn(v.getExtent()),d[d.length-1]),1,null),E=new Image;return E.addEventListener("error",function(){w=c,this.changed()}.bind(r)),E.src=x,r}return h3(e,t),e}(Iv),y3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function g3(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var v3=function(t){function e(e){var r=this,n=e||{},i=n.url||"";i+=i.lastIndexOf("/")===i.length-1||""===i?"":"/";var o=n.version||S1,a=n.sizes||[],s=n.size;Or(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,60);var u,l,c,h=s[0],f=s[1],p=n.tileSize,d=n.tilePixelRatio||1,m=n.format||"jpg",y=n.quality||(n.version==M1?"native":"default"),g=n.resolutions||[],v=n.supports||[],_=n.extent||[0,-f,h,0],b=null!=a&&Array.isArray(a)&&a.length>0,w=void 0!==p&&("number"==typeof p&&Number.isInteger(p)&&p>0||Array.isArray(p)&&p.length>0),M=null!=v&&Array.isArray(v)&&(v.includes("regionByPx")||v.includes("regionByPct"))&&(v.includes("sizeByWh")||v.includes("sizeByH")||v.includes("sizeByW")||v.includes("sizeByPct"));if(g.sort((function(t,e){return e-t})),w||M)if(null!=p&&("number"==typeof p&&Number.isInteger(p)&&p>0?(u=p,l=p):Array.isArray(p)&&p.length>0&&((1==p.length||null==p[1]&&Number.isInteger(p[0]))&&(u=p[0],l=p[0]),2==p.length&&(Number.isInteger(p[0])&&Number.isInteger(p[1])?(u=p[0],l=p[1]):null==p[0]&&Number.isInteger(p[1])&&(u=p[1],l=p[1])))),void 0!==u&&void 0!==l||(u=256,l=256),0==g.length)for(var S=c=Math.max(Math.ceil(Math.log(h/u)/Math.LN2),Math.ceil(Math.log(f/l)/Math.LN2));S>=0;S--)g.push(Math.pow(2,S));else{var x=Math.max.apply(Math,g);c=Math.round(Math.log(x)/Math.LN2)}else if(u=h,l=f,g=[],b){a.sort((function(t,e){return t[0]-e[0]})),c=-1;var E=[];for(S=0;S<a.length;S++){var O=h/a[S][0];g.length>0&&g[g.length-1]==O?E.push(S):(g.push(O),c++)}if(E.length>0)for(S=0;S<E.length;S++)a.splice(E[S]-S,1)}else g.push(1),a.push([h,f]),c=0;var P=new fy({tileSize:[u,l],extent:_,origin:fn(_),resolutions:g}),T=d3.bind(null,hu(p||256).map((function(t){return t*d})));return(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:T,tileGrid:P,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:function(t,e,r){var n,s,p=t[0];if(!(p>c)){var d=t[1],_=t[2],S=g[p];if(!(void 0===d||void 0===_||void 0===S||d<0||Math.ceil(h/S/u)<=d||_<0||Math.ceil(f/S/l)<=_)){if(M||w){var x=d*u*S,E=_*l*S,O=u*S,P=l*S,T=u,I=l;if(x+O>h&&(O=h-x),E+P>f&&(P=f-E),x+u*S>h&&(T=Math.floor((h-x+S-1)/S)),E+l*S>f&&(I=Math.floor((f-E+S-1)/S)),0==x&&O==h&&0==E&&P==f)n="full";else if(!M||v.includes("regionByPx"))n=x+","+E+","+O+","+P;else if(v.includes("regionByPct")){n="pct:"+g3(x/h*100)+","+g3(E/f*100)+","+g3(O/h*100)+","+g3(P/f*100)}o!=x1||M&&!v.includes("sizeByWh")?!M||v.includes("sizeByW")?s=T+",":v.includes("sizeByH")?s=","+I:v.includes("sizeByWh")?s=T+","+I:v.includes("sizeByPct")&&(s="pct:"+g3(100/S)):s=T+","+I}else if(n="full",b){var L=a[p][0],R=a[p][1];s=o==x1?L==h&&R==f?"max":L+","+R:L==h?"full":L+","}else s=o==x1?"max":"full";return i+n+"/"+s+"/0/"+y+"."+m}}},transition:n.transition})||this).zDirection=n.zDirection,r}return y3(e,t),e}(Iv),_3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),b3=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.hidpi_=void 0===n.hidpi||n.hidpi,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:e_,r.params_=n.params||{},r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return _3(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Ur(i.getExtent(),t))return i;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};An(o,this.params_);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.ratio_){var u=this.ratio_*dn(t)/2,l=this.ratio_*cn(t)/2;t[0]=a-u,t[1]=s-l,t[2]=a+u,t[3]=s+l}var c=e/r,h=Math.ceil(dn(t)/c),f=Math.ceil(cn(t)/c);t[0]=a-c*h/2,t[2]=a+c*h/2,t[1]=s-c*f/2,t[3]=s+c*f/2,this.imageSize_[0]=h,this.imageSize_[1]=f;var p=this.getRequestUrl_(t,this.imageSize_,r,n,o);return this.image_=new Kg(t,e,r,p,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Ai,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){var o=n.getCode().split(":").pop();i.SIZE=e[0]+","+e[1],i.BBOX=t.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(90*r);var a=this.url_,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&Or(!1,50),kv(s,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){An(this.params_,t),this.image_=null,this.changed()},e}(r_),w3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),M3=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,r.canvas_=null,r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return w3(e,t),e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Ur(i.getExtent(),t))return i;gn(t=t.slice(),this.ratio_);var o=[dn(t)/e*r,cn(t)/e*r],a=this.canvasFunction_.call(this,t,e,r,o,n);return a&&(i=new e3(t,e,r,a)),this.canvas_=i,this.renderedRevision_=this.getRevision(),i},e}(r_),S3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var x3=function(t){function e(e){var r=t.call(this,{projection:e.projection,resolutions:e.resolutions})||this;return r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,r.params_=e.params||{},r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:e_,r.hidpi_=void 0===e.hidpi||e.hidpi,r.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,r.ratio_=void 0!==e.ratio?e.ratio:1,r.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,r.image_=null,r.renderedRevision_=0,r}return S3(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Ur(i.getExtent(),t))return i;1!=this.ratio_&&gn(t=t.slice(),this.ratio_);var o=[dn(t)/e*r,cn(t)/e*r];if(void 0!==this.url_){var a=this.getUrl(this.url_,this.params_,t,o,n);(i=new Kg(t,e,r,a,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(Ai,this.handleImageChange.bind(this))}else i=null;return this.image_=i,this.renderedRevision_=this.getRevision(),i},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){An(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,r,n,i){var o=function(t,e,r,n){var i=dn(t),o=cn(t),a=e[0],s=e[1],u=.0254/n;return s*i>a*o?i*r/(a*u):o*r/(s*u)}(r,n,this.metersPerUnit_,this.displayDpi_),a=sn(r),s={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return An(s,e),kv(t,s)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(r_),E3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O3=function(t){function e(e){var r=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,i=void 0!==e.imageLoadFunction?e.imageLoadFunction:e_;return(r=t.call(this,{attributions:e.attributions,projection:Vn(e.projection)})||this).url_=e.url,r.imageExtent_=e.imageExtent,r.image_=new Kg(r.imageExtent_,void 0,1,r.url_,n,i),r.imageSize_=e.imageSize?e.imageSize:null,r.image_.addEventListener(Ai,r.handleImageChange.bind(r)),r}return E3(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,r,n){return mn(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==bc){var r=this.image_.getExtent(),n=this.image_.getImage(),i=void 0,o=void 0;this.imageSize_?(i=this.imageSize_[0],o=this.imageSize_[1]):(i=n.width,o=n.height);var a=cn(r)/o,s=Math.ceil(dn(r)/a);if(s!=i){var u=Bs(s,o),l=u.canvas;u.drawImage(n,0,0,i,o,0,0,l.width,l.height),this.image_.setImage(l)}}t.prototype.handleImageChange.call(this,e)},e}(r_),P3=r(221),T3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),I3="beforeoperations",L3="afteroperations",R3="pixel",C3="image",A3=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=n,i}return T3(e,t),e}(Li),k3=function(t){function e(e){var r=t.call(this,{projection:null})||this;r.worker_=null,r.operationType_=void 0!==e.operationType?e.operationType:R3,r.threads_=void 0!==e.threads?e.threads:1,r.layers_=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=F3(t[n]);return r}(e.sources);for(var n,i=r.changed.bind(r),o=0,a=r.layers_.length;o<a;++o)r.layers_[o].addEventListener(Ai,i);return r.tileQueue_=new Wo((function(){return 1}),r.changed.bind(r)),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,index:0,layerIndex:0,layerStatesArray:(n=r.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},r.setAttributions((function(t){for(var r=[],n=0,i=e.sources.length;n<i;++n){var o=e.sources[n],a=(o instanceof fv?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);r.push.apply(r,s)}}return 0!==r.length?r:null})),void 0!==e.operation&&r.setOperation(e.operation,e.lib),r}return T3(e,t),e.prototype.setOperation=function(t,e){this.worker_=new P3.Processor({operation:t,imageOps:this.operationType_===C3,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,r){var n=An({},this.frameState_);n.viewState=An({},n.viewState);var i=sn(t);n.extent=t.slice(),n.size[0]=Math.round(dn(t)/e),n.size[1]=Math.round(cn(t)/e),n.time=1/0;var o=n.viewState;return o.center=i,o.projection=r,o.resolution=e,n},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,r=this.layers_.length;e<r;++e)if(this.layers_[e].getSource().getState()!==iu){t=!1;break}return t},e.prototype.getImage=function(t,e,r,n){if(!this.allSourcesReady_())return null;var i=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&Kr(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e),n=0;n<e;++n){t.layerIndex=n;var i=j3(this.layers_[n],t);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new A3(I3,t,o)),this.worker_.process(r,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,r,n){if(!e&&r){var i=t.extent,o=t.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&Kr(i,this.requestedFrameState_.extent)){var a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else a=Bs(Math.round(dn(i)/o),Math.round(cn(i)/o)),this.renderedImageCanvas_=new e3(i,o,1,a.canvas);a.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new A3(L3,t,n))}}},e.prototype.getImageInternal=function(){return null},e}(r_),N3=null;function j3(t,e){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;var n,i=e.size[0],o=e.size[1],a=r.renderFrame(e,null);if(a&&(n=a.firstElementChild),!(n instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+n);if(n.width===i&&n.height===o)return n.getContext("2d").getImageData(0,0,i,o);if(N3){var s=N3.canvas;s.width!==i||s.height!==o?N3=Bs(i,o):N3.clearRect(0,0,i,o)}else N3=Bs(i,o);return N3.drawImage(n,0,0,i,o),N3.getImageData(0,0,i,o)}function F3(t){var e;return t instanceof fv?t instanceof wv?e=new $m({source:t}):t instanceof r_&&(e=new oy({source:t})):e=t,e}var D3=k3,B3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),G3=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Xz],z3={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},U3={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},q3=function(t){function e(e){var r=e.layer.indexOf("-"),n=-1==r?e.layer:e.layer.slice(0,r),i=U3[n],o=z3[e.layer],a=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;return t.call(this,{attributions:G3,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:i.maxZoom,minZoom:null!=e.minZoom?e.minZoom:i.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:a,wrapX:e.wrapX})||this}return B3(e,t),e}(wA),V3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Y3(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var i=n.getTileCoordExtent(t,this.tmpExtent_),o=hu(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=cu(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return An(a,this.params_),this.getRequestUrl_(t,o,i,e,r,a)}}var Z3=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:Y3,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).params_=n.params||{},r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.setKey(r.getKeyForParams_()),r}return V3(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){var s,u=i.getCode().split(":").pop();if(o.SIZE=e[0]+","+e[1],o.BBOX=r.join(","),o.BBOXSR=u,o.IMAGESR=u,o.DPI=Math.round(o.DPI?o.DPI*n:90*n),1==a.length)s=a[0];else s=a[pr(cy(t),a.length)];return kv(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){An(this.params_,t),this.setKey(this.getKeyForParams_())},e}(Iv),W3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H3=function(t){function e(e,r,n){var i=t.call(this,e,Uo)||this;return i.tileSize_=r,i.text_=n,i.canvas_=null,i}return W3(e,t),e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Bs(t[0],t[1]);return e.strokeStyle="grey",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="grey",e.strokeStyle="white",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.lineWidth=4,e.strokeText(this.text_,t[0]/2,t[1]/2,t[0]),e.fillText(this.text_,t[0]/2,t[1]/2,t[0]),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(Yg),X3=function(t){function e(e){var r=e||{};return t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection})||this}return W3(e,t),e.prototype.getTile=function(t,e,r){var n=sy(t,e,r);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var i=hu(this.tileGrid.getTileSize(t)),o=[t,e,r],a=this.getTileCoordForTileUrlFunction(o),s=void 0;s=a?"z:"+a[0]+" x:"+a[1]+" y:"+a[2]:"none";var u=new H3(o,i,s);return this.tileCache.set(n,u),u},e}(wA),K3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),J3=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:Vn("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:nu,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;if(r.tileJSON_=null,r.tileSize_=e.tileSize,e.url)if(e.jsonp)a3(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):Or(!1,51);return r}return K3(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,r=Vn("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=Jn(r,n);e=vn(t.bounds,i)}var o=t.minzoom||0,a=t.maxzoom||22,s=dv({extent:gv(n),maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=av(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var u=void 0!==e?e:r.getExtent();this.setAttributions((function(e){return mn(u,e.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState(iu)},e.prototype.handleTileJSONError=function(){this.setState(ou)},e}(Iv),Q3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$3=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r)||this;return s.src_=n,s.extent_=i,s.preemptive_=o,s.grid_=null,s.keys_=null,s.data_=null,s.jsonp_=a,s}return Q3(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof n)return null;var i=n.charCodeAt(Math.floor(e*n.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.keys_){var a=this.keys_[i];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,r){this.state==Vo&&!0===r?(this.state=Go,mi(this,Ai,(function(r){e(this.getData(t))}),this),this.loadInternal_()):!0===r?setTimeout(function(){e(this.getData(t))}.bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=qo,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=Uo,this.changed()},e.prototype.loadInternal_=function(){if(this.state==Go)if(this.state=zo,this.jsonp_)a3(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(Vo)},e}(Yg),t6=function(t){function e(e){var r=t.call(this,{projection:Vn("EPSG:3857"),state:nu})||this;if(r.preemptive_=void 0===e.preemptive||e.preemptive,r.tileUrlFunction_=uv,r.template_=void 0,r.jsonp_=e.jsonp||!1,e.url)if(r.jsonp_)a3(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):Or(!1,51);return r}return Q3(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,r,n){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,n)}else!0===n?setTimeout((function(){r(null)}),0):r(null)},e.prototype.handleTileJSONError=function(){this.setState(ou)},e.prototype.handleTileJSONResponse=function(t){var e,r=Vn("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=Jn(r,n);e=vn(t.bounds,i)}var o=t.minzoom||0,a=t.maxzoom||22,s=dv({extent:gv(n),maxZoom:a,minZoom:o});this.tileGrid=s,this.template_=t.template;var u=t.grids;if(u){if(this.tileUrlFunction_=av(u,s),void 0!==t.attribution){var l=void 0!==e?e:r.getExtent();this.setAttributions((function(e){return mn(l,e.extent)?[t.attribution]:null}))}this.setState(iu)}else this.setState(ou)},e.prototype.getTile=function(t,e,r,n,i){var o=sy(t,e,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=this.tileUrlFunction_(s,n,i),l=new $3(a,void 0!==u?Go:Vo,void 0!==u?u:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,l),l},e.prototype.useTile=function(t,e,r){var n=sy(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(wv),e6=window.M={},r6=window.ol={};e6.ClusteredFeature=Qq,e6.Control=ep,e6.Feature=Yq,e6.Label=Rw,e6.Layer=Fm,e6.Map=OU,e6.Object=vf,e6.Parameters=$w,e6.Parameters.parseBbox=Vw,e6.Parameters.parseCenter=Hw,e6.Parameters.parseContainer=Nw,e6.Parameters.parseControls=zw,e6.Parameters.parseGetFeatureInfo=Uw,e6.Parameters.parseKML=Gw,e6.Parameters.parseLabel=Qw,e6.Parameters.parseLayers=jw,e6.Parameters.parseMaxExtent=qw,e6.Parameters.parseMaxZoom=Zw,e6.Parameters.parseMinZoom=Ww,e6.Parameters.parseProjection=Jw,e6.Parameters.parseResolutions=Kw,e6.Parameters.parseTicket=Xw,e6.Parameters.parseWMC=Fw,e6.Parameters.parseWMS=Dw,e6.Parameters.parseWMTS=Bw,e6.Parameters.parseZoom=Yw,e6.Plugin=aV,e6.Popup=vw,e6.RenderFeature=pT,e6.Style=uM,e6.Tile=QG,e6.config=function t(e,r){t[e]=r},e6.control={},e6.control.BackgroundLayers=$A,e6.control.GetFeatureInfo=OL,e6.control.Location=aR,e6.control.Panzoom=YC,e6.control.Panzoombar=gp,e6.control.Rotate=HR,e6.control.Scale=TR,e6.control.ScaleLine=PC,e6.dialog={},e6.dialog.error=QS,e6.dialog.info=JS,e6.dialog.remove=XS,e6.dialog.removeElement=HS,e6.dialog.show=KS,e6.dialog.success=$S,e6.evt={},e6.evt.ACTIVATED="activated",e6.evt.ADDED_KML="added:kml",e6.evt.ADDED_LAYER="added:layer",e6.evt.ADDED_MBTILES="added:mbtiles",e6.evt.ADDED_MBTILES_VECTOR="added:mbtilesvector",e6.evt.ADDED_OGCAPIFEATURES="added:ogcapifeatures",e6.evt.ADDED_TMS="added:tms",e6.evt.ADDED_TO_MAP="added:map",e6.evt.ADDED_TO_PANEL="added:panel",e6.evt.ADDED_VECTOR_TILE="added:vectortile",e6.evt.ADDED_WFS="added:wfs",e6.evt.ADDED_WMS="added:wms",e6.evt.ADDED_WMTS="added:wmts",e6.evt.ADDED_XYZ="added:xyz",e6.evt.CHANGE="change",e6.evt.CHANGE_PROJ="change:proj",e6.evt.CHANGE_STYLE="change:style",e6.evt.CHANGE_ZOOM="change:zoom",e6.evt.CLICK="click",e6.evt.COMPLETED="completed",e6.evt.DEACTIVATED="deactivated",e6.evt.DESTROY="destroy",e6.evt.EventsManager=mf,e6.evt.HIDE="hide",e6.evt.HOVER_FEATURES="hover:features",e6.evt.LEAVE_FEATURES="leave:features",e6.evt.LOAD=Uf,e6.evt.Listener=ff,e6.evt.MOVE="move",e6.evt.REMOVED_FROM_MAP="removed:map",e6.evt.REMOVED_LAYER="removed:layer",e6.evt.SELECT_FEATURES="select:features",e6.evt.SHOW="show",e6.evt.UNSELECT_FEATURES="unselect:features",e6.exception=Af,e6.facade={},e6.facade.Base=zf,e6.filter={},e6.filter.AND=function(t){var e="",r=t.length;return t.forEach((function(t,n){e+="(".concat(t.toCQL(),")"),n<r-1&&(e+=" AND ")})),new dV((function(e){return t.every((function(t){return t.getFunctionFilter()(e)}))}),{cqlFilter:e})},e6.filter.Base=nx,e6.filter.EQUAL=function(t,e){return new dV((function(r){return Object.is(r.getAttribute(t),e)}),{cqlFilter:"".concat(t,"='").concat(e,"'")})},e6.filter.Function=dV,e6.filter.GT=function(t,e){return new dV((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)>e}),{cqlFilter:"".concat(t," > '").concat(e,"'")})},e6.filter.GTE=function(t,e){return new dV((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)>=e}),{cqlFilter:"".concat(t," >= '").concat(e,"'")})},e6.filter.LIKE=function(t,e){return new dV((function(r){return r.getAttribute(t).toString().match(new RegExp(e))}),{cqlFilter:"".concat(t," LIKE '%").concat(e,"%'")})},e6.filter.LT=function(t,e){return new dV((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)<e}),{cqlFilter:"".concat(t," < '").concat(e,"'")})},e6.filter.LTE=aX,e6.filter.NOT=function(t){return new dV((function(e){return!t.getFunctionFilter()(e)}),{cqlFilter:"NOT ".concat(t.toCQL())})},e6.filter.OR=function(t){var e=t.length,r="";return t.forEach((function(t,n){r+="(".concat(t.toCQL(),")"),n<e-1&&(r+=" OR ")})),new dV((function(e){return t.some((function(t){return t.getFunctionFilter()(e)}))}),{cqlFilter:r})},e6.filter.Spatial=wV,e6.filter.spatial={},e6.filter.spatial.CONTAIN=function(t){var e=J$(t);return new wV((function(t,r){var n=new nQ,i=n.read(t);return e.some((function(t){var e=n.read(t);return H$.contains(e,i)}))}),{cqlFilter:Q$("CONTAINS",e)})},e6.filter.spatial.DISJOINT=function(t){var e=J$(t);return new wV((function(t,r){var n=new nQ,i=n.read(t);return e.some((function(t){var e=n.read(t);return!H$.intersects(i,e)}))}),{cqlFilter:Q$("DISJOINT",e)})},e6.filter.spatial.INTERSECT=function(t){var e=J$(t);return new wV((function(t,r){var n=new nQ,i=n.read(t);return e.some((function(t){var e=n.read(t);return H$.intersects(i,e)}))}),{cqlFilter:Q$("INTERSECTS",e)})},e6.filter.spatial.WITHIN=function(t){var e=J$(t);return new wV((function(t,r){var n=new nQ,i=n.read(t);return e.some((function(t){var e=n.read(t);return H$.contains(e,i)}))}),{cqlFilter:Q$("WITHIN",e)})},e6.filter.spatial.parseParamToGeometries=J$,e6.format={},e6.format.GeoJSON=nF,e6.format.WKT=cY,e6.geom={},e6.geom.geojson={},e6.geom.geojson.type={},e6.geom.geojson.type.GEOMETRY_COLLECTION="GeometryCollection",e6.geom.geojson.type.LINE_STRING="LineString",e6.geom.geojson.type.MULTI_LINE_STRING="MultiLineString",e6.geom.geojson.type.MULTI_POINT="MultiPoint",e6.geom.geojson.type.MULTI_POLYGON="MultiPolygon",e6.geom.geojson.type.POINT="Point",e6.geom.geojson.type.POLYGON="Polygon",e6.geom.parse=tD,e6.geom.parseWFS=function(t){var e;return t===WF?e="Point":t===HF?e="LineString":t===XF?e="Polygon":t===KF?e="MultiPoint":t===JF?e="MultiLineString":t===QF&&(e="MultiPolygon"),e},e6.geom.wfs={},e6.geom.wfs.type={},e6.geom.wfs.type.LINE=HF,e6.geom.wfs.type.MLINE=JF,e6.geom.wfs.type.MPOINT=KF,e6.geom.wfs.type.MPOLYGON=QF,e6.geom.wfs.type.POINT=WF,e6.geom.wfs.type.POLYGON=XF,e6.geom.wkt={},e6.geom.wkt.type={},e6.geom.wkt.type.CIRCLE="Circle",e6.geom.wkt.type.GEOMETRY="Geometry",e6.geom.wkt.type.GEOMETRY_COLLECTION="GeometryCollection",e6.geom.wkt.type.LINEAR_RING="LinearRing",e6.geom.wkt.type.LINE_STRING="LineString",e6.geom.wkt.type.MULTI_LINE_STRING="MultiLineString",e6.geom.wkt.type.MULTI_POINT="MultiPoint",e6.geom.wkt.type.MULTI_POLYGON="MultiPolygon",e6.geom.wkt.type.POINT="Point",e6.geom.wkt.type.POLYGON="Polygon",e6.handlebarshelpers=op,e6.handler={},e6.handler.Feature=RT,e6.i18n={},e6.i18n.plugins=Yf,e6.impl={},e6.impl.Control=sL,e6.impl.Feature=Dq,e6.impl.GetCapabilities=ng,e6.impl.Label=Sw,e6.impl.Layer=tg,e6.impl.Map=Lb,e6.impl.OLChart=aZ,e6.impl.OLStyleStrokePattern=NE,e6.impl.Popup=ow,e6.impl.RenderFeature=yT,e6.impl.Style=yx,e6.impl.View=yb,e6.impl.control={},e6.impl.control.GetFeatureInfo=gL,e6.impl.control.Location=XL,e6.impl.control.Panzoom=jC,e6.impl.control.Panzoombar=Cf,e6.impl.control.Rotate=DR,e6.impl.control.Scale=_R,e6.impl.control.Scale.formatLongNumber=vR,e6.impl.control.ScaleLine=yC,e6.impl.format={},e6.impl.format.DescribeFeatureType=vF,e6.impl.format.GML=IF,e6.impl.format.GeoJSON=Xj,e6.impl.format.KML=gj,e6.impl.format.WKT=rY,e6.impl.format.WMSCapabilities=Gg,e6.impl.format.WMTSCapabilities=cZ,e6.impl.format.XML=dZ,e6.impl.handler={},e6.impl.handler.Feature=wT,e6.impl.handler.Feature.getFacadeFeature=bT,e6.impl.interaction={},e6.impl.interaction.SelectCluster=wP,e6.impl.layer={},e6.impl.layer.AnimatedCluster=aP,e6.impl.layer.Draw=MZ,e6.impl.layer.GeoJSON=pG,e6.impl.layer.Heatmap=pW,e6.impl.layer.KML=xj,e6.impl.layer.MBTiles=sz,e6.impl.layer.MBTilesVector=xz,e6.impl.layer.MVT=WD,e6.impl.layer.OGCAPIFeatures=MB,e6.impl.layer.OSM=iU,e6.impl.layer.TMS=FA,e6.impl.layer.Vector=YS,e6.impl.layer.WFS=ZF,e6.impl.layer.WMS=O_,e6.impl.layer.WMTS=sA,e6.impl.layer.XYZ=IA,e6.impl.loader={},e6.impl.loader.JSONP=iG,e6.impl.loader.KML=uk,e6.impl.loader.WFS=jF,e6.impl.ol={},e6.impl.ol.js={},e6.impl.ol.js.ext={},e6.impl.ol.js.ext.GeomUtils=void 0,e6.impl.ol.js.ext.OLStyleFillPattern=yE,e6.impl.ol.js.ext.OLStyleFlowLine=PW,e6.impl.ol.js.ext.OLStyleFontSymbol=fx,e6.impl.ol.js.ext.cspline=void 0,e6.impl.ol.js.patches={},e6.impl.ol.js.patches.optionsFromCapabilities=lb,e6.impl.ol.js.projections={},e6.impl.service={},e6.impl.service.OGCAPIFeatures=fB,e6.impl.service.WFS=wF,e6.impl.source={},e6.impl.source.ImageWMS=m_,e6.impl.source.TileWMS=Wv,e6.impl.style={},e6.impl.style.Centroid=IP,e6.impl.style.Chart=AY,e6.impl.style.Chart.extend=TY,e6.impl.style.Chart.generateTextBarChart=LY,e6.impl.style.Chart.generateTextCircleChart=RY,e6.impl.style.Chart.getTextData=IY,e6.impl.style.Cluster=GP,e6.impl.style.Feature=vY,e6.impl.style.FlowLine=aH,e6.impl.style.Generic=nO,e6.impl.style.Heatmap=pH,e6.impl.style.Icon=wH,e6.impl.style.Line=DW,e6.impl.style.Path=Yx,e6.impl.style.Point=FG,e6.impl.style.Polygon=IH,e6.impl.style.Simple=xx,e6.impl.style.builder={},e6.impl.style.builder.getFill=jE,e6.impl.style.builder.getFillPatern=qE,e6.impl.style.builder.getIconForm=UE,e6.impl.style.builder.getIconSrc=zE,e6.impl.style.builder.getLabel=BE,e6.impl.style.builder.getLineStroke=VE,e6.impl.style.builder.getLineStyle=WE,e6.impl.style.builder.getLineText=YE,e6.impl.style.builder.getPointStyle=ZE,e6.impl.style.builder.getPolygonStyle=HE,e6.impl.style.builder.getStroke=FE,e6.impl.style.builder.getStrokePatern=DE,e6.impl.style.builder.iconCache=GE,e6.impl.util={},e6.impl.util.TextPath=KW,e6.impl.util.wmtscapabilities=LH,e6.impl.util.wmtscapabilities=LH,e6.impl.util.wmtscapabilities.getLayers=function(t,e,r){return function t(e,r,n,i){var o=[];if(XU(e.Layer))if(HU(e))e.forEach((function(e){o=o.concat(t(e,r,n,i))}));else{var a=e.TileMatrixSetLink,s=n;"EPSG:3857"===n&&(a.includes("EPSG:3857")||(s="GoogleMapsCompatible")),o.push(new _A({url:r,name:e.Identifier,matrixSet:s,legend:XU(e.Title)?"":e.Title},{},{capabilitiesMetadata:{abstract:XU(e.Abstract)?"":e.Abstract,attribution:XU(i.ServiceProvider)?"":i.ServiceProvider,style:XU(e.Style)?"":e.Style}}))}else o=t(e.Layer);return o}(t.Contents.Layer,e,r,t)},e6.impl.utils=Zy,e6.impl.utils=Zy,e6.impl.utils.geojsonTo4326=Yy,e6.language={},e6.language.addTranslation=function(t,e){Zf.translations[t]=e},e6.language.configuration=Zf,e6.language.getLang=function(){return Zf.lang},e6.language.getTranslation=Wf,e6.language.getValue=Hf,e6.language.setLang=function(t){Object.keys(Zf.translations).includes(t)||Af(Hf("exception").unsupported_lang),Zf.lang=t},e6.layer={},e6.layer.GeoJSON=TG,e6.layer.KML=Cj,e6.layer.MBTiles=mz,e6.layer.MBTilesVector=Bz,e6.layer.MBTilesVector.mode={RENDER:"render",FEATURE:"feature"},e6.layer.MVT=lB,e6.layer.MVT.mode=sB,e6.layer.OGCAPIFeatures=FB,e6.layer.OSM=fU,e6.layer.TMS=YA,e6.layer.Vector=WO,e6.layer.WFS=mD,e6.layer.WMS=D_,e6.layer.WMTS=_A,e6.layer.XYZ=Wz,e6.layer.type={},e6.layer.type.GeoJSON=Pp,e6.layer.type.KML=_p,e6.layer.type.MBTiles=Lp,e6.layer.type.MBTilesVector=Rp,e6.layer.type.MVT=Ip,e6.layer.type.OGCAPIFeatures=Mp,e6.layer.type.OSM=xp,e6.layer.type.TMS=Op,e6.layer.type.Vector=Tp,e6.layer.type.WFS=wp,e6.layer.type.WMC=vp,e6.layer.type.WMS=bp,e6.layer.type.WMTS=Sp,e6.layer.type.XYZ=Ep,e6.map=function(t,e){return XU(Lb)&&Af(Hf("exception").no_impl),new OU(t,e)},e6.parameter=Im,e6.parameter=Im,e6.parameter.geojson=vd,e6.parameter.getCQLWFS=od,e6.parameter.getConditionalOGC=Em,e6.parameter.getDisplayInLayerSwitcherWMS=kd,e6.parameter.getDisplayInLayerSwitcherWMTS=Zd,e6.parameter.getExtraParameter=Jd,e6.parameter.getExtractGeoJSON=yd,e6.parameter.getExtractKML=Kp,e6.parameter.getExtractWFS=cd,e6.parameter.getFormatWMTS=Yd,e6.parameter.getGeometryWFS=ad,e6.parameter.getIdsWFS=sd,e6.parameter.getLabelKML=Jp,e6.parameter.getLegendGeoJSON=pd,e6.parameter.getLegendMBTiles=rm,e6.parameter.getLegendMBTilesVector=dm,e6.parameter.getLegendWFS=id,e6.parameter.getLegendWMS=Td,e6.parameter.getLegendWMTS=Ud,e6.parameter.getMatrixSetWMTS=zd,e6.parameter.getMaxExtentMBTiles=hm,e6.parameter.getMaxExtentMBTilesVector=bm,e6.parameter.getMaxExtentWMS=Rd,e6.parameter.getMaxZoomLevelMBTiles=cm,e6.parameter.getNameKML=Xp,e6.parameter.getNameMBTiles=am,e6.parameter.getNameMBTilesVector=vm,e6.parameter.getNameMVT=bd,e6.parameter.getNameTMS=$d,e6.parameter.getNameWFS=ed,e6.parameter.getNameWMC=Md,e6.parameter.getNameWMS=Od,e6.parameter.getNameWMTS=Bd,e6.parameter.getNameXYZ=Xd,e6.parameter.getNamespaceWFS=nd,e6.parameter.getOpacityMBTiles=lm,e6.parameter.getOptionsWFS=hd,e6.parameter.getOptionsWMC=xd,e6.parameter.getOptionsWMS=Ad,e6.parameter.getOptionsWMTS=qd,e6.parameter.getQueryableWMS=Nd,e6.parameter.getQueryableWMTS=Wd,e6.parameter.getSourceGeoJSON=md,e6.parameter.getSourceMBTiles=im,e6.parameter.getSourceMBTilesVector=ym,e6.parameter.getStyleGeoJSON=gd,e6.parameter.getStyleMBTilesVector=Mm,e6.parameter.getStyleOGC=xm,e6.parameter.getStyleWFS=ud,e6.parameter.getTileLoadFunctionMBTiles=om,e6.parameter.getTileLoadFunctionMBTilesVector=gm,e6.parameter.getTileSizeMBTiles=fm,e6.parameter.getTileSizeMBTilesVector=wm,e6.parameter.getTiledWMS=Ld,e6.parameter.getTransparentMBTiles=sm,e6.parameter.getTransparentWMS=Id,e6.parameter.getTransparentWMTS=Vd,e6.parameter.getType=Up,e6.parameter.getURLGeoJSON=dd,e6.parameter.getURLKML=$p,e6.parameter.getURLMBTiles=nm,e6.parameter.getURLMBTilesVector=mm,e6.parameter.getURLMVT=_d,e6.parameter.getURLWFS=rd,e6.parameter.getURLWMC=Sd,e6.parameter.getURLWMS=Pd,e6.parameter.getURLWMTS=Gd,e6.parameter.getURLXYZSource=Kd,e6.parameter.getUseCapabilitiesWMS=Fd,e6.parameter.getVersionWFS=ld,e6.parameter.getVersionWMS=Cd,e6.parameter.getVisibilityKML=Qp,e6.parameter.getVisibilityMBTiles=um,e6.parameter.getVisibilityMBTilesVector=_m,e6.parameter.getVisibilityWMS=jd,e6.parameter.getVisibilityWMTS=Hd,e6.parameter.kml=td,e6.parameter.layer=Tm,e6.parameter.maxExtent=qp,e6.parameter.maxZoom=Hp,e6.parameter.mbtiles=kH,e6.parameter.mbtiles=pm,e6.parameter.mbtilesvector=DH,e6.parameter.mbtilesvector=Sm,e6.parameter.minZoom=Wp,e6.parameter.mvt=wd,e6.parameter.ogcapifeatures=Om,e6.parameter.osm=Bp,e6.parameter.projection=Vp,e6.parameter.resolutions=Yp,e6.parameter.tms=UH,e6.parameter.tms=tm,e6.parameter.wfs=fd,e6.parameter.wmc=Ed,e6.parameter.wms=Dd,e6.parameter.wmts=em,e6.parameter.xyz=ZH,e6.parameter.xyz=Qd,e6.parameter.zoom=Zp,e6.polyfill={},e6.proxy=function(t){"boolean"==typeof t&&(TU=t)},e6.remote={},e6.remote.Response=RU,e6.remote.get=jU,e6.remote.method=CU,e6.remote.post=function(t,e,r){return NU(t,e,CU.POST)},e6.style={},e6.style.Category=oK,e6.style.Chart=QY,e6.style.Choropleth=MX,e6.style.Cluster=aT,e6.style.Composite=WP,e6.style.Feature=cO,e6.style.FlowLine=pK,e6.style.Font=yK,e6.style.Generic=kO,e6.style.Heatmap=IK,e6.style.Line=ZW,e6.style.Point=YG,e6.style.Polygon=YX,e6.style.Proportional=jX,e6.style.Proportional.getMinMaxValues=CX,e6.style.Simple=MO,e6.style.align={},e6.style.align.CENTER=Tx,e6.style.align.JUSTIFY=Lx,e6.style.align.LEFT=Px,e6.style.align.RIGHT=Ix,e6.style.baseline={},e6.style.baseline.ALPHABETIC=kx,e6.style.baseline.BOTTOM=Ax,e6.style.baseline.HANGING=Nx,e6.style.baseline.IDEOGRAPHIC=jx,e6.style.baseline.MIDDLE=Cx,e6.style.baseline.TOP=Rx,e6.style.chart={},e6.style.chart.Variable=FY,e6.style.chart.schemes=BY,e6.style.chart.types=DY,e6.style.form={},e6.style.form.BAN="BAN",e6.style.form.BLAZON="BLAZON",e6.style.form.BUBBLE="BUBBLE",e6.style.form.CIRCLE="CIRCLE",e6.style.form.LOZENGE="LOZENGE",e6.style.form.MARKER="MARKER",e6.style.form.NONE="none",e6.style.form.SHIELD="SHIELD",e6.style.form.SIGN="SIGN",e6.style.form.SQUARE="SQUARE",e6.style.form.TRIANGLE="TRIANGLE",e6.style.pattern={},e6.style.pattern.BRECCIA="BRECCIA",e6.style.pattern.BRICK="BRICK",e6.style.pattern.CAPS="CAPS",e6.style.pattern.CEMETRY="CEMETRY",e6.style.pattern.CHAOS="CHAOS",e6.style.pattern.CHARACTER="CHARACTER",e6.style.pattern.CIRCLE="CIRCLE",e6.style.pattern.CLAY="CLAY",e6.style.pattern.COAL="COAL",e6.style.pattern.CONGLOMERATE="CONGLOMERATE",e6.style.pattern.CROSS="CROSS",e6.style.pattern.CROSSES="CROSSES",e6.style.pattern.DOLOMITE="DOLOMITE",e6.style.pattern.DOT="DOT",e6.style.pattern.FLOODED="FLOODED",e6.style.pattern.FOREST="FOREST",e6.style.pattern.GRASS="GRASS",e6.style.pattern.GRAVEL="GRAVEL",e6.style.pattern.HATCH="HATCH",e6.style.pattern.HEXAGON="HEXAGON",e6.style.pattern.ICON="ICON",e6.style.pattern.IMAGE="IMAGE",e6.style.pattern.NYLON="NYLON",e6.style.pattern.PINE="PINE",e6.style.pattern.PINES="PINES",e6.style.pattern.ROCK="ROCK",e6.style.pattern.ROCKS="ROCKS",e6.style.pattern.SAND="SAND",e6.style.pattern.SCRUB="SCRUB",e6.style.pattern.SQUARE="SQUARE",e6.style.pattern.SWAMP="SWAMP",e6.style.pattern.TILE="TILE",e6.style.pattern.TREE="TREE",e6.style.pattern.VINE="VINE",e6.style.pattern.WAVE="WAVE",e6.style.pattern.WOVEN="WOVEN",e6.style.quantification={},e6.style.quantification.ARITHMETIC_PROGRESSION=iX,e6.style.quantification.EQUAL_INTERVAL=rX,e6.style.quantification.GEOMETRIC_PROGRESSION=oX,e6.style.quantification.JENKS=tX,e6.style.quantification.MEDIA_SIGMA=nX,e6.style.quantification.QUANTILE=eX,e6.style.quantification.hasNegativeValue=HH,e6.style.quantification.uniqueArray=WH,e6.style.state={},e6.style.state.DEFAULT="default",e6.style.state.NEW="new",e6.style.state.SELECTED="selected",e6.style.textoverflow={},e6.style.textoverflow.ELLIPSIS="ellipsis",e6.style.textoverflow.HIDDEN="",e6.style.textoverflow.VISIBLE="visible",e6.template={},e6.template.add=function(t,e){YU(ap[t])&&(ap[t]=e)},e6.template.compile=function(t,e){var r,n,i={};return YU(e)||(i=Mq(i,e.vars),r=e.parseToHtml,n=e.scope),new Promise((function(o,a){up(t,e).then((function(t){var e=t.call(null,i);!1!==r?o.call(n,cq(e)):o.call(n,e)}))}))},e6.template.compileSync=sp,e6.template.get=up,e6.toast={},e6.toast.error=function(t,e,r){return r0(t,"error","g-cartografia-notification",e,r)},e6.toast.info=function(t,e,r){return r0(t,"info","g-cartografia-info",e,r)},e6.toast.remove=function(){var t=document.querySelector("div.m-toasts-container");t&&t.remove()},e6.toast.removeElement=e0,e6.toast.show=r0,e6.toast.success=function(t,e,r){return r0(t,"success","g-cartografia-check",e,r)},e6.toast.warning=function(t,e,r){return r0(t,"warning","g-cartografia-warning",e,r)},e6.ui={},e6.ui.Panel=JB,e6.ui.position={},e6.ui.position.BL=UB,e6.ui.position.BR=qB,e6.ui.position.TL=GB,e6.ui.position.TR=zB,e6.units={},e6.units.DOTS_PER_INCH=72,e6.units.INCHES_PER_UNIT=zU,e6.useproxy=TU,e6.utils={},e6.utils.addParameters=rq,e6.utils.beautifyAttribute=hq,e6.utils.beautifyAttributeName=function(t){var e=tq(t);return e=(e=e.replace(/_(\w)/g,(function(t,e){return" ".concat(e.toUpperCase())}))).replace(/^\w/,(function(t){return t.toUpperCase()}))},e6.utils.beautifyString=function(t){var e;return e=(e=(e=(e=(e=(e=(e=t.toLowerCase()).trim(e)).charAt(0).toUpperCase()+e.slice(1)).replace(/_/g," ")).replace(/\s+/," ")).replace(/(\s\w)+/g,(function(t){return t.toUpperCase()}))).replace(/\s+(de|del|las?|el|los?|un|unas?|unos?|y|a|al|en)\s+/gi,(function(t){return t.toLowerCase()}))},e6.utils.bytesToBase64=Cq,e6.utils.concatUrlPaths=fq,e6.utils.decodeBase64=function(t){return window.atob(t)},e6.utils.decodeHtml=_q,e6.utils.defineFunctionFromString=Pq,e6.utils.dragElement=function(t,e){document.getElementById(e).onmousedown=function(e){var r=0,n=0,i=0,o=0,a=document.getElementById(t),s=e||window.event;s.preventDefault(),i=s.clientX,o=s.clientY,document.onmouseup=function(){document.onmouseup=null,document.onmousemove=null},document.onmousemove=function(t){var e=t||window.event;e.preventDefault(),r=i-e.clientX,n=o-e.clientY,i=e.clientX,o=e.clientY,a.offsetTop-n>=a.parentElement.clientHeight-a.clientHeight||(a.style.top="".concat(Math.abs(a.offsetTop-n),"px")),a.offsetLeft-r>=a.parentElement.clientWidth-a.clientWidth||(a.style.left="".concat(Math.abs(a.offsetLeft-r),"px"))}}},e6.utils.draggabillyPlugin=function(t,e){var r=t.getTemplatePanel(),n=null;setTimeout((function(){n=new DU.a(r,{containment:".m-mapea-container",handle:e}),M.utils.isNull(n)||t.isCollapsed()||n.enable();var i=r.querySelector(".m-panel-btn");i&&i.addEventListener("click",(function(){t.isCollapsed()?(r.style.removeProperty("left"),r.style.removeProperty("top"),r.style.position="relative",n.disable()):n.enable()}))}),1e3)},e6.utils.drawDynamicStyle=Lq,e6.utils.enableTouchScroll=yq,e6.utils.encodeBase64=function(t){var e=JSON.stringify(t);return window.btoa(e)},e6.utils.escapeJSCode=mq,e6.utils.escapeXSS=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},e6.utils.extend=dq,e6.utils.extendsObj=Mq,e6.utils.fillResolutions=aq,e6.utils.generateColorScale=kq,e6.utils.generateIntervals=Sq,e6.utils.generateRandom=nq,e6.utils.generateResolutionsFromExtent=uq,e6.utils.generateResolutionsFromScales=function(t,e,r,n){var i=sq(t,n),o=sq(e,n);return aq(i,o,r)},e6.utils.getEnvolvedExtent=Rq,e6.utils.getImageSize=Eq,e6.utils.getOpacityFromRgba=function(t){var e,r=/^rgba\s*\((\s*\d+\s*,){3}\s*([\d.]+)\s*\)$/;if(r.test(t)){e=t.replace(r,"$2");try{e=parseFloat(e)}catch(t){throw t}}return e},e6.utils.getParameterValue=eq,e6.utils.getResolutionFromScale=sq,e6.utils.getRgba=function(t,e){return Ox()(t).alpha(e).css()},e6.utils.getScaleFromResolution=lq,e6.utils.getTextFromHtml=bq,e6.utils.getWMSGetCapabilitiesUrl=iq,e6.utils.getWMTSGetCapabilitiesUrl=oq,e6.utils.htmlToString=function(t){var e;if(!XU(t)){var r=document.createElement("div");r.appendChild(t),e=r.innerHTML}return e},e6.utils.includes=pq,e6.utils.inverseColor=wq,e6.utils.isArray=HU,e6.utils.isBoolean=ZU,e6.utils.isDynamic=Tq,e6.utils.isFunction=KU,e6.utils.isGeometryType=vq,e6.utils.isNull=WU,e6.utils.isNullOrEmpty=XU,e6.utils.isObject=JU,e6.utils.isString=QU,e6.utils.isUndefined=YU,e6.utils.isUrl=$U,e6.utils.modifySVG=Nq,e6.utils.normalize=tq,e6.utils.rgbToHex=function(t){var e;try{e=Ox()(t).hex()}catch(t){throw t}return e},e6.utils.rgbaToHex=function(t){var e;try{e=Ox()(t).hex()}catch(t){throw t}return e},e6.utils.sameUrl=gq,e6.utils.setDynamicLegend=function(t){Iq=t},e6.utils.stringToHtml=cq,e6.utils.stringifyFunctions=Oq,e6.utils.styleComparator=xq,e6.window=Jb,r6.AssertionError=Er,r6.Collection=oo,r6.Feature=dy,r6.Geolocation=BL,r6.Kinetic=Ru,r6.Map=qc,r6.MapBrowserEvent=lo,r6.Object=eo,r6.Observable=Xi,r6.Observable.unByKey=Hi,r6.Overlay=Wb,r6.PluggableMap=pu,r6.View=Ds,r6.array={},r6.array.stableSort=function(t,e){var r,n=t.length,i=Array(t.length);for(r=0;r<n;r++)i[r]={index:r,value:t[r]};for(i.sort((function(t,r){return e(t.value,r.value)||t.index-r.index})),r=0;r<t.length;r++)t[r]=i[r].value},r6.color={},r6.color.asArray=Vl,r6.color.asString=Bl,r6.colorlike={},r6.colorlike.asColorLike=Kl,r6.control={},r6.control.Attribution=xu,r6.control.Control=mu,r6.control.FullScreen=c0,r6.control.MousePosition=p0,r6.control.OverviewMap=g0,r6.control.Rotate=Pu,r6.control.ScaleLine=nC,r6.control.Zoom=Iu,r6.control.ZoomSlider=Ef,r6.control.ZoomToExtent=_0,r6.control.defaults=Lu,r6.coordinate={},r6.coordinate.add=ua,r6.coordinate.createStringXY=function(t){return function(e){return va(e,t)}},r6.coordinate.format=ha,r6.coordinate.rotate=pa,r6.coordinate.toStringHDMS=function(t,e){return t?ca("NS",t[1],e)+" "+ca("EW",t[0],e):""},r6.coordinate.toStringXY=va,r6.easing={},r6.easing.easeIn=ba,r6.easing.easeOut=wa,r6.easing.inAndOut=Ma,r6.easing.linear=Sa,r6.easing.upAndDown=xa,r6.events={},r6.events.condition={},r6.events.condition.altKeyOnly=Bu,r6.events.condition.altShiftKeysOnly=Gu,r6.events.condition.always=Uu,r6.events.condition.click=function(t){return t.type==_o.CLICK},r6.events.condition.doubleClick=function(t){return t.type==_o.DBLCLICK},r6.events.condition.focus=zu,r6.events.condition.mouseOnly=Xu,r6.events.condition.never=Vu,r6.events.condition.noModifierKeys=Zu,r6.events.condition.penOnly=function(t){var e=t.pointerEvent;return Or(void 0!==e,56),"pen"===e.pointerType},r6.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(po?e.metaKey:e.ctrlKey)&&!e.shiftKey},r6.events.condition.pointerMove=function(t){return"pointermove"==t.type},r6.events.condition.primaryAction=Ku,r6.events.condition.shiftKeyOnly=Wu,r6.events.condition.singleClick=Yu,r6.events.condition.targetNotEditable=Hu,r6.events.condition.touchOnly=function(t){var e=t.pointerEvent;return Or(void 0!==e,56),"touch"===e.pointerType},r6.extent={},r6.extent.applyTransform=vn,r6.extent.boundingExtent=Fr,r6.extent.buffer=Dr,r6.extent.containsCoordinate=zr,r6.extent.containsExtent=Ur,r6.extent.containsXY=qr,r6.extent.createEmpty=Yr,r6.extent.equals=Kr,r6.extent.extend=Jr,r6.extent.getArea=nn,r6.extent.getBottomLeft=on,r6.extent.getBottomRight=an,r6.extent.getCenter=sn,r6.extent.getHeight=cn,r6.extent.getIntersection=hn,r6.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},r6.extent.getTopLeft=fn,r6.extent.getTopRight=pn,r6.extent.getWidth=dn,r6.extent.intersects=mn,r6.extent.isEmpty=yn,r6.featureloader={},r6.featureloader.setWithCredentials=function(t){ES=t},r6.featureloader.xhr=PS,r6.format={},r6.format.EsriJSON=P0,r6.format.Feature=B_,r6.format.GML=sF,r6.format.GML2=NT,r6.format.GML3=rb,r6.format.GML32=L0,r6.format.GPX=f1,r6.format.GeoJSON=Bj,r6.format.IGC=w1,r6.format.IIIFInfo=L1,r6.format.KML=uj,r6.format.MVT=GD,r6.format.OSMXML=D1,r6.format.Polyline=Z1,r6.format.Polyline.decodeDeltas=U1,r6.format.Polyline.decodeFloats=V1,r6.format.Polyline.encodeDeltas=z1,r6.format.Polyline.encodeFloats=q1,r6.format.TopoJSON=e2,r6.format.WFS=KI,r6.format.WFS.writeFilter=function(t){var e=Zc(kI,"Filter");return qI(e,t,[]),e},r6.format.WKT=qV,r6.format.WMSCapabilities=Tg,r6.format.WMSGetFeatureInfo=n2,r6.format.WMTSCapabilities=uf,r6.format.filter={},r6.format.filter.Bbox=UT,r6.format.filter.Contains=ZT,r6.format.filter.During=KT,r6.format.filter.EqualTo=tI,r6.format.filter.GreaterThan=rI,r6.format.filter.GreaterThanOrEqualTo=iI,r6.format.filter.Intersects=aI,r6.format.filter.IsBetween=uI,r6.format.filter.IsLike=cI,r6.format.filter.IsNull=fI,r6.format.filter.LessThan=dI,r6.format.filter.LessThanOrEqualTo=yI,r6.format.filter.Not=vI,r6.format.filter.NotEqualTo=bI,r6.format.filter.Or=MI,r6.format.filter.Within=xI,r6.format.filter.and=EI,r6.format.filter.bbox=OI,r6.format.filter.between=function(t,e,r){return new uI(t,e,r)},r6.format.filter.contains=function(t,e,r){return new ZT(t,e,r)},r6.format.filter.during=function(t,e,r){return new KT(t,e,r)},r6.format.filter.equalTo=function(t,e,r){return new tI(t,e,r)},r6.format.filter.greaterThan=function(t,e){return new rI(t,e)},r6.format.filter.greaterThanOrEqualTo=function(t,e){return new iI(t,e)},r6.format.filter.intersects=function(t,e,r){return new aI(t,e,r)},r6.format.filter.isNull=function(t){return new fI(t)},r6.format.filter.lessThan=function(t,e){return new dI(t,e)},r6.format.filter.lessThanOrEqualTo=function(t,e){return new yI(t,e)},r6.format.filter.like=function(t,e,r,n,i,o){return new cI(t,e,r,n,i,o)},r6.format.filter.not=function(t){return new vI(t)},r6.format.filter.notEqualTo=function(t,e,r){return new bI(t,e,r)},r6.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(MI,e))},r6.format.filter.within=function(t,e,r){return new xI(t,e,r)},r6.geom={},r6.geom.Circle=Ny,r6.geom.Geometry=qa,r6.geom.GeometryCollection=Cy,r6.geom.LineString=Sy,r6.geom.LinearRing=fs,r6.geom.MultiLineString=Py,r6.geom.MultiPoint=Ey,r6.geom.MultiPolygon=Iy,r6.geom.Point=ds,r6.geom.Polygon=Ls,r6.geom.Polygon.circular=Rs,r6.geom.Polygon.fromCircle=As,r6.geom.Polygon.fromExtent=Cs,r6.geom.SimpleGeometry=Za,r6.has={},r6.has.DEVICE_PIXEL_RATIO=mo,r6.interaction={},r6.interaction.DoubleClickZoom=Du,r6.interaction.DragAndDrop=l2,r6.interaction.DragBox=fl,r6.interaction.DragPan=rl,r6.interaction.DragRotate=il,r6.interaction.DragRotateAndZoom=h2,r6.interaction.DragZoom=ml,r6.interaction.Draw=w2,r6.interaction.Draw.createBox=function(){return function(t,e,r){var n=Fr(t.map((function(t){return si(t,r)}))),i=[[on(n),an(n),pn(n),fn(n),on(n)]],o=e;o?o.setCoordinates(i):o=new Ls(i);var a=oi();return a&&o.transform(r,a),o}},r6.interaction.Draw.createRegularPolygon=function(t,e){return function(r,n,i){var o=si(r[0],i),a=si(r[1],i),s=Math.sqrt(ma(o,a)),u=n||As(new Ny(o),t),l=e;if(!e){var c=a[0]-o[0],h=a[1]-o[1];l=Math.atan(h/c)-(c<0?Math.PI:0)}ks(u,o,s,l);var f=oi();return f&&u.transform(i,f),u}},r6.interaction.Extent=T2,r6.interaction.Interaction=Nu,r6.interaction.KeyboardPan=Ml,r6.interaction.KeyboardZoom=El,r6.interaction.Modify=D2,r6.interaction.MouseWheelZoom=Il,r6.interaction.PinchRotate=Rl,r6.interaction.PinchZoom=Al,r6.interaction.Pointer=$u,r6.interaction.Select=fP,r6.interaction.Snap=U2,r6.interaction.Translate=H2,r6.interaction.defaults=kl,r6.layer={},r6.layer.Base=eu,r6.layer.BaseImage=ey,r6.layer.BaseTile=zm,r6.layer.BaseVector=EM,r6.layer.Graticule=$2,r6.layer.Group=uu,r6.layer.Heatmap=iW,r6.layer.Image=oy,r6.layer.Layer=wu,r6.layer.Tile=$m,r6.layer.Vector=xS,r6.layer.VectorImage=o3,r6.layer.VectorTile=CD,r6.loadingstrategy={},r6.loadingstrategy.all=TS,r6.loadingstrategy.bbox=function(t,e){return[t]},r6.loadingstrategy.tile=function(t){return function(e,r){var n=t.getZForResolution(r),i=t.getTileRangeForExtentAndZ(e,n),o=[],a=[n,0,0];for(a[1]=i.minX;a[1]<=i.maxX;++a[1])for(a[2]=i.minY;a[2]<=i.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}},r6.proj={},r6.proj.Projection=ar,r6.proj.Units={},r6.proj.Units.METERS_PER_UNIT=ir;r6.proj.addCoordinateTransforms=Xn,r6.proj.addEquivalentProjections=Zn,r6.proj.addProjection=qn,r6.proj.equivalent=Kn,r6.proj.fromLonLat=function(t,e){return $n(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},r6.proj.get=Vn,r6.proj.getPointResolution=Yn,r6.proj.getTransform=Qn,r6.proj.proj4={},r6.proj.proj4.register=ci,r6.proj.toLonLat=function(t,e){var r=$n(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=pr(n+180,360)-180),r},r6.proj.transform=$n,r6.proj.transformExtent=ti,r6.render={},r6.render.VectorContext=Jl,r6.render.canvas={},r6.render.canvas.labelCache=ec,r6.render.getRenderPixel=function(t,e){var r=e.slice(0);return ja(t.inversePixelTransform.slice(),r),r},r6.render.getVectorContext=Nc,r6.render.toContext=kc,r6.renderer={},r6.renderer.Composite=zc,r6.renderer.canvas={},r6.renderer.canvas.ImageLayer=ny,r6.renderer.canvas.TileLayer=Jm,r6.renderer.canvas.VectorImageLayer=n3,r6.renderer.canvas.VectorLayer=MS,r6.renderer.canvas.VectorTileLayer=LD,r6.renderer.webgl={},r6.renderer.webgl.PointsLayer=QZ,r6.size={},r6.size.toSize=hu,r6.source={},r6.source.BingMaps=u3,r6.source.CartoDB=c3,r6.source.Cluster=XO,r6.source.IIIF=v3,r6.source.Image=r_,r6.source.ImageArcGISRest=b3,r6.source.ImageCanvas=M3,r6.source.ImageMapGuide=x3,r6.source.ImageStatic=O3,r6.source.ImageWMS=o_,r6.source.OSM=Kz,r6.source.OSM.ATTRIBUTION=Xz,r6.source.Raster=D3,r6.source.Source=fv,r6.source.Stamen=q3,r6.source.Tile=wv,r6.source.TileArcGISRest=Z3,r6.source.TileDebug=X3,r6.source.TileImage=Iv,r6.source.TileJSON=J3,r6.source.TileWMS=Fv,r6.source.UTFGrid=t6,r6.source.Vector=jS,r6.source.VectorTile=MD,r6.source.WMSServerType={},r6.source.WMSServerType.CARMENTA_SERVER=void 0,r6.source.WMSServerType.GEOSERVER=void 0,r6.source.WMSServerType.MAPSERVER=void 0,r6.source.WMSServerType.QGIS=void 0,r6.source.WMTS=XC,r6.source.WMTS.optionsFromCapabilities=KC,r6.source.XYZ=wA,r6.source.Zoomify=m3,r6.sphere={},r6.sphere.getArea=function t(e,r){var n=r||{},i=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==mr.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,u,l,c,h,f,p=0;switch(a){case mr.POINT:case mr.MULTI_POINT:case mr.LINE_STRING:case mr.MULTI_LINE_STRING:case mr.LINEAR_RING:break;case mr.POLYGON:for(s=e.getCoordinates(),p=Math.abs(vr(s[0],i)),l=1,c=s.length;l<c;++l)p-=Math.abs(vr(s[l],i));break;case mr.MULTI_POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)for(u=s[l],p+=Math.abs(vr(u[0],i)),h=1,f=u.length;h<f;++h)p-=Math.abs(vr(u[h],i));break;case mr.GEOMETRY_COLLECTION:var d=e.getGeometries();for(l=0,c=d.length;l<c;++l)p+=t(d[l],r);break;default:throw new Error("Unsupported geometry type: "+a)}return p},r6.sphere.getDistance=yr,r6.sphere.getLength=function t(e,r){var n=r||{},i=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==mr.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,u,l,c,h,f,p=0;switch(a){case mr.POINT:case mr.MULTI_POINT:break;case mr.LINE_STRING:case mr.LINEAR_RING:p=gr(s=e.getCoordinates(),i);break;case mr.MULTI_LINE_STRING:case mr.POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)p+=gr(s[l],i);break;case mr.MULTI_POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)for(h=0,f=(u=s[l]).length;h<f;++h)p+=gr(u[h],i);break;case mr.GEOMETRY_COLLECTION:var d=e.getGeometries();for(l=0,c=d.length;l<c;++l)p+=t(d[l],r);break;default:throw new Error("Unsupported geometry type: "+a)}return p},r6.style={},r6.style.Circle=pM,r6.style.Fill=dM,r6.style.Icon=vS,r6.style.IconAnchorUnits={},r6.style.IconAnchorUnits.FRACTION=void 0,r6.style.IconAnchorUnits.PIXELS=void 0,r6.style.IconImageCache={},r6.style.IconImageCache.shared=Xl,r6.style.IconOrigin={},r6.style.IconOrigin.BOTTOM_LEFT=void 0,r6.style.IconOrigin.BOTTOM_RIGHT=void 0,r6.style.IconOrigin.TOP_LEFT=void 0,r6.style.IconOrigin.TOP_RIGHT=void 0,r6.style.Image=lM,r6.style.RegularShape=hM,r6.style.Stroke=mM,r6.style.Style=MM,r6.style.Text=Fx,r6.tilegrid={},r6.tilegrid.TileGrid=fy,r6.tilegrid.WMTS=ob,r6.tilegrid.WMTS.createFromCapabilitiesMatrixSet=ab,r6.tilegrid.createXYZ=dv,r6.transform={},r6.transform.composeCssTransform=function(t,e,r,n,i,o,a){return Ga(Da([1,0,0,1,0,0],t,e,r,n,i,o,a))},r6.util={},r6.util.getUid=Mr,r6.webgl={},r6.webgl.ARRAY_BUFFER=34962,r6.webgl.Buffer=PZ,r6.webgl.DYNAMIC_DRAW=35048,r6.webgl.ELEMENT_ARRAY_BUFFER=34963,r6.webgl.Helper=UZ,r6.webgl.Helper.computeAttributesStride=GZ,r6.webgl.PostProcessingPass=RZ,r6.webgl.RenderTarget=KZ,r6.webgl.STATIC_DRAW=35044,r6.webgl.STREAM_DRAW=35040,r6.xml={},r6.xml.getAllTextContent=Wc,r6.xml.parse=Xc,r6.xml.registerDocument=function(t){fh=t},r6.xml.registerXMLSerializer=function(t){hh=t},window.Handlebars=r(31),e6.plugin={}}]);
//# sourceMappingURL=apiign.ol.min.js.map