!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e){e.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create FullTOCControl.","extent":"Cannot get the extent of the layer","capabilities":"An error has occurred in obtaining the GetCapabilities document","only_http":"Only http services are allowed","only_https":"Only https services are allowed","no_http_https":"No http or https services allowed","valid_url":"You must provide a valid URL","empty":"The fields are empty","select_layer":"You must select at least one layer","no_results":"No layers found in this service","codsi":"An error occurred while consulting the CODSI catalog","codsi_no_results":"There are no results for your search"},"tooltip":"Layers","info":"Information","layer_info":"Layer information","configure_layer":"Configure layer","close":"Close","load_ext_services":"Load geographic information layers","layers":"Layers","add_service":"Add service","show_hide":"Show/Hide legend","zoom":"Zoom to the layer","info_metadata":"View information","change_style":"Change style","remove_layer":"Remove layer from map","select_style":"Select a style","change":"Change","url_service":"Include URL of the service to load","query":"Consult","loaded_services":"Preloaded geographic information layers","codsi_services":"INSPIRE Services Catalog (CODSI)","clean":"Clean search","availables":"List of some available layers","title":"Title","name":"Name","abstract":"Abstract","provider":"Provider","service_info":"Service information (Capabilities)","download_center":"Download center","add":"Add","drag_drop":"Drag and drop to change display order","see_more":"Show dataset metadata","see_less":"Hide dataset metadata","service":"Service","metadata_abstract":"Abstract (metadata)","responsible":"Responsible","access_constraints":"Access constraints","use_constraints":"Use constraints","online_resources":"Online resources","show_service_info":"Show service information","hide_service_info":"Hide service information","filter_results":"Filter results","clean_filter":"Clean filter","filter_text":"Text to search","metadata":"Metadata","see_more_layer":"View more information about the layer (Metadata)","see_more_service":"View more service information (Metadata)","select_service":"Select layer","amount_results":"Get ","amount_results_2":" elements","bbox-select":"Find features within rendered map","no-limit":"Get all results","custom_query":"Custom query","no_results":"No results found","search":"Search","yes":"Sí","no":"No","filters":"Filters","other_filters":"Other filters","id_filter":"Filter by ID","warning":"WARNING: High limits are not recommended","add_btn":"Add","custom_query_btn":"More filters","apply_btn":"Apply","style":"Style","default_style":"Default style","selected":"selected","custom_query_warning":"WARNING: Filtering by \\"More filters\\" it is based on a draft standard. The result of the query may not be as desired.","check_results":"Check results","results_1_plural":"","results_2_plural":" features have been found.","results_1_singular":"","results_2_singular":" feature has been found."}')},function(e){e.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles FullTOCControl.","extent":"No se puede obtener la extensión de la capa","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","only_http":"Sólo se permiten servicios http","only_https":"Sólo se permiten servicios https","no_http_https":"No se permiten servicios http ni https","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","select_layer":"Debes seleccionar al menos una capa","no_results":"No se han encontrado capas en este servicio","codsi":"Ha ocurrido un error al consultar el catálogo CODSI","codsi_no_results":"No hay resultados para su búsqueda"},"tooltip":"Capas","info":"Información","layer_info":"Información de la capa","configure_layer":"Configurar capa","close":"Cerrar","load_ext_services":"Cargar capas de información geográfica","layers":"Capas","add_service":"Añadir servicio","show_hide":"Mostrar/Ocultar leyenda","zoom":"Zoom a la capa","info_metadata":"Ver información","change_style":"Cambiar estilo","remove_layer":"Eliminar capa del mapa","select_style":"Selecciona un estilo","change":"Cambiar","url_service":"Incluir URL del servicio a cargar","query":"Consultar","loaded_services":"Capas de información geográfica","codsi_services":"Catálogo de Servicios INSPIRE (CODSI)","clean":"Limpiar búsqueda","availables":"Listado de algunas capas disponibles","title":"Título","name":"Nombre","abstract":"Resumen","provider":"Proveedor","service_info":"Información del servicio (Capabilities)","download_center":"Centro de descargas","add":"Añadir","drag_drop":"Arrastre y suelte para cambiar el orden de visualización","see_more":"Mostrar metadato del conjunto de datos","see_less":"Ocultar metadato del conjunto de datos","service":"Servicio","metadata_abstract":"Resumen (metadato)","responsible":"Responsable","access_constraints":"Restricciones de acceso","use_constraints":"Restricciones de uso","online_resources":"Recursos online","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","filter_results":"Filtrar resultados","clean_filter":"Limpiar filtro","filter_text":"Texto a buscar","metadata":"Metadatos","see_more_layer":"Ver más información de la capa","see_more_service":"Ver más información del servicio","select_service":"Selecciona una capa","amount_results":"Obtener ","amount_results_2":" elementos","bbox-select":"Solo de la extensión actual","no-limit":"Obtener todos los elementos","custom_query":"Consulta personalizada","no_results":"No se han encontrado resultados","search":"Buscar","yes":"Sí","no":"No","filters":"Filtros","other_filters":"Otros filtros","id_filter":"Filtrar por ID","warning":"ADVERTENCIA: No se recomiendan límites altos","add_btn":"Añadir","custom_query_btn":"Más filtros","apply_btn":"Aplicar","style":"Estilo","default_style":"Estilo predeterminado","selected":"seleccionado","custom_query_warning":"ATENCIÓN: La opción buscar por «Más filtros» se basa en un estándar en estado borrador. El resultado de la consulta puede no ser el deseado.","check_results":"Comprobar resultados","results_1_plural":"Se han encontrado ","results_2_plural":" features","results_1_singular":"Se ha encontrado ","results_2_singular":" feature"}')},function(e,t){e.exports='{{#*inline "fulltocLayer"}}\n  {{#each layers}}\n    <li class="m-layer {{#if outOfRange}}disabled{{/if}}{{#if visible}} visible{{/if}}">\n      <div class="m-title-container">\n        <div class="m-visible-control">\n          <span tabindex="0" role="button" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-check {{#if visible}}icon-ver{{^}}icon-ocultar{{/if}}"></span>\n        </div>\n        <div class="m-title">\n          <table>\n            <tbody>\n              <tr role="heading" tabindex="0">\n                <td><span class="m-layer-type">{{type}}</span></td>\n                <td><span class="m-layer-name">{{title}}</span></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n      {{#if visible}}\n        <div class="m-tools">\n          <div class="m-opacity-container">\n            <input tabindex="0" type="range" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-fulltoc-transparency" min="0" max="1" step="0.1" value="{{opacity}}" {{#unless visible}} disabled {{/unless}}\n              {{#if outOfRange}} disabled {{/if}} />\n          </div>\n          <div class="m-action-tools">\n            <span tabindex="0" role="button" title="{{../translations.show_hide}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="icon-leyenda m-fulltoc-legend"></span>\n            <span tabindex="0" role="button" title="{{../translations.zoom}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="icon-localizacion3 m-fulltoc-zoom"></span>\n            {{#if metadata}}\n              <span tabindex="0" role="button" title="{{../translations.info_metadata}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="icon-info m-fulltoc-info"></span>\n            {{/if}}\n\n            {{#eq this.type "OGCAPIFeatures"}}\n              <span tabindex="0" title="{{../translations.info_metadata}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="icon-info m-fulltoc-info"></span>\n\n            {{/eq}}\n            {{#if isFeatureServ}}\n              <span tabindex="0" title="{{../translations.info_metadata}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="icon-info m-fulltoc-info-py-geoapi"></span>\n            {{/if}}\n\n            {{#if hasStyles}}\n              <span tabindex="0" role="button" title="{{../translations.change_style}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="icon-pincel m-fulltoc-config"></span>\n            {{/if}}\n\n\n            {{#eq this.type "OGCAPIFeatures"}}\n              <span tabindex="0" title="{{../translations.change_style}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="icon-pincel m-fulltoc-config"></span>\n\n            {{/eq}}\n\n            <span tabindex="0" role="button" title="{{../translations.remove_layer}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="icon-papelera m-fulltoc-remove"></span>\n          </div>\n        </div>\n        <div class="m-legend">\n          <img data-layer-name="{{id}}" data-layer-url="{{url}}" src="{{legend}}"></img>\n        </div>\n      {{/if}}\n    </li>\n  {{/each}}\n  {{/inline}}\n    <div class="m-control m-fulltoc-container">\n      <div class="m-layersiwtcher-panel" id="m-fulltoc-panel">\n        <ul>\n          <li class="m-group">\n            <div aria-label="{{translations.layers}}" tabindex="0" class="m-title">\n              <span role="text" class="span-title">{{translations.layers}}</span>\n              <span role="button" tabindex="0" title="{{translations.add_service}}" class="m-fulltoc-addservice">Añadir</span>\n            </div>\n            {{#gt overlayLayers.length 0}}\n              <ul class="m-layers" title="{{translations.drag_drop}}">\n                {{> fulltocLayer layers=overlayLayers}}\n              </ul>\n            {{/gt}}\n          </li>\n        </ul>\n      </div>\n    </div>\n'},function(e,t){e.exports='<div id="fromOGCContainer">\n    <div class="select-ogc-container">\n\n        <select tabindex="0" id="m-vectors-ogc-select">\n            <option disabled="disabled" value="">{{translations.select_service}}</option>\n            {{#each layers}}\n                {{#if ../selectedLayer}}\n                {{#lt @index ../selectedLayer }} <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option> {{/lt}}\n                {{#gt @index ../selectedLayer }} <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option> {{/gt}}\n                {{#eq @index ../selectedLayer }} <option data-name="{{this.title}}" value="{{this.id}}" selected>{{this.title}}</option>{{/eq}}\n                {{else}}\n                    <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                {{/if}}\n            {{/each}}\n        </select>\n    </div>\n    <div class="btn-container"><br>\n        <fieldset class="fieldset-custom-query">\n            <legend>{{translations.filters}}</legend>\n            <label tabindex="0" class="fieldset-label-custom-query">\n                <input tabindex="0" type="radio" name="filtro" value="id" class="fieldset-input-custom-query" id="filtro-id-input" {{#unless filterByOtherFilters}}checked{{/unless}}>\n                &nbsp;{{translations.id_filter}}\n            </label>\n            <br><br>\n            <label tabindex="0" class="fieldset-label-radio-custom-query">\n                <input tabindex="0" type="radio" name="filtro" value="otros" class="fieldset-input-custom-query" {{#if filterByOtherFilters}}checked{{/if}}>\n                &nbsp;{{translations.other_filters}}\n            </label>\n\n            <br><br>\n\n\n            {{#unless filterByOtherFilters}}\n                <fieldset id="filtro-id" style="display:block;" class="fieldset-filtro-custom-query">\n            {{else}}\n                <fieldset id="filtro-id" style="display:none;" class="fieldset-filtro-custom-query">\n            {{/unless}}\n\n\n            <div id="search-form-id">\n\n                <div tabindex="0" id="form-input"><label tabindex="0" for="search-form-ID" class="search-form-id">ID</label><input tabindex="0" type="text" class="search-form-ID" id="search-form-ID" value="{{this.prevID}}"><br /></div>\n\n            </div>\n        </fieldset>\n\n\n        {{#if filterByOtherFilters}}\n            <fieldset id="otros-filtros" style="display:block;" class="fieldset-filtro-custom-query">\n        {{else}}\n            <fieldset id="otros-filtros" style="display:none;" class="fieldset-filtro-custom-query">\n        {{/if}}\n        <div id="search-form-otros">\n\n            {{#if limit}}\n                <div id="input-limit-results"><label tabindex="0">{{translations.amount_results}} </label><input tabindex="0" type="number" id="limit-items-input" value="{{limit}}" step="1" class="fieldset-limit"><label>{{translations.amount_results_2}} </label></div><br>\n            {{else}}\n                <div id="input-limit-results"><label tabindex="0">{{translations.amount_results}} </label><input tabindex="0" type="number" id="limit-items-input" value="10" step="1" class="fieldset-limit"> <label>{{translations.amount_results_2}} </label></div><br>\n            {{/if}}\n\n            {{#if bbox}}\n                <div id="input-bbox"><label tabindex="0" class="fieldset-bbox">{{translations.bbox_select}}<input tabindex="0" type="checkbox" id="search-bbox" checked></label>\n                </div><br>\n            {{else}}\n                <div id="input-bbox"><label tabindex="0" class="fieldset-bbox">{{translations.bbox_select}}<input tabindex="0" type="checkbox" id="search-bbox"></label>\n                </div><br>\n            {{/if}}\n\n            {{#if summary}}\n                <div id="div-summary">\n                    {{#if filterByOtherFilters}}\n                        <div>{{translations.other_filters}}\n                    {{/if}}\n                    <ul tabindex="0">\n                        {{#each summary}}\n                            <li tabindex="0">{{@key}} = {{this}}</li>\n                        {{/each}}\n                    </ul>\n                </div>\n                <br>\n        </div>\n\n        {{/if}}\n\n        <div id="div-advice" tabindex="0" role="text" class="warning-msg">{{translations.warning}}</div></br>\n\n\n        <button tabindex="0" class="m-fulltoc-common-btn" id="custom-query-button"> {{translations.custom_query_btn}}</button>\n\n    </div>\n    </fieldset>\n\n    </fieldset>\n    <p id="check-results"></p>\n    <button tabindex="0" class="m-fulltoc-common-btn" id="select-button"> {{translations.add_btn}}</button>\n    <button tabindex="0" class="m-fulltoc-common-btn" id="check-button"> {{translations.check_results}}</button>\n</div>\n</div>'},function(e,t){e.exports='<div id="m-fulltoc-change-config">\n  <div class="select-container">\n    <select id="m-fulltoc-style-select" aria-label="Selector de estilos" tabindex="0">\n      <option disabled="disabled" value="">{{translations.select_style}}</option>\n      {{#if ogcapifeatures}}\n        {{#each styles}}\n\n          {{#if this.options_.name}}\n          {{#lt @index ../currentStyle }} <option value="{{@index}}">{{this.options_.name}}</option> {{/lt}}\n          {{#gt @index ../currentStyle }} <option value="{{@index}}">{{this.options_.name}}</option> {{/gt}}\n          {{#eq @index ../currentStyle }} <option value="{{@index}}" selected>{{this.options_.name}} ({{../translations.selected}})</option> {{/eq}}\n\n          {{else}}\n            {{#eq @index 0}}\n              {{#lt @index ../currentStyle }} <option value="{{@index}}">{{../translations.default_style}} </option> {{/lt}}\n              {{#gt @index ../currentStyle }} <option value="{{@index}}">{{../translations.default_style}} </option> {{/gt}}\n              {{#eq @index ../currentStyle }} <option value="{{@index}}" selected>{{../translations.default_style}} ({{../translations.selected}})</option> {{/eq}}\n            {{/eq}}\n            {{#gt @index 0}}\n              {{#lt @index ../currentStyle }} <option value="{{@index}}">{{../translations.style}} {{@index}}</option> {{/lt}}\n              {{#gt @index ../currentStyle }} <option value="{{@index}}">{{../translations.style}} {{@index}}</option> {{/gt}}\n              {{#eq @index ../currentStyle }} <option value="{{@index}}" selected>{{../translations.style}} {{@index}} ({{../translations.selected}})</option> {{/eq}}\n            {{/gt}}\n          {{/if}}\n\n        {{/each}}\n      {{else}}\n        {{#each styles}}\n        <option value="{{Name}}">{{Title}}</option>\n        {{/each}}\n      {{/if}}\n    </select>\n  </div>\n  <div class="btn-container">\n    <button tabindex="0" aria-label="Modificar los estilos" class="m-fulltoc-common-btn">{{translations.change}}</button>\n  </div>\n</div>\n'},function(e,t){e.exports='<div id="m-fulltoc-information">\n  <div tabindex="0" role="main" class="m-fulltoc-info-capabilities">\n    <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n    {{#if isOgc}}\n\n    {{else}}\n    <p tabindex="0"><span>{{translations.name}}:</span>&nbsp; {{name}}</p>\n    {{/if}}\n\n    <p tabindex="0" style="margin-bottom: 0.2rem;"><span>{{translations.abstract}}:</span></p>\n    <div>\n      {{abstract}}\n    </div>\n    {{#if provider}}\n      <p tabindex="0" style="margin-bottom: 0.2rem;"><span>{{translations.provider}}:</span></p>\n    {{/if}}\n    {{#if provider}}\n      <div>\n        {{{provider}}}\n      </div>\n    {{/if}}\n    {{#if hasMetadata }}\n    {{#if isOgc}}\n\n    {{else}}\n      <p tabindex="0" style="margin-bottom: 0.2rem;"><span>{{translations.metadata}}:</span></p>\n      {{/if}}\n      {{#if metadata}}\n        <p><a tabindex="0" class="m-fulltoc-provider-link" target="_blank" href="{{metadata}}">{{translations.see_more_layer}}</a></p>\n      {{/if}}\n      {{#if metadata_service}}\n        <p><a tabindex="0" class="m-fulltoc-provider-link" target="_blank" href="{{metadata_service}}">{{translations.see_more_service}}</a></p>\n      {{/if}}\n    {{/if}}\n  </div>\n  <div class="btn-container">\n    {{#if capabilities}}\n      <a tabindex="0" class="m-fulltoc-common-btn" href="{{capabilities}}" target="_blank">{{translations.service_info}}</a>\n    {{/if}}\n    {{#if downloadCenter}}\n      <a tabindex="0" class="m-fulltoc-common-btn" href="{{downloadCenter}}" target="_blank">{{translations.download_center}}</a>\n    {{/if}}\n  </div>\n</div>'},function(e,t){e.exports='<div class="m-fulltoc-addservices" role="main">\n  <div id="loading-fulltoc" class="loading" style="display: none;"></div>\n\n    <div class="m-fulltoc-service-type-container">\n      <div>\n        <input tabindex="0" type="radio" id="m-fulltoc-addservices-wms" name="service-type" value="wms" checked="checked"><label for="m-fulltoc-addservices-wms">WMS</label>\n      </div>\n      <div>\n        <input tabindex="0" type="radio" id="m-fulltoc-addservices-wmts" name="service-type" value="wmts"><label for="m-fulltoc-addservices-wmts">WMTS</label>\n      </div>\n    </div>\n    <div tabindex="0" role="menu" class="search-panel">\n      <div class="top-buttons">\n       <input tabindex="0" type="text" id="m-fulltoc-addservices-search-input" placeholder="{{translations.url_service}}" class="m-input-search" />\n\n        <span tabindex="0" role="button" id="m-fulltoc-addservices-search-btn" class="icon-zoom m-search-btn" title="{{translations.query}}"></span>\n        {{#if hasPrecharged}}\n          <span tabindex="0" role="button" id="m-fulltoc-addservices-list-btn" class="icon-lista m-search-btn" title="{{translations.loaded_services}}"></span>\n        {{/if}}\n        {{#if codsiActive}}\n          <span tabindex="0" role="button" id="m-fulltoc-addservices-codsi-btn" class="icon-codsi m-search-btn" title="{{translations.codsi_services}}"></span>\n        {{/if}}\n\n      </div>\n        \x3c!-- <span id="m-fulltoc-addservices-clear-btn" class="icon-cancelar m-clear-btn" title="{{translations.clean}}"></span> --\x3e\n        <div id="fromOGCContainer"></div>\n    </div>\n    <div id="m-fulltoc-addservices-suggestions" style="display: block;">\n      <table style="width: 100%;">\n        <thead tabindex="0" role="heading">\n          <tr><th>{{translations.availables}}</th></tr>\n        </thead>\n        <tbody>\n          {{#each precharged.groups}}\n            <tr><td>\n              <span tabindex="0" role="button" class="m-fulltoc-suggestion-caret">{{name}}</span>\n              <ul class="m-fulltoc-suggestion-group">\n                {{#each services}}\n                  <li><span tabindex="0" class="m-fulltoc-suggestion" data-service-type="{{type}}" data-link="{{url}}">{{name}}</span></li>\n                {{/each}}\n              </ul>\n            </td></tr>\n          {{/each}}\n          {{#each precharged.services}}\n            <tr><td><span tabindex="0" class="m-fulltoc-suggestion" data-service-type="{{type}}" data-link="{{url}}">{{name}}</span></td></tr>\n          {{/each}}\n        </tbody>\n      </table>\n    </div>\n    {{#if codsiActive}}\n      <div id="m-fulltoc-addservices-codsi" style="display: none;">\n        <p><a tabindex="0" href="http://www.idee.es/csw-codsi-idee/srv/spa/catalog.search#/home" target="_blank">{{translations.codsi_services}}</a></p>\n        <div class="m-fulltoc-addservices-codsi-search-panel">\n            <input type="text" id="m-fulltoc-addservices-codsi-search-input" placeholder="{{translations.filter_text}}" class="m-input-search" />\n            <span tabindex="0" role="button" id="m-fulltoc-addservices-codsi-filter-btn" class="icon-zoom m-filter-btn" title="{{translations.filter_results}}"></span>\n            <span tabindex="0" role="button" id="m-fulltoc-addservices-codsi-clean-btn" class="icon-papelera m-clean-btn" title="{{translations.clean_filter}}"></span>\n        </div>\n        <div id="m-fulltoc-addservices-codsi-results">\n        </div>\n        <div id="m-fulltoc-addservices-codsi-pagination">\n        </div>\n      </div>\n    {{/if}}\n    <div id="m-fulltoc-addservices-results"></div>\n</div>\n'},function(e,t){e.exports='<div>\n    <div class="m-fulltoc-service-capabilities">\n      <p class="m-fulltoc-show-capabilities"><span tabindex="{{order}}" class="icon-desplegar"></span>&nbsp;{{translations.show_service_info}}</p>\n      <div class="m-fulltoc-capabilities-container">\n        {{#if serviceCapabilities.title}}\n          <p style="margin-bottom: 0.2rem;"><span tabindex="{{order}}">{{translations.title}}:</span></p>\n        {{/if}}\n        {{#if serviceCapabilities.title}}\n          <div>\n            {{serviceCapabilities.title}}\n          </div>\n        {{/if}}\n\n        {{#if serviceCapabilities.abstract}}\n          <p style="margin-bottom: 0.2rem;"><span tabindex="{{order}}">{{translations.abstract}}:</span></p>\n        {{/if}}\n        {{#if serviceCapabilities.abstract}}\n          <div>\n            {{serviceCapabilities.abstract}}\n          </div>\n        {{/if}}\n\n        {{#if serviceCapabilities.contact}}\n          <p style="margin-bottom: 0.2rem;"><span tabindex="{{order}}">{{translations.responsible}}:</span></p>\n        {{/if}}\n        {{#if serviceCapabilities.contact}}\n          <div>\n            {{{serviceCapabilities.contact}}}\n          </div>\n        {{/if}}\n\n        {{#if serviceCapabilities.accessConstraints}}\n          <p style="margin-bottom: 0.2rem;"><span tabindex="{{order}}">{{translations.access_constraints}}:</span></p>\n        {{/if}}\n        {{#if serviceCapabilities.accessConstraints}}\n          <div>\n            {{serviceCapabilities.accessConstraints}}\n          </div>\n        {{/if}}\n      </div>\n    </div>\n    <div class="table-results">\n      <div class="table-container">\n        <table style="width: 100%;">\n            <thead>\n              <tr>\n                  <th><span tabindex="{{order}}" id="m-fulltoc-addservices-selectall" class="icon-check"></span></th>\n                  <th>{{translations.layers}}</th>\n              </tr>\n            </thead>\n            <tbody>\n                {{#each result}}\n                    <tr tabindex="0">\n                      <td style="text-align: center;"><span tabindex="0" aria-label="Añadir {{name}}" id="{{name}}" name="{{name}}" class="m-check-fulltoc-addservices icon-check"></span></td>\n                      <td tabindex="0" class="table-layer-name" name="{{name}}" title="{{abstract}}">{{legend}}</td>\n                    </tr>\n                {{/each}}\n            </tbody>\n        </table>\n      </div>\n      <div class="button">\n        <button tabindex="{{order}}" type="button" class="m-fulltoc-addservices-add m-fulltoc-common-btn">{{translations.add}}</button>\n      </div>\n    </div>\n</div>\n'},function(e,t){e.exports='\n    <form>  \n            <div id="search-form-otros">\n                <div tabindex="0" role="text" class="warning-msg warning-msg-custom-query ">{{translations.custom_query_warning}}</div>\n\n            {{#each filtersList}}\n        \n            {{#if this.title}}\n                {{#if this.bool}}\n                <div id="form-input" class="custom-query-form-input">\n                    <div class="more-width">\n                        <label tabindex="0" for="search-form-{{this.title}}">{{this.title}}</label>\n                    </div>\n\n                    <div class="less-width">\n                    {{#if this.value}}\n                    {{#eq this.value "true"}}\n                    <div class="to-left"><input tabindex="0" type="checkbox" id="search-form-{{this.title}}" value="true" checked>true</div>\n                    <div class="to-left"><input tabindex="0" type="checkbox" id="search-form-{{this.title}}" value="false">false</div>\n\n                    {{/eq}}\n                    {{#eq this.value "false"}}\n                    <div class="to-left"><input tabindex="0" type="checkbox" id="search-form-{{this.title}}" value="true">true</div>\n                    <div class="to-left"><input tabindex="0" type="checkbox" id="search-form-{{this.title}}" value="false" checked>false</div>\n\n\n                    {{/eq}}\n                    {{else}}\n\n                    <div class="to-left"><input tabindex="0" type="checkbox" id="search-form-{{this.title}}" value="true">true</div>\n                    <div class="to-left"><input tabindex="0" type="checkbox" id="search-form-{{this.title}}" value="false">false</div>\n\n                    {{/if}}\n                </div>\n                    <br />\n                </div>\n                {{else if this.date}}\n                    {{#if this.value}}\n                    \n                        <div id="form-input" class="custom-query-form-input">\n                            <label tabindex="0" for="search-form-{{this.title}}" class="custom-query-form-label">{{this.title}}</label>\n                            <input tabindex="0" class="search-form-date" type="date" id="search-form-{{this.title}}" value="{{this.value}}">\n                            <br />\n                        </div>\n                    {{else}}\n                        <div id="form-input" class="custom-query-form-input"><label tabindex="0" for="search-form-{{this.title}}" class="custom-query-form-label">{{this.title}}</label><input tabindex="0" class="search-form-date" type="date" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{else if this.number}}\n                    {{#if this.value}}\n                        <div id="form-input" class="custom-query-form-input"><label tabindex="0" for="search-form-{{this.title}}" class="custom-query-form-label">{{this.title}}</label><input tabindex="0" class="search-form-number" type="number" id="search-form-{{this.title}}" value="{{this.value}}"><br /></div>\n                    {{else}}\n                        <div id="form-input" class="custom-query-form-input"><label tabindex="0" for="search-form-{{this.title}}" class="custom-query-form-label">{{this.title}}</label><input tabindex="0" class="search-form-number" type="number" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{else}}\n                    {{#if this.value}}\n                        <div id="form-input" class="custom-query-form-input"><label tabindex="0" for="search-form-{{this.title}}" class="custom-query-form-label">{{this.title}}</label><input tabindex="0" type="text" id="search-form-{{this.title}}" value="{{this.value}}"><br /></div>\n                    {{else}}\n                        <div id="form-input" class="custom-query-form-input"><label tabindex="0" for="search-form-{{this.title}}" class="custom-query-form-label">{{this.title}}</label><input tabindex="0" type="text" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{/if}}\n            {{/if}}\n            {{/each}}\n\n        </div>\n      </form>\n      \n      \n\n        \n'},function(e){e.exports=JSON.parse('{"url":{"name":"fulltoc","separator":"*"},"constructor":"M.plugin.FullTOC","parameters":[{"type":"object","properties":[{"type":"simple","name":"position","position":0,"possibleValues":["TL","TR","BL","BR"]},{"type":"boolean","name":"collapsed","position":1},{"type":"boolean","name":"http","position":2},{"type":"boolean","name":"https","position":3},{"type":"boolean","name":"codsi","position":4}]}],"files":{"ol":{"scripts":["fulltoc.ol.min.js"],"styles":["fulltoc.ol.min.css"]}},"metadata":{"name":"FullTOC","description":"","text":"","version":"1.0.0","date":"2020-06-01","author":"Guadaltel","org":"CNIG","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg"}}')},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(10),n(11);
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function c(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var u=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),d=c(/Edge/i),f=c(/firefox/i),p=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),m=c(/iP(ad|od|hone)/i),v=c(/chrome/i)&&c(/android/i),h={capture:!1,passive:!1};function y(e,t,n){e.addEventListener(t,n,!u&&h)}function g(e,t,n){e.removeEventListener(t,n,!u&&h)}function b(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function _(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function S(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&b(e,t):b(e,t))||i&&e===n)return e;if(e===n)break}while(e=_(e))}return null}var w,x=/\s+/g;function E(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(x," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(x," ")}}function O(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function C(e,t){var n="";if("string"==typeof e)n=e;else do{var i=O(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function k(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,a=i.length;if(n)for(;r<a;r++)n(i[r],r);return i}return[]}function L(){var e=document.scrollingElement;return e||document.documentElement}function T(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var a,o,l,s,c,d,f;if(e!==window&&e.parentNode&&e!==L()?(o=(a=e.getBoundingClientRect()).top,l=a.left,s=a.bottom,c=a.right,d=a.height,f=a.width):(o=0,l=0,s=window.innerHeight,c=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!u))do{if(r&&r.getBoundingClientRect&&("none"!==O(r,"transform")||n&&"static"!==O(r,"position"))){var p=r.getBoundingClientRect();o-=p.top+parseInt(O(r,"border-top-width")),l-=p.left+parseInt(O(r,"border-left-width")),s=o+a.height,c=l+a.width;break}}while(r=r.parentNode);if(i&&e!==window){var m=C(r||e),v=m&&m.a,h=m&&m.d;m&&(s=(o/=h)+(d/=h),c=(l/=v)+(f/=v))}return{top:o,left:l,bottom:s,right:c,width:f,height:d}}}function q(e,t,n){for(var i=I(e,!0),r=T(e)[t];i;){var a=T(i)[n];if(!("top"===n||"left"===n?r>=a:r<=a))return i;if(i===L())break;i=I(i,!1)}return!1}function A(e,t,n,i){for(var r=0,a=0,o=e.children;a<o.length;){if("none"!==o[a].style.display&&o[a]!==We.ghost&&(i||o[a]!==We.dragged)&&S(o[a],n.draggable,e,!1)){if(r===t)return o[a];r++}a++}return null}function D(e,t){for(var n=e.lastElementChild;n&&(n===We.ghost||"none"===O(n,"display")||t&&!b(n,t));)n=n.previousElementSibling;return n||null}function P(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===We.clone||t&&!b(e,t)||n++;return n}function N(e){var t=0,n=0,i=L();if(e)do{var r=C(e),a=r.a,o=r.d;t+=e.scrollLeft*a,n+=e.scrollTop*o}while(e!==i&&(e=e.parentNode));return[t,n]}function I(e,t){if(!e||!e.getBoundingClientRect)return L();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=O(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return L();if(i||t)return n;i=!0}}}while(n=n.parentNode);return L()}function R(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function j(e,t){return function(){if(!w){var n=arguments,i=this;1===n.length?e.call(i,n[0]):e.apply(i,n),w=setTimeout((function(){w=void 0}),t)}}}function F(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function W(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var G="Sortable"+(new Date).getTime();function H(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==O(e,"display")&&e!==We.ghost){t.push({target:e,rect:T(e)});var n=r({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=C(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var r=!1,a=0;t.forEach((function(e){var t=0,n=e.target,o=n.fromRect,l=T(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=C(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&R(s,l)&&!R(o,l)&&(u.top-l.top)/(u.left-l.left)==(o.top-l.top)/(o.left-l.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(u,s,c,i.options)),R(l,o)||(n.prevFromRect=o,n.prevToRect=l,t||(t=i.options.animation),i.animate(n,u,l,t)),t&&(r=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),r?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){O(e,"transition",""),O(e,"transform","");var r=C(this.el),a=r&&r.a,o=r&&r.d,l=(t.left-n.left)/(a||1),s=(t.top-n.top)/(o||1);e.animatingX=!!l,e.animatingY=!!s,O(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),O(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),O(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){O(e,"transition",""),O(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var B=[],U={initializeByDefault:!0},Y={mount:function(e){for(var t in U)U.hasOwnProperty(t)&&!(t in e)&&(e[t]=U[t]);B.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),B.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var a=e+"Global";B.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][a]&&t[i.pluginName][a](r({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](r({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var r in B.forEach((function(i){var r=i.pluginName;if(e.options[r]||i.initializeByDefault){var a=new i(e,t,e.options);a.sortable=e,a.options=e.options,e[r]=a,l(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var a=this.modifyOption(e,r,e.options[r]);void 0!==a&&(e.options[r]=a)}},getEventProperties:function(e,t){var n={};return B.forEach((function(i){"function"==typeof i.eventProperties&&l(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return B.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[t]&&(i=r.optionListeners[t].call(e[r.pluginName],n))})),i}};function V(e){var t=e.sortable,n=e.rootEl,i=e.name,a=e.targetEl,o=e.cloneEl,l=e.toEl,s=e.fromEl,c=e.oldIndex,f=e.newIndex,p=e.oldDraggableIndex,m=e.newDraggableIndex,v=e.originalEvent,h=e.putSortable,y=e.extraEventProperties;if(t=t||n&&n[G]){var g,b=t.options,_="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||u||d?(g=document.createEvent("Event")).initEvent(i,!0,!0):g=new CustomEvent(i,{bubbles:!0,cancelable:!0}),g.to=l||n,g.from=s||n,g.item=a||n,g.clone=o,g.oldIndex=c,g.newIndex=f,g.oldDraggableIndex=p,g.newDraggableIndex=m,g.originalEvent=v,g.pullMode=h?h.lastPutMode:void 0;var S=r(r({},y),Y.getEventProperties(i,t));for(var w in S)g[w]=S[w];n&&n.dispatchEvent(g),b[_]&&b[_].call(t,g)}}var X=["evt"],z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,a=s(n,X);Y.pluginEvent.bind(We)(e,t,r({dragEl:Z,parentEl:K,ghostEl:$,rootEl:Q,nextEl:ee,lastDownEl:te,cloneEl:ne,cloneHidden:ie,dragStarted:he,putSortable:ce,activeSortable:We.active,originalEvent:i,oldIndex:re,oldDraggableIndex:oe,newIndex:ae,newDraggableIndex:le,hideGhostForTarget:Ie,unhideGhostForTarget:Re,cloneNowHidden:function(){ie=!0},cloneNowShown:function(){ie=!1},dispatchSortableEvent:function(e){J({sortable:t,name:e,originalEvent:i})}},a))};function J(e){V(r({putSortable:ce,cloneEl:ne,targetEl:Z,rootEl:Q,oldIndex:re,oldDraggableIndex:oe,newIndex:ae,newDraggableIndex:le},e))}var Z,K,$,Q,ee,te,ne,ie,re,ae,oe,le,se,ce,ue,de,fe,pe,me,ve,he,ye,ge,be,_e,Se=!1,we=!1,xe=[],Me=!1,Ee=!1,Oe=[],Ce=!1,ke=[],Le="undefined"!=typeof document,Te=m,qe=d||u?"cssFloat":"float",Ae=Le&&!v&&!m&&"draggable"in document.createElement("div"),De=function(){if(Le){if(u)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Pe=function(e,t){var n=O(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=A(e,0,t),a=A(e,1,t),o=r&&O(r),l=a&&O(a),s=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+T(r).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+T(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&o.float&&"none"!==o.float){var u="left"===o.float?"left":"right";return!a||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return r&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||s>=i&&"none"===n[qe]||a&&"none"===n[qe]&&s+c>i)?"vertical":"horizontal"},Ne=function(e){function t(e,n){return function(i,r,a,o){var l=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(i,r,a,o),n)(i,r,a,o);var s=(n?i:r).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},i=e.group;i&&"object"==a(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Ie=function(){!De&&$&&O($,"display","none")},Re=function(){!De&&$&&O($,"display","")};Le&&!v&&document.addEventListener("click",(function(e){if(we)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),we=!1,!1}),!0);var je=function(e){if(Z){e=e.touches?e.touches[0]:e;var t=(r=e.clientX,a=e.clientY,xe.some((function(e){var t=e[G].options.emptyInsertThreshold;if(t&&!D(e)){var n=T(e),i=r>=n.left-t&&r<=n.right+t,l=a>=n.top-t&&a<=n.bottom+t;return i&&l?o=e:void 0}})),o);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[G]._onDragOver(n)}}var r,a,o},Fe=function(e){Z&&Z.parentNode[G]._isOutsideThisEl(e.target)};function We(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=l({},t),e[G]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Pe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==We.supportPointer&&"PointerEvent"in window&&!p,emptyInsertThreshold:5};for(var i in Y.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var r in Ne(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Ae,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?y(e,"pointerdown",this._onTapStart):(y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),xe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),l(this,H())}function Ge(e,t,n,i,r,a,o,l){var s,c,f=e[G],p=f.options.onMove;return!window.CustomEvent||u||d?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=i,s.related=r||t,s.relatedRect=a||T(t),s.willInsertAfter=l,s.originalEvent=o,e.dispatchEvent(s),p&&(c=p.call(f,s,o)),c}function He(e){e.draggable=!1}function Be(){Ce=!1}function Ue(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function Ye(e){return setTimeout(e,0)}function Ve(e){return clearTimeout(e)}We.prototype={constructor:We,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ye=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Z):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(o||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(function(e){ke.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&ke.push(i)}}(n),!Z&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!p||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=S(l,i.draggable,n,!1))&&l.animated||te===l)){if(re=P(l),oe=P(l,i.draggable),"function"==typeof c){if(c.call(this,e,l,this))return J({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),z("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=S(s,i.trim(),n,!1))return J({sortable:t,rootEl:i,name:"filter",targetEl:l,fromEl:n,toEl:n}),z("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());i.handle&&!S(s,i.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,t,n){var i,r=this,a=r.el,o=r.options,l=a.ownerDocument;if(n&&!Z&&n.parentNode===a){var s=T(n);if(Q=a,K=(Z=n).parentNode,ee=Z.nextSibling,te=n,se=o.group,We.dragged=Z,ue={target:Z,clientX:(t||e).clientX,clientY:(t||e).clientY},me=ue.clientX-s.left,ve=ue.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Z.style["will-change"]="all",i=function(){z("delayEnded",r,{evt:e}),We.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!f&&r.nativeDraggable&&(Z.draggable=!0),r._triggerDragStart(e,t),J({sortable:r,name:"choose",originalEvent:e}),E(Z,o.chosenClass,!0))},o.ignore.split(",").forEach((function(e){k(Z,e.trim(),He)})),y(l,"dragover",je),y(l,"mousemove",je),y(l,"touchmove",je),y(l,"mouseup",r._onDrop),y(l,"touchend",r._onDrop),y(l,"touchcancel",r._onDrop),f&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Z.draggable=!0),z("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(d||u))i();else{if(We.eventCanceled)return void this._onDrop();y(l,"mouseup",r._disableDelayedDrag),y(l,"touchend",r._disableDelayedDrag),y(l,"touchcancel",r._disableDelayedDrag),y(l,"mousemove",r._delayedDragTouchMoveHandler),y(l,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&y(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,o.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Z&&He(Z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._disableDelayedDrag),g(e,"touchend",this._disableDelayedDrag),g(e,"touchcancel",this._disableDelayedDrag),g(e,"mousemove",this._delayedDragTouchMoveHandler),g(e,"touchmove",this._delayedDragTouchMoveHandler),g(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?y(document,"pointermove",this._onTouchMove):y(document,t?"touchmove":"mousemove",this._onTouchMove):(y(Z,"dragend",this),y(Q,"dragstart",this._onDragStart));try{document.selection?Ye((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Se=!1,Q&&Z){z("dragStarted",this,{evt:t}),this.nativeDraggable&&y(document,"dragover",Fe);var n=this.options;!e&&E(Z,n.dragClass,!1),E(Z,n.ghostClass,!0),We.active=this,e&&this._appendGhost(),J({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(de){this._lastX=de.clientX,this._lastY=de.clientY,Ie();for(var e=document.elementFromPoint(de.clientX,de.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(de.clientX,de.clientY))!==t;)t=e;if(Z.parentNode[G]._isOutsideThisEl(e),t)do{if(t[G]){if(t[G]._onDragOver({clientX:de.clientX,clientY:de.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Re()}},_onTouchMove:function(e){if(ue){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,a=$&&C($,!0),o=$&&a&&a.a,l=$&&a&&a.d,s=Te&&_e&&N(_e),c=(r.clientX-ue.clientX+i.x)/(o||1)+(s?s[0]-Oe[0]:0)/(o||1),u=(r.clientY-ue.clientY+i.y)/(l||1)+(s?s[1]-Oe[1]:0)/(l||1);if(!We.active&&!Se){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if($){a?(a.e+=c-(fe||0),a.f+=u-(pe||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");O($,"webkitTransform",d),O($,"mozTransform",d),O($,"msTransform",d),O($,"transform",d),fe=c,pe=u,de=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!$){var e=this.options.fallbackOnBody?document.body:Q,t=T(Z,!0,Te,!0,e),n=this.options;if(Te){for(_e=e;"static"===O(_e,"position")&&"none"===O(_e,"transform")&&_e!==document;)_e=_e.parentNode;_e!==document.body&&_e!==document.documentElement?(_e===document&&(_e=L()),t.top+=_e.scrollTop,t.left+=_e.scrollLeft):_e=L(),Oe=N(_e)}E($=Z.cloneNode(!0),n.ghostClass,!1),E($,n.fallbackClass,!0),E($,n.dragClass,!0),O($,"transition",""),O($,"transform",""),O($,"box-sizing","border-box"),O($,"margin",0),O($,"top",t.top),O($,"left",t.left),O($,"width",t.width),O($,"height",t.height),O($,"opacity","0.8"),O($,"position",Te?"absolute":"fixed"),O($,"zIndex","100000"),O($,"pointerEvents","none"),We.ghost=$,e.appendChild($),O($,"transform-origin",me/parseInt($.style.width)*100+"% "+ve/parseInt($.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;z("dragStart",this,{evt:e}),We.eventCanceled?this._onDrop():(z("setupClone",this),We.eventCanceled||((ne=W(Z)).removeAttribute("id"),ne.draggable=!1,ne.style["will-change"]="",this._hideClone(),E(ne,this.options.chosenClass,!1),We.clone=ne),n.cloneId=Ye((function(){z("clone",n),We.eventCanceled||(n.options.removeCloneOnHide||Q.insertBefore(ne,Z),n._hideClone(),J({sortable:n,name:"clone"}))})),!t&&E(Z,r.dragClass,!0),t?(we=!0,n._loopId=setInterval(n._emulateDragOver,50)):(g(document,"mouseup",n._onDrop),g(document,"touchend",n._onDrop),g(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,Z)),y(document,"drop",n),O(Z,"transform","translateZ(0)")),Se=!0,n._dragStartId=Ye(n._dragStarted.bind(n,t,e)),y(document,"selectstart",n),he=!0,p&&O(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,a,o=this.el,l=e.target,s=this.options,c=s.group,u=We.active,d=se===c,f=s.sort,p=ce||u,m=this,v=!1;if(!Ce){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=S(l,s.draggable,o,!0),j("dragOver"),We.eventCanceled)return v;if(Z.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||m._ignoreWhileAnimating===l)return H(!1);if(we=!1,u&&!s.disabled&&(d?f||(i=K!==Q):ce===this||(this.lastPutMode=se.checkPull(this,u,Z,e))&&c.checkPut(this,u,Z,e))){if(a="vertical"===this._getDirection(e,l),t=T(Z),j("dragOverValid"),We.eventCanceled)return v;if(i)return K=Q,W(),this._hideClone(),j("revert"),We.eventCanceled||(ee?Q.insertBefore(Z,ee):Q.appendChild(Z)),H(!0);var h=D(o,s.draggable);if(!h||function(e,t,n){var i=T(D(n.el,n.options.draggable));return t?e.clientX>i.right+10||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+10}(e,a,this)&&!h.animated){if(h===Z)return H(!1);if(h&&o===e.target&&(l=h),l&&(n=T(l)),!1!==Ge(Q,o,Z,t,l,n,e,!!l))return W(),h&&h.nextSibling?o.insertBefore(Z,h.nextSibling):o.appendChild(Z),K=o,B(),H(!0)}else if(h&&function(e,t,n){var i=T(A(n.el,0,n.options,!0));return t?e.clientX<i.left-10||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-10||e.clientY<i.bottom&&e.clientX<i.left}(e,a,this)){var y=A(o,0,s,!0);if(y===Z)return H(!1);if(n=T(l=y),!1!==Ge(Q,o,Z,t,l,n,e,!1))return W(),o.insertBefore(Z,y),K=o,B(),H(!0)}else if(l.parentNode===o){n=T(l);var g,b,_,w=Z.parentNode!==o,x=!function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,a=n?e.width:e.height,o=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return i===o||r===l||i+a/2===o+s/2}(Z.animated&&Z.toRect||t,l.animated&&l.toRect||n,a),M=a?"top":"left",C=q(l,"top","top")||q(Z,"top","top"),k=C?C.scrollTop:void 0;if(ye!==l&&(b=n[M],Me=!1,Ee=!x&&s.invertSwap||w),0!==(g=function(e,t,n,i,r,a,o,l){var s=i?e.clientY:e.clientX,c=i?n.height:n.width,u=i?n.top:n.left,d=i?n.bottom:n.right,f=!1;if(!o)if(l&&be<c*r){if(!Me&&(1===ge?s>u+c*a/2:s<d-c*a/2)&&(Me=!0),Me)f=!0;else if(1===ge?s<u+be:s>d-be)return-ge}else if(s>u+c*(1-r)/2&&s<d-c*(1-r)/2)return function(e){return P(Z)<P(e)?1:-1}(t);if((f=f||o)&&(s<u+c*a/2||s>d-c*a/2))return s>u+c/2?1:-1;return 0}(e,l,n,a,x?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Ee,ye===l))){var L=P(Z);do{L-=g,_=K.children[L]}while(_&&("none"===O(_,"display")||_===$))}if(0===g||_===l)return H(!1);ye=l,ge=g;var N=l.nextElementSibling,I=!1,R=Ge(Q,o,Z,t,l,n,e,I=1===g);if(!1!==R)return 1!==R&&-1!==R||(I=1===R),Ce=!0,setTimeout(Be,30),W(),I&&!N?o.appendChild(Z):l.parentNode.insertBefore(Z,I?N:l),C&&F(C,0,k-C.scrollTop),K=Z.parentNode,void 0===b||Ee||(be=Math.abs(b-T(l)[M])),B(),H(!0)}if(o.contains(Z))return H(!1)}return!1}function j(s,c){z(s,m,r({evt:e,isOwner:d,axis:a?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:f,fromSortable:p,target:l,completed:H,onMove:function(n,i){return Ge(Q,o,Z,t,n,T(n),e,i)},changed:B},c))}function W(){j("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function H(t){return j("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(m),m!==p&&(E(Z,ce?ce.options.ghostClass:u.options.ghostClass,!1),E(Z,s.ghostClass,!0)),ce!==m&&m!==We.active?ce=m:m===We.active&&ce&&(ce=null),p===m&&(m._ignoreWhileAnimating=l),m.animateAll((function(){j("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===Z&&!Z.animated||l===o&&!l.animated)&&(ye=null),s.dragoverBubble||e.rootEl||l===document||(Z.parentNode[G]._isOutsideThisEl(e.target),!t&&je(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function B(){ae=P(Z),le=P(Z,s.draggable),J({sortable:m,name:"change",toEl:o,newIndex:ae,newDraggableIndex:le,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){g(document,"mousemove",this._onTouchMove),g(document,"touchmove",this._onTouchMove),g(document,"pointermove",this._onTouchMove),g(document,"dragover",je),g(document,"mousemove",je),g(document,"touchmove",je)},_offUpEvents:function(){var e=this.el.ownerDocument;g(e,"mouseup",this._onDrop),g(e,"touchend",this._onDrop),g(e,"pointerup",this._onDrop),g(e,"touchcancel",this._onDrop),g(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ae=P(Z),le=P(Z,n.draggable),z("drop",this,{evt:e}),K=Z&&Z.parentNode,ae=P(Z),le=P(Z,n.draggable),We.eventCanceled||(Se=!1,Ee=!1,Me=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ve(this.cloneId),Ve(this._dragStartId),this.nativeDraggable&&(g(document,"drop",this),g(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&O(document.body,"user-select",""),O(Z,"transform",""),e&&(he&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),$&&$.parentNode&&$.parentNode.removeChild($),(Q===K||ce&&"clone"!==ce.lastPutMode)&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),Z&&(this.nativeDraggable&&g(Z,"dragend",this),He(Z),Z.style["will-change"]="",he&&!Se&&E(Z,ce?ce.options.ghostClass:this.options.ghostClass,!1),E(Z,this.options.chosenClass,!1),J({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),Q!==K?(ae>=0&&(J({rootEl:K,name:"add",toEl:K,fromEl:Q,originalEvent:e}),J({sortable:this,name:"remove",toEl:K,originalEvent:e}),J({rootEl:K,name:"sort",toEl:K,fromEl:Q,originalEvent:e}),J({sortable:this,name:"sort",toEl:K,originalEvent:e})),ce&&ce.save()):ae!==re&&ae>=0&&(J({sortable:this,name:"update",toEl:K,originalEvent:e}),J({sortable:this,name:"sort",toEl:K,originalEvent:e})),We.active&&(null!=ae&&-1!==ae||(ae=re,le=oe),J({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){z("nulling",this),Q=Z=K=$=ee=ne=te=ie=ue=de=he=ae=le=re=oe=ye=ge=ce=se=We.dragged=We.ghost=We.clone=We.active=null,ke.forEach((function(e){e.checked=!0})),ke.length=fe=pe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Z&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,a=this.options;i<r;i++)S(e=n[i],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Ue(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach((function(e,t){var r=i.children[t];S(r,this.options.draggable,i,!1)&&(n[e]=r)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return S(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=Y.modifyOption(this,e,t);n[e]=void 0!==i?i:t,"group"===e&&Ne(n)},destroy:function(){z("destroy",this);var e=this.el;e[G]=null,g(e,"mousedown",this._onTapStart),g(e,"touchstart",this._onTapStart),g(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(g(e,"dragover",this),g(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),xe.splice(xe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ie){if(z("hideClone",this),We.eventCanceled)return;O(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),ie=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ie){if(z("showClone",this),We.eventCanceled)return;Z.parentNode!=Q||this.options.group.revertClone?ee?Q.insertBefore(ne,ee):Q.appendChild(ne):Q.insertBefore(ne,Z),this.options.group.revertClone&&this.animate(Z,ne),O(ne,"display",""),ie=!1}}else this._hideClone()}},Le&&y(document,"touchmove",(function(e){(We.active||Se)&&e.cancelable&&e.preventDefault()})),We.utils={on:y,off:g,css:O,find:k,is:function(e,t){return!!S(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:j,closest:S,toggleClass:E,clone:W,index:P,nextTick:Ye,cancelNextTick:Ve,detectDirection:Pe,getChild:A},We.get=function(e){return e[G]},We.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(We.utils=r(r({},We.utils),e.utils)),Y.mount(e)}))},We.create=function(e,t){return new We(e,t)},We.version="1.15.0";var Xe,ze,Je,Ze,Ke,$e,Qe=[],et=!1;function tt(){Qe.forEach((function(e){clearInterval(e.pid)})),Qe=[]}function nt(){clearInterval($e)}var it=j((function(e,t,n,i){if(t.scroll){var r,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=L(),u=!1;ze!==n&&(ze=n,tt(),Xe=t.scroll,r=t.scrollFn,!0===Xe&&(Xe=I(n,!0)));var d=0,f=Xe;do{var p=f,m=T(p),v=m.top,h=m.bottom,y=m.left,g=m.right,b=m.width,_=m.height,S=void 0,w=void 0,x=p.scrollWidth,M=p.scrollHeight,E=O(p),C=p.scrollLeft,k=p.scrollTop;p===c?(S=b<x&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),w=_<M&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(S=b<x&&("auto"===E.overflowX||"scroll"===E.overflowX),w=_<M&&("auto"===E.overflowY||"scroll"===E.overflowY));var q=S&&(Math.abs(g-a)<=l&&C+b<x)-(Math.abs(y-a)<=l&&!!C),A=w&&(Math.abs(h-o)<=l&&k+_<M)-(Math.abs(v-o)<=l&&!!k);if(!Qe[d])for(var D=0;D<=d;D++)Qe[D]||(Qe[D]={});Qe[d].vx==q&&Qe[d].vy==A&&Qe[d].el===p||(Qe[d].el=p,Qe[d].vx=q,Qe[d].vy=A,clearInterval(Qe[d].pid),0==q&&0==A||(u=!0,Qe[d].pid=setInterval(function(){i&&0===this.layer&&We.active._onTouchMove(Ke);var t=Qe[this.layer].vy?Qe[this.layer].vy*s:0,n=Qe[this.layer].vx?Qe[this.layer].vx*s:0;"function"==typeof r&&"continue"!==r.call(We.dragged.parentNode[G],n,t,e,Ke,Qe[this.layer].el)||F(Qe[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=I(f,!1)));et=u}}),30),rt=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||r;o();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(a("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function at(){}function ot(){}at.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=A(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:rt},l(at,{pluginName:"revertOnSpill"}),ot.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:rt},l(ot,{pluginName:"removeOnSpill"});We.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?y(document,"pointermove",this._handleFallbackAutoScroll):t.touches?y(document,"touchmove",this._handleFallbackAutoScroll):y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):(g(document,"pointermove",this._handleFallbackAutoScroll),g(document,"touchmove",this._handleFallbackAutoScroll),g(document,"mousemove",this._handleFallbackAutoScroll)),nt(),tt(),clearTimeout(w),w=void 0},nulling:function(){Ke=ze=Xe=et=$e=Je=Ze=null,Qe.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(i,r);if(Ke=e,t||this.options.forceAutoScrollFallback||d||u||p){it(e,this.options,a,t);var o=I(a,!0);!et||$e&&i===Je&&r===Ze||($e&&nt(),$e=setInterval((function(){var a=I(document.elementFromPoint(i,r),!0);a!==o&&(o=a,tt()),it(e,n.options,a,t)}),10),Je=i,Ze=r)}else{if(!this.options.bubbleScroll||I(a,!0)===L())return void tt();it(e,this.options,I(a,!1),!1)}}},l(e,{pluginName:"scroll",initializeByDefault:!0})}),We.mount(ot,at);var lt=We;function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,a=function(e,t){if("object"!==st(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==st(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===st(a)?a:String(a)),i)}var r,a}function dt(){return(dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=ft(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function ft(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ht(e)););return e}function pt(e,t){return(pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ht(e);if(t){var r=ht(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vt(this,n)}}function vt(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(a,M.impl.Control);var t,n,i,r=mt(a);function a(){return ct(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"addTo",value:function(e,t){this.facadeMap_=e,this.facadeControl_=void 0,dt(ht(a.prototype),"addTo",this).call(this,e,t)}},{key:"registerEvents",value:function(){var e=this;if(!M.utils.isNullOrEmpty(this.facadeMap_)){var t=this.facadeMap_.getMapImpl();this.registerViewEvents_(t.getView()),this.registerLayersEvents_(t.getLayers()),t.on("change:view",(function(){return e.onViewChange_.bind(e)}))}}},{key:"unregisterEvents",value:function(){var e=this;if(!M.utils.isNullOrEmpty(this.facadeMap_)){var t=this.facadeMap_.getMapImpl();this.unregisterViewEvents_(t.getView()),this.unregisterLayersEvents_(t.getLayers()),t.un("change:view",(function(){return e.onViewChange_.bind(e)}))}}},{key:"registerViewEvents_",value:function(e){var t=this;e.on("change:resolution",(function(){return t.facadeControl_.render()}))}},{key:"registerLayersEvents_",value:function(e){var t=this;e.forEach(this.registerLayerEvents_.bind(this)),e.on("remove",(function(){return t.facadeControl_.render()})),e.on("add",(function(){return t.onAddLayer_.bind(t)}))}},{key:"registerLayerEvents_",value:function(e){var t=this;e.on("change:visible",(function(){return t.facadeControl_.render()})),e.on("change:extent",(function(){return t.facadeControl_.render()}))}},{key:"unregisterViewEvents_",value:function(e){var t=this;e.un("change:resolution",(function(){return t.facadeControl_.render()}))}},{key:"unregisterLayersEvents_",value:function(e){var t=this;e.forEach(this.unregisterLayerEvents_.bind(this)),e.un("remove",(function(){return t.facadeControl_.render()})),e.un("add",(function(){return t.onAddLayer_.bind(t)}))}},{key:"unregisterLayerEvents_",value:function(e){var t=this;e.un("change:visible",(function(){return t.facadeControl_.render()})),e.un("change:extent",(function(){return t.facadeControl_.render()}))}},{key:"onViewChange_",value:function(e){this.unregisterViewEvents_(e.oldValue);var t=this.facadeMap_.getMapImpl();this.registerViewEvents_(t.getView())}},{key:"onAddLayer_",value:function(e){this.registerLayerEvents_(e.element),this.facadeControl_.render()}},{key:"getGeoJSONExtent",value:function(e){return e.getImpl().getOL3Layer().getSource().getExtent()}},{key:"loadOGCAPIFeaturesLayer",value:function(e){var t=new M.layer.OGCAPIFeatures(e);this.facadeMap_.addLayers(t),t.setZIndex(t.getZIndex()+8)}},{key:"getNumberFeaturesOGCAPIFeaturesLayer",value:function(e){var t,n=new M.layer.OGCAPIFeatures(e),i=this.getFeatureUrl(n);return M.remote.get(i).then((function(e){return null!==(t=JSON.parse(e.text))?"Feature"===t.type?1:t.features.length:0}))}},{key:"getFeatureUrl",value:function(e){var t,n={};if(M.utils.isNullOrEmpty(e.name)||(e.url="".concat(e.url).concat(e.name,"/items/")),M.utils.isNullOrEmpty(e.format)||(n.f=e.format),M.utils.isNullOrEmpty(e.id)){if(e.url="".concat(e.url,"?"),M.utils.isNullOrEmpty(e.limit)||(n.limit=e.limit),M.utils.isNullOrEmpty(e.offset)||(n.offset=e.offset),M.utils.isNullOrEmpty(e.bbox)||(n.bbox=e.bbox),t=M.utils.addParameters(M.utils.addParameters(e.url,n),e.getFeatureVendor),!M.utils.isNullOrEmpty(e.conditional)){var i="";Object.keys(e.conditional).forEach((function(t){var n="&".concat(t,"=").concat(e.conditional[t],"&");i+=n})),n.conditional=i,t+=n.conditional}}else e.url="".concat(e.url).concat(e.id,"?"),t=M.utils.addParameters(M.utils.addParameters(e.url,n),e.getFeatureVendor);return t=t.replaceAll(" ","%20")}},{key:"centerFeatures",value:function(e,t){if(!M.utils.isNullOrEmpty(e)){if(1===e.length&&"Point"===e[0].getGeometry().type){var n=new ol.View({center:e[0].getGeometry().coordinates,zoom:15});this.facadeMap_.getMapImpl().setView(n)}else{var i=M.impl.utils.getFeaturesExtent(e);this.facadeMap_.getMapImpl().getView().fit(i,{duration:500,minResolution:1})}e.forEach((function(e){switch(e.getGeometry().type){case"Point":case"MultiPoint":var n={radius:6,fill:{color:"#71a7d3"},stroke:{color:"white",width:2}};t&&void 0!==e.getAttributes().name&&""!==e.getAttributes().name&&(n.label={fill:{color:"#ff0000"},stroke:{color:"white",width:2,linedash:[0,0],linedashoffset:0,linecap:"none",linejoin:"none"},scale:2,text:e.getAttributes().name,font:"8px sanserif",align:"center",baseline:"top",rotate:!1,rotation:0,offset:[0,10]}),void 0!==e&&e.setStyle(new M.style.Point(n));break;case"LineString":case"MultiLineString":var i=new M.style.Line({stroke:{color:"#71a7d3",width:3,linedash:void 0}});void 0!==e&&e.setStyle(i);break;case"Polygon":case"MultiPolygon":var r=new M.style.Polygon({fill:{color:"#71a7d3",opacity:.2},stroke:{color:"#71a7d3",width:3}});void 0!==e&&e.setStyle(r)}}))}}},{key:"getTransformedCoordinates",value:function(e,t){var n=ol.proj.getTransform(e,"EPSG:4326");return this.getFullCoordinates(t,n(this.getXY(t)))}},{key:"getFullCoordinates",value:function(e,t){var n=e;return n[0]=t[0],n[1]=t[1],n}},{key:"getXY",value:function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]);for(;t.length>2;)t.pop();return t}}])&&ut(t.prototype,n),i&&ut(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(),gt=n(2),bt=n.n(gt),_t=n(4),St=n.n(_t),wt=n(5),xt=n.n(wt),Mt=n(6),Et=n.n(Mt),Ot=n(7),Ct=n.n(Ot),kt=n(3),Lt=n.n(kt),Tt=n(8),qt=n.n(Tt),At=n(0),Dt=n(1),Pt={en:At,es:Dt},Nt=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},It=function(e){return"es"===e||"en"===e?Pt[e]:M.language.getTranslation(e).fulltoc},Rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt(),n=It(t),i="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(t,"' has not been defined.")):i=e.split(".").reduce((function(e,t){return e[t]}),n),i};function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e){return function(e){if(Array.isArray(e))return Wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,a=function(e,t){if("object"!==jt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==jt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===jt(a)?a:String(a)),i)}var r,a}function Ht(){return(Ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=Bt(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function Bt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zt(e)););return e}function Ut(e,t){return(Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=zt(e);if(t){var r=zt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Vt(this,n)}}function Vt(e,t){if(t&&("object"===jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xt(e)}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ut(e,t)}(a,M.Control);var t,n,i,r=Yt(a);function a(e,t,n,i,o){var l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),M.utils.isUndefined(yt)&&M.exception(Rt("exception.impl"));var s=new yt;return l=r.call(this,s,"FullTOC"),s.facadeControl=Xt(l),l.map_=void 0,l.template_=void 0,l.http=e,l.https=t,l.precharged=n,l.codsi=i,l.stateSelectAll=!1,l.filterName=void 0,l.order=o,l}return t=a,(n=[{key:"createView",value:function(e){var t=this;return this.map_=e,new Promise((function(n,i){t.getTemplateVariables(e).then((function(i){var r=M.template.compileSync(bt.a,{vars:i});t.template_=r,n(r),t.template_.addEventListener("click",t.clickLayer.bind(t),!1),t.template_.addEventListener("keydown",(function(e){return 13===e.keyCode&&e.target.click()})),t.template_.addEventListener("input",t.inputLayer.bind(t),!1),t.getImpl().registerEvents(),t.render(),t.afterRender(e.getLayers()),setTimeout((function(){var e=document.querySelector(".m-plugin-fulltoc .m-panel-btn.icon-capas");null!==e&&e.addEventListener("click",(function(){t.template_.querySelector(".m-fulltoc-container .m-title .span-title").click(),setTimeout((function(){t.template_.querySelector(".m-fulltoc-container .m-title .span-title").click()}),100)}))}),200)}))}))}},{key:"afterRender",value:function(e){var t=this;setTimeout((function(){t.template_.querySelector(".m-fulltoc-container .m-title .span-title").click()}),700),void 0!==e&&e.length>0&&e.forEach((function(e){e.getImpl().on(M.evt.ADDED_TO_MAP,(function(e){null!=e.getOL3Layer()&&t.template_.querySelector(".m-fulltoc-container .m-title .span-title").click()}))}))}},{key:"inputLayer",value:function(e){var t=e||window.event;if(!M.utils.isNullOrEmpty(t.target)){var n=t.target.getAttribute("data-layer-name");if(!M.utils.isNullOrEmpty(n)){t.stopPropagation();var i=this.map_.getLayers().filter((function(e){return e.name===n}))[0];if(t.target.classList.contains("m-check")){if(!0===i.transparent||!i.isVisible()){var r=t.target.parentElement.parentElement.parentElement.parentElement.querySelector("div.tools > input");M.utils.isNullOrEmpty(r)||i.setOpacity(r.value),i.setVisible(!i.isVisible())}}else t.target.classList.contains("m-fulltoc-transparency")&&i.setOpacity(t.target.value)}}}},{key:"clickLayer",value:function(e){var t,n=this,i=e||window.event,r=!1;if(!M.utils.isNullOrEmpty(i.target)){null!==document.querySelector(".m-panel.m-plugin-fulltoc.opened ul.m-layers")&&(t=document.querySelector(".m-panel.m-plugin-fulltoc.opened ul.m-layers").scrollTop);var a=i.target.getAttribute("data-layer-name"),o=i.target.getAttribute("data-layer-url");if(M.utils.isNullOrEmpty(a)||null===o){if(i.target.classList.contains("m-fulltoc-addservice")){var l=this.precharged,s=void 0!==l.groups&&l.groups.length>0||void 0!==l.services&&l.services.length>0,c=this.codsi,u=M.template.compileSync(Et.a,{jsonp:!0,parseToHtml:!1,vars:{precharged:l,hasPrecharged:s,codsiActive:c,translations:{url_service:Rt("url_service"),query:Rt("query"),loaded_services:Rt("loaded_services"),clean:Rt("clean"),availables:Rt("availables"),codsi_services:Rt("codsi_services"),filter_results:Rt("filter_results"),clean_filter:Rt("clean_filter"),filter_text:Rt("filter_text")}}});M.dialog.info(u,Rt("load_ext_services"),this.order),setTimeout((function(){null!==document.querySelector("#m-fulltoc-addservices-list-btn")&&(document.querySelector("#m-fulltoc-addservices-list-btn").addEventListener("click",(function(e){return n.showSuggestions(e)})),document.querySelector("#m-fulltoc-addservices-list-btn").addEventListener("keydown",(function(e){return 13===e.keyCode&&n.showSuggestions(e)}))),null!==document.querySelector("#m-fulltoc-addservices-codsi-btn")&&(document.querySelector("#m-fulltoc-addservices-codsi-btn").addEventListener("click",(function(e){return n.showCODSI(e)})),document.querySelector("#m-fulltoc-addservices-codsi-btn").addEventListener("keydown",(function(e){return 13===e.keyCode&&n.showCODSI(e)})),document.querySelector("#m-fulltoc-addservices-codsi-filter-btn").addEventListener("click",(function(e){n.loadCODSIResults(1)})),document.querySelector("#m-fulltoc-addservices-codsi-filter-btn").addEventListener("keydown",(function(e){return 13===e.keyCode&&n.loadCODSIResults(1)})),document.querySelector("#m-fulltoc-addservices-codsi-search-input").addEventListener("keypress",(function(e){13===e.keyCode&&n.loadCODSIResults(1)})),document.querySelector("#m-fulltoc-addservices-codsi-clean-btn").addEventListener("click",(function(e){document.querySelector("#m-fulltoc-addservices-codsi-search-input").value="",n.loadCODSIResults(1)}))),document.querySelector("#m-fulltoc-addservices-search-btn").addEventListener("click",(function(e){n.filterName=void 0,n.readCapabilities(e)})),document.querySelector("#m-fulltoc-addservices-search-btn").addEventListener("keydown",(function(e){13===e.keyCode&&(n.filterName=void 0,n.readCapabilities(e))})),document.querySelector("#m-fulltoc-addservices-search-input").addEventListener("keypress",(function(e){13===e.keyCode&&(n.filterName=void 0,n.readCapabilities(e))})),document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=Rt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",e.addEventListener("click",(function(){n.afterRender()})),document.querySelector("div.m-dialog #m-fulltoc-addservices-search-input").addEventListener("keyup",(function(e){var t=document.querySelector("div.m-dialog #m-fulltoc-addservices-search-input").value.trim();document.querySelector("div.m-dialog #m-fulltoc-addservices-search-input").value=t})),document.querySelectorAll(".m-fulltoc-suggestion-caret").forEach((function(e){e.addEventListener("click",(function(){e.parentElement.querySelector(".m-fulltoc-suggestion-group").classList.toggle("active"),e.classList.toggle("m-fulltoc-suggestion-caret-close")})),e.addEventListener("keydown",(function(t){13===t.keyCode&&(e.parentElement.querySelector(".m-fulltoc-suggestion-group").classList.toggle("active"),e.classList.toggle("m-fulltoc-suggestion-caret-close"))}))})),document.querySelectorAll("#m-fulltoc-addservices-suggestions .m-fulltoc-suggestion").forEach((function(e){e.addEventListener("click",(function(e){return n.loadSuggestion(e)})),e.addEventListener("keydown",(function(e){return 13===e.keyCode&&n.loadSuggestion(e)}))})),n.accessibilityTab(document.querySelector(".m-fulltoc-addservices"))}),10)}}else{i.stopPropagation();var d=this.map_.getLayers().filter((function(e){return e.name===a&&e.url===o}))[0];if(i.target.classList.contains("m-check")){if(!0===d.transparent||!d.isVisible()){var f=i.target.parentElement.parentElement.parentElement.querySelector("div.tools > input");M.utils.isNullOrEmpty(f)||d.setOpacity(f.value),d.setVisible(!d.isVisible())}}else if(i.target.classList.contains("m-fulltoc-transparency"))d.setOpacity(i.target.value);else if(i.target.classList.contains("m-fulltoc-remove"))this.map_.removeLayers(d);else if(i.target.classList.contains("m-fulltoc-zoom"))if("WMS"===d.type||"WMTS"===d.type||"WFS"===d.type){var p=d.getMaxExtent();this.map_.setBbox(p)}else if("KML"===d.type){var m=d.getImpl().getExtent();this.map_.setBbox(m)}else if("GeoJSON"===d.type){var v=this.getImpl().getGeoJSONExtent(d);this.map_.setBbox(v)}else if("OGCAPIFeatures"===d.type){var h=d.getFeaturesExtent();this.map_.setBbox(h)}else M.dialog.info(Rt("exception.extent"),Rt("info"),this.order);else if(i.target.classList.contains("m-fulltoc-legend")){var y=i.target.parentElement.parentElement.parentElement.querySelector(".m-legend");if("OGCAPIFeatures"===d.type){var g=d.getLegendURL();g instanceof Promise?g.then((function(e){y.querySelector("img").src=e})):y.querySelector("img").src=g}"block"===y.style.display?y.style.display="none":y.style.display="block",r=!0}else if(i.target.classList.contains("m-fulltoc-config")){var b,_,S;if("OGCAPIFeatures"===d.type){b=d.predefinedStyles;var w=d.getStyle();try{S=b.findIndex((function(e){return e===w}))}catch(e){S=void 0}_=!0}else b=d.capabilitiesMetadata.style;var x=M.template.compileSync(St.a,{jsonp:!0,parseToHtml:!1,vars:{ogcapifeatures:_,styles:b,currentStyle:S,translations:{select_style:Rt("select_style"),change:Rt("change"),style:Rt("style"),default_style:Rt("default_style"),selected:Rt("selected")}}});M.dialog.info(x,Rt("configure_layer"),this.order),setTimeout((function(){document.querySelector("div.m-mapea-container div.m-dialog #m-fulltoc-change-config button").addEventListener("click",n.changeLayerConfig.bind(n,d,b)),document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=Rt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",n.accessibilityTab(document.querySelector("#m-fulltoc-change-config"))}),10)}else if(i.target.classList.contains("m-fulltoc-info"))if("OGCAPIFeatures"===d.type){var E,O="".concat(d.url).concat(d.name,"?f=json"),C="".concat(d.url).concat(d.name,"?f=html");M.remote.get(O).then((function(e){var t={title:(E=JSON.parse(e.text)).description,abstract:E.title,hasMetadata:!0,metadata:C,isOgc:!0,translations:{title:Rt("title"),name:Rt("name"),abstract:Rt("abstract"),provider:Rt("provider"),service_info:Rt("service_info"),download_center:Rt("download_center"),see_more:Rt("see_more"),metadata_abstract:Rt("metadata_abstract"),responsible:Rt("responsible"),access_constraints:Rt("access_constraints"),use_constraints:Rt("use_constraints"),online_resources:Rt("online_resources"),see_more_layer:Rt("see_more_layer"),see_more_service:Rt("see_more_service"),metadata:Rt("metadata")}};n.renderInfo(t)}))}else{var k={name:d.name,title:d.legend,abstract:d.capabilitiesMetadata.abstract,translations:{title:Rt("title"),name:Rt("name"),abstract:Rt("abstract"),provider:Rt("provider"),service_info:Rt("service_info"),download_center:Rt("download_center"),see_more:Rt("see_more"),metadata_abstract:Rt("metadata_abstract"),responsible:Rt("responsible"),access_constraints:Rt("access_constraints"),use_constraints:Rt("use_constraints"),online_resources:Rt("online_resources"),see_more_layer:Rt("see_more_layer"),see_more_service:Rt("see_more_service"),metadata:Rt("metadata")}};if("WMS"===d.type){k.capabilities=M.utils.getWMSGetCapabilitiesUrl(d.url,d.version);var L=d.capabilitiesMetadata.metadataURL;k.metadata=M.utils.isNullOrEmpty(L)?"":L[0].OnlineResource,M.utils.isNullOrEmpty(d.capabilitiesMetadata.attribution)||(k.provider="".concat(d.capabilitiesMetadata.attribution.Title),void 0!==d.capabilitiesMetadata.attribution.OnlineResource&&(k.provider+='<p><a class="m-fulltoc-provider-link" href="'.concat(d.capabilitiesMetadata.attribution.OnlineResource,'" target="_blank">').concat(d.capabilitiesMetadata.attribution.OnlineResource,"</a></p>")))}else if("WMTS"===d.type&&(k.capabilities=M.utils.getWMTSGetCapabilitiesUrl(d.url),!M.utils.isNullOrEmpty(d.capabilitiesMetadata.attribution))){k.provider="".concat(d.capabilitiesMetadata.attribution.ProviderName)+'<p><a class="m-fulltoc-provider-link" href="'.concat(d.capabilitiesMetadata.attribution.ProviderSite,'" target="_blank">').concat(d.capabilitiesMetadata.attribution.ProviderSite,"</a></p>");var T=d.capabilitiesMetadata.attribution.ServiceContact;if(!M.utils.isNullOrEmpty(T)&&!M.utils.isNullOrEmpty(T.ContactInfo)){var q=T.ContactInfo.Address.ElectronicMailAddress;k.provider+='<p><a class="m-fulltoc-provider-link" href="mailto:'.concat(q,'">').concat(q,"</a></p>")}}M.remote.get(k.capabilities).then((function(e){var t=e.text.split("<inspire_common:URL>")[1].split("<")[0].split("&amp;").join("&");!M.utils.isNullOrEmpty(t)&&M.utils.isUrl(t)&&(k.metadata_service=t,k.hasMetadata=!0),M.utils.isNullOrEmpty(k.metadata)||!M.utils.isUrl(k.metadata)?(delete k.metadata,void 0!==k.metadata_service?M.remote.get(k.metadata_service).then((function(e){var t=e.text.split("<gmd:MD_DigitalTransferOptions>")[1].split("<gmd:URL>").filter((function(e){return e.indexOf("centrodedescargas")>-1&&-1===e.indexOf("atom")}));if(t.length>0){var i=t[0].split("</gmd:URL>")[0].trim();k.downloadCenter=i}n.renderInfo(k)})).catch((function(e){n.renderInfo(k)})):n.renderInfo(k)):(k.hasMetadata=!0,M.remote.get(k.metadata).then((function(e){var t=e.text.split("<gmd:MD_DigitalTransferOptions>")[1].split("<gmd:URL>").filter((function(e){return e.indexOf("centrodedescargas")>-1&&-1===e.indexOf("atom")}));if(t.length>0){var i=t[0].split("</gmd:URL>")[0].trim();k.downloadCenter=i}n.renderInfo(k)})).catch((function(e){n.renderInfo(k)})))})).catch((function(e){n.renderInfo(k)}))}}}r||this.render(t)}},{key:"renderInfo",value:function(e){var t=this,n=M.template.compileSync(xt.a,{jsonp:!0,parseToHtml:!1,vars:e});M.dialog.info(n,Rt("layer_info"),this.order),setTimeout((function(){document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=Rt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3";var n=document.querySelector("#m-fulltoc-information .show-more-metadata");null!==n&&n.addEventListener("click",(function(){var e=document.querySelector("#m-fulltoc-information .more-metadata");"block"!==e.style.display?(e.style.display="block",n.innerHTML='<span class="icon-colapsar"></span>&nbsp;'.concat(Rt("see_less"))):(e.style.display="none",n.innerHTML='<span class="icon-desplegar"></span>&nbsp;'.concat(Rt("see_more")))})),t.accessibilityTab(document.querySelector("#m-fulltoc-information"))}),10)}},{key:"showSuggestions",value:function(){null!==document.querySelector("#m-fulltoc-addservices-codsi")&&(document.querySelector("#m-fulltoc-addservices-codsi").style.display="none"),null!==document.querySelector("#fromOGCContainer")&&(document.querySelector("#fromOGCContainer").style.display="none"),document.querySelector("#m-fulltoc-addservices-results").innerHTML="",document.querySelector("#m-fulltoc-addservices-suggestions").style.display="block"}},{key:"showCODSI",value:function(){document.querySelector("#m-fulltoc-addservices-results").innerHTML="",document.querySelector("#m-fulltoc-addservices-codsi").style.display="block",document.querySelector("#m-fulltoc-addservices-suggestions").style.display="none",null!==document.querySelector("#fromOGCContainer")&&(document.querySelector("#fromOGCContainer").style.display="none"),this.loadCODSIResults(1)}},{key:"loadCODSIResults",value:function(e){var t=this;document.querySelector("#m-fulltoc-addservices-codsi-results").innerHTML='<p class="m-fulltoc-loading"><span class="icon-spinner" /></p>';var n=document.querySelector("#m-fulltoc-addservices-codsi-search-input").value.trim(),i=1+9*(e-1),r=9*e,a="http://www.idee.es/csw-codsi-idee/srv/spa/q?_content_type=json&bucket=s101&facet.q=type%2Fservice&fast=index&from=*1&serviceType=view&resultType=details&sortBy=title&sortOrder=asc&to=*2".split("*1").join("".concat(i)).split("*2").join("".concat(r));""!==n&&(a+="&any=*".concat(encodeURIComponent(n),"*")),M.remote.get(a).then((function(n){var i=JSON.parse(n.text),r=i.summary["@count"],a=[];void 0!==i.metadata&&i.metadata.forEach((function(e){var t=[];if(Array.isArray(e.link))e.link.forEach((function(e){var n=[];e.indexOf("||")>-1?n=e.split("||").filter((function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1})):e.indexOf("|")>-1&&(n=e.split("|").filter((function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1}))),t=t.concat(n)}));else{var n=[];e.link.indexOf("||")>-1?n=e.link.split("||").filter((function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1})):e.link.indexOf("|")>-1&&(n=e.link.split("|").filter((function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1}))),t=t.concat(n)}t.length>0&&a.push({title:e.title||e.defaultTitle,url:t[0].split("?")[0]})})),t.renderCODSIResults(a),t.renderCODSIPagination(e,r)})).catch((function(e){M.dialog.error(Rt("exception.codsi"))}))}},{key:"renderCODSIResults",value:function(e){var t=this;if(document.querySelector("#m-fulltoc-addservices-codsi-results").innerHTML="",e.length>0){var n="<table><tbody>";e.forEach((function(e){n+='<tr><td><span tabindex="0" class="m-fulltoc-codsi-result" data-link="'.concat(e.url,'">').concat(e.title,"</span></td></tr>")})),n+="</tbody></table>",document.querySelector("#m-fulltoc-addservices-codsi-results").innerHTML=n,document.querySelectorAll("#m-fulltoc-addservices-codsi-results .m-fulltoc-codsi-result").forEach((function(e){e.addEventListener("click",(function(n){var i=e.getAttribute("data-link");document.querySelector("div.m-dialog #m-fulltoc-addservices-search-input").value=i,t.filterName=void 0,t.readCapabilities(n)}))}))}else document.querySelector("#m-fulltoc-addservices-codsi-results").innerHTML='<div class="codsi-no-results">'.concat(Rt("exception.codsi_no_results"),"</div>")}},{key:"renderCODSIPagination",value:function(e,t){var n=this;if(document.querySelector("#m-fulltoc-addservices-codsi-pagination").innerHTML="",t>0){for(var i=Math.ceil(t/9),r="",a=1;a<=i;a+=1)r+=a===e?'<button type="button" tabindex="0" class="m-fulltoc-addservices-pagination-btn" disabled>'.concat(a,"</button>"):'<button type="button" tabindex="0" class="m-fulltoc-addservices-pagination-btn">'.concat(a,"</button>");document.querySelector("#m-fulltoc-addservices-codsi-pagination").innerHTML=r,document.querySelectorAll("#m-fulltoc-addservices-codsi-pagination button").forEach((function(e,t){e.addEventListener("click",(function(){n.loadCODSIResults(t+1)}))}))}}},{key:"loadSuggestion",value:function(e){var t=e.target.getAttribute("data-link");try{var n=e.target.parentElement.parentElement.parentElement,i=n.querySelector("span.m-fulltoc-suggestion-caret").innerText;this.filterName=i,"tbody"===n.localName&&(this.filterName="none")}catch(e){}var r=e.target.getAttribute("data-service-type");document.querySelector("div.m-dialog #m-fulltoc-addservices-search-input").value=t,"WMTS"===r?(document.getElementById("m-fulltoc-addservices-wmts").checked=!0,document.getElementById("m-fulltoc-addservices-wms").checked=!1):(document.getElementById("m-fulltoc-addservices-wms").checked=!0,document.getElementById("m-fulltoc-addservices-wmts").checked=!1),this.readCapabilities(e)}},{key:"changeLayerConfig",value:function(e,t){var n=document.querySelector(".m-panel.m-plugin-fulltoc.opened ul.m-layers").scrollTop,i=document.querySelector("#m-fulltoc-change-config #m-fulltoc-style-select").value;if(""!==i)if("OGCAPIFeatures"===e.type){if(!M.utils.isNullOrEmpty(t)){var r=t[i];0===i?e.setStyle():e.setStyle(r)}}else{e.getImpl().getOL3Layer().getSource().updateParams({STYLES:i}),document.querySelector("div.m-mapea-container div.m-dialog").remove();var a=e.capabilitiesMetadata;if(!M.utils.isNullOrEmpty(a)&&!M.utils.isNullOrEmpty(a.style)){var o=e.capabilitiesMetadata.style.filter((function(e){return e.Name===i}));if(o.length>0&&o[0].LegendURL.length>0){var l=o[0].LegendURL[0].OnlineResource;e.setLegendURL(l),this.render(n)}}}}},{key:"getTemplateVariables",value:function(e){var t=this;return new Promise((function(n,i){if(!M.utils.isNullOrEmpty(e)){var r=e.getRootLayers().filter((function(e){var t=!0===e.transparent,n=!0===e.displayInLayerSwitcher,i=["wms","wmts"].indexOf(e.type.toLowerCase())>-1,r=!(e.type===M.layer.type.WMS&&M.utils.isNullOrEmpty(e.name));return t&&n&&i&&r||"OGCAPIFeatures"===e.type})).reverse();Promise.all(r.map(t.parseLayerForTemplate_)).then((function(e){return n({layers:r,overlayLayers:e,translations:{layers:Rt("layers"),add_service:Rt("add_service"),show_hide:Rt("show_hide"),zoom:Rt("zoom"),info_metadata:Rt("info_metadata"),change_style:Rt("change_style"),remove_layer:Rt("remove_layer"),drag_drop:Rt("drag_drop")}})}))}}))}},{key:"render",value:function(e){var t=this;this.getTemplateVariables(this.map_).then((function(n){var i=M.template.compileSync(bt.a,{vars:n});t.accessibilityTab(i),t.registerImgErrorEvents_(i),t.template_.innerHTML=i.innerHTML;var r=t.template_.querySelector(".m-fulltoc-container .m-layers"),a=n.layers;null!==r&&(lt.create(r,{animation:150,ghostClass:"m-fulltoc-gray-shadow",filter:".m-opacity-container",preventOnFilter:!1,onEnd:function(e){var t=e.from,n=Math.max.apply(Math,Ft(a.map((function(e){return e.getZIndex()}))));t.querySelectorAll("li.m-layer div.m-visible-control span").forEach((function(e){var t=e.getAttribute("data-layer-name"),i=e.getAttribute("data-layer-url"),r=a.filter((function(e){return e.name===t&&e.url===i}));r.length>0&&(r[0].setZIndex(n),n-=1)}))}}),void 0!==e&&(document.querySelector(".m-panel.m-plugin-fulltoc.opened ul.m-layers").scrollTop=e))}))}},{key:"registerImgErrorEvents_",value:function(e){var t=this,n=e.querySelectorAll("img");Array.prototype.forEach.call(n,(function(e){e.addEventListener("error",(function(e){var n=e.target.getAttribute("data-layer-name"),i=e.target.getAttribute("data-layer-url"),r=M.utils.concatUrlPaths([M.config.THEME_URL,M.layer.WMS.LEGEND_ERROR]),a=t.map_.getLayers().filter((function(e){return e.name===n&&e.url===i}))[0];M.utils.isNullOrEmpty(a)||-1!==i.indexOf("/mirame.chduero.es/")||a.setLegendURL(r)}))}))}},{key:"activate",value:function(){Ht(zt(a.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){Ht(zt(a.prototype),"deactivate",this).call(this)}},{key:"getActivationButton",value:function(e){return e.querySelector(".m-fulltoc button")}},{key:"equals",value:function(e){return e instanceof a}},{key:"parseLayerForTemplate_",value:function(e){var t,n=e.legend||e.name,i=!M.utils.isNullOrEmpty(e.capabilitiesMetadata)&&!M.utils.isNullOrEmpty(e.capabilitiesMetadata.abstract);return"OGCAPIFeatures"===e.type&&(M.utils.isNullOrEmpty(e.otherStyles)||(t=e.otherStyles.length>1)),new Promise((function(r,a){var o={visible:!0===e.isVisible(),id:e.name,title:n,outOfRange:!e.inRange(),opacity:e.getOpacity(),metadata:i,type:e.type,tag:"OGCAPIFeatures"===e.type?"Features":e.type,hasStyles:i&&e.capabilitiesMetadata.style.length>1,hasOgcapiFeaturesStyles:t,url:e.url},l=e.getLegendURL();l instanceof Promise?l.then((function(e){o.legend=e,r(o)})):(o.legend="KML"!==e.type?l:null,r(o))}))}},{key:"checkIfApiFeatures",value:function(e){return M.remote.get("".concat(e,"?f=json")).then((function(e){var t=!1;if(!M.utils.isNullOrEmpty(e)){var n=e.text;JSON.parse(n),t=!0}return t})).catch((function(){return!1}))}},{key:"readCapabilities",value:function(e){var t=this;null!==document.querySelector("#m-fulltoc-addservices-codsi")&&(document.querySelector("#m-fulltoc-addservices-codsi").style.display="none"),e.preventDefault();var n=!1,i=!1;document.querySelector("#m-fulltoc-addservices-suggestions").style.display="none";var r=document.querySelector("div.m-dialog #m-fulltoc-addservices-search-input").value.trim().split("?")[0];if(M.utils.isNullOrEmpty(r))M.dialog.error(Rt("exception.empty"));else if(M.utils.isUrl(r)){var a;this.http&&!this.https?n=/^(http:)/.test(r):this.https&&!this.http?i=/^(https:)/.test(r):this.http&&this.https&&(n=!0,i=!0),!0===n||!0===i?new Promise((function(e,t){var n=setTimeout((function(){return t()}),15e3);M.remote.get(M.utils.getWMTSGetCapabilitiesUrl(r)).then((function(t){clearTimeout(n),e(t)}))})).then((function(e){try{if("WMTS"==(e.text.indexOf("TileMatrixSetLink")>=0?"WMTS":"WMS")){var n=(new M.impl.format.WMTSCapabilities).read(e.xml);t.serviceCapabilities=n.capabilities||{};var i=M.impl.util.wmtscapabilities.getLayers(n.capabilities,r,t.map_.getProjection().code);t.capabilities=t.filterResults(i),t.showResults()}else t.checkIfApiFeatures(r).then((function(e){!0===e?t.printOGCModal(r):new Promise((function(e,t){var n=setTimeout((function(){return t()}),15e3);M.remote.get(M.utils.getWMSGetCapabilitiesUrl(r,"1.3.0")).then((function(t){clearTimeout(n),e(t)}))})).then((function(e){try{var n=(new M.impl.format.WMSCapabilities).read(e.xml);t.serviceCapabilities=n.Service||{};var i=new M.impl.GetCapabilities(n,r,t.map_.getProjection().code);t.capabilities=t.filterResults(i.getLayers()),t.capabilities.forEach((function(e){try{t.getParents(n,e)}catch(e){}})),t.showResults()}catch(e){M.dialog.error(Rt("exception.capabilities"))}})).catch((function(e){M.dialog.error(Rt("exception.capabilities"))}))}))}catch(e){M.dialog.error(Rt("exception.capabilities"))}})).catch((function(e){M.dialog.error(Rt("exception.capabilities"))})):(this.http?a=Rt("exception.only_http"):this.https?a=Rt("exception.only_https"):this.http||this.https||(a=Rt("exception.no_http_https")),M.dialog.error(a))}else M.dialog.error(Rt("exception.valid_url"))}},{key:"filterResults",value:function(e){var t=this,n=[],i=[],r=[];return void 0===this.filterName?(void 0!==this.precharged.services&&this.precharged.services.length>0&&(r=r.concat(this.precharged.services)),void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach((function(e){void 0!==e.services&&e.services.length>0&&(r=r.concat(e.services))})),e.forEach((function(e){n.push(e),i.push(e.name)}))):"none"===this.filterName?(void 0!==this.precharged.services&&this.precharged.services.length>0&&(r=r.concat(this.precharged.services)),void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach((function(e){void 0!==e.services&&e.services.length>0&&(r=r.concat(e.services))})),e.forEach((function(e){var a=!1;r.forEach((function(r){r.type===e.type&&t.checkUrls(r.url,e.url)&&((void 0!==r.white_list&&r.white_list.length>0&&r.white_list.indexOf(e.name)>-1&&-1===i.indexOf(e.name)||void 0===r.white_list&&-1===i.indexOf(e.name))&&(n.push(e),i.push(e.name)),a=!0)})),a||(n.push(e),i.push(e.name))}))):void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach((function(r){void 0!==r.services&&r.services.length>0&&r.name===t.filterName&&e.forEach((function(e){var a=!1;r.services.forEach((function(r){r.type===e.type&&t.checkUrls(r.url,e.url)&&((void 0!==r.white_list&&r.white_list.length>0&&r.white_list.indexOf(e.name)>-1&&-1===i.indexOf(e.name)||void 0===r.white_list&&-1===i.indexOf(e.name))&&(n.push(e),i.push(e.name)),a=!0)})),a||(n.push(e),i.push(e.name))}))})),n}},{key:"getParents",value:function(e,t){var n,i=t.name;e.Capability.Layer.Layer.forEach((function(e){if(e.Name!==i&&void 0!==e.Layer&&e.Layer.length>0)if(e.Layer.filter((function(e){return e.Name===i})).length>0)n=e.Title;else if(M.utils.isObject(e.Layer.Layer)&&e.Layer.Layer.Name===i)n="".concat(e.Title," - ").concat(e.Layer.Layer.Title);else if(M.utils.isArray(e.Layer)&&e.Layer.length>0)if(e.Layer.filter((function(e){return e.Name===i})).length>0)n="".concat(e.Title," - ").concat(e.Layer.Title);else{var t=e.Layer.filter((function(e){var t=!1;return void 0!==e.Layer&&e.Layer.length>0&&(t=e.Layer.filter((function(e){return e.Name===i})).length>0),t}));t.length>0&&(n="".concat(e.Title," - ").concat(t[0].Title))}})),void 0!==n&&(t.legend="".concat(n," - ").concat(t.legend))}},{key:"showResults",value:function(){var e=this,t=[],n="WMS";this.capabilities.forEach((function(e){var i=e.getImpl();i.abstract=e.capabilitiesMetadata.abstract.trim(),n=e.type,t.push(i)}));var i=document.querySelector("#m-fulltoc-addservices-results");if(t.length>0){var r={};if("WMTS"===n){var a=this.serviceCapabilities.ServiceIdentification,o=this.serviceCapabilities.ServiceProvider;if(void 0!==a&&void 0!==a.Title&&(r.title=a.Title.trim()),void 0!==a&&void 0!==a.Abstract&&(r.abstract=a.Abstract.trim()),void 0!==a&&void 0!==a.AccessConstraints&&(r.accessConstraints=a.AccessConstraints.trim()),void 0!==o){var l="".concat(o.ProviderName,'<p><a class="m-fulltoc-provider-link" href="').concat(o.ProviderSite,'" target="_blank">').concat(o.ProviderSite,"</a></p>"),s=o.ServiceContact.ContactInfo;if(!M.utils.isNullOrEmpty(o.ServiceContact)&&!M.utils.isNullOrEmpty(s)){var c=s.Address.ElectronicMailAddress;l+='<p><a class="m-fulltoc-provider-link" href="mailto:'.concat(c,'">').concat(c,"</a></p>")}r.contact=l}}else{var u=this.serviceCapabilities.ContactInformation;void 0!==this.serviceCapabilities.Title&&(r.title=this.serviceCapabilities.Title.trim()),void 0!==this.serviceCapabilities.Abstract&&(r.abstract=this.serviceCapabilities.Abstract.trim()),void 0!==this.serviceCapabilities.AccessConstraints&&(r.accessConstraints=this.serviceCapabilities.AccessConstraints.trim()),void 0!==u&&void 0!==u.ContactPersonPrimary&&void 0!==u.ContactPersonPrimary.ContactOrganization&&(r.contact=u.ContactPersonPrimary.ContactOrganization.trim())}var d=M.template.compileSync(Ct.a,{vars:{result:t,serviceCapabilities:r,translations:{layers:Rt("layers"),add:Rt("add"),title:Rt("title"),abstract:Rt("abstract"),responsible:Rt("responsible"),access_constraints:Rt("access_constraints"),show_service_info:Rt("show_service_info")},order:this.order}});i.innerHTML=d.innerHTML,this.accessibilityTab(i),M.utils.enableTouchScroll(i);for(var f=i.querySelectorAll("span.m-check-fulltoc-addservices"),p=0;p<f.length;p+=1)f[p].addEventListener("click",(function(t){return e.registerCheck(t)}));for(var m=i.querySelectorAll(".table-results .table-container table tbody tr td.table-layer-name"),v=0;v<m.length;v+=1)m[v].addEventListener("click",(function(t){return e.registerCheckFromName(t)}));i.querySelectorAll(".table-results .table-container table tbody tr td span").forEach((function(t){return t.addEventListener("keydown",(function(t){return 13===t.keyCode&&e.registerCheckFromName(t)}))})),i.querySelector("#m-fulltoc-addservices-selectall").addEventListener("click",(function(t){return e.registerCheck(t)})),i.querySelector(".m-fulltoc-addservices-add").addEventListener("click",(function(t){return e.addLayers(t)}));var h=i.querySelector(".m-fulltoc-show-capabilities");h.addEventListener("click",(function(){var e=i.querySelector(".m-fulltoc-capabilities-container");"block"!==e.style.display?(e.style.display="block",h.innerHTML='<span class="icon-colapsar"></span>&nbsp;'.concat(Rt("hide_service_info"))):(e.style.display="none",h.innerHTML='<span class="icon-desplegar"></span>&nbsp;'.concat(Rt("show_service_info")))}))}else i.innerHTML='<p class="m-fulltoc-noresults">'.concat(Rt("exception.no_results"),"</p>")}},{key:"registerCheck",value:function(e){var t=e||window.event;if(!M.utils.isNullOrEmpty(t.target)&&t.target.classList.contains("m-check-fulltoc-addservices")){var n=document.querySelector("#m-fulltoc-addservices-results").querySelectorAll(".m-check-fulltoc-addservices.icon-check").length;n+=t.target.classList.contains("icon-check")?-1:1,t.stopPropagation(),t.target.classList.toggle("icon-check"),t.target.classList.toggle("icon-check-seleccionado"),n>0?(this.stateSelectAll=!1,document.querySelector("#m-fulltoc-addservices-selectall").classList.remove("icon-check-seleccionado"),document.querySelector("#m-fulltoc-addservices-selectall").classList.add("icon-check")):0===n&&(this.stateSelectAll=!0,document.querySelector("#m-fulltoc-addservices-selectall").classList.remove("icon-check"),document.querySelector("#m-fulltoc-addservices-selectall").classList.add("icon-check-seleccionado"))}else M.utils.isNullOrEmpty(t.target)||"m-fulltoc-addservices-selectall"!==t.target.id||(this.stateSelectAll?(t.target.classList.remove("icon-check-seleccionado"),t.target.classList.add("icon-check"),this.unSelect(),this.stateSelectAll=!1):(t.target.classList.remove("icon-check"),t.target.classList.add("icon-check-seleccionado"),this.select(),this.stateSelectAll=!0))}},{key:"registerCheckFromName",value:function(e){(e||window.event).target.parentElement.querySelector("span.m-check-fulltoc-addservices").click()}},{key:"unSelect",value:function(){for(var e=document.querySelectorAll("#m-fulltoc-addservices-results .icon-check-seleccionado"),t=0;t<e.length;t+=1)e[t].classList.remove("icon-check-seleccionado"),e[t].classList.add("icon-check")}},{key:"select",value:function(){for(var e=document.querySelectorAll("#m-fulltoc-addservices-results .icon-check"),t=0;t<e.length;t+=1)e[t].classList.remove("icon-check"),e[t].classList.add("icon-check-seleccionado")}},{key:"addLayers",value:function(e){var t=this;e.preventDefault();var n=[],i=document.querySelectorAll("#m-fulltoc-addservices-results .icon-check-seleccionado");if(0===i.length)M.dialog.error(Rt("exception.select_layer"));else{for(var r=0;r<i.length;r+=1)for(var a=function(e){var a=t.capabilities[e].name;if(i[r].id===a||i[r].name===a){var o=parseInt(t.serviceCapabilities.MaxWidth,10),l=!Number.isNaN(o)&&o<4096,s=void 0!==t.serviceCapabilities.Title&&t.serviceCapabilities.Title.toLowerCase().indexOf("idecanarias")>-1;(t.capabilities[e].url.indexOf("//ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx")>-1||s)&&(t.capabilities[e].version="1.1.1"),t.capabilities[e].tiled="WMTS"===t.capabilities[e].type||l||s,t.capabilities[e].options.origen=t.capabilities[e].type;var c=t.capabilities[e].getLegendURL(),u=t.capabilities[e].capabilitiesMetadata;if((c.indexOf("GetLegendGraphic")>-1||c.indexOf("assets/img/legend-default.png")>-1)&&void 0!==u&&u.style.length>0){if(void 0!==u.style[0].LegendURL&&u.style[0].LegendURL.length>0){var d=u.style[0].LegendURL[0].OnlineResource;null!=d&&t.capabilities[e].setLegendURL(d)}"WMTS"===t.capabilities[e].type&&void 0!==u.style&&u.style.length>0&&u.style.forEach((function(n){if(!0===n.isDefault&&void 0!==n.LegendURL&&n.LegendURL.length>0){var i=n.LegendURL[0].href;t.capabilities[e].setLegendURL(i)}}))}n.push(t.capabilities[e])}},o=0;o<this.capabilities.length;o+=1)a(o);n.reverse(),this.map_.addLayers(n),n.forEach((function(e){e.setZIndex(e.getZIndex()+8)})),this.afterRender(n)}}},{key:"removeContains",value:function(e){e.preventDefault(),null!==document.querySelector("#m-fulltoc-addservices-codsi")&&(document.querySelector("#m-fulltoc-addservices-codsi").style.display="none"),document.querySelector("#m-fulltoc-addservices-results").innerHTML="",document.querySelector("#m-fulltoc-addservices-suggestions").style.display="none",document.querySelector("div.m-dialog #m-fulltoc-addservices-search-input").value=""}},{key:"getFiltersDict",value:function(e){var t={},n={};e.forEach((function(e){var i=e.id.substring(e.id.indexOf("form-")+5);switch(e.type){case"checkbox":n[i]||(n[i]=[]),n[i].push(e);break;case"date":if(!M.utils.isNullOrEmpty(e.value)){var r=new Date(e.value);t[i]=r.toISOString().split("T")[0]}break;default:M.utils.isNullOrEmpty(e.value)||(t[i]=e.value)}})),Object.keys(n).forEach((function(e){var i=n[e].filter((function(e){return e.checked})).map((function(e){return e.value}));1===i.length&&(t[e]=i[0])}));var i=Object.keys(t),r=Object.values(t),a={};return i.forEach((function(e,t){a[e]=r[t]})),a}},{key:"getProperties",value:function(e,t){document.getElementById("loading-fulltoc").style.display="initial",document.getElementById("loading-fulltoc").style.display="none";var n=document.querySelector("#m-fulltoc-addservices-search-input").value,i=document.querySelector("#m-vectors-ogc-select").selectedOptions[0].text;e=document.querySelector("#m-vectors-ogc-select").value;var r,a=document.querySelector("#limit-items-input").value,o=document.querySelector("#search-bbox").checked,l=a;if(o){var s=this.map_.getBbox(),c=this.getImpl().getTransformedCoordinates(this.map_.getProjection().code,[s.x.min,s.y.min]),u=this.getImpl().getTransformedCoordinates(this.map_.getProjection().code,[s.x.max,s.y.max]);r="".concat(c[0],";").concat(c[1],";").concat(u[0],";").concat(u[1])}var d={};return d.url="".concat(n,"/collections/"),d.name=e,d.legend=i,d.limit=l,o&&(d.bbox=r),!0===document.querySelector("#filtro-id-input").checked?d.id=document.querySelector("#search-form-ID").value:void 0!==t&&(d.conditional=t),d.format="json",d}},{key:"setOnClickersFiltersButtons",value:function(e,t,n,i,r,a,o,l){var s,c,u,d=this,f=document.querySelector("#m-vectors-ogc-select").value,p=document.querySelector("#fromOGCContainer #select-button"),m=document.querySelector("#fromOGCContainer #check-button"),v=document.querySelector("#custom-query-button");p.addEventListener("click",(function(){f===Rt("select_service")?M.dialog.error(Rt("no_results")):(u=d.getProperties(f,e),d.getImpl().loadOGCAPIFeaturesLayer(u),document.querySelector("div.m-dialog.info div.m-button > button").click())})),m.addEventListener("click",(function(){f===Rt("select_service")?M.dialog.error(Rt("no_results")):(u=d.getProperties(f,e),d.getImpl().getNumberFeaturesOGCAPIFeaturesLayer(u).then((function(e){var t,n;1===e?(t=Rt("results_1_singular"),n=Rt("results_2_singular")):(t=Rt("results_1_plural"),n=Rt("results_2_plural")),document.querySelector("#check-results").innerHTML="".concat(t).concat(e).concat(n)})))})),v.addEventListener("click",(function(){var u,p=document.querySelector(".m-content").innerHTML;f=document.querySelector("#m-vectors-ogc-select").value;var m=document.querySelector("#limit-items-input").value,v=document.querySelector("#search-bbox").checked,h="".concat(t,"/collections/").concat(f,"/queryables");M.remote.get(h).then((function(t){try{var h=JSON.parse(t.text).properties;(u=Object.values(h)).forEach((function(t){if(void 0!==t.title){var n=t.type.toLowerCase();"bool"===n||"boolean"===n?t.bool=!0:"timestamp"===n||"date"===n?t.date=!0:"int4"===n||"int"===n||"number"===n||"numeric"===n||n.includes("numeric")?t.number=!0:t.text=!0}void 0!==e&&(t.title in e&&(t.value=e[t.title]),document.querySelector("#check-results").innerHTML="")}))}catch(e){}var y=document.querySelector("#m-fulltoc-addservices-search-input").value,g=M.template.compileSync(qt.a,{jsonp:!0,parseToHtml:!1,vars:{filtersList:u,summary:e,translations:{other_filters:Rt("other_filters"),id_filter:Rt("id_filter"),filters:Rt("filters"),custom_query_warning:Rt("custom_query_warning")}}}),b="".concat(Rt("custom_query_btn"));M.dialog.remove(Lt.a),M.dialog.info(g,b);var _=document.createElement("button"),S=document.createElement("button");setTimeout((function(){document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=Rt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",e.style.display="none";var t=document.querySelector("div.m-dialog.info div.m-button");S.textContent=Rt("close"),S.style.width="75px",S.style.backgroundColor="#71a7d3",S.style.marginLeft="4px",S.setAttribute("data-link",y),S.setAttribute("data-service-type","OGCAPIFeatures"),t.insertBefore(S,t.firstChild),_.textContent=Rt("apply_btn"),_.style.width="75px",_.style.backgroundColor="#71a7d3",_.setAttribute("data-link",y),_.setAttribute("data-service-type","OGCAPIFeatures"),t.insertBefore(_,t.firstChild)}),10),_.addEventListener("click",(function(){var e=!1,t=!1;n.checked?(e=!0,t=!1,c=document.querySelectorAll("#search-form-id input")):i.checked&&(e=!1,t=!0,c=document.querySelectorAll("#search-form-otros input"));var o=d.getFiltersDict(c);document.querySelector(".m-content").innerHTML=p,s=r.findIndex((function(e){return e.id===f})),M.utils.isNullOrEmpty(o)||0===Object.keys(o).length?d.printOGCModal(a,s,m,v):d.printOGCModal(a,s,m,v,o,e,t)})),S.addEventListener("click",(function(){document.querySelector(".m-content").innerHTML=p,s=r.findIndex((function(e){return e.id===f})),d.printOGCModal(a,s,m,v,e,o,l)}))})).catch((function(e){M.dialog.error(Rt("no_results"))}))}))}},{key:"setOnChanges",value:function(e){document.querySelector("#search-form-ID").addEventListener("change",(function(){document.querySelector("#check-results").innerHTML=""})),document.querySelector("#limit-items-input").addEventListener("change",(function(){document.querySelector("#check-results").innerHTML=""})),document.querySelector("#search-bbox").addEventListener("change",(function(){document.querySelector("#check-results").innerHTML=""})),document.querySelector("#m-vectors-ogc-select").addEventListener("change",(function(){var e=document.querySelector("#div-summary");null!==e&&e.remove(),document.querySelector("#check-results").innerHTML=""}))}},{key:"setOnClickRadioBtn",value:function(e,t){e.addEventListener("click",(function(){document.querySelector("#otros-filtros").style.display="none",document.querySelector("#filtro-id").style.display="block",document.querySelector("#check-results").innerHTML=""})),t.addEventListener("click",(function(){document.querySelector("#otros-filtros").style.display="block",document.querySelector("#filtro-id").style.display="none",document.querySelector("#check-results").innerHTML=""}))}},{key:"setOnClickCloseBtn",value:function(){var e=this,t=document.querySelector("div.m-dialog.info div.m-button > button");t.innerHTML=Rt("close"),t.style.width="75px",t.style.backgroundColor="#71a7d3",t.addEventListener("click",(function(){try{document.querySelector("div.m-dialog.info").parentNode.removeChild(document.querySelector("div.m-dialog.info"))}catch(e){}e.afterRender()}))}},{key:"printOGCModal",value:function(e,t,n,i,r,a,o){var l=this,s=e.trim();if(M.utils.isUrl(s)){document.querySelector("#m-fulltoc-addservices-search-input").value=e,document.querySelector("#m-fulltoc-addservices-search-btn").addEventListener("click",(function(e){l.filterName=void 0,l.readCapabilities(e)}));var c="".concat(s.endsWith("/")?s:"".concat(s,"/"),"collections?f=json");M.remote.get(c).then((function(c){var u=JSON.parse(c.text).collections;M.utils.isNullOrEmpty(r)&&(r=void 0,a=void 0,o=void 0);var d=M.template.compileSync(Lt.a,{jsonp:!0,parseToHtml:!1,vars:{layers:u,selectedLayer:t,limit:n,bbox:i,summary:r,filterByID:a,filterByOtherFilters:o,prevID:void 0,translations:{select_service:Rt("select_service"),amount_results:Rt("amount_results"),amount_results_2:Rt("amount_results_2"),bbox_select:Rt("bbox-select"),other_filters:Rt("other_filters"),id_filter:Rt("id_filter"),warning:Rt("warning"),add_btn:Rt("add_btn"),custom_query_btn:Rt("custom_query_btn"),filters:Rt("filters"),check_results:Rt("check_results")}}});document.querySelector("#fromOGCContainer").outerHTML=d,l.accessibilityTab(document.querySelector("#fromOGCContainer"));var f=document.querySelector('input[name="filtro"][value="id"]'),p=document.querySelector('input[name="filtro"][value="otros"]');l.setOnClickRadioBtn(f,p),l.setOnChanges(r),l.setOnClickCloseBtn(),l.setOnClickersFiltersButtons(r,s,f,p,u,e,a,o)})).catch((function(e){s="",M.dialog.error(Rt("exception.error_ogc"))}))}}},{key:"checkUrls",value:function(e,t){return e===t||e.indexOf(t)>-1||t.indexOf(e)>-1}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}}])&&Gt(t.prototype,n),i&&Gt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(),Zt=n(9);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,a=function(e,t){if("object"!==Kt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Kt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Kt(a)?a:String(a)),i)}var r,a}function en(e,t){return(en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=rn(e);if(t){var r=rn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return nn(this,n)}}function nn(e,t){if(t&&("object"===Kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var an={groups:[{name:"Mapas en formato imagen",services:[{name:"Mapa",type:"WMTS",url:"https://www.ign.es/wmts/mapa-raster?"}]},{name:"Información geográfica de referencia",services:[{name:"Unidades administrativas",type:"WMS",url:"https://www.ign.es/wms-inspire/unidades-administrativas?",white_list:["AU.AdministrativeBoundary","AU.AdministrativeUnit"]},{name:"Nombres geográficos",type:"WMS",url:"https://www.ign.es/wms-inspire/ngbe?"},{name:"Redes geodésicas",type:"WMS",url:"https://www.ign.es/wms-inspire/redes-geodesicas?"},{name:"Cuadrículas cartográficas",type:"WMS",url:"https://www.ign.es/wms-inspire/cuadriculas?",white_list:["Grid-REGCAN95-lonlat-50k","Grid-ETRS89-lonlat-50k","Grid-ETRS89-lonlat-25k","Grid-REGCAN95-lonlat-25k","Grid-25k-extendida"]}]},{name:"Fotos e imágenes aéreas",services:[{name:"PNOA. Ortofotos máxima actualidad",type:"WMS",url:"https://www.ign.es/wms-inspire/pnoa-ma?"},{name:"PNOA. Ortofotos históricas y PNOA anual",type:"WMS",url:"https://www.ign.es/wms/pnoa-historico?"},{name:"PNOA. Ortofotos provisionales",type:"WMS",url:"https://wms-pnoa.idee.es/pnoa-provisionales?"},{name:"Imagen",type:"WMTS",url:"https://www.ign.es/wmts/pnoa-ma?"},{name:"Fototeca",type:"WMS",url:"https://fototeca.cnig.es/wms/fototeca.dll?"},{name:"Ocupación del suelo",type:"WMS",url:"https://servicios.idee.es/wms-inspire/ocupacion-suelo?"},{name:"Ocupación del suelo. Histórico",type:"WMS",url:"https://servicios.idee.es/wms-inspire/ocupacion-suelo-historico?"},{name:"Ocupación del suelo",type:"WMTS",url:"https://servicios.idee.es/wmts/ocupacion-suelo?"},{name:"Mosaicos de Satélite históricos de España",type:"WMS",url:"https://wms-satelites-historicos.idee.es/satelites-historicos?"}]},{name:"Mapas vectoriales y Bases Cartográficas y Topográficas",services:[{name:"Callejero",type:"WMTS",url:"https://www.ign.es/wmts/ign-base?"}]},{name:"Información geográfica temática",services:[{name:"Direcciones y códigos postales",type:"WMS",url:"https://www.cartociudad.es/wms-inspire/direcciones-ccpp?"},{name:"Modelos digitales del terreno",type:"WMS",url:"https://servicios.idee.es/wms-inspire/mdt?"},{name:"Información Geográfica de Referencia. Transportes",type:"WMS",url:"https://servicios.idee.es/wms-inspire/transportes?"},{name:"Información Geográfica de Referencia. Hidrografía",type:"WMS",url:"https://servicios.idee.es/wms-inspire/hidrografia?"},{name:"Copernicus Land Monitoring Service",type:"WMS",url:"https://servicios.idee.es/wms/copernicus-landservice-spain?"},{name:"Información sísmica y volcánica",type:"WMS",url:"https://www.ign.es/wms-inspire/geofisica?"},{name:"Red de Vigilancia Volcánica",type:"WMS",url:"https://wms-volcanologia.ign.es/volcanologia?"},{name:"Fototeca",type:"WMS",url:"https://wms-fototeca.idee.es/fototeca?"}]},{name:"Documentación geográfica y cartografía antiguas",services:[{name:"Planos de Madrid (1622 - 1960)",type:"WMS",url:"https://www.ign.es/wms/planos?"},{name:"Hojas kilométricas (Madrid - 1860)",type:"WMS",url:"https://www.ign.es/wms/hojas-kilometricas?"},{name:"Planimetrías",type:"WMS",url:"https://www.ign.es/wms/minutas-cartograficas?"},{name:"Primera edición de los Mapas Topográficos Nacionales",type:"WMS",url:"https://www.ign.es/wms/primera-edicion-mtn?"},{name:"Mapas Históricos",type:"WMTS",url:"https://www.ign.es/wmts/primera-edicion-mtn"}]},{name:"Modelos Digitales de Elevaciones",services:[{name:"Relieve",type:"WMTS",url:"https://wmts-mapa-lidar.idee.es/lidar?"}]},{name:"Rutas, ocio y tiempo libre",services:[{name:"Camino de Santiago",type:"WMS",url:"https://www.ign.es/wms-inspire/camino-santiago?"}]},{name:"Capas vectoriales",services:[{name:"Colecciones del Sistema Cartográfico Nacional",type:"OGCAFPIFeatures",url:"https://api-features.idee.es/"}]},{name:"Catastro",services:[{name:"Catastro",type:"WMS",url:"http://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx?"}]}]},on=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&en(e,t)}(a,M.Plugin);var t,n,i,r=tn(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $t(this,a),(e=r.call(this)).map_=null,e.controls_=[],e.position_=t.position||"TR",e.collapsed_=void 0===t.collapsed||t.collapsed,e.name_="fulltoc",e.metadata_=Zt.metadata,e.http=!0,void 0===t.http||!1!==t.http&&"false"!==t.http||(e.http=!1),e.https=!0,void 0===t.https||!1!==t.https&&"false"!==t.https||(e.https=!1),e.codsi=t.codsi||!1,e.precharged=t.precharged||an,e.order=t.order>=-1?t.order:null,e}return t=a,i=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?At:Dt:M.language.getTranslation(e).fulltoc}}],(n=[{key:"addTo",value:function(e){var t=this;this.map_=e,this.control_=new Jt(this.http,this.https,this.precharged,this.codsi,this.order),this.panel_=new M.ui.Panel("FullTOC",{className:"m-plugin-fulltoc",collapsed:this.collapsed_,collapsible:!0,position:M.ui.position[this.position_],collapsedButtonClass:"icon-capas",tooltip:Rt("tooltip"),order:this.order}),this.controls_.push(this.control_),this.control_.on(M.evt.ADDED_TO_MAP,(function(){t.fire(M.evt.ADDED_TO_MAP)})),this.map_.on(M.evt.COMPLETED,(function(){null!==t.map_&&(null!==t.control_&&t.control_.render(),t.map_.on(M.evt.ADDED_LAYER,(function(){null!==t.control_&&t.control_.render()})),t.map_.on(M.evt.REMOVED_LAYER,(function(){null!==t.control_&&t.control_.render()})))})),this.panel_.addControls(this.controls_),this.map_.addPanels(this.panel_)}},{key:"position",get:function(){return this.position_}},{key:"name",get:function(){return this.name_}},{key:"collapsed",get:function(){return this.panel_.isCollapsed()}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.collapsed)}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]);var e=[null,null,null];this.control_=e[0],this.controls_=e[1],this.panel_=e[2]}}])&&Qt(t.prototype,n),i&&Qt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.plugin.FullTOC=on,window.M.control.FullTOCControl=Jt}]);
//# sourceMappingURL=fulltoc.ol.min.js.map