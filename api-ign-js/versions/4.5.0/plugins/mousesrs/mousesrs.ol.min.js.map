{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/srs.html","webpack:///./src/templates/mousesrs.html","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/impl/ol/js/arcgridparser.js","webpack:///./src/impl/ol/js/wcsloader.js","webpack:///./src/impl/ol/js/wcsloadermanager.js","webpack:///./src/impl/ol/js/extendedMouse.js","webpack:///./src/impl/ol/js/mousesrscontrol.js","webpack:///./src/facade/js/mousesrscontrol.js","webpack:///./src/facade/js/mousesrs.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","translations","en","es","getLang","res","M","language","getTranslation","lang","mousesrs","getValue","keyPath","arguments","length","undefined","translation","utils","isNullOrEmpty","console","warn","concat","split","reduce","prev","current","ArcGridParser","_classCallCheck","this","data","nCols","nRows","xllcorner","yllcorner","dx","dy","noDataValue","dataOrg","toLowerCase","forEach","readLine","lineOrg","line","trim","indexOf","parseFloat","substr","push","map","x","WCSLoader","url","options","fetchIndex","Number","NaN","width","height","loadCoverage","innerThis","params","service","request","version","coverage","addParameters","proxy","remote","then","response","text","DOMParser","parseFromString","envelope","querySelectorAll","_loop","getAttribute","crs","coverageExtension","childNodes","nodeValue","coord","offsetVector","cellsizeX","Math","abs","cellsizeY","error","message","extent","epsgCode","w","h","newExtent","getVisibleExtent","min","ceil","rx","ry","ext","visibleExtent","mdtData","bbox","assignOptions","join","parser","parseData","getDx","getDy","getNoDataValue","coords","newCoords","pt","ol","proj","transform","y","col","floor","row","h1","h2","h3","h4","xs","ys","bilinealInterpolation","toFixed","result","userData","src","dest","p0","p1","p2","p3","max","getElementsByTagName","loop","mapExtent","getExtension","g00","g10","g01","g11","obj","opts","keys","opt","uri","newUri","keyParams","k","encodeURIComponent","qs","replace","WCSLoaderManager","wcsLoaders","layers","layers1","wcsLayer","addLayer","wcsLoader","getWcsLoaderForExtension","getDataGrid","_this","POSITIVE_INFINITY","loader","mLoader","mRes","NEGATIVE_INFINITY","getResolutionDif","Mouse","_ol$control$MousePosi","_inherits","control","MousePosition","_super","_createSuper","vendorOptions","coordinateFormat","label","mapProjection_","projection","target","geoDecimalDigits","utmDecimalDigits","activeZ","order","_this2","facadeMap_","wcsloadermanager","addLayers","format","interpolationMethod","getMapImpl","on","updateDataGrid","innerMap","getBbox","transformExtent","getProjection","code","element","removeControl","event","getMap","lastMouseMovePixel_","getEventPixel","updateHTML_","pixel","html","transform_","getTransform","identityTransform","coordinate","getCoordinateFromPixel","orgCoord","tCoord","round","isNaN","renderedHTML_","innerHTML","MouseSRSControl","_M$impl$Control","impl","Control","srs","precision","tooltip","helpUrl","srs_","label_","precision_","auxMap_","html_","renderPlugin","mousePositionControl","ExtendedMouse","createStringXY","getDecimalUnits","undefinedHTML","className","addControl","_get","_getPrototypeOf","setTimeout","initWCSLoaderManager","document","querySelector","setAttribute","addEventListener","openChangeSRS","_ref","_this3","content","template","compileSync","jsonp","parseToHtml","vars","selected","hasHelp","isUrl","select_srs","dialog","info","style","minWidth","changeSRS","backgroundColor","button","select","selectedIndex","remove","srsUnits","units_","_M$Control","geoDD","utmDD","isUndefined","MouseSRSImplControl","exception","tooltip_","Promise","success","fail","getImpl","destroy","MouseSRS","_M$Plugin","Plugin","map_","controls_","control_","panel_","ui","Panel","collapsible","addControls","removeControls","position_","cadena","encodeBase64","window","plugin","M$plugin$MouseSRS","M$control$MouseSRSControl","M$impl$control$Mouse","M$impl$control$MouseSRSControl"],"mappings":"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","file":"mousesrs.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = \"<div class=\\\"m-mousesrs-srs-container\\\" role=\\\"menu\\\" aria-label=\\\"Menu EPSG\\\" tabindex=\\\"{{order}}\\\">\\n  <select title=\\\"{{select_srs}}\\\" aria-label=\\\"{{select_srs}}\\\" role=\\\"select\\\" tabindex=\\\"{{order}}\\\" id=\\\"m-mousesrs-srs-selector\\\">\\n    <option value=\\\"EPSG:4326\\\" {{#eq selected \\\"EPSG:4326\\\"}}selected{{/eq}}>EPSG:4326</option>\\n    <option value=\\\"EPSG:4083\\\" {{#eq selected \\\"EPSG:4083\\\"}}selected{{/eq}}>EPSG:4083</option>\\n    <option value=\\\"EPSG:25829\\\" {{#eq selected \\\"EPSG:25829\\\"}}selected{{/eq}}>EPSG:25829</option>\\n    <option value=\\\"EPSG:25830\\\" {{#eq selected \\\"EPSG:25830\\\"}}selected{{/eq}}>EPSG:25830</option>\\n    <option value=\\\"EPSG:25831\\\" {{#eq selected \\\"EPSG:25831\\\"}}selected{{/eq}}>EPSG:25831</option>\\n    <option value=\\\"EPSG:3857\\\" {{#eq selected \\\"EPSG:3857\\\"}}selected{{/eq}}>EPSG:3857</option>\\n    <option value=\\\"EPSG:4258\\\" {{#eq selected \\\"EPSG:4258\\\"}}selected{{/eq}}>EPSG:4258</option>\\n  </select>\\n  {{#if hasHelp}}\\n    <div class=\\\"m-mousesrs-help-button\\\" title=\\\"Help EPSG\\\">\\n      <a tabindex=\\\"{{order}}\\\" role=\\\"link\\\" aria-label=\\\"Help EPSG\\\" href=\\\"{{helpUrl}}\\\" target=\\\"_blank\\\"><i class=\\\"icon-help\\\"></i></a>\\n    </div>\\n  {{/if}}\\n</div>\\n\";","module.exports = \"<div aria-label=\\\"Plugin mousesrs\\\" role=\\\"button\\\" tabindex=\\\"{{order}}\\\" id=\\\"div-contenedor\\\" class=\\\"m-control m-container m-mousesrs-container\\\" title=\\\"{{translations.tooltip}}\\\">\\n    <div class=\\\"g-cartografia-flecha\\\"></div>\\n</div>\\n\";","import en from './en';\nimport es from './es';\n\n/**\n * Default object with es and en translate.\n *\n * @const\n * @type {object}\n */\nconst translations = {\n  en,\n  es,\n};\n\nconst getLang = () => {\n  let res = 'es';\n  if (typeof M.language.getLang === 'function') {\n    res = M.language.getLang();\n  }\n\n  return res;\n};\n\n/**\n * This function sets a new language translate.\n * @param {string} lang\n * @param {JSON} json\n * @public\n * @api\n */\nexport const addTranslation = (lang, json) => {\n  translations[lang] = json;\n};\n\n/**\n * This function gets a language translate.\n *\n * @param {string} lang\n * @return {JSON}\n * @public\n * @api\n */\nexport const getTranslation = (lang) => {\n  if (lang === 'es' || lang === 'en') {\n    return translations[lang];\n  }\n  return M.language.getTranslation(lang).mousesrs;\n};\n\n/**\n * This function gets a language value from key\n *\n * @public\n * @param {string}\n * @param {string}\n * @return {string}\n * @public\n * @api\n */\n\nexport const getValue = (keyPath, lang = getLang()) => {\n  const translation = getTranslation(lang);\n  let value = '';\n  if (M.utils.isNullOrEmpty(translation)) {\n    /* eslint-disable no-console */\n    console.warn(`The translation '${lang}' has not been defined.`);\n  } else {\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\n  }\n\n  return value;\n};\n","export default class ArcGridParser {\n  constructor() {\n    this.data = [];\n    this.nCols = 0;\n    this.nRows = 0;\n    this.xllcorner = 0;\n    this.yllcorner = 0;\n    this.dx = 0;\n    this.dy = 0;\n    this.noDataValue = -9999;\n  }\n\n  parseData(dataOrg) {\n    const data = dataOrg.toLowerCase();\n    this.data = [];\n    const lines = data.split('\\n');\n    lines.forEach(this.readLine.bind(this));\n    return this.data;\n  }\n\n  getDx() {\n    return this.dx;\n  }\n\n  getDy() {\n    return this.dy;\n  }\n\n  getNoDataValue() {\n    return this.noDataValue;\n  }\n\n  readLine(lineOrg) {\n    const line = lineOrg.trim();\n    if (!line) {\n      return;\n    }\n\n    if (line.indexOf('ncols') >= 0) {\n      this.nCols = parseFloat(line.substr(5));\n    } else if (line.indexOf('nrows') >= 0) {\n      this.nRows = parseFloat(line.substr(5));\n    } else if (line.indexOf('xllcorner') >= 0) {\n      this.xllcorner = parseFloat(line.substr(9));\n    } else if (line.indexOf('yllcorner') >= 0) {\n      this.yllcorner = parseFloat(line.substr(9));\n    } else if (line.indexOf('cellsize') >= 0) {\n      this.dx = parseFloat(line.substr(8));\n      this.dy = parseFloat(line.substr(8));\n    } else if (line.indexOf('dx') >= 0) {\n      this.dx = parseFloat(line.substr(2));\n    } else if (line.indexOf('dy') >= 0) {\n      this.dy = parseFloat(line.substr(2));\n    } else if (line.indexOf('nodata_value') >= 0) {\n      this.noDataValue = parseFloat(line.substr(12));\n    } else {\n      this.data.push(line.split(' ').map((x) => {\n        return parseFloat(x);\n      }));\n    }\n  }\n}\n","/* eslint-disable no-console */\nimport ArcGridParser from './arcgridparser';\n\nconst NO_DATA_VALUE = 'NODATA_value -9999.000';\n\nexport default class WCSLoader {\n  constructor(url, options) {\n    this.fetchIndex = 0;\n    this.noDataValue = Number.NaN;\n    this.url = url;\n    this.options = options;\n    this.options.width = options.width || 500;\n    this.options.height = options.height || 500;\n    this.loadCoverage();\n  }\n\n  loadCoverage() {\n    const innerThis = this;\n    const params = {\n      service: this.options.service ? this.options.service : 'WCS',\n      request: 'describecoverage',\n      version: this.options.version ? this.options.version : '1.0.0',\n      coverage: this.options.coverage,\n    };\n\n    const url = this.addParameters(this.url, params);\n    M.proxy(false);\n    M.remote.get(url).then((response) => {\n      M.proxy(true);\n      const text = response.text;\n      const dp = new DOMParser();\n      const data = dp.parseFromString(text, 'text/xml');\n      const envelope = data.querySelectorAll('Envelope');\n      for (let i = 0; i < envelope.length; i += 1) {\n        if (envelope[i].getAttribute('srsName') === innerThis.options.crs) {\n          const coverageExtension = [];\n          envelope[i].childNodes[1].childNodes[0].nodeValue.split(' ').forEach((coord) => {\n            coverageExtension.push(parseFloat(coord));\n          });\n          envelope[i].childNodes[3].childNodes[0].nodeValue.split(' ').forEach((coord) => {\n            coverageExtension.push(parseFloat(coord));\n          });\n          innerThis.coverageExtension = coverageExtension;\n        }\n      }\n\n      const offsetVector = data.querySelectorAll('offsetVector');\n      if (offsetVector) {\n        innerThis.cellsizeX = Math.abs(parseFloat(offsetVector[0].childNodes[0].nodeValue.split(' ')[0]));\n        innerThis.cellsizeY = Math.abs(parseFloat(offsetVector[1].childNodes[0].nodeValue.split(' ')[1]));\n      }\n    }).catch((error) => {\n      M.proxy(true);\n      console.error(`Error received in request: ${error.message}`);\n    });\n  }\n\n  getResolutionDif(extent, epsgCode) {\n    const w = this.options.width;\n    const h = this.options.height;\n    const newExtent = this.getVisibleExtent(extent, epsgCode);\n    const nCols = Math.min(w, Math.ceil((newExtent[2] - newExtent[0]) / this.cellsizeX));\n    const nRows = Math.min(h, Math.ceil((newExtent[3] - newExtent[1]) / this.cellsizeY));\n    const rx = ((newExtent[2] - newExtent[0]) / nCols) - this.cellsizeX;\n    const ry = ((newExtent[3] - newExtent[1]) / nRows) - this.cellsizeY;\n    return Math.min(rx, ry);\n  }\n\n  getDataGrid(extent, epsgCode) {\n    const innerThis = this;\n    if (!this.cellsizeX || !this.cellsizeY) {\n      return;\n    }\n\n    const ext = this.getVisibleExtent(extent, epsgCode);\n    if (ext && this.visibleExtent && this.mdtData &&\n      ext[0] === this.visibleExtent[0] &&\n      ext[1] === this.visibleExtent[1] &&\n      ext[2] === this.visibleExtent[2] &&\n      ext[3] === this.visibleExtent[3]\n    ) {\n      return;\n    }\n\n    this.visibleExtent = ext;\n    const nCols = Math.min(\n      this.options.width,\n      Math.ceil((this.visibleExtent[2] - this.visibleExtent[0]) / this.cellsizeX),\n    );\n    const nRows = Math.min(\n      this.options.height,\n      Math.ceil((this.visibleExtent[3] - this.visibleExtent[1]) / this.cellsizeY),\n    );\n    let mdtData;\n    const params = {\n      request: 'GetCoverage',\n      bbox: this.visibleExtent,\n    };\n\n    this.assignOptions(params, this.options);\n    params.width = nCols;\n    params.height = nRows;\n    const url = this.addParameters(this.url, params);\n    this.fetchIndex += 1;\n    M.proxy(false);\n    M.remote.get(url).then((response) => {\n      M.proxy(true);\n      const text = response.text.split(NO_DATA_VALUE).join('');\n      const parser = new ArcGridParser();\n      mdtData = parser.parseData(text);\n      innerThis.dx = parser.getDx();\n      innerThis.dy = parser.getDy();\n      innerThis.noDataValue = parser.getNoDataValue();\n      innerThis.mdtData = mdtData;\n    }).catch((error) => {\n      M.proxy(true);\n      console.error(`Error received in request: ${error.message}`);\n    });\n  }\n\n  getValue(coords, epsgCode) {\n    let newCoords = coords;\n    let res = 0;\n    if (!this.mdtData) {\n      res = this.noDataValue;\n    } else {\n      if (epsgCode && epsgCode.toLowerCase() !== this.options.crs.toLowerCase()) {\n        const pt = ol.proj.transform(coords, epsgCode, this.options.crs);\n        newCoords = [pt.x, pt.y];\n      }\n\n      if (this.coverageExtension &&\n        newCoords[0] > this.coverageExtension[0] &&\n        newCoords[0] < this.coverageExtension[2] &&\n        newCoords[1] > this.coverageExtension[1] &&\n        newCoords[1] < this.coverageExtension[3]) {\n        const x = this.visibleExtent[0] - newCoords[0];\n        const y = this.visibleExtent[3] - newCoords[1];\n        const col = Math.floor(Math.abs((x / this.dx)));\n        const row = Math.floor(Math.abs((y / this.dy)));\n        const h1 = this.mdtData[row] && this.mdtData[row][col] && this.mdtData[row][col] !==\n          this.noDataValue ? this.mdtData[row][col] : 0;\n        const h2 = this.mdtData[row] && this.mdtData[row][col + 1] && this.mdtData[row][col + 1] !==\n          this.noDataValue ? this.mdtData[row][col + 1] : 0;\n        const h3 = this.mdtData[row + 1] && this.mdtData[row + 1][col] &&\n          this.mdtData[row + 1][col] !== this.noDataValue ? this.mdtData[row + 1][col] : 0;\n        const h4 = this.mdtData[row + 1] && this.mdtData[row + 1][col + 1] &&\n          this.mdtData[row + 1][col + 1] !== this.noDataValue ? this.mdtData[row + 1][col + 1] : 0;\n        const xs = ((this.visibleExtent[0] - newCoords[0]) - (Math.floor((x / this.dx)) * this.dx))\n          / this.dx;\n        const ys = ((this.visibleExtent[3] - newCoords[1]) - (Math.floor((y / this.dy)) * this.dy))\n          / this.dy;\n        const r = this.bilinealInterpolation(h1, h3, h2, h4, xs, ys).toFixed(2);\n        res = r;\n      }\n    }\n\n    return res;\n  }\n\n  getGridResponse(error, result, userData) {\n    if (userData !== this.fetchIndex) {\n      return;\n    }\n\n    if (error) {\n      return;\n    }\n\n    if (result) {\n      const parser = new ArcGridParser();\n      this.mdtData = parser.parseData(result);\n      this.dx = parser.getDx();\n      this.dy = parser.getDy();\n      this.noDataValue = parser.getNoDataValue();\n    }\n  }\n\n  getExtension(extent, epsgCode) {\n    let res = [];\n    if (epsgCode && epsgCode.toLowerCase() === this.options.crs.toLowerCase()) {\n      res = extent;\n    } else {\n      const src = epsgCode;\n      const dest = this.options.crs;\n      const p0 = ol.proj.transform([extent[0], extent[1]], src, dest);\n      const p1 = ol.proj.transform([extent[0], extent[3]], src, dest);\n      const p2 = ol.proj.transform([extent[2], extent[1]], src, dest);\n      const p3 = ol.proj.transform([extent[2], extent[3]], src, dest);\n      res = [\n        Math.min(p0.x, p1.x, p2.x, p3.x),\n        Math.min(p0.y, p1.y, p2.y, p3.y),\n        Math.max(p0.x, p1.x, p2.x, p3.x),\n        Math.max(p0.y, p1.y, p2.y, p3.y),\n      ];\n    }\n\n    return res;\n  }\n\n  getCoverageResponse(error, response, userData) {\n    if (error) {\n      console.error(`Error received in DescribeCoverage request: ${error.message}`);\n      return;\n    }\n\n    if (response) {\n      const data = response;\n      const envelope = data.getElementsByTagName('gml:Envelope');\n      const innerThis = this;\n      const loop = (i) => {\n        if (envelope[i].getAttribute('srsName') === innerThis.options.crs) {\n          const coverageExtension = [];\n          envelope[i].childNodes[1].childNodes[0].nodeValue.split(' ').forEach((coord) => {\n            coverageExtension.push(parseFloat(coord));\n          });\n          envelope[i].childNodes[3].childNodes[0].nodeValue.split(' ').forEach((coord) => {\n            coverageExtension.push(parseFloat(coord));\n          });\n          innerThis.coverageExtension = coverageExtension;\n        }\n      };\n\n      for (let i = 0; i < envelope.length; i += 1) {\n        loop(i);\n      }\n\n      const offsetVector = data.getElementsByTagName('gml:offsetVector');\n      if (offsetVector) {\n        this.cellsizeX = Math.abs(parseFloat(offsetVector[0].childNodes[0].nodeValue.split(' ')[0]));\n        this.cellsizeY = Math.abs(parseFloat(offsetVector[1].childNodes[0].nodeValue.split(' ')[1]));\n      }\n    }\n  }\n\n  getVisibleExtent(mapExtent, epsgCode) {\n    const extent = this.getExtension(mapExtent, epsgCode);\n    return this.coverageExtension ? [\n      Math.max(extent[0], this.coverageExtension[0]),\n      Math.max(extent[1], this.coverageExtension[1]),\n      Math.min(extent[2], this.coverageExtension[2]),\n      Math.min(extent[3], this.coverageExtension[3]),\n    ] : extent;\n  }\n\n  bilinealInterpolation(g00, g10, g01, g11, xs, ys) {\n    return (g00 * (1 - xs) * (1 - ys)) + (g10 * xs * (1 - ys)) +\n      (g01 * (1 - xs) * ys) + (g11 * xs * ys);\n  }\n\n  assignOptions(obj, opts) {\n    if (!obj || !opts) {\n      return;\n    }\n\n    Object.keys(opts).forEach((opt) => {\n      if (opts[opt] !== null && opts[opt]) {\n        // eslint-disable-next-line no-param-reassign\n        obj[opt] = opts[opt];\n      }\n    });\n  }\n\n  addParameters(uri, params) {\n    let newUri = uri;\n    const keyParams = [];\n    Object.keys(params).forEach((k) => {\n      if (params[k] !== null && params[k] !== undefined) {\n        keyParams.push(`${k}=${encodeURIComponent(params[k])}`);\n      }\n    });\n\n    const qs = keyParams.join('&');\n    newUri = newUri.replace(/[?&]$/, '');\n    newUri = newUri.indexOf('?') === -1 ? `${newUri}?` : `${newUri}&`;\n    return newUri + qs;\n  }\n}\n","import WCSLoader from './wcsloader';\n\nexport default class WCSLoaderManager {\n  constructor() {\n    this.wcsLoaders = {};\n  }\n\n  addLayers(layers) {\n    if (!layers) {\n      return;\n    }\n\n    for (let i = 0, layers1 = layers; i < layers1.length; i += 1) {\n      const wcsLayer = layers1[i];\n      this.addLayer(wcsLayer.url, wcsLayer.options);\n    }\n  }\n\n  addLayer(url, options) {\n    const name = options.name || options.coverage;\n    if (this.wcsLoaders[name]) {\n      return;\n    }\n\n    this.wcsLoaders[name] = new WCSLoader(url, options);\n  }\n\n  updateDataGrid(extent, epsgCode) {\n    this.wcsLoader = this.getWcsLoaderForExtension(extent, epsgCode);\n    if (this.wcsLoader) {\n      this.wcsLoader.getDataGrid(extent, epsgCode);\n    }\n  }\n\n  getValue(coords, epsgCode) {\n    let res = Number.NaN;\n    if (this.wcsLoader) {\n      res = this.wcsLoader.getValue(coords, epsgCode);\n    }\n\n    return res;\n  }\n\n  getWcsLoaderForExtension(extent, epsgCode) {\n    let res = Number.POSITIVE_INFINITY;\n    let loader = null;\n    let mLoader = null;\n    let mRes = Number.NEGATIVE_INFINITY;\n    Object.keys(this.wcsLoaders).forEach((key) => {\n      const wcsLoader = this.wcsLoaders[key];\n      const r = wcsLoader.getResolutionDif(extent, epsgCode);\n      if (r < 0 && r > mRes) {\n        mRes = r;\n        mLoader = wcsLoader;\n      }\n\n      if (r > 0 && r < res) {\n        res = r;\n        loader = wcsLoader;\n      }\n    });\n\n    return loader !== null ? loader : mLoader;\n  }\n}\n","/**\n * @module M/impl/control/Mouse\n */\n\nimport { getValue } from '../../../facade/js/i18n/language';\nimport WCSLoaderManager from './wcsloadermanager';\n\n/**\n * @classdesc\n * @api\n */\nclass Mouse extends ol.control.MousePosition {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a WMC selector\n   * control\n   *\n   * @constructor\n   * @extends {ol.control.Control}\n   * @param {Object} vendorOptions vendor options for the base library\n   * @api\n   */\n  constructor(vendorOptions) {\n    super(vendorOptions);\n\n    /**\n     * Coordinate format given in OpenLayers format.\n     * @private\n     * @type {Object}\n     */\n    this.coordinateFormat = vendorOptions.coordinateFormat;\n\n    this.label = vendorOptions.label;\n\n    this.mapProjection_ = vendorOptions.projection;\n\n    this.target = vendorOptions.target;\n\n    this.geoDecimalDigits = vendorOptions.geoDecimalDigits;\n\n    this.utmDecimalDigits = vendorOptions.utmDecimalDigits;\n\n    this.activeZ = vendorOptions.activeZ;\n\n    this.order = vendorOptions.order;\n  }\n\n  initWCSLoaderManager(map) {\n    this.facadeMap_ = map;\n    if (this.activeZ) {\n      this.wcsloadermanager = new WCSLoaderManager();\n      const layers = [\n        {\n          url: 'https://servicios.idee.es/wcs-inspire/mdt',\n          options: {\n            coverage: 'Elevacion4258_200',\n            crs: 'EPSG:4326',\n            format: 'ArcGrid',\n            height: 500,\n            interpolationMethod: 'bilinear',\n            service: 'WCS',\n            version: '1.0.0',\n            width: 500,\n          },\n        },\n        {\n          url: 'https://servicios.idee.es/wcs-inspire/mdt',\n          options: {\n            coverage: 'Elevacion4258_25',\n            crs: 'EPSG:4326',\n            format: 'ArcGrid',\n            height: 500,\n            interpolationMethod: 'bilinear',\n            service: 'WCS',\n            version: '1.0.0',\n            width: 500,\n          },\n        },\n        {\n          url: 'https://servicios.idee.es/wcs-inspire/mdt',\n          options: {\n            coverage: 'Elevacion4258_500',\n            crs: 'EPSG:4326',\n            format: 'ArcGrid',\n            height: 500,\n            interpolationMethod: 'bilinear',\n            service: 'WCS',\n            version: '1.0.0',\n            width: 500,\n          },\n        },\n        {\n          url: 'https://servicios.idee.es/wcs-inspire/mdt',\n          options: {\n            coverage: 'Elevacion4258_5',\n            crs: 'EPSG:4326',\n            format: 'ArcGrid',\n            height: 500,\n            interpolationMethod: 'bilinear',\n            service: 'WCS',\n            version: '1.0.0',\n            width: 500,\n          },\n        },\n      ];\n\n      this.wcsloadermanager.addLayers(layers);\n      map.getMapImpl().on('moveend', () => {\n        this.updateDataGrid(map);\n      });\n    }\n  }\n\n  updateDataGrid(map) {\n    const innerMap = this.facadeMap_ !== undefined ? this.facadeMap_ : map;\n    const bbox = innerMap.getBbox();\n    let extent = [bbox.x.min, bbox.y.min, bbox.x.max, bbox.y.max];\n    extent = ol.proj.transformExtent(extent, innerMap.getProjection().code, 'EPSG:4326');\n    this.wcsloadermanager.updateDataGrid(extent, 'EPSG:4326');\n  }\n\n  /**\n   * function remove the event 'click'\n   *\n   * @public\n   * @function\n   * @api\n   */\n  getElement() {\n    return this.element;\n  }\n\n  /**\n   * This function destroys this control, cleaning the HTML\n   * and unregistering all events\n   *\n   * @public\n   * @function\n   * @api\n   * @export\n   */\n  destroy() {\n    this.facadeMap_.getMapImpl().removeControl(this);\n    this.facadeMap_ = null;\n  }\n\n  /**\n   * @param {Event} event Browser event.\n   * @protected\n   */\n  handleMouseMove(event) {\n    const map = this.getMap();\n    this.lastMouseMovePixel_ = map.getEventPixel(event);\n    this.updateHTML_(this.lastMouseMovePixel_);\n  }\n\n  /**\n   * @param {Event} event Browser event.\n   * @protected\n   */\n  handleMouseOut(event) {\n    this.updateHTML_(null);\n    this.lastMouseMovePixel_ = null;\n  }\n\n  /**\n   * @private\n   * @function\n   */\n  updateHTML_(pixel) {\n    let html = '';\n    const projection = this.getProjection();\n    if (pixel && this.mapProjection_) {\n      if (!this.transform_) {\n        if (projection) {\n          this.transform_ = ol.proj.getTransform(this.mapProjection_, projection);\n        } else {\n          this.transform_ = ol.proj.identityTransform;\n        }\n      }\n\n      const map = this.getMap();\n      const coordinate = map.getCoordinateFromPixel(pixel);\n      if (coordinate) {\n        this.transform_(coordinate, coordinate);\n        html = `${this.coordinateFormat(coordinate)}`.replace('.', ',').replace('.', ',').replace(', ', '&nbsp;&nbsp;&nbsp;');\n        if (this.activeZ && this.wcsloadermanager !== undefined) {\n          const orgCoord = map.getCoordinateFromPixel(pixel);\n          const tCoord = ol.proj.transform(orgCoord, this.facadeMap_.getProjection().code, 'EPSG:4326');\n          const value = Math.round(this.wcsloadermanager.getValue(tCoord, 'EPSG:4326'));\n          if (!Number.isNaN(value)) {\n            html += `&nbsp;&nbsp;&nbsp;${value}`;\n          }\n        }\n      }\n\n      html += ` | <b role=\"button\" tabindex=\"${this.order}\" aria-label=\"${getValue('accessibility.src')}\" class=\"m-mousesrs-pointer\">${this.label}</b>`;\n    }\n\n    if (!this.renderedHTML_ || html !== this.renderedHTML_) {\n      this.element.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n  }\n}\n\nexport default Mouse;\n","/**\n * @module M/impl/control/MouseSRSControl\n */\nimport ExtendedMouse from './extendedMouse';\nimport template from '../../../templates/srs';\nimport { getValue } from '../../../facade/js/i18n/language';\n\nexport default class MouseSRSControl extends M.impl.Control {\n  /* eslint-disable-next-line max-len */\n  constructor(srs, label, precision, geoDecimalDigits, utmDecimalDigits, tooltip, activeZ, helpUrl, order) {\n    super();\n\n    /**\n     * Coordinates spatial reference system\n     *\n     * @type { ProjectionLike } https://openlayers.org/en/latest/apidoc/module-ol_proj.html#~ProjectionLike\n     * @private\n     */\n    this.srs_ = srs;\n\n    /**\n     * Label to show\n     *\n     * @type {string}\n     * @private\n     */\n    this.label_ = label;\n\n    /**\n     * Precision of coordinates\n     *\n     * @private\n     * @type {number}\n     */\n    this.precision_ = precision;\n\n    /**\n     * Number of decimal digits for geographic coordinates.\n     * @private\n     * @type {number}\n     */\n    this.geoDecimalDigits = geoDecimalDigits;\n\n    /**\n     * Number of decimal digits for UTM coordinates.\n     * @private\n     * @type {number}\n     */\n    this.utmDecimalDigits = utmDecimalDigits;\n\n    /**\n     * Tooltip\n     *\n     * @private\n     * @type {string}\n     */\n    this.tooltip = tooltip;\n\n    /**\n     * Activate viewing z value\n     * @private\n     * @type {boolean}\n     */\n    this.activeZ = activeZ;\n\n    /**\n     * URL to the help for the icon\n     * @private\n     * @type {string}\n     */\n    this.helpUrl = helpUrl;\n\n    this.order = order;\n  }\n\n  /**\n   * This function adds the control to the specified map\n   *\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api\n   */\n  addTo(map, html) {\n    this.auxMap_ = map;\n    this.html_ = html;\n    this.renderPlugin(map, html);\n  }\n\n  renderPlugin(map, html) {\n    this.facadeMap_ = map;\n    this.mousePositionControl = new ExtendedMouse({\n      coordinateFormat: ol.coordinate.createStringXY(this.getDecimalUnits()), // this.precision_),\n      projection: this.srs_,\n      label: this.label_,\n      undefinedHTML: '',\n      className: 'm-mouse-srs',\n      target: this.html_,\n      tooltip: this.tooltip,\n      geoDecimalDigits: this.geoDecimalDigits,\n      utmDecimalDigits: this.utmDecimalDigits,\n      activeZ: this.activeZ,\n      order: this.order,\n    });\n\n    map.getMapImpl().addControl(this.mousePositionControl);\n    super.addTo(map, html);\n    setTimeout(() => {\n      this.mousePositionControl.initWCSLoaderManager(map);\n      document.querySelector('.m-mousesrs-container .m-mouse-srs').setAttribute('role', 'text ');\n      document.querySelector('.m-mousesrs-container .m-mouse-srs').setAttribute('tabIndex', this.order);\n      document.querySelector('.m-mousesrs-container .m-mouse-srs').addEventListener('click', this.openChangeSRS.bind(this, this.auxMap_, html));\n      document.querySelector('.m-mousesrs-container .m-mouse-srs').addEventListener('keydown', ({ key }) => {\n        if (key === 'Enter') this.openChangeSRS(this, this.auxMap_, html);\n      });\n    }, 1000);\n  }\n\n  openChangeSRS(map, html) {\n    const content = M.template.compileSync(template, {\n      jsonp: true,\n      parseToHtml: false,\n      vars: {\n        selected: this.srs_,\n        hasHelp: this.helpUrl !== undefined && M.utils.isUrl(this.helpUrl),\n        helpUrl: this.helpUrl,\n        select_srs: getValue('select_srs'),\n        order: this.order,\n      },\n    });\n\n    M.dialog.info(content, getValue('select_srs'), this.order);\n    setTimeout(() => {\n      document.querySelector('.m-dialog>div.m-modal>div.m-content').style.minWidth = '260px';\n      document.querySelector('#m-mousesrs-srs-selector').addEventListener('change', this.changeSRS.bind(this, map, html));\n      document.querySelector('div.m-mapea-container div.m-dialog div.m-title').style.backgroundColor = '#71a7d3';\n      const button = document.querySelector('div.m-dialog.info div.m-button > button');\n      button.innerHTML = getValue('close');\n      button.style.width = '75px';\n      button.style.backgroundColor = '#71a7d3';\n    }, 10);\n  }\n\n  changeSRS(map, html) {\n    const select = document.querySelector('#m-mousesrs-srs-selector');\n    this.srs_ = select.options[select.selectedIndex].value;\n    this.label_ = select.options[select.selectedIndex].text;\n    this.facadeMap_.getMapImpl().removeControl(this.mousePositionControl);\n    document.querySelector('div.m-mapea-container div.m-dialog').remove();\n    this.renderPlugin(map, html);\n  }\n\n  /**\n   * Calculates desired decimal digits for coordinate format.\n   * @private\n   * @function\n   */\n  getDecimalUnits() {\n    let decimalDigits;\n    // eslint-disable-next-line no-underscore-dangle\n    const srsUnits = ol.proj.get(this.srs_).units_;\n    if (srsUnits === 'd' && this.geoDecimalDigits !== undefined) {\n      decimalDigits = this.geoDecimalDigits;\n    } else if (srsUnits === 'm' && this.utmDecimalDigits !== undefined) {\n      decimalDigits = this.utmDecimalDigits;\n    } else {\n      decimalDigits = this.precision_;\n    }\n    return decimalDigits;\n  }\n\n  /**\n   * This function destroys this control, cleaning the HTML\n   * and unregistering all events\n   *\n   * @public\n   * @function\n   * @api\n   * @export\n   */\n  destroy() {\n    this.facadeMap_.getMapImpl().removeControl(this);\n    this.facadeMap_ = null;\n  }\n}\n","/**\n * @module M/control/MouseSRSControl\n */\n\nimport MouseSRSImplControl from '../../impl/ol/js/mousesrscontrol';\nimport template from '../../templates/mousesrs';\nimport { getValue } from './i18n/language';\n\nexport default class MouseSRSControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(srs, label, precision, geoDD, utmDD, tooltip, activeZ, helpUrl, order = 32766) {\n    if (M.utils.isUndefined(MouseSRSImplControl)) {\n      M.exception(getValue('exception.impl'));\n    }\n    /* eslint-disable-next-line max-len */\n    const impl = new MouseSRSImplControl(srs, label, precision, geoDD, utmDD, tooltip, activeZ, helpUrl, order);\n    super(impl, 'MouseSRS');\n    this.tooltip_ = tooltip;\n    this.order = order;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api\n   */\n  createView(map) {\n    return new Promise((success, fail) => {\n      const html = M.template.compileSync(template, {\n        vars: {\n          translations: {\n            tooltip: this.tooltip_,\n          },\n          order: this.order,\n        },\n      });\n      success(html);\n    });\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof MouseSRSControl;\n  }\n\n  destroy() {\n    this.getImpl().destroy();\n  }\n}\n","/**\n * @module M/plugin/MouseSRS\n */\nimport '../assets/css/fonts';\nimport '../assets/css/mousesrs';\nimport MouseSRSControl from './mousesrscontrol';\nimport { getValue } from './i18n/language';\n\nimport es from './i18n/es';\nimport en from './i18n/en';\n\nexport default class MouseSRS extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Plugin tooltip\n     *\n     * @private\n     * @type {string}\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * Shown coordinates SRS\n     *\n     * @private\n     * @type {string}\n     */\n    this.srs_ = options.srs || 'EPSG:4326';\n\n    /**\n     * Label with SRS name\n     * @private\n     * @type {string}\n     */\n    this.label_ = options.label || 'WGS84';\n\n    /**\n     * Precision of coordinates\n     *\n     * @private\n     * @type {number}\n     */\n    this.precision_ = M.utils.isNullOrEmpty(options.precision) ? 4 : options.precision;\n\n    /**\n     * Coordinates decimal digits for geographical projections\n     * @private\n     * @type {number}\n     */\n    this.geoDecimalDigits = options.geoDecimalDigits;\n\n    /**\n     * Coordinates decimal digits for UTM projections\n     * @private\n     * @type {number}\n     */\n    this.utmDecimalDigits = options.utmDecimalDigits;\n\n    /**\n     * Activate viewing z value\n     * @private\n     * @type {boolean}\n     */\n    this.activeZ = options.activeZ || false;\n\n    /**\n     * URL to the help for the icon\n     * @private\n     * @type {string}\n     */\n    this.helpUrl = options.helpUrl;\n\n    /**\n     *@private\n     *@type { Number }\n     */\n    this.order = options.order >= -1 ? options.order : null;\n\n    /**\n     * Plugin parameters\n     * @public\n     * @type {object}\n     */\n    this.options = options;\n  }\n\n  /**\n   * Return plugin language\n   *\n   * @public\n   * @function\n   * @param {string} lang type language\n   * @api stable\n   */\n  static getJSONTranslations(lang) {\n    if (lang === 'en' || lang === 'es') {\n      return (lang === 'en') ? en : es;\n    }\n    return M.language.getTranslation(lang).mousesrs;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    this.control_ = new MouseSRSControl(\n      this.srs_,\n      this.label_,\n      this.precision,\n      this.geoDecimalDigits,\n      this.utmDecimalDigits,\n      this.tooltip_,\n      this.activeZ,\n      this.helpUrl,\n      this.order,\n    );\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelMouseSRS', {\n      collapsible: false,\n      tooltip: this.tooltip_,\n      className: 'm-plugin-mousesrs',\n      order: this.order,\n    });\n    map.addControls(this.controls_);\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    this.map_.removeControls([this.control_]);\n    this.map_ = null;\n    this.control_ = null;\n    this.panel_ = null;\n  }\n\n\n  /**\n   * Name of the plugin\n   *\n   * @getter\n   * @function\n   */\n  get name() {\n    return 'mousesrs';\n  }\n\n  /**\n   * This function returns the position\n   *\n   * @public\n   * @return {string}\n   * @api\n   */\n  get position() {\n    return this.position_;\n  }\n\n  /**\n   * This function returns the label\n   *\n   * @public\n   * @function\n   * @api\n   */\n  get label() {\n    return this.label_;\n  }\n\n  /**\n   * This function returns the srs (Spatial Reference System)\n   *\n   * @public\n   * @function\n   * @api\n   */\n  get srs() {\n    return this.srs_;\n  }\n\n  /**\n   * Precision of coordinates\n   * @public\n   * @function\n   * @api\n   */\n  get precision() {\n    return this.precision_;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    let cadena = `${this.name}=${this.tooltip_}*${this.srs}*${this.label}*${this.precision}`;\n\n    if (this.geoDecimalDigits === undefined || this.geoDecimalDigits == null || this.geoDecimalDigits === '') {\n      cadena += '*';\n    } else {\n      cadena += `*${this.geoDecimalDigits}`;\n    }\n\n    if (this.utmDecimalDigits === undefined || this.utmDecimalDigits == null || this.utmDecimalDigits === '') {\n      cadena += '*';\n    } else {\n      cadena += `*${this.utmDecimalDigits}`;\n    }\n    return cadena;\n  }\n  /**\n   * Gets the API REST Parameters in base64 of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRestBase64() {\n    return `${this.name}=base64=${M.utils.encodeBase64(this.options)}`;\n  }\n}\n","import M$plugin$MouseSRS from './/facade/js/mousesrs';\nimport M$control$MouseSRSControl from './/facade/js/mousesrscontrol';\nimport M$impl$control$Mouse from './/impl/ol/js/extendedMouse';\nimport M$impl$control$MouseSRSControl from './/impl/ol/js/mousesrscontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.plugin.MouseSRS = M$plugin$MouseSRS;\nwindow.M.control.MouseSRSControl = M$control$MouseSRSControl;\nwindow.M.impl.control.Mouse = M$impl$control$Mouse;\nwindow.M.impl.control.MouseSRSControl = M$impl$control$MouseSRSControl;\n"],"sourceRoot":""}