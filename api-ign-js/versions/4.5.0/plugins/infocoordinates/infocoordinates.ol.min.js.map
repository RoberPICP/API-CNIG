{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/infocoordinates.html","webpack:///./src/impl/ol/js/infocoordinatescontrol.js","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/facade/js/infocoordinatescontrol.js","webpack:///./src/facade/js/infocoordinates.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","InfocoordinatesControl","_M$impl$Control","_inherits","M","impl","Control","_super","_createSuper","_classCallCheck","apply","arguments","map","html","this","facadeMap_","_get","_getPrototypeOf","feature","SRStarget","formatGMS","decimalGEOcoord","decimalUTMcoord","numPoint","getId","coordinatesFeature","getAttribute","SRSfeature","coordinatesGEOoutput","ol","proj","transform","datum","datumCalc","res","coordinatesUTMoutput","toFixed","coordinateGGMMSS","coordinate","toStringHDMS","projectionGEO","coordinatesGEO","latitude","substr","longitude","srs","indexOf","coord","srcMapa","coordinatesEPSG4528","bbox","url","concat","remote","box","code","currProj","transformExtent","dblClickInteraction_","setActive","getMapImpl","on","evt","customEvt","CustomEvent","detail","bubbles","getContainer","dispatchEvent","removeEventListener","translations","en","es","getLang","language","getTranslation","lang","infocoordinates","getValue","keyPath","length","undefined","translation","utils","isNullOrEmpty","console","warn","split","reduce","prev","current","_M$Control","helpUrl","order","outputDownloadFormat","_this","isUndefined","InfocoordinatesImplControl","exception","map_","numTabs","layerFeatures","layer","Vector","displayInLayerSwitcher","clickedDeactivate","_this2","template","compileSync","string","options","parseToHtml","templateVars","vars","htmlText","Handlebars","compile","templateFn","stringToHtml","Promise","success","fail","jsonp","hasHelp","isUrl","title","point","formatCoordinates","coordX","coordY","altitude","removePoint","removeAllPoints","importAllPoints","copyLatLon","copyxy","copyAllPoints","displayONAllPoints","displayOFFAllPoints","accessibilityTab","addLayers","panel_","SHOW","activate","HIDE","deactivate","querySelector","addEventListener","displayAllPoints","changeSelectSRSorChangeFormat","copylatlon","invokeEscKey","CLICK","addPoint","document","body","style","cursor","getFeatureHandler","checkEscKey","click","opened","classList","contains","window","KeyboardEvent","keyCode","which","shiftKey","ctrlKey","metaKey","err","error","un","_this3","getElementById","removeAttribute","remove","getElementsByClassName","getOverlays","array_","removeAllDisplaysPoints","tabsDiv","buttonTab","createElement","buttonTabText","createTextNode","appendChild","add","setAttribute","altitudeFromWCSservice","coordinates","featurePoint","Feature","getProjection","scrollTop","scrollHeight","altitudeBox","proxy","innerHTML","getImpl","readAltitudeFromWCSservice","then","response","responseText","text","join","parseFloat","replace","openTabFromTab","addFeatures","setZIndex","openTab","_this4","olMap","facadeControl","drawingLayer","drawLayer","getOL3Layer","hideTextPoint","removeChild","downloadingTemplate","select","interaction","Select","wrapX","layers","e","target","getFeatures","getArray","onSelect","addInteraction","edit","Modify","features","onModify","_this5","Point","icon","form","NONE","class","fontsize","radius","color","fill","pointDisable","rotation","rotate","offset","opacity","stroke","width","countPoints","displayPoint","querySelectorAll","forEach","elem","parseInt","textContent","elemento","setStyle","getFeatureById","pos","impl_","features_","olFeature_","values_","textHTML","helpTooltipElement","helpTooltip_","Overlay","element","setPosition","addOverlay","allTabsLinks","displayXYcoordinates","featureSelected","pointBox","latitudeBox","longitudeBox","datumBox","selectSRS","checked","pointDataOutput","getCoordinates","NumPoint","projectionUTM","formatUTMCoordinate","coordinatesUTM","selectFeature","activateTab","displayZcoordinate","totalTabs","children","tablinkActive","parentNode","featureSelect","removeFeatures","f","setId","trim","lastTablink","lastChild","lat","long","alt","result","navigator","clipboard","writeText","toast","x","replaceAll","y","printDocument","getAttributes","Altitude","projection","toString","push","slice","toBlobType","Blob","type","Date","titulo","getFullYear","getMonth","getDay","getHours","getMinutes","getSeconds","descargarArchivo","varUTM","calculateUTMcoordinates","className","removeOverlay","contenidoEnBlob","nombreArchivo","reader","FileReader","onload","event","save","href","download","clicEvent","MouseEvent","URL","webkitURL","revokeObjectURL","readAsDataURL","control","removeLayers","_this6","el","Infocoordinates","_M$Plugin","Plugin","decimalGEOcoord_","decimalUTMcoord_","name_","controls_","control_","positions","position_","includes","position","collapsed_","collapsed","collapsible_","collapsible","metadata_","api","metadata","helpUrl_","outputDownloadFormat_","tooltip_","tooltip","ui","Panel","collapsedButtonClass","addControls","addPanels","removeControls","removeLayerFeatures","_ref","encodeBase64","plugin","M$plugin$Infocoordinates","M$control$InfocoordinatesControl","M$impl$control$InfocoordinatesControl"],"mappings":"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","file":"infocoordinates.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = \"<div class=\\\"m-control m-container m-infocoordinates\\\">\\r\\n\\r\\n    <div class=\\\"div-m-infocoordinates-panel\\\">\\r\\n\\r\\n        <div role=\\\"heading\\\" tabindex=\\\"0\\\" class=\\\"m-infocoordinates-title\\\">\\r\\n            <p id=\\\"titleInfo\\\" class=\\\"m-infocoordinates-titleInfo\\\">{{translations.title}}</p>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"m-infocoordinates-content\\\">\\r\\n            <!-- Tabs -->\\r\\n            <div class=\\\"m-infocoordinates-tabs\\\">\\r\\n\\r\\n            </div>\\r\\n\\r\\n            <!-- Tab content -->\\r\\n            <div id=\\\"tabContent\\\" class='m-infocoordinates-tabContent'>\\r\\n                <table>\\r\\n                    <tbody>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td>{{translations.point}}</td>\\r\\n                            <td id=\\\"m-infocoordinates-point\\\">--</td>\\r\\n                            <td><button type=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"icon-bin2 noDisplay\\\" id=\\\"m-infocoordinates-buttonRemovePoint\\\" title=\\\"{{translations.removePoint}}\\\"></button></td>\\r\\n                        </tr>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td>{{translations.datum}}</td>\\r\\n                            <td id=\\\"m-infocoordinates-datum\\\" colspan=\\\"2\\\">ETRS89</td>\\r\\n                        </tr>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td>{{translations.latitude}}</td>\\r\\n                            <td id=\\\"m-infocoordinates-latitude\\\" colspan=\\\"2\\\">--</td>\\r\\n                            <td><button type=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"icon-copy noDisplay\\\" id=\\\"m-infocoordinates-copylatlon\\\" title=\\\"{{translations.copyLatLon}}\\\"></button></td>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td>{{translations.longitude}}</td>\\r\\n                            <td id=\\\"m-infocoordinates-longitude\\\" colspan=\\\"2\\\">--</td>\\r\\n                        </tr>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td></td>\\r\\n                            <td><input tabindex=\\\"0\\\" id=\\\"m-infocoordinates-buttonConversorFormat\\\" type=\\\"checkbox\\\" disabled>{{translations.formatCoordinates}}</td>\\r\\n                            <td></td>\\r\\n                        </tr>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td class=\\\"m-infocoordinates-help-td\\\">\\r\\n                                <span>CRS:</span>\\r\\n                                {{#if hasHelp}}\\r\\n                                    <div role=\\\"navigation\\\" class=\\\"m-infocoordinates-help\\\" title=\\\"EPSG\\\"><a tabindex=\\\"0\\\" title=\\\"Help\\\" href=\\\"{{helpUrl}}\\\" target=\\\"_blank\\\"><i class=\\\"icon-help\\\"></i></a></div>\\r\\n                                {{/if}}\\r\\n                            </td>\\r\\n                            <td colspan=\\\"2\\\">\\r\\n                                <select tabindex=\\\"0\\\" id=\\\"m-infocoordinates-comboDatum\\\" class=\\\"m-infocoordinates-comboDatum\\\">\\r\\n                                    <option value=\\\"EPSG:25829\\\">EPSG:25829</option>\\r\\n                                    <option value=\\\"EPSG:25830\\\" selected>EPSG:25830</option>\\r\\n                                    <option value=\\\"EPSG:25831\\\">EPSG:25831</option>\\r\\n                                    <option value=\\\"EPSG:3857\\\">EPSG:3857</option>\\r\\n                                    <option value=\\\"EPSG:4083\\\">EPSG:4083</option>\\r\\n                                </select>\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td>{{translations.coordX}}</td>\\r\\n                            <td id=\\\"m-infocoordinates-coordX\\\" colspan=\\\"2\\\">--</td>\\r\\n                            <td><button type=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"icon-copy noDisplay\\\" id=\\\"m-infocoordinates-copyxy\\\" title=\\\"{{translations.copyxy}}\\\"></button></td>\\r\\n                        </tr>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td>{{translations.coordY}}</td>\\r\\n                            <td id=\\\"m-infocoordinates-coordY\\\" colspan=\\\"2\\\">--</td>\\r\\n                        </tr>\\r\\n                        <tr tabindex=\\\"0\\\">\\r\\n                            <td>{{translations.altitude}}</td>\\r\\n                            <td id=\\\"m-infocoordinates-altitude\\\" colspan=\\\"2\\\">--</td>\\r\\n                        </tr>\\r\\n                    </tbody>\\r\\n                </table>\\r\\n            </div>\\r\\n            <div class=\\\"m-infocoordinates-div-buttonRemoveAllPoints noDisplay\\\">\\r\\n                <button type=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"icon-bin2\\\" id=\\\"m-infocoordinates-buttonRemoveAllPoints\\\" title=\\\"{{translations.removeAllPoints}}\\\"></button>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"m-infocoordinates-div-buttonImportAllPoints noDisplay\\\">\\r\\n                <button type=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"icon-file\\\" id=\\\"m-infocoordinates-buttonImportAllPoints\\\" title=\\\"{{translations.importAllPoints}}\\\"></button>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"m-infocoordinates-div-buttonCopyAllPoints noDisplay\\\">\\r\\n                <button type=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"icon-copy\\\" id=\\\"m-infocoordinates-buttonCopyAllPoints\\\" title=\\\"{{translations.copyAllPoints}}\\\"></button>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"m-infocoordinates-div-buttonDisplayAllPoints noDisplay\\\">\\r\\n                <button type=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"icon-displayON\\\" id=\\\"m-infocoordinates-buttonDisplayAllPoints\\\" title=\\\"{{translations.displayONAllPoints}}\\\"></button>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n</div>\";","/* eslint-disable no-console */\r\n/**\r\n * @module M/impl/control/InfocoordinatesControl\r\n */\r\nexport default class InfocoordinatesControl extends M.impl.Control {\r\n  /**\r\n   * This function adds the control to the specified map\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.Map} map to add the plugin\r\n   * @param {HTMLElement} html of the plugin\r\n   * @api stable\r\n   */\r\n  addTo(map, html) {\r\n    this.facadeMap_ = map;\r\n    super.addTo(map, html);\r\n  }\r\n\r\n  getCoordinates(feature, SRStarget, formatGMS, decimalGEOcoord, decimalUTMcoord) {\r\n    const NODATA = '--';\r\n    let numPoint = feature.getId();\r\n    let coordinatesFeature = feature.getAttribute('coordinates');\r\n    let SRSfeature = feature.getAttribute('EPSGcode');\r\n    let coordinatesGEOoutput = ol.proj.transform(coordinatesFeature, SRSfeature, 'EPSG:4326');\r\n    const datum = this.datumCalc(SRStarget);\r\n    let res = {\r\n      'NumPoint': numPoint,\r\n      'projectionGEO': {\r\n        'code': NODATA,\r\n        'coordinatesGEO': {\r\n          'longitude': NODATA,\r\n          'latitude': NODATA,\r\n        },\r\n      },\r\n      'projectionUTM': {\r\n        'code': NODATA,\r\n        'datum': NODATA,\r\n        'coordinatesUTM': {\r\n          'coordX': NODATA,\r\n          'coordY': NODATA\r\n        }\r\n      }\r\n    };\r\n\r\n    if (SRStarget != null) {\r\n      let coordinatesUTMoutput = ol.proj.transform(coordinatesFeature, SRSfeature, SRStarget);\r\n      res = {\r\n        'NumPoint': numPoint,\r\n        'projectionGEO': {\r\n          'code': SRStarget,\r\n          'coordinatesGEO': {\r\n            'longitude': coordinatesGEOoutput[0].toFixed(decimalGEOcoord),\r\n            'latitude': coordinatesGEOoutput[1].toFixed(decimalGEOcoord),\r\n          },\r\n        },\r\n        'projectionUTM': {\r\n          'code': SRStarget,\r\n          'datum': datum,\r\n          'coordinatesUTM': {\r\n            'coordX': coordinatesUTMoutput[0].toFixed(decimalUTMcoord),\r\n            'coordY': coordinatesUTMoutput[1].toFixed(decimalUTMcoord)\r\n          }\r\n        }\r\n      }\r\n\r\n      if (formatGMS == true) {\r\n        let coordinateGGMMSS = ol.coordinate.toStringHDMS(coordinatesGEOoutput, 2);\r\n        res.projectionGEO.coordinatesGEO.latitude = coordinateGGMMSS.substr(0, 17);\r\n        res.projectionGEO.coordinatesGEO.longitude = coordinateGGMMSS.substr(17);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n\r\n  datumCalc(srs) {\r\n    let datum = 'ETRS89';\r\n    if (srs.indexOf('3857') > -1) {\r\n      datum = 'WGS84';\r\n    } else if (srs.indexOf('4083') > -1) {\r\n      datum = 'REGCAN95';\r\n    }\r\n\r\n    return datum;\r\n  }\r\n\r\n  readAltitudeFromWCSservice(coord, srcMapa) {\r\n    // 1.- transformo las coordenadas a EPSG4258 ya que el servicio WCS es en ese srs\r\n    let coordinatesEPSG4528 = ol.proj.transform(coord, srcMapa, 'EPSG:4258')\r\n\r\n    // 2.- me genero un bbox de las coordenadas\r\n    let bbox = [\r\n      [coordinatesEPSG4528[0], coordinatesEPSG4528[1]],\r\n      [coordinatesEPSG4528[0] + 0.000001, coordinatesEPSG4528[1] + 0.000001]\r\n    ]\r\n\r\n    // 3.- lanzo el servicio y el método devolverá un texto que lo recogerá una promesa\r\n    const PROFILE_URL = 'https://servicios.idee.es/wcs-inspire/mdt?request=GetCoverage&bbox=';\r\n    const PROFILE_URL_SUFFIX = '&service=WCS&version=1.0.0&coverage=Elevacion4258_5&' +\r\n      'interpolationMethod=bilinear&crs=EPSG%3A4258&format=ArcGrid&width=2&height=2';\r\n    const url = `${PROFILE_URL}${bbox}${PROFILE_URL_SUFFIX}`;\r\n    return M.remote.get(url)\r\n  }\r\n\r\n  transform(box, code, currProj) {\r\n    return ol.proj.transform(box, code, currProj);\r\n  }\r\n\r\n  transformExt(box, code, currProj) {\r\n    return ol.proj.transformExtent(box, code, currProj);\r\n  }\r\n\r\n  activateClick(map) {\r\n    // desactivo el zoom al dobleclick\r\n    this.dblClickInteraction_.setActive(false);\r\n\r\n    // añado un listener al evento dblclick\r\n    const olMap = map.getMapImpl();\r\n    olMap.on('dblclick', (evt) => {\r\n      // disparo un custom event con las coordenadas del dobleclick\r\n      const customEvt = new CustomEvent('mapclicked', {\r\n        detail: evt.coordinate,\r\n        bubbles: true,\r\n      });\r\n      map.getContainer().dispatchEvent(customEvt);\r\n    });\r\n  }\r\n\r\n  deactivateClick(map) {\r\n    // activo el zoom al dobleclick\r\n    this.dblClickInteraction_.setActive(true);\r\n\r\n    // elimino el listener del evento\r\n    map.getMapImpl().removeEventListener('dblclick');\r\n  }\r\n}\r\n","import en from './en';\nimport es from './es';\n\n/**\n * Default object with es and en translate.\n *\n * @const\n * @type {object}\n */\nconst translations = {\n  en,\n  es,\n};\n\nconst getLang = () => {\n  let res = 'es';\n  if (typeof M.language.getLang === 'function') {\n    res = M.language.getLang();\n  }\n\n  return res;\n};\n\n/**\n * This function sets a new language translate.\n * @param {string} lang\n * @param {JSON} json\n * @public\n * @api\n */\nexport const addTranslation = (lang, json) => {\n  translations[lang] = json;\n};\n\n/**\n * This function gets a language translate.\n *\n * @param {string} lang\n * @return {JSON}\n * @public\n * @api\n */\nexport const getTranslation = (lang) => {\n  if (lang === 'es' || lang === 'en') {\n    return translations[lang];\n  }\n  return M.language.getTranslation(lang).infocoordinates;\n};\n\n/**\n * This function gets a language value from key\n *\n * @public\n * @param {string}\n * @param {string}\n * @return {string}\n * @public\n * @api\n */\n\nexport const getValue = (keyPath, lang = getLang()) => {\n  const translation = getTranslation(lang);\n  let value = '';\n  if (M.utils.isNullOrEmpty(translation)) {\n    /* eslint-disable no-console */\n    console.warn(`The translation '${lang}' has not been defined.`);\n  } else {\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\n  }\n\n  return value;\n};\n","/**\r\n * @module M/control/InfocoordinatesControl\r\n */\r\nimport InfocoordinatesImplControl from 'impl/infocoordinatescontrol';\r\nimport template from 'templates/infocoordinates';\r\nimport { getValue } from './i18n/language';\r\n\r\nconst NO_DATA_VALUE = 'NODATA_value -9999.000';\r\n\r\nexport default class InfocoordinatesControl extends M.Control {\r\n  /**\r\n   * @classdesc\r\n   * Main constructor of the class. Creates a PluginControl\r\n   * control\r\n   *\r\n   * @constructor\r\n   * @extends {M.Control}\r\n   * @api stable\r\n   */\r\n  constructor(decimalGEOcoord, decimalUTMcoord, helpUrl, order, outputDownloadFormat) {\r\n\r\n    // 1. checks if the implementation can create PluginControl\r\n    if (M.utils.isUndefined(InfocoordinatesImplControl)) {\r\n      M.exception(getValue('expection.impl'));\r\n    }\r\n    // 2. implementation of this control\r\n    const impl = new InfocoordinatesImplControl();\r\n    super(impl, 'Infocoordinates');\r\n    this.map_ = null;\r\n    this.numTabs = 0;\r\n    this.layerFeatures = new M.layer.Vector();\r\n    this.layerFeatures.name = 'infocoordinatesLayerFeatures';\r\n    this.layerFeatures.displayInLayerSwitcher = false;\r\n    this.decimalGEOcoord = decimalGEOcoord;\r\n    this.decimalUTMcoord = decimalUTMcoord;\r\n    this.helpUrl = helpUrl;\r\n    this.clickedDeactivate = false;\r\n    this.order = order;\r\n    this.outputDownloadFormat = outputDownloadFormat;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * This function creates the view\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.Map} map to add the control\r\n   * @api stable\r\n   */\r\n  createView(map) {\r\n    this.map_ = map;\r\n    if (!M.template.compileSync) { // JGL: retrocompatibilidad Mapea4\r\n      M.template.compileSync = (string, options) => {\r\n        let templateCompiled;\r\n        let templateVars = {};\r\n        let parseToHtml;\r\n        if (!M.utils.isUndefined(options)) {\r\n          templateVars = M.utils.extends(templateVars, options.vars);\r\n          parseToHtml = options.parseToHtml;\r\n        }\r\n        const templateFn = Handlebars.compile(string);\r\n        const htmlText = templateFn(templateVars);\r\n        if (parseToHtml !== false) {\r\n          templateCompiled = M.utils.stringToHtml(htmlText);\r\n        } else {\r\n          templateCompiled = htmlText;\r\n        }\r\n        return templateCompiled;\r\n      };\r\n    }\r\n\r\n    return new Promise((success, fail) => {\r\n      let options = {\r\n        jsonp: true,\r\n        vars: {\r\n          hasHelp: this.helpUrl !== undefined && M.utils.isUrl(this.helpUrl),\r\n          helpUrl: this.helpUrl,\r\n          translations: {\r\n            title: getValue('title'),\r\n            point: getValue('point'),\r\n            datum: getValue('datum'),\r\n            latitude: getValue('latitude'),\r\n            longitude: getValue('longitude'),\r\n            formatCoordinates: getValue('formatCoordinates'),\r\n            coordX: getValue('coordX'),\r\n            coordY: getValue('coordY'),\r\n            altitude: getValue('altitude'),\r\n            removePoint: getValue('removePoint'),\r\n            removeAllPoints: getValue('removeAllPoints'),\r\n            importAllPoints: getValue('importAllPoints'),\r\n            copyLatLon: getValue('copyLatLon'),\r\n            copyxy: getValue('copyxy'),\r\n            copyAllPoints: getValue('copyAllPoints'),\r\n            displayONAllPoints: getValue('displayONAllPoints'),\r\n            displayOFFAllPoints: getValue('displayOFFAllPoints')\r\n          }\r\n        }\r\n      };\r\n      const html = M.template.compileSync(template, options);\r\n      // Añadir código dependiente del DOM\r\n      this.accessibilityTab(html);\r\n\r\n      this.map_.addLayers(this.layerFeatures);\r\n      this.panel_.on(M.evt.SHOW, this.activate, this);\r\n      this.panel_.on(M.evt.HIDE, this.deactivate, this);\r\n\r\n      success(html);\r\n      html.querySelector('#m-infocoordinates-buttonRemoveAllPoints').addEventListener('click', this.removeAllPoints.bind(this));\r\n      html.querySelector('#m-infocoordinates-buttonImportAllPoints').addEventListener('click', this.importAllPoints.bind(this));\r\n      html.querySelector('#m-infocoordinates-buttonCopyAllPoints').addEventListener('click', this.copyAllPoints.bind(this));\r\n      html.querySelector('#m-infocoordinates-buttonDisplayAllPoints').addEventListener('click', this.displayAllPoints.bind(this));\r\n      html.querySelector('#m-infocoordinates-comboDatum').addEventListener('change', this.changeSelectSRSorChangeFormat.bind(this));\r\n      html.querySelector('#m-infocoordinates-buttonConversorFormat').addEventListener('change', this.changeSelectSRSorChangeFormat.bind(this));\r\n      html.querySelector('#m-infocoordinates-buttonRemovePoint').addEventListener('click', this.removePoint.bind(this));\r\n      html.querySelector('#m-infocoordinates-copylatlon').addEventListener('click', this.copylatlon.bind(this));\r\n      html.querySelector('#m-infocoordinates-copyxy').addEventListener('click', this.copyxy.bind(this));\r\n    });\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * This function is called on the control activation\r\n   *\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   */\r\n  activate() {\r\n    this.invokeEscKey();\r\n    this.map_.on(M.evt.CLICK, this.addPoint, this);\r\n    document.body.style.cursor = 'crosshair';\r\n    this.map_.getFeatureHandler().deactivate();\r\n    document.addEventListener('keyup', this.checkEscKey.bind(this));\r\n    if (this.clickedDeactivate) {\r\n      document.querySelector('div.m-panel.m-plugin-infocoordinates > button').click();\r\n    }\r\n  }\r\n\r\n  checkEscKey(evt) {\r\n    const opened = document.querySelector('div.m-panel.m-plugin-infocoordinates').classList.contains('opened');\r\n    if (evt.key === 'Escape' && opened) {\r\n      document.querySelector('div.m-panel.m-plugin-infocoordinates.opened > button').click();\r\n      document.removeEventListener('keyup', this.checkEscKey);\r\n    }\r\n  }\r\n\r\n  invokeEscKey() {\r\n    try {\r\n      document.dispatchEvent(new window.KeyboardEvent('keyup', {\r\n        key: 'Escape',\r\n        keyCode: 27,\r\n        code: '',\r\n        which: 69,\r\n        shiftKey: false,\r\n        ctrlKey: false,\r\n        metaKey: false,\r\n      }));\r\n    } catch (err) {\r\n      /* eslint-disable no-console */\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This function is called on the control deactivation\r\n   *\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   */\r\n  deactivate() {\r\n    this.clickedDeactivate = true;\r\n    this.map_.un(M.evt.CLICK, this.addPoint, this);\r\n    document.body.style.cursor = 'default';\r\n    this.map_.getFeatureHandler().activate();\r\n  }\r\n\r\n\r\n\r\n  addPoint(evt) {\r\n    let numPoint = this.numTabs + 1;\r\n    document.getElementById('m-infocoordinates-comboDatum').removeAttribute('disabled');\r\n    document.getElementById('m-infocoordinates-buttonConversorFormat').removeAttribute('disabled');\r\n    document.getElementById('m-infocoordinates-buttonRemovePoint').classList.remove('noDisplay');\r\n    document.getElementById('m-infocoordinates-copylatlon').classList.remove('noDisplay');\r\n    document.getElementById('m-infocoordinates-copyxy').classList.remove('noDisplay');\r\n    document.getElementsByClassName('m-infocoordinates-div-buttonRemoveAllPoints')[0].classList.remove('noDisplay');\r\n    document.getElementsByClassName('m-infocoordinates-div-buttonImportAllPoints')[0].classList.remove('noDisplay');\r\n    document.getElementsByClassName('m-infocoordinates-div-buttonCopyAllPoints')[0].classList.remove('noDisplay');\r\n    document.getElementsByClassName('m-infocoordinates-div-buttonDisplayAllPoints')[0].classList.remove('noDisplay');\r\n\r\n    // Eliminamos las etiquetas de los puntos\r\n    if (document.getElementsByClassName('icon-displayON').length === 0 && this.map_.getMapImpl().getOverlays().array_.length > 0) {\r\n      this.removeAllDisplaysPoints();\r\n    }\r\n\r\n\r\n    // Agrego la tab que es un botón con el número de punto\r\n    let tabsDiv = document.getElementsByClassName('m-infocoordinates-tabs')[0];\r\n    let buttonTab = document.createElement('button');\r\n    let buttonTabText = document.createTextNode(numPoint);\r\n    buttonTab.appendChild(buttonTabText);\r\n    buttonTab.classList.add('tablinks');\r\n    buttonTab.setAttribute('id', `tablink${numPoint}`);\r\n    buttonTab.setAttribute('tabindex', '0');\r\n    buttonTab.setAttribute('type', 'button');\r\n    tabsDiv.appendChild(buttonTab);\r\n\r\n    // cojo las coordenadas del punto pinchado\r\n    let coordinates = evt.coord;\r\n\r\n    //Agrego la feature\r\n    let featurePoint = new M.Feature(numPoint, {\r\n      \"type\": \"Feature\",\r\n      \"id\": numPoint,\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": [coordinates[0], coordinates[1]]\r\n      },\r\n      \"properties\": {\r\n        \"EPSGcode\": this.map_.getProjection().code,\r\n        \"coordinates\": [coordinates[0], coordinates[1]]\r\n      }\r\n\r\n    });\r\n\r\n    // Ubico el scroller centrado en el ultimo botón añadido\r\n    tabsDiv.scrollTop = tabsDiv.scrollHeight;\r\n\r\n    //Altura\r\n    let altitudeFromWCSservice;\r\n    let altitudeBox = document.getElementById('m-infocoordinates-altitude');\r\n    M.proxy(false);\r\n    let promesa = new Promise((success, fail) => {\r\n      altitudeBox.innerHTML = getValue('readingAltitude');\r\n      altitudeFromWCSservice = this.getImpl().readAltitudeFromWCSservice(coordinates, this.map_.getProjection().code);\r\n      success(altitudeFromWCSservice);\r\n    });\r\n\r\n    promesa.then(response => {\r\n      const responseText = response.text.split(NO_DATA_VALUE).join('');\r\n      altitudeFromWCSservice = responseText.split(/\\n/)[5].split(' ')[1];\r\n      if (altitudeFromWCSservice == undefined) {\r\n        altitudeFromWCSservice = getValue('noDatafromWCS');\r\n      }\r\n      featurePoint.setAttribute('Altitude', altitudeFromWCSservice);\r\n      altitudeBox.innerHTML = `${parseFloat(altitudeFromWCSservice).toFixed(2)}`.replace('.', ',');\r\n      buttonTab.addEventListener('click', () => this.openTabFromTab(numPoint));\r\n    })\r\n\r\n    M.proxy(true);\r\n    this.layerFeatures.addFeatures([featurePoint]);\r\n    this.layerFeatures.setZIndex(999);\r\n    this.openTab(numPoint)\r\n    this.numTabs = numPoint;\r\n  }\r\n\r\n  activateSelection() {\r\n    const olMap = this.facadeMap_.getMapImpl();\r\n    const facadeControl = this.facadeControl;\r\n    const drawingLayer = facadeControl.drawLayer.getImpl().getOL3Layer();\r\n\r\n    this.facadeControl.hideTextPoint();\r\n\r\n    if (document.querySelector('.m-geometrydraw>#downloadFormat') !== null) {\r\n      document.querySelector('.m-geometrydraw').removeChild(facadeControl.downloadingTemplate);\r\n    }\r\n\r\n    if (drawingLayer) {\r\n      this.select = new ol.interaction.Select({\r\n        wrapX: false,\r\n        layers: [drawingLayer],\r\n      });\r\n\r\n      this.select.on('select', (e) => {\r\n        if (e.target.getFeatures().getArray().length > 0) {\r\n          this.facadeControl.onSelect(e);\r\n        }\r\n      });\r\n\r\n      olMap.addInteraction(this.select);\r\n\r\n      this.edit = new ol.interaction.Modify({ features: this.select.getFeatures() });\r\n      this.edit.on('modifyend', (evt) => {\r\n        this.facadeControl.onModify();\r\n      });\r\n      olMap.addInteraction(this.edit);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  selectFeature(numPoint) {\r\n    this.point = new M.style.Point({\r\n      icon: {\r\n        form: M.style.form.NONE,\r\n        class: '+',\r\n        fontsize: 1.5,\r\n        radius: 10,\r\n        color: 'black',\r\n        fill: 'white',\r\n      },\r\n    });\r\n\r\n    this.pointDisable = new M.style.Point({\r\n      radius: 5,\r\n      icon: {\r\n        form: 'none',\r\n        class: '+',\r\n        radius: 15,\r\n        rotation: 0,\r\n        rotate: false,\r\n        offset: [0, 0],\r\n        color: '#2690e7',\r\n        opacity: 1,\r\n        stroke: {\r\n          width: 20\r\n        }\r\n      },\r\n    });\r\n\r\n    // Calculamos el número de elementos de numPoints que hay\r\n    const countPoints = document.getElementsByClassName('contenedorPunto').length + document.getElementsByClassName('contenedorPuntoSelect').length;\r\n    // Si el numPoint que se pasa es mayor que la cantidad de numPoints que existe, quiere decir que es nuevo, se añade.\r\n    // En el caso de que no sea nuevo, se modifica el estilo del punto.\r\n    if (numPoint > countPoints) {\r\n      this.displayPoint(numPoint);\r\n    } else if (numPoint === countPoints) {\r\n      document.querySelectorAll('.contenedorPunto').forEach((elem) => {\r\n        if (parseInt(elem.textContent, 10) === numPoint) {\r\n          elem.classList.replace('contenedorPunto', 'contenedorPuntoSelect');\r\n        }\r\n      });\r\n\r\n      // Eliminamos las etiquetas de los puntos\r\n      if (document.getElementsByClassName('icon-displayON').length === 0 && this.map_.getMapImpl().getOverlays().array_.length > 0) {\r\n        this.removeAllDisplaysPoints();\r\n      }\r\n    } else {\r\n      document.getElementsByClassName('contenedorPuntoSelect')[0].classList.replace('contenedorPuntoSelect', 'contenedorPunto');\r\n      try {\r\n        document.getElementsByClassName('contenedorPunto')[document.getElementsByClassName('contenedorPunto').length - numPoint].classList.replace('contenedorPunto', 'contenedorPuntoSelect');\r\n        /* eslint-disable no-empty */\r\n      } catch (err) {}\r\n\r\n      // Eliminamos las etiquetas de los puntos\r\n      if (document.getElementsByClassName('icon-displayON').length === 0 && this.map_.getMapImpl().getOverlays().array_.length > 0) {\r\n        this.removeAllDisplaysPoints();\r\n      }\r\n    }\r\n\r\n    this.layerFeatures.getFeatures().map((elemento) => (elemento.setStyle(this.pointDisable)));\r\n    let featureSelected = this.layerFeatures.getFeatureById(numPoint);\r\n    featureSelected.setStyle(this.point);\r\n  }\r\n\r\n  displayPoint(numPoint) {\r\n    var pos = this.layerFeatures.impl_.features_[numPoint - 1].impl_.olFeature_.values_.coordinates;\r\n\r\n    // Modificamos el color del estilo de los puntos anteriores.\r\n    if (numPoint > 1) {\r\n      document.getElementsByClassName('contenedorPuntoSelect')[0].classList.replace('contenedorPuntoSelect', 'contenedorPunto');\r\n    }\r\n\r\n    const textHTML = `<div class=\"contenedorPuntoSelect\">\r\n                <table>\r\n                    <tbody>\r\n                      <tr>\r\n                        <td style=\"font-weight: bold; font-family: arial;\">${numPoint}</td></b>\r\n                      </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n          </div>\r\n      </div>`\r\n\r\n    const helpTooltipElement = M.template.compileSync(textHTML, {\r\n      jsonp: true,\r\n      vars: {\r\n        translations: getValue('text'),\r\n      },\r\n    });\r\n\r\n    this.helpTooltip_ = new ol.Overlay({\r\n      element: helpTooltipElement,\r\n      offset: [10, -5],\r\n    });\r\n\r\n    this.helpTooltip_.setPosition(pos);\r\n    this.map_.getMapImpl().addOverlay(this.helpTooltip_);\r\n  }\r\n\r\n\r\n  activateTab(numPoint) {\r\n    let allTabsLinks = document.getElementsByClassName('tablinks');\r\n    for (let i = 0; i < allTabsLinks.length; i++) {\r\n      allTabsLinks[i].classList.remove('active')\r\n    }\r\n    let idBotonTab = document.getElementById(`tablink${numPoint}`);\r\n    idBotonTab.classList.add('active');\r\n  }\r\n\r\n  changeSelectSRSorChangeFormat() {\r\n    // Cojo la tab activa\r\n    const elem = document.querySelector('.tablinks.active');\r\n    if (elem !== null) {\r\n      let numPoint = parseInt(elem.textContent);\r\n      this.displayXYcoordinates(numPoint);\r\n    }\r\n  }\r\n\r\n  displayXYcoordinates(numPoint) {\r\n    let featureSelected = this.layerFeatures.getFeatureById(numPoint);\r\n\r\n    //Capturo los elementos\r\n    let pointBox = document.getElementById('m-infocoordinates-point');\r\n    let latitudeBox = document.getElementById('m-infocoordinates-latitude');\r\n    let longitudeBox = document.getElementById('m-infocoordinates-longitude');\r\n    let datumBox = document.getElementById('m-infocoordinates-datum');\r\n    let coordX = document.getElementById('m-infocoordinates-coordX');\r\n    let coordY = document.getElementById('m-infocoordinates-coordY');\r\n\r\n    //Cojo el srs seleccionado en el select\r\n    let selectSRS = document.getElementById('m-infocoordinates-comboDatum').value;\r\n\r\n    //Cojo el formato de las coordenadas geográficas\r\n    let formatGMS = document.getElementById('m-infocoordinates-buttonConversorFormat').checked;\r\n\r\n    //Cambio coordenadas y calculo las UTM\r\n    let pointDataOutput = this.getImpl().getCoordinates(featureSelected, selectSRS, formatGMS, this.decimalGEOcoord, this.decimalUTMcoord);\r\n\r\n    // pinto\r\n    pointBox.innerHTML = pointDataOutput.NumPoint;\r\n    latitudeBox.innerHTML = `${pointDataOutput.projectionGEO.coordinatesGEO.latitude}`.replace('.', ',');\r\n    longitudeBox.innerHTML = `${pointDataOutput.projectionGEO.coordinatesGEO.longitude}`.replace('.', ',');\r\n    datumBox.innerHTML = pointDataOutput.projectionUTM.datum;\r\n    coordX.innerHTML = this.formatUTMCoordinate(pointDataOutput.projectionUTM.coordinatesUTM.coordX);\r\n    coordY.innerHTML = this.formatUTMCoordinate(pointDataOutput.projectionUTM.coordinatesUTM.coordY);\r\n  }\r\n\r\n  displayZcoordinate(numPoint) {\r\n    let featureSelected = this.layerFeatures.getFeatureById(numPoint);\r\n    let altitudeBox = document.getElementById('m-infocoordinates-altitude');\r\n    altitudeBox.innerHTML = `${parseFloat(featureSelected.getAttribute('Altitude')).toFixed(2)}`.replace('.', ',');\r\n  }\r\n\r\n  openTab(numPoint) {\r\n    this.selectFeature(numPoint);\r\n    this.activateTab(numPoint);\r\n    this.displayXYcoordinates(numPoint);\r\n  }\r\n\r\n  openTabFromTab(numPoint) {\r\n    this.selectFeature(numPoint);\r\n    this.activateTab(numPoint);\r\n    this.displayXYcoordinates(numPoint);\r\n    this.displayZcoordinate(numPoint);\r\n  }\r\n\r\n  removePoint() {\r\n    if (document.getElementsByClassName('tablinks').length > 1) {\r\n      const totalTabs = document.getElementsByClassName('m-infocoordinates-tabs')[0].children.length;\r\n      let tablinkActive = document.querySelector('.tablinks.active');\r\n      let numPoint = tablinkActive.textContent;\r\n      //Elimina tab\r\n      tablinkActive.parentNode.removeChild(tablinkActive);\r\n      // elimina la feature\r\n      let featureSelect = this.layerFeatures.getFeatureById(parseInt(numPoint));\r\n      this.layerFeatures.removeFeatures(featureSelect);\r\n      this.layerFeatures.getFeatures().forEach((f) => {\r\n        if (f.getId() > numPoint) {\r\n          f.setId(f.getId() - 1);\r\n        }\r\n      });\r\n\r\n      for (let i = (numPoint - 1); i < (totalTabs - 1); i += 1) {\r\n        const elem = document.getElementById(`tablink${i + 2}`);\r\n        const value = parseInt(elem.innerHTML, 10);\r\n        elem.setAttribute('id', `tablink${value - 1}`);\r\n        elem.innerHTML = (value - 1);\r\n      }\r\n\r\n      document.querySelector('.contenedorPuntoSelect').parentNode.remove();\r\n      document.querySelectorAll('.contenedorPunto').forEach((elem) => {\r\n        if (parseInt(elem.textContent.trim(), 10) > numPoint) {\r\n          const value = parseInt(elem.querySelector('td').innerHTML, 10);\r\n          elem.querySelector('td').innerHTML = (value - 1);\r\n        }\r\n      });\r\n\r\n      //mostrar otro punto, muestro el último punto y lo activo\r\n      let lastTablink = document.getElementsByClassName('m-infocoordinates-tabs')[0].lastChild;\r\n      lastTablink.classList.add('active');\r\n      this.numTabs = this.numTabs - 1;\r\n      this.openTabFromTab(parseInt(lastTablink.textContent));\r\n    } else {\r\n      this.removeAllPoints();\r\n    }\r\n  }\r\n\r\n  copylatlon() {\r\n    const lat = document.getElementById('m-infocoordinates-latitude').innerHTML.replace(',', '.');\r\n    const long = document.getElementById('m-infocoordinates-longitude').innerHTML.replace(',', '.');\r\n    const alt = document.getElementById('m-infocoordinates-altitude').innerHTML.replace(',', '.');\r\n    let proj = document.getElementById('m-infocoordinates-comboDatum').value;\r\n    if (proj.indexOf('25829') > -1 || proj.indexOf('25830') > -1 || proj.indexOf('25831') > -1) {\r\n      proj = 'EPSG:4258';\r\n    } else {\r\n      proj = 'EPSG:4326';\r\n    }\r\n    const result = `${long},${lat},${alt},${proj}`;\r\n    navigator.clipboard.writeText(result);\r\n    M.toast.success(getValue('clipboard'));\r\n  }\r\n\r\n  copyxy() {\r\n    const x = document.getElementById('m-infocoordinates-coordX').innerHTML.replaceAll('.', '').replace(',', '.');\r\n    const y = document.getElementById('m-infocoordinates-coordY').innerHTML.replaceAll('.', '').replace(',', '.');\r\n    const alt = document.getElementById('m-infocoordinates-altitude').innerHTML.replaceAll('.', '').replace(',', '.');\r\n    const proj = document.getElementById('m-infocoordinates-comboDatum').value;\r\n    const result = `${x},${y},${alt},${proj}`;\r\n    navigator.clipboard.writeText(result);\r\n    M.toast.success(getValue('clipboard'));\r\n  }\r\n\r\n  copyAllPoints() {\r\n    let printDocument = getValue('point').replace(':', '') + ',Long,Lat,Alt,EPSG,X,Y,Alt,EPSG' + '\\n';\r\n    for (let i = 0; i < this.layerFeatures.impl_.features_.length; i += 1) {\r\n      let featureSelected = this.layerFeatures.impl_.features_[i];\r\n      const alt = featureSelected.getAttributes().Altitude !== undefined ? parseFloat(featureSelected.getAttributes().Altitude) : '-';\r\n\r\n      //Cojo el srs seleccionado en el select\r\n      let selectSRS = document.getElementById('m-infocoordinates-comboDatum').value;\r\n\r\n      //Cojo el formato de las coordenadas geográficas\r\n      let formatGMS = document.getElementById('m-infocoordinates-buttonConversorFormat').checked;\r\n\r\n      //Cambio coordenadas y calculo las UTM\r\n      let pointDataOutput = this.getImpl().getCoordinates(featureSelected, selectSRS, formatGMS, this.decimalGEOcoord, this.decimalUTMcoord);\r\n      const proj = pointDataOutput.projectionUTM.code;\r\n\r\n      let coordinatesGEO = [\r\n        pointDataOutput.projectionGEO.coordinatesGEO.longitude,\r\n        pointDataOutput.projectionGEO.coordinatesGEO.latitude\r\n      ];\r\n\r\n      let coordinatesUTM = [\r\n        pointDataOutput.projectionUTM.coordinatesUTM.coordX,\r\n        pointDataOutput.projectionUTM.coordinatesUTM.coordY\r\n      ];\r\n\r\n      let projection;\r\n      if (proj.indexOf('25829') > -1 || proj.indexOf('25830') > -1 || proj.indexOf('25831') > -1) {\r\n        projection = ',EPSG:4258';\r\n      } else {\r\n        projection = ',EPSG:4326';\r\n      }\r\n\r\n      const result = (i + 1) + ',' + coordinatesGEO + ',' + alt.toString() + projection.trim() + ',' + coordinatesUTM + ',' + alt.toString() + ',' + proj + '\\n';\r\n\r\n      printDocument = printDocument.concat(result);\r\n    }\r\n\r\n    navigator.clipboard.writeText(printDocument);\r\n    M.toast.success(getValue('clipboard'));\r\n  }\r\n\r\n  importAllPoints() {\r\n    let printDocument = [];\r\n    if (this.outputDownloadFormat === 'csv') {\r\n      printDocument.push(getValue('point').replace(':', '') + ',Long,Lat,Alt,EPSG,X,Y,Alt,EPSG' + '\\n');\r\n    }\r\n    for (let i = 0; i < this.layerFeatures.impl_.features_.length; i += 1) {\r\n      let featureSelected = this.layerFeatures.impl_.features_[i];\r\n      const alt = featureSelected.getAttributes().Altitude !== undefined ? parseFloat(featureSelected.getAttributes().Altitude) : '-';\r\n\r\n      //Cojo el srs seleccionado en el select\r\n      let selectSRS = document.getElementById('m-infocoordinates-comboDatum').value;\r\n\r\n      //Cojo el formato de las coordenadas geográficas\r\n      let formatGMS = document.getElementById('m-infocoordinates-buttonConversorFormat').checked;\r\n\r\n      //Cambio coordenadas y calculo las UTM\r\n      let pointDataOutput = this.getImpl().getCoordinates(featureSelected, selectSRS, formatGMS, this.decimalGEOcoord, this.decimalUTMcoord);\r\n      const proj = pointDataOutput.projectionUTM.code;\r\n\r\n      let coordinatesGEO = [\r\n        pointDataOutput.projectionGEO.coordinatesGEO.longitude,\r\n        pointDataOutput.projectionGEO.coordinatesGEO.latitude\r\n      ];\r\n\r\n      let coordinatesUTM = [\r\n        pointDataOutput.projectionUTM.coordinatesUTM.coordX,\r\n        pointDataOutput.projectionUTM.coordinatesUTM.coordY\r\n      ];\r\n\r\n      let projection = 'EPSG:4326: ';\r\n      if (proj.indexOf('25829') > -1 || proj.indexOf('25830') > -1 || proj.indexOf('25831') > -1) {\r\n        projection = 'EPSG:4258: ';\r\n      }\r\n\r\n      if (this.outputDownloadFormat === 'csv') {\r\n        printDocument.push((i + 1) + ',' + coordinatesGEO + ',' + alt.toString() + ',' + projection.trim().slice(0, -1) + ',' + coordinatesUTM + ',' + alt.toString() + ',' + proj + '\\n');\r\n      } else {\r\n        printDocument.push(getValue('point').replace(':', ' ') + (i + 1) + ': ' + '\\n');\r\n        printDocument.push(projection);\r\n\r\n        printDocument.push('[' + coordinatesGEO + ',' + alt + ']' + '\\n');\r\n        printDocument.push(proj + ': ');\r\n        printDocument.push('[' + coordinatesUTM + ',' + alt + ']' + '\\n');\r\n      }\r\n    }\r\n\r\n    const toBlobType = new Blob(printDocument, {\r\n      type: this.outputDownloadFormat === 'csv' ? 'csv' : 'text/plain'\r\n    })\r\n    const f = new Date();\r\n    const titulo = 'mapa_'.concat(f.getFullYear(), '-', f.getMonth() + 1, '-', f.getDay() + 1, '_', f.getHours(), f.getMinutes(), f.getSeconds());\r\n\r\n    this.descargarArchivo(toBlobType, titulo.concat(`.${this.outputDownloadFormat}`));\r\n  }\r\n\r\n  displayAllPoints() {\r\n    if (document.getElementsByClassName('icon-displayON').length === 0 && this.map_.getMapImpl().getOverlays().array_.length > 0) {\r\n      this.removeAllDisplaysPoints();\r\n    } else {\r\n      // Modificamos el icono\r\n      document.getElementsByClassName('icon-displayON')[0].classList.replace(\"icon-displayON\", \"icon-displayOFF\")\r\n      document.getElementsByClassName('icon-displayOFF')[0].title = getValue(\"displayOFFAllPoints\")\r\n\r\n      // Eliminamos el num sobre el punto\r\n      for (let i = 0; i < document.getElementsByClassName('contenedorPunto').length; i += 1) {\r\n        document.getElementsByClassName('contenedorPunto')[i].style = 'display: none';\r\n      }\r\n      document.getElementsByClassName('contenedorPuntoSelect')[0].style = 'display: none'\r\n\r\n      // Creamos las etiquetas de los puntos\r\n      for (let i = 0; i < this.layerFeatures.impl_.features_.length; i += 1) {\r\n        const pos = this.layerFeatures.impl_.features_[i].impl_.olFeature_.values_.coordinates;\r\n        const varUTM = this.calculateUTMcoordinates(i + 1);\r\n        const altitude = `${parseFloat(this.layerFeatures.impl_.features_[i].impl_.olFeature_.values_.Altitude).toFixed(2)}`.replace('.', ',');\r\n        const textHTML = `<div class=\"m-popup m-collapsed\" style=\"padding: 5px 5px 5px 5px !important;background-color: rgba(255, 255, 255, 0.7) !important;\">\r\n              <div class=\"contenedorCoordPunto\">\r\n                <table>\r\n                    <tbody>\r\n                      <tr>\r\n                        <td style=\"font-weight: bold\">${getValue('point')} ${i+1}</td></b>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>X: ${this.formatUTMCoordinate(varUTM[0])}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Y: ${this.formatUTMCoordinate(varUTM[1])}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>${getValue('altitude')} ${altitude}</td>\r\n                      </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n          </div>\r\n          </div>\r\n      </div>`\r\n\r\n        const helpTooltipElement = M.template.compileSync(textHTML, {\r\n          jsonp: true,\r\n          vars: {\r\n            translations: getValue('text'),\r\n          },\r\n        });\r\n\r\n        this.helpTooltip_ = new ol.Overlay({\r\n          element: helpTooltipElement,\r\n          offset: [10, -5],\r\n        });\r\n\r\n        this.helpTooltip_.setPosition(pos);\r\n        this.map_.getMapImpl().addOverlay(this.helpTooltip_);\r\n      }\r\n    }\r\n  }\r\n\r\n  calculateUTMcoordinates(numPoint) {\r\n    let featureSelected = this.layerFeatures.getFeatureById(numPoint);\r\n    //Cojo el srs seleccionado en el select\r\n    let selectSRS = document.getElementById('m-infocoordinates-comboDatum').value;\r\n\r\n    //Cojo el formato de las coordenadas geográficas\r\n    let formatGMS = document.getElementById('m-infocoordinates-buttonConversorFormat').checked;\r\n\r\n    //Cambio coordenadas y calculo las UTM\r\n    let pointDataOutput = this.getImpl().getCoordinates(featureSelected, selectSRS, formatGMS, this.decimalGEOcoord, this.decimalUTMcoord);\r\n\r\n    return [pointDataOutput.projectionUTM.coordinatesUTM.coordX, pointDataOutput.projectionUTM.coordinatesUTM.coordY];\r\n  }\r\n\r\n  removeAllDisplaysPoints() {\r\n    // Modificamos el icono\r\n    document.getElementsByClassName('icon-displayOFF')[0].classList.replace(\"icon-displayOFF\", \"icon-displayON\");\r\n    document.getElementsByClassName('icon-displayON')[0].title = getValue(\"displayONAllPoints\");\r\n\r\n    // Mostramos el num sobre el punto\r\n    for (let i = 0; i < document.getElementsByClassName('contenedorPunto').length; i += 1) {\r\n      document.getElementsByClassName('contenedorPunto')[i].style = 'display: block';\r\n    }\r\n    document.getElementsByClassName('contenedorPuntoSelect')[0].style = 'display: block'\r\n\r\n\r\n    // Eliminamos todas las etiquetas de los puntos\r\n    const numOverlays = this.map_.getMapImpl().getOverlays().getArray().length;\r\n    for (let i = numOverlays - 1; i > -1; i -= 1) {\r\n      if (this.map_.getMapImpl().getOverlays().array_[i].options.element.className === 'm-popup m-collapsed') {\r\n        this.map_.getMapImpl().removeOverlay(this.map_.getMapImpl().getOverlays().getArray()[i]);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  descargarArchivo(contenidoEnBlob, nombreArchivo) {\r\n    var reader = new FileReader();\r\n    reader.onload = function(event) {\r\n      var save = document.createElement('a');\r\n      save.href = event.target.result;\r\n      save.target = '_blank';\r\n      save.download = nombreArchivo || 'archivo.dat';\r\n      var clicEvent = new MouseEvent('click', {\r\n        'view': window,\r\n        'bubbles': true,\r\n        'cancelable': true\r\n      });\r\n      save.dispatchEvent(clicEvent);\r\n      (window.URL || window.webkitURL).revokeObjectURL(save.href);\r\n    };\r\n    reader.readAsDataURL(contenidoEnBlob);\r\n  }\r\n\r\n  removeAllPoints() {\r\n    let divTabContainer = document.getElementsByClassName('m-infocoordinates-tabs')[0];\r\n    divTabContainer.innerHTML = '';\r\n\r\n    document.getElementById('m-infocoordinates-point').innerHTML = '--';\r\n    document.getElementById('m-infocoordinates-latitude').innerHTML = '--';\r\n    document.getElementById('m-infocoordinates-longitude').innerHTML = '--';\r\n    document.getElementById('m-infocoordinates-coordX').innerHTML = '--';\r\n    document.getElementById('m-infocoordinates-coordY').innerHTML = '--';\r\n    document.getElementById('m-infocoordinates-altitude').innerHTML = '--';\r\n\r\n    document.getElementById('m-infocoordinates-buttonRemovePoint').classList.add('noDisplay');\r\n    document.getElementById('m-infocoordinates-copylatlon').classList.add('noDisplay');\r\n    document.getElementById('m-infocoordinates-copyxy').classList.add('noDisplay');\r\n    document.getElementsByClassName('m-infocoordinates-div-buttonRemoveAllPoints')[0].classList.add('noDisplay');\r\n    document.getElementsByClassName('m-infocoordinates-div-buttonImportAllPoints')[0].classList.add('noDisplay');\r\n    document.getElementsByClassName('m-infocoordinates-div-buttonCopyAllPoints')[0].classList.add('noDisplay');\r\n    document.getElementsByClassName('m-infocoordinates-div-buttonDisplayAllPoints')[0].classList.add('noDisplay');\r\n    document.getElementById('m-infocoordinates-buttonConversorFormat').setAttribute('disabled', 'disabled');\r\n    // document.getElementById('m-infocoordinates-comboDatum').setAttribute('disabled', 'disabled');\r\n\r\n\r\n    //Elimino todas las features\r\n    this.layerFeatures.removeFeatures((this.layerFeatures.getFeatures()));\r\n\r\n    // Elimino todos los popups del mapa\r\n    const numOverlays = this.map_.getMapImpl().getOverlays().getArray().length;\r\n    for (let i = numOverlays - 1; i > -1; i -= 1) {\r\n      this.map_.getMapImpl().removeOverlay(this.map_.getMapImpl().getOverlays().getArray()[i]);\r\n    }\r\n\r\n    //Reseteo el contador de tabs\r\n    this.numTabs = 0;\r\n  }\r\n\r\n  /**\r\n   * This function compares controls\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.Control} control to compare\r\n   * @api stable\r\n   */\r\n  equals(control) {\r\n    return control instanceof InfocoordinatesControl;\r\n  }\r\n\r\n  removeLayerFeatures() {\r\n    this.map_.removeLayers(this.layerFeatures);\r\n  }\r\n\r\n  formatUTMCoordinate(coord) {\r\n    return coord.replace(/\\d(?=(\\d{3})+\\.)/g, '$&*').split('.').join(',').split('*').join('.');\r\n  }\r\n\r\n  accessibilityTab(html) {\r\n    html.querySelectorAll('[tabindex=\"0\"]').forEach(el => el.setAttribute('tabindex', this.order));\r\n  }\r\n}\r\n","/**\r\n * @module M/plugin/Infocoordinates\r\n */\r\nimport 'assets/css/fonts';\r\nimport 'assets/css/infocoordinates';\r\nimport InfocoordinatesControl from './infocoordinatescontrol';\r\nimport api from '../../api';\r\nimport { getValue } from './i18n/language';\r\n\r\nimport es from './i18n/es';\r\nimport en from './i18n/en';\r\n\r\nexport default class Infocoordinates extends M.Plugin {\r\n  /**\r\n   * @classdesc\r\n   * Main facade plugin object. This class creates a plugin\r\n   * object which has an implementation Object\r\n   *\r\n   * @constructor\r\n   * @extends {M.Plugin}\r\n   * @param {Object} impl implementation object\r\n   * @api stable\r\n   */\r\n  constructor(options = {}) {\r\n    super();\r\n    /**\r\n     * Facade of the map\r\n     * @private\r\n     * @type {M.Map}\r\n     */\r\n    this.map_ = null;\r\n\r\n    /**\r\n     *  Decimal digits fixed on geographic coordinates\r\n     * @public     *\r\n     * @type {int}\r\n     */\r\n    this.decimalGEOcoord_ = options.decimalGEOcoord || 4;\r\n\r\n    /**\r\n     *  Decimal digits fixed on projected coordinates\r\n     * @public     *\r\n     * @type {int}\r\n     */\r\n    this.decimalUTMcoord_ = options.decimalUTMcoord || 2;\r\n\r\n    /**\r\n     * Name plugin\r\n     * @private\r\n     * @type {String}\r\n     */\r\n    this.name_ = 'infocoordinates';\r\n\r\n    /**\r\n     * Array of controls\r\n     * @private\r\n     * @type {Array<M.Control>}\r\n     */\r\n    this.controls_ = [];\r\n\r\n    this.control_ = null;\r\n\r\n    /**\r\n     * Position of the Plugin\r\n     * @public\r\n     * Posible values: TR | TL | BL | BR\r\n     * @type {String}\r\n     */\r\n    const positions = ['TR', 'TL', 'BL', 'BR'];\r\n    this.position_ = positions.includes(options.position) ? options.position : 'TR';\r\n\r\n    /**\r\n     * Option to allow the plugin to be collapsed or not\r\n     * @private\r\n     * @type {Boolean}\r\n     */\r\n    this.collapsed_ = options.collapsed;\r\n    if (this.collapsed_ === undefined) this.collapsed_ = true;\r\n\r\n    /**\r\n     * Option to allow the plugin to be collapsible or not\r\n     * @private\r\n     * @type {Boolean}\r\n     */\r\n    this.collapsible_ = options.collapsible;\r\n    if (this.collapsible_ === undefined) this.collapsible_ = true;\r\n\r\n    /**\r\n     * Metadata from api.json\r\n     * @private\r\n     * @type {Object}\r\n     */\r\n    this.metadata_ = api.metadata;\r\n\r\n    /**\r\n     * URL to the help for the icon\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this.helpUrl_ = options.helpUrl || 'https://www.ign.es/';\r\n\r\n    /**\r\n     * Output Format\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this.outputDownloadFormat_ = options.outputDownloadFormat || 'txt';\r\n\r\n    /**\r\n     *@private\r\n     *@type { Number }\r\n     */\r\n    this.order = options.order >= -1 ? options.order : null;\r\n\r\n    /**\r\n     * Tooltip of the UI Plugin\r\n     *\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this.tooltip_ = options.tooltip || getValue('tooltip');\r\n\r\n    /**\r\n     * Plugin parameters\r\n     * @public\r\n     * @type {object}\r\n     */\r\n    this.options = options;\r\n  }\r\n\r\n  /**\r\n   * Return plugin language\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {string} lang type language\r\n   * @api stable\r\n   */\r\n  static getJSONTranslations(lang) {\r\n    if (lang === 'en' || lang === 'es') {\r\n      return (lang === 'en') ? en : es;\r\n    }\r\n    return M.language.getTranslation(lang).infocoordinates;\r\n  }\r\n\r\n  /**\r\n   * This function adds this plugin into the map\r\n   *\r\n   * @public\r\n   * @function\r\n   * @param {M.Map} map the map to add the plugin\r\n   * @api stable\r\n   */\r\n  addTo(map) {\r\n    this.control_ = new InfocoordinatesControl(this.decimalGEOcoord_, this.decimalUTMcoord_, this.helpUrl_, this.order, this.outputDownloadFormat_);\r\n    this.controls_.push(this.control_);\r\n    this.map_ = map;\r\n    // panel para agregar control - no obligatorio\r\n    this.panel_ = new M.ui.Panel('Infocoordinates', {\r\n      collapsed: this.collapsed_,\r\n      collapsible: this.collapsible_,\r\n      position: M.ui.position[this.position_],\r\n      className: 'm-plugin-infocoordinates',\r\n      collapsedButtonClass: 'icon-target',\r\n      tooltip: this.tooltip_,\r\n      order: this.order,\r\n    });\r\n    this.panel_.addControls(this.controls_);\r\n\r\n    map.addPanels(this.panel_);\r\n  }\r\n\r\n  /**\r\n   * This function destroys this plugin\r\n   *\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   */\r\n  destroy() {\r\n    this.map_.removeControls([this.control_]);\r\n    this.control_.deactivate();\r\n    this.control_.removeLayerFeatures();\r\n    [this.control_, this.panel_, this.map] = [null, null, null];\r\n  }\r\n\r\n  /**\r\n   * This function gets name plugin\r\n   * @getter\r\n   * @public\r\n   * @returns {string}\r\n   * @api stable\r\n   */\r\n  get name() {\r\n    return this.name_;\r\n  }\r\n\r\n  /**\r\n   * This function gets metadata plugin\r\n   *\r\n   * @public\r\n   * @function\r\n   * @api stable\r\n   */\r\n  getMetadata() {\r\n    return this.metadata_;\r\n  }\r\n\r\n  /**\r\n   * Get the API REST Parameters of the plugin\r\n   *\r\n   * @function\r\n   * @public\r\n   * @api\r\n   */\r\n  getAPIRest() {\r\n    return `${this.name}=${this.position_}*${this.collapsed_}*${this.collapsible_}*${this.tooltip_}*${this.decimalGEOcoord_}*${this.decimalUTMcoord_}*${this.helpUrl_}*${this.outputDownloadFormat_}`;\r\n  }\r\n\r\n  /**\r\n   * Gets the API REST Parameters in base64 of the plugin\r\n   *\r\n   * @function\r\n   * @public\r\n   * @api\r\n   */\r\n  getAPIRestBase64() {\r\n    return `${this.name}=base64=${M.utils.encodeBase64(this.options)}`;\r\n  }\r\n}\r\n","import M$plugin$Infocoordinates from '/home/carmenmarquez/proyectos/IGN/REPO CNIG/API-CNIG/api-ign-js/src/plugins/infocoordinates/src/facade/js/infocoordinates';\nimport M$control$InfocoordinatesControl from '/home/carmenmarquez/proyectos/IGN/REPO CNIG/API-CNIG/api-ign-js/src/plugins/infocoordinates/src/facade/js/infocoordinatescontrol';\nimport M$impl$control$InfocoordinatesControl from '/home/carmenmarquez/proyectos/IGN/REPO CNIG/API-CNIG/api-ign-js/src/plugins/infocoordinates/src/impl/ol/js/infocoordinatescontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.plugin.Infocoordinates = M$plugin$Infocoordinates;\nwindow.M.control.InfocoordinatesControl = M$control$InfocoordinatesControl;\nwindow.M.impl.control.InfocoordinatesControl = M$impl$control$InfocoordinatesControl;\n"],"sourceRoot":""}